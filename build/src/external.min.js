/*
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var f=0;return function(){return f<e.length?{done:!1,value:e[f++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.makeIterator=function(e){var f="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return f?f.call(e):$jscomp.arrayIterator(e)};
$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,f,c){e!=Array.prototype&&e!=Object.prototype&&(e[f]=c.value)};
$jscomp.polyfill=function(e,f,c,b){if(f){c=$jscomp.global;e=e.split(".");for(b=0;b<e.length-1;b++){var a=e[b];a in c||(c[a]={});c=c[a]}e=e[e.length-1];b=c[e];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:f})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function f(){this.batch_=null}function c(b){return b instanceof a?b:new a(function(a,d){a(b)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;f.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var b=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(a){b(a,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};f.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var a=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};a.prototype.createResolveAndReject_=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof a)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};a.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};a.prototype.reject_=function(a){this.settle_(2,a)};a.prototype.fulfill_=function(a){this.settle_(1,a)};a.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)h.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var h=new f;a.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};a.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(l){d.reject(l)}};a.prototype.then=function(b,g){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(A){h(A)}}:b}var c,h,e=new a(function(a,b){c=a;h=b});this.callWhenSettled_(d(b,c),d(g,h));return e};
a.prototype.catch=function(a){return this.then(void 0,a)};a.prototype.callWhenSettled_=function(a,b){function d(){switch(g.state_){case 1:a(g.result_);break;case 2:b(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?h.asyncExecute(d):this.onSettledCallbacks_.push(d)};a.resolve=c;a.reject=function(b){return new a(function(a,d){d(b)})};a.race=function(b){return new a(function(a,d){for(var g=$jscomp.makeIterator(b),h=g.next();!h.done;h=g.next())c(h.value).callWhenSettled_(a,
d)})};a.all=function(b){var d=$jscomp.makeIterator(b),h=d.next();return h.done?c([]):new a(function(a,b){function g(b){return function(d){e[b]=d;f--;0==f&&a(e)}}var e=[],f=0;do e.push(void 0),f++,c(h.value).callWhenSettled_(g(e.length-1),b),h=d.next();while(!h.done)})};return a},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var e={a:!0},f={};try{return f.__proto__=e,f.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,f){e.__proto__=f;if(e.__proto__!==f)throw new TypeError(e+" is not extensible");return e}:null;$jscomp.polyfill("Object.setPrototypeOf",function(e){return e||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(e){return e?e:function(e,c,b){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==b||b>a)b=a;b=Number(b);0>b&&(b=Math.max(0,a+b));for(c=Number(c||0);c<b;c++)this[c]=e;return this}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(e,f){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function e(c){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+f++,c)}var f=0;return e}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.asyncIterator;e||(e=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};
$jscomp.iteratorFromArray=function(e,f){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var c=0,b={next:function(){if(c<e.length){var a=c++;return{value:f(a,e[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
$jscomp.findInternal=function(e,f,c){e instanceof String&&(e=String(e));for(var b=e.length,a=0;a<b;a++){var h=e[a];if(f.call(c,h,a,e))return{i:a,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(e,c){return $jscomp.findInternal(this,e,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e,c){return c})}},"es8","es3");
$jscomp.polyfill("Array.prototype.entries",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e,c){return[e,c]})}},"es6","es3");$jscomp.polyfill("Math.sign",function(e){return e?e:function(e){e=Number(e);return 0===e||isNaN(e)?e:0<e?1:-1}},"es6","es3");$jscomp.polyfill("Math.log10",function(e){return e?e:function(e){return Math.log(e)/Math.LN10}},"es6","es3");$jscomp.polyfill("Math.log2",function(e){return e?e:function(e){return Math.log(e)/Math.LN2}},"es6","es3");
$jscomp.polyfill("Math.log1p",function(e){return e?e:function(e){e=Number(e);if(.25>e&&-.25<e){for(var c=e,b=1,a=e,h=0,d=1;h!=a;)c*=e,d*=-1,a=(h=a)+d*c/++b;return a}return Math.log(1+e)}},"es6","es3");$jscomp.polyfill("Math.expm1",function(e){return e?e:function(e){e=Number(e);if(.25>e&&-.25<e){for(var c=e,b=1,a=e,h=0;h!=a;)c*=e/++b,a=(h=a)+c;return a}return Math.exp(e)-1}},"es6","es3");
$jscomp.polyfill("Array.from",function(e){return e?e:function(e,c,b){c=null!=c?c:function(a){return a};var a=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof h){e=h.call(e);for(var d=0;!(h=e.next()).done;)a.push(c.call(b,h.value,d++))}else for(h=e.length,d=0;d<h;d++)a.push(c.call(b,e[d],d));return a}},"es6","es3");
$jscomp.checkStringArgs=function(e,f,c){if(null==e)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return e+""};
$jscomp.polyfill("String.prototype.repeat",function(e){return e?e:function(e){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var b="";e;)if(e&1&&(b+=c),e>>>=1)c+=c;return b}},"es6","es3");$jscomp.stringPadding=function(e,f){e=void 0!==e?String(e):" ";return 0<f&&e?e.repeat(Math.ceil(f/e.length)).substring(0,f):""};
$jscomp.polyfill("String.prototype.padEnd",function(e){return e?e:function(e,c){var b=$jscomp.checkStringArgs(this,null,"padStart");return b+$jscomp.stringPadding(c,e-b.length)}},"es8","es3");$jscomp.owns=function(e,f){return Object.prototype.hasOwnProperty.call(e,f)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(e,f){for(var c=1;c<arguments.length;c++){var b=arguments[c];if(b)for(var a in b)$jscomp.owns(b,a)&&(e[a]=b[a])}return e};
$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.is",function(e){return e?e:function(e,c){return e===c?0!==e||1/e===1/c:e!==e&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(e){return e?e:function(e,c){var b=this;b instanceof String&&(b=String(b));var a=b.length;c=c||0;for(0>c&&(c=Math.max(c+a,0));c<a;c++){var h=b[c];if(h===e||Object.is(h,e))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(e){return e?e:function(e,c){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,c||0)}},"es6","es3");$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var f=function(){};f.prototype=e;return new f};
$jscomp.construct=function(){function e(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if("undefined"!=typeof Reflect&&Reflect.construct){if(e())return Reflect.construct;var f=Reflect.construct;return function(c,b,a){c=f(c,b);a&&Reflect.setPrototypeOf(c,a.prototype);return c}}return function(c,b,a){void 0===a&&(a=c);a=$jscomp.objectCreate(a.prototype||Object.prototype);return Function.prototype.apply.call(c,a,b)||a}}();
$jscomp.polyfill("Reflect.construct",function(e){return $jscomp.construct},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var e={},f=Object.create(new $jscomp.global.Proxy(e,{get:function(c,b,a){return c==e&&"q"==b&&a==f}}));return!0===f.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(e){function f(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new e([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(p){return!1}}function c(){}function b(a){if(!$jscomp.owns(a,h)){var b=new c;$jscomp.defineProperty(a,h,{value:b})}}function a(a){var d=Object[a];d&&(Object[a]=function(a){if(a instanceof c)return a;b(a);return d(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&
$jscomp.ES6_CONFORMANCE)return e}else if(f())return e;var h="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var d=0,g=function(a){this.id_=(d+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(a,d){b(a);if(!$jscomp.owns(a,h))throw Error("WeakMap key fail: "+a);a[h][this.id_]=d;return this};g.prototype.get=function(a){return $jscomp.owns(a,h)?a[h][this.id_]:void 0};g.prototype.has=
function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)};g.prototype.delete=function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)?delete a[h][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(e){function f(){if($jscomp.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new e($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var d=b.entries(),g=d.next();if(g.done||g.value[0]!=a||"s"!=g.value[1])return!1;g=d.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!d.next().done?!1:!0}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(f())return e;$jscomp.initSymbolIterator();var c=new WeakMap,b=function(a){this.data_={};this.head_=d();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};b.prototype.set=function(b,d){b=0===b?0:b;var g=a(this,b);g.list||(g.list=this.data_[g.id]=[]);g.entry?g.entry.value=d:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:d},g.list.push(g.entry),this.head_.previous.next=g.entry,this.head_.previous=g.entry,this.size++);return this};b.prototype.delete=function(b){b=a(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=d();this.size=0};b.prototype.has=function(b){return!!a(this,b).entry};
b.prototype.get=function(b){return(b=a(this,b).entry)&&b.value};b.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};b.prototype.keys=function(){return h(this,function(a){return a.key})};b.prototype.values=function(){return h(this,function(a){return a.value})};b.prototype.forEach=function(a,b){for(var d=this.entries(),g;!(g=d.next()).done;)g=g.value,a.call(b,g[1],g[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var a=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++g,c.set(b,d)):d="p_"+b;var h=a.data_[d];if(h&&$jscomp.owns(a.data_,d))for(a=0;a<h.length;a++){var e=h[a];if(b!==b&&e.key!==e.key||b===e.key)return{id:d,list:h,index:a,entry:e}}return{id:d,list:h,index:-1,entry:void 0}},h=function(a,b){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}})},d=function(){var a={};return a.previous=
a.next=a.head=a},g=0;return b},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(e){return e?e:function(){return[]}},"es6","es5");$jscomp.polyfill("Number.isNaN",function(e){return e?e:function(e){return"number"===typeof e&&isNaN(e)}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(e){return e?e:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}},"es6","es3");
(function(e,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?exports.axios=f():e.axios=f()})(this,function(){return function(e){function f(b){if(c[b])return c[b].exports;var a=c[b]={exports:{},id:b,loaded:!1};e[b].call(a.exports,a,a.exports,f);a.loaded=!0;return a.exports}var c={};f.m=e;f.c=c;f.p="";return f(0)}([function(e,f,c){e.exports=c(1)},function(e,f,c){function b(b){b=new d(b);var g=h(d.prototype.request,
b);a.extend(g,d.prototype,b);a.extend(g,b);return g}var a=c(2),h=c(3),d=c(5),g=c(22);f=c(11);var k=b(f);k.Axios=d;k.create=function(a){return b(g(k.defaults,a))};k.Cancel=c(23);k.CancelToken=c(24);k.isCancel=c(10);k.all=function(a){return Promise.all(a)};k.spread=c(25);e.exports=k;e.exports.default=k},function(e,f,c){function b(a){return"[object Array]"===n.call(a)}function a(a){return null!==a&&"object"===typeof a}function h(a){return"[object Function]"===n.call(a)}function d(a,d){if(null!==a&&"undefined"!==
typeof a)if("object"!==typeof a&&(a=[a]),b(a))for(var g=0,c=a.length;g<c;g++)d.call(null,a[g],g,a);else for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&d.call(null,a[g],g,a)}function g(){function a(a,d){b[d]="object"===typeof b[d]&&"object"===typeof a?g(b[d],a):a}for(var b={},c=0,h=arguments.length;c<h;c++)d(arguments[c],a);return b}function k(){function a(a,d){b[d]="object"===typeof b[d]&&"object"===typeof a?k(b[d],a):"object"===typeof a?k({},a):a}for(var b={},g=0,c=arguments.length;g<c;g++)d(arguments[g],
a);return b}var l=c(3);f=c(4);var n=Object.prototype.toString;e.exports={isArray:b,isArrayBuffer:function(a){return"[object ArrayBuffer]"===n.call(a)},isBuffer:f,isFormData:function(a){return"undefined"!==typeof FormData&&a instanceof FormData},isArrayBufferView:function(a){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer&&a.buffer instanceof ArrayBuffer},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isObject:a,
isUndefined:function(a){return"undefined"===typeof a},isDate:function(a){return"[object Date]"===n.call(a)},isFile:function(a){return"[object File]"===n.call(a)},isBlob:function(a){return"[object Blob]"===n.call(a)},isFunction:h,isStream:function(b){return a(b)&&h(b.pipe)},isURLSearchParams:function(a){return"undefined"!==typeof URLSearchParams&&a instanceof URLSearchParams},isStandardBrowserEnv:function(){return"undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&
"NS"!==navigator.product?"undefined"!==typeof window&&"undefined"!==typeof document:!1},forEach:d,merge:g,deepMerge:k,extend:function(a,b,g){d(b,function(b,d){a[d]=g&&"function"===typeof b?l(b,g):b});return a},trim:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,f){e.exports=function(c,b){return function(){for(var a=Array(arguments.length),h=0;h<a.length;h++)a[h]=arguments[h];return c.apply(b,a)}}},function(e,f){e.exports=function(c){return null!=c&&null!=c.constructor&&"function"===
typeof c.constructor.isBuffer&&c.constructor.isBuffer(c)}},function(e,f,c){function b(a){this.defaults=a;this.interceptors={request:new d,response:new d}}var a=c(2),h=c(6),d=c(7),g=c(8),k=c(22);b.prototype.request=function(a,b){"string"===typeof a?(a=b||{},a.url=a):a=a||{};a=k(this.defaults,a);a.method=a.method?a.method.toLowerCase():"get";var d=[g,void 0];a=Promise.resolve(a);this.interceptors.request.forEach(function(a){d.unshift(a.fulfilled,a.rejected)});for(this.interceptors.response.forEach(function(a){d.push(a.fulfilled,
a.rejected)});d.length;)a=a.then(d.shift(),d.shift());return a};b.prototype.getUri=function(a){a=k(this.defaults,a);return h(a.url,a.params,a.paramsSerializer).replace(/^\?/,"")};a.forEach(["delete","get","head","options"],function(d){b.prototype[d]=function(b,g){return this.request(a.merge(g||{},{method:d,url:b}))}});a.forEach(["post","put","patch"],function(d){b.prototype[d]=function(b,g,c){return this.request(a.merge(c||{},{method:d,url:b,data:g}))}});e.exports=b},function(e,f,c){function b(a){return encodeURIComponent(a).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var a=c(2);e.exports=function(c,d,g){if(!d)return c;if(g)d=g(d);else if(a.isURLSearchParams(d))d=d.toString();else{var h=[];a.forEach(d,function(d,g){null!==d&&"undefined"!==typeof d&&(a.isArray(d)?g+="[]":d=[d],a.forEach(d,function(d){a.isDate(d)?d=d.toISOString():a.isObject(d)&&(d=JSON.stringify(d));h.push(b(g)+"="+b(d))}))});d=h.join("&")}d&&(g=c.indexOf("#"),-1!==g&&
(c=c.slice(0,g)),c+=(-1===c.indexOf("?")?"?":"&")+d);return c}},function(e,f,c){function b(){this.handlers=[]}var a=c(2);b.prototype.use=function(a,b){this.handlers.push({fulfilled:a,rejected:b});return this.handlers.length-1};b.prototype.eject=function(a){this.handlers[a]&&(this.handlers[a]=null)};b.prototype.forEach=function(b){a.forEach(this.handlers,function(a){null!==a&&b(a)})};e.exports=b},function(e,f,c){var b=c(2),a=c(9),h=c(10),d=c(11),g=c(20),k=c(21);e.exports=function(c){c.cancelToken&&
c.cancelToken.throwIfRequested();c.baseURL&&!g(c.url)&&(c.url=k(c.baseURL,c.url));c.headers=c.headers||{};c.data=a(c.data,c.headers,c.transformRequest);c.headers=b.merge(c.headers.common||{},c.headers[c.method]||{},c.headers||{});b.forEach("delete get head post put patch common".split(" "),function(a){delete c.headers[a]});return(c.adapter||d.adapter)(c).then(function(b){c.cancelToken&&c.cancelToken.throwIfRequested();b.data=a(b.data,b.headers,c.transformResponse);return b},function(b){h(b)||(c.cancelToken&&
c.cancelToken.throwIfRequested(),b&&b.response&&(b.response.data=a(b.response.data,b.response.headers,c.transformResponse)));return Promise.reject(b)})}},function(e,f,c){var b=c(2);e.exports=function(a,c,d){b.forEach(d,function(b){a=b(a,c)});return a}},function(e,f){e.exports=function(c){return!(!c||!c.__CANCEL__)}},function(e,f,c){function b(b,d){!a.isUndefined(b)&&a.isUndefined(b["Content-Type"])&&(b["Content-Type"]=d)}var a=c(2),h=c(12),d={"Content-Type":"application/x-www-form-urlencoded"},g=
{adapter:function(){var a;"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=c(13):"undefined"!==typeof XMLHttpRequest&&(a=c(13));return a}(),transformRequest:[function(d,g){h(g,"Accept");h(g,"Content-Type");return a.isFormData(d)||a.isArrayBuffer(d)||a.isBuffer(d)||a.isStream(d)||a.isFile(d)||a.isBlob(d)?d:a.isArrayBufferView(d)?d.buffer:a.isURLSearchParams(d)?(b(g,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):a.isObject(d)?(b(g,"application/json;charset=utf-8"),
JSON.stringify(d)):d}],transformResponse:[function(a){if("string"===typeof a)try{a=JSON.parse(a)}catch(l){}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(a){return 200<=a&&300>a},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(a){g.headers[a]={}});a.forEach(["post","put","patch"],function(b){g.headers[b]=a.merge(d)});e.exports=g},function(e,f,c){var b=c(2);e.exports=
function(a,c){b.forEach(a,function(b,g){g!==c&&g.toUpperCase()===c.toUpperCase()&&(a[c]=b,delete a[g])})}},function(e,f,c){var b=c(2),a=c(14),h=c(6),d=c(17),g=c(18),k=c(15);e.exports=function(e){return new Promise(function(f,l){var n=e.data,p=e.headers;b.isFormData(n)&&delete p["Content-Type"];var u=new XMLHttpRequest;e.auth&&(p.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||"")));u.open(e.method.toUpperCase(),h(e.url,e.params,e.paramsSerializer),!0);u.timeout=e.timeout;u.onreadystatechange=
function(){if(u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))){var b="getAllResponseHeaders"in u?d(u.getAllResponseHeaders()):null;a(f,l,{data:e.responseType&&"text"!==e.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:b,config:e,request:u});u=null}};u.onabort=function(){u&&(l(k("Request aborted",e,"ECONNABORTED",u)),u=null)};u.onerror=function(){l(k("Network Error",e,null,u));u=null};u.ontimeout=function(){l(k("timeout of "+
e.timeout+"ms exceeded",e,"ECONNABORTED",u));u=null};if(b.isStandardBrowserEnv()){var A=c(19);(A=(e.withCredentials||g(e.url))&&e.xsrfCookieName?A.read(e.xsrfCookieName):void 0)&&(p[e.xsrfHeaderName]=A)}"setRequestHeader"in u&&b.forEach(p,function(a,b){"undefined"===typeof n&&"content-type"===b.toLowerCase()?delete p[b]:u.setRequestHeader(b,a)});e.withCredentials&&(u.withCredentials=!0);if(e.responseType)try{u.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t;}"function"===typeof e.onDownloadProgress&&
u.addEventListener("progress",e.onDownloadProgress);"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress);e.cancelToken&&e.cancelToken.promise.then(function(a){u&&(u.abort(),l(a),u=null)});void 0===n&&(n=null);u.send(n)})}},function(e,f,c){var b=c(15);e.exports=function(a,c,d){var g=d.config.validateStatus;!g||g(d.status)?a(d):c(b("Request failed with status code "+d.status,d.config,null,d.request,d))}},function(e,f,c){var b=c(16);e.exports=function(a,
c,d,g,e){return b(Error(a),c,d,g,e)}},function(e,f){e.exports=function(c,b,a,h,d){c.config=b;a&&(c.code=a);c.request=h;c.response=d;c.isAxiosError=!0;c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}};return c}},function(e,f,c){var b=c(2),a="age authorization content-length content-type etag expires from host if-modified-since if-unmodified-since last-modified location max-forwards proxy-authorization referer retry-after user-agent".split(" ");
e.exports=function(c){var d={},g,h,e;if(!c)return d;b.forEach(c.split("\n"),function(c){e=c.indexOf(":");g=b.trim(c.substr(0,e)).toLowerCase();h=b.trim(c.substr(e+1));!g||d[g]&&0<=a.indexOf(g)||(d[g]="set-cookie"===g?(d[g]?d[g]:[]).concat([h]):d[g]?d[g]+", "+h:h)});return d}},function(e,f,c){var b=c(2);e.exports=b.isStandardBrowserEnv()?function(){function a(a){c&&(d.setAttribute("href",a),a=d.href);d.setAttribute("href",a);return{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,
search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:"/"===d.pathname.charAt(0)?d.pathname:"/"+d.pathname}}var c=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a");var g=a(window.location.href);return function(d){d=b.isString(d)?a(d):d;return d.protocol===g.protocol&&d.host===g.host}}():function(){return function(){return!0}}()},function(e,f,c){var b=c(2);e.exports=b.isStandardBrowserEnv()?function(){return{write:function(a,
c,d,g,e,f){var h=[];h.push(a+"="+encodeURIComponent(c));b.isNumber(d)&&h.push("expires="+(new Date(d)).toGMTString());b.isString(g)&&h.push("path="+g);b.isString(e)&&h.push("domain="+e);!0===f&&h.push("secure");document.cookie=h.join("; ")},read:function(a){return(a=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)")))?decodeURIComponent(a[3]):null},remove:function(a){this.write(a,"",Date.now()-864E5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},
function(e,f){e.exports=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}},function(e,f){e.exports=function(c,b){return b?c.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,""):c}},function(e,f,c){var b=c(2);e.exports=function(a,c){c=c||{};var d={};b.forEach(["url","method","params","data"],function(a){"undefined"!==typeof c[a]&&(d[a]=c[a])});b.forEach(["headers","auth","proxy"],function(g){b.isObject(c[g])?d[g]=b.deepMerge(a[g],c[g]):"undefined"!==typeof c[g]?d[g]=c[g]:b.isObject(a[g])?d[g]=b.deepMerge(a[g]):
"undefined"!==typeof a[g]&&(d[g]=a[g])});b.forEach("baseURL transformRequest transformResponse paramsSerializer timeout withCredentials adapter responseType xsrfCookieName xsrfHeaderName onUploadProgress onDownloadProgress maxContentLength validateStatus maxRedirects httpAgent httpsAgent cancelToken socketPath".split(" "),function(b){"undefined"!==typeof c[b]?d[b]=c[b]:"undefined"!==typeof a[b]&&(d[b]=a[b])});return d}},function(e,f){function c(b){this.message=b}c.prototype.toString=function(){return"Cancel"+
(this.message?": "+this.message:"")};c.prototype.__CANCEL__=!0;e.exports=c},function(e,f,c){function b(b){if("function"!==typeof b)throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(a){d=a});var g=this;b(function(b){g.reason||(g.reason=new a(b),d(g.reason))})}var a=c(23);b.prototype.throwIfRequested=function(){if(this.reason)throw this.reason;};b.source=function(){var a;return{token:new b(function(b){a=b}),cancel:a}};e.exports=b},function(e,f){e.exports=function(c){return function(b){return c.apply(null,
b)}}}])});/*
 wavesurfer.js 2.1.2 (2019-01-07)
 https://github.com/katspaugh/wavesurfer.js
 @license BSD-3-Clause
 **************************************** !*\
  !*** ./node_modules/debounce/index.js ***!
  \*************************************** no static exports found  *********************** !*\
  !*** ./src/drawer.js ***!
  \********************** ./util  *********************************** !*\
  !*** ./src/drawer.multicanvas.js ***!
  \********************************** ./drawer  ***************************** !*\
  !*** ./src/mediaelement.js ***!
  \**************************** ./webaudio  ************************** !*\
  !*** ./src/peakcache.js ***!
  \************************* ************************** !*\
  !*** ./src/util/ajax.js ***!
  \************************* ./observer  **************************** !*\
  !*** ./src/util/extend.js ***!
  \*************************** *************************** !*\
  !*** ./src/util/frame.js ***!
  \************************** ./request-animation-frame  **************************** !*\
  !*** ./src/util/get-id.js ***!
  \*************************** *************************** !*\
  !*** ./src/util/index.js ***!
  \************************** ./ajax  ./get-id  ./max  ./min  ./extend  ./style  ./frame  debounce  ./prevent-click  ************************* !*\
  !*** ./src/util/max.js ***!
  \************************ ************************* !*\
  !*** ./src/util/min.js ***!
  \************************ ****************************** !*\
  !*** ./src/util/observer.js ***!
  \***************************** *********************************** !*\
  !*** ./src/util/prevent-click.js ***!
  \********************************** ********************************************* !*\
  !*** ./src/util/request-animation-frame.js ***!
  \******************************************** *************************** !*\
  !*** ./src/util/style.js ***!
  \************************** *************************** !*\
  !*** ./src/wavesurfer.js ***!
  \************************** ./drawer.multicanvas  ./mediaelement  ./peakcache  ************************* !*\
  !*** ./src/webaudio.js ***!
  \*************************/
(function(e,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("WaveSurfer",[],f):"object"===typeof exports?exports.WaveSurfer=f():e.WaveSurfer=f()})(window,function(){return function(e){function f(b){if(c[b])return c[b].exports;var a=c[b]={i:b,l:!1,exports:{}};e[b].call(a.exports,a,a.exports,f);a.l=!0;return a.exports}var c={};f.m=e;f.c=c;f.d=function(b,a,c){f.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:c})};f.r=function(b){"undefined"!==
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})};f.t=function(b,a){a&1&&(b=f(b));if(a&8||a&4&&"object"===typeof b&&b&&b.__esModule)return b;var c=Object.create(null);f.r(c);Object.defineProperty(c,"default",{enumerable:!0,value:b});if(a&2&&"string"!=typeof b)for(var d in b)f.d(c,d,function(a){return b[a]}.bind(null,d));return c};f.n=function(b){var a=b&&b.__esModule?function(){return b["default"]}:function(){return b};
f.d(a,"a",a);return a};f.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};f.p="";return f(f.s="./src/wavesurfer.js")}({"./node_modules/debounce/index.js":function(e,f){function c(b,a,c){function d(){var k=Date.now()-f;k<a&&0<=k?g=setTimeout(d,a-k):(g=null,c||(p=b.apply(e,h),e=h=null))}var g,h,e,f,p;null==a&&(a=100);var r=function(){e=this;h=arguments;f=Date.now();var k=c&&!g;g||(g=setTimeout(d,a));k&&(p=b.apply(e,h),e=h=null);return p};r.clear=function(){g&&(clearTimeout(g),g=null)};
r.flush=function(){g&&(p=b.apply(e,h),e=h=null,clearTimeout(g),g=null)};return r}c.debounce=c;e.exports=c},"./src/drawer.js":function(e,f,c){function b(a){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b(a)}function a(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=
!0);Object.defineProperty(a,g.key,g)}}function h(b,d,g){d&&a(b.prototype,d);g&&a(b,g);return b}function d(a){d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return d(a)}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&k(a,b)}function k(a,b){k=Object.setPrototypeOf||function(a,
b){a.__proto__=b;return a};return k(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,d):{};g.get||g.set?Object.defineProperty(b,d,g):b[d]=a[d]}b.default=a;return b}(c("./src/util/index.js"));c=function(a){function c(a,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var h=d(c).call(this);if(!h||"object"!==b(h)&&"function"!==typeof h){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=this}h.container=a;h.params=g;h.width=0;h.height=g.height*h.params.pixelRatio;h.lastPos=0;h.wrapper=null;return h}g(c,a);h(c,[{key:"style",value:function(a,b){return l.style(a,b)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave"));this.style(this.wrapper,{display:"block",
position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"});(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%"});this.setupWrapperEvents()}},{key:"handleEvent",value:function(a,b){!b&&a.preventDefault();a=a.targetTouches?a.targetTouches[0].clientX:a.clientX;b=this.wrapper.getBoundingClientRect();var d=this.width,g=this.getWidth();!this.params.fillParent&&d<g?(a=this.params.pixelRatio/d*(a-b.left)||0,1<a&&(a=1)):a=(a-b.left+
this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0;return a}},{key:"setupWrapperEvents",value:function(){var a=this;this.wrapper.addEventListener("click",function(b){var d=a.wrapper.offsetHeight-a.wrapper.clientHeight;if(0!=d){var g=a.wrapper.getBoundingClientRect();if(b.clientY>=g.bottom-d)return}a.params.interact&&a.fireEvent("click",b,a.handleEvent(b))});this.wrapper.addEventListener("scroll",function(b){return a.fireEvent("scroll",b)})}},{key:"drawPeaks",value:function(a,b,d,g){this.setWidth(b)||
this.clearWave();this.params.barWidth?this.drawBars(a,0,d,g):this.drawWave(a,0,d,g)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(a){this.recenterOnPosition(this.wrapper.scrollWidth*a,!0)}},{key:"recenterOnPosition",value:function(a,b){var d=this.wrapper.scrollLeft,g=~~(this.wrapper.clientWidth/2),c=this.wrapper.scrollWidth-this.wrapper.clientWidth;a-=g;var h=a-d;0!=c&&(!b&&-g<=h&&h<g&&(h=Math.max(-5,Math.min(5,h)),a=d+h),a=
Math.max(0,Math.min(c,a)),a!=d&&(this.wrapper.scrollLeft=a))}},{key:"getScrollX",value:function(){var a=this.params.pixelRatio,b=Math.round(this.wrapper.scrollLeft*a);this.params.scrollParent&&(a=~~(this.wrapper.scrollWidth*a-this.getWidth()),b=Math.min(a,Math.max(0,b)));return b}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(a){if(this.width==a)return!1;this.width=a;this.params.fillParent||this.params.scrollParent?
this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"});this.updateSize();return!0}},{key:"setHeight",value:function(a){if(a==this.height)return!1;this.height=a;this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"});this.updateSize();return!0}},{key:"progress",value:function(a){var b=1/this.params.pixelRatio,d=Math.round(a*this.width)*b;if(d<this.lastPos||d-this.lastPos>=b)this.lastPos=d,this.params.scrollParent&&this.params.autoCenter&&
this.recenterOnPosition(~~(this.wrapper.scrollWidth*a)),this.updateProgress(d)}},{key:"destroy",value:function(){this.unAll();this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(a,b,d,g){}},{key:"drawWave",value:function(a,b,d,g){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(a){}}]);return c}(l.Observer);
f.default=c;e.exports=f.default},"./src/drawer.multicanvas.js":function(e,f,c){function b(a){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b(a)}function a(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function h(b,d,g){d&&a(b.prototype,
d);g&&a(b,g);return b}function d(a){d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return d(a)}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&k(a,b)}function k(a,b){k=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return k(a,b)}Object.defineProperty(f,"__esModule",
{value:!0});f.default=void 0;var l=function(a){return a&&a.__esModule?a:{default:a}}(c("./src/drawer.js")),n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,d):{};g.get||g.set?Object.defineProperty(b,d,g):b[d]=a[d]}b.default=a;return b}(c("./src/util/index.js"));c=function(a){function c(a,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
a=d(c).call(this,a,g);if(!a||"object"!==b(a)&&"function"!==typeof a){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=this}a.maxCanvasWidth=g.maxCanvasWidth;a.maxCanvasElementWidth=Math.round(g.maxCanvasWidth/g.pixelRatio);a.hasProgressCanvas=g.waveColor!=g.progressColor;a.halfPixel=.5/g.pixelRatio;a.canvases=[];a.progressWave=null;return a}g(c,a);h(c,[{key:"init",value:function(){this.createWrapper();this.createElements()}},{key:"createElements",
value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}));this.addCanvas();this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var a=
this,b=Math.ceil(Math.round(this.width/this.params.pixelRatio)/this.maxCanvasElementWidth);this.canvases.length<b;)this.addCanvas();for(;this.canvases.length>b;)this.removeCanvas();this.canvases.forEach(function(b,d){var g=a.maxCanvasWidth+2*Math.ceil(a.params.pixelRatio/2);d==a.canvases.length-1&&(g=a.width-a.maxCanvasWidth*(a.canvases.length-1));a.updateDimensions(b,g,a.height);a.clearWaveForEntry(b)})}},{key:"addCanvas",value:function(){var a={},b=this.maxCanvasElementWidth*this.canvases.length;
a.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:b+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}));a.waveCtx=a.wave.getContext("2d");this.hasProgressCanvas&&(a.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:b+"px",top:0,bottom:0,height:"100%"})),a.progressCtx=a.progress.getContext("2d"));this.canvases.push(a)}},{key:"removeCanvas",value:function(){var a=this.canvases.pop();
a.wave.parentElement.removeChild(a.wave);this.hasProgressCanvas&&a.progress.parentElement.removeChild(a.progress)}},{key:"updateDimensions",value:function(a,b,d){var g=Math.round(b/this.params.pixelRatio),c=Math.round(this.width/this.params.pixelRatio);a.start=a.waveCtx.canvas.offsetLeft/c||0;a.end=a.start+g/c;a.waveCtx.canvas.width=b;a.waveCtx.canvas.height=d;this.style(a.waveCtx.canvas,{width:g+"px"});this.style(this.progressWave,{display:"block"});this.hasProgressCanvas&&(a.progressCtx.canvas.width=
b,a.progressCtx.canvas.height=d,this.style(a.progressCtx.canvas,{width:g+"px"}))}},{key:"clearWave",value:function(){var a=this;this.canvases.forEach(function(b){return a.clearWaveForEntry(b)})}},{key:"clearWaveForEntry",value:function(a){a.waveCtx.clearRect(0,0,a.waveCtx.canvas.width,a.waveCtx.canvas.height);this.hasProgressCanvas&&a.progressCtx.clearRect(0,0,a.progressCtx.canvas.width,a.progressCtx.canvas.height)}},{key:"drawBars",value:function(a,b,d,g){var c=this;return this.prepareDraw(a,b,d,
g,function(a){var b=a.absmax,h=a.offsetY,e=a.halfH,f=a.peaks;if(void 0!==d){a=a.hasMinVals?2:1;var k=c.params.barWidth*c.params.pixelRatio,l=k+(null===c.params.barGap?Math.max(c.params.pixelRatio,~~(k/2)):Math.max(c.params.pixelRatio,c.params.barGap*c.params.pixelRatio)),m=f.length/a/c.width,q;for(q=d;q<g;q+=l){var n=Math.round((f[Math.floor(q*m*a)]||0)/b*e);c.fillRect(q+c.halfPixel,e-n+h,k+c.halfPixel,2*n)}}})}},{key:"drawWave",value:function(a,b,d,g){var c=this;return this.prepareDraw(a,b,d,g,function(a){var b=
a.absmax,h=a.offsetY,e=a.halfH,f=a.peaks;if(!a.hasMinVals){a=[];var k=f.length,l;for(l=0;l<k;l++)a[2*l]=f[l],a[2*l+1]=-f[l];f=a}void 0!==d&&c.drawLine(f,b,e,h,d,g);c.fillRect(0,e+h-c.halfPixel,c.width,c.halfPixel)})}},{key:"drawLine",value:function(a,b,d,g,c,h){var e=this;this.canvases.forEach(function(f){e.setFillStyles(f);e.drawLineToContext(f,f.waveCtx,a,b,d,g,c,h);e.drawLineToContext(f,f.progressCtx,a,b,d,g,c,h)})}},{key:"drawLineToContext",value:function(a,b,d,g,c,h,e,f){if(b){var k=d.length/
2,l=this.params.fillParent&&this.width!=k?this.width/k:1,n=Math.round(k*a.start);a=Math.round(k*a.end)+1;if(!(n>f||a<e)){e=Math.min(n,e);f=Math.max(a,f);b.beginPath();b.moveTo((e-n)*l+this.halfPixel,c+h);for(a=e;a<f;a++)b.lineTo((a-n)*l+this.halfPixel,c-Math.round((d[2*a]||0)/g*c)+h);for(--f;f>=e;f--)b.lineTo((f-n)*l+this.halfPixel,c-Math.round((d[2*f+1]||0)/g*c)+h);b.closePath();b.fill()}}}},{key:"fillRect",value:function(a,b,d,g){var c=Math.min(Math.ceil((a+d)/this.maxCanvasWidth)+1,this.canvases.length),
h;for(h=Math.floor(a/this.maxCanvasWidth);h<c;h++){var e=this.canvases[h],f=h*this.maxCanvasWidth,k=Math.max(a,h*this.maxCanvasWidth),l=b,n=Math.min(a+d,h*this.maxCanvasWidth+e.waveCtx.canvas.width),p=b+g;k<n&&(this.setFillStyles(e),this.fillRectToContext(e.waveCtx,k-f,l,n-k,p-l),this.fillRectToContext(e.progressCtx,k-f,l,n-k,p-l))}}},{key:"prepareDraw",value:function(a,b,d,g,c){var h=this;return n.frame(function(){if(a[0]instanceof Array){var e=a;if(h.params.splitChannels)return h.setHeight(e.length*
h.params.height*h.params.pixelRatio),e.forEach(function(a,b){return h.prepareDraw(a,b,d,g,c)});a=e[0]}e=1/h.params.barHeight;if(h.params.normalize){e=n.max(a);var f=n.min(a);e=-f>e?-f:e}f=[].some.call(a,function(a){return 0>a});var k=h.params.height*h.params.pixelRatio;return c({absmax:e,hasMinVals:f,height:k,offsetY:k*b||0,halfH:k/2,peaks:a})})()}},{key:"fillRectToContext",value:function(a,b,d,g,c){a&&a.fillRect(b,d,g,c)}},{key:"setFillStyles",value:function(a){a.waveCtx.fillStyle=this.params.waveColor;
this.hasProgressCanvas&&(a.progressCtx.fillStyle=this.params.progressColor)}},{key:"getImage",value:function(a,b){var d=this.canvases.map(function(d){return d.wave.toDataURL(a,b)});return 1<d.length?d:d[0]}},{key:"updateProgress",value:function(a){this.style(this.progressWave,{width:a+"px"})}}]);return c}(l.default);f.default=c;e.exports=f.default},"./src/mediaelement.js":function(e,f,c){function b(a){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b(a)}function a(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function h(b,d,g){d&&a(b.prototype,d);g&&a(b,g);return b}function d(a,d){if(d&&("object"===b(d)||"function"===typeof d))return d;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}
function g(a,b,d){g="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(a,b,d){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=k(a),null!==a););if(a)return b=Object.getOwnPropertyDescriptor(a,b),b.get?b.get.call(d):b.value};return g(a,b,d||a)}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return k(a)}function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&n(a,b)}function n(a,b){n=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return n(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var p=function(a){return a&&a.__esModule?a:{default:a}}(c("./src/webaudio.js"));(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?
Object.getOwnPropertyDescriptor(a,d):{};g.get||g.set?Object.defineProperty(b,d,g):b[d]=a[d]}b.default=a;return b})(c("./src/util/index.js"));c=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var g=d(this,k(b).call(this,a));g.params=a;g.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0};g.mediaType=a.mediaType.toLowerCase();g.elementPosition=a.elementPosition;g.peaks=null;g.playbackRate=
1;g.volume=1;g.buffer=null;g.onPlayEnd=null;return g}l(b,a);h(b,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate);this.createTimer()}},{key:"createTimer",value:function(){var a=this;this.on("play",function t(){a.isPaused()||(a.fireEvent("audioprocess",a.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(t))});this.on("pause",function(){a.fireEvent("audioprocess",a.getCurrentTime())})}},{key:"load",value:function(a,b,d,g){var c=document.createElement(this.mediaType);
c.controls=this.params.mediaControls;c.autoplay=this.params.autoplay||!1;c.preload=null==g?"auto":g;c.src=a;c.style.width="100%";(a=b.querySelector(this.mediaType))&&b.removeChild(a);b.appendChild(c);this._load(c,d)}},{key:"loadElt",value:function(a,b){a.controls=this.params.mediaControls;a.autoplay=this.params.autoplay||!1;this._load(a,b)}},{key:"_load",value:function(a,b){var d=this;"function"==typeof a.load&&a.load();a.addEventListener("error",function(){d.fireEvent("error","Error loading media element")});
a.addEventListener("canplay",function(){d.fireEvent("canplay")});a.addEventListener("ended",function(){d.fireEvent("finish")});a.addEventListener("play",function(){d.fireEvent("play")});a.addEventListener("pause",function(){d.fireEvent("pause")});this.media=a;this.peaks=b;this.buffer=this.onPlayEnd=null;this.setPlaybackRate(this.playbackRate);this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;
var a=(this.buffer||this.media).duration;Infinity<=a&&(a=this.media.seekable.end(0));return a}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(a){this.playbackRate=a||1;this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(a){null!=
a&&(this.media.currentTime=a);this.clearPlayEnd()}},{key:"play",value:function(a,b){this.seekTo(a);a=this.media.play();b&&this.setPlayEnd(b);return a}},{key:"pause",value:function(){var a;this.media&&(a=this.media.pause());this.clearPlayEnd();return a}},{key:"setPlayEnd",value:function(a){var b=this;this._onPlayEnd=function(d){d>=a&&(b.pause(),b.seekTo(a))};this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=
null)}},{key:"getPeaks",value:function(a,d,c){return this.buffer?g(k(b.prototype),"getPeaks",this).call(this,a,d,c):this.peaks||[]}},{key:"setSinkId",value:function(a){return a?this.media.setSinkId?this.media.setSinkId(a):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+a))}},{key:"getVolume",value:function(){return this.volume||this.media.volume}},{key:"setVolume",value:function(a){this.volume=a;this.media.volume=this.volume}},{key:"destroy",
value:function(){this.pause();this.unAll();this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media);this.media=null}}]);return b}(p.default);f.default=c;e.exports=f.default},"./src/peakcache.js":function(e,f,c){function b(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function a(a,d,g){d&&b(a.prototype,d);g&&b(a,g);return a}Object.defineProperty(f,
"__esModule",{value:!0});f.default=void 0;c=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.clearPeakCache()}a(b,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[];this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(a,b,c){a!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=a);a=[];for(var d=0;d<this.peakCacheRanges.length&&this.peakCacheRanges[d]<b;)d++;for(0==d%2&&a.push(b);d<this.peakCacheRanges.length&&
this.peakCacheRanges[d]<=c;)a.push(this.peakCacheRanges[d]),d++;0==d%2&&a.push(c);a=a.filter(function(a,b,d){return 0==b?a!=d[b+1]:b==d.length-1?a!=d[b-1]:a!=d[b-1]&&a!=d[b+1]});this.peakCacheRanges=this.peakCacheRanges.concat(a);this.peakCacheRanges=this.peakCacheRanges.sort(function(a,b){return a-b}).filter(function(a,b,d){return 0==b?a!=d[b+1]:b==d.length-1?a!=d[b-1]:a!=d[b-1]&&a!=d[b+1]});b=[];for(d=0;d<a.length;d+=2)b.push([a[d],a[d+1]]);return b}},{key:"getCacheRanges",value:function(){var a=
[],b;for(b=0;b<this.peakCacheRanges.length;b+=2)a.push([this.peakCacheRanges[b],this.peakCacheRanges[b+1]]);return a}}]);return b}();f.default=c;e.exports=f.default},"./src/util/ajax.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){var c=new b.default,d=new XMLHttpRequest,g=!1;d.open(a.method||"GET",a.url,!0);d.responseType=a.responseType||"json";a.xhr&&(a.xhr.requestHeaders&&a.xhr.requestHeaders.forEach(function(a){d.setRequestHeader(a.key,a.value)}),a.xhr.withCredentials&&
(d.withCredentials=!0));d.addEventListener("progress",function(a){c.fireEvent("progress",a);a.lengthComputable&&a.loaded==a.total&&(g=!0)});d.addEventListener("load",function(a){g||c.fireEvent("progress",a);c.fireEvent("load",a);200==d.status||206==d.status?c.fireEvent("success",d.response,a):c.fireEvent("error",a)});d.addEventListener("error",function(a){return c.fireEvent("error",a)});d.send();c.xhr=d;return c};var b=function(a){return a&&a.__esModule?a:{default:a}}(c("./src/util/observer.js"));
e.exports=f.default},"./src/util/extend.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];c.forEach(function(a){Object.keys(a).forEach(function(d){b[d]=a[d]})});return b};e.exports=f.default},"./src/util/frame.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){return function(){for(var c=arguments.length,d=Array(c),g=0;g<c;g++)d[g]=arguments[g];
return(0,b.default)(function(){return a.apply(void 0,d)})}};var b=function(a){return a&&a.__esModule?a:{default:a}}(c("./src/util/request-animation-frame.js"));e.exports=f.default},"./src/util/get-id.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return"wavesurfer_"+Math.random().toString(32).substring(2)};e.exports=f.default},"./src/util/index.js":function(e,f,c){function b(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
Object.defineProperty(f,"ajax",{enumerable:!0,get:function(){return a.default}});Object.defineProperty(f,"getId",{enumerable:!0,get:function(){return h.default}});Object.defineProperty(f,"max",{enumerable:!0,get:function(){return d.default}});Object.defineProperty(f,"min",{enumerable:!0,get:function(){return g.default}});Object.defineProperty(f,"Observer",{enumerable:!0,get:function(){return k.default}});Object.defineProperty(f,"extend",{enumerable:!0,get:function(){return l.default}});Object.defineProperty(f,
"style",{enumerable:!0,get:function(){return n.default}});Object.defineProperty(f,"requestAnimationFrame",{enumerable:!0,get:function(){return p.default}});Object.defineProperty(f,"frame",{enumerable:!0,get:function(){return r.default}});Object.defineProperty(f,"debounce",{enumerable:!0,get:function(){return w.default}});Object.defineProperty(f,"preventClick",{enumerable:!0,get:function(){return u.default}});var a=b(c("./src/util/ajax.js")),h=b(c("./src/util/get-id.js")),d=b(c("./src/util/max.js")),
g=b(c("./src/util/min.js")),k=b(c("./src/util/observer.js")),l=b(c("./src/util/extend.js")),n=b(c("./src/util/style.js")),p=b(c("./src/util/request-animation-frame.js")),r=b(c("./src/util/frame.js")),w=b(c("./node_modules/debounce/index.js")),u=b(c("./src/util/prevent-click.js"))},"./src/util/max.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){var a=-Infinity;Object.keys(b).forEach(function(c){b[c]>a&&(a=b[c])});return a};e.exports=f.default},"./src/util/min.js":function(e,
f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){var a=Number(Infinity);Object.keys(b).forEach(function(c){b[c]<a&&(a=b[c])});return a};e.exports=f.default},"./src/util/observer.js":function(e,f,c){function b(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function a(a,d,c){d&&b(a.prototype,d);c&&b(a,c);return a}Object.defineProperty(f,"__esModule",{value:!0});f.default=
void 0;c=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.handlers=null}a(b,[{key:"on",value:function(a,b){var d=this;this.handlers||(this.handlers={});var c=this.handlers[a];c||(c=this.handlers[a]=[]);c.push(b);return{name:a,callback:b,un:function(a,b){return d.un(a,b)}}}},{key:"un",value:function(a,b){if(this.handlers){a=this.handlers[a];var d;if(a)if(b)for(d=a.length-1;0<=d;d--)a[d]==b&&a.splice(d,1);else a.length=0}}},{key:"unAll",value:function(){this.handlers=
null}},{key:"once",value:function(a,b){var d=this;return this.on(a,function n(){for(var c=arguments.length,g=Array(c),h=0;h<c;h++)g[h]=arguments[h];b.apply(d,g);setTimeout(function(){d.un(a,n)},0)})}},{key:"fireEvent",value:function(a){for(var b=arguments.length,d=Array(1<b?b-1:0),c=1;c<b;c++)d[c-1]=arguments[c];this.handlers&&(b=this.handlers[a])&&b.forEach(function(a){a.apply(void 0,d)})}}]);return b}();f.default=c;e.exports=f.default},"./src/util/prevent-click.js":function(e,f,c){function b(a){a.stopPropagation();
document.body.removeEventListener("click",b,!0)}Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){document.body.addEventListener("click",b,!0)};e.exports=f.default},"./src/util/request-animation-frame.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;c=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){return setTimeout(b,
1E3/60)}).bind(window);f.default=c;e.exports=f.default},"./src/util/style.js":function(e,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b,a){Object.keys(a).forEach(function(c){b.style[c]!==a[c]&&(b.style[c]=a[c])});return b};e.exports=f.default},"./src/wavesurfer.js":function(e,f,c){function b(a){return a&&a.__esModule?a:{default:a}}function a(b){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return a(b)}function h(b,d){return!d||"object"!==a(d)&&"function"!==typeof d?l(b):d}function d(a){d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return d(a)}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});
b&&k(a,b)}function k(a,b){k=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return k(a,b)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function n(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function p(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function r(a,b,
d){b&&p(a.prototype,b);d&&p(a,d);return a}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var w=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var c=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,d):{};c.get||c.set?Object.defineProperty(b,d,c):b[d]=a[d]}b.default=a;return b}(c("./src/util/index.js")),u=b(c("./src/drawer.multicanvas.js")),A=b(c("./src/webaudio.js")),
t=b(c("./src/mediaelement.js")),z=b(c("./src/peakcache.js"));(function(){function a(b,d){n(this,a)}r(a,[{key:"create",value:function(a){}}]);r(a,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]);return a})();c=function(a){function b(a){n(this,b);var c=h(this,d(b).call(this));c.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,backend:"WebAudio",barHeight:1,barGap:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,fillParent:!0,
forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4E3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:u.default,responsive:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999",xhr:{}};c.backends={MediaElement:t.default,WebAudio:A.default};c.util=w;c.params=
w.extend({},c.defaultParams,a);c.container="string"==typeof a.container?document.querySelector(c.params.container):c.params.container;if(!c.container)throw Error("Container element not found");c.mediaContainer=null==c.params.mediaContainer?c.container:"string"==typeof c.params.mediaContainer?document.querySelector(c.params.mediaContainer):c.params.mediaContainer;if(!c.mediaContainer)throw Error("Media Container element not found");if(1>=c.params.maxCanvasWidth)throw Error("maxCanvasWidth must be greater than 1");
if(1==c.params.maxCanvasWidth%2)throw Error("maxCanvasWidth must be an even number");c.savedVolume=0;c.isMuted=!1;c.tmpEvents=[];c.currentAjax=null;c.arraybuffer=null;c.drawer=null;c.backend=null;c.peakCache=null;if("function"!==typeof c.params.renderer)throw Error("Renderer parameter is invalid");c.Drawer=c.params.renderer;c.Backend=c.backends[c.params.backend];c.initialisedPluginList={};c.isDestroyed=!1;c.isReady=!1;var g=0;c._onResize=w.debounce(function(){g==c.drawer.wrapper.clientWidth||c.params.scrollParent||
(g=c.drawer.wrapper.clientWidth,c.drawer.fireEvent("redraw"))},"number"===typeof c.params.responsive?c.params.responsive:100);return h(c,l(l(c)))}g(b,a);r(b,null,[{key:"create",value:function(a){return(new b(a)).init()}}]);r(b,[{key:"init",value:function(){this.registerPlugins(this.params.plugins);this.createDrawer();this.createBackend();this.createPeakCache();return this}},{key:"registerPlugins",value:function(a){var b=this;a.forEach(function(a){return b.addPlugin(a)});a.forEach(function(a){a.deferInit||
b.initPlugin(a.name)});this.fireEvent("plugins-registered",a);return this}},{key:"addPlugin",value:function(a){var b=this;if(!a.name)throw Error("Plugin does not have a name!");if(!a.instance)throw Error("Plugin ".concat(a.name," does not have an instance property!"));a.staticProps&&Object.keys(a.staticProps).forEach(function(d){b[d]=a.staticProps[d]});var d=a.instance;Object.getOwnPropertyNames(w.Observer.prototype).forEach(function(a){d.prototype[a]=w.Observer.prototype[a]});this[a.name]=new d(a.params||
{},this);this.fireEvent("plugin-added",a.name);return this}},{key:"initPlugin",value:function(a){if(!this[a])throw Error("Plugin ".concat(a," has not been added yet!"));this.initialisedPluginList[a]&&this.destroyPlugin(a);this[a].init();this.initialisedPluginList[a]=!0;this.fireEvent("plugin-initialised",a);return this}},{key:"destroyPlugin",value:function(a){if(!this[a])throw Error("Plugin ".concat(a," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[a])throw Error("Plugin ".concat(a,
" is not active and cannot be destroyed!"));if("function"!==typeof this[a].destroy)throw Error("Plugin ".concat(a," does not have a destroy function!"));this[a].destroy();delete this.initialisedPluginList[a];this.fireEvent("plugin-destroyed",a);return this}},{key:"destroyAllPlugins",value:function(){var a=this;Object.keys(this.initialisedPluginList).forEach(function(b){return a.destroyPlugin(b)})}},{key:"createDrawer",value:function(){var a=this;this.drawer=new this.Drawer(this.container,this.params);
this.drawer.init();this.fireEvent("drawer-created",this.drawer);!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0));this.drawer.on("redraw",function(){a.drawBuffer();a.drawer.progress(a.backend.getPlayedPercents())});this.drawer.on("click",function(b,d){setTimeout(function(){return a.seekTo(d)},0)});this.drawer.on("scroll",function(b){a.params.partialRender&&a.drawBuffer();a.fireEvent("scroll",b)})}},{key:"createBackend",
value:function(){var a=this;this.backend&&this.backend.destroy();"AudioElement"==this.params.backend&&(this.params.backend="MediaElement");"WebAudio"!=this.params.backend||this.Backend.prototype.supportsWebAudio.call(null)||(this.params.backend="MediaElement");this.backend=new this.Backend(this.params);this.backend.init();this.fireEvent("backend-created",this.backend);this.backend.on("finish",function(){a.drawer.progress(a.backend.getPlayedPercents());a.fireEvent("finish")});this.backend.on("play",
function(){return a.fireEvent("play")});this.backend.on("pause",function(){return a.fireEvent("pause")});this.backend.on("audioprocess",function(b){a.drawer.progress(a.backend.getPlayedPercents());a.fireEvent("audioprocess",b)})}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new z.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",
value:function(a){a>=this.getDuration()?this.seekTo(1):this.seekTo(a/this.getDuration())}},{key:"play",value:function(a,b){var d=this;this.fireEvent("interaction",function(){return d.play(a,b)});return this.backend.play(a,b)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(a){this.skip(-a||
-this.params.skipLength)}},{key:"skipForward",value:function(a){this.skip(a||this.params.skipLength)}},{key:"skip",value:function(a){var b=this.getDuration()||1,d=this.getCurrentTime()||0;d=Math.max(0,Math.min(b,d+(a||0)));this.seekAndCenter(d/b)}},{key:"seekAndCenter",value:function(a){this.seekTo(a);this.drawer.recenter(a)}},{key:"seekTo",value:function(a){var b=this;if("number"!==typeof a||!isFinite(a)||0>a||1<a)return console.error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");
this.fireEvent("interaction",function(){return b.seekTo(a)});var d=this.backend.isPaused();d||this.backend.pause();var c=this.params.scrollParent;this.params.scrollParent=!1;this.backend.seekTo(a*this.getDuration());this.drawer.progress(a);d||this.backend.play();this.params.scrollParent=c;this.fireEvent("seek",a)}},{key:"stop",value:function(){this.pause();this.seekTo(0);this.drawer.progress(0)}},{key:"setSinkId",value:function(a){return this.backend.setSinkId(a)}},{key:"setVolume",value:function(a){this.backend.setVolume(a);
this.fireEvent("volume",a)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(a){this.backend.setPlaybackRate(a)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(a){a!==this.isMuted&&(a?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),
this.isMuted=!1,this.fireEvent("volume",this.savedVolume)));this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"isReady",value:function(){return this.isReady}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent;this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},
{key:"setWaveColor",value:function(a){this.params.waveColor=a;this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(a){this.params.progressColor=a;this.drawBuffer()}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(a){this.params.cursorColor=a;this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(a){this.params.height=
a;this.drawer.setHeight(a*this.params.pixelRatio);this.drawBuffer()}},{key:"drawBuffer",value:function(){var a=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),b=this.drawer.getWidth(),d=a,c=this.drawer.getScrollX(),g=Math.max(c+b,d);this.params.fillParent&&(!this.params.scrollParent||a<b)&&(d=b,c=0,g=d);if(this.params.partialRender)for(a=this.peakCache.addRangeToPeakCache(d,c,g),b=0;b<a.length;b++){var h=this.backend.getPeaks(d,a[b][0],a[b][1]);this.drawer.drawPeaks(h,
d,a[b][0],a[b][1])}else h=this.backend.getPeaks(d,c,g),this.drawer.drawPeaks(h,d,c,g);this.fireEvent("redraw",h,d)}},{key:"zoom",value:function(a){a?(this.params.minPxPerSec=a,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1);this.drawBuffer();this.drawer.progress(this.backend.getPlayedPercents());this.drawer.recenter(this.getCurrentTime()/this.getDuration());this.fireEvent("zoom",a)}},{key:"loadArrayBuffer",value:function(a){var b=this;
this.decodeArrayBuffer(a,function(a){b.isDestroyed||b.loadDecodedBuffer(a)})}},{key:"loadDecodedBuffer",value:function(a){this.backend.load(a);this.drawBuffer();this.fireEvent("ready");this.isReady=!0}},{key:"loadBlob",value:function(a){var b=this,d=new FileReader;d.addEventListener("progress",function(a){return b.onProgress(a)});d.addEventListener("load",function(a){return b.loadArrayBuffer(a.target.result)});d.addEventListener("error",function(){return b.fireEvent("error","Error reading file")});
d.readAsArrayBuffer(a);this.empty()}},{key:"load",value:function(a,b,d,c){this.empty();if(d){var g={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(d),"Peaks are not provided":!b,"Backend is not of type MediaElement":"MediaElement"!==this.params.backend,"Url is not of type string":"string"!==typeof a},h=Object.keys(g).filter(function(a){return g[a]});h.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+h.join("\n\t- ")),
d=null)}switch(this.params.backend){case "WebAudio":return this.loadBuffer(a,b,c);case "MediaElement":return this.loadMediaElement(a,b,d,c)}}},{key:"loadBuffer",value:function(a,b,d){var c=this,g=function(b){b&&c.tmpEvents.push(c.once("ready",b));return c.getArrayBuffer(a,function(a){return c.loadArrayBuffer(a)})};if(b)this.backend.setPeaks(b,d),this.drawBuffer(),this.tmpEvents.push(this.once("interaction",g));else return g()}},{key:"loadMediaElement",value:function(a,b,d,c){var g=this,h=a;"string"===
typeof a?this.backend.load(h,this.mediaContainer,b,d):(this.backend.loadElt(a,b),h=a.src);this.tmpEvents.push(this.backend.once("canplay",function(){g.drawBuffer();g.fireEvent("ready");g.isReady=!0}),this.backend.once("error",function(a){return g.fireEvent("error",a)}));b&&this.backend.setPeaks(b,c);b&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(h,function(a){g.decodeArrayBuffer(a,function(a){g.backend.buffer=a;g.backend.setPeaks(null);g.drawBuffer();g.fireEvent("waveform-ready")})})}},
{key:"decodeArrayBuffer",value:function(a,b){var d=this;this.arraybuffer=a;this.backend.decodeArrayBuffer(a,function(c){d.isDestroyed||d.arraybuffer!=a||(b(c),d.arraybuffer=null)},function(){return d.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(a,b){var d=this;this.currentAjax=a=w.ajax({url:a,responseType:"arraybuffer",xhr:this.params.xhr});this.tmpEvents.push(a.on("progress",function(a){d.onProgress(a)}),a.on("success",function(a,c){b(a);d.currentAjax=
null}),a.on("error",function(a){d.fireEvent("error","XHR error: "+a.target.statusText);d.currentAjax=null}));return a}},{key:"onProgress",value:function(a){this.fireEvent("loading",Math.round(100*(a.lengthComputable?a.loaded/a.total:a.loaded/(a.loaded+1E6))),a.target)}},{key:"exportPCM",value:function(a,b,d,c){b=b||1E4;d=d||!1;a=this.backend.getPeaks(a||1024,c||0);a=[].map.call(a,function(a){return Math.round(a*b)/b});a=JSON.stringify(a);d||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(a));
return a}},{key:"exportImage",value:function(a,b){a||(a="image/png");b||(b=1);return this.drawer.getImage(a,b)}},{key:"cancelAjax",value:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(a){return a.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource());this.isReady=!1;this.cancelAjax();this.clearTmpEvents();this.drawer.progress(0);this.drawer.setWidth(0);
this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins();this.fireEvent("destroy");this.cancelAjax();this.clearTmpEvents();this.unAll();!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0));this.backend.destroy();this.drawer.destroy();this.isDestroyed=!0;this.isReady=!1;this.arraybuffer=null}}]);return b}(w.Observer);f.default=c;c.VERSION="2.1.2";
c.util=w;e.exports=f.default},"./src/webaudio.js":function(e,f,c){function b(a){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b(a)}function a(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d;return a}function h(a,d){if(d&&("object"===b(d)||"function"===typeof d))return d;if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function d(a){d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return d(a)}function g(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function k(a,b,d){b&&g(a.prototype,b);d&&g(a,d);return a}function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&n(a,b)}function n(a,b){n=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return n(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;c=function(b){function c(b){var g,e;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=h(this,d(c).call(this));f.audioContext=null;f.offlineAudioContext=null;f.stateBehaviors=(g={},a(g,"playing",{init:function(){this.addOnAudioProcess()},
getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(g,"paused",{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition}}),a(g,"finished",{init:function(){this.removeOnAudioProcess();this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),
g);f.params=b;f.ac=b.audioContext||f.getAudioContext();f.lastPlay=f.ac.currentTime;f.startPosition=0;f.scheduledPause=null;f.states=(e={},a(e,"playing",Object.create(f.stateBehaviors.playing)),a(e,"paused",Object.create(f.stateBehaviors.paused)),a(e,"finished",Object.create(f.stateBehaviors.finished)),e);f.analyser=null;f.buffer=null;f.filters=[];f.gainNode=null;f.mergedPeaks=null;f.offlineAc=null;f.peaks=null;f.playbackRate=1;f.analyser=null;f.scriptNode=null;f.source=null;f.splitPeaks=[];f.state=
null;f.explicitDuration=null;return f}l(c,b);k(c,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new (window.AudioContext||window.webkitAudioContext));return window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(a){window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new (window.OfflineAudioContext||
window.webkitOfflineAudioContext)(1,2,a));return window.WaveSurferOfflineAudioContext}}]);k(c,[{key:"init",value:function(){this.createVolumeNode();this.createScriptNode();this.createAnalyserNode();this.setState("paused");this.setPlaybackRate(this.params.audioRate);this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(a){a&&a.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(a){this.state!==
this.states[a]&&(this.state=this.states[a],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];this.setFilters(b)}},{key:"setFilters",value:function(a){this.disconnectFilters();a&&a.length&&(this.filters=a,this.analyser.disconnect(),a.reduce(function(a,b){a.connect(b);return b},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.scriptNode=this.params.audioScriptProcessor?this.params.audioScriptProcessor:
this.ac.createScriptProcessor?this.ac.createScriptProcessor(c.scriptBufferSize):this.ac.createJavaScriptNode(c.scriptBufferSize);this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var a=this;this.scriptNode.onaudioprocess=function(){var b=a.getCurrentTime();b>=a.getDuration()?(a.setState("finished"),a.fireEvent("pause")):b>=a.scheduledPause?a.pause():a.state===a.states.playing&&a.fireEvent("audioprocess",b)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=
null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser();this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode();this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(a){if(a){var b=new window.Audio;if(!b.setSinkId)return Promise.reject(Error("setSinkId is not supported in your browser"));b.autoplay=!0;var d=this.ac.createMediaStreamDestination();
this.gainNode.disconnect();this.gainNode.connect(d);b.srcObject=d.stream;return b.setSinkId(a)}return Promise.reject(Error("Invalid deviceId: "+a))}},{key:"setVolume",value:function(a){this.gainNode.gain.setValueAtTime(a,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(a,b,d){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100));this.offlineAc.decodeAudioData(a,
function(a){return b(a)},d)}},{key:"setPeaks",value:function(a,b){this.explicitDuration=b;this.peaks=a}},{key:"setLength",value:function(a){if(!this.mergedPeaks||a!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[];this.mergedPeaks=[];var b=this.buffer?this.buffer.numberOfChannels:1,d;for(d=0;d<b;d++)this.splitPeaks[d]=[],this.splitPeaks[d][2*(a-1)]=0,this.splitPeaks[d][2*(a-1)+1]=0;this.mergedPeaks[2*(a-1)]=0;this.mergedPeaks[2*(a-1)+1]=0}}},{key:"getPeaks",value:function(a,b,d){if(this.peaks)return this.peaks;
b=b||0;d=d||a-1;this.setLength(a);if(!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;this.buffer.length||(this.buffer=this.createBuffer(1,4096,this.sampleRate).buffer);a=this.buffer.length/a;var c=~~(a/10)||1,g=this.buffer.numberOfChannels,h;for(h=0;h<g;h++){var e=this.splitPeaks[h],f=this.buffer.getChannelData(h),k;for(k=b;k<=d;k++){for(var l=~~(k*a),n=~~(l+a),p=0,m=0;l<n;l+=c){var q=f[l];q>m&&(m=q);q<p&&(p=q)}e[2*k]=m;e[2*k+1]=p;if(0==h||m>this.mergedPeaks[2*k])this.mergedPeaks[2*
k]=m;if(0==h||p<this.mergedPeaks[2*k+1])this.mergedPeaks[2*k+1]=p}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroy",value:function(){this.isPaused()||this.pause();this.unAll();this.buffer=null;this.disconnectFilters();this.disconnectSource();this.gainNode.disconnect();this.scriptNode.disconnect();
this.analyser.disconnect();this.params.closeAudioContext&&("function"===typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"load",value:function(a){this.startPosition=0;this.lastPlay=this.ac.currentTime;this.buffer=a;this.createSource()}},{key:"createSource",value:function(){this.disconnectSource();this.source=this.ac.createBufferSource();
this.source.start=this.source.start||this.source.noteGrainOn;this.source.stop=this.source.stop||this.source.noteOff;this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime);this.source.buffer=this.buffer;this.source.connect(this.analyser)}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.buffer?this.buffer.duration:this.explicitDuration?this.explicitDuration:0}},{key:"seekTo",value:function(a,b){if(this.buffer)return this.scheduledPause=
null,null==a&&(a=this.getCurrentTime(),a>=this.getDuration()&&(a=0)),null==b&&(b=this.getDuration()),this.startPosition=a,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState("paused"),{start:a,end:b}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(a,b){this.buffer&&(this.createSource(),b=this.seekTo(a,b),a=b.start,this.scheduledPause=b=b.end,this.source.start(0,a,b-a),"suspended"==this.ac.state&&
this.ac.resume&&this.ac.resume(),this.setState("playing"),this.fireEvent("play"))}},{key:"pause",value:function(){this.scheduledPause=null;this.startPosition+=this.getPlayedTime();this.source&&this.source.stop(0);this.setState("paused");this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(a){a=a||1;this.isPaused()?this.playbackRate=a:(this.pause(),
this.playbackRate=a,this.play())}}]);return c}(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var c=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,d):{};c.get||c.set?Object.defineProperty(b,d,c):b[d]=a[d]}b.default=a;return b}(c("./src/util/index.js")).Observer);f.default=c;c.scriptBufferSize=256;e.exports=f.default}})});/*
 wavesurfer.js 2.1.2 (2019-01-07)
 https://github.com/katspaugh/wavesurfer.js
 @license BSD-3-Clause
 ********************************** !*\
  !*** ./src/plugin/microphone.js ***!
  \********************************* no static exports found */
(function(e,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("microphone",[],f):"object"===typeof exports?exports.microphone=f():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.microphone=f())})(window,function(){return function(e){function f(b){if(c[b])return c[b].exports;var a=c[b]={i:b,l:!1,exports:{}};e[b].call(a.exports,a,a.exports,f);a.l=!0;return a.exports}var c={};f.m=e;f.c=c;f.d=function(b,a,c){f.o(b,a)||Object.defineProperty(b,
a,{enumerable:!0,get:c})};f.r=function(b){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})};f.t=function(b,a){a&1&&(b=f(b));if(a&8||a&4&&"object"===typeof b&&b&&b.__esModule)return b;var c=Object.create(null);f.r(c);Object.defineProperty(c,"default",{enumerable:!0,value:b});if(a&2&&"string"!=typeof b)for(var d in b)f.d(c,d,function(a){return b[a]}.bind(null,d));return c};f.n=function(b){var a=
b&&b.__esModule?function(){return b["default"]}:function(){return b};f.d(a,"a",a);return a};f.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};f.p="localhost:8080/dist/plugin/";return f(f.s="./src/plugin/microphone.js")}({"./src/plugin/microphone.js":function(e,f,c){function b(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function a(a,d,c){d&&b(a.prototype,d);c&&b(a,c);return a}
Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;c=function(){function b(a,c){var d=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.params=a;this.wavesurfer=c;this.paused=this.active=!1;this.browser=this.detectBrowser();this.reloadBufferFunction=function(a){return d.reloadBuffer(a)};a=function(a,b,d){var c=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return c?new Promise(function(b,
d){c.call(navigator,a,b,d)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={});void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=a);this.constraints=this.params.constraints||{video:!1,audio:!0};this.bufferSize=this.params.bufferSize||4096;this.numberOfInputChannels=this.params.numberOfInputChannels||1;this.numberOfOutputChannels=this.params.numberOfOutputChannels||1;this._onBackendCreated=
function(){d.micContext=d.wavesurfer.backend.getAudioContext()}}a(b,null,[{key:"create",value:function(a){return{name:"microphone",deferInit:a&&a.deferInit?a.deferInit:!1,params:a,instance:b}}}]);a(b,[{key:"init",value:function(){this.wavesurfer.on("backend-created",this._onBackendCreated);this.wavesurfer.backend&&this._onBackendCreated()}},{key:"destroy",value:function(){this.paused=!0;this.wavesurfer.un("backend-created",this._onBackendCreated);this.stop()}},{key:"start",value:function(){var a=
this;navigator.mediaDevices.getUserMedia(this.constraints).then(function(b){return a.gotStream(b)}).catch(function(b){return a.deviceError(b)})}},{key:"togglePlay",value:function(){this.active?(this.paused=!this.paused)?this.pause():this.play():this.start()}},{key:"play",value:function(){this.paused=!1;this.connect()}},{key:"pause",value:function(){this.paused=!0;this.disconnect()}},{key:"stop",value:function(){this.active&&(this.stopDevice(),this.wavesurfer.empty())}},{key:"stopDevice",value:function(){this.active=
!1;this.disconnect();this.stream&&(("chrome"===this.browser.browser&&45<=this.browser.version||"firefox"===this.browser.browser&&44<=this.browser.version||"edge"===this.browser.browser||"safari"===this.browser.browser)&&this.stream.getTracks?this.stream.getTracks().forEach(function(a){return a.stop()}):this.stream.stop())}},{key:"connect",value:function(){void 0!==this.stream&&("edge"===this.browser.browser&&(this.localAudioBuffer=this.micContext.createBuffer(this.numberOfInputChannels,this.bufferSize,
this.micContext.sampleRate)),this.mediaStreamSource=this.micContext.createMediaStreamSource(this.stream),this.levelChecker=this.micContext.createScriptProcessor(this.bufferSize,this.numberOfInputChannels,this.numberOfOutputChannels),this.mediaStreamSource.connect(this.levelChecker),this.levelChecker.connect(this.micContext.destination),this.levelChecker.onaudioprocess=this.reloadBufferFunction)}},{key:"disconnect",value:function(){void 0!==this.mediaStreamSource&&this.mediaStreamSource.disconnect();
void 0!==this.levelChecker&&(this.levelChecker.disconnect(),this.levelChecker.onaudioprocess=void 0);void 0!==this.localAudioBuffer&&(this.localAudioBuffer=void 0)}},{key:"reloadBuffer",value:function(a){if(!this.paused)if(this.wavesurfer.empty(),"edge"===this.browser.browser){var b;var d=0;for(b=Math.min(this.localAudioBuffer.numberOfChannels,a.inputBuffer.numberOfChannels);d<b;d++)this.localAudioBuffer.getChannelData(d).set(a.inputBuffer.getChannelData(d));this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer)}else this.wavesurfer.loadDecodedBuffer(a.inputBuffer)}},
{key:"gotStream",value:function(a){this.stream=a;this.active=!0;this.play();this.fireEvent("deviceReady",a)}},{key:"deviceError",value:function(a){this.fireEvent("deviceError",a)}},{key:"extractVersion",value:function(a,b,c){return(a=a.match(b))&&a.length>=c&&parseInt(a[c],10)}},{key:"detectBrowser",value:function(){var a={browser:null,version:null,minVersion:null};if("undefined"===typeof window||!window.navigator)return a.browser="Not a supported browser.",a;if(navigator.mozGetUserMedia)return a.browser=
"firefox",a.version=this.extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1),a.minVersion=31,a;if(navigator.webkitGetUserMedia)return a.browser="chrome",a.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),a.minVersion=38,a;if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return a.browser="edge",a.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),a.minVersion=10547,a;if(window.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser=
"safari",a.minVersion=11,a.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1),a;a.browser="Not a supported browser.";return a}}]);return b}();f.default=c;e.exports=f.default}})});/*
 jQuery JavaScript Library v1.12.4
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2016-05-20T17:17Z
 Sizzle CSS Selector Engine v2.2.1
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2015-10-17
*/
(function(e,f){"object"===typeof module&&"object"===typeof module.exports?module.exports=e.document?f(e,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return f(c)}:f(e)})("undefined"!==typeof window?window:this,function(e,f){function c(a){var b=!!a&&"length"in a&&a.length,d=v.type(a);return"function"===d||v.isWindow(a)?!1:"array"===d||0===b||"number"===typeof b&&0<b&&b-1 in a}function b(a,b,d){if(v.isFunction(b))return v.grep(a,function(a,c){return!!b.call(a,
c,a)!==d});if(b.nodeType)return v.grep(a,function(a){return a===b!==d});if("string"===typeof b){if(Ka.test(b))return v.filter(b,a,d);b=v.filter(b,a)}return v.grep(a,function(a){return-1<v.inArray(a,b)!==d})}function a(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function h(a){var b={};v.each(a.match(vb)||[],function(a,d){b[d]=!0});return b}function d(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",g),e.removeEventListener("load",g)):(R.detachEvent("onreadystatechange",g),e.detachEvent("onload",
g))}function g(){if(R.addEventListener||"load"===e.event.type||"complete"===R.readyState)d(),v.ready()}function k(a,b,d){if(void 0===d&&1===a.nodeType)if(d="data-"+b.replace(wb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Ie.test(d)?v.parseJSON(d):d}catch(fc){}v.data(a,b,d)}else d=void 0;return d}function l(a){for(var b in a)if(("data"!==b||!v.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function n(a,b,d,c){if(le(a)){var g=
v.expando,h=a.nodeType,e=h?v.cache:a,m=h?a[g]:a[g]&&g;if(m&&e[m]&&(c||e[m].data)||void 0!==d||"string"!==typeof b){m||(m=h?a[g]=Ca.pop()||v.guid++:g);e[m]||(e[m]=h?{}:{toJSON:v.noop});if("object"===typeof b||"function"===typeof b)c?e[m]=v.extend(e[m],b):e[m].data=v.extend(e[m].data,b);a=e[m];c||(a.data||(a.data={}),a=a.data);void 0!==d&&(a[v.camelCase(b)]=d);"string"===typeof b?(d=a[b],null==d&&(d=a[v.camelCase(b)])):d=a;return d}}}function p(a,b,d){if(le(a)){var c,g,h=a.nodeType,e=h?v.cache:a,m=
h?a[v.expando]:v.expando;if(e[m]){if(b&&(c=d?e[m]:e[m].data)){v.isArray(b)?b=b.concat(v.map(b,v.camelCase)):b in c?b=[b]:(b=v.camelCase(b),b=b in c?[b]:b.split(" "));for(g=b.length;g--;)delete c[b[g]];if(d?!l(c):!v.isEmptyObject(c))return}if(!d&&(delete e[m].data,!l(e[m])))return;h?v.cleanData([a],!0):O.deleteExpando||e!=e.window?delete e[m]:e[m]=void 0}}}function r(a,b,d,c){var g=1,h=20,e=c?function(){return c.cur()}:function(){return v.css(a,b,"")},m=e(),f=d&&d[3]||(v.cssNumber[b]?"":"px"),k=(v.cssNumber[b]||
"px"!==f&&+m)&&mf.exec(v.css(a,b));if(k&&k[3]!==f){f=f||k[3];d=d||[];k=+m||1;do g=g||".5",k/=g,v.style(a,b,k+f);while(g!==(g=e()/m)&&1!==g&&--h)}if(d){k=+k||+m||0;var l=d[1]?k+(d[1]+1)*d[2]:+d[2];c&&(c.unit=f,c.start=k,c.end=l)}return l}function w(a){var b="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" ");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());
return a}function u(a,b){var d,c,g=0,h="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!h)for(h=[],d=a.childNodes||a;null!=(c=d[g]);g++)!b||v.nodeName(c,b)?h.push(c):v.merge(h,u(c,b));return void 0===b||b&&v.nodeName(a,b)?v.merge([a],h):h}function A(a,b){for(var d,c=0;null!=(d=a[c]);c++)v._data(d,"globalEval",!b||v._data(b[c],"globalEval"))}function t(a){sc.test(a.type)&&(a.defaultChecked=a.checked)}
function z(a,b,d,c,g){for(var h,e,m,f,k,l,q=a.length,n=w(b),p=[],r=0;r<q;r++)if((e=a[r])||0===e)if("object"===v.type(e))v.merge(p,e.nodeType?[e]:e);else if(Fb.test(e)){m=m||n.appendChild(b.createElement("div"));f=(Tc.exec(e)||["",""])[1].toLowerCase();l=Xa[f]||Xa._default;m.innerHTML=l[1]+v.htmlPrefilter(e)+l[2];for(h=l[0];h--;)m=m.lastChild;!O.leadingWhitespace&&jb.test(e)&&p.push(b.createTextNode(jb.exec(e)[0]));if(!O.tbody)for(h=(e="table"!==f||oe.test(e)?"<table>"!==l[1]||oe.test(e)?0:m:m.firstChild)&&
e.childNodes.length;h--;)v.nodeName(k=e.childNodes[h],"tbody")&&!k.childNodes.length&&e.removeChild(k);v.merge(p,m.childNodes);for(m.textContent="";m.firstChild;)m.removeChild(m.firstChild);m=n.lastChild}else p.push(b.createTextNode(e));m&&n.removeChild(m);O.appendChecked||v.grep(u(p,"input"),t);for(r=0;e=p[r++];)if(c&&-1<v.inArray(e,c))g&&g.push(e);else if(a=v.contains(e.ownerDocument,e),m=u(n.appendChild(e),"script"),a&&A(m),d)for(h=0;e=m[h++];)Nd.test(e.type||"")&&d.push(e);return n}function B(){return!0}
function D(){return!1}function y(){try{return R.activeElement}catch(qc){}}function E(a,b,d,c,g,h){var e;if("object"===typeof b){"string"!==typeof d&&(c=c||d,d=void 0);for(e in b)E(a,e,d,c,b[e],h);return a}null==c&&null==g?(g=d,c=d=void 0):null==g&&("string"===typeof d?(g=c,c=void 0):(g=c,c=d,d=void 0));if(!1===g)g=D;else if(!g)return a;if(1===h){var m=g;g=function(a){v().off(a);return m.apply(this,arguments)};g.guid=m.guid||(m.guid=v.guid++)}return a.each(function(){v.event.add(this,b,g,c,d)})}function x(a,
b){return v.nodeName(a,"table")&&v.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function H(a){a.type=(null!==v.find.attr(a,"type"))+"/"+a.type;return a}function F(a){var b=Hg.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function m(a,b){if(1===b.nodeType&&v.hasData(a)){var d,c;var g=v._data(a);a=v._data(b,g);var h=g.events;if(h)for(d in delete a.handle,a.events={},h)for(g=0,c=h[d].length;g<
c;g++)v.event.add(b,d,h[d][g]);a.data&&(a.data=v.extend({},a.data))}}function q(a,b,d,c){b=xb.apply([],b);var g,h=0,e=a.length,m=e-1,f=b[0],k=v.isFunction(f);if(k||1<e&&"string"===typeof f&&!O.checkClone&&pe.test(f))return a.each(function(g){var h=a.eq(g);k&&(b[0]=f.call(this,g,h.html()));q(h,b,d,c)});if(e){var l=z(b,a[0].ownerDocument,!1,a,c);var n=l.firstChild;1===l.childNodes.length&&(l=n);if(n||c){var p=v.map(u(l,"script"),H);for(g=p.length;h<e;h++)n=l,h!==m&&(n=v.clone(n,!0,!0),g&&v.merge(p,
u(n,"script"))),d.call(a[h],n,h);if(g)for(l=p[p.length-1].ownerDocument,v.map(p,F),h=0;h<g;h++)n=p[h],Nd.test(n.type||"")&&!v._data(n,"globalEval")&&v.contains(l,n)&&(n.src?v._evalUrl&&v._evalUrl(n.src):v.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Je,"")));l=n=null}}return a}function G(a,b,d){for(var c=b?v.filter(b,a):a,g=0;null!=(b=c[g]);g++)d||1!==b.nodeType||v.cleanData(u(b)),b.parentNode&&(d&&v.contains(b.ownerDocument,b)&&A(u(b,"script")),b.parentNode.removeChild(b));return a}
function I(a,b){a=v(b.createElement(a)).appendTo(b.body);b=v.css(a[0],"display");a.detach();return b}function M(a){var b=R,d=xa[a];d||(d=I(a,b),"none"!==d&&d||(rd=(rd||v("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(rd[0].contentWindow||rd[0].contentDocument).document,b.write(),b.close(),d=I(a,b),rd.detach()),xa[a]=d);return d}function S(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function ia(a){if(a in Ke)return a;
for(var b=a.charAt(0).toUpperCase()+a.slice(1),d=Le.length;d--;)if(a=Le[d]+b,a in Ke)return a}function za(a,b){for(var d,c,g,h=[],e=0,m=a.length;e<m;e++)c=a[e],c.style&&(h[e]=v._data(c,"olddisplay"),d=c.style.display,b?(h[e]||"none"!==d||(c.style.display=""),""===c.style.display&&Kc(c)&&(h[e]=v._data(c,"olddisplay",M(c.nodeName)))):(g=Kc(c),(d&&"none"!==d||!g)&&v._data(c,"olddisplay",g?d:v.css(c,"display"))));for(e=0;e<m;e++)c=a[e],!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=
b?h[e]||"":"none");return a}function W(a,b,d){return(a=Od.exec(b))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):b}function X(a,b,d,c,g){b=d===(c?"border":"content")?4:"width"===b?1:0;for(var h=0;4>b;b+=2)"margin"===d&&(h+=v.css(a,d+Ac[b],!0,g)),c?("content"===d&&(h-=v.css(a,"padding"+Ac[b],!0,g)),"margin"!==d&&(h-=v.css(a,"border"+Ac[b]+"Width",!0,g))):(h+=v.css(a,"padding"+Ac[b],!0,g),"padding"!==d&&(h+=v.css(a,"border"+Ac[b]+"Width",!0,g)));return h}function aa(a,b,d){var c=!0,g="width"===b?a.offsetWidth:
a.offsetHeight,h=Uc(a),e=O.boxSizing&&"border-box"===v.css(a,"boxSizing",!1,h);if(0>=g||null==g){g=Qb(a,b,h);if(0>g||null==g)g=a.style[b];if(fb.test(g))return g;c=e&&(O.boxSizingReliable()||g===a.style[b]);g=parseFloat(g)||0}return g+X(a,b,d||(e?"border":"content"),c,h)+"px"}function U(a,b,d,c,g){return new U.prototype.init(a,b,d,c,g)}function Z(){e.setTimeout(function(){Jb=void 0});return Jb=v.now()}function sa(a,b){var d={height:a},c=0;for(b=b?1:0;4>c;c+=2-b){var g=Ac[c];d["margin"+g]=d["padding"+
g]=a}b&&(d.opacity=d.width=a);return d}function ca(a,b,d){for(var c,g=(la.tweeners[b]||[]).concat(la.tweeners["*"]),h=0,e=g.length;h<e;h++)if(c=g[h].call(d,b,a))return c}function ea(a,b){var d,c;for(d in a){var g=v.camelCase(d);var h=b[g];var e=a[d];v.isArray(e)&&(h=e[1],e=a[d]=e[0]);d!==g&&(a[g]=e,delete a[d]);if((c=v.cssHooks[g])&&"expand"in c)for(d in e=c.expand(e),delete a[g],e)d in a||(a[d]=e[d],b[d]=h);else b[g]=h}}function la(a,b,d){var c,g=0,h=la.prefilters.length,e=v.Deferred().always(function(){delete m.elem}),
m=function(){if(c)return!1;var b=Jb||Z();b=Math.max(0,f.startTime+f.duration-b);for(var d=1-(b/f.duration||0),g=0,h=f.tweens.length;g<h;g++)f.tweens[g].run(d);e.notifyWith(a,[f,d,b]);if(1>d&&h)return b;e.resolveWith(a,[f]);return!1},f=e.promise({elem:a,props:v.extend({},b),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},d),originalProperties:b,originalOptions:d,startTime:Jb||Z(),duration:d.duration,tweens:[],createTween:function(b,d){b=v.Tween(a,f.opts,b,d,f.opts.specialEasing[b]||f.opts.easing);
f.tweens.push(b);return b},stop:function(b){var d=0,g=b?f.tweens.length:0;if(c)return this;for(c=!0;d<g;d++)f.tweens[d].run(1);b?(e.notifyWith(a,[f,1,0]),e.resolveWith(a,[f,b])):e.rejectWith(a,[f,b]);return this}});d=f.props;for(ea(d,f.opts.specialEasing);g<h;g++)if(b=la.prefilters[g].call(f,a,d,f.opts))return v.isFunction(b.stop)&&(v._queueHooks(f.elem,f.opts.queue).stop=v.proxy(b.stop,b)),b;v.map(d,ca,f);v.isFunction(f.opts.start)&&f.opts.start.call(a,f);v.fx.timer(v.extend(m,{elem:a,anim:f,queue:f.opts.queue}));
return f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Aa(a){return v.attr(a,"class")||""}function Qa(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");var c=0,g=b.toLowerCase().match(vb)||[];if(v.isFunction(d))for(;b=g[c++];)"+"===b.charAt(0)?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(d)):(a[b]=a[b]||[]).push(d)}}function yb(a,b,d,c){function g(m){var f;h[m]=!0;v.each(a[m]||[],function(a,m){a=m(b,d,c);if("string"===typeof a&&!e&&
!h[a])return b.dataTypes.unshift(a),g(a),!1;if(e)return!(f=a)});return f}var h={},e=a===Vf;return g(b.dataTypes[0])||!h["*"]&&g("*")}function ya(a,b){var d,c,g=v.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((g[c]?a:d||(d={}))[c]=b[c]);d&&v.extend(!0,a,d);return a}function Kb(a){if(!v.contains(a.ownerDocument||R,a))return!0;for(;a&&1===a.nodeType;){if("none"===(a.style&&a.style.display||v.css(a,"display"))||"hidden"===a.type)return!0;a=a.parentNode}return!1}function Ta(a,b,d,c){var g;if(v.isArray(b))v.each(b,
function(b,g){d||nf.test(a)?c(a,g):Ta(a+"["+("object"===typeof g&&null!=g?b:"")+"]",g,d,c)});else if(d||"object"!==v.type(b))c(a,b);else for(g in b)Ta(a+"["+g+"]",b[g],d,c)}function Za(){try{return new e.XMLHttpRequest}catch(qc){}}function Na(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(qc){}}function Ra(a){return v.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var Ca=[],R=e.document,Da=Ca.slice,xb=Ca.concat,Ba=Ca.push,Ya=Ca.indexOf,ba={},gc=ba.toString,gb=ba.hasOwnProperty,
O={},v=function(a,b){return new v.fn.init(a,b)},Ea=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fa=/^-ms-/,Lb=/-([\da-z])/gi,Vc=function(a,b){return b.toUpperCase()};v.fn=v.prototype={jquery:"1.12.4",constructor:v,selector:"",length:0,toArray:function(){return Da.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Da.call(this)},pushStack:function(a){a=v.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a){return v.each(this,a)},map:function(a){return this.pushStack(v.map(this,
function(b,d){return a.call(b,d,b)}))},slice:function(){return this.pushStack(Da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ba,sort:Ca.sort,splice:Ca.splice};v.extend=v.fn.extend=function(){var a,b,d,c=arguments[0]||{},g=1,h=arguments.length,e=!1;"boolean"===typeof c&&(e=c,c=arguments[g]||
{},g++);"object"===typeof c||v.isFunction(c)||(c={});g===h&&(c=this,g--);for(;g<h;g++)if(null!=(d=arguments[g]))for(b in d){var m=c[b];var f=d[b];c!==f&&(e&&f&&(v.isPlainObject(f)||(a=v.isArray(f)))?(a?(a=!1,m=m&&v.isArray(m)?m:[]):m=m&&v.isPlainObject(m)?m:{},c[b]=v.extend(e,m,f)):void 0!==f&&(c[b]=f))}return c};v.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===v.type(a)},
isArray:Array.isArray||function(a){return"array"===v.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!v.isArray(a)&&0<=b-parseFloat(b)+1},isEmptyObject:function(a){for(var b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==v.type(a)||a.nodeType||v.isWindow(a))return!1;try{if(a.constructor&&!gb.call(a,"constructor")&&!gb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(He){return!1}if(!O.ownFirst)for(b in a)return gb.call(a,
b);for(b in a);return void 0===b||gb.call(a,b)},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?ba[gc.call(a)]||"object":typeof a},globalEval:function(a){a&&v.trim(a)&&(e.execScript||function(a){e.eval.call(e,a)})(a)},camelCase:function(a){return a.replace(fa,"ms-").replace(Lb,Vc)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,g=0;if(c(a))for(d=a.length;g<d&&!1!==b.call(a[g],g,a[g]);g++);else for(g in a)if(!1===
b.call(a[g],g,a[g]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Ea,"")},makeArray:function(a,b){b=b||[];null!=a&&(c(Object(a))?v.merge(b,"string"===typeof a?[a]:a):Ba.call(b,a));return b},inArray:function(a,b,d){if(b){if(Ya)return Ya.call(b,a,d);var c=b.length;for(d=d?0>d?Math.max(0,c+d):d:0;d<c;d++)if(d in b&&b[d]===a)return d}return-1},merge:function(a,b){for(var d=+b.length,c=0,g=a.length;c<d;)a[g++]=b[c++];if(d!==d)for(;void 0!==b[c];)a[g++]=b[c++];a.length=g;return a},grep:function(a,
b,d){for(var c=[],g=0,h=a.length,e=!d;g<h;g++)d=!b(a[g],g),d!==e&&c.push(a[g]);return c},map:function(a,b,d){var g,h=0,e=[];if(c(a))for(g=a.length;h<g;h++){var m=b(a[h],h,d);null!=m&&e.push(m)}else for(h in a)m=b(a[h],h,d),null!=m&&e.push(m);return xb.apply([],e)},guid:1,proxy:function(a,b){if("string"===typeof b){var d=a[b];b=a;a=d}if(v.isFunction(a)){var c=Da.call(arguments,2);d=function(){return a.apply(b||this,c.concat(Da.call(arguments)))};d.guid=a.guid=a.guid||v.guid++;return d}},now:function(){return+new Date},
support:O});"function"===typeof Symbol&&(v.fn[Symbol.iterator]=Ca[Symbol.iterator]);v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ba["[object "+b+"]"]=b.toLowerCase()});var mb=function(a){function b(a,b,d,c){var g,h,e,m,f=b&&b.ownerDocument,k=b?b.nodeType:9;d=d||[];if("string"!==typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!c&&((b?b.ownerDocument||b:ia)!==B&&O(b),b=b||B,M)){if(11!==k&&(m=R.exec(a)))if(g=m[1])if(9===k)if(h=b.getElementById(g)){if(h.id===
g)return d.push(h),d}else return d;else{if(f&&(h=f.getElementById(g))&&qc(b,h)&&h.id===g)return d.push(h),d}else{if(m[2])return Z.apply(d,b.getElementsByTagName(a)),d;if((g=m[3])&&ya.getElementsByClassName&&b.getElementsByClassName)return Z.apply(d,b.getElementsByClassName(g)),d}if(!(!ya.qsa||W[a+" "]||y&&y.test(a))){if(1!==k){f=b;var q=a}else if("object"!==b.nodeName.toLowerCase()){(e=b.getAttribute("id"))?e=e.replace(Ka,"\\$&"):b.setAttribute("id",e=X);m=Rb(a);g=m.length;for(h=xb.test(e)?"#"+e:
"[id='"+e+"']";g--;)m[g]=h+" "+n(m[g]);q=m.join(",");f=Ya.test(a)&&l(b.parentNode)||b}if(q)try{return Z.apply(d,f.querySelectorAll(q)),d}catch(Xc){}finally{e===X&&b.removeAttribute("id")}}}return yb(a.replace(ea,"$1"),b,d,c)}function d(){function a(d,c){b.push(d+" ")>ba.cacheLength&&delete a[b.shift()];return a[d+" "]=c}var b=[];return a}function c(a){a[X]=!0;return a}function g(a){var b=B.createElement("div");try{return!!a(b)}catch(sd){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}
function h(a,b){a=a.split("|");for(var d=a.length;d--;)ba.attrHandle[a[d]]=b}function e(a,b){var d=b&&a,c=d&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;if(d)for(;d=d.nextSibling;)if(d===b)return-1;return a?1:-1}function m(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function f(a){return function(b){var d=b.nodeName.toLowerCase();return("input"===d||"button"===d)&&b.type===a}}function k(a){return c(function(b){b=
+b;return c(function(d,c){for(var g,h=a([],d.length,b),e=h.length;e--;)d[g=h[e]]&&(d[g]=!(c[g]=d[g]))})})}function l(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function q(){}function n(a){for(var b=0,d=a.length,c="";b<d;b++)c+=a[b].value;return c}function p(a,b,d){var c=b.dir,g=d&&"parentNode"===c,h=H++;return b.first?function(b,d,h){for(;b=b[c];)if(1===b.nodeType||g)return a(b,d,h)}:function(b,d,e){var m,f=[E,h];if(e)for(;b=b[c];){if((1===b.nodeType||g)&&a(b,d,e))return!0}else for(;b=
b[c];)if(1===b.nodeType||g){var k=b[X]||(b[X]={});k=k[b.uniqueID]||(k[b.uniqueID]={});if((m=k[c])&&m[0]===E&&m[1]===h)return f[2]=m[2];k[c]=f;if(f[2]=a(b,d,e))return!0}}}function r(a){return 1<a.length?function(b,d,c){for(var g=a.length;g--;)if(!a[g](b,d,c))return!1;return!0}:a[0]}function G(a,b,d,c,g){for(var h,e=[],m=0,f=a.length,k=null!=b;m<f;m++)if(h=a[m])if(!d||d(h,c,g))e.push(h),k&&b.push(m);return e}function t(a,d,g,h,e,m){h&&!h[X]&&(h=t(h));e&&!e[X]&&(e=t(e,m));return c(function(c,m,f,k){var l,
q=[],n=[],p=m.length,r;if(!(r=c)){r=d||"*";for(var t=f.nodeType?[f]:f,u=[],I=0,A=t.length;I<A;I++)b(r,t[I],u);r=u}r=!a||!c&&d?r:G(r,q,a,f,k);t=g?e||(c?a:p||h)?[]:m:r;g&&g(r,t,f,k);if(h){var w=G(t,n);h(w,[],f,k);for(f=w.length;f--;)if(l=w[f])t[n[f]]=!(r[n[f]]=l)}if(c){if(e||a){if(e){w=[];for(f=t.length;f--;)(l=t[f])&&w.push(r[f]=l);e(null,t=[],w,k)}for(f=t.length;f--;)(l=t[f])&&-1<(w=e?Ta(c,l):q[f])&&(c[w]=!(m[w]=l))}}else t=G(t===m?t.splice(p,t.length):t),e?e(null,m,t,k):Z.apply(m,t)})}function u(a){var b,
d,c=a.length,g=ba.relative[a[0].type];var h=g||ba.relative[" "];for(var e=g?1:0,m=p(function(a){return a===b},h,!0),f=p(function(a){return-1<Ta(b,a)},h,!0),k=[function(a,d,c){a=!g&&(c||d!==w)||((b=d).nodeType?m(a,d,c):f(a,d,c));b=null;return a}];e<c;e++)if(h=ba.relative[a[e].type])k=[p(r(k),h)];else{h=ba.filter[a[e].type].apply(null,a[e].matches);if(h[X]){for(d=++e;d<c&&!ba.relative[a[d].type];d++);return t(1<e&&r(k),1<e&&n(a.slice(0,e-1).concat({value:" "===a[e-2].type?"*":""})).replace(ea,"$1"),
h,e<d&&u(a.slice(e,d)),d<c&&u(a=a.slice(d)),d<c&&n(a))}k.push(h)}return r(k)}function I(a,d){var g=0<d.length,h=0<a.length,e=function(c,e,m,f,k){var l,q,n=0,p="0",r=c&&[],t=[],u=w,I=c||h&&ba.find.TAG("*",k),A=E+=null==u?1:Math.random()||.1,z=I.length;for(k&&(w=e===B||e||k);p!==z&&null!=(l=I[p]);p++){if(h&&l){var F=0;e||l.ownerDocument===B||(O(l),m=!M);for(;q=a[F++];)if(q(l,e||B,m)){f.push(l);break}k&&(E=A)}g&&((l=!q&&l)&&n--,c&&r.push(l))}n+=p;if(g&&p!==n){for(F=0;q=d[F++];)q(r,t,e,m);if(c){if(0<
n)for(;p--;)r[p]||t[p]||(t[p]=ca.call(f));t=G(t)}Z.apply(f,t);k&&!c&&0<t.length&&1<n+d.length&&b.uniqueSort(f)}k&&(E=A,w=u);return r};return g?c(e):e}var A,w,z,F,B,x,M,y,D,S,qc,X="sizzle"+1*new Date,ia=a.document,E=0,H=0,aa=d(),za=d(),W=d(),v=function(a,b){a===b&&(F=!0);return 0},mb={}.hasOwnProperty,U=[],ca=U.pop,Ia=U.push,Z=U.push,$a=U.slice,Ta=function(a,b){for(var d=0,c=a.length;d<c;d++)if(a[d]===b)return d;return-1},Kb=/[\x20\t\r\n\f]+/g,ea=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
sa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ud=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ba=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,la=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,xb=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Da={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Za=/^(?:input|select|textarea|button)$/i,uc=/^h\d$/i,Aa=
/^[^{]+\{\s*\[native \w/,R=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ya=/[+~]/,Ka=/'|\\/g,Na=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,K=function(a,b,d){a="0x"+b-65536;return a!==a||d?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},Ca=function(){O()};try{Z.apply(U=$a.call(ia.childNodes),ia.childNodes),U[ia.childNodes.length].nodeType}catch(Ig){Z={apply:U.length?function(a,b){Ia.apply(a,$a.call(b))}:function(a,b){for(var d=a.length,c=0;a[d++]=b[c++];);a.length=
d-1}}}var ya=b.support={};var Ra=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var O=b.setDocument=function(a){var b;a=a?a.ownerDocument||a:ia;if(a===B||9!==a.nodeType||!a.documentElement)return B;B=a;x=B.documentElement;M=!Ra(B);(b=B.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",Ca,!1):b.attachEvent&&b.attachEvent("onunload",Ca));ya.attributes=g(function(a){a.className="i";return!a.getAttribute("className")});ya.getElementsByTagName=
g(function(a){a.appendChild(B.createComment(""));return!a.getElementsByTagName("*").length});ya.getElementsByClassName=Aa.test(B.getElementsByClassName);ya.getById=g(function(a){x.appendChild(a).id=X;return!B.getElementsByName||!B.getElementsByName(X).length});ya.getById?(ba.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&M)return(a=b.getElementById(a))?[a]:[]},ba.filter.ID=function(a){var b=a.replace(Na,K);return function(a){return a.getAttribute("id")===b}}):(delete ba.find.ID,ba.filter.ID=
function(a){var b=a.replace(Na,K);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});ba.find.TAG=ya.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(ya.qsa)return b.querySelectorAll(a)}:function(a,b){var d=[],c=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[c++];)1===a.nodeType&&d.push(a);return d}return b};ba.find.CLASS=ya.getElementsByClassName&&function(a,b){if("undefined"!==
typeof b.getElementsByClassName&&M)return b.getElementsByClassName(a)};D=[];y=[];if(ya.qsa=Aa.test(B.querySelectorAll))g(function(a){x.appendChild(a).innerHTML="<a id='"+X+"'></a><select id='"+X+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+X+"-]").length||y.push("~=");a.querySelectorAll(":checked").length||y.push(":checked");a.querySelectorAll("a#"+X+"+*").length||y.push(".#.+[+~]")}),g(function(a){var b=B.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||y.push(":enabled",":disabled");a.querySelectorAll("*,:x");y.push(",.*:")});(ya.matchesSelector=
Aa.test(S=x.matches||x.webkitMatchesSelector||x.mozMatchesSelector||x.oMatchesSelector||x.msMatchesSelector))&&g(function(a){ya.disconnectedMatch=S.call(a,"div");S.call(a,"[s!='']:x");D.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
y=y.length&&new RegExp(y.join("|"));D=D.length&&new RegExp(D.join("|"));qc=(b=Aa.test(x.compareDocumentPosition))||Aa.test(x.contains)?function(a,b){var d=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!!(b&&1===b.nodeType&&(d.contains?d.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};v=b?function(a,b){if(a===b)return F=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;
if(d)return d;d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return d&1||!ya.sortDetached&&b.compareDocumentPosition(a)===d?a===B||a.ownerDocument===ia&&qc(ia,a)?-1:b===B||b.ownerDocument===ia&&qc(ia,b)?1:z?Ta(z,a)-Ta(z,b):0:d&4?-1:1}:function(a,b){if(a===b)return F=!0,0;var d=0,c=a.parentNode,g=b.parentNode,h=[a],m=[b];if(!c||!g)return a===B?-1:b===B?1:c?-1:g?1:z?Ta(z,a)-Ta(z,b):0;if(c===g)return e(a,b);for(;a=a.parentNode;)h.unshift(a);for(a=b;a=a.parentNode;)m.unshift(a);
for(;h[d]===m[d];)d++;return d?e(h[d],m[d]):h[d]===ia?-1:m[d]===ia?1:0};return B};b.matches=function(a,d){return b(a,null,null,d)};b.matchesSelector=function(a,d){(a.ownerDocument||a)!==B&&O(a);d=d.replace(Ba,"='$1']");if(!(!ya.matchesSelector||!M||W[d+" "]||D&&D.test(d)||y&&y.test(d)))try{var c=S.call(a,d);if(c||ya.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(of){}return 0<b(d,B,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==B&&O(a);return qc(a,b)};b.attr=
function(a,b){(a.ownerDocument||a)!==B&&O(a);var d=ba.attrHandle[b.toLowerCase()];d=d&&mb.call(ba.attrHandle,b.toLowerCase())?d(a,b,!M):void 0;return void 0!==d?d:ya.attributes||!M?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,d=[],c=0,g=0;F=!ya.detectDuplicates;z=!ya.sortStable&&a.slice(0);a.sort(v);if(F){for(;b=a[g++];)b===a[g]&&(c=d.push(g));for(;c--;)a.splice(d[c],
1)}z=null;return a};var Qa=b.getText=function(a){var b="",d=0;var c=a.nodeType;if(!c)for(;c=a[d++];)b+=Qa(c);else if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=Qa(a)}else if(3===c||4===c)return a.nodeValue;return b};var ba=b.selectors={cacheLength:50,createPseudo:c,match:Da,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(Na,K);a[3]=(a[3]||a[4]||a[5]||"").replace(Na,K);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,d=!a[6]&&a[2];if(Da.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":d&&la.test(d)&&(b=Rb(d,!0))&&(b=d.indexOf(")",
d.length-b)-d.length)&&(a[0]=a[0].slice(0,b),a[2]=d.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(Na,K).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=aa[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),aa(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},
ATTR:function(a,d,c){return function(g){g=b.attr(g,a);if(null==g)return"!="===d;if(!d)return!0;g+="";return"="===d?g===c:"!="===d?g!==c:"^="===d?c&&0===g.indexOf(c):"*="===d?c&&-1<g.indexOf(c):"$="===d?c&&g.slice(-c.length)===c:"~="===d?-1<(" "+g.replace(Kb," ")+" ").indexOf(c):"|="===d?g===c||g.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,d,c,g){var h="nth"!==a.slice(0,3),e="last"!==a.slice(-4),m="of-type"===b;return 1===c&&0===g?function(a){return!!a.parentNode}:function(b,d,f){var k,l;d=
h!==e?"nextSibling":"previousSibling";var q=b.parentNode,n=m&&b.nodeName.toLowerCase();f=!f&&!m;var p=!1;if(q){if(h){for(;d;){for(k=b;k=k[d];)if(m?k.nodeName.toLowerCase()===n:1===k.nodeType)return!1;var r=d="only"===a&&!r&&"nextSibling"}return!0}r=[e?q.firstChild:q.lastChild];if(e&&f){k=q;var t=k[X]||(k[X]={});t=t[k.uniqueID]||(t[k.uniqueID]={});p=t[a]||[];p=(l=p[0]===E&&p[1])&&p[2];for(k=l&&q.childNodes[l];k=++l&&k&&k[d]||(p=l=0)||r.pop();)if(1===k.nodeType&&++p&&k===b){t[a]=[E,l,p];break}}else if(f&&
(k=b,t=k[X]||(k[X]={}),t=t[k.uniqueID]||(t[k.uniqueID]={}),p=t[a]||[],p=l=p[0]===E&&p[1]),!1===p)for(;(k=++l&&k&&k[d]||(p=l=0)||r.pop())&&((m?k.nodeName.toLowerCase()!==n:1!==k.nodeType)||!++p||(f&&(t=k[X]||(k[X]={}),t=t[k.uniqueID]||(t[k.uniqueID]={}),t[a]=[E,p]),k!==b)););p-=g;return p===c||0===p%c&&0<=p/c}}},PSEUDO:function(a,d){var g=ba.pseudos[a]||ba.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);if(g[X])return g(d);if(1<g.length){var h=[a,a,"",d];return ba.setFilters.hasOwnProperty(a.toLowerCase())?
c(function(a,b){for(var c,h=g(a,d),e=h.length;e--;)c=Ta(a,h[e]),a[c]=!(b[c]=h[e])}):function(a){return g(a,0,h)}}return g}},pseudos:{not:c(function(a){var b=[],d=[],g=vb(a.replace(ea,"$1"));return g[X]?c(function(a,b,d,c){c=g(a,null,c,[]);for(var h=a.length;h--;)if(d=c[h])a[h]=!(b[h]=d)}):function(a,c,h){b[0]=a;g(b,null,h,d);b[0]=null;return!d.pop()}}),has:c(function(a){return function(d){return 0<b(a,d).length}}),contains:c(function(a){a=a.replace(Na,K);return function(b){return-1<(b.textContent||
b.innerText||Qa(b)).indexOf(a)}}),lang:c(function(a){xb.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(Na,K).toLowerCase();return function(b){var d;do if(d=M?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return d=d.toLowerCase(),d===a||0===d.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var d=a.location&&a.location.hash;return d&&d.slice(1)===b.id},root:function(a){return a===x},focus:function(a){return a===B.activeElement&&(!B.hasFocus||
B.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!ba.pseudos.empty(a)},header:function(a){return uc.test(a.nodeName)},
input:function(a){return Za.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,d){return[0>d?d+b:d]}),even:k(function(a,b){for(var d=0;d<b;d+=2)a.push(d);return a}),odd:k(function(a,b){for(var d=1;d<b;d+=
2)a.push(d);return a}),lt:k(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:k(function(a,b,d){for(d=0>d?d+b:d;++d<b;)a.push(d);return a})}};ba.pseudos.nth=ba.pseudos.eq;for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ba.pseudos[A]=m(A);for(A in{submit:!0,reset:!0})ba.pseudos[A]=f(A);q.prototype=ba.filters=ba.pseudos;ba.setFilters=new q;var Rb=b.tokenize=function(a,d){var c,g,h,e,m;if(e=za[a+" "])return d?0:e.slice(0);e=a;var f=[];for(m=ba.preFilter;e;){if(!k||(c=sa.exec(e)))c&&
(e=e.slice(c[0].length)||e),f.push(g=[]);var k=!1;if(c=Ud.exec(e))k=c.shift(),g.push({value:k,type:c[0].replace(ea," ")}),e=e.slice(k.length);for(h in ba.filter)!(c=Da[h].exec(e))||m[h]&&!(c=m[h](c))||(k=c.shift(),g.push({value:k,type:h,matches:c}),e=e.slice(k.length));if(!k)break}return d?e.length:e?b.error(a):za(a,f).slice(0)};var vb=b.compile=function(a,b){var d,c=[],g=[],h=W[a+" "];if(!h){b||(b=Rb(a));for(d=b.length;d--;)h=u(b[d]),h[X]?c.push(h):g.push(h);h=W(a,I(g,c));h.selector=a}return h};
var yb=b.select=function(a,b,d,c){var g,h,e,m="function"===typeof a&&a,f=!c&&Rb(a=m.selector||a);d=d||[];if(1===f.length){var k=f[0]=f[0].slice(0);if(2<k.length&&"ID"===(h=k[0]).type&&ya.getById&&9===b.nodeType&&M&&ba.relative[k[1].type]){b=(ba.find.ID(h.matches[0].replace(Na,K),b)||[])[0];if(!b)return d;m&&(b=b.parentNode);a=a.slice(k.shift().value.length)}for(g=Da.needsContext.test(a)?0:k.length;g--;){h=k[g];if(ba.relative[e=h.type])break;if(e=ba.find[e])if(c=e(h.matches[0].replace(Na,K),Ya.test(k[0].type)&&
l(b.parentNode)||b)){k.splice(g,1);a=c.length&&n(k);if(!a)return Z.apply(d,c),d;break}}}(m||vb(a,f))(c,b,!M,d,!b||Ya.test(a)&&l(b.parentNode)||b);return d};ya.sortStable=X.split("").sort(v).join("")===X;ya.detectDuplicates=!!F;O();ya.sortDetached=g(function(a){return a.compareDocumentPosition(B.createElement("div"))&1});g(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||h("type|href|height|width",function(a,b,d){if(!d)return a.getAttribute(b,"type"===b.toLowerCase()?
1:2)});ya.attributes&&g(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||h("value",function(a,b,d){if(!d&&"input"===a.nodeName.toLowerCase())return a.defaultValue});g(function(a){return null==a.getAttribute("disabled")})||h("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,d){var c;if(!d)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&
c.specified?c.value:null});return b}(e);v.find=mb;v.expr=mb.selectors;v.expr[":"]=v.expr.pseudos;v.uniqueSort=v.unique=mb.uniqueSort;v.text=mb.getText;v.isXMLDoc=mb.isXML;v.contains=mb.contains;var Ia=function(a,b,d){for(var c=[],g=void 0!==d;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(g&&v(a).is(d))break;c.push(a)}return c},$a=function(a,b){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&d.push(a);return d},Ud=v.expr.match.needsContext,uc=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ka=/^.[^:#\[\.,]*$/;
v.filter=function(a,b,d){var c=b[0];d&&(a=":not("+a+")");return 1===b.length&&1===c.nodeType?v.find.matchesSelector(c,a)?[c]:[]:v.find.matches(a,v.grep(b,function(a){return 1===a.nodeType}))};v.fn.extend({find:function(a){var b,d=[],c=this,g=c.length;if("string"!==typeof a)return this.pushStack(v(a).filter(function(){for(b=0;b<g;b++)if(v.contains(c[b],this))return!0}));for(b=0;b<g;b++)v.find(a,c[b],d);d=this.pushStack(1<g?v.unique(d):d);d.selector=this.selector?this.selector+" "+a:a;return d},filter:function(a){return this.pushStack(b(this,
a||[],!1))},not:function(a){return this.pushStack(b(this,a||[],!0))},is:function(a){return!!b(this,"string"===typeof a&&Ud.test(a)?v(a):a||[],!1).length}});var Rb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(v.fn.init=function(a,b,d){if(!a)return this;d=d||Nc;if("string"===typeof a){var c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Rb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof v?b[0]:b,v.merge(this,v.parseHTML(c[1],
b&&b.nodeType?b.ownerDocument||b:R,!0)),uc.test(c[1])&&v.isPlainObject(b))for(c in b)if(v.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else{if((b=R.getElementById(c[2]))&&b.parentNode){if(b.id!==c[2])return Nc.find(a);this.length=1;this[0]=b}this.context=R;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(v.isFunction(a))return"undefined"!==typeof d.ready?d.ready(a):a(v);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);
return v.makeArray(a,this)}).prototype=v.fn;var Nc=v(R);var Vd=/^(?:parents|prev(?:Until|All))/,zf={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(a){var b,d=v(a,this),c=d.length;return this.filter(function(){for(b=0;b<c;b++)if(v.contains(this,d[b]))return!0})},closest:function(a,b){for(var d,c=0,g=this.length,h=[],e=Ud.test(a)||"string"!==typeof a?v(a,b||this.context):0;c<g;c++)for(d=this[c];d&&d!==b;d=d.parentNode)if(11>d.nodeType&&(e?-1<e.index(d):1===d.nodeType&&v.find.matchesSelector(d,
a))){h.push(d);break}return this.pushStack(1<h.length?v.uniqueSort(h):h)},index:function(a){return a?"string"===typeof a?v.inArray(this[0],v(a)):v.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});v.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return Ia(a,
"parentNode")},parentsUntil:function(a,b,d){return Ia(a,"parentNode",d)},next:function(b){return a(b,"nextSibling")},prev:function(b){return a(b,"previousSibling")},nextAll:function(a){return Ia(a,"nextSibling")},prevAll:function(a){return Ia(a,"previousSibling")},nextUntil:function(a,b,d){return Ia(a,"nextSibling",d)},prevUntil:function(a,b,d){return Ia(a,"previousSibling",d)},siblings:function(a){return $a((a.parentNode||{}).firstChild,a)},children:function(a){return $a(a.firstChild)},contents:function(a){return v.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:v.merge([],a.childNodes)}},function(a,b){v.fn[a]=function(d,c){var g=v.map(this,b,d);"Until"!==a.slice(-5)&&(c=d);c&&"string"===typeof c&&(g=v.filter(c,g));1<this.length&&(zf[a]||(g=v.uniqueSort(g)),Vd.test(a)&&(g=g.reverse()));return this.pushStack(g)}});var vb=/\S+/g;v.Callbacks=function(a){a="string"===typeof a?h(a):v.extend({},a);var b,d,c,g,e=[],m=[],f=-1,k=function(){g=a.once;for(c=b=!0;m.length;f=-1)for(d=m.shift();++f<e.length;)!1===e[f].apply(d[0],
d[1])&&a.stopOnFalse&&(f=e.length,d=!1);a.memory||(d=!1);b=!1;g&&(e=d?[]:"")},l={add:function(){e&&(d&&!b&&(f=e.length-1,m.push(d)),function ne(b){v.each(b,function(b,d){v.isFunction(d)?a.unique&&l.has(d)||e.push(d):d&&d.length&&"string"!==v.type(d)&&ne(d)})}(arguments),d&&!b&&k());return this},remove:function(){v.each(arguments,function(a,b){for(var d;-1<(d=v.inArray(b,e,d));)e.splice(d,1),d<=f&&f--});return this},has:function(a){return a?-1<v.inArray(a,e):0<e.length},empty:function(){e&&(e=[]);
return this},disable:function(){g=m=[];e=d="";return this},disabled:function(){return!e},lock:function(){g=!0;d||l.disable();return this},locked:function(){return!!g},fireWith:function(a,d){g||(d=d||[],d=[a,d.slice?d.slice():d],m.push(d),b||k());return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!c}};return l};v.extend({Deferred:function(a){var b=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],
["notify","progress",v.Callbacks("memory")]],d="pending",c={state:function(){return d},always:function(){g.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return v.Deferred(function(d){v.each(b,function(b,h){var e=v.isFunction(a[b])&&a[b];g[h[1]](function(){var a=e&&e.apply(this,arguments);if(a&&v.isFunction(a.promise))a.promise().progress(d.notify).done(d.resolve).fail(d.reject);else d[h[0]+"With"](this===c?d.promise():this,e?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=
a?v.extend(a,c):c}},g={};c.pipe=c.then;v.each(b,function(a,h){var e=h[2],m=h[3];c[h[1]]=e.add;m&&e.add(function(){d=m},b[a^1][2].disable,b[2][2].lock);g[h[0]]=function(){g[h[0]+"With"](this===g?c:this,arguments);return this};g[h[0]+"With"]=e.fireWith});c.promise(g);a&&a.call(g,g);return g},when:function(a){var b=0,d=Da.call(arguments),c=d.length,g=1!==c||a&&v.isFunction(a.promise)?c:0,h=1===g?a:v.Deferred(),e=function(a,b,d){return function(c){b[a]=this;d[a]=1<arguments.length?Da.call(arguments):
c;d===f?h.notifyWith(b,d):--g||h.resolveWith(b,d)}},m;if(1<c){var f=Array(c);var k=Array(c);for(m=Array(c);b<c;b++)d[b]&&v.isFunction(d[b].promise)?d[b].promise().progress(e(b,k,f)).done(e(b,m,d)).fail(h.reject):--g}g||h.resolveWith(m,d);return h.promise()}});var Cc;v.fn.ready=function(a){v.ready.promise().done(a);return this};v.extend({isReady:!1,readyWait:1,holdReady:function(a){a?v.readyWait++:v.ready(!0)},ready:function(a){(!0===a?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==a&&0<--v.readyWait||
(Cc.resolveWith(R,[v]),v.fn.triggerHandler&&(v(R).triggerHandler("ready"),v(R).off("ready"))))}});v.ready.promise=function(a){if(!Cc)if(Cc=v.Deferred(),"complete"===R.readyState||"loading"!==R.readyState&&!R.documentElement.doScroll)e.setTimeout(v.ready);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",g),e.addEventListener("load",g);else{R.attachEvent("onreadystatechange",g);e.attachEvent("onload",g);var b=!1;try{b=null==e.frameElement&&R.documentElement}catch(He){}b&&b.doScroll&&
function fc(){if(!v.isReady){try{b.doScroll("left")}catch(pd){return e.setTimeout(fc,50)}d();v.ready()}}()}return Cc.promise(a)};v.ready.promise();for(var vh in v(O))break;O.ownFirst="0"===vh;O.inlineBlockNeedsLayout=!1;v(function(){var a;if((a=R.getElementsByTagName("body")[0])&&a.style){var b=R.createElement("div");var d=R.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";a.appendChild(d).appendChild(b);"undefined"!==typeof b.style.zoom&&(b.style.cssText=
"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",O.inlineBlockNeedsLayout=b=3===b.offsetWidth)&&(a.style.zoom=1);a.removeChild(d)}});(function(){var a=R.createElement("div");O.deleteExpando=!0;try{delete a.test}catch(pa){O.deleteExpando=!1}})();var le=function(a){var b=v.noData[(a.nodeName+" ").toLowerCase()],d=+a.nodeType||1;return 1!==d&&9!==d?!1:!b||!0!==b&&a.getAttribute("classid")===b},Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wb=/([A-Z])/g;v.extend({cache:{},noData:{"applet ":!0,"embed ":!0,
"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?v.cache[a[v.expando]]:a[v.expando];return!!a&&!l(a)},data:function(a,b,d){return n(a,b,d)},removeData:function(a,b){return p(a,b)},_data:function(a,b,d){return n(a,b,d,!0)},_removeData:function(a,b){return p(a,b,!0)}});v.fn.extend({data:function(a,b){var d,c=this[0],g=c&&c.attributes;if(void 0===a){if(this.length){var h=v.data(c);if(1===c.nodeType&&!v._data(c,"parsedAttrs")){for(d=g.length;d--;)if(g[d]){var e=
g[d].name;0===e.indexOf("data-")&&(e=v.camelCase(e.slice(5)),k(c,e,h[e]))}v._data(c,"parsedAttrs",!0)}}return h}return"object"===typeof a?this.each(function(){v.data(this,a)}):1<arguments.length?this.each(function(){v.data(this,a,b)}):c?k(c,a,v.data(c,a)):void 0},removeData:function(a){return this.each(function(){v.removeData(this,a)})}});v.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var c=v._data(a,b);d&&(!c||v.isArray(d)?c=v._data(a,b,v.makeArray(d)):c.push(d));return c||[]}},dequeue:function(a,
b){b=b||"fx";var d=v.queue(a,b),c=d.length,g=d.shift(),h=v._queueHooks(a,b),e=function(){v.dequeue(a,b)};"inprogress"===g&&(g=d.shift(),c--);g&&("fx"===b&&d.unshift("inprogress"),delete h.stop,g.call(a,e,h));!c&&h&&h.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return v._data(a,d)||v._data(a,d,{empty:v.Callbacks("once memory").add(function(){v._removeData(a,b+"queue");v._removeData(a,d)})})}});v.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<
d?v.queue(this[0],a):void 0===b?this:this.each(function(){var d=v.queue(this,a,b);v._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&v.dequeue(this,a)})},dequeue:function(a){return this.each(function(){v.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,c=1,g=v.Deferred(),h=this,e=this.length,m=function(){--c||g.resolveWith(h,[h])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";e--;)(d=v._data(h[e],a+"queueHooks"))&&d.empty&&(c++,d.empty.add(m));
m();return g.promise(b)}});(function(){var a;O.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b;if((b=R.getElementsByTagName("body")[0])&&b.style){var d=R.createElement("div");var c=R.createElement("div");c.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";b.appendChild(c).appendChild(d);"undefined"!==typeof d.style.zoom&&(d.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
d.appendChild(R.createElement("div")).style.width="5px",a=3!==d.offsetWidth);b.removeChild(c);return a}}})();var xd=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,mf=new RegExp("^(?:([+-])=|)("+xd+")([a-z%]*)$","i"),Ac=["Top","Right","Bottom","Left"],Kc=function(a,b){a=b||a;return"none"===v.css(a,"display")||!v.contains(a.ownerDocument,a)},vc=function(a,b,d,c,g,h,e){var m=0,f=a.length,k=null==d;if("object"===v.type(d))for(m in g=!0,d)vc(a,b,m,d[m],!0,h,e);else if(void 0!==c&&(g=!0,v.isFunction(c)||
(e=!0),k&&(e?(b.call(a,c),b=null):(k=b,b=function(a,b,d){return k.call(v(a),d)})),b))for(;m<f;m++)b(a[m],d,e?c:c.call(a[m],m,b(a[m],d)));return g?a:k?b.call(a):f?b(a[0],d):h},sc=/^(?:checkbox|radio)$/i,Tc=/<([\w:-]+)/,Nd=/^$|\/(?:java|ecma)script/i,jb=/^\s+/;(function(){var a=R.createElement("div"),b=R.createDocumentFragment(),d=R.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";O.leadingWhitespace=3===a.firstChild.nodeType;O.tbody=!a.getElementsByTagName("tbody").length;
O.htmlSerialize=!!a.getElementsByTagName("link").length;O.html5Clone="<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML;d.type="checkbox";d.checked=!0;b.appendChild(d);O.appendChecked=d.checked;a.innerHTML="<textarea>x</textarea>";O.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue;b.appendChild(a);d=R.createElement("input");d.setAttribute("type","radio");d.setAttribute("checked","checked");d.setAttribute("name","t");a.appendChild(d);O.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
O.noCloneEvent=!!a.addEventListener;a[v.expando]=1;O.attributes=!a.getAttribute(v.expando)})();var Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:O.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};
Xa.optgroup=Xa.option;Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead;Xa.th=Xa.td;var Fb=/<|&#?\w+;/,oe=/<tbody/i;(function(){var a,b=R.createElement("div");for(a in{submit:!0,change:!0,focusin:!0}){var d="on"+a;(O[a]=d in e)||(b.setAttribute(d,"t"),O[a]=!1===b.attributes[d].expando)}})();var Oc=/^(?:input|select|textarea)$/i,Af=/^key/,Pe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,hc=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)/;v.event={global:{},add:function(a,b,d,c,g){var h,
e,m,f,k;if(e=v._data(a)){if(d.handler){var l=d;d=l.handler;g=l.selector}d.guid||(d.guid=v.guid++);(h=e.events)||(h=e.events={});(m=e.handle)||(m=e.handle=function(a){return"undefined"===typeof v||a&&v.event.triggered===a.type?void 0:v.event.dispatch.apply(m.elem,arguments)},m.elem=a);b=(b||"").match(vb)||[""];for(e=b.length;e--;){var q=K.exec(b[e])||[];var n=f=q[1];var p=(q[2]||"").split(".").sort();n&&(q=v.event.special[n]||{},n=(g?q.delegateType:q.bindType)||n,q=v.event.special[n]||{},f=v.extend({type:n,
origType:f,data:c,handler:d,guid:d.guid,selector:g,needsContext:g&&v.expr.match.needsContext.test(g),namespace:p.join(".")},l),(k=h[n])||(k=h[n]=[],k.delegateCount=0,q.setup&&!1!==q.setup.call(a,c,p,m)||(a.addEventListener?a.addEventListener(n,m,!1):a.attachEvent&&a.attachEvent("on"+n,m))),q.add&&(q.add.call(a,f),f.handler.guid||(f.handler.guid=d.guid)),g?k.splice(k.delegateCount++,0,f):k.push(f),v.event.global[n]=!0)}a=null}},remove:function(a,b,d,c,g){var h,e,m,f,k,l=v.hasData(a)&&v._data(a);if(l&&
(f=l.events)){b=(b||"").match(vb)||[""];for(m=b.length;m--;){var q=K.exec(b[m])||[];var n=k=q[1];var p=(q[2]||"").split(".").sort();if(n){var r=v.event.special[n]||{};n=(c?r.delegateType:r.bindType)||n;var t=f[n]||[];q=q[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");for(e=h=t.length;h--;){var G=t[h];!g&&k!==G.origType||d&&d.guid!==G.guid||q&&!q.test(G.namespace)||c&&c!==G.selector&&("**"!==c||!G.selector)||(t.splice(h,1),G.selector&&t.delegateCount--,r.remove&&r.remove.call(a,G))}e&&
!t.length&&(r.teardown&&!1!==r.teardown.call(a,p,l.handle)||v.removeEvent(a,n,l.handle),delete f[n])}else for(n in f)v.event.remove(a,n+b[m],d,c,!0)}v.isEmptyObject(f)&&(delete l.handle,v._removeData(a,"events"))}},trigger:function(a,b,d,c){var g,h,m=[d||R],f=gb.call(a,"type")?a.type:a;var k=gb.call(a,"namespace")?a.namespace.split("."):[];var l=g=d=d||R;if(3!==d.nodeType&&8!==d.nodeType&&!hc.test(f+v.event.triggered)){-1<f.indexOf(".")&&(k=f.split("."),f=k.shift(),k.sort());var q=0>f.indexOf(":")&&
"on"+f;a=a[v.expando]?a:new v.Event(f,"object"===typeof a&&a);a.isTrigger=c?2:3;a.namespace=k.join(".");a.rnamespace=a.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;a.result=void 0;a.target||(a.target=d);b=null==b?[a]:v.makeArray(b,[a]);k=v.event.special[f]||{};if(c||!k.trigger||!1!==k.trigger.apply(d,b)){if(!c&&!k.noBubble&&!v.isWindow(d)){var n=k.delegateType||f;hc.test(n+f)||(l=l.parentNode);for(;l;l=l.parentNode)m.push(l),g=l;g===(d.ownerDocument||R)&&m.push(g.defaultView||
g.parentWindow||e)}for(h=0;(l=m[h++])&&!a.isPropagationStopped();)a.type=1<h?n:k.bindType||f,(g=(v._data(l,"events")||{})[a.type]&&v._data(l,"handle"))&&g.apply(l,b),(g=q&&l[q])&&g.apply&&le(l)&&(a.result=g.apply(l,b),!1===a.result&&a.preventDefault());a.type=f;if(!(c||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(m.pop(),b))&&le(d)&&q&&d[f]&&!v.isWindow(d)){(g=d[q])&&(d[q]=null);v.event.triggered=f;try{d[f]()}catch(ne){}v.event.triggered=void 0;g&&(d[q]=g)}return a.result}}},dispatch:function(a){a=
v.event.fix(a);var b,d,c,g=Da.call(arguments);var h=(v._data(this,"events")||{})[a.type]||[];var e=v.event.special[a.type]||{};g[0]=a;a.delegateTarget=this;if(!e.preDispatch||!1!==e.preDispatch.call(this,a)){var m=v.event.handlers.call(this,a,h);for(h=0;(c=m[h++])&&!a.isPropagationStopped();)for(a.currentTarget=c.elem,b=0;(d=c.handlers[b++])&&!a.isImmediatePropagationStopped();)if(!a.rnamespace||a.rnamespace.test(d.namespace))a.handleObj=d,a.data=d.data,d=((v.event.special[d.origType]||{}).handle||
d.handler).apply(c.elem,g),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());e.postDispatch&&e.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var d,c=[],g=b.delegateCount,h=a.target;if(g&&h.nodeType&&("click"!==a.type||isNaN(a.button)||1>a.button))for(;h!=this;h=h.parentNode||this)if(1===h.nodeType&&(!0!==h.disabled||"click"!==a.type)){var e=[];for(d=0;d<g;d++){var m=b[d];var f=m.selector+" ";void 0===e[f]&&(e[f]=m.needsContext?-1<v(f,this).index(h):v.find(f,
this,null,[h]).length);e[f]&&e.push(m)}e.length&&c.push({elem:h,handlers:e})}g<b.length&&c.push({elem:this,handlers:b.slice(g)});return c},fix:function(a){if(a[v.expando])return a;var b=a.type;var d=a,c=this.fixHooks[b];c||(this.fixHooks[b]=c=Pe.test(b)?this.mouseHooks:Af.test(b)?this.keyHooks:{});var g=c.props?this.props.concat(c.props):this.props;a=new v.Event(d);for(b=g.length;b--;){var h=g[b];a[h]=d[h]}a.target||(a.target=d.srcElement||R);3===a.target.nodeType&&(a.target=a.target.parentNode);
a.metaKey=!!a.metaKey;return c.filter?c.filter(a,d):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,
b){var d=b.button,c=b.fromElement;if(null==a.pageX&&null!=b.clientX){var g=a.target.ownerDocument||R;var h=g.documentElement;g=g.body;a.pageX=b.clientX+(h&&h.scrollLeft||g&&g.scrollLeft||0)-(h&&h.clientLeft||g&&g.clientLeft||0);a.pageY=b.clientY+(h&&h.scrollTop||g&&g.scrollTop||0)-(h&&h.clientTop||g&&g.clientTop||0)}!a.relatedTarget&&c&&(a.relatedTarget=c===a.target?b.toElement:c);a.which||void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
y()&&this.focus)try{return this.focus(),!1}catch(qc){}},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(v.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return v.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,d){a=v.extend(new v.Event,
d,{type:a,isSimulated:!0});v.event.trigger(a,null,b);a.isDefaultPrevented()&&d.preventDefault()}};v.removeEvent=R.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d)}:function(a,b,d){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,d))};v.Event=function(a,b){if(!(this instanceof v.Event))return new v.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===
a.returnValue?B:D):this.type=a;b&&v.extend(this,b);this.timeStamp=a&&a.timeStamp||v.now();this[v.expando]=!0};v.Event.prototype={constructor:v.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=B;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=B;a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),
a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=B;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){v.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d=a.relatedTarget,c=a.handleObj;if(!d||d!==this&&!v.contains(this,d)){a.type=c.origType;var g=c.handler.apply(this,
arguments);a.type=b}return g}}});O.submit||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=v.nodeName(a,"input")||v.nodeName(a,"button")?v.prop(a,"form"):void 0)&&!v._data(a,"submit")&&(v.event.add(a,"submit._submit",function(a){a._submitBubble=!0}),v._data(a,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&v.event.simulate("submit",
this.parentNode,a))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}});O.change||(v.event.special.change={setup:function(){if(Oc.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)v.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),v.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1);v.event.simulate("change",this,a)});return!1}v.event.add(this,
"beforeactivate._change",function(a){a=a.target;Oc.test(a.nodeName)&&!v._data(a,"change")&&(v.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||v.event.simulate("change",this.parentNode,a)}),v._data(a,"change",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){v.event.remove(this,"._change");return!Oc.test(this.nodeName)}});
O.focusin||v.each({focus:"focusin",blur:"focusout"},function(a,b){var d=function(a){v.event.simulate(b,a.target,v.event.fix(a))};v.event.special[b]={setup:function(){var c=this.ownerDocument||this,g=v._data(c,b);g||c.addEventListener(a,d,!0);v._data(c,b,(g||0)+1)},teardown:function(){var c=this.ownerDocument||this,g=v._data(c,b)-1;g?v._data(c,b,g):(c.removeEventListener(a,d,!0),v._removeData(c,b))}}});v.fn.extend({on:function(a,b,d,c){return E(this,a,b,d,c)},one:function(a,b,d,c){return E(this,a,
b,d,c,1)},off:function(a,b,d){if(a&&a.preventDefault&&a.handleObj){var c=a.handleObj;v(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler);return this}if("object"===typeof a){for(c in a)this.off(c,b,a[c]);return this}if(!1===b||"function"===typeof b)d=b,b=void 0;!1===d&&(d=D);return this.each(function(){v.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){v.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];if(d)return v.event.trigger(a,
b,d,!0)}});var yd=/ jQuery\d+="(?:null|\d+)"/g,Zc=/<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video)[\s/>]/i,wc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Qe=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Hg=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb=w(R).appendChild(R.createElement("div"));v.extend({htmlPrefilter:function(a){return a.replace(wc,
"<$1></$2>")},clone:function(a,b,d){var c,g,h=v.contains(a.ownerDocument,a);if(O.html5Clone||v.isXMLDoc(a)||!Zc.test("<"+a.nodeName+">"))var e=a.cloneNode(!0);else rb.innerHTML=a.outerHTML,rb.removeChild(e=rb.firstChild);if(!(O.noCloneEvent&&O.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||v.isXMLDoc(a))){var f=u(e);var k=u(a);for(g=0;null!=(c=k[g]);++g)if(f[g]){var l=void 0,q=c,n=f[g];if(1===n.nodeType){var p=n.nodeName.toLowerCase();if(!O.noCloneEvent&&n[v.expando]){c=v._data(n);for(l in c.events)v.removeEvent(n,
l,c.handle);n.removeAttribute(v.expando)}if("script"===p&&n.text!==q.text)H(n).text=q.text,F(n);else if("object"===p)n.parentNode&&(n.outerHTML=q.outerHTML),O.html5Clone&&q.innerHTML&&!v.trim(n.innerHTML)&&(n.innerHTML=q.innerHTML);else if("input"===p&&sc.test(q.type))n.defaultChecked=n.checked=q.checked,n.value!==q.value&&(n.value=q.value);else if("option"===p)n.defaultSelected=n.selected=q.defaultSelected;else if("input"===p||"textarea"===p)n.defaultValue=q.defaultValue}}}if(b)if(d)for(k=k||u(a),
f=f||u(e),g=0;null!=(c=k[g]);g++)m(c,f[g]);else m(a,e);f=u(e,"script");0<f.length&&A(f,!h&&u(a,"script"));return e},cleanData:function(a,b){for(var d,c,g,h,e=0,m=v.expando,f=v.cache,k=O.attributes,l=v.event.special;null!=(d=a[e]);e++)if(b||le(d))if(h=(g=d[m])&&f[g]){if(h.events)for(c in h.events)l[c]?v.event.remove(d,c):v.removeEvent(d,c,h.handle);f[g]&&(delete f[g],k||"undefined"===typeof d.removeAttribute?d[m]=void 0:d.removeAttribute(m),Ca.push(g))}}});v.fn.extend({domManip:q,detach:function(a){return G(this,
a,!0)},remove:function(a){return G(this,a)},text:function(a){return vc(this,function(a){return void 0===a?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(a))},null,a,arguments.length)},append:function(){return q(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||x(this,a).appendChild(a)})},prepend:function(){return q(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,
b.firstChild)}})},before:function(){return q(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return q(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&v.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&v.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){a=null==a?!1:a;b=null==b?
a:b;return this.map(function(){return v.clone(this,a,b)})},html:function(a){return vc(this,function(a){var b=this[0]||{},d=0,c=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(yd,""):void 0;if(!("string"!==typeof a||Qe.test(a)||!O.htmlSerialize&&Zc.test(a)||!O.leadingWhitespace&&jb.test(a)||Xa[(Tc.exec(a)||["",""])[1].toLowerCase()])){a=v.htmlPrefilter(a);try{for(;d<c;d++)b=this[d]||{},1===b.nodeType&&(v.cleanData(u(b,!1)),b.innerHTML=a);b=0}catch(qd){}}b&&this.empty().append(a)},
null,a,arguments.length)},replaceWith:function(){var a=[];return q(this,arguments,function(b){var d=this.parentNode;0>v.inArray(this,a)&&(v.cleanData(u(this)),d&&d.replaceChild(b,this))},a)}});v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){v.fn[a]=function(a){for(var d=0,c=[],g=v(a),h=g.length-1;d<=h;d++)a=d===h?this:this.clone(!0),v(g[d])[b](a),Ba.apply(c,a.get());return this.pushStack(c)}});var rd,xa={HTML:"block",
BODY:"block"},Dc=/^margin/,fb=new RegExp("^("+xd+")(?!px)[a-z%]+$","i"),Ua=function(a,b,d,c){var g,h={};for(g in b)h[g]=a.style[g],a.style[g]=b[g];d=d.apply(a,c||[]);for(g in b)a.style[g]=h[g];return d},sb=R.documentElement;(function(){function a(){var a=R.documentElement;a.appendChild(f);k.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=c=m=!1;d=h=!0;if(e.getComputedStyle){var l=e.getComputedStyle(k);
b="1%"!==(l||{}).top;m="2px"===(l||{}).marginLeft;c="4px"===(l||{width:"4px"}).width;k.style.marginRight="50%";d="4px"===(l||{marginRight:"4px"}).marginRight;l=k.appendChild(R.createElement("div"));l.style.cssText=k.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";l.style.marginRight=l.style.width="0";k.style.width="1px";h=!parseFloat((e.getComputedStyle(l)||{}).marginRight);k.removeChild(l)}k.style.display=
"none";if(g=0===k.getClientRects().length)if(k.style.display="",k.innerHTML="<table><tr><td></td><td>t</td></tr></table>",k.childNodes[0].style.borderCollapse="separate",l=k.getElementsByTagName("td"),l[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===l[0].offsetHeight)l[0].style.display="",l[1].style.display="none",g=0===l[0].offsetHeight;a.removeChild(f)}var b,d,c,g,h,m,f=R.createElement("div"),k=R.createElement("div");k.style&&(k.style.cssText="float:left;opacity:.5",O.opacity=
"0.5"===k.style.opacity,O.cssFloat=!!k.style.cssFloat,k.style.backgroundClip="content-box",k.cloneNode(!0).style.backgroundClip="",O.clearCloneStyle="content-box"===k.style.backgroundClip,f=R.createElement("div"),f.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",k.innerHTML="",f.appendChild(k),O.boxSizing=""===k.style.boxSizing||""===k.style.MozBoxSizing||""===k.style.WebkitBoxSizing,v.extend(O,{reliableHiddenOffsets:function(){null==b&&a();
return g},boxSizingReliable:function(){null==b&&a();return c},pixelMarginRight:function(){null==b&&a();return d},pixelPosition:function(){null==b&&a();return b},reliableMarginRight:function(){null==b&&a();return h},reliableMarginLeft:function(){null==b&&a();return m}}))})();var kb=/^(top|right|bottom|left)$/;if(e.getComputedStyle){var Uc=function(a){var b=a.ownerDocument.defaultView;b&&b.opener||(b=e);return b.getComputedStyle(a)};var Qb=function(a,b,d){var c=a.style;var g=(d=d||Uc(a))?d.getPropertyValue(b)||
d[b]:void 0;""!==g&&void 0!==g||v.contains(a.ownerDocument,a)||(g=v.style(a,b));if(d&&!O.pixelMarginRight()&&fb.test(g)&&Dc.test(b)){a=c.width;b=c.minWidth;var h=c.maxWidth;c.minWidth=c.maxWidth=c.width=g;g=d.width;c.width=a;c.minWidth=b;c.maxWidth=h}return void 0===g?g:g+""}}else sb.currentStyle&&(Uc=function(a){return a.currentStyle},Qb=function(a,b,d){var c,g,h=a.style;var e=(d=d||Uc(a))?d[b]:void 0;null==e&&h&&h[b]&&(e=h[b]);if(fb.test(e)&&!kb.test(b)){d=h.left;if(g=(c=a.runtimeStyle)&&c.left)c.left=
a.currentStyle.left;h.left="fontSize"===b?"1em":e;e=h.pixelLeft+"px";h.left=d;g&&(c.left=g)}return void 0===e?e:e+""||"auto"});var Fa=/alpha\([^)]*\)/i,Wb=/opacity\s*=\s*([^)]*)/i,Xb=/^(none|table(?!-c[ea]).+)/,Od=new RegExp("^("+xd+")(.*)$","i"),te={position:"absolute",visibility:"hidden",display:"block"},Ec={letterSpacing:"0",fontWeight:"400"},Le=["Webkit","O","Moz","ms"],Ke=R.createElement("div").style;v.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=Qb(a,"opacity"),""===a?"1":a}}},
cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":O.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,c){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,h=v.camelCase(b),e=a.style;b=v.cssProps[h]||(v.cssProps[h]=ia(h)||h);var m=v.cssHooks[b]||v.cssHooks[h];if(void 0!==d){var f=typeof d;"string"===f&&(g=mf.exec(d))&&g[1]&&(d=r(a,b,g),f="number");
if(null!=d&&d===d&&("number"===f&&(d+=g&&g[3]||(v.cssNumber[h]?"":"px")),O.clearCloneStyle||""!==d||0!==b.indexOf("background")||(e[b]="inherit"),!(m&&"set"in m)||void 0!==(d=m.set(a,d,c))))try{e[b]=d}catch(Uf){}}else return m&&"get"in m&&void 0!==(g=m.get(a,!1,c))?g:e[b]}},css:function(a,b,d,c){var g;var h=v.camelCase(b);b=v.cssProps[h]||(v.cssProps[h]=ia(h)||h);(h=v.cssHooks[b]||v.cssHooks[h])&&"get"in h&&(g=h.get(a,!0,d));void 0===g&&(g=Qb(a,b,c));"normal"===g&&b in Ec&&(g=Ec[b]);return""===d||
d?(a=parseFloat(g),!0===d||isFinite(a)?a||0:g):g}});v.each(["height","width"],function(a,b){v.cssHooks[b]={get:function(a,d,c){if(d)return Xb.test(v.css(a,"display"))&&0===a.offsetWidth?Ua(a,te,function(){return aa(a,b,c)}):aa(a,b,c)},set:function(a,d,c){var g=c&&Uc(a);return W(a,d,c?X(a,b,c,O.boxSizing&&"border-box"===v.css(a,"boxSizing",!1,g),g):0)}}});O.opacity||(v.cssHooks.opacity={get:function(a,b){return Wb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+
"":b?"1":""},set:function(a,b){var d=a.style;a=a.currentStyle;var c=v.isNumeric(b)?"alpha(opacity="+100*b+")":"",g=a&&a.filter||d.filter||"";d.zoom=1;if((1<=b||""===b)&&""===v.trim(g.replace(Fa,""))&&d.removeAttribute&&(d.removeAttribute("filter"),""===b||a&&!a.filter))return;d.filter=Fa.test(g)?g.replace(Fa,c):g+" "+c}});v.cssHooks.marginRight=S(O.reliableMarginRight,function(a,b){if(b)return Ua(a,{display:"inline-block"},Qb,[a,"marginRight"])});v.cssHooks.marginLeft=S(O.reliableMarginLeft,function(a,
b){if(b)return(parseFloat(Qb(a,"marginLeft"))||(v.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Ua(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px"});v.each({margin:"",padding:"",border:"Width"},function(a,b){v.cssHooks[a+b]={expand:function(d){var c=0,g={};for(d="string"===typeof d?d.split(" "):[d];4>c;c++)g[a+Ac[c]+b]=d[c]||d[c-2]||d[0];return g}};Dc.test(a)||(v.cssHooks[a+b].set=W)});v.fn.extend({css:function(a,b){return vc(this,function(a,b,d){var c,g=
{},h=0;if(v.isArray(b)){d=Uc(a);for(c=b.length;h<c;h++)g[b[h]]=v.css(a,b[h],!1,d);return g}return void 0!==d?v.style(a,b,d):v.css(a,b)},a,b,1<arguments.length)},show:function(){return za(this,!0)},hide:function(){return za(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Kc(this)?v(this).show():v(this).hide()})}});v.Tween=U;U.prototype={constructor:U,init:function(a,b,d,c,g,h){this.elem=a;this.prop=d;this.easing=g||v.easing._default;this.options=
b;this.start=this.now=this.cur();this.end=c;this.unit=h||(v.cssNumber[d]?"":"px")},cur:function(){var a=U.propHooks[this.prop];return a&&a.get?a.get(this):U.propHooks._default.get(this)},run:function(a){var b,d=U.propHooks[this.prop];this.pos=this.options.duration?b=v.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);d&&d.set?d.set(this):U.propHooks._default.set(this);
return this}};U.prototype.init.prototype=U.prototype;U.propHooks={_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=v.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(v.fx.step[a.prop])v.fx.step[a.prop](a);else 1!==a.elem.nodeType||null==a.elem.style[v.cssProps[a.prop]]&&!v.cssHooks[a.prop]?a.elem[a.prop]=a.now:v.style(a.elem,a.prop,a.now+a.unit)}}};U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&
a.elem.parentNode&&(a.elem[a.prop]=a.now)}};v.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};v.fx=U.prototype.init;v.fx.step={};var Jb,tb,Bf=/^(?:toggle|show|hide)$/,Ma=/queueHooks$/;v.Animation=v.extend(la,{tweeners:{"*":[function(a,b){var d=this.createTween(a,b);r(d.elem,a,mf.exec(b),d);return d}]},tweener:function(a,b){v.isFunction(a)?(b=a,a=["*"]):a=a.match(vb);for(var d,c=0,g=a.length;c<g;c++)d=a[c],la.tweeners[d]=la.tweeners[d]||[],la.tweeners[d].unshift(b)},
prefilters:[function(a,b,d){var c,g=this,h={},e=a.style,m=a.nodeType&&Kc(a),f=v._data(a,"fxshow");if(!d.queue){var k=v._queueHooks(a,"fx");if(null==k.unqueued){k.unqueued=0;var l=k.empty.fire;k.empty.fire=function(){k.unqueued||l()}}k.unqueued++;g.always(function(){g.always(function(){k.unqueued--;v.queue(a,"fx").length||k.empty.fire()})})}if(1===a.nodeType&&("height"in b||"width"in b)){d.overflow=[e.overflow,e.overflowX,e.overflowY];var q=v.css(a,"display");var n="none"===q?v._data(a,"olddisplay")||
M(a.nodeName):q;"inline"===n&&"none"===v.css(a,"float")&&(O.inlineBlockNeedsLayout&&"inline"!==M(a.nodeName)?e.zoom=1:e.display="inline-block")}d.overflow&&(e.overflow="hidden",O.shrinkWrapBlocks()||g.always(function(){e.overflow=d.overflow[0];e.overflowX=d.overflow[1];e.overflowY=d.overflow[2]}));for(c in b)if(n=b[c],Bf.exec(n)){delete b[c];var p=p||"toggle"===n;if(n===(m?"hide":"show"))if("show"===n&&f&&void 0!==f[c])m=!0;else continue;h[c]=f&&f[c]||v.style(a,c)}else q=void 0;if(v.isEmptyObject(h))"inline"===
("none"===q?M(a.nodeName):q)&&(e.display=q);else for(c in f?"hidden"in f&&(m=f.hidden):f=v._data(a,"fxshow",{}),p&&(f.hidden=!m),m?v(a).show():g.done(function(){v(a).hide()}),g.done(function(){var b;v._removeData(a,"fxshow");for(b in h)v.style(a,b,h[b])}),h)b=ca(m?f[c]:0,c,g),c in f||(f[c]=b.start,m&&(b.end=b.start,b.start="width"===c||"height"===c?1:0))}],prefilter:function(a,b){b?la.prefilters.unshift(a):la.prefilters.push(a)}});v.speed=function(a,b,d){var c=a&&"object"===typeof a?v.extend({},a):
{complete:d||!d&&b||v.isFunction(a)&&a,duration:a,easing:d&&b||b&&!v.isFunction(b)&&b};c.duration=v.fx.off?0:"number"===typeof c.duration?c.duration:c.duration in v.fx.speeds?v.fx.speeds[c.duration]:v.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";c.old=c.complete;c.complete=function(){v.isFunction(c.old)&&c.old.call(this);c.queue&&v.dequeue(this,c.queue)};return c};v.fn.extend({fadeTo:function(a,b,d,c){return this.filter(Kc).css("opacity",0).show().end().animate({opacity:b},a,d,c)},
animate:function(a,b,d,c){var g=v.isEmptyObject(a),h=v.speed(b,d,c);b=function(){var b=la(this,v.extend({},a),h);(g||v._data(this,"finish"))&&b.stop(!0)};b.finish=b;return g||!1===h.queue?this.each(b):this.queue(h.queue,b)},stop:function(a,b,d){var c=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",h=v.timers,e=v._data(this);if(g)e[g]&&e[g].stop&&c(e[g]);else for(g in e)e[g]&&
e[g].stop&&Ma.test(g)&&c(e[g]);for(g=h.length;g--;)h[g].elem!==this||null!=a&&h[g].queue!==a||(h[g].anim.stop(d),b=!1,h.splice(g,1));!b&&d||v.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b=v._data(this),d=b[a+"queue"];var c=b[a+"queueHooks"];var g=v.timers,h=d?d.length:0;b.finish=!0;v.queue(this,a,[]);c&&c.stop&&c.stop.call(this,!0);for(c=g.length;c--;)g[c].elem===this&&g[c].queue===a&&(g[c].anim.stop(!0),g.splice(c,1));for(c=0;c<h;c++)d[c]&&d[c].finish&&
d[c].finish.call(this);delete b.finish})}});v.each(["toggle","show","hide"],function(a,b){var d=v.fn[b];v.fn[b]=function(a,c,g){return null==a||"boolean"===typeof a?d.apply(this,arguments):this.animate(sa(b,!0),a,c,g)}});v.each({slideDown:sa("show"),slideUp:sa("hide"),slideToggle:sa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){v.fn[a]=function(a,d,c){return this.animate(b,a,d,c)}});v.timers=[];v.fx.tick=function(){var a=v.timers,b=0;for(Jb=
v.now();b<a.length;b++){var d=a[b];d()||a[b]!==d||a.splice(b--,1)}a.length||v.fx.stop();Jb=void 0};v.fx.timer=function(a){v.timers.push(a);a()?v.fx.start():v.timers.pop()};v.fx.interval=13;v.fx.start=function(){tb||(tb=e.setInterval(v.fx.tick,v.fx.interval))};v.fx.stop=function(){e.clearInterval(tb);tb=null};v.fx.speeds={slow:600,fast:200,_default:400};v.fn.delay=function(a,b){a=v.fx?v.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,d){var c=e.setTimeout(b,a);d.stop=function(){e.clearTimeout(c)}})};
(function(){var a=R.createElement("input");R.createElement("div");var b=R.createElement("select"),d=b.appendChild(R.createElement("option"));var c=R.createElement("div");c.setAttribute("className","t");c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c.getElementsByTagName("a");a.setAttribute("type","checkbox");c.appendChild(a);var g=c.getElementsByTagName("a")[0];g.style.cssText="top:1px";O.getSetAttribute="t"!==c.className;O.style=/top/.test(g.getAttribute("style"));
O.hrefNormalized="/a"===g.getAttribute("href");O.checkOn=!!a.value;O.optSelected=d.selected;O.enctype=!!R.createElement("form").enctype;b.disabled=!0;O.optDisabled=!d.disabled;a=R.createElement("input");a.setAttribute("value","");O.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");O.radioValue="t"===a.value})();var Wd=/\r/g,Ng=/[\x20\t\r\n\f]+/g;v.fn.extend({val:function(a){var b,d,c=this[0];if(arguments.length){var g=v.isFunction(a);return this.each(function(d){1===this.nodeType&&
(d=g?a.call(this,d,v(this).val()):a,null==d?d="":"number"===typeof d?d+="":v.isArray(d)&&(d=v.map(d,function(a){return null==a?"":a+""})),b=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,d,"value")||(this.value=d))})}if(c){if((b=v.valHooks[c.type]||v.valHooks[c.nodeName.toLowerCase()])&&"get"in b&&void 0!==(d=b.get(c,"value")))return d;d=c.value;return"string"===typeof d?d.replace(Wd,""):null==d?"":d}}});v.extend({valHooks:{option:{get:function(a){var b=
v.find.attr(a,"value");return null!=b?b:v.trim(v.text(a)).replace(Ng," ")}},select:{get:function(a){for(var b,d=a.options,c=a.selectedIndex,g=(a="select-one"===a.type||0>c)?null:[],h=a?c+1:d.length,e=0>c?h:a?c:0;e<h;e++)if(b=d[e],!(!b.selected&&e!==c||(O.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&v.nodeName(b.parentNode,"optgroup"))){b=v(b).val();if(a)return b;g.push(b)}return g},set:function(a,b){for(var d,c=a.options,g=v.makeArray(b),h=c.length;h--;)if(b=c[h],
-1<v.inArray(v.valHooks.option.get(b),g))try{b.selected=d=!0}catch(ra){b.scrollHeight}else b.selected=!1;d||(a.selectedIndex=-1);return c}}}});v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(a,b){if(v.isArray(b))return a.checked=-1<v.inArray(v(a).val(),b)}};O.checkOn||(v.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Va=v.expr.attrHandle,$c=/^(?:checked|selected)$/i,cb=O.getSetAttribute,zb=O.input;v.fn.extend({attr:function(a,b){return vc(this,
v.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){v.removeAttr(this,a)})}});v.extend({attr:function(a,b,d){var c,g=a.nodeType;if(3!==g&&8!==g&&2!==g){if("undefined"===typeof a.getAttribute)return v.prop(a,b,d);if(1!==g||!v.isXMLDoc(a)){b=b.toLowerCase();var h=v.attrHooks[b]||(v.expr.match.bool.test(b)?zd:Pc)}if(void 0!==d){if(null===d){v.removeAttr(a,b);return}if(h&&"set"in h&&void 0!==(c=h.set(a,d,b)))return c;a.setAttribute(b,d+"");return d}if(h&&"get"in h&&null!==
(c=h.get(a,b)))return c;c=v.find.attr(a,b);return null==c?void 0:c}},attrHooks:{type:{set:function(a,b){if(!O.radioValue&&"radio"===b&&v.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}}},removeAttr:function(a,b){var d=0,c=b&&b.match(vb);if(c&&1===a.nodeType)for(;b=c[d++];){var g=v.propFix[b]||b;v.expr.match.bool.test(b)?zb&&cb||!$c.test(b)?a[g]=!1:a[v.camelCase("default-"+b)]=a[g]=!1:v.attr(a,b,"");a.removeAttribute(cb?b:g)}}});var zd={set:function(a,b,d){!1===
b?v.removeAttr(a,d):zb&&cb||!$c.test(d)?a.setAttribute(!cb&&v.propFix[d]||d,d):a[v.camelCase("default-"+d)]=a[d]=!0;return d}};v.each(v.expr.match.bool.source.match(/\w+/g),function(a,b){var d=Va[b]||v.find.attr;zb&&cb||!$c.test(b)?Va[b]=function(a,b,c){if(!c){var g=Va[b];Va[b]=h;var h=null!=d(a,b,c)?b.toLowerCase():null;Va[b]=g}return h}:Va[b]=function(a,b,d){if(!d)return a[v.camelCase("default-"+b)]?b.toLowerCase():null}});zb&&cb||(v.attrHooks.value={set:function(a,b,d){if(v.nodeName(a,"input"))a.defaultValue=
b;else return Pc&&Pc.set(a,b,d)}});if(!cb){var Pc={set:function(a,b,d){var c=a.getAttributeNode(d);c||a.setAttributeNode(c=a.ownerDocument.createAttribute(d));c.value=b+="";if("value"===d||b===a.getAttribute(d))return b}};Va.id=Va.name=Va.coords=function(a,b,d){var c;if(!d)return(c=a.getAttributeNode(b))&&""!==c.value?c.value:null};v.valHooks.button={get:function(a,b){if((a=a.getAttributeNode(b))&&a.specified)return a.value},set:Pc.set};v.attrHooks.contenteditable={set:function(a,b,d){Pc.set(a,""===
b?!1:b,d)}};v.each(["width","height"],function(a,b){v.attrHooks[b]={set:function(a,d){if(""===d)return a.setAttribute(b,"auto"),d}}})}O.style||(v.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Og=/^(?:input|select|textarea|button|object)$/i,Re=/^(?:a|area)$/i;v.fn.extend({prop:function(a,b){return vc(this,v.prop,a,b,1<arguments.length)},removeProp:function(a){a=v.propFix[a]||a;return this.each(function(){try{this[a]=void 0,delete this[a]}catch(pa){}})}});
v.extend({prop:function(a,b,d){var c,g=a.nodeType;if(3!==g&&8!==g&&2!==g){if(1!==g||!v.isXMLDoc(a)){b=v.propFix[b]||b;var h=v.propHooks[b]}return void 0!==d?h&&"set"in h&&void 0!==(c=h.set(a,d,b))?c:a[b]=d:h&&"get"in h&&null!==(c=h.get(a,b))?c:a[b]}},propHooks:{tabIndex:{get:function(a){var b=v.find.attr(a,"tabindex");return b?parseInt(b,10):Og.test(a.nodeName)||Re.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});O.hrefNormalized||v.each(["href","src"],function(a,b){v.propHooks[b]=
{get:function(a){return a.getAttribute(b,4)}}});O.optSelected||(v.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});v.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){v.propFix[this.toLowerCase()]=this});O.enctype||(v.propFix.enctype="encoding");var Ad=
/[\t\r\n\f]/g;v.fn.extend({addClass:function(a){var b,d,c,g,h,e=0;if(v.isFunction(a))return this.each(function(b){v(this).addClass(a.call(this,b,Aa(this)))});if("string"===typeof a&&a)for(b=a.match(vb)||[];d=this[e++];){var m=Aa(d);if(c=1===d.nodeType&&(" "+m+" ").replace(Ad," ")){for(h=0;g=b[h++];)0>c.indexOf(" "+g+" ")&&(c+=g+" ");c=v.trim(c);m!==c&&v.attr(d,"class",c)}}return this},removeClass:function(a){var b,d,c,g,h,e=0;if(v.isFunction(a))return this.each(function(b){v(this).removeClass(a.call(this,
b,Aa(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof a&&a)for(b=a.match(vb)||[];d=this[e++];){var m=Aa(d);if(c=1===d.nodeType&&(" "+m+" ").replace(Ad," ")){for(h=0;g=b[h++];)for(;-1<c.indexOf(" "+g+" ");)c=c.replace(" "+g+" "," ");c=v.trim(c);m!==c&&v.attr(d,"class",c)}}return this},toggleClass:function(a,b){var d=typeof a;return"boolean"===typeof b&&"string"===d?b?this.addClass(a):this.removeClass(a):v.isFunction(a)?this.each(function(d){v(this).toggleClass(a.call(this,
d,Aa(this),b),b)}):this.each(function(){var b,c;if("string"===d){var g=0;var h=v(this);for(c=a.match(vb)||[];b=c[g++];)h.hasClass(b)?h.removeClass(b):h.addClass(b)}else if(void 0===a||"boolean"===d)(b=Aa(this))&&v._data(this,"__className__",b),v.attr(this,"class",b||!1===a?"":v._data(this,"__className__")||"")})},hasClass:function(a){var b,d=0;for(a=" "+a+" ";b=this[d++];)if(1===b.nodeType&&-1<(" "+Aa(b)+" ").replace(Ad," ").indexOf(a))return!0;return!1}});v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){v.fn[b]=function(a,d){return 0<arguments.length?this.on(b,null,a,d):this.trigger(b)}});v.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Xd=e.location,$f=v.now(),Se=/\?/,T=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;v.parseJSON=function(a){if(e.JSON&&e.JSON.parse)return e.JSON.parse(a+"");var b,d=null,c=v.trim(a+"");return c&&!v.trim(c.replace(T,function(a,c,g,h){b&&
c&&(d=0);if(0===d)return a;b=g||c;d+=!h-!g;return""}))?Function("return "+c)():v.error("Invalid JSON: "+a)};v.parseXML=function(a){if(!a||"string"!==typeof a)return null;try{if(e.DOMParser){var b=new e.DOMParser;var d=b.parseFromString(a,"text/xml")}else d=new e.ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)}catch(fc){d=void 0}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+a);return d};var La=/#.*$/,ag=/([?&])_=[^&]*/,bg=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
Yd=/^(?:GET|HEAD)$/,Yb=/^\/\//,Cf=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ic={},Vf={},Fc="*/".concat("*"),jc=Xd.href,Bd=Cf.exec(jc.toLowerCase())||[];v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jc,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Bd[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",
json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ya(ya(a,v.ajaxSettings),b):ya(v.ajaxSettings,a)},ajaxPrefilter:Qa(ic),ajaxTransport:Qa(Vf),ajax:function(a,b){function d(a,b,d,c){var k=b;if(2!==I){I=2;h&&e.clearTimeout(h);
f=void 0;g=c||"";w.readyState=0<a?4:0;c=200<=a&&300>a||304===a;if(d){var G=l;for(var u=w,A,B,F,x,M=G.contents,y=G.dataTypes;"*"===y[0];)y.shift(),void 0===B&&(B=G.mimeType||u.getResponseHeader("Content-Type"));if(B)for(x in M)if(M[x]&&M[x].test(B)){y.unshift(x);break}if(y[0]in d)F=y[0];else{for(x in d){if(!y[0]||G.converters[x+" "+y[0]]){F=x;break}A||(A=x)}F=F||A}F?(F!==y[0]&&y.unshift(F),G=d[F]):G=void 0}a:{d=l;A=G;B=w;F=c;var D;u={};M=d.dataTypes.slice();if(M[1])for(S in d.converters)u[S.toLowerCase()]=
d.converters[S];for(x=M.shift();x;){d.responseFields[x]&&(B[d.responseFields[x]]=A);!X&&F&&d.dataFilter&&(A=d.dataFilter(A,d.dataType));var X=x;if(x=M.shift())if("*"===x)x=X;else if("*"!==X&&X!==x){var S=u[X+" "+x]||u["* "+x];if(!S)for(D in u)if(G=D.split(" "),G[1]===x&&(S=u[X+" "+G[0]]||u["* "+G[0]])){!0===S?S=u[D]:!0!==u[D]&&(x=G[0],M.unshift(G[1]));break}if(!0!==S)if(S&&d["throws"])A=S(A);else try{A=S(A)}catch(vf){G={state:"parsererror",error:S?vf:"No conversion from "+X+" to "+x};break a}}}G=
{state:"success",data:A}}if(c)if(l.ifModified&&((k=w.getResponseHeader("Last-Modified"))&&(v.lastModified[z]=k),(k=w.getResponseHeader("etag"))&&(v.etag[z]=k)),204===a||"HEAD"===l.type)k="nocontent";else if(304===a)k="notmodified";else{k=G.state;var ia=G.data;var E=G.error;c=!E}else if(E=k,a||!k)k="error",0>a&&(a=0);w.status=a;w.statusText=(b||k)+"";c?p.resolveWith(q,[ia,k,w]):p.rejectWith(q,[w,k,E]);w.statusCode(t);t=void 0;m&&n.trigger(c?"ajaxSuccess":"ajaxError",[w,l,c?ia:E]);r.fireWith(q,[w,k]);
m&&(n.trigger("ajaxComplete",[w,l]),--v.active||v.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var c,g,h,m,f,k,l=v.ajaxSetup({},b),q=l.context||l,n=l.context&&(q.nodeType||q.jquery)?v(q):v.event,p=v.Deferred(),r=v.Callbacks("once memory"),t=l.statusCode||{},G={},u={},I=0,A="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===I){if(!k)for(k={};b=bg.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===
I?g:null},setRequestHeader:function(a,b){var d=a.toLowerCase();I||(a=u[d]=u[d]||a,G[a]=b);return this},overrideMimeType:function(a){I||(l.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>I)for(b in a)t[b]=[t[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){a=a||A;f&&f.abort(a);d(0,a);return this}};p.promise(w).complete=r.add;w.success=w.done;w.error=w.fail;l.url=((a||l.url||jc)+"").replace(La,"").replace(Yb,Bd[1]+"//");l.type=b.method||b.type||l.method||l.type;l.dataTypes=
v.trim(l.dataType||"*").toLowerCase().match(vb)||[""];null==l.crossDomain&&(a=Cf.exec(l.url.toLowerCase()),l.crossDomain=!(!a||a[1]===Bd[1]&&a[2]===Bd[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Bd[3]||("http:"===Bd[1]?"80":"443"))));l.data&&l.processData&&"string"!==typeof l.data&&(l.data=v.param(l.data,l.traditional));yb(ic,l,b,w);if(2===I)return w;(m=v.event&&l.global)&&0===v.active++&&v.event.trigger("ajaxStart");l.type=l.type.toUpperCase();l.hasContent=!Yd.test(l.type);var z=l.url;l.hasContent||
(l.data&&(z=l.url+=(Se.test(z)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=ag.test(z)?z.replace(ag,"$1_="+$f++):z+(Se.test(z)?"&":"?")+"_="+$f++));l.ifModified&&(v.lastModified[z]&&w.setRequestHeader("If-Modified-Since",v.lastModified[z]),v.etag[z]&&w.setRequestHeader("If-None-Match",v.etag[z]));(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&w.setRequestHeader("Content-Type",l.contentType);w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+
("*"!==l.dataTypes[0]?", "+Fc+"; q=0.01":""):l.accepts["*"]);for(c in l.headers)w.setRequestHeader(c,l.headers[c]);if(l.beforeSend&&(!1===l.beforeSend.call(q,w,l)||2===I))return w.abort();A="abort";for(c in{success:1,error:1,complete:1})w[c](l[c]);if(f=yb(Vf,l,b,w)){w.readyState=1;m&&n.trigger("ajaxSend",[w,l]);if(2===I)return w;l.async&&0<l.timeout&&(h=e.setTimeout(function(){w.abort("timeout")},l.timeout));try{I=1,f.send(G,d)}catch(tf){if(2>I)d(-1,tf);else throw tf;}}else d(-1,"No Transport");return w},
getJSON:function(a,b,d){return v.get(a,b,d,"json")},getScript:function(a,b){return v.get(a,void 0,b,"script")}});v.each(["get","post"],function(a,b){v[b]=function(a,d,c,g){v.isFunction(d)&&(g=g||c,c=d,d=void 0);return v.ajax(v.extend({url:a,type:b,dataType:g,data:d,success:c},v.isPlainObject(a)&&a))}});v._evalUrl=function(a){return v.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};v.fn.extend({wrapAll:function(a){if(v.isFunction(a))return this.each(function(b){v(this).wrapAll(a.call(this,
b))});if(this[0]){var b=v(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return v.isFunction(a)?this.each(function(b){v(this).wrapInner(a.call(this,b))}):this.each(function(){var b=v(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=v.isFunction(a);return this.each(function(d){v(this).wrapAll(b?
a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()}});v.expr.filters.hidden=function(a){return O.reliableHiddenOffsets()?0>=a.offsetWidth&&0>=a.offsetHeight&&!a.getClientRects().length:Kb(a)};v.expr.filters.visible=function(a){return!v.expr.filters.hidden(a)};var Te=/%20/g,nf=/\[\]$/,Zb=/\r?\n/g,Pg=/^(?:submit|button|image|reset|file)$/i,Cd=/^(?:input|select|textarea|keygen)/i;v.param=function(a,b){var d,
c=[],g=function(a,b){b=v.isFunction(b)?b():null==b?"":b;c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(a)||a.jquery&&!v.isPlainObject(a))v.each(a,function(){g(this.name,this.value)});else for(d in a)Ta(d,a[d],b,g);return c.join("&").replace(Te,"+")};v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=v.prop(this,"elements");return a?
v.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!v(this).is(":disabled")&&Cd.test(this.nodeName)&&!Pg.test(a)&&(this.checked||!sc.test(a))}).map(function(a,b){a=v(this).val();return null==a?null:v.isArray(a)?v.map(a,function(a){return{name:b.name,value:a.replace(Zb,"\r\n")}}):{name:b.name,value:a.replace(Zb,"\r\n")}}).get()}});v.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return this.isLocal?Na():8<R.documentMode?Za():/^(get|post|head|put|delete|options)$/i.test(this.type)&&
Za()||Na()}:Za;var Ue=0,ad={},$b=v.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var a in ad)ad[a](void 0,!0)});O.cors=!!$b&&"withCredentials"in $b;($b=O.ajax=!!$b)&&v.ajaxTransport(function(a){if(!a.crossDomain||O.cors){var b;return{send:function(d,c){var g,h=a.xhr(),m=++Ue;h.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(g in a.xhrFields)h[g]=a.xhrFields[g];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||
(d["X-Requested-With"]="XMLHttpRequest");for(g in d)void 0!==d[g]&&h.setRequestHeader(g,d[g]+"");h.send(a.hasContent&&a.data||null);b=function(d,g){if(b&&(g||4===h.readyState))if(delete ad[m],b=void 0,h.onreadystatechange=v.noop,g)4!==h.readyState&&h.abort();else{var e={};var f=h.status;"string"===typeof h.responseText&&(e.text=h.responseText);try{var k=h.statusText}catch(ne){k=""}f||!a.isLocal||a.crossDomain?1223===f&&(f=204):f=e.text?200:404}e&&c(f,k,e,h.getAllResponseHeaders())};a.async?4===h.readyState?
e.setTimeout(b):h.onreadystatechange=ad[m]=b:b()},abort:function(){b&&b(void 0,!0)}}}});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){v.globalEval(a);return a}}});v.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});v.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=R.head||
v("head")[0]||R.documentElement;return{send:function(c,g){b=R.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,d){if(d||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,d||g(200,"success")};d.insertBefore(b,d.firstChild)},abort:function(){if(b)b.onload(void 0,!0)}}}});var Dd=[],Qc=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var a=Dd.pop()||v.expando+"_"+$f++;this[a]=!0;return a}});v.ajaxPrefilter("json jsonp",function(a,b,d){var c,g=!1!==a.jsonp&&(Qc.test(a.url)?"url":"string"===typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qc.test(a.data)&&"data");if(g||"jsonp"===a.dataTypes[0]){var h=a.jsonpCallback=v.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback;g?a[g]=a[g].replace(Qc,"$1"+h):!1!==a.jsonp&&(a.url+=(Se.test(a.url)?"&":"?")+a.jsonp+"="+
h);a.converters["script json"]=function(){c||v.error(h+" was not called");return c[0]};a.dataTypes[0]="json";var m=e[h];e[h]=function(){c=arguments};d.always(function(){void 0===m?v(e).removeProp(h):e[h]=m;a[h]&&(a.jsonpCallback=b.jsonpCallback,Dd.push(h));c&&v.isFunction(m)&&m(c[0]);c=m=void 0});return"script"}});v.parseHTML=function(a,b,d){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(d=b,b=!1);b=b||R;var c=uc.exec(a);d=!d&&[];if(c)return[b.createElement(c[1])];c=z([a],b,d);d&&d.length&&
v(d).remove();return v.merge([],c.childNodes)};var bd=v.fn.load;v.fn.load=function(a,b,d){if("string"!==typeof a&&bd)return bd.apply(this,arguments);var c,g,h=this,e=a.indexOf(" ");if(-1<e){var m=v.trim(a.slice(e,a.length));a=a.slice(0,e)}v.isFunction(b)?(d=b,b=void 0):b&&"object"===typeof b&&(c="POST");0<h.length&&v.ajax({url:a,type:c||"GET",dataType:"html",data:b}).done(function(a){g=arguments;h.html(m?v("<div>").append(v.parseHTML(a)).find(m):a)}).always(d&&function(a,b){h.each(function(){d.apply(this,
g||[a.responseText,b,a])})});return this};v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){v.fn[b]=function(a){return this.on(b,a)}});v.expr.filters.animated=function(a){return v.grep(v.timers,function(b){return a===b.elem}).length};v.offset={setOffset:function(a,b,d){var c=v.css(a,"position"),g=v(a),h={};"static"===c&&(a.style.position="relative");var e=g.offset();var m=v.css(a,"top");var f=v.css(a,"left");("absolute"===c||"fixed"===c)&&-1<v.inArray("auto",
[m,f])?(f=g.position(),m=f.top,f=f.left):(m=parseFloat(m)||0,f=parseFloat(f)||0);v.isFunction(b)&&(b=b.call(a,d,v.extend({},e)));null!=b.top&&(h.top=b.top-e.top+m);null!=b.left&&(h.left=b.left-e.left+f);"using"in b?b.using.call(a,h):g.css(h)}};v.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){v.offset.setOffset(this,a,b)});var b,d={top:0,left:0},c=(b=this[0])&&b.ownerDocument;if(c){var g=c.documentElement;if(!v.contains(g,b))return d;"undefined"!==typeof b.getBoundingClientRect&&
(d=b.getBoundingClientRect());b=Ra(c);return{top:d.top+(b.pageYOffset||g.scrollTop)-(g.clientTop||0),left:d.left+(b.pageXOffset||g.scrollLeft)-(g.clientLeft||0)}}},position:function(){if(this[0]){var a={top:0,left:0},b=this[0];if("fixed"===v.css(b,"position"))var d=b.getBoundingClientRect();else{var c=this.offsetParent();d=this.offset();v.nodeName(c[0],"html")||(a=c.offset());a.top+=v.css(c[0],"borderTopWidth",!0);a.left+=v.css(c[0],"borderLeftWidth",!0)}return{top:d.top-a.top-v.css(b,"marginTop",
!0),left:d.left-a.left-v.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&!v.nodeName(a,"html")&&"static"===v.css(a,"position");)a=a.offsetParent;return a||sb})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);v.fn[a]=function(c){return vc(this,function(a,c,g){var h=Ra(a);if(void 0===g)return h?b in h?h[b]:h.document.documentElement[c]:a[c];h?h.scrollTo(d?v(h).scrollLeft():g,d?g:v(h).scrollTop()):
a[c]=g},a,c,arguments.length,null)}});v.each(["top","left"],function(a,b){v.cssHooks[b]=S(O.pixelPosition,function(a,d){if(d)return d=Qb(a,b),fb.test(d)?v(a).position()[b]+"px":d})});v.each({Height:"height",Width:"width"},function(a,b){v.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,c){v.fn[c]=function(c,g){var h=arguments.length&&(d||"boolean"!==typeof c),e=d||(!0===c||!0===g?"margin":"border");return vc(this,function(b,d,c){return v.isWindow(b)?b.document.documentElement["client"+a]:
9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):void 0===c?v.css(b,d,e):v.style(b,d,c,e)},b,h?c:void 0,h,null)}})});v.fn.extend({bind:function(a,b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,d,c){return this.on(b,a,d,c)},undelegate:function(a,b,d){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});v.fn.size=function(){return this.length};v.fn.andSelf=
v.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return v});var cd=e.jQuery,Df=e.$;v.noConflict=function(a){e.$===v&&(e.$=Df);a&&e.jQuery===v&&(e.jQuery=cd);return v};f||(e.jQuery=e.$=v);return v});/*
 jQuery UI - v1.10.4 - 2014-01-17
 http://jqueryui.com
 Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
 Copyright 2014 jQuery Foundation and other contributors; Licensed MIT  jQuery Color Animations v2.1.2
 https://github.com/jquery/jquery-color

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 Date: Wed Jan 16 08:47:09 2013 -0600
*/
(function(e,f){function c(a,c){var d=a.nodeName.toLowerCase();if("area"===d){c=a.parentNode;d=c.name;if(!a.href||!d||"map"!==c.nodeName.toLowerCase())return!1;a=e("img[usemap=#"+d+"]")[0];return!!a&&b(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"===d?a.href||c:c)&&b(a)}function b(a){return e.expr.filters.visible(a)&&!e(a).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,h=/^ui-id-\d+$/;e.ui=e.ui||{};e.extend(e.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});e.fn.extend({focus:function(a){return function(b,d){return"number"===typeof b?this.each(function(){var a=this;setTimeout(function(){e(a).focus();d&&d.call(a)},b)}):a.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var a=e.ui.ie&&
/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?e(document):a},zIndex:function(a){if(a!==
f)return this.css("zIndex",a);if(this.length){a=e(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b)return b;a=a.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){h.test(this.id)&&e(this).removeAttr("id")})}});e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(a){return function(b){return!!e.data(b,
a)}}):function(a,b,c){return!!e.data(a,c[3])},focusable:function(a){return c(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var b=e.attr(a,"tabindex"),d=isNaN(b);return(d||0<=b)&&c(a,!d)}});e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(a,b){function d(a,b,d,g){e.each(c,function(){b-=parseFloat(e.css(a,"padding"+this))||0;d&&(b-=parseFloat(e.css(a,"border"+this+"Width"))||0);g&&(b-=parseFloat(e.css(a,"margin"+this))||0)});return b}var c="Width"===b?["Left","Right"]:["Top",
"Bottom"],g=b.toLowerCase(),h={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+b]=function(a){return a===f?h["inner"+b].call(this):this.each(function(){e(this).css(g,d(this,a)+"px")})};e.fn["outer"+b]=function(a,c){return"number"!==typeof a?h["outer"+b].call(this,a):this.each(function(){e(this).css(g,d(this,a,!0,c)+"px")})}});e.fn.addBack||(e.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(a){return function(b){return arguments.length?a.call(this,e.camelCase(b)):a.call(this)}}(e.fn.removeData));e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());e.support.selectstart="onselectstart"in document.createElement("div");e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
e.extend(e.ui,{plugin:{add:function(a,b,c){var d;a=e.ui[a].prototype;for(d in c)a.plugins[d]=a.plugins[d]||[],a.plugins[d].push([b,c[d]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},hasScroll:function(a,b){if("hidden"===e(a).css("overflow"))return!1;b=b&&"left"===b?"scrollLeft":"scrollTop";if(0<a[b])return!0;a[b]=1;var d=0<a[b];a[b]=0;return d}})})(jQuery);
(function(e,f){var c=0,b=Array.prototype.slice,a=e.cleanData;e.cleanData=function(b){for(var d=0,c;null!=(c=b[d]);d++)try{e(c).triggerHandler("remove")}catch(k){}a(b)};e.widget=function(a,b,c){var d={},g=a.split(".")[0];a=a.split(".")[1];var h=g+"-"+a;c||(c=b,b=e.Widget);e.expr[":"][h.toLowerCase()]=function(a){return!!e.data(a,h)};e[g]=e[g]||{};var f=e[g][a];var r=e[g][a]=function(a,b){if(!this._createWidget)return new r(a,b);arguments.length&&this._createWidget(a,b)};e.extend(r,f,{version:c.version,
_proto:e.extend({},c),_childConstructors:[]});var w=new b;w.options=e.widget.extend({},w.options);e.each(c,function(a,c){e.isFunction(c)?d[a]=function(){var d=function(){return b.prototype[a].apply(this,arguments)},g=function(d){return b.prototype[a].apply(this,d)};return function(){var a=this._super,b=this._superApply;this._super=d;this._superApply=g;var h=c.apply(this,arguments);this._super=a;this._superApply=b;return h}}():d[a]=c});r.prototype=e.widget.extend(w,{widgetEventPrefix:f?w.widgetEventPrefix||
a:a},d,{constructor:r,namespace:g,widgetName:a,widgetFullName:h});f?(e.each(f._childConstructors,function(a,b){a=b.prototype;e.widget(a.namespace+"."+a.widgetName,r,b._proto)}),delete f._childConstructors):b._childConstructors.push(r);e.widget.bridge(a,r)};e.widget.extend=function(a){for(var d=b.call(arguments,1),c=0,h=d.length,l,n;c<h;c++)for(l in d[c])n=d[c][l],d[c].hasOwnProperty(l)&&n!==f&&(e.isPlainObject(n)?a[l]=e.isPlainObject(a[l])?e.widget.extend({},a[l],n):e.widget.extend({},n):a[l]=n);
return a};e.widget.bridge=function(a,d){var c=d.prototype.widgetFullName||a;e.fn[a]=function(g){var h="string"===typeof g,k=b.call(arguments,1),p=this;g=!h&&k.length?e.widget.extend.apply(null,[g].concat(k)):g;h?this.each(function(){var b=e.data(this,c);if(!b)return e.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+g+"'");if(!e.isFunction(b[g])||"_"===g.charAt(0))return e.error("no such method '"+g+"' for "+a+" widget instance");var d=b[g].apply(b,k);if(d!==
b&&d!==f)return p=d&&d.jquery?p.pushStack(d.get()):d,!1}):this.each(function(){var a=e.data(this,c);a?a.option(g||{})._init():e.data(this,c,new d(g,this))});return p}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,b){b=e(b||this.defaultElement||this)[0];this.element=e(b);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=e.widget.extend({},
this.options,this._getCreateOptions(),a);this.bindings=e();this.hoverable=e();this.focusable=e();b!==this&&(e.data(b,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===b&&this.destroy()}}),this.document=e(b.style?b.ownerDocument:b.document||b),this.window=e(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,
_init:e.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},
option:function(a,b){var d=a,c;if(0===arguments.length)return e.widget.extend({},this.options);if("string"===typeof a){d={};var h=a.split(".");a=h.shift();if(h.length){var n=d[a]=e.widget.extend({},this.options[a]);for(c=0;c<h.length-1;c++)n[h[c]]=n[h[c]]||{},n=n[h[c]];a=h.pop();if(1===arguments.length)return n[a]===f?null:n[a];n[a]=b}else{if(1===arguments.length)return this.options[a]===f?null:this.options[a];d[a]=b}}this._setOptions(d);return this},_setOptions:function(a){for(var b in a)this._setOption(b,
a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,b,c){var d,g=this;"boolean"!==typeof a&&(c=b,b=a,a=!1);c?(b=d=e(b),this.bindings=this.bindings.add(b)):
(c=b,b=this.element,d=this.widget());e.each(c,function(c,h){function f(){if(a||!0!==g.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"===typeof h?g[h]:h).apply(g,arguments)}"string"!==typeof h&&(f.guid=h.guid=h.guid||f.guid||e.guid++);var k=c.match(/^(\w+)\s*(.*)$/);c=k[1]+g.eventNamespace;(k=k[2])?d.delegate(k,c,f):b.bind(c,f)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=
this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){e(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){e(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){e(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){e(a.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(a,b,c){var d,g=this.options[a];c=c||{};b=e.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(d in a)d in b||(b[d]=a[d]);this.element.trigger(b,c);return!(e.isFunction(g)&&!1===g.apply(this.element[0],[b].concat(c))||b.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(a,b){e.Widget.prototype["_"+a]=function(d,c,h){"string"===typeof c&&(c={effect:c});var g=c?!0===c||"number"===
typeof c?b:c.effect||b:a;c=c||{};"number"===typeof c&&(c={duration:c});var f=!e.isEmptyObject(c);c.complete=h;c.delay&&d.delay(c.delay);if(f&&e.effects&&e.effects.effect[g])d[a](c);else if(g!==a&&d[g])d[g](c.duration,c.easing,h);else d.queue(function(b){e(this)[a]();h&&h.call(d[0]);b()})}})})(jQuery);
(function(e,f){var c=!1;e(document).mouseup(function(){c=!1});e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(a){if(!0===e.data(a.target,b.widgetName+".preventClickEvent"))return e.removeData(a.target,b.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var a=this,h=1===b.which,d="string"===typeof this.options.cancel&&b.target.nodeName?e(b.target).closest(this.options.cancel).length:!1;if(!h||d||!this._mouseCapture(b))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===e.data(b.target,this.widgetName+".preventClickEvent")&&e.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return a._mouseMove(b)};this._mouseUpDelegate=function(b){return a._mouseUp(b)};
e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return c=!0}},_mouseMove:function(b){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));
return!this._mouseStarted},_mouseUp:function(b){e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&e.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(e,f){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var b=this.options;if(this.helper||b.disabled||0<e(c.target).closest(".ui-resizable-handle").length)return!1;
this.handle=this._getHandle(c);if(!this.handle)return!1;e(!0===b.iframeFix?"iframe":b.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(e(this).offset()).appendTo("body")});return!0},_mouseStart:function(c){var b=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
e.ui.ddmanager&&(e.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;e.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this._setContainment();if(!1===this._trigger("start",c))return this._clear(),!1;this._cacheHelperProportions();e.ui.ddmanager&&!b.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,c);this._mouseDrag(c,!0);e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,c);return!0},
_mouseDrag:function(c,b){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(!1===this._trigger("drag",c,b))return this._mouseUp({}),!1;this.position=b.position}this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");
e.ui.ddmanager&&e.ui.ddmanager.drag(this,c);return!1},_mouseStop:function(c){var b=this,a=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,c));this.dropped&&(a=this.dropped,this.dropped=!1);if("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))return!1;"invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==b._trigger("stop",c)&&b._clear()}):!1!==this._trigger("stop",c)&&this._clear();return!1},_mouseUp:function(c){e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,c);return e.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(c){return this.options.handle?
!!e(c.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var b=this.options;c=e.isFunction(b.helper)?e(b.helper.apply(this.element[0],[c])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;c.parents("body").length||c.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo);c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute");return c},_adjustOffsetFromHelper:function(c){"string"===
typeof c&&(c=c.split(" "));e.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){var c=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
e.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)c={top:0,left:0};return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var c=this.element.position();
return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c;var b=this.options;if(b.containment)if("window"===b.containment)this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];else if("document"===b.containment)this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(b.containment.constructor===Array)this.containment=b.containment;else{"parent"===b.containment&&(b.containment=this.helper[0].parentNode);var a=e(b.containment);if(c=a[0])b="hidden"!==a.css("overflow"),this.containment=[(parseInt(a.css("borderLeftWidth"),
10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=a}else this.containment=null},_convertPositionTo:function(c,b){b||(b=this.position);c="absolute"===c?1:-1;var a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()});return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*c}},_generatePosition:function(c){var b=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;var h=c.pageX;var d=c.pageY;this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),
left:a.scrollLeft()});if(this.originalPosition){if(this.containment){if(this.relative_container){var g=this.relative_container.offset();g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else g=this.containment;c.pageX-this.offset.click.left<g[0]&&(h=g[0]+this.offset.click.left);c.pageY-this.offset.click.top<g[1]&&(d=g[1]+this.offset.click.top);c.pageX-this.offset.click.left>g[2]&&(h=g[2]+this.offset.click.left);c.pageY-this.offset.click.top>
g[3]&&(d=g[3]+this.offset.click.top)}b.grid&&(d=b.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY,d=g?d-this.offset.click.top>=g[1]||d-this.offset.click.top>g[3]?d:d-this.offset.click.top>=g[1]?d-b.grid[1]:d+b.grid[1]:d,h=b.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX,h=g?h-this.offset.click.left>=g[0]||h-this.offset.click.left>g[2]?h:h-this.offset.click.left>=g[0]?h-b.grid[0]:h+b.grid[0]:
h)}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;
this.cancelHelperRemoval=!1},_trigger:function(c,b,a){a=a||this._uiHash();e.ui.plugin.call(this,c,[b,a]);"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute"));return e.Widget.prototype._trigger.call(this,c,b,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(c,b){var a=e(this).data("ui-draggable"),h=a.options,d=e.extend({},
b,{item:a.element});a.sortables=[];e(h.connectToSortable).each(function(){var b=e.data(this,"ui-sortable");b&&!b.options.disabled&&(a.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",c,d))})},stop:function(c,b){var a=e(this).data("ui-draggable"),h=e.extend({},b,{item:a.element});e.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=
this.shouldRevert),this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,h))})},drag:function(c,b){var a=e(this).data("ui-draggable"),h=this;e.each(a.sortables,function(){var d=!1,g=this;this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=
a.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(d=!0,e.each(a.sortables,function(){this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(g.instance.element[0],this.instance.element[0])&&(d=!1);return d}));d?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(h).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",
!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,
a._trigger("toSortable",c),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&
this.instance.placeholder.remove(),a._trigger("fromSortable",c),a.dropped=!1)})}});e.ui.plugin.add("draggable","cursor",{start:function(){var c=e("body"),b=e(this).data("ui-draggable").options;c.css("cursor")&&(b._cursor=c.css("cursor"));c.css("cursor",b.cursor)},stop:function(){var c=e(this).data("ui-draggable").options;c._cursor&&e("body").css("cursor",c._cursor)}});e.ui.plugin.add("draggable","opacity",{start:function(c,b){c=e(b.helper);b=e(this).data("ui-draggable").options;c.css("opacity")&&
(b._opacity=c.css("opacity"));c.css("opacity",b.opacity)},stop:function(c,b){c=e(this).data("ui-draggable").options;c._opacity&&e(b.helper).css("opacity",c._opacity)}});e.ui.plugin.add("draggable","scroll",{start:function(){var c=e(this).data("ui-draggable");c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(c){var b=e(this).data("ui-draggable"),a=b.options,h=!1;b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName?
(a.axis&&"x"===a.axis||(b.overflowOffset.top+b.scrollParent[0].offsetHeight-c.pageY<a.scrollSensitivity?b.scrollParent[0].scrollTop=h=b.scrollParent[0].scrollTop+a.scrollSpeed:c.pageY-b.overflowOffset.top<a.scrollSensitivity&&(b.scrollParent[0].scrollTop=h=b.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(b.overflowOffset.left+b.scrollParent[0].offsetWidth-c.pageX<a.scrollSensitivity?b.scrollParent[0].scrollLeft=h=b.scrollParent[0].scrollLeft+a.scrollSpeed:c.pageX-b.overflowOffset.left<
a.scrollSensitivity&&(b.scrollParent[0].scrollLeft=h=b.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(c.pageY-e(document).scrollTop()<a.scrollSensitivity?h=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(c.pageY-e(document).scrollTop())<a.scrollSensitivity&&(h=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(c.pageX-e(document).scrollLeft()<a.scrollSensitivity?h=e(document).scrollLeft(e(document).scrollLeft()-
a.scrollSpeed):e(window).width()-(c.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(h=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))));!1!==h&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(b,c)}});e.ui.plugin.add("draggable","snap",{start:function(){var c=e(this).data("ui-draggable"),b=c.options;c.snapElements=[];e(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var a=e(this),b=a.offset();this!==c.element[0]&&c.snapElements.push({item:this,
width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(c,b){var a,h=e(this).data("ui-draggable"),d=h.options,g=d.snapTolerance,f=b.offset.left,l=f+h.helperProportions.width,n=b.offset.top,p=n+h.helperProportions.height;for(a=h.snapElements.length-1;0<=a;a--){var r=h.snapElements[a].left;var w=r+h.snapElements[a].width;var u=h.snapElements[a].top;var A=u+h.snapElements[a].height;if(l<r-g||f>w+g||p<u-g||n>A+g||!e.contains(h.snapElements[a].item.ownerDocument,h.snapElements[a].item))h.snapElements[a].snapping&&
h.options.snap.release&&h.options.snap.release.call(h.element,c,e.extend(h._uiHash(),{snapItem:h.snapElements[a].item})),h.snapElements[a].snapping=!1;else{if("inner"!==d.snapMode){var t=Math.abs(u-p)<=g;var z=Math.abs(A-n)<=g;var B=Math.abs(r-l)<=g;var D=Math.abs(w-f)<=g;t&&(b.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top);z&&(b.position.top=h._convertPositionTo("relative",{top:A,left:0}).top-h.margins.top);B&&(b.position.left=h._convertPositionTo("relative",
{top:0,left:r-h.helperProportions.width}).left-h.margins.left);D&&(b.position.left=h._convertPositionTo("relative",{top:0,left:w}).left-h.margins.left)}var y=t||z||B||D;"outer"!==d.snapMode&&(t=Math.abs(u-n)<=g,z=Math.abs(A-p)<=g,B=Math.abs(r-f)<=g,D=Math.abs(w-l)<=g,t&&(b.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),z&&(b.position.top=h._convertPositionTo("relative",{top:A-h.helperProportions.height,left:0}).top-h.margins.top),B&&(b.position.left=h._convertPositionTo("relative",
{top:0,left:r}).left-h.margins.left),D&&(b.position.left=h._convertPositionTo("relative",{top:0,left:w-h.helperProportions.width}).left-h.margins.left));!h.snapElements[a].snapping&&(t||z||B||D||y)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,c,e.extend(h._uiHash(),{snapItem:h.snapElements[a].item}));h.snapElements[a].snapping=t||z||B||D||y}}}});e.ui.plugin.add("draggable","stack",{start:function(){var c=this.data("ui-draggable").options;c=e.makeArray(e(c.stack)).sort(function(a,b){return(parseInt(e(a).css("zIndex"),
10)||0)-(parseInt(e(b).css("zIndex"),10)||0)});if(c.length){var b=parseInt(e(c[0]).css("zIndex"),10)||0;e(c).each(function(a){e(this).css("zIndex",b+a)});this.css("zIndex",b+c.length)}}});e.ui.plugin.add("draggable","zIndex",{start:function(c,b){c=e(b.helper);b=e(this).data("ui-draggable").options;c.css("zIndex")&&(b._zIndex=c.css("zIndex"));c.css("zIndex",b.zIndex)},stop:function(c,b){c=e(this).data("ui-draggable").options;c._zIndex&&e(b.helper).css("zIndex",c._zIndex)}})})(jQuery);
(function(e,f){e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var c,b=this.options,a=b.accept;this.isover=!1;this.isout=!0;this.accept=e.isFunction(a)?a:function(b){return b.is(a)};this.proportions=function(){if(arguments.length)c=arguments[0];else return c?c:c={width:this.element[0].offsetWidth,
height:this.element[0].offsetHeight}};e.ui.ddmanager.droppables[b.scope]=e.ui.ddmanager.droppables[b.scope]||[];e.ui.ddmanager.droppables[b.scope].push(this);b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var c=0,b=e.ui.ddmanager.droppables[this.options.scope];c<b.length;c++)b[c]===this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,b){"accept"===c&&(this.accept=e.isFunction(b)?b:function(a){return a.is(b)});e.Widget.prototype._setOption.apply(this,
arguments)},_activate:function(c){var b=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);b&&this._trigger("activate",c,this.ui(b))},_deactivate:function(c){var b=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",c,this.ui(b))},_over:function(c){var b=e.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||
b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(b)))},_out:function(c){var b=e.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(b)))},_drop:function(c,b){var a=b||e.ui.ddmanager.current,h=!1;if(!a||(a.currentItem||a.element)[0]===this.element[0])return!1;
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=e.data(this,"ui-droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope===a.options.scope&&b.accept.call(b.element[0],a.currentItem||a.element)&&e.ui.intersect(a,e.extend(b,{offset:b.element.offset()}),b.options.tolerance))return h=!0,!1});return h?!1:this.accept.call(this.element[0],a.currentItem||a.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&
this.element.removeClass(this.options.hoverClass),this._trigger("drop",c,this.ui(a)),this.element):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});e.ui.intersect=function(c,b,a){if(!b.offset)return!1;var h=(c.positionAbs||c.position.absolute).left,d=(c.positionAbs||c.position.absolute).top,g=h+c.helperProportions.width,e=d+c.helperProportions.height,f=b.offset.left,n=b.offset.top,p=f+b.proportions().width,r=n+b.proportions().height;
switch(a){case "fit":return f<=h&&g<=p&&n<=d&&e<=r;case "intersect":return f<h+c.helperProportions.width/2&&g-c.helperProportions.width/2<p&&n<d+c.helperProportions.height/2&&e-c.helperProportions.height/2<r;case "pointer":a=(c.positionAbs||c.position.absolute).left+(c.clickOffset||c.offset.click).left;c=(c.positionAbs||c.position.absolute).top+(c.clickOffset||c.offset.click).top;h=b.proportions().height;if(n=c>n&&c<n+h)b=b.proportions().width,n=a>f&&a<f+b;return n;case "touch":return(d>=n&&d<=r||
e>=n&&e<=r||d<n&&e>r)&&(h>=f&&h<=p||g>=f&&g<=p||h<f&&g>p);default:return!1}};e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(c,b){var a,h=e.ui.ddmanager.droppables[c.options.scope]||[],d=b?b.type:null,g=(c.currentItem||c.element).find(":data(ui-droppable)").addBack();var f=0;a:for(;f<h.length;f++)if(!(h[f].options.disabled||c&&!h[f].accept.call(h[f].element[0],c.currentItem||c.element))){for(a=0;a<g.length;a++)if(g[a]===h[f].element[0]){h[f].proportions().height=0;continue a}h[f].visible=
"none"!==h[f].element.css("display");h[f].visible&&("mousedown"===d&&h[f]._activate.call(h[f],b),h[f].offset=h[f].element.offset(),h[f].proportions({width:h[f].element[0].offsetWidth,height:h[f].element[0].offsetHeight}))}},drop:function(c,b){var a=!1;e.each((e.ui.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(c,this,this.options.tolerance)&&(a=this._drop.call(this,b)||a),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,b)))});return a},dragStart:function(c,b){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||e.ui.ddmanager.prepareOffsets(c,b)})},drag:function(c,b){c.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(c,b);e.each(e.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var a=e.ui.intersect(c,this,this.options.tolerance);
var h=!a&&this.isover?"isout":a&&!this.isover?"isover":null;if(h){if(this.options.greedy){var d=this.options.scope;a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===d});if(a.length){var g=e.data(a[0],"ui-droppable");g.greedyChild="isover"===h}}g&&"isover"===h&&(g.isover=!1,g.isout=!0,g._out.call(g,b));this[h]=!0;this["isout"===h?"isover":"isout"]=!1;this["isover"===h?"_over":"_out"].call(this,b);g&&"isout"===h&&(g.isout=!1,g.isover=
!0,g._over.call(g,b))}}})},dragStop:function(c,b){c.element.parentsUntil("body").unbind("scroll.droppable");c.options.refreshPositions||e.ui.ddmanager.prepareOffsets(c,b)}}})(jQuery);
(function(e,f){function c(a){return parseInt(a,10)||0}function b(a){return!isNaN(parseInt(a,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var a,b=this,d=this.options;this.element.addClass("ui-resizable");
e.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=d.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles={};for(a=0;a<c.length;a++){var f=e.trim(c[a]);var l="ui-resizable-"+f;var n=e("<div class='ui-resizable-handle "+l+"'></div>");n.css({zIndex:d.zIndex});"se"===f&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(n)}}this._renderAxis=function(a){var b;a=a||this.element;for(b in this.handles){this.handles[b].constructor===
String&&(this.handles[b]=e(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=e(this.handles[b],this.element);var c=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth();d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(d,c);this._proportionallyResize()}e(this.handles[b])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){b.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),b.axis=n&&n[1]?n[1]:"se")});d.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){d.disabled||(e(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){d.disabled||b.resizing||(e(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var a=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var b=this.element;this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b);b.remove()}this.originalElement.css("resize",this.originalResizeStyle);a(this.originalElement);
return this},_mouseCapture:function(a){var b,d=!1;for(b in this.handles){var c=e(this.handles[b])[0];if(c===a.target||e.contains(c,a.target))d=!0}return!this.options.disabled&&d},_mouseStart:function(a){var b=this.options;var d=this.element.position();var g=this.element;this.resizing=!0;/absolute/.test(g.css("position"))?g.css({position:"absolute",top:g.css("top"),left:g.css("left")}):g.is(".ui-draggable")&&g.css({position:"absolute",top:d.top,left:d.left});this._renderProxy();d=c(this.helper.css("left"));
var f=c(this.helper.css("top"));b.containment&&(d+=e(b.containment).scrollLeft()||0,f+=e(b.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:d,top:f};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalPosition={left:d,top:f};this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-
g.height()};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio="number"===typeof b.aspectRatio?b.aspectRatio:this.originalSize.width/this.originalSize.height||1;b=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor","auto"===b?this.axis+"-resize":b);g.addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var b=this.helper,d={};var c=this.originalMousePosition;var f=this.position.top,l=this.position.left,n=this.size.width,p=
this.size.height,r=this._change[this.axis];if(!r)return!1;c=r.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);c=this._respectSize(c,a);this._updateCache(c);this._propagate("resize",a);this.position.top!==f&&(d.top=this.position.top+"px");this.position.left!==l&&(d.left=this.position.left+"px");this.size.width!==n&&(d.width=this.size.width+"px");this.size.height!==p&&(d.height=this.size.height+"px");
b.css(d);!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();e.isEmptyObject(d)||this._trigger("resize",a,this.ui());return!1},_mouseStop:function(a){this.resizing=!1;var b,d=this.options;if(this._helper){var c=this._proportionallyResizeElements;c=(b=c.length&&/textarea/i.test(c[0].nodeName))&&e.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height;b=b?0:this.sizeDiff.width;b={width:this.helper.width()-b,height:this.helper.height()-c};c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null;var f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(e.extend(b,{top:f,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!d.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var c=
this.options;c={minWidth:b(c.minWidth)?c.minWidth:0,maxWidth:b(c.maxWidth)?c.maxWidth:Infinity,minHeight:b(c.minHeight)?c.minHeight:0,maxHeight:b(c.maxHeight)?c.maxHeight:Infinity};if(this._aspectRatio||a){a=c.minHeight*this.aspectRatio;var d=c.minWidth/this.aspectRatio;var g=c.maxHeight*this.aspectRatio;var e=c.maxWidth/this.aspectRatio;a>c.minWidth&&(c.minWidth=a);d>c.minHeight&&(c.minHeight=d);g<c.maxWidth&&(c.maxWidth=g);e<c.maxHeight&&(c.maxHeight=e)}this._vBoundaries=c},_updateCache:function(a){this.offset=
this.helper.offset();b(a.left)&&(this.position.left=a.left);b(a.top)&&(this.position.top=a.top);b(a.height)&&(this.size.height=a.height);b(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var c=this.position,d=this.size,g=this.axis;b(a.height)?a.width=a.height*this.aspectRatio:b(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===g&&(a.left=c.left+(d.width-a.width),a.top=null);"nw"===g&&(a.top=c.top+(d.height-a.height),a.left=c.left+(d.width-a.width));return a},_respectSize:function(a){var c=
this._vBoundaries,d=this.axis,g=b(a.width)&&c.maxWidth&&c.maxWidth<a.width,e=b(a.height)&&c.maxHeight&&c.maxHeight<a.height,f=b(a.width)&&c.minWidth&&c.minWidth>a.width,n=b(a.height)&&c.minHeight&&c.minHeight>a.height,p=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,w=/sw|nw|w/.test(d);d=/nw|ne|n/.test(d);f&&(a.width=c.minWidth);n&&(a.height=c.minHeight);g&&(a.width=c.maxWidth);e&&(a.height=c.maxHeight);f&&w&&(a.left=p-c.minWidth);g&&w&&(a.left=p-c.maxWidth);
n&&d&&(a.top=r-c.minHeight);e&&d&&(a.top=r-c.maxHeight);a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null;return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,d=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){this.borderDif=[];var e=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")];
var f=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];for(b=0;b<e.length;b++)this.borderDif[b]=(parseInt(e[b],10)||0)+(parseInt(f[b],10)||0)}c.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(a,b,d){return{height:this.originalSize.height+
d}},se:function(a,b,d){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,d]))},sw:function(a,b,d){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,d]))},ne:function(a,b,d){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,d]))},nw:function(a,b,d){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,d]))}},_propagate:function(a,b){e.ui.plugin.call(this,a,[b,this.ui()]);
"resize"!==a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(a){var b=e(this).data("ui-resizable"),d=b.options,c=b._proportionallyResizeElements,f=c.length&&/textarea/i.test(c[0].nodeName),l=f&&e.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height;f=
{width:b.size.width-(f?0:b.sizeDiff.width),height:b.size.height-l};l=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null;var n=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(e.extend(f,n&&l?{top:n,left:l}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),
10)};c&&c.length&&e(c[0]).css({width:d.width,height:d.height});b._updateCache(d);b._propagate("resize",a)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var a=e(this).data("ui-resizable"),b=a.element;var d=a.options.containment;if(b=d instanceof e?d.get(0):/parent/.test(d)?b.parent().get(0):d)if(a.containerElement=e(b),/document/.test(d)||d===document)a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),
height:e(document).height()||document.body.parentNode.scrollHeight};else{var g=e(b);var f=[];e(["Top","Right","Left","Bottom"]).each(function(a,b){f[a]=c(g.css("padding"+b))});a.containerOffset=g.offset();a.containerPosition=g.position();a.containerSize={height:g.innerHeight()-f[3],width:g.innerWidth()-f[1]};d=a.containerOffset;var l=a.containerSize.height;var n=a.containerSize.width;n=e.ui.hasScroll(b,"left")?b.scrollWidth:n;l=e.ui.hasScroll(b)?b.scrollHeight:l;a.parentData={element:b,left:d.left,
top:d.top,width:n,height:l}}},resize:function(a){var b=e(this).data("ui-resizable");var d=b.options;var c=b.containerOffset;var f=b.position;a=b._aspectRatio||a.shiftKey;var l={top:0,left:0};var n=b.containerElement;n[0]!==document&&/static/.test(n.css("position"))&&(l=c);f.left<(b._helper?c.left:0)&&(b.size.width+=b._helper?b.position.left-c.left:b.position.left-l.left,a&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=d.helper?c.left:0);f.top<(b._helper?c.top:0)&&(b.size.height+=b._helper?
b.position.top-c.top:b.position.top,a&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?c.top:0);b.offset.left=b.parentData.left+b.position.left;b.offset.top=b.parentData.top+b.position.top;d=Math.abs(b.offset.left-l.left+b.sizeDiff.width);c=Math.abs((b._helper?b.offset.top-l.top:b.offset.top-c.top)+b.sizeDiff.height);f=b.containerElement.get(0)===b.element.parent().get(0);l=/relative|absolute/.test(b.containerElement.css("position"));f&&l&&(d-=Math.abs(b.parentData.left));d+b.size.width>=
b.parentData.width&&(b.size.width=b.parentData.width-d,a&&(b.size.height=b.size.width/b.aspectRatio));c+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-c,a&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var a=e(this).data("ui-resizable"),b=a.options,d=a.containerOffset,c=a.containerPosition,f=a.containerElement,l=e(a.helper),n=l.offset(),p=l.outerWidth()-a.sizeDiff.width;l=l.outerHeight()-a.sizeDiff.height;a._helper&&!b.animate&&/relative/.test(f.css("position"))&&
e(this).css({left:n.left-c.left-d.left,width:p,height:l});a._helper&&!b.animate&&/static/.test(f.css("position"))&&e(this).css({left:n.left-c.left-d.left,width:p,height:l})}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var a=e(this).data("ui-resizable").options,b=function(a){e(a).each(function(){var a=e(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof a.alsoResize||
a.alsoResize.parentNode?b(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):e.each(a.alsoResize,function(a){b(a)})},resize:function(a,b){a=e(this).data("ui-resizable");var d=a.options,c=a.originalSize,h=a.originalPosition,f={height:a.size.height-c.height||0,width:a.size.width-c.width||0,top:a.position.top-h.top||0,left:a.position.left-h.left||0},n=function(a,d){e(a).each(function(){var a=e(this),c=e(this).data("ui-resizable-alsoresize"),g={},h=d&&d.length?d:a.parents(b.originalElement[0]).length?
["width","height"]:["width","height","top","left"];e.each(h,function(a,b){(a=(c[b]||0)+(f[b]||0))&&0<=a&&(g[b]=a||null)});a.css(g)})};"object"!==typeof d.alsoResize||d.alsoResize.nodeType?n(d.alsoResize):e.each(d.alsoResize,function(a,b){n(a,b)})},stop:function(){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var a=e(this).data("ui-resizable"),b=a.options,d=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:.25,display:"block",position:"relative",
height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof b.ghost?b.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=e(this).data("ui-resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=e(this).data("ui-resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var a=e(this).data("ui-resizable"),
b=a.options,d=a.size,c=a.originalSize,f=a.originalPosition,l=a.axis,n="number"===typeof b.grid?[b.grid,b.grid]:b.grid,p=n[0]||1,r=n[1]||1,w=Math.round((d.width-c.width)/p)*p;d=Math.round((d.height-c.height)/r)*r;var u=c.width+w,A=c.height+d,t=b.maxWidth&&b.maxWidth<u,z=b.maxHeight&&b.maxHeight<A,B=b.minWidth&&b.minWidth>u,D=b.minHeight&&b.minHeight>A;b.grid=n;B&&(u+=p);D&&(A+=r);t&&(u-=p);z&&(A-=r);/^(se|s|e)$/.test(l)?(a.size.width=u,a.size.height=A):/^(ne)$/.test(l)?(a.size.width=u,a.size.height=
A,a.position.top=f.top-d):/^(sw)$/.test(l)?(a.size.width=u,a.size.height=A,a.position.left=f.left-w):(0<A-r?(a.size.height=A,a.position.top=f.top-d):(a.size.height=r,a.position.top=f.top+c.height-r),0<u-p?(a.size.width=u,a.position.left=f.left-w):(a.size.width=p,a.position.left=f.left+c.width-p))}})})(jQuery);
(function(e,f){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,b=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){c=e(b.options.filter,b.element[0]);c.addClass("ui-selectee");c.each(function(){var a=e(this),b=a.offset();e.data(this,"selectable-item",{element:this,$element:a,
left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(c){var b=this,a=this.options;this.opos=[c.pageX,c.pageY];this.options.disabled||(this.selectees=e(a.filter,this.element[0]),this._trigger("start",c),e(a.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=e.data(this,"selectable-item");a.startselected=!0;c.metaKey||c.ctrlKey||(a.$element.removeClass("ui-selected"),a.selected=!1,
a.$element.addClass("ui-unselecting"),a.unselecting=!0,b._trigger("unselecting",c,{unselecting:a.element}))}),e(c.target).parents().addBack().each(function(){var a=e.data(this,"selectable-item");if(a){var d=!c.metaKey&&!c.ctrlKey||!a.$element.hasClass("ui-selected");a.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");a.unselecting=!d;a.selecting=d;(a.selected=d)?b._trigger("selecting",c,{selecting:a.element}):b._trigger("unselecting",c,{unselecting:a.element});
return!1}}))},_mouseDrag:function(c){this.dragged=!0;if(!this.options.disabled){var b=this,a=this.options,h=this.opos[0],d=this.opos[1],g=c.pageX,f=c.pageY;if(h>g){var l=g;g=h;h=l}d>f&&(l=f,f=d,d=l);this.helper.css({left:h,top:d,width:g-h,height:f-d});this.selectees.each(function(){var k=e.data(this,"selectable-item"),l=!1;k&&k.element!==b.element[0]&&("touch"===a.tolerance?l=!(k.left>g||k.right<h||k.top>f||k.bottom<d):"fit"===a.tolerance&&(l=k.left>h&&k.right<g&&k.top>d&&k.bottom<f),l?(k.selected&&
(k.$element.removeClass("ui-selected"),k.selected=!1),k.unselecting&&(k.$element.removeClass("ui-unselecting"),k.unselecting=!1),k.selecting||(k.$element.addClass("ui-selecting"),k.selecting=!0,b._trigger("selecting",c,{selecting:k.element}))):(k.selecting&&((c.metaKey||c.ctrlKey)&&k.startselected?(k.$element.removeClass("ui-selecting"),k.selecting=!1,k.$element.addClass("ui-selected"),k.selected=!0):(k.$element.removeClass("ui-selecting"),k.selecting=!1,k.startselected&&(k.$element.addClass("ui-unselecting"),
k.unselecting=!0),b._trigger("unselecting",c,{unselecting:k.element}))),!k.selected||c.metaKey||c.ctrlKey||k.startselected||(k.$element.removeClass("ui-selected"),k.selected=!1,k.$element.addClass("ui-unselecting"),k.unselecting=!0,b._trigger("unselecting",c,{unselecting:k.element}))))});return!1}},_mouseStop:function(c){var b=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");a.$element.removeClass("ui-unselecting");a.unselecting=!1;a.startselected=
!1;b._trigger("unselected",c,{unselected:a.element})});e(".ui-selecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");a.$element.removeClass("ui-selecting").addClass("ui-selected");a.selecting=!1;a.selected=!0;a.startselected=!0;b._trigger("selected",c,{selected:a.element})});this._trigger("stop",c);this.helper.remove();return!1}})})(jQuery);
(function(e,f){function c(a,b,d){return a>b&&a<b+d}function b(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,
scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||b(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");
this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,b){"disabled"===a?(this.options[a]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var d=null,c=!1,h=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(a);e(a.target).parents().each(function(){if(e.data(this,
h.widgetName+"-item")===h)return d=e(this),!1});e.data(a.target,h.widgetName+"-item")===h&&(d=e(a.target));if(!d||this.options.handle&&!b&&(e(this.options.handle,d).find("*").addBack().each(function(){this===a.target&&(c=!0)}),!c))return!1;this.currentItem=d;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,d){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();
this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor&&"auto"!==b.cursor){var c=this.document.find("body");this.storedCursor=c.css("cursor");c.css("cursor",b.cursor);this.storedStylesheet=e("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(c)}b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));e.ui.ddmanager&&
(e.ui.ddmanager.current=this);e.ui.ddmanager&&!b.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){var b;var d=this.options;var c=!1;this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
c=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(a.pageY-e(document).scrollTop()<d.scrollSensitivity?c=e(document).scrollTop(e(document).scrollTop()-d.scrollSpeed):e(window).height()-(a.pageY-e(document).scrollTop())<d.scrollSensitivity&&(c=e(document).scrollTop(e(document).scrollTop()+d.scrollSpeed)),a.pageX-e(document).scrollLeft()<d.scrollSensitivity?c=e(document).scrollLeft(e(document).scrollLeft()-d.scrollSpeed):e(window).width()-(a.pageX-e(document).scrollLeft())<d.scrollSensitivity&&(c=e(document).scrollLeft(e(document).scrollLeft()+
d.scrollSpeed))),!1!==c&&e.ui.ddmanager&&!d.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,a));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--){c=this.items[d];var f=c.item[0];if((b=this._intersectsWithPointer(c))&&c.instance===this.currentContainer&&f!==this.currentItem[0]&&
this.placeholder[1===b?"next":"prev"]()[0]!==f&&!e.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],f):1)){this.direction=1===b?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);e.ui.ddmanager&&e.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,
b){if(a){e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this;b=this.placeholder.offset();var c=this.options.axis,h={};c&&"x"!==c||(h.left=b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));c&&"y"!==c||(h.top=b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;e(this.helper).animate(h,parseInt(this.options.revert,
10)||500,function(){d._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=
0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};
e(b).each(function(){var b=(e(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);b&&d.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))});!d.length&&a.key&&d.push(a.key+"=");return d.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};b.each(function(){d.push(e(a.item||this).attr(a.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,d=b+this.helperProportions.width,c=this.positionAbs.top,
e=c+this.helperProportions.height,f=a.left,n=f+a.width,p=a.top,r=p+a.height,w=this.offset.click.top,u=this.offset.click.left;w="x"===this.options.axis||c+w>p&&c+w<r;u="y"===this.options.axis||b+u>f&&b+u<n;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?w&&u:f<b+this.helperProportions.width/2&&d-this.helperProportions.width/2<n&&p<c+this.helperProportions.height/
2&&e-this.helperProportions.height/2<r},_intersectsWithPointer:function(a){var b="x"===this.options.axis||c(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||c(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return b?this.floating?d&&"right"===d||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(a){var b=c(this.positionAbs.top+this.offset.click.top,
a.top+a.height/2,a.height);a=c(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?"right"===g&&a||"left"===g&&!a:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?
"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function b(){f.push(this)}var d,c,f=[],l=[],n=this._connectWith();if(n&&a)for(a=n.length-1;0<=a;a--){var p=e(n[a]);for(d=p.length-1;0<=d;d--)(c=e.data(p[d],this.widgetFullName))&&c!==this&&!c.options.disabled&&l.push([e.isFunction(c.options.items)?c.options.items.call(c.element):
e(c.options.items,c.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),c])}l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=l.length-1;0<=a;a--)l[a][0].each(b);return e(f)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,
function(b){for(var d=0;d<a.length;d++)if(a[d]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var b,d,c,f,l=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):e(this.options.items,this.element),this]];if((f=this._connectWith())&&this.ready)for(b=f.length-1;0<=b;b--){var p=e(f[b]);for(d=p.length-1;0<=d;d--)(c=e.data(p[d],this.widgetFullName))&&c!==this&&!c.options.disabled&&(n.push([e.isFunction(c.options.items)?
c.options.items.call(c.element[0],a,{item:this.currentItem}):e(c.options.items,c.element),c]),this.containers.push(c))}for(b=n.length-1;0<=b;b--)for(a=n[b][1],p=n[b][0],d=0,f=p.length;d<f;d++)c=e(p[d]),c.data(this.widgetName+"-item",a),l.push({item:c,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b;for(b=this.items.length-1;0<=b;b--){var d=this.items[b];if(d.instance===this.currentContainer||
!this.currentContainer||d.item[0]===this.currentItem[0]){var c=this.options.toleranceElement?e(this.options.toleranceElement,d.item):d.item;a||(d.width=c.outerWidth(),d.height=c.outerHeight());c=c.offset();d.left=c.left;d.top=c.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)c=this.containers[b].element.offset(),this.containers[b].containerCache.left=c.left,this.containers[b].containerCache.top=
c.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var b=a.options;if(!b.placeholder||b.placeholder.constructor===String){var d=b.placeholder;b.placeholder={element:function(){var b=a.currentItem[0].nodeName.toLowerCase(),c=e("<"+b+">",a.document[0]).addClass(d||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
"tr"===b?a.currentItem.children().each(function(){e("<td>&#160;</td>",a.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(c)}):"img"===b&&c.attr("src",a.currentItem.attr("src"));d||c.css("visibility","hidden");return c},update:function(c,e){if(!d||b.forcePlaceholderSize)e.height()||e.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||
0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}}}a.placeholder=e(b.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);b.placeholder.update(a,a.placeholder)},_contactContainers:function(a){var h,d,g,f=d=null;for(h=this.containers.length-1;0<=h;h--)e.contains(this.currentItem[0],this.containers[h].element[0])||(this._intersectsWith(this.containers[h].containerCache)?d&&e.contains(this.containers[h].element[0],d.element[0])||(d=this.containers[h],f=h):this.containers[h].containerCache.over&&
(this.containers[h]._trigger("out",a,this._uiHash(this)),this.containers[h].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",a,this._uiHash(this)),this.containers[f].containerCache.over=1);else{h=1E4;var l=null;var n=(g=d.floating||b(this.currentItem))?"left":"top";var p=g?"width":"height";var r=this.positionAbs[n]+this.offset.click[n];for(d=this.items.length-1;0<=d;d--)if(e.contains(this.containers[f].element[0],
this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(!g||c(this.positionAbs.top+this.offset.click.top,this.items[d].top,this.items[d].height))){var w=this.items[d].item.offset()[n];var u=!1;Math.abs(w-r)>Math.abs(w+this.items[d][p]-r)&&(u=!0,w+=this.items[d][p]);Math.abs(w-r)<h&&(h=Math.abs(w-r),l=this.items[d],this.direction=u?"up":"down")}(l||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[f]&&(l?this._rearrange(a,l,null,!0):this._rearrange(a,null,this.containers[f].element,
!0),this._trigger("change",a,this._uiHash()),this.containers[f]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",a,this._uiHash(this)),this.containers[f].containerCache.over=1)}},_createHelper:function(a){var b=this.options;a=e.isFunction(b.helper)?e(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;
a.parents("body").length||e("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});a[0].style.width&&!b.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!b.forceHelperSize||a.height(this.currentItem.height());return a},
_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));e.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=
this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode);if("document"===a.containment||"window"===a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=e(a.containment)[0];a=e(a.containment).offset();var d="hidden"!==e(b).css("overflow");this.containment=[a.left+(parseInt(e(b).css("borderLeftWidth"),10)||0)+(parseInt(e(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(e(b).css("borderTopWidth"),10)||0)+(parseInt(e(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(b.scrollWidth,
b.offsetWidth):b.offsetWidth)-(parseInt(e(b).css("borderLeftWidth"),10)||0)-(parseInt(e(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(e(b).css("borderTopWidth"),10)||0)-(parseInt(e(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);a="absolute"===a?1:-1;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==
document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(d[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:d.scrollTop())*a,left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:d.scrollLeft())*a}},_generatePosition:function(a){var b=this.options;var d=a.pageX;var c=
a.pageY;var f="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(f[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),
a.pageY-this.offset.click.top<this.containment[1]&&(c=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(c=this.containment[3]+this.offset.click.top)),b.grid&&(c=this.originalPageY+Math.round((c-this.originalPageY)/b.grid[1])*b.grid[1],c=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=
this.containment[1]?c-b.grid[1]:c+b.grid[1]:c,d=this.originalPageX+Math.round((d-this.originalPageX)/b.grid[0])*b.grid[0],d=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-b.grid[0]:d+b.grid[0]:d));return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:f.scrollTop()),left:d-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:f.scrollLeft())}},_rearrange:function(a,b,d,c){d?d[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var g=this.counter=this.counter?++this.counter:1;this._delay(function(){g===this.counter&&this.refreshPositions(!c)})},_clear:function(a,b){function d(a,b,d){return function(c){d._trigger(a,
c,b._uiHash(b))}}this.reverting=!1;var c,e=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)if("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])this._storedCSS[c]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});
!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,
this.currentContainer)));for(c=this.containers.length-1;0<=c;c--)b||e.push(d("deactivate",this,this.containers[c])),this.containers[c].containerCache.over&&(e.push(d("out",this,this.containers[c])),this.containers[c].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);
this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(c=0;c<e.length;c++)e[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(c=0;c<e.length;c++)e[c].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},
_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||e([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}})})(jQuery);
(function(e,f){e.effects={effect:{}};(function(c,b){function a(a,b,d){var c=p[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=c.floor?~~a:parseFloat(a);return isNaN(a)?b.def:c.mod?(a+c.mod)%c.mod:0>a?0:c.max<a?c.max:a}function e(a){var b=l(),d=b._rgba=[];a=a.toLowerCase();u(f,function(c,g){c=(c=g.re.exec(a))&&g.parse(c);g=g.space||"rgba";if(c)return c=b[g](c),b[n[g].cache]=c[n[g].cache],d=b._rgba=c._rgba,!1});return d.length?("0,0,0,0"===d.join()&&c.extend(d,A.transparent),b):A[a]}function d(a,
b,d){d=(d+1)%1;return 1>6*d?a+(b-a)*d*6:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,f=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],l=c.Color=function(a,b,d,g){return new c.Color.fn.parse(a,b,d,g)},n={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,
type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},r=l.support={},w=c("<p>")[0],u=c.each;w.style.cssText="background-color:rgba(1,1,1,.5)";r.rgba=-1<w.style.backgroundColor.indexOf("rgba");u(n,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});l.fn=c.extend(l.prototype,{parse:function(d,g,h,f){if(d===b)return this._rgba=[null,null,
null,null],this;if(d.jquery||d.nodeType)d=c(d).css(g),g=b;var k=this,p=c.type(d),r=this._rgba=[];g!==b&&(d=[d,g,h,f],p="array");if("string"===p)return this.parse(e(d)||A._default);if("array"===p)return u(n.rgba.props,function(b,c){r[c.idx]=a(d[c.idx],c)}),this;if("object"===p)return d instanceof l?u(n,function(a,b){d[b.cache]&&(k[b.cache]=d[b.cache].slice())}):u(n,function(b,g){var e=g.cache;u(g.props,function(b,c){if(!k[e]&&g.to){if("alpha"===b||null==d[b])return;k[e]=g.to(k._rgba)}k[e][c.idx]=a(d[b],
c,!0)});k[e]&&0>c.inArray(null,k[e].slice(0,3))&&(k[e][3]=1,g.from&&(k._rgba=g.from(k[e])))}),this},is:function(a){var b=l(a),d=!0,c=this;u(n,function(a,g){var e=b[g.cache];if(e){var h=c[g.cache]||g.to&&g.to(c._rgba)||[];u(g.props,function(a,b){if(null!=e[b.idx])return d=e[b.idx]===h[b.idx]})}return d});return d},_space:function(){var a=[],b=this;u(n,function(d,c){b[c.cache]&&a.push(d)});return a.pop()},transition:function(b,d){var c=l(b);b=c._space();var g=n[b],e=0===this.alpha()?l("transparent"):
this,h=e[g.cache]||g.to(e._rgba),f=h.slice();c=c[g.cache];u(g.props,function(b,g){b=g.idx;var e=h[b],k=c[b],l=p[g.type]||{};null!==k&&(null===e?f[b]=k:(l.mod&&(k-e>l.mod/2?e+=l.mod:e-k>l.mod/2&&(e-=l.mod)),f[b]=a((k-e)*d+e,g)))});return this[b](f)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),d=b.pop(),g=l(a)._rgba;return l(c.map(b,function(a,b){return(1-d)*g[b]+d*a}))},toRgbaString:function(){var a="rgba(",b=c.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});
1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a="hsla(",b=c.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),d=b.pop();a&&b.push(~~(255*d));return"#"+c.map(b,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});l.fn.parse.prototype=
l.fn;n.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,d=a[1]/255,c=a[2]/255;a=a[3];var g=Math.max(b,d,c),e=Math.min(b,d,c),h=g-e,f=g+e,k=.5*f;return[Math.round(e===g?0:b===g?60*(d-c)/h+360:d===g?60*(c-b)/h+120:60*(b-d)/h+240)%360,0===h?0:.5>=k?h/f:h/(2-f),k,null==a?1:a]};n.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],g=a[2];a=a[3];c=.5>=g?g*(1+c):g+c-g*c;g=2*g-c;return[Math.round(255*
d(g,c,b+1/3)),Math.round(255*d(g,c,b)),Math.round(255*d(g,c,b-1/3)),a]};u(n,function(d,e){var h=e.props,f=e.cache,k=e.to,n=e.from;l.fn[d]=function(d){k&&!this[f]&&(this[f]=k(this._rgba));if(d===b)return this[f].slice();var g=c.type(d),e="array"===g||"object"===g?d:arguments,m=this[f].slice();u(h,function(b,d){b=e["object"===g?b:d.idx];null==b&&(b=m[d.idx]);m[d.idx]=a(b,d)});if(n){var q=l(n(m));q[f]=m;return q}return l(m)};u(h,function(a,b){l.fn[a]||(l.fn[a]=function(e){var h=c.type(e),f="alpha"===
a?this._hsla?"hsla":"rgba":d,k=this[f](),l=k[b.idx];if("undefined"===h)return l;"function"===h&&(e=e.call(this,l),h=c.type(e));if(null==e&&b.empty)return this;"string"===h&&(h=g.exec(e))&&(e=l+parseFloat(h[2])*("+"===h[1]?1:-1));k[b.idx]=e;return this[f](k)})})});l.hook=function(a){a=a.split(" ");u(a,function(a,b){c.cssHooks[b]={set:function(a,d){var g,h="";if("transparent"!==d&&("string"!==c.type(d)||(g=e(d)))){d=l(g||d);if(!r.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===b?a.parentNode:a;(""===
h||"transparent"===h)&&g&&g.style;)try{h=c.css(g,"backgroundColor"),g=g.parentNode}catch(H){}d=d.blend(h&&"transparent"!==h?h:"_default")}d=d.toRgbaString()}try{a.style[b]=d}catch(H){}}};c.fx.step[b]=function(a){a.colorInit||(a.start=l(a.elem,b),a.end=l(a.end),a.colorInit=!0);c.cssHooks[b].set(a.elem,a.start.transition(a.end,a.pos))}})};l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
c.cssHooks.borderColor={expand:function(a){var b={};u(["Top","Right","Bottom","Left"],function(d,c){b["border"+c+"Color"]=a});return b}};var A=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(a){var b=
a.ownerDocument.defaultView?a.ownerDocument.defaultView.getComputedStyle(a,null):a.currentStyle,c={};if(b&&b.length&&b[0]&&b[b[0]])for(a=b.length;a--;){var h=b[a];"string"===typeof b[h]&&(c[e.camelCase(h)]=b[h])}else for(h in b)"string"===typeof b[h]&&(c[h]=b[h]);return c}var b=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(a,b){e.fx.step[b]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,b,a.end),a.setAttr=!0}});e.fn.addBack||(e.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});e.effects.animateClass=function(h,d,g,f){var k=e.speed(d,g,f);return this.queue(function(){var d=e(this),g=d.attr("class")||"",f=k.children?d.find("*").addBack():d;f=f.map(function(){return{el:e(this),start:c(this)}});var l=function(){e.each(b,function(a,
b){if(h[b])d[b+"Class"](h[b])})};l();f=f.map(function(){this.end=c(this.el[0]);var b=this.start,d=this.end,g={},h;for(h in d){var f=d[h];b[h]===f||a[h]||!e.fx.step[h]&&isNaN(parseFloat(f))||(g[h]=f)}this.diff=g;return this});d.attr("class",g);f=f.map(function(){var a=this,b=e.Deferred(),d=e.extend({},k,{queue:!1,complete:function(){b.resolve(a)}});this.el.animate(this.diff,d);return b.promise()});e.when.apply(e,f.get()).done(function(){l();e.each(arguments,function(){var a=this.el;e.each(this.diff,
function(b){a.css(b,"")})});k.complete.call(d[0])})})};e.fn.extend({addClass:function(a){return function(b,c,h,f){return c?e.effects.animateClass.call(this,{add:b},c,h,f):a.apply(this,arguments)}}(e.fn.addClass),removeClass:function(a){return function(b,c,h,f){return 1<arguments.length?e.effects.animateClass.call(this,{remove:b},c,h,f):a.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(a){return function(b,c,h,l,n){return"boolean"===typeof c||c===f?h?e.effects.animateClass.call(this,
c?{add:b}:{remove:b},h,l,n):a.apply(this,arguments):e.effects.animateClass.call(this,{toggle:b},c,h,l)}}(e.fn.toggleClass),switchClass:function(a,b,c,f,l){return e.effects.animateClass.call(this,{add:b,remove:a},c,f,l)}})})();(function(){function c(a,b,d,c){e.isPlainObject(a)&&(b=a,a=a.effect);a={effect:a};null==b&&(b={});e.isFunction(b)&&(c=b,d=null,b={});if("number"===typeof b||e.fx.speeds[b])c=d,d=b,b={};e.isFunction(d)&&(c=d,d=null);b&&e.extend(a,b);d=d||b.duration;a.duration=e.fx.off?0:"number"===
typeof d?d:d in e.fx.speeds?e.fx.speeds[d]:e.fx.speeds._default;a.complete=c||b.complete;return a}function b(a){return!a||"number"===typeof a||e.fx.speeds[a]||"string"===typeof a&&!e.effects.effect[a]||e.isFunction(a)||"object"===typeof a&&!a.effect?!0:!1}e.extend(e.effects,{version:"1.10.4",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data("ui-effects-"+b[d],a[0].style[b[d]])},restore:function(a,b){var d;for(d=0;d<b.length;d++)if(null!==b[d]){var c=a.data("ui-effects-"+b[d]);c===
f&&(c="");a.css(b[d],c)}},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){switch(a[0]){case "top":var d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/b.height}switch(a[1]){case "left":a=0;break;case "center":a=.5;break;case "right":a=1;break;default:a=a[1]/b.width}return{x:a,y:d}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),
"float":a.css("float")},d=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),c={width:a.width(),height:a.height()},f=document.activeElement;try{f.id}catch(l){f=document.body}a.wrap(d);(a[0]===f||e.contains(a[0],f))&&e(f).focus();d=a.parent();"static"===a.css("position")?(d.css({position:"relative"}),a.css({position:"relative"})):(e.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),e.each(["top","left","bottom",
"right"],function(d,c){b[c]=a.css(c);isNaN(parseInt(b[c],10))&&(b[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));a.css(c);return d.css(b).show()},removeWrapper:function(a){var b=document.activeElement;a.parent().is(".ui-effects-wrapper")&&(a.parent().replaceWith(a),(a[0]===b||e.contains(a[0],b))&&e(b).focus());return a},setTransition:function(a,b,d,c){c=c||{};e.each(b,function(b,g){b=a.cssUnit(g);0<b[0]&&(c[g]=b[0]*d+b[1])});return c}});e.fn.extend({effect:function(){function a(a){function d(){e.isFunction(g)&&
g.call(c[0]);e.isFunction(a)&&a()}var c=e(this),g=b.complete,h=b.mode;(c.is(":hidden")?"hide"===h:"show"===h)?(c[h](),d()):f.call(c[0],b,d)}var b=c.apply(this,arguments),d=b.mode,g=b.queue,f=e.effects.effect[b.effect];return e.fx.off||!f?d?this[d](b.duration,b.complete):this.each(function(){b.complete&&b.complete.call(this)}):!1===g?this.each(a):this.queue(g||"fx",a)},show:function(a){return function(e){if(b(e))return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="show";return this.effect.call(this,
d)}}(e.fn.show),hide:function(a){return function(e){if(b(e))return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="hide";return this.effect.call(this,d)}}(e.fn.hide),toggle:function(a){return function(e){if(b(e)||"boolean"===typeof e)return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="toggle";return this.effect.call(this,d)}}(e.fn.toggle),cssUnit:function(a){var b=this.css(a),d=[];e.each(["em","px","%","pt"],function(a,c){0<b.indexOf(c)&&(d=[parseFloat(b),c])});return d}})})();
(function(){var c={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(b,a){c[a]=function(a){return Math.pow(a,b+2)}});e.extend(c,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(b){for(var a,c=4;b<((a=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*a-2)/22-b,2)}});e.each(c,function(b,
a){e.easing["easeIn"+b]=a;e.easing["easeOut"+b]=function(b){return 1-a(1-b)};e.easing["easeInOut"+b]=function(b){return.5>b?a(2*b)/2:1-a(-2*b+2)/2}})})()})(jQuery);
(function(e,f){var c=0,b={},a={};b.height=b.paddingTop=b.paddingBottom=b.borderTopWidth=b.borderBottomWidth="hide";a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show";e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var a=this.options;
this.prevShow=this.prevHide=e();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");a.collapsible||!1!==a.active&&null!=a.active||(a.active=0);this._processPanels();0>a.active&&(a.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var a=this.options.icons;a&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+
a.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();var a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===
a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(a){if(!a.altKey&&!a.ctrlKey){var b=e.ui.keyCode,c=this.headers.length,h=this.headers.index(a.target),f=!1;switch(a.keyCode){case b.RIGHT:case b.DOWN:f=this.headers[(h+
1)%c];break;case b.LEFT:case b.UP:f=this.headers[(h-1+c)%c];break;case b.SPACE:case b.ENTER:this._eventHandler(a);break;case b.HOME:f=this.headers[0];break;case b.END:f=this.headers[c-1]}f&&(e(a.target).attr("tabIndex",-1),e(f).attr("tabIndex",0),f.focus(),a.preventDefault())}},_panelKeyDown:function(a){a.keyCode===e.ui.keyCode.UP&&a.ctrlKey&&e(a.currentTarget).prev().focus()},refresh:function(){var a=this.options;this._processPanels();!1===a.active&&!0===a.collapsible||!this.headers.length?(a.active=
!1,this.active=e()):!1===a.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(a.active=!1,this.active=e()):this._activate(Math.max(0,a.active-1)):a.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var a=this.options,b=a.heightStyle,g=this.element.parent(),f=this.accordionId="ui-accordion-"+(this.element.attr("id")||++c);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(a){var b=e(this),d=b.attr("id"),c=b.next(),g=c.attr("id");d||(d=f+"-header-"+a,b.attr("id",d));g||(g=f+"-panel-"+
a,c.attr("id",g));b.attr("aria-controls",g);c.attr("aria-labelledby",d)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(a.event);if("fill"===b){var l=g.height();this.element.siblings(":visible").each(function(){var a=
e(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(l-=a.outerHeight(!0))});this.headers.each(function(){l-=e(this).outerHeight(!0)});this.headers.next().each(function(){e(this).height(Math.max(0,l-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else"auto"===b&&(l=0,this.headers.next().each(function(){l=Math.max(l,e(this).css("height","").height())}).height(l))},_activate:function(a){a=this._findActive(a)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:e.noop}))},_findActive:function(a){return"number"===typeof a?this.headers.eq(a):e()},_setupEvents:function(a){var b={keydown:"_keydown"};a&&e.each(a.split(" "),function(a,d){b[d]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,b);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(a){var b=this.options,c=this.active,h=e(a.currentTarget),f=
h[0]===c[0],n=f&&b.collapsible,p=n?e():h.next(),r=c.next();p={oldHeader:c,oldPanel:r,newHeader:n?e():h,newPanel:p};a.preventDefault();f&&!b.collapsible||!1===this._trigger("beforeActivate",a,p)||(b.active=n?!1:this.headers.index(h),this.active=f?e():h,this._toggle(p),c.removeClass("ui-accordion-header-active ui-state-active"),b.icons&&c.children(".ui-accordion-header-icon").removeClass(b.icons.activeHeader).addClass(b.icons.header),f||(h.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
b.icons&&h.children(".ui-accordion-header-icon").removeClass(b.icons.header).addClass(b.icons.activeHeader),h.next().addClass("ui-accordion-content-active")))},_toggle:function(a){var b=a.newPanel,c=this.prevShow.length?this.prevShow:a.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=b;this.prevHide=c;this.options.animate?this._animate(b,c,a):(c.hide(),b.show(),this._toggleComplete(a));c.attr({"aria-hidden":"true"});c.prev().attr("aria-selected","false");b.length&&c.length?c.prev().attr({tabIndex:-1,
"aria-expanded":"false"}):b.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1);b.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(c,d,g){var e,h,f=this,p=0,r=c.length&&(!d.length||c.index()<d.index()),w=this.options.animate||{};r=r&&w.down||w;var u=function(){f._toggleComplete(g)};"number"===typeof r&&(h=r);"string"===typeof r&&(e=r);e=e||r.easing||w.easing;h=h||r.duration||w.duration;
if(!d.length)return c.animate(a,h,e,u);if(!c.length)return d.animate(b,h,e,u);var A=c.show().outerHeight();d.animate(b,{duration:h,easing:e,step:function(a,b){b.now=Math.round(a)}});c.hide().animate(a,{duration:h,easing:e,complete:u,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?p+=b.now:"content"!==f.options.heightStyle&&(b.now=Math.round(A-d.outerHeight()-p),p=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}})})(jQuery);
(function(e,f){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var c,b,a,h=this.element[0].nodeName.toLowerCase(),d="textarea"===h;h="input"===h;this.isMultiLine=d?!0:h?!1:this.element.prop("isContentEditable");this.valueMethod=
this.element[d||h?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(d){if(this.element.prop("readOnly"))b=a=c=!0;else{b=a=c=!1;var g=e.ui.keyCode;switch(d.keyCode){case g.PAGE_UP:c=!0;this._move("previousPage",d);break;case g.PAGE_DOWN:c=!0;this._move("nextPage",d);break;case g.UP:c=!0;this._keyEvent("previous",d);break;case g.DOWN:c=!0;this._keyEvent("next",d);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&
(c=!0,d.preventDefault(),this.menu.select(d));break;case g.TAB:this.menu.active&&this.menu.select(d);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(d),d.preventDefault());break;default:b=!0,this._searchTimeout(d)}}},keypress:function(a){if(c)c=!1,this.isMultiLine&&!this.menu.element.is(":visible")||a.preventDefault();else if(!b){var d=e.ui.keyCode;switch(a.keyCode){case d.PAGE_UP:this._move("previousPage",a);break;case d.PAGE_DOWN:this._move("nextPage",a);
break;case d.UP:this._keyEvent("previous",a);break;case d.DOWN:this._keyEvent("next",a)}}},input:function(b){a?(a=!1,b.preventDefault()):this._searchTimeout(b)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,
{mousedown:function(a){a.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var b=this.menu.element[0];e(a.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(d){d.target===a.element[0]||d.target===b||e.contains(b,d.target)||a.close()})})},menufocus:function(a,b){if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){e(a.target).trigger(a.originalEvent)});
return}b=b.item.data("ui-autocomplete-item");!1!==this._trigger("focus",a,{item:b})?a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(b.value):this.liveRegion.text(b.value)},menuselect:function(a,b){var d=b.item.data("ui-autocomplete-item"),c=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c;this.selectedItem=d}));!1!==this._trigger("select",a,{item:d})&&this._value(d.value);this.term=this._value();
this.close(a);this.selectedItem=d}});this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(c,b){this._super(c,b);"source"===c&&this._initSource();
"appendTo"===c&&this.menu.element.appendTo(this._appendTo());"disabled"===c&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var c=this.options.appendTo;c&&(c=c.jquery||c.nodeType?e(c):this.document.find(c).eq(0));c||(c=this.element.closest(".ui-front"));c.length||(c=this.document[0].body);return c},_initSource:function(){var c=this;if(e.isArray(this.options.source)){var b=this.options.source;this.source=function(a,d){d(e.ui.autocomplete.filter(b,a.term))}}else if("string"===typeof this.options.source){var a=
this.options.source;this.source=function(b,d){c.xhr&&c.xhr.abort();c.xhr=e.ajax({url:a,data:b,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}}else this.source=this.options.source},_searchTimeout:function(c){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,c))},this.options.delay)},search:function(c,b){c=null!=c?c:this._value();this.term=this._value();if(c.length<this.options.minLength)return this.close(b);
if(!1!==this._trigger("search",b))return this._search(c)},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:c},this._response())},_response:function(){var c=++this.requestIndex;return e.proxy(function(b){c===this.requestIndex&&this.__response(b);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(c){c&&(c=this._normalize(c));this._trigger("response",null,{content:c});!this.options.disabled&&
c&&c.length&&!this.cancelSearch?(this._suggest(c),this._trigger("open")):this._close()},close:function(c){this.cancelSearch=!0;this._close(c)},_close:function(c){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",c))},_change:function(c){this.previous!==this._value()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:e.map(c,function(b){return"string"===typeof b?{label:b,
value:b}:e.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(c){var b=this.menu.element.empty();this._renderMenu(b,c);this.isNewMenu=!0;this.menu.refresh();b.show();this._resizeMenu();b.position(e.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(c,b){var a=this;e.each(b,function(b,d){a._renderItemData(c,
d)})},_renderItemData:function(c,b){return this._renderItem(c,b).data("ui-autocomplete-item",b)},_renderItem:function(c,b){return e("<li>").append(e("<a>").text(b.label)).appendTo(c)},_move:function(c,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(c)||this.menu.isLastItem()&&/^next/.test(c))this._value(this.term),this.menu.blur();else this.menu[c](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,
arguments)},_keyEvent:function(c,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(c,b),b.preventDefault()}});e.extend(e.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(c,b){var a=new RegExp(e.ui.autocomplete.escapeRegex(b),"i");return e.grep(c,function(b){return a.test(b.label||b.value||b)})}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(c){return c+
(1<c?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(c){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var b=c&&c.length?this.options.messages.results(c.length):this.options.messages.noResults;this.liveRegion.text(b)}}})})(jQuery);
(function(e,f){var c,b=function(){var a=e(this);setTimeout(function(){a.find(":ui-button").button("refresh")},1)},a=function(a){var b=a.name,c=a.form,h=e([]);b&&(b=b.replace(/'/g,"\\'"),h=c?e(c).find("[name='"+b+"']"):e("[name='"+b+"']",a.ownerDocument).filter(function(){return!this.form}));return h};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,b);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var h=this,d=this.options,g="checkbox"===this.type||"radio"===this.type,f=g?"":"ui-state-active";null===d.label&&(d.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){d.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){d.disabled||e(this).removeClass(f)}).bind("click"+this.eventNamespace,function(a){d.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
g&&this.element.bind("change"+this.eventNamespace,function(){h.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1;e(this).addClass("ui-state-active");h.buttonElement.attr("aria-pressed","true");var b=h.element[0];a(b).not(b).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(d.disabled)return!1;e(this).addClass("ui-state-active");c=this;h.document.one("mouseup",function(){c=null})}).bind("mouseup"+this.eventNamespace,function(){if(d.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(d.disabled)return!1;a.keyCode!==e.ui.keyCode.SPACE&&a.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===e.ui.keyCode.SPACE&&e(this).click()}));this._setOption("disabled",d.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var a=
this.element.parents().last();var b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.prop("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,
b);"disabled"===a?(this.element.prop("disabled",!!b),b&&this.buttonElement.removeClass("ui-state-focus")):this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?a(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
b=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),c=this.options.icons,f=c.primary&&c.secondary,l=[];c.primary||c.secondary?(this.options.text&&l.push("ui-button-text-icon"+(f?"s":c.primary?"-primary":"-secondary")),c.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(l.push(f?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",e.trim(b)))):l.push("ui-button-text-only");a.addClass(l.join(" "))}}});e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(e,f){function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",
firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,
onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};e.extend(this._defaults,this.regional[""]);this.dpDiv=b(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function b(a){return a.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){e(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){e.datepicker._isDisabledDatepicker(h.inline?a.parent()[0]:h.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function a(a,b){e.extend(a,b);for(var c in b)null==b[c]&&(a[c]=b[c]);return a}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var h;e.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){a(this._defaults,b||{});return this},_attachDatepicker:function(a,
b){var c=a.nodeName.toLowerCase();var d="div"===c||"span"===c;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var g=this._newInst(e(a),d);g.settings=e.extend({},b||{});"input"===c?this._connectDatepicker(a,g):d&&this._inlineDatepicker(a,g)},_newInst:function(a,c){return{id:a[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?b(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(a,b){var c=e(a);b.append=e([]);b.trigger=e([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(b),e.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText");var d=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=e("<span class='"+this._appendClass+
"'>"+c+"</span>"),a[d?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");"focus"!==c&&"both"!==c||a.focus(this._showDatepicker);if("button"===c||"both"===c){c=this._get(b,"buttonText");var g=this._get(b,"buttonImage");b.trigger=e(this._get(b,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:g,alt:c,title:c}):e("<button type='button'></button>").addClass(this._triggerClass).html(g?e("<img/>").attr({src:g,alt:c,
title:c}):c));a[d?"before":"after"](b.trigger);b.trigger.click(function(){e.datepicker._datepickerShowing&&e.datepicker._lastInput===a[0]?e.datepicker._hideDatepicker():(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==a[0]&&e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(a[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e=new Date(2009,11,20),f=this._get(a,"dateFormat");if(f.match(/[DM]/)){var h=function(a){for(d=c=b=0;d<a.length;d++)a[d].length>
b&&(b=a[d].length,c=d);return c};e.setMonth(h(this._get(a,f.match(/MM/)?"monthNames":"monthNamesShort")));e.setDate(h(this._get(a,f.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}a.input.attr("size",this._formatDate(a,e).length)}},_inlineDatepicker:function(a,b){var c=e(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv),e.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&
this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,f,h,n){b=this._dialogInst;b||(this.uuid+=1,b="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+b+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},e.data(this._dialogInput[0],"datepicker",b));a(b.settings,h||{});c=c&&c.constructor===Date?this._formatDate(b,
c):c;this._dialogInput.val(c);this._pos=n?n.length?n:[n.pageX,n.pageY]:null;if(!this._pos){c=document.documentElement.clientWidth;h=document.documentElement.clientHeight;n=document.documentElement.scrollLeft||document.body.scrollLeft;var d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[c/2-100+n,h/2-150+d]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=f;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
e.blockUI&&e.blockUI(this.dpDiv);e.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(a){var b=e(a),c=e.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();e.removeData(a,"datepicker");"input"===d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==d&&"span"!==d||
b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=e(a),c=e.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"===d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===d||"span"===d)d=b.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1);this._disabledInputs=e.map(this._disabledInputs,function(b){return b===a?null:b})}},_disableDatepicker:function(a){var b=e(a),c=e.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"===d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===d||"span"===d)d=b.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=e.map(this._disabledInputs,function(b){return b===a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(a){try{return e.data(a,"datepicker")}catch(g){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,h){var d=this._getInst(b);if(2===arguments.length&&"string"===typeof c)return"defaults"===
c?e.extend({},e.datepicker._defaults):d?"all"===c?e.extend({},d.settings):this._get(d,c):null;var g=c||{};"string"===typeof c&&(g={},g[c]=h);if(d){this._curInst===d&&this._hideDatepicker();var k=this._getDateDatepicker(b,!0);var r=this._getMinMaxDate(d,"min");var w=this._getMinMaxDate(d,"max");a(d.settings,g);null!==r&&g.dateFormat!==f&&g.minDate===f&&(d.settings.minDate=this._formatDate(d,r));null!==w&&g.dateFormat!==f&&g.maxDate===f&&(d.settings.maxDate=this._formatDate(d,w));"disabled"in g&&(g.disabled?
this._disableDatepicker(b):this._enableDatepicker(b));this._attachments(e(b),d);this._autoSize(d);this._setDate(d,k);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a))this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a)},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&
this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=e.datepicker._getInst(a.target);var c=!0;var d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(a.keyCode){case 9:e.datepicker._hideDatepicker();c=!1;break;case 13:return c=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",b.dpDiv),c[0]&&e.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=e.datepicker._get(b,"onSelect"))?(c=
e.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(a.target,a.ctrlKey?-e.datepicker._get(b,"stepBigMonths"):-e.datepicker._get(b,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(a.target,a.ctrlKey?+e.datepicker._get(b,"stepBigMonths"):+e.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&e.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;
break;case 36:(a.ctrlKey||a.metaKey)&&e.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&e.datepicker._adjustDate(a.target,d?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&e.datepicker._adjustDate(a.target,a.ctrlKey?-e.datepicker._get(b,"stepBigMonths"):-e.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&e.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&e.datepicker._adjustDate(a.target,
d?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&e.datepicker._adjustDate(a.target,a.ctrlKey?+e.datepicker._get(b,"stepBigMonths"):+e.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&e.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36===a.keyCode&&a.ctrlKey?e.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=e.datepicker._getInst(a.target);if(e.datepicker._get(b,
"constrainInput")){b=e.datepicker._possibleChars(e.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){var b;a=e.datepicker._getInst(a.target);if(a.input.val()!==a.lastVal)try{if(b=e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a)))e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a)}catch(k){}return!0},
_showDatepicker:function(b){b=b.target||b;"input"!==b.nodeName.toLowerCase()&&(b=e("input",b.parentNode)[0]);if(!e.datepicker._isDisabledDatepicker(b)&&e.datepicker._lastInput!==b){var c=e.datepicker._getInst(b);e.datepicker._curInst&&e.datepicker._curInst!==c&&(e.datepicker._curInst.dpDiv.stop(!0,!0),c&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0]));var d=(d=e.datepicker._get(c,"beforeShow"))?d.apply(b,[b,c]):{};if(!1!==d){a(c.settings,d);c.lastVal=
null;e.datepicker._lastInput=b;e.datepicker._setDateFromField(c);e.datepicker._inDialog&&(b.value="");e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(b),e.datepicker._pos[1]+=b.offsetHeight);var f=!1;e(b).parents().each(function(){f|="fixed"===e(this).css("position");return!f});d={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(c);d=e.datepicker._checkOffset(c,
d,f);c.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":f?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!c.inline){d=e.datepicker._get(c,"showAnim");var h=e.datepicker._get(c,"duration");c.dpDiv.zIndex(e(b).zIndex()+1);e.datepicker._datepickerShowing=!0;if(e.effects&&e.effects.effect[d])c.dpDiv.show(d,e.datepicker._get(c,"showOptions"),h);else c.dpDiv[d||"show"](d?h:null);e.datepicker._shouldFocusInput(c)&&c.input.focus();e.datepicker._curInst=c}}}},_updateDatepicker:function(a){this.maxRows=
4;h=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var b=this._getNumberOfMonths(a),c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a===e.datepicker._curInst&&
e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(a)&&a.input.focus();if(a.yearshtml){var d=a.yearshtml;setTimeout(function(){d===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);d=a.yearshtml=null},0)}},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),g=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,h=
a.input?a.input.outerHeight():0,k=document.documentElement.clientWidth+(c?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(c?0:e(document).scrollTop());b.left-=this._get(a,"isRTL")?d-f:0;b.left-=c&&b.left===a.input.offset().left?e(document).scrollLeft():0;b.top-=c&&b.top===a.input.offset().top+h?e(document).scrollTop():0;b.left-=Math.min(b.left,b.left+d>k&&k>d?Math.abs(b.left+d-k):0);b.top-=Math.min(b.top,b.top+g>u&&u>g?Math.abs(g+h):0);return b},_findPos:function(a){var b=this._getInst(a);
for(b=this._get(b,"isRTL");a&&("hidden"===a.type||1!==a.nodeType||e.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=e(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b===e.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration");var d=function(){e.datepicker._tidyDialog(b)};if(e.effects&&(e.effects.effect[a]||e.effects[a]))b.dpDiv.hide(a,e.datepicker._get(b,"showOptions"),c,d);else b.dpDiv["slideDown"===
a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?c:null,d);a||d();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(e.datepicker._curInst){a=
e(a.target);var b=e.datepicker._getInst(a[0]);(!(a[0].id===e.datepicker._mainDivId||0!==a.parents("#"+e.datepicker._mainDivId).length||a.hasClass(e.datepicker.markerClassName)||a.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)||a.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==b)&&e.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=e(a);var d=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(d,
b+("M"===c?this._get(d,"showCurrentAtPos"):0),c),this._updateDatepicker(d))},_gotoToday:function(a){var b=e(a),c=this._getInst(b[0]);this._get(c,"gotoCurrent")&&c.currentDay?(c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear):(a=new Date,c.selectedDay=a.getDate(),c.drawMonth=c.selectedMonth=a.getMonth(),c.drawYear=c.selectedYear=a.getFullYear());this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(a,b,c){a=e(a);var d=this._getInst(a[0]);
d["selected"+("M"===c?"Month":"Year")]=d["draw"+("M"===c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(d);this._adjustDate(a)},_selectDay:function(a,b,c,f){var d=e(a);e(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(d[0])||(d=this._getInst(d[0]),d.selectedDay=d.currentDay=e("a",f).html(),d.selectedMonth=d.currentMonth=b,d.selectedYear=d.currentYear=c,this._selectDate(a,this._formatDate(d,d.currentDay,d.currentMonth,d.currentYear)))},_clearDate:function(a){a=
e(a);this._selectDate(a,"")},_selectDate:function(a,b){a=e(a);var c=this._getInst(a[0]);b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);(a=this._get(c,"onSelect"))?a.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!==typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,
"altFormat")||this._get(a,"dateFormat");var d=this._getDate(a);var f=this.formatDate(c,d,this._getFormatConfig(a));e(b).each(function(){e(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";b="object"===typeof b?b.toString():b+
"";if(""===b)return null;var d,g=0;var f=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;f="string"!==typeof f?f:(new Date).getFullYear()%100+parseInt(f,10);var h=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort;var k=(c?c.dayNames:null)||this._defaults.dayNames,u=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,A=(c?c.monthNames:null)||this._defaults.monthNames,t=c=-1,z=-1,B=-1,D=!1,y=function(b){(b=d+1<a.length&&a.charAt(d+1)===b)&&d++;return b},E=function(a){var c=y(a);
a=new RegExp("^\\d{1,"+("@"===a?14:"!"===a?20:"y"===a&&c?4:"o"===a?3:2)+"}");a=b.substring(g).match(a);if(!a)throw"Missing number at position "+g;g+=a[0].length;return parseInt(a[0],10)},x=function(a,c,d){var f=-1;a=e.map(y(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});e.each(a,function(a,c){a=c[1];if(b.substr(g,a.length).toLowerCase()===a.toLowerCase())return f=c[0],g+=a.length,!1});if(-1!==f)return f+1;throw"Unknown name at position "+g;},H=function(){if(b.charAt(g)!==
a.charAt(d))throw"Unexpected literal at position "+g;g++};for(d=0;d<a.length;d++)if(D)"'"!==a.charAt(d)||y("'")?H():D=!1;else switch(a.charAt(d)){case "d":z=E("d");break;case "D":x("D",h,k);break;case "o":B=E("o");break;case "m":t=E("m");break;case "M":t=x("M",u,A);break;case "y":c=E("y");break;case "@":var F=new Date(E("@"));c=F.getFullYear();t=F.getMonth()+1;z=F.getDate();break;case "!":F=new Date((E("!")-this._ticksTo1970)/1E4);c=F.getFullYear();t=F.getMonth()+1;z=F.getDate();break;case "'":y("'")?
H():D=!0;break;default:H()}if(g<b.length&&(h=b.substr(g),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;-1===c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=f?0:-100));if(-1<B){t=1;z=B;do{f=this._getDaysInMonth(c,t-1);if(z<=f)break;t++;z-=f}while(1)}F=this._daylightSavingAdjust(new Date(c,t-1,z));if(F.getFullYear()!==c||F.getMonth()+1!==t||F.getDate()!==z)throw"Invalid date";return F},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(a,b,c){if(!b)return"";var d,g=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var h=function(b){(b=d+1<a.length&&a.charAt(d+1)===b)&&
d++;return b},k=function(a,b,c){b=""+b;if(h(a))for(;b.length<c;)b="0"+b;return b},A=function(a,b,c,d){return h(a)?d[b]:c[b]},t="",z=!1;if(b)for(d=0;d<a.length;d++)if(z)"'"!==a.charAt(d)||h("'")?t+=a.charAt(d):z=!1;else switch(a.charAt(d)){case "d":t+=k("d",b.getDate(),2);break;case "D":t+=A("D",b.getDay(),g,e);break;case "o":t+=k("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":t+=k("m",b.getMonth()+
1,2);break;case "M":t+=A("M",b.getMonth(),f,c);break;case "y":t+=h("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":t+=b.getTime();break;case "!":t+=1E4*b.getTime()+this._ticksTo1970;break;case "'":h("'")?t+="'":z=!0;break;default:t+=a.charAt(d)}return t},_possibleChars:function(a){var b,c="",d=!1,e=function(c){(c=b+1<a.length&&a.charAt(b+1)===c)&&b++;return c};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+=
"0123456789";break;case "D":case "M":return null;case "'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return a.settings[b]!==f?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,g=this._getDefaultDate(a),e=g,f=this._getFormatConfig(a);try{e=this.parseDate(c,d,f)||g}catch(w){d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=
a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},g=function(b){try{return e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),b,e.datepicker._getFormatConfig(a))}catch(z){}var c=
(b.toLowerCase().match(/^c/)?e.datepicker._getDate(a):null)||new Date,d=c.getFullYear(),g=c.getMonth();c=c.getDate();for(var f=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=f.exec(b);h;){switch(h[2]||"d"){case "d":case "D":c+=parseInt(h[1],10);break;case "w":case "W":c+=7*parseInt(h[1],10);break;case "m":case "M":g+=parseInt(h[1],10);c=Math.min(c,e.datepicker._getDaysInMonth(d,g));break;case "y":case "Y":d+=parseInt(h[1],10),c=Math.min(c,e.datepicker._getDaysInMonth(d,g))}h=f.exec(b)}return new Date(d,
g,c)};if(b=(b=null==b||""===b?c:"string"===typeof b?g(b):"number"===typeof b?isNaN(b)?c:d(b):new Date(b.getTime()))&&"Invalid Date"===b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,g=a.selectedMonth,e=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=
a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();g===a.selectedMonth&&e===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,
"\\");a.dpDiv.find("[data-handler]").map(function(){e(this).bind(this.getAttribute("data-event"),{prev:function(){e.datepicker._adjustDate(c,-b,"M")},next:function(){e.datepicker._adjustDate(c,+b,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(c)},selectDay:function(){e.datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){e.datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){e.datepicker._selectMonthYear(c,
this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f=new Date;f=this._daylightSavingAdjust(new Date(f.getFullYear(),f.getMonth(),f.getDate()));var h=this._get(a,"isRTL");var w=this._get(a,"showButtonPanel");var u=this._get(a,"hideIfNoPrevNext");var A=this._get(a,"navigationAsDateFormat");var t=this._getNumberOfMonths(a),z=this._get(a,"showCurrentAtPos");var B=this._get(a,"stepMonths");var D=1!==t[0]||1!==t[1],y=this._daylightSavingAdjust(a.currentDay?
new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),E=this._getMinMaxDate(a,"min"),x=this._getMinMaxDate(a,"max");z=a.drawMonth-z;var H=a.drawYear;0>z&&(z+=12,H--);if(x){var F=this._daylightSavingAdjust(new Date(x.getFullYear(),x.getMonth()-t[0]*t[1]+1,x.getDate()));for(F=E&&F<E?E:F;this._daylightSavingAdjust(new Date(H,z,1))>F;)z--,0>z&&(z=11,H--)}a.drawMonth=z;a.drawYear=H;F=this._get(a,"prevText");F=A?this.formatDate(F,this._daylightSavingAdjust(new Date(H,z-B,1)),this._getFormatConfig(a)):
F;F=this._canAdjustMonth(a,-1,H,z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+F+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'>"+F+"</span></a>":u?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+F+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'>"+F+"</span></a>";var m=this._get(a,"nextText");m=A?this.formatDate(m,this._daylightSavingAdjust(new Date(H,z+B,1)),this._getFormatConfig(a)):m;
u=this._canAdjustMonth(a,1,H,z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'>"+m+"</span></a>":u?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'>"+m+"</span></a>";B=this._get(a,"currentText");m=this._get(a,"gotoCurrent")&&a.currentDay?y:f;B=A?this.formatDate(B,m,this._getFormatConfig(a)):B;A=
a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";w=w?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(h?A:"")+(this._isInRange(a,m)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+B+"</button>":"")+(h?"":A)+"</div>":"";A=parseInt(this._get(a,"firstDay"),
10);A=isNaN(A)?0:A;B=this._get(a,"showWeek");m=this._get(a,"dayNames");var q=this._get(a,"dayNamesMin");var G=this._get(a,"monthNames");var I=this._get(a,"monthNamesShort");var M=this._get(a,"beforeShowDay");var S=this._get(a,"showOtherMonths");var ia=this._get(a,"selectOtherMonths");var za=this._getDefaultDate(a);var W="";U;for(b=0;b<t[0];b++){var X="";this.maxRows=4;for(c=0;c<t[1];c++){var aa=this._daylightSavingAdjust(new Date(H,z,a.selectedDay));var U=" ui-corner-all";var Z="";if(D){Z+="<div class='ui-datepicker-group";
if(1<t[1])switch(c){case 0:Z+=" ui-datepicker-group-first";U=" ui-corner-"+(h?"right":"left");break;case t[1]-1:Z+=" ui-datepicker-group-last";U=" ui-corner-"+(h?"left":"right");break;default:Z+=" ui-datepicker-group-middle",U=""}Z+="'>"}Z+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+U+"'>"+(/all|left/.test(U)&&0===b?h?u:F:"")+(/all|right/.test(U)&&0===b?h?F:u:"")+this._generateMonthYearHeader(a,z,H,E,x,0<b||0<c,G,I)+"</div><table class='ui-datepicker-calendar'><thead><tr>";
var sa=B?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(U=0;7>U;U++){var ca=(U+A)%7;sa+="<th"+(5<=(U+A+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+m[ca]+"'>"+q[ca]+"</span></th>"}Z+=sa+"</tr></thead><tbody>";sa=this._getDaysInMonth(H,z);H===a.selectedYear&&z===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,sa));U=(this._getFirstDayOfMonth(H,z)-A+7)%7;sa=Math.ceil((U+sa)/7);this.maxRows=sa=D?this.maxRows>sa?this.maxRows:sa:sa;ca=this._daylightSavingAdjust(new Date(H,
z,1-U));for(d=0;d<sa;d++){Z+="<tr>";var ea=B?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(ca)+"</td>":"";for(U=0;7>U;U++){var la=M?M.apply(a.input?a.input[0]:null,[ca]):[!0,""];var Aa=(e=ca.getMonth()!==z)&&!ia||!la[0]||E&&ca<E||x&&ca>x;ea+="<td class='"+(5<=(U+A+6)%7?" ui-datepicker-week-end":"")+(e?" ui-datepicker-other-month":"")+(ca.getTime()===aa.getTime()&&z===a.selectedMonth&&a._keyEvent||za.getTime()===ca.getTime()&&za.getTime()===aa.getTime()?" "+this._dayOverClass:
"")+(Aa?" "+this._unselectableClass+" ui-state-disabled":"")+(e&&!S?"":" "+la[1]+(ca.getTime()===y.getTime()?" "+this._currentClass:"")+(ca.getTime()===f.getTime()?" ui-datepicker-today":""))+"'"+(e&&!S||!la[2]?"":" title='"+la[2].replace(/'/g,"&#39;")+"'")+(Aa?"":" data-handler='selectDay' data-event='click' data-month='"+ca.getMonth()+"' data-year='"+ca.getFullYear()+"'")+">"+(e&&!S?"&#xa0;":Aa?"<span class='ui-state-default'>"+ca.getDate()+"</span>":"<a class='ui-state-default"+(ca.getTime()===
f.getTime()?" ui-state-highlight":"")+(ca.getTime()===y.getTime()?" ui-state-active":"")+(e?" ui-priority-secondary":"")+"' href='#'>"+ca.getDate()+"</a>")+"</td>";ca.setDate(ca.getDate()+1);ca=this._daylightSavingAdjust(ca)}Z+=ea+"</tr>"}z++;11<z&&(z=0,H++);Z+="</tbody></table>"+(D?"</div>"+(0<t[0]&&c===t[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");X+=Z}W+=X}a._keyEvent=!1;return W+w},_generateMonthYearHeader:function(a,b,c,e,f,h,r,w){var d,g=this._get(a,"changeMonth"),k=this._get(a,
"changeYear"),l=this._get(a,"showMonthAfterYear"),n="<div class='ui-datepicker-title'>",p="";if(h||!g)p+="<span class='ui-datepicker-month'>"+r[b]+"</span>";else{r=e&&e.getFullYear()===c;var y=f&&f.getFullYear()===c;p+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(d=0;12>d;d++)(!r||d>=e.getMonth())&&(!y||d<=f.getMonth())&&(p+="<option value='"+d+"'"+(d===b?" selected='selected'":"")+">"+w[d]+"</option>");p+="</select>"}l||(n+=p+(!h&&g&&k?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml=
"",h||!k)n+="<span class='ui-datepicker-year'>"+c+"</span>";else{w=this._get(a,"yearRange").split(":");var E=(new Date).getFullYear();r=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?E+parseInt(a,10):parseInt(a,10);return isNaN(a)?E:a};b=r(w[0]);w=Math.max(b,r(w[1]||""));b=e?Math.max(b,e.getFullYear()):b;w=f?Math.min(w,f.getFullYear()):w;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";b<=w;b++)a.yearshtml+="<option value='"+
b+"'"+(b===c?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";n+=a.yearshtml;a.yearshtml=null}n+=this._get(a,"yearSuffix");l&&(n+=(!h&&g&&k?"":"&#xa0;")+p);return n+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),g=a.drawMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,g))+("D"===c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,g,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=
a.selectedYear=d.getFullYear();"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"===typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,
this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var d=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(0>b?b:d[0]*d[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,
"max"),g=null,e=null;if(a=this._get(a,"yearRange")){a=a.split(":");var f=(new Date).getFullYear();g=parseInt(a[0],10);e=parseInt(a[1],10);a[0].match(/[+\-].*/)&&(g+=f);a[1].match(/[+\-].*/)&&(e+=f)}return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())&&(!g||b.getFullYear()>=g)&&(!e||b.getFullYear()<=e)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b="string"!==typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,
"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"===typeof b?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});e.fn.datepicker=
function(a){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0);0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var b=Array.prototype.slice.call(arguments,1);return"string"===typeof a&&("isDisabled"===a||"getDate"===a||"widget"===a)||"option"===a&&2===arguments.length&&"string"===typeof arguments[1]?e.datepicker["_"+a+"Datepicker"].apply(e.datepicker,[this[0]].concat(b)):this.each(function(){"string"===
typeof a?e.datepicker["_"+a+"Datepicker"].apply(e.datepicker,[this].concat(b)):e.datepicker._attachDatepicker(this,a)})};e.datepicker=new c;e.datepicker.initialized=!1;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.10.4"})(jQuery);
(function(e,f){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},b={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var b=e(this).css(a).offset().top;
0>b&&e(this).css("top",a.top-b)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&e.fn.draggable&&this._makeDraggable();this.options.resizable&&e.fn.resizable&&this._makeResizable();this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=
this.options.appendTo;return a&&(a.jquery||a.nodeType)?e(a):this.document.find(a||"body").eq(0)},_destroy:function(){var a=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var b=a.parent.children().eq(a.index);b.length&&b[0]!==this.element[0]?b.before(this.element):a.parent.append(this.element)},
widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(a){var b,c=this;if(this._isOpen&&!1!==this._trigger("beforeClose",a)){this._isOpen=!1;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)try{(b=this.document[0].activeElement)&&"body"!==b.nodeName.toLowerCase()&&e(b).blur()}catch(g){}this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",a)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},
_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;c&&!b&&this._trigger("focus",a);return c},open:function(){var a=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable();a._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var a=
this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable"));a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).focus()},_keepFocus:function(a){function b(){var a=this.document[0].activeElement;this.uiDialog[0]===a||e.contains(this.uiDialog[0],a)||this._focusTabbable()}a.preventDefault();b.call(this);this._delay(b)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===e.ui.keyCode.ESCAPE)a.preventDefault(),this.close(a);else if(a.keyCode===e.ui.keyCode.TAB){var b=this.uiDialog.find(":tabbable"),c=b.filter(":first");b=b.filter(":last");a.target!==b[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==c[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||
(b.focus(1),a.preventDefault()):(c.focus(1),a.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(a){e(a.target).closest(".ui-dialog-titlebar-close")||
this.uiDialog.focus()}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});var a=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(a);this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(a){this.options.title||
a.html("&#160;");a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var a=this,b=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();e.isEmptyObject(b)||e.isArray(b)&&!b.length?this.uiDialog.removeClass("ui-dialog-buttons"):
(e.each(b,function(b,c){c=e.isFunction(c)?{click:c,text:b}:c;c=e.extend({type:"button"},c);var d=c.click;c.click=function(){d.apply(a.element[0],arguments)};b={icons:c.icons,text:c.showText};delete c.icons;delete c.showText;e("<button></button>",c).button(b).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(c,d){e(this).addClass("ui-dialog-dragging");b._blockFrames();b._trigger("dragStart",c,a(d))},drag:function(c,d){b._trigger("drag",c,a(d))},stop:function(d,f){c.position=[f.position.left-b.document.scrollLeft(),f.position.top-b.document.scrollTop()];e(this).removeClass("ui-dialog-dragging");b._unblockFrames();b._trigger("dragStop",d,a(f))}})},_makeResizable:function(){function a(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,
position:a.position,size:a.size}}var b=this,c=this.options,g=c.resizable,f=this.uiDialog.css("position");g="string"===typeof g?g:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:g,start:function(c,d){e(this).addClass("ui-dialog-resizing");b._blockFrames();b._trigger("resizeStart",c,a(d))},resize:function(c,d){b._trigger("resize",
c,a(d))},stop:function(d,g){c.height=e(this).height();c.width=e(this).width();e(this).removeClass("ui-dialog-resizing");b._unblockFrames();b._trigger("resizeStop",d,a(g))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(a){var f=this,d=!1,g={};e.each(a,
function(a,e){f._setOption(a,e);a in c&&(d=!0);a in b&&(g[a]=e)});d&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,g=this.uiDialog;"dialogClass"===a&&g.removeClass(this.options.dialogClass).addClass(b);"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===
a&&((c=g.is(":data(ui-draggable)"))&&!b&&g.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&((c=g.is(":data(ui-resizable)"))&&!b&&g.resizable("destroy"),c&&"string"===typeof b&&g.resizable("option","handles",b),c||!1===b||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});a.minWidth>a.width&&
(a.width=a.minWidth);var b=this.uiDialog.css({height:"auto",width:a.width}).outerHeight();var c=Math.max(0,a.minHeight-b);var g="number"===typeof a.maxHeight?Math.max(0,a.maxHeight-b):"none";"auto"===a.height?this.element.css({minHeight:c,maxHeight:g,height:"auto"}):this.element.height(Math.max(0,a.height-b));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=
e(this);return e("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return e(a.target).closest(".ui-dialog").length?!0:!!e(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=this,b=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&
this.document.bind("focusin.dialog",function(c){a._allowInteraction(c)||(c.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(b)._focusTabbable())})});this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),
this.overlay.remove(),this.overlay=null)}});e.ui.dialog.overlayInstances=0;!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var a=this.options.position,b=[],c=[0,0],g;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):[a[0],a[1]],1===b.length&&(b[1]=b[0]),e.each(["left","top"],function(a,d){+b[a]===b[a]&&(c[a]=b[a],b[a]=d)}),a={my:b[0]+(0>c[0]?c[0]:"+"+c[0])+" "+b[1]+(0>c[1]?c[1]:"+"+c[1]),at:b.join(" ")};a=e.extend({},e.ui.dialog.prototype.options.position,
a)}else a=e.ui.dialog.prototype.options.position;(g=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(a);g||this.uiDialog.hide()}})})(jQuery);
(function(e,f){var c=/up|down|vertical/,b=/up|left|vertical|horizontal/;e.effects.effect.blind=function(a,f){var d=e(this),g="position top bottom left right height width".split(" "),h=e.effects.setMode(d,a.mode||"hide"),l=a.direction||"up",n=c.test(l),p=n?"height":"width",r=n?"top":"left";l=b.test(l);var w={},u="show"===h;d.parent().is(".ui-effects-wrapper")?e.effects.save(d.parent(),g):e.effects.save(d,g);d.show();var A=e.effects.createWrapper(d).css({overflow:"hidden"});var t=A[p]();var z=parseFloat(A.css(r))||
0;w[p]=u?t:0;l||(d.css(n?"bottom":"right",0).css(n?"top":"left","auto").css({position:"absolute"}),w[r]=u?z:t+z);u&&(A.css(p,0),l||A.css(r,z+t));A.animate(w,{duration:a.duration,easing:a.easing,queue:!1,complete:function(){"hide"===h&&d.hide();e.effects.restore(d,g);e.effects.removeWrapper(d);f()}})}})(jQuery);
(function(e,f){e.effects.effect.bounce=function(c,b){var a=e(this),f="position top bottom left right height width".split(" "),d=e.effects.setMode(a,c.mode||"effect"),g="hide"===d,k="show"===d,l=c.direction||"up";d=c.distance;var n=c.times||5,p=2*n+(k||g?1:0),r=c.duration/p;c=c.easing;var w="up"===l||"down"===l?"top":"left";l="up"===l||"left"===l;var u=a.queue(),A=u.length;(k||g)&&f.push("opacity");e.effects.save(a,f);a.show();e.effects.createWrapper(a);d||(d=a["top"===w?"outerHeight":"outerWidth"]()/
3);if(k){var t={opacity:1};t[w]=0;a.css("opacity",0).css(w,l?2*-d:2*d).animate(t,r,c)}g&&(d/=Math.pow(2,n-1));t={};for(k=t[w]=0;k<n;k++){var z={};z[w]=(l?"-=":"+=")+d;a.animate(z,r,c).animate(t,r,c);d=g?2*d:d/2}g&&(z={opacity:0},z[w]=(l?"-=":"+=")+d,a.animate(z,r,c));a.queue(function(){g&&a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()});1<A&&u.splice.apply(u,[1,0].concat(u.splice(A,p+1)));a.dequeue()}})(jQuery);
(function(e,f){e.effects.effect.clip=function(c,b){var a=e(this),f="position top bottom left right height width".split(" "),d="show"===e.effects.setMode(a,c.mode||"hide"),g="vertical"===(c.direction||"vertical"),k=g?"height":"width";g=g?"top":"left";var l={};e.effects.save(a,f);a.show();var n=e.effects.createWrapper(a).css({overflow:"hidden"});n="IMG"===a[0].tagName?n:a;var p=n[k]();d&&(n.css(k,0),n.css(g,p/2));l[k]=d?p:0;l[g]=d?0:p/2;n.animate(l,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){d||
a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()}})}})(jQuery);
(function(e,f){e.effects.effect.drop=function(c,b){var a=e(this),f="position top bottom left right opacity height width".split(" "),d=e.effects.setMode(a,c.mode||"hide"),g="show"===d,k=c.direction||"left",l="up"===k||"down"===k?"top":"left";k="up"===k||"left"===k?"pos":"neg";var n={opacity:g?1:0};e.effects.save(a,f);a.show();e.effects.createWrapper(a);var p=c.distance||a["top"===l?"outerHeight":"outerWidth"](!0)/2;g&&a.css("opacity",0).css(l,"pos"===k?-p:p);n[l]=(g?"pos"===k?"+=":"-=":"pos"===k?"-=":
"+=")+p;a.animate(n,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){"hide"===d&&a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()}})}})(jQuery);
(function(e,f){e.effects.effect.explode=function(c,b){function a(){r.push(this);r.length===f*d&&(g.css({visibility:"visible"}),e(r).remove(),k||g.hide(),b())}var f=c.pieces?Math.round(Math.sqrt(c.pieces)):3,d=f,g=e(this),k="show"===e.effects.setMode(g,c.mode||"hide"),l=g.show().css("visibility","hidden").offset(),n=Math.ceil(g.outerWidth()/d),p=Math.ceil(g.outerHeight()/f),r=[],w,u;for(w=0;w<f;w++){var A=l.top+w*p;var t=w-(f-1)/2;for(u=0;u<d;u++){var z=l.left+u*n;var B=u-(d-1)/2;g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-u*n,top:-w*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n,height:p,left:z+(k?B*n:0),top:A+(k?t*p:0),opacity:k?0:1}).animate({left:z+(k?0:B*n),top:A+(k?0:t*p),opacity:k?1:0},c.duration||500,c.easing,a)}}}})(jQuery);(function(e,f){e.effects.effect.fade=function(c,b){var a=e(this),f=e.effects.setMode(a,c.mode||"toggle");a.animate({opacity:f},{queue:!1,duration:c.duration,easing:c.easing,complete:b})}})(jQuery);
(function(e,f){e.effects.effect.fold=function(c,b){var a=e(this),f="position top bottom left right height width".split(" "),d=e.effects.setMode(a,c.mode||"hide"),g="show"===d,k="hide"===d;d=c.size||15;var l=/([0-9]+)%/.exec(d),n=!!c.horizFirst,p=g!==n,r=p?["width","height"]:["height","width"],w=c.duration/2,u={},A={};e.effects.save(a,f);a.show();var t=e.effects.createWrapper(a).css({overflow:"hidden"});p=p?[t.width(),t.height()]:[t.height(),t.width()];l&&(d=parseInt(l[1],10)/100*p[k?0:1]);g&&t.css(n?
{height:0,width:d}:{height:d,width:0});u[r[0]]=g?p[0]:d;A[r[1]]=g?p[1]:0;t.animate(u,w,c.easing).animate(A,w,c.easing,function(){k&&a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()})}})(jQuery);
(function(e,f){e.effects.effect.highlight=function(c,b){var a=e(this),f=["backgroundImage","backgroundColor","opacity"],d=e.effects.setMode(a,c.mode||"show"),g={backgroundColor:a.css("backgroundColor")};"hide"===d&&(g.opacity=0);e.effects.save(a,f);a.show().css({backgroundImage:"none",backgroundColor:c.color||"#ffff99"}).animate(g,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){"hide"===d&&a.hide();e.effects.restore(a,f);b()}})}})(jQuery);
(function(e,f){e.effects.effect.pulsate=function(c,b){var a=e(this),f=e.effects.setMode(a,c.mode||"show"),d="show"===f,g="hide"===f;f=2*(c.times||5)+(d||"hide"===f?1:0);var k=c.duration/f,l=0,n=a.queue(),p=n.length;if(d||!a.is(":visible"))a.css("opacity",0).show(),l=1;for(d=1;d<f;d++)a.animate({opacity:l},k,c.easing),l=1-l;a.animate({opacity:l},k,c.easing);a.queue(function(){g&&a.hide();b()});1<p&&n.splice.apply(n,[1,0].concat(n.splice(p,f+1)));a.dequeue()}})(jQuery);
(function(e,f){e.effects.effect.puff=function(c,b){var a=e(this),f=e.effects.setMode(a,c.mode||"hide"),d="hide"===f,g=parseInt(c.percent,10)||150,k=g/100,l={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};e.extend(c,{effect:"scale",queue:!1,fade:!0,mode:f,complete:b,percent:d?g:100,from:d?l:{height:l.height*k,width:l.width*k,outerHeight:l.outerHeight*k,outerWidth:l.outerWidth*k}});a.effect(c)};e.effects.effect.scale=function(c,b){var a=e(this),f=e.extend(!0,
{},c),d=e.effects.setMode(a,c.mode||"effect"),g=parseInt(c.percent,10)||(0===parseInt(c.percent,10)?0:"hide"===d?0:100),k=c.direction||"both",l=c.origin,n={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},p="horizontal"!==k?g/100:1;g="vertical"!==k?g/100:1;f.effect="size";f.queue=!1;f.complete=b;"effect"!==d&&(f.origin=l||["middle","center"],f.restore=!0);f.from=c.from||("show"===d?{height:0,width:0,outerHeight:0,outerWidth:0}:n);f.to={height:n.height*p,width:n.width*
g,outerHeight:n.outerHeight*p,outerWidth:n.outerWidth*g};f.fade&&("show"===d&&(f.from.opacity=0,f.to.opacity=1),"hide"===d&&(f.from.opacity=1,f.to.opacity=0));a.effect(f)};e.effects.effect.size=function(c,b){var a=e(this),f="position top bottom left right width height overflow opacity".split(" ");var d="position top bottom left right overflow opacity".split(" ");var g=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=["borderLeftWidth",
"borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(a,c.mode||"effect"),r=c.restore||"effect"!==p,w=c.scale||"both";var u=c.origin||["middle","center"];var A=a.css("position"),t=r?f:d,z={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show();d={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};"toggle"===c.mode&&"show"===p?(a.from=c.to||z,a.to=c.from||d):(a.from=c.from||("show"===p?z:d),a.to=c.to||("hide"===p?z:d));var B=a.from.height/
d.height;var D=a.from.width/d.width;var y=a.to.height/d.height;var E=a.to.width/d.width;if("box"===w||"both"===w)B!==y&&(t=t.concat(l),a.from=e.effects.setTransition(a,l,B,a.from),a.to=e.effects.setTransition(a,l,y,a.to)),D!==E&&(t=t.concat(n),a.from=e.effects.setTransition(a,n,D,a.from),a.to=e.effects.setTransition(a,n,E,a.to));"content"!==w&&"both"!==w||B===y||(t=t.concat(k).concat(g),a.from=e.effects.setTransition(a,k,B,a.from),a.to=e.effects.setTransition(a,k,y,a.to));e.effects.save(a,t);a.show();
e.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);u&&(u=e.effects.getBaseline(u,d),a.from.top=(d.outerHeight-a.outerHeight())*u.y,a.from.left=(d.outerWidth-a.outerWidth())*u.x,a.to.top=(d.outerHeight-a.to.outerHeight)*u.y,a.to.left=(d.outerWidth-a.to.outerWidth)*u.x);a.css(a.from);if("content"===w||"both"===w)l=l.concat(["marginTop","marginBottom"]).concat(k),n=n.concat(["marginLeft","marginRight"]),g=f.concat(l).concat(n),a.find("*[width]").each(function(){var a=e(this),b=a.height(),
d=a.width(),f=a.outerHeight(),h=a.outerWidth();r&&e.effects.save(a,g);a.from={height:b*B,width:d*D,outerHeight:f*B,outerWidth:h*D};a.to={height:b*y,width:d*E,outerHeight:b*y,outerWidth:d*E};B!==y&&(a.from=e.effects.setTransition(a,l,B,a.from),a.to=e.effects.setTransition(a,l,y,a.to));D!==E&&(a.from=e.effects.setTransition(a,n,D,a.from),a.to=e.effects.setTransition(a,n,E,a.to));a.css(a.from);a.animate(a.to,c.duration,c.easing,function(){r&&e.effects.restore(a,g)})});a.animate(a.to,{queue:!1,duration:c.duration,
easing:c.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"===p&&a.hide();e.effects.restore(a,t);r||("static"===A?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(b,c){a.css(c,function(c,d){c=parseInt(d,10);var g=b?a.to.left:a.to.top;return"auto"===d?g+"px":c+g+"px"})}));e.effects.removeWrapper(a);b()}})}})(jQuery);
(function(e,f){e.effects.effect.shake=function(c,b){var a=e(this),f="position top bottom left right height width".split(" "),d=e.effects.setMode(a,c.mode||"effect"),g=c.direction||"left",k=c.distance||20,l=c.times||3,n=2*l+1,p=Math.round(c.duration/n),r="up"===g||"down"===g?"top":"left",w="up"===g||"left"===g;g={};var u={},A={},t=a.queue(),z=t.length;e.effects.save(a,f);a.show();e.effects.createWrapper(a);g[r]=(w?"-=":"+=")+k;u[r]=(w?"+=":"-=")+2*k;A[r]=(w?"-=":"+=")+2*k;a.animate(g,p,c.easing);for(k=
1;k<l;k++)a.animate(u,p,c.easing).animate(A,p,c.easing);a.animate(u,p,c.easing).animate(g,p/2,c.easing).queue(function(){"hide"===d&&a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()});1<z&&t.splice.apply(t,[1,0].concat(t.splice(z,n+1)));a.dequeue()}})(jQuery);
(function(e,f){e.effects.effect.slide=function(c,b){var a=e(this),f="position top bottom left right width height".split(" "),d=e.effects.setMode(a,c.mode||"show"),g="show"===d,k=c.direction||"left",l="up"===k||"down"===k?"top":"left";k="up"===k||"left"===k;var n={};e.effects.save(a,f);a.show();var p=c.distance||a["top"===l?"outerHeight":"outerWidth"](!0);e.effects.createWrapper(a).css({overflow:"hidden"});g&&a.css(l,k?isNaN(p)?"-"+p:-p:p);n[l]=(g?k?"+=":"-=":k?"-=":"+=")+p;a.animate(n,{queue:!1,duration:c.duration,
easing:c.easing,complete:function(){"hide"===d&&a.hide();e.effects.restore(a,f);e.effects.removeWrapper(a);b()}})}})(jQuery);
(function(e,f){e.effects.effect.transfer=function(c,b){var a=e(this),f=e(c.to),d="fixed"===f.css("position"),g=e("body"),k=d?g.scrollTop():0;g=d?g.scrollLeft():0;var l=f.offset();f={top:l.top-k,left:l.left-g,height:f.innerHeight(),width:f.innerWidth()};l=a.offset();var n=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(c.className).css({top:l.top-k,left:l.left-g,height:a.innerHeight(),width:a.innerWidth(),position:d?"fixed":"absolute"}).animate(f,c.duration,c.easing,function(){n.remove();
b()})}})(jQuery);
(function(e,f){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
e.proxy(function(c){this.options.disabled&&c.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(c){c.preventDefault()},"click .ui-state-disabled > a":function(c){c.preventDefault()},"click .ui-menu-item:has(a)":function(c){var b=e(c.target).closest(".ui-menu-item");!this.mouseHandled&&b.not(".ui-state-disabled").length&&(this.select(c),c.isPropagationStopped()||(this.mouseHandled=
!0),b.has(".ui-menu").length?this.expand(c):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(c){var b=e(c.currentTarget);b.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(c,b)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(c,b){var a=this.active||
this.element.children(".ui-menu-item").eq(0);b||this.focus(c,a)},blur:function(c){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(c)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){e(c.target).closest(".ui-menu").length||this.collapseAll(c);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=e(this);c.data("ui-menu-submenu-carat")&&c.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(c){function b(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var a=!0;switch(c.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(c);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(c);break;case e.ui.keyCode.HOME:this._move("first","first",c);break;case e.ui.keyCode.END:this._move("last","last",c);break;case e.ui.keyCode.UP:this.previous(c);break;case e.ui.keyCode.DOWN:this.next(c);break;case e.ui.keyCode.LEFT:this.collapse(c);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(c);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(c);
break;case e.ui.keyCode.ESCAPE:this.collapse(c);break;default:a=!1;var f=this.previousFilter||"";var d=String.fromCharCode(c.keyCode);var g=!1;clearTimeout(this.filterTimer);d===f?g=!0:d=f+d;var k=new RegExp("^"+b(d),"i");f=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(e(this).children("a").text())});f=g&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f;f.length||(d=String.fromCharCode(c.keyCode),k=new RegExp("^"+b(d),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(e(this).children("a").text())}));
f.length?(this.focus(c,f),1<f.length?(this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}a&&c.preventDefault()},_activate:function(c){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(c):this.select(c))},refresh:function(){var c=this.options.icons.submenu;var b=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);
b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var a=e(this),b=a.prev("a"),d=e("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);b.attr("aria-haspopup","true").prepend(d);a.attr("aria-labelledby",b.attr("id"))});b=b.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var a=e(this);/[^\-\u2014\u2013\s]/.test(a.text())||a.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(c,b){"icons"===c&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);
this._super(c,b)},focus:function(c,b){this.blur(c,c&&"focus"===c.type);this._scrollIntoView(b);this.active=b.first();var a=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",a.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");c&&"keydown"===c.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);a=b.children(".ui-menu");a.length&&c&&/^mouse/.test(c.type)&&
this._startOpening(a);this.activeMenu=b.parent();this._trigger("focus",c,{item:b})},_scrollIntoView:function(c){if(this._hasScroll()){var b=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;var a=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;b=c.offset().top-this.activeMenu.offset().top-b-a;a=this.activeMenu.scrollTop();var f=this.activeMenu.height();c=c.height();0>b?this.activeMenu.scrollTop(a+b):b+c>f&&this.activeMenu.scrollTop(a+b-f+c)}},blur:function(c,b){b||clearTimeout(this.timer);
this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",c,{item:this.active}))},_startOpening:function(c){clearTimeout(this.timer);"true"===c.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(c)},this.delay))},_open:function(c){var b=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(c.parents(".ui-menu")).hide().attr("aria-hidden","true");c.show().removeAttr("aria-hidden").attr("aria-expanded",
"true").position(b)},collapseAll:function(c,b){clearTimeout(this.timer);this.timer=this._delay(function(){var a=b?this.element:e(c&&c.target).closest(this.element.find(".ui-menu"));a.length||(a=this.element);this._close(a);this.blur(c);this.activeMenu=a},this.delay)},_close:function(c){c||(c=this.active?this.active.parent():this.element);c.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(c){var b=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(c,b))},expand:function(c){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(c,b)}))},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(c,b,a){var e;this.active&&(e="first"===c||"last"===c?this.active["first"===c?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[c+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.children(".ui-menu-item")[b]());this.focus(a,e)},nextPage:function(c){var b;if(!this.active)this.next(c);else if(!this.isLastItem())if(this._hasScroll()){var a=this.active.offset().top;var f=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){b=
e(this);return 0>b.offset().top-a-f});this.focus(c,b)}else this.focus(c,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(c){var b;if(!this.active)this.next(c);else if(!this.isFirstItem())if(this._hasScroll()){var a=this.active.offset().top;var f=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){b=e(this);return 0<b.offset().top-a+f});this.focus(c,b)}else this.focus(c,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(c){this.active=this.active||e(c.target).closest(".ui-menu-item");var b={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(c,!0);this._trigger("select",c,b)}})})(jQuery);
(function(e,f){function c(a,b,c){return[parseFloat(a[0])*(r.test(a[0])?b/100:1),parseFloat(a[1])*(r.test(a[1])?c/100:1)]}function b(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:e.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}e.ui=e.ui||{};var a,h=Math.max,d=Math.abs,g=
Math.round,k=/left|center|right/,l=/top|center|bottom/,n=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,r=/%$/,w=e.fn.position;e.position={scrollbarWidth:function(){if(a!==f)return a;var b=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var c=b.children()[0];e("body").append(b);var d=c.offsetWidth;b.css("overflow","scroll");c=c.offsetWidth;d===c&&(c=b[0].clientWidth);b.remove();return a=d-c},getScrollInfo:function(a){var b=
a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y");b="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight?e.position.scrollbarWidth():0,height:b?e.position.scrollbarWidth():0}},getWithinInfo:function(a){a=e(a||window);var b=e.isWindow(a[0]);return{element:a,isWindow:b,isDocument:!!a[0]&&9===a[0].nodeType,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),
scrollTop:a.scrollTop(),width:b?a.width():a.outerWidth(),height:b?a.height():a.outerHeight()}}};e.fn.position=function(a){if(!a||!a.of)return w.apply(this,arguments);a=e.extend({},a);var f=e(a.of),r=e.position.getWithinInfo(a.within),u=e.position.getScrollInfo(r),B=(a.collision||"flip").split(" "),D={};var y=b(f);f[0].preventDefault&&(a.at="left top");var E=y.width;var x=y.height;var H=y.offset;var F=e.extend({},H);e.each(["my","at"],function(){var b=(a[this]||"").split(" ");1===b.length&&(b=k.test(b[0])?
b.concat(["center"]):l.test(b[0])?["center"].concat(b):["center","center"]);b[0]=k.test(b[0])?b[0]:"center";b[1]=l.test(b[1])?b[1]:"center";var c=n.exec(b[0]);var d=n.exec(b[1]);D[this]=[c?c[0]:0,d?d[0]:0];a[this]=[p.exec(b[0])[0],p.exec(b[1])[0]]});1===B.length&&(B[1]=B[0]);"right"===a.at[0]?F.left+=E:"center"===a.at[0]&&(F.left+=E/2);"bottom"===a.at[1]?F.top+=x:"center"===a.at[1]&&(F.top+=x/2);var m=c(D.at,E,x);F.left+=m[0];F.top+=m[1];return this.each(function(){var b,k=e(this),l=k.outerWidth(),
n=k.outerHeight(),p=parseInt(e.css(this,"marginLeft"),10)||0,t=parseInt(e.css(this,"marginTop"),10)||0,A=l+p+(parseInt(e.css(this,"marginRight"),10)||0)+u.width,w=n+t+(parseInt(e.css(this,"marginBottom"),10)||0)+u.height,z=e.extend({},F),y=c(D.my,k.outerWidth(),k.outerHeight());"right"===a.my[0]?z.left-=l:"center"===a.my[0]&&(z.left-=l/2);"bottom"===a.my[1]?z.top-=n:"center"===a.my[1]&&(z.top-=n/2);z.left+=y[0];z.top+=y[1];e.support.offsetFractions||(z.left=g(z.left),z.top=g(z.top));var U={marginLeft:p,
marginTop:t};e.each(["left","top"],function(b,c){if(e.ui.position[B[b]])e.ui.position[B[b]][c](z,{targetWidth:E,targetHeight:x,elemWidth:l,elemHeight:n,collisionPosition:U,collisionWidth:A,collisionHeight:w,offset:[m[0]+y[0],m[1]+y[1]],my:a.my,at:a.at,within:r,elem:k})});a.using&&(b=function(b){var c=H.left-z.left,g=c+E-l,e=H.top-z.top,m=e+x-n,q={target:{element:f,left:H.left,top:H.top,width:E,height:x},element:{element:k,left:z.left,top:z.top,width:l,height:n},horizontal:0>g?"left":0<c?"right":"center",
vertical:0>m?"top":0<e?"bottom":"middle"};E<l&&d(c+g)<E&&(q.horizontal="center");x<n&&d(e+m)<x&&(q.vertical="middle");h(d(c),d(g))>h(d(e),d(m))?q.important="horizontal":q.important="vertical";a.using.call(this,b,q)});k.offset(e.extend(z,{using:b}))})};e.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,g=c.width,e=a.left-b.collisionPosition.marginLeft;c=d-e;var f=e+b.collisionWidth-g-d;b.collisionWidth>g?0<c&&0>=f?(b=a.left+c+b.collisionWidth-g-d,a.left+=
c-b):a.left=0<f&&0>=c?d:c>f?d+g-b.collisionWidth:d:a.left=0<c?a.left+c:0<f?a.left-f:h(a.left-e,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,g=b.within.height,e=a.top-b.collisionPosition.marginTop;c=d-e;var f=e+b.collisionHeight-g-d;b.collisionHeight>g?0<c&&0>=f?(b=a.top+c+b.collisionHeight-g-d,a.top+=c-b):a.top=0<f&&0>=c?d:c>f?d+g-b.collisionHeight:d:a.top=0<c?a.top+c:0<f?a.top-f:h(a.top-e,a.top)}},flip:{left:function(a,b){var c=b.within,g=c.offset.left+c.scrollLeft,
e=c.width,f=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft;c=h-f;var k=h+b.collisionWidth-e-f;h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;var l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,n=-2*b.offset[0];if(0>c){if(b=a.left+h+l+n+b.collisionWidth-e-g,0>b||b<d(c))a.left+=h+l+n}else 0<k&&(b=a.left-b.collisionPosition.marginLeft+h+l+n-f,0<b||d(b)<k)&&(a.left+=h+l+n)},top:function(a,b){var c=b.within,g=c.offset.top+c.scrollTop,
e=c.height,f=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop;c=h-f;var k=h+b.collisionHeight-e-f;h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;var l="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>c?(b=a.top+h+l+n+b.collisionHeight-e-g,a.top+h+l+n>c&&(0>b||b<d(c))&&(a.top+=h+l+n)):0<k&&(b=a.top-b.collisionPosition.marginTop+h+l+n-f,a.top+h+l+n>k&&(0<b||d(b)<k)&&(a.top+=h+l+n))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,
arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b=document.getElementsByTagName("body")[0];var c=document.createElement("div");var d=document.createElement(b?"div":"body");var g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};b&&e.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in g)d.style[a]=g[a];d.appendChild(c);g=b||
document.documentElement;g.insertBefore(d,g.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=e(c).offset().left;e.support.offsetFractions=10<c&&11>c;d.innerHTML="";g.removeChild(d)})()})(jQuery);
(function(e,f){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(c){if(c===f)return this.options.value;this.options.value=this._constrainedValue(c);this._refreshValue()},_constrainedValue:function(c){c===f&&(c=this.options.value);this.indeterminate=!1===c;"number"!==typeof c&&(c=0);return this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,c))},_setOptions:function(c){var b=c.value;delete c.value;this._super(c);this.options.value=this._constrainedValue(b);this._refreshValue()},_setOption:function(c,b){"max"===
c&&(b=Math.max(this.min,b));this._super(c,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var c=this.options.value,b=this._percentage();this.valueDiv.toggle(this.indeterminate||c>this.min).toggleClass("ui-corner-right",c===this.options.max).width(b.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||
(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":c}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==c&&(this.oldValue=c,this._trigger("change"));c===this.options.max&&this._trigger("complete")}})})(jQuery);
(function(e,f){e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();
this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var c=this.options;var b=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];var f=c.values&&c.values.length||1;b.length>f&&(b.slice(f).remove(),b=b.slice(0,f));for(c=b.length;c<f;c++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=b.add(e(a.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(a){e(this).data("ui-slider-handle-index",a)})},_createRange:function(){var c=this.options,b="";c.range?(!0===c.range&&(c.values?c.values.length&&2!==c.values.length?c.values=[c.values[0],c.values[0]]:e.isArray(c.values)&&(c.values=c.values.slice(0)):c.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",
bottom:""}):(this.range=e("<div></div>").appendTo(this.element),b="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(b+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var c=this.handles.add(this.range).filter("a");this._off(c);this._on(c,this._handleEvents);this._hoverable(c);this._focusable(c)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(c){var b,a,f=this,d=this.options;if(d.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var g=this._normValueFromMouse({x:c.pageX,y:c.pageY});var k=this._valueMax()-this._valueMin()+1;this.handles.each(function(c){var h=Math.abs(g-f.values(c));if(k>h||k===h&&(c===f._lastChangedValue||f.values(c)===d.min))k=h,b=e(this),a=c});if(!1===this._start(c,a))return!1;this._mouseSliding=
!0;this._handleIndex=a;b.addClass("ui-state-active").focus();var l=b.offset();this._clickOffset=e(c.target).parents().addBack().is(".ui-slider-handle")?{left:c.pageX-l.left-b.width()/2,top:c.pageY-l.top-b.height()/2-(parseInt(b.css("borderTopWidth"),10)||0)-(parseInt(b.css("borderBottomWidth"),10)||0)+(parseInt(b.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(c,a,g);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(c){var b=
this._normValueFromMouse({x:c.pageX,y:c.pageY});this._slide(c,this._handleIndex,b);return!1},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(c){if("horizontal"===this.orientation){var b=
this.elementSize.width;c=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else b=this.elementSize.height,c=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);b=c/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);c=this._valueMax()-this._valueMin();b=this._valueMin()+b*c;return this._trimAlignValue(b)},_start:function(c,b){var a={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(b),
a.values=this.values());return this._trigger("start",c,a)},_slide:function(c,b,a){if(this.options.values&&this.options.values.length){var e=this.values(b?0:1);2===this.options.values.length&&!0===this.options.range&&(0===b&&a>e||1===b&&a<e)&&(a=e);a!==this.values(b)&&(e=this.values(),e[b]=a,c=this._trigger("slide",c,{handle:this.handles[b],value:a,values:e}),this.values(b?0:1),!1!==c&&this.values(b,a))}else a!==this.value()&&(c=this._trigger("slide",c,{handle:this.handles[b],value:a}),!1!==c&&this.value(a))},
_stop:function(c,b){var a={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(b),a.values=this.values());this._trigger("stop",c,a)},_change:function(c,b){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(b),a.values=this.values());this._lastChangedValue=b;this._trigger("change",c,a)}},value:function(c){if(arguments.length)this.options.value=
this._trimAlignValue(c),this._refreshValue(),this._change(null,0);else return this._value()},values:function(c,b){var a;if(1<arguments.length)this.options.values[c]=this._trimAlignValue(b),this._refreshValue(),this._change(null,c);else if(arguments.length)if(e.isArray(arguments[0])){var f=this.options.values;var d=arguments[0];for(a=0;a<f.length;a+=1)f[a]=this._trimAlignValue(d[a]),this._change(null,a);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(c):
this.value();else return this._values()},_setOption:function(c,b){var a,f=0;"range"===c&&!0===this.options.range&&("min"===b?(this.options.value=this._values(0),this.options.values=null):"max"===b&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));e.isArray(this.options.values)&&(f=this.options.values.length);e.Widget.prototype._setOption.apply(this,arguments);switch(c){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(a=0;a<f;a+=1)this._change(null,a);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0;this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},
_values:function(c){var b;if(arguments.length){var a=this.options.values[c];return a=this._trimAlignValue(a)}if(this.options.values&&this.options.values.length){a=this.options.values.slice();for(b=0;b<a.length;b+=1)a[b]=this._trimAlignValue(a[b]);return a}return[]},_trimAlignValue:function(c){if(c<=this._valueMin())return this._valueMin();if(c>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,a=(c-this._valueMin())%b;c-=a;2*Math.abs(a)>=b&&(c+=0<a?b:-b);return parseFloat(c.toFixed(5))},
_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var c,b=this.options.range,a=this.options,f=this,d=this._animateOff?!1:a.animate,g={};if(this.options.values&&this.options.values.length)this.handles.each(function(b){p=(f.values(b)-f._valueMin())/(f._valueMax()-f._valueMin())*100;g["horizontal"===f.orientation?"left":"bottom"]=p+"%";e(this).stop(1,1)[d?"animate":"css"](g,a.animate);if(!0===f.options.range)if("horizontal"===f.orientation){if(0===
b)f.range.stop(1,1)[d?"animate":"css"]({left:p+"%"},a.animate);if(1===b)f.range[d?"animate":"css"]({width:p-c+"%"},{queue:!1,duration:a.animate})}else{if(0===b)f.range.stop(1,1)[d?"animate":"css"]({bottom:p+"%"},a.animate);if(1===b)f.range[d?"animate":"css"]({height:p-c+"%"},{queue:!1,duration:a.animate})}c=p});else{var k=this.value();var l=this._valueMin();var n=this._valueMax();var p=n!==l?(k-l)/(n-l)*100:0;g["horizontal"===this.orientation?"left":"bottom"]=p+"%";this.handle.stop(1,1)[d?"animate":
"css"](g,a.animate);if("min"===b&&"horizontal"===this.orientation)this.range.stop(1,1)[d?"animate":"css"]({width:p+"%"},a.animate);if("max"===b&&"horizontal"===this.orientation)this.range[d?"animate":"css"]({width:100-p+"%"},{queue:!1,duration:a.animate});if("min"===b&&"vertical"===this.orientation)this.range.stop(1,1)[d?"animate":"css"]({height:p+"%"},a.animate);if("max"===b&&"vertical"===this.orientation)this.range[d?"animate":"css"]({height:100-p+"%"},{queue:!1,duration:a.animate})}},_handleEvents:{keydown:function(c){var b,
a=e(c.target).data("ui-slider-handle-index");switch(c.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding){this._keySliding=!0;e(c.target).addClass("ui-state-active");var f=this._start(c,a);if(!1===f)return}}var d=this.options.step;f=this.options.values&&this.options.values.length?b=this.values(a):b=this.value();
switch(c.keyCode){case e.ui.keyCode.HOME:b=this._valueMin();break;case e.ui.keyCode.END:b=this._valueMax();break;case e.ui.keyCode.PAGE_UP:b=this._trimAlignValue(f+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:b=this._trimAlignValue(f-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(f===this._valueMax())return;b=this._trimAlignValue(f+d);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(f===this._valueMin())return;b=this._trimAlignValue(f-
d)}this._slide(c,a,b)},click:function(c){c.preventDefault()},keyup:function(c){var b=e(c.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(c,b),this._change(c,b),e(c.target).removeClass("ui-state-active"))}}})})(jQuery);
(function(e){function f(c){return function(){var b=this.element.val();c.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var c={},b=this.element;e.each(["min","max","step"],function(a,e){a=b.attr(e);void 0!==a&&a.length&&(c[e]=a)});return c},_events:{keydown:function(c){this._start(c)&&this._keydown(c)&&c.preventDefault()},
keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(c){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",c))},mousewheel:function(c,b){if(b){if(!this.spinning&&!this._start(c))return!1;this._spin((0<b?1:-1)*this.options.step,c);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(c)},100);c.preventDefault()}},"mousedown .ui-spinner-button":function(c){function b(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a}))}var a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();c.preventDefault();b.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;b.call(this)});!1!==this._start(c)&&this._repeat(null,e(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(c){if(e(c.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(c))return!1;this._repeat(null,e(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var c=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*c.height())&&0<c.height()&&
c.height(c.height());this.options.disabled&&this.disable()},_keydown:function(c){var b=this.options,a=e.ui.keyCode;switch(c.keyCode){case a.UP:return this._repeat(null,1,c),!0;case a.DOWN:return this._repeat(null,-1,c),!0;case a.PAGE_UP:return this._repeat(null,b.page,c),!0;case a.PAGE_DOWN:return this._repeat(null,-b.page,c),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(c){if(!this.spinning&&!1===this._trigger("start",c))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(c,b,a){c=c||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,a)},c);this._spin(b*this.options.step,a)},_spin:function(c,b){var a=this.value()||0;this.counter||
(this.counter=1);a=this._adjustValue(a+c*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:a})||(this._value(a),this.counter++)},_increment:function(c){var b=this.options.incremental;return b?e.isFunction(b)?b(c):Math.floor(c*c*c/5E4-c*c/500+17*c/200+1):1},_precision:function(){var c=this._precisionOf(this.options.step);null!==this.options.min&&(c=Math.max(c,this._precisionOf(this.options.min)));return c},_precisionOf:function(c){c=c.toString();var b=c.indexOf(".");
return-1===b?0:c.length-b-1},_adjustValue:function(c){var b=this.options;var a=null!==b.min?b.min:0;c=a+Math.round((c-a)/b.step)*b.step;c=parseFloat(c.toFixed(this._precision()));return null!==b.max&&c>b.max?b.max:null!==b.min&&c<b.min?b.min:c},_stop:function(c){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",c))},_setOption:function(c,b){if("culture"===c||"numberFormat"===c){var a=this._parse(this.element.val());this.options[c]=
b;this.element.val(this._format(a))}else"max"!==c&&"min"!==c&&"step"!==c||"string"!==typeof b||(b=this._parse(b)),"icons"===c&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(c,b),"disabled"===c&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:f(function(c){this._super(c);
this._value(this.element.val())}),_parse:function(c){"string"===typeof c&&""!==c&&(c=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(c,10,this.options.culture):+c);return""===c||isNaN(c)?null:c},_format:function(c){return""===c?"":window.Globalize&&this.options.numberFormat?Globalize.format(c,this.options.numberFormat,this.options.culture):c},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},
_value:function(c,b){if(""!==c){var a=this._parse(c);null!==a&&(b||(a=this._adjustValue(a)),c=this._format(a))}this.element.val(c);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:f(function(c){this._stepUp(c)}),_stepUp:function(c){this._start()&&(this._spin((c||1)*this.options.step),
this._stop())},stepDown:f(function(c){this._stepDown(c)}),_stepDown:function(c){this._start()&&(this._spin((c||1)*-this.options.step),this._stop())},pageUp:f(function(c){this._stepUp((c||1)*this.options.page)}),pageDown:f(function(c){this._stepDown((c||1)*this.options.page)}),value:function(c){if(!arguments.length)return this._parse(this.element.val());f(this._value).call(this,c)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(e,f){function c(b){b=b.cloneNode(!1);return 1<b.hash.length&&decodeURIComponent(b.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var b=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var a=this,b=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
b.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){e(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();b.active=this._initialActive();e.isArray(b.disabled)&&(b.disabled=e.unique(b.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&
this.anchors.length?this._findActive(b.active):e();this._refresh();this.active.length&&this.load(b.active)},_initialActive:function(){var a=this.options.active,b=this.options.collapsible,c=location.hash.substring(1);null===a&&(c&&this.tabs.each(function(b,d){if(e(d).attr("aria-controls")===c)return a=b,!1}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===a||-1===a)&&(a=this.tabs.length?0:!1);!1!==a&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=b?!1:0));!b&&!1===a&&this.anchors.length&&
(a=0);return a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(a){var b=e(this.document[0].activeElement).closest("li"),c=this.tabs.index(b),f=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:c++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:f=!1;c--;break;case e.ui.keyCode.END:c=this.anchors.length-1;break;case e.ui.keyCode.HOME:c=0;break;case e.ui.keyCode.SPACE:a.preventDefault();
clearTimeout(this.activating);this._activate(c);return;case e.ui.keyCode.ENTER:a.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}a.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,f);a.ctrlKey||(b.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",c)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&a.ctrlKey&&a.keyCode===
e.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&a.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,b){function c(){a>d&&(a=0);0>a&&(a=d);return a}for(var d=this.tabs.length-1;-1!==e.inArray(c(),this.options.disabled);)a=b?a+1:a-1;return a},_focusNextTab:function(a,
b){a=this._findNextTab(a,b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++b},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var a=this.options,b=this.tablist.children(":has(a[href])");a.disabled=e.map(b.filter(".ui-state-disabled"),function(a){return b.index(a)});this._processTabs();!1!==a.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):a.active=this.tabs.index(this.active):(a.active=!1,this.active=e());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
e();this.anchors.each(function(b,g){var d=e(g).uniqueId().attr("id"),f=e(g).closest("li"),h=f.attr("aria-controls");if(c(g)){g=g.hash;var p=a.element.find(a._sanitizeSelector(g))}else{var r=a._tabId(f);g="#"+r;p=a.element.find(g);p.length||(p=a._createPanel(r),p.insertAfter(a.panels[b-1]||a.tablist));p.attr("aria-live","polite")}p.length&&(a.panels=a.panels.add(p));h&&f.data("ui-tabs-aria-controls",h);f.attr({"aria-controls":g.substring(1),"aria-labelledby":d});p.attr("aria-labelledby",d)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(a){return e("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){e.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(var b=0,c;c=this.tabs[b];b++)!0===a||-1!==e.inArray(b,a)?e(c).addClass("ui-state-disabled").attr("aria-disabled","true"):e(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=a},_setupEvents:function(a){var b={click:function(a){a.preventDefault()}};a&&e.each(a.split(" "),function(a,c){b[c]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,b);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var b=this.element.parent();if("fill"===a){var c=b.height();c-=this.element.outerHeight()-
this.element.height();this.element.siblings(":visible").each(function(){var a=e(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(c-=a.outerHeight(!0))});this.element.children().not(this.panels).each(function(){c-=e(this).outerHeight(!0)});this.panels.each(function(){e(this).height(Math.max(0,c-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else"auto"===a&&(c=0,this.panels.each(function(){c=Math.max(c,e(this).height("").height())}).height(c))},_eventHandler:function(a){var b=
this.options,c=this.active,f=e(a.currentTarget).closest("li"),h=f[0]===c[0],n=h&&b.collapsible,p=n?e():this._getPanelForTab(f),r=c.length?this._getPanelForTab(c):e();c={oldTab:c,oldPanel:r,newTab:n?e():f,newPanel:p};a.preventDefault();f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||h&&!b.collapsible||!1===this._trigger("beforeActivate",a,c)||(b.active=n?!1:this.tabs.index(f),this.active=h?e():f,this.xhr&&this.xhr.abort(),r.length||p.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),
p.length&&this.load(this.tabs.index(f),a),this._toggle(a,c))},_toggle:function(a,b){function c(){f.running=!1;f._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");h.length&&f.options.show?f._show(h,f.options.show,c):(h.show(),c())}var f=this,h=b.newPanel,p=b.oldPanel;this.running=!0;p.length&&this.options.hide?this._hide(p,this.options.hide,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
p.hide(),d());p.attr({"aria-expanded":"false","aria-hidden":"true"});b.oldTab.attr("aria-selected","false");h.length&&p.length?b.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr({"aria-expanded":"true","aria-hidden":"false"});b.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:e.noop}))},_findActive:function(a){return!1===a?e():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var a=e(this),b=a.data("ui-tabs-aria-controls");
b?a.attr("aria-controls",b).removeData("ui-tabs-aria-controls"):a.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var b=this.options.disabled;!1!==b&&(a===f?b=!1:(a=this._getIndex(a),b=e.isArray(b)?e.map(b,function(b){return b!==a?b:null}):e.map(this.tabs,function(b,c){return c!==a?c:null})),this._setupDisabled(b))},disable:function(a){var b=this.options.disabled;if(!0!==b){if(a===f)b=!0;else{a=this._getIndex(a);
if(-1!==e.inArray(a,b))return;b=e.isArray(b)?e.merge([a],b).sort():[a]}this._setupDisabled(b)}},load:function(a,b){a=this._getIndex(a);var d=this,f=this.tabs.eq(a);a=f.find(".ui-tabs-anchor");var h=this._getPanelForTab(f),n={tab:f,panel:h};c(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,b,n)))&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a);d._trigger("load",b,n)},1)}).complete(function(a,b){setTimeout(function(){"abort"===
b&&d.panels.stop(!1,!0);f.removeClass("ui-tabs-loading");h.removeAttr("aria-busy");a===d.xhr&&delete d.xhr},1)}))},_ajaxSettings:function(a,b,c){var d=this;return{url:a.attr("href"),beforeSend:function(a,g){return d._trigger("beforeLoad",b,e.extend({jqXHR:a,ajaxSettings:g},c))}}},_getPanelForTab:function(a){a=e(a).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}})})(jQuery);
(function(e){function f(a,b){var c=(a.attr("aria-describedby")||"").split(/\s+/);c.push(b);a.data("ui-tooltip-id",b).attr("aria-describedby",e.trim(c.join(" ")))}function c(a){var b=a.data("ui-tooltip-id"),c=(a.attr("aria-describedby")||"").split(/\s+/);b=e.inArray(b,c);-1!==b&&c.splice(b,1);a.removeData("ui-tooltip-id");(c=e.trim(c.join(" ")))?a.attr("aria-describedby",c):a.removeAttr("aria-describedby")}var b=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var a=e(this).attr("title")||
"";return e("<a>").text(a).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(a,b){var c=this;"disabled"===a?(this[b?"_disable":"_enable"](),this.options[a]=b):(this._super(a,b),"content"===a&&e.each(this.tooltips,function(a,
b){c._updateContent(b)}))},_disable:function(){var a=this;e.each(this.tooltips,function(b,c){b=e.Event("blur");b.target=b.currentTarget=c[0];a.close(b,!0)});this.element.find(this.options.items).addBack().each(function(){var a=e(this);a.is("[title]")&&a.data("ui-tooltip-title",a.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var a=e(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))})},open:function(a){var b=
this,c=e(a?a.target:this.element).closest(this.options.items);c.length&&!c.data("ui-tooltip-id")&&(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("ui-tooltip-open",!0),a&&"mouseover"===a.type&&c.parents().each(function(){var a=e(this);if(a.data("ui-tooltip-open")){var c=e.Event("blur");c.target=c.currentTarget=this;b.close(c,!0)}a.attr("title")&&(a.uniqueId(),b.parents[this.id]={element:this,title:a.attr("title")},a.attr("title",""))}),this._updateContent(c,a))},_updateContent:function(a,
b){var c=this.options.content;var g=this,e=b?b.type:null;if("string"===typeof c)return this._open(b,a,c);(c=c.call(a[0],function(c){a.data("ui-tooltip-open")&&g._delay(function(){b&&(b.type=e);this._open(b,a,c)})}))&&this._open(b,a,c)},_open:function(a,b,c){function d(a){h.of=a;l.is(":hidden")||l.position(h)}var h=e.extend({},this.options.position);if(c){var l=this._find(b);if(l.length)l.find(".ui-tooltip-content").html(c);else{b.is("[title]")&&(a&&"mouseover"===a.type?b.attr("title",""):b.removeAttr("title"));
l=this._tooltip(b);f(b,l.attr("id"));l.find(".ui-tooltip-content").html(c);this.options.track&&a&&/^mouse/.test(a.type)?(this._on(this.document,{mousemove:d}),d(a)):l.position(e.extend({of:b},this.options.position));l.hide();this._show(l,this.options.show);if(this.options.show&&this.options.show.delay)var n=this.delayedShow=setInterval(function(){l.is(":visible")&&(d(h.of),clearInterval(n))},e.fx.interval);this._trigger("open",a,{tooltip:l});c={keyup:function(a){a.keyCode===e.ui.keyCode.ESCAPE&&(a=
e.Event(a),a.currentTarget=b[0],this.close(a,!0))},remove:function(){this._removeTooltip(l)}};a&&"mouseover"!==a.type||(c.mouseleave="close");a&&"focusin"!==a.type||(c.focusout="close");this._on(!0,b,c)}}},close:function(a){var b=this,d=e(a?a.currentTarget:this.element),g=this._find(d);this.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title")),c(d),g.stop(!0),this._hide(g,this.options.hide,function(){b._removeTooltip(e(this))}),d.removeData("ui-tooltip-open"),
this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),a&&"mouseleave"===a.type&&e.each(this.parents,function(a,c){e(c.element).attr("title",c.title);delete b.parents[a]}),this.closing=!0,this._trigger("close",a,{tooltip:g}),this.closing=!1)},_tooltip:function(a){var c="ui-tooltip-"+b++,d=e("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));e("<div>").addClass("ui-tooltip-content").appendTo(d);
d.appendTo(this.document[0].body);this.tooltips[c]=a;return d},_find:function(a){return(a=a.data("ui-tooltip-id"))?e("#"+a):e()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;e.each(this.tooltips,function(b,c){var d=e.Event("blur");d.target=d.currentTarget=c[0];a.close(d,!0);e("#"+b).remove();c.data("ui-tooltip-title")&&(c.attr("title",c.data("ui-tooltip-title")),c.removeData("ui-tooltip-title"))})}})})(jQuery);/*

 handlebars v4.0.8

Copyright (C) 2011-2016 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(e,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?exports.Handlebars=f():e.Handlebars=f()})(this,function(){return function(e){function f(b){if(c[b])return c[b].exports;var a=c[b]={exports:{},id:b,loaded:!1};e[b].call(a.exports,a,a.exports,f);a.loaded=!0;return a.exports}var c={};f.m=e;f.c=c;f.p="";return f(0)}([function(e,f,c){function b(){var a=p();a.compile=function(b,c){return l.compile(b,
c,a)};a.precompile=function(b,c){return l.precompile(b,c,a)};a.AST=g["default"];a.Compiler=l.Compiler;a.JavaScriptCompiler=n["default"];a.Parser=k.parser;a.parse=k.parse;return a}var a=c(1)["default"];f.__esModule=!0;var h=c(2);h=a(h);var d=c(35),g=a(d),k=c(36),l=c(41);d=c(42);var n=a(d);d=c(39);d=a(d);c=c(34);a=a(c);var p=h["default"].create;h=b();h.create=b;a["default"](h);h.Visitor=d["default"];h["default"]=h;f["default"]=h;e.exports=f["default"]},function(e,f){f["default"]=function(c){return c&&
c.__esModule?c:{"default":c}};f.__esModule=!0},function(e,f,c){function b(){var a=new g.HandlebarsEnvironment;n.extend(a,g);a.SafeString=k["default"];a.Exception=l["default"];a.Utils=n;a.escapeExpression=n.escapeExpression;a.VM=p;a.template=function(b){return p.template(b,a)};return a}var a=c(3)["default"],h=c(1)["default"];f.__esModule=!0;var d=c(4),g=a(d);d=c(21);var k=h(d);d=c(6);var l=h(d);d=c(5);var n=a(d);d=c(22);var p=a(d);c=c(34);h=h(c);c=b();c.create=b;h["default"](c);c["default"]=c;f["default"]=
c;e.exports=f["default"]},function(e,f){f["default"]=function(c){if(c&&c.__esModule)return c;var b={};if(null!=c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a]);b["default"]=c;return b};f.__esModule=!0},function(e,f,c){function b(a,b,c){this.helpers=a||{};this.partials=b||{};this.decorators=c||{};g.registerDefaultHelpers(this);k.registerDefaultDecorators(this)}e=c(1)["default"];f.__esModule=!0;f.HandlebarsEnvironment=b;var a=c(5),h=c(6),d=e(h),g=c(10),k=c(18);c=c(20);c=e(c);
f.VERSION="4.0.8";f.COMPILER_REVISION=7;f.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.prototype={constructor:b,logger:c["default"],log:c["default"].log,registerHelper:function(b,c){if("[object Object]"===a.toString.call(b)){if(c)throw new d["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,b)}else this.helpers[b]=c},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(b,
c){if("[object Object]"===a.toString.call(b))a.extend(this.partials,b);else{if("undefined"===typeof c)throw new d["default"]('Attempting to register a partial called "'+b+'" as undefined');this.partials[b]=c}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(b,c){if("[object Object]"===a.toString.call(b)){if(c)throw new d["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,b)}else this.decorators[b]=c},unregisterDecorator:function(a){delete this.decorators[a]}};
f.log=c["default"].log;f.createFrame=a.createFrame;f.logger=c["default"]},function(e,f){function c(b){return a[b]}function b(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}f.__esModule=!0;f.extend=b;f.indexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};f.escapeExpression=function(a){if("string"!==typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+
"";a=""+a}return d.test(a)?a.replace(h,c):a};f.isEmpty=function(a){return a||0===a?k(a)&&0===a.length?!0:!1:!0};f.createFrame=function(a){var c=b({},a);c._parent=a;return c};f.blockParams=function(a,b){a.path=b;return a};f.appendContextPath=function(a,b){return(a?a+".":"")+b};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,d=/[&<>"'`=]/,g=Object.prototype.toString;f.toString=g;e=function(a){return"function"===typeof a};e(/x/)&&(f.isFunction=
e=function(a){return"function"===typeof a&&"[object Function]"===g.call(a)});f.isFunction=e;var k=Array.isArray||function(a){return a&&"object"===typeof a?"[object Array]"===g.call(a):!1};f.isArray=k},function(e,f,c){function b(c,g){g=g&&g.loc;var d=void 0,e=void 0;g&&(d=g.start.line,e=g.start.column,c+=" - "+d+":"+e);c=Error.prototype.constructor.call(this,c);for(var f=0;f<h.length;f++)this[h[f]]=c[h[f]];Error.captureStackTrace&&Error.captureStackTrace(this,b);try{g&&(this.lineNumber=d,a?Object.defineProperty(this,
"column",{value:e,enumerable:!0}):this.column=e)}catch(p){}}var a=c(7)["default"];f.__esModule=!0;var h="description fileName lineNumber message name number stack".split(" ");b.prototype=Error();f["default"]=b;e.exports=f["default"]},function(e,f,c){e.exports={"default":c(8),__esModule:!0}},function(e,f,c){var b=c(9);e.exports=function(a,c,d){return b.setDesc(a,c,d)}},function(e,f){f=Object;e.exports={create:f.create,getProto:f.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:f.getOwnPropertyDescriptor,
setDesc:f.defineProperty,setDescs:f.defineProperties,getKeys:f.keys,getNames:f.getOwnPropertyNames,getSymbols:f.getOwnPropertySymbols,each:[].forEach}},function(e,f,c){e=c(1)["default"];f.__esModule=!0;f.registerDefaultHelpers=function(c){b["default"](c);a["default"](c);h["default"](c);d["default"](c);g["default"](c);k["default"](c);l["default"](c)};f=c(11);var b=e(f);f=c(12);var a=e(f);f=c(13);var h=e(f);f=c(14);var d=e(f);f=c(15);var g=e(f);f=c(16);var k=e(f);c=c(17);var l=e(c)},function(e,f,c){f.__esModule=
!0;var b=c(5);f["default"]=function(a){a.registerHelper("blockHelperMissing",function(c,d){var g=d.inverse,e=d.fn;if(!0===c)return e(this);if(!1===c||null==c)return g(this);if(b.isArray(c))return 0<c.length?(d.ids&&(d.ids=[d.name]),a.helpers.each(c,d)):g(this);d.data&&d.ids&&(g=b.createFrame(d.data),g.contextPath=b.appendContextPath(d.data.contextPath,d.name),d={data:g});return e(c,d)})};e.exports=f["default"]},function(e,f,c){var b=c(1)["default"];f.__esModule=!0;var a=c(5);c=c(6);var h=b(c);f["default"]=
function(b){b.registerHelper("each",function(b,c){function d(c,d,e){u&&(u.key=c,u.index=d,u.first=0===d,u.last=!!e,A&&(u.contextPath=A+c));k+=g(b[c],{data:u,blockParams:a.blockParams([b[c],c],[A+c,null])})}if(!c)throw new h["default"]("Must pass iterator to #each");var g=c.fn,e=c.inverse,f=0,k="",u=void 0,A=void 0;c.data&&c.ids&&(A=a.appendContextPath(c.data.contextPath,c.ids[0])+".");a.isFunction(b)&&(b=b.call(this));c.data&&(u=a.createFrame(c.data));if(b&&"object"===typeof b)if(a.isArray(b))for(var t=
b.length;f<t;f++)f in b&&d(f,f,f===b.length-1);else{c=void 0;for(t in b)b.hasOwnProperty(t)&&(void 0!==c&&d(c,f-1),c=t,f++);void 0!==c&&d(c,f-1,!0)}0===f&&(k=e(this));return k})};e.exports=f["default"]},function(e,f,c){var b=c(1)["default"];f.__esModule=!0;c=c(6);var a=b(c);f["default"]=function(b){b.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};e.exports=f["default"]},function(e,f,c){f.__esModule=
!0;var b=c(5);f["default"]=function(a){a.registerHelper("if",function(a,c){b.isFunction(a)&&(a=a.call(this));return!c.hash.includeZero&&!a||b.isEmpty(a)?c.inverse(this):c.fn(this)});a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})};e.exports=f["default"]},function(e,f){f.__esModule=!0;f["default"]=function(c){c.registerHelper("log",function(){for(var b=[void 0],a=arguments[arguments.length-1],e=0;e<arguments.length-1;e++)b.push(arguments[e]);
e=1;null!=a.hash.level?e=a.hash.level:a.data&&null!=a.data.level&&(e=a.data.level);b[0]=e;c.log.apply(c,b)})};e.exports=f["default"]},function(e,f){f.__esModule=!0;f["default"]=function(c){c.registerHelper("lookup",function(b,a){return b&&b[a]})};e.exports=f["default"]},function(e,f,c){f.__esModule=!0;var b=c(5);f["default"]=function(a){a.registerHelper("with",function(a,c){b.isFunction(a)&&(a=a.call(this));var d=c.fn;if(b.isEmpty(a))return c.inverse(this);var e=c.data;c.data&&c.ids&&(e=b.createFrame(c.data),
e.contextPath=b.appendContextPath(c.data.contextPath,c.ids[0]));return d(a,{data:e,blockParams:b.blockParams([a],[e&&e.contextPath])})})};e.exports=f["default"]},function(e,f,c){e=c(1)["default"];f.__esModule=!0;f.registerDefaultDecorators=function(a){b["default"](a)};f=c(19);var b=e(f)},function(e,f,c){f.__esModule=!0;var b=c(5);f["default"]=function(a){a.registerDecorator("inline",function(a,c,e,f){var d=a;c.partials||(c.partials={},d=function(d,g){var f=e.partials;e.partials=b.extend({},f,c.partials);
d=a(d,g);e.partials=f;return d});c.partials[f.args[0]]=f.fn;return d})};e.exports=f["default"]},function(e,f,c){f.__esModule=!0;var b=c(5),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(c){if("string"===typeof c){var d=b.indexOf(a.methodMap,c.toLowerCase());c=0<=d?d:parseInt(c,10)}return c},log:function(b){b=a.lookupLevel(b);if("undefined"!==typeof console&&a.lookupLevel(a.level)<=b){var c=a.methodMap[b];console[c]||(c="log");for(var e=arguments.length,f=Array(1<e?
e-1:0),h=1;h<e;h++)f[h-1]=arguments[h];console[c].apply(console,f)}}};f["default"]=a;e.exports=f["default"]},function(e,f){function c(b){this.string=b}f.__esModule=!0;c.prototype.toString=c.prototype.toHTML=function(){return""+this.string};f["default"]=c;e.exports=f["default"]},function(e,f,c){function b(a,b,c,e,g,f,h){function k(b){var d=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],g=h;!h||b==h[0]||b===a.nullContext&&null===h[0]||(g=[b].concat(h));return c(a,b,a.helpers,a.partials,
d.data||e,f&&[d.blockParams].concat(f),g)}k=d(c,k,a,h,e,f);k.program=b;k.depth=h?h.length:0;k.blockParams=g||0;return k}function a(){return""}function h(a,b){b&&"root"in b||(b=b?p.createFrame(b):{},b.root=a);return b}function d(a,b,c,d,e,g){if(a.decorator){var f={};b=a.decorator(b,f,c,d&&d[0],e,g,d);l.extend(b,f)}return b}var g=c(23)["default"],k=c(3)["default"];e=c(1)["default"];f.__esModule=!0;f.checkRevision=function(a){var b=a&&a[0]||1,c=p.COMPILER_REVISION;if(b!==c){if(b<c)throw new n["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
p.REVISION_CHANGES[c]+") or downgrade your runtime to an older version ("+p.REVISION_CHANGES[b]+").");throw new n["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};f.template=function(a,c){function e(b){function c(b){return""+a.main(f,b,f.helpers,f.partials,k,n,l)}var g=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],k=g.data;e._setup(g);!g.partial&&a.useData&&(k=h(b,k));var l=
void 0,n=a.useBlockParams?[]:void 0;a.useDepths&&(l=g.depths?b!=g.depths[0]?[b].concat(g.depths):g.depths:[b]);c=d(a.main,c,f,g.depths||[],k,n);return c(b,g)}if(!c)throw new n["default"]("No environment passed to template");if(!a||!a.main)throw new n["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d;c.VM.checkRevision(a.compiler);var f={strict:function(a,b){if(!(b in a))throw new n["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,
d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"===typeof a?a.call(b):a},escapeExpression:l.escapeExpression,invokePartial:function(b,d,e){e.hash&&(d=l.extend({},d,e.hash),e.ids&&(e.ids[0]=!0));b=c.VM.resolvePartial.call(this,b,d,e);var g=c.VM.invokePartial.call(this,b,d,e);null==g&&c.compile&&(e.partials[e.name]=c.compile(b,a.compilerOptions,c),g=e.partials[e.name](d,e));if(null!=g){if(e.indent){b=g.split("\n");d=0;for(g=b.length;d<g&&(b[d]||d+1!==g);d++)b[d]=
e.indent+b[d];g=b.join("\n")}return g}throw new n["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode");},fn:function(b){var c=a[b];c.decorator=a[b+"_d"];return c},programs:[],program:function(a,c,d,e,g){var f=this.programs[a],h=this.fn(a);c||g||e||d?f=b(this,a,h,c,d,e,g):f||(f=this.programs[a]=b(this,a,h));return f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;a&&b&&a!==b&&(c=l.extend({},b,a));return c},nullContext:g({}),
noop:c.VM.noop,compilerInfo:a.compiler};e.isTop=!0;e._setup=function(b){if(b.partial)f.helpers=b.helpers,f.partials=b.partials,f.decorators=b.decorators;else if(f.helpers=f.merge(b.helpers,c.helpers),a.usePartial&&(f.partials=f.merge(b.partials,c.partials)),a.usePartial||a.useDecorators)f.decorators=f.merge(b.decorators,c.decorators)};e._child=function(c,d,e,g){if(a.useBlockParams&&!e)throw new n["default"]("must pass block params");if(a.useDepths&&!g)throw new n["default"]("must pass parent depths");
return b(f,c,a[c],d,0,e,g)};return e};f.wrapProgram=b;f.resolvePartial=function(a,b,c){a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name];return a};f.invokePartial=function(b,c,d){var e=d.data&&d.data["partial-block"];d.partial=!0;d.ids&&(d.data.contextPath=d.ids[0]||d.data.contextPath);var g=void 0;d.fn&&d.fn!==a&&function(){d.data=p.createFrame(d.data);var a=d.fn;g=d.data["partial-block"]=function(b){var c=1>=arguments.length||void 0===
arguments[1]?{}:arguments[1];c.data=p.createFrame(c.data);c.data["partial-block"]=e;return a(b,c)};a.partials&&(d.partials=l.extend({},d.partials,a.partials))}();void 0===b&&g&&(b=g);if(void 0===b)throw new n["default"]("The partial "+d.name+" could not be found");if(b instanceof Function)return b(c,d)};f.noop=a;f=c(5);var l=k(f);f=c(6);var n=e(f),p=c(4)},function(e,f,c){e.exports={"default":c(24),__esModule:!0}},function(e,f,c){c(25);e.exports=c(30).Object.seal},function(e,f,c){var b=c(26);c(27)("seal",
function(a){return function(c){return a&&b(c)?a(c):c}})},function(e,f){e.exports=function(c){return"object"===typeof c?null!==c:"function"===typeof c}},function(e,f,c){var b=c(28),a=c(30),h=c(33);e.exports=function(c,e){var d=(a.Object||{})[c]||Object[c],g={};g[c]=e(d);b(b.S+b.F*h(function(){d(1)}),"Object",g)}},function(e,f,c){var b=c(29),a=c(30),h=c(31),d=function(c,e,f){var g=c&d.F,k=c&d.G,l=c&d.S,w=c&d.P,u=c&d.B;c&=d.W;var A=k?a:a[e]||(a[e]={});l=k?b:l?b[e]:(b[e]||{}).prototype;var t;k&&(f=e);
for(t in f)if(e=!g&&l&&t in l,!(e&&t in A)){var z=e?l[t]:f[t];A[t]=k&&"function"!=typeof l[t]?f[t]:u&&e?h(z,b):c&&l[t]==z?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};b.prototype=a.prototype;return b}(z):w&&"function"==typeof z?h(Function.call,z):z;w&&((A.prototype||(A.prototype={}))[t]=z)}};d.F=1;d.G=2;d.S=4;d.P=8;d.B=16;d.W=32;e.exports=d},function(e,f){e=e.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();
"number"==typeof __g&&(__g=e)},function(e,f){e=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=e)},function(e,f,c){var b=c(32);e.exports=function(a,c,d){b(a);if(void 0===c)return a;switch(d){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,e){return a.call(c,b,d,e)}}return function(){return a.apply(c,arguments)}}},function(e,f){e.exports=function(c){if("function"!=typeof c)throw TypeError(c+" is not a function!");return c}},
function(e,f){e.exports=function(c){try{return!!c()}catch(b){return!0}}},function(e,f){(function(c){f.__esModule=!0;f["default"]=function(b){var a="undefined"!==typeof c?c:window,e=a.Handlebars;b.noConflict=function(){a.Handlebars===b&&(a.Handlebars=e);return b}};e.exports=f["default"]}).call(f,function(){return this}())},function(e,f){f.__esModule=!0;var c={helpers:{helperExpression:function(b){return"SubExpression"===b.type||("MustacheStatement"===b.type||"BlockStatement"===b.type)&&!!(b.params&&
b.params.length||b.hash)},scopedId:function(b){return/^\.|this\b/.test(b.original)},simpleId:function(b){return 1===b.parts.length&&!c.helpers.scopedId(b)&&!b.depth}}};f["default"]=c;e.exports=f["default"]},function(e,f,c){var b=c(1)["default"];e=c(3)["default"];f.__esModule=!0;f.parse=function(a,b){if("Program"===a.type)return a;h["default"].yy=g;g.locInfo=function(a){return new g.SourceLocation(b&&b.srcName,a)};return(new d["default"](b)).accept(h["default"].parse(a))};var a=c(37),h=b(a);a=c(38);
var d=b(a);b=c(40);e=e(b);c=c(5);f.parser=h["default"];var g={};c.extend(g,e)},function(e,f){f.__esModule=!0;var c=function(){function b(){this.yy={}}var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,
openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,
mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,
path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",
77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,
1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,e,f,h,r){a=h.length-1;switch(f){case 1:return h[a-1];case 2:this.$=e.prepareProgram(h[a]);break;case 3:this.$=h[a];break;case 4:this.$=h[a];break;case 5:this.$=
h[a];break;case 6:this.$=h[a];break;case 7:this.$=h[a];break;case 8:this.$=h[a];break;case 9:this.$={type:"CommentStatement",value:e.stripComment(h[a]),strip:e.stripFlags(h[a],h[a]),loc:e.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:h[a],value:h[a],loc:e.locInfo(this._$)};break;case 11:this.$=e.prepareRawBlock(h[a-2],h[a-1],h[a],this._$);break;case 12:this.$={path:h[a-3],params:h[a-2],hash:h[a-1]};break;case 13:this.$=e.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!1,this._$);
break;case 14:this.$=e.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!0,this._$);break;case 15:this.$={open:h[a-5],path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:e.stripFlags(h[a-5],h[a])};break;case 16:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:e.stripFlags(h[a-5],h[a])};break;case 17:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:e.stripFlags(h[a-5],h[a])};break;case 18:this.$={strip:e.stripFlags(h[a-1],h[a-1]),program:h[a]};break;case 19:f=
e.prepareBlock(h[a-2],h[a-1],h[a],h[a],!1,this._$);e=e.prepareProgram([f],h[a-1].loc);e.chained=!0;this.$={strip:h[a-2].strip,program:e,chain:!0};break;case 20:this.$=h[a];break;case 21:this.$={path:h[a-1],strip:e.stripFlags(h[a-2],h[a])};break;case 22:this.$=e.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],e.stripFlags(h[a-4],h[a]),this._$);break;case 23:this.$=e.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],e.stripFlags(h[a-4],h[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:h[a-3],
params:h[a-2],hash:h[a-1],indent:"",strip:e.stripFlags(h[a-4],h[a]),loc:e.locInfo(this._$)};break;case 25:this.$=e.preparePartialBlock(h[a-2],h[a-1],h[a],this._$);break;case 26:this.$={path:h[a-3],params:h[a-2],hash:h[a-1],strip:e.stripFlags(h[a-4],h[a])};break;case 27:this.$=h[a];break;case 28:this.$=h[a];break;case 29:this.$={type:"SubExpression",path:h[a-3],params:h[a-2],hash:h[a-1],loc:e.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:h[a],loc:e.locInfo(this._$)};break;case 31:this.$=
{type:"HashPair",key:e.id(h[a-2]),value:h[a],loc:e.locInfo(this._$)};break;case 32:this.$=e.id(h[a-1]);break;case 33:this.$=h[a];break;case 34:this.$=h[a];break;case 35:this.$={type:"StringLiteral",value:h[a],original:h[a],loc:e.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(h[a]),original:Number(h[a]),loc:e.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===h[a],original:"true"===h[a],loc:e.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",
original:void 0,value:void 0,loc:e.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:e.locInfo(this._$)};break;case 40:this.$=h[a];break;case 41:this.$=h[a];break;case 42:this.$=e.preparePath(!0,h[a],this._$);break;case 43:this.$=e.preparePath(!1,h[a],this._$);break;case 44:h[a-2].push({part:e.id(h[a]),original:h[a],separator:h[a-1]});this.$=h[a-2];break;case 45:this.$=[{part:e.id(h[a]),original:h[a]}];break;case 46:this.$=[];break;case 47:h[a-1].push(h[a]);break;
case 48:this.$=[h[a]];break;case 49:h[a-1].push(h[a]);break;case 50:this.$=[];break;case 51:h[a-1].push(h[a]);break;case 58:this.$=[];break;case 59:h[a-1].push(h[a]);break;case 64:this.$=[];break;case 65:h[a-1].push(h[a]);break;case 70:this.$=[];break;case 71:h[a-1].push(h[a]);break;case 78:this.$=[];break;case 79:h[a-1].push(h[a]);break;case 82:this.$=[];break;case 83:h[a-1].push(h[a]);break;case 86:this.$=[];break;case 87:h[a-1].push(h[a]);break;case 90:this.$=[];break;case 91:h[a-1].push(h[a]);
break;case 94:this.$=[];break;case 95:h[a-1].push(h[a]);break;case 98:this.$=[h[a]];break;case 99:h[a-1].push(h[a]);break;case 100:this.$=[h[a]];break;case 101:h[a-1].push(h[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},
{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,
6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,
28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,
35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],
80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,
38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,
45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],
83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,
90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],
47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,
28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,
83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,
14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,
75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},
{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],
29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,
15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,
93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw Error(a);},parse:function(a){var b=[0],c=[null],d=[],e=this.table,f="",h=0,w=0,u=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;d.push(a);var A=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);
for(var t,z,B,D,y={},E,x;;){B=b[b.length-1];if(this.defaultActions[B])D=this.defaultActions[B];else{if(null===t||"undefined"==typeof t)t=this.lexer.lex()||1,"number"!==typeof t&&(t=this.symbols_[t]||t);D=e[B]&&e[B][t]}if(!("undefined"!==typeof D&&D.length&&D[0]||u)){x=[];for(E in e[B])this.terminals_[E]&&2<E&&x.push("'"+this.terminals_[E]+"'");var H=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[t]||t)+"'":
"Parse error on line "+(h+1)+": Unexpected "+(1==t?"end of input":"'"+(this.terminals_[t]||t)+"'");this.parseError(H,{text:this.lexer.match,token:this.terminals_[t]||t,line:this.lexer.yylineno,loc:a,expected:x})}if(D[0]instanceof Array&&1<D.length)throw Error("Parse Error: multiple actions possible at state: "+B+", token: "+t);switch(D[0]){case 1:b.push(t);c.push(this.lexer.yytext);d.push(this.lexer.yylloc);b.push(D[1]);t=null;z?(t=z,z=null):(w=this.lexer.yyleng,f=this.lexer.yytext,h=this.lexer.yylineno,
a=this.lexer.yylloc,0<u&&u--);break;case 2:x=this.productions_[D[1]][1];y.$=c[c.length-x];y._$={first_line:d[d.length-(x||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(x||1)].first_column,last_column:d[d.length-1].last_column};A&&(y._$.range=[d[d.length-(x||1)].range[0],d[d.length-1].range[1]]);B=this.performAction.call(y,f,w,h,this.yy,D[1],c,d);if("undefined"!==typeof B)return B;x&&(b=b.slice(0,-2*x),c=c.slice(0,-1*x),d=d.slice(0,-1*x));b.push(this.productions_[D[1]][0]);
c.push(y.$);d.push(y._$);D=e[b[b.length-2]][b[b.length-1]];b.push(D);break;case 3:return!0}}}},c=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);
this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);var d=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-b]);return this},more:function(){this._more=
!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var a;this._more||(this.match=this.yytext="");for(var b=this._currentRules(),c=0;c<b.length;c++)if((a=this._input.match(this.rules[b[c]]))&&(!e||a[0].length>e[0].length)){var e=a;var f=c;if(!this.options.flex)break}if(e){if(a=e[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=a.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
e[0].length};this.yytext+=e[0];this.match+=e[0];this.matches=e;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(e[0].length);this.matched+=e[0];e=this.performAction.call(this,this.yy,this,b[f],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(e)return e}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,b,c,e){function d(a,
c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:"\\\\"===b.yytext.slice(-2)?(d(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(d(0,1),this.begin("emu")):this.begin("mu");if(b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:this.popState();if("raw"===this.conditionStack[this.conditionStack.length-1])return 15;b.yytext=b.yytext.substr(5,b.yyleng-9);return"END_RAW_BLOCK";case 5:return 15;case 6:return this.popState(),
14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext);this.popState();this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;
case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=d(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=d(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,
/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,
29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}}}();a.lexer=c;b.prototype=a;a.Parser=b;return new b}();f["default"]=c;e.exports=f["default"]},function(e,f,c){function b(){this.options=0>=arguments.length||void 0===arguments[0]?{}:arguments[0]}function a(a,b,c){void 0===b&&(b=a.length);var d=a[b-1];a=a[b-2];if(!d)return c;if("ContentStatement"===d.type)return(a||
!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original)}function h(a,b,c){void 0===b&&(b=-1);var d=a[b+1];a=a[b+2];if(!d)return c;if("ContentStatement"===d.type)return(a||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original)}function d(a,b,c){!(a=a[null==b?0:b+1])||"ContentStatement"!==a.type||!c&&a.rightStripped||(b=a.value,a.value=a.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),a.rightStripped=a.value!==b)}function g(a,b,c){if((a=a[null==b?a.length-1:b-1])&&"ContentStatement"===a.type&&(c||!a.leftStripped))return b=
a.value,a.value=a.value.replace(c?/\s+$/:/[ \t]+$/,""),a.leftStripped=a.value!==b,a.leftStripped}var k=c(1)["default"];f.__esModule=!0;c=c(39);k=k(c);b.prototype=new k["default"];b.prototype.Program=function(b){var c=!this.options.ignoreStandalone,e=!this.isRootSeen;this.isRootSeen=!0;for(var f=b.body,k=0,l=f.length;k<l;k++){var A=f[k],t=this.accept(A);if(t){var z=a(f,k,e),B=h(f,k,e),D=t.openStandalone&&z,y=t.closeStandalone&&B;z=t.inlineStandalone&&z&&B;t.close&&d(f,k,!0);t.open&&g(f,k,!0);c&&z&&
(d(f,k),g(f,k)&&"PartialStatement"===A.type&&(A.indent=/([ \t]+$)/.exec(f[k-1].original)[1]));c&&D&&(d((A.program||A.inverse).body),g(f,k));c&&y&&(d(f,k),g((A.inverse||A.program).body))}}return b};b.prototype.BlockStatement=b.prototype.DecoratorBlock=b.prototype.PartialBlockStatement=function(b){this.accept(b.program);this.accept(b.inverse);var c=b.program||b.inverse,e=b.program&&b.inverse,f=e,k=e;if(e&&e.chained)for(f=e.body[0].program;k.chained;)k=k.body[k.body.length-1].program;var l={open:b.openStrip.open,
close:b.closeStrip.close,openStandalone:h(c.body),closeStandalone:a((f||c).body)};b.openStrip.close&&d(c.body,null,!0);e?(e=b.inverseStrip,e.open&&g(c.body,null,!0),e.close&&d(f.body,null,!0),b.closeStrip.open&&g(k.body,null,!0),!this.options.ignoreStandalone&&a(c.body)&&h(f.body)&&(g(c.body),d(f.body))):b.closeStrip.open&&g(c.body,null,!0);return l};b.prototype.Decorator=b.prototype.MustacheStatement=function(a){return a.strip};b.prototype.PartialStatement=b.prototype.CommentStatement=function(a){a=
a.strip||{};return{inlineStandalone:!0,open:a.open,close:a.close}};f["default"]=b;e.exports=f["default"]},function(e,f,c){function b(){this.parents=[]}function a(a){this.acceptRequired(a,"path");this.acceptArray(a.params);this.acceptKey(a,"hash")}function h(b){a.call(this,b);this.acceptKey(b,"program");this.acceptKey(b,"inverse")}function d(a){this.acceptRequired(a,"name");this.acceptArray(a.params);this.acceptKey(a,"hash")}var g=c(1)["default"];f.__esModule=!0;c=c(6);var k=g(c);b.prototype={constructor:b,
mutating:!1,acceptKey:function(a,c){var d=this.accept(a[c]);if(this.mutating){if(d&&!b.prototype[d.type])throw new k["default"]('Unexpected node type "'+d.type+'" found when accepting '+c+" on "+a.type);a[c]=d}},acceptRequired:function(a,b){this.acceptKey(a,b);if(!a[b])throw new k["default"](a.type+" requires "+b);},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new k["default"]("Unknown type: "+
a.type,a);this.current&&this.parents.unshift(this.current);this.current=a;var b=this[a.type](a);this.current=this.parents.shift();if(!this.mutating||b)return b;if(!1!==b)return a}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:a,Decorator:a,BlockStatement:h,DecoratorBlock:h,PartialStatement:d,PartialBlockStatement:function(a){d.call(this,a);this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:a,PathExpression:function(){},StringLiteral:function(){},
NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}};f["default"]=b;e.exports=f["default"]},function(e,f,c){function b(b,c){c=c.path?c.path.original:c;if(b.path.original!==c)throw new a["default"](b.path.original+" doesn't match "+c,{loc:b.path.loc});}e=c(1)["default"];f.__esModule=!0;f.SourceLocation=function(a,b){this.source=a;this.start={line:b.first_line,
column:b.first_column};this.end={line:b.last_line,column:b.last_column}};f.id=function(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a};f.stripFlags=function(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}};f.stripComment=function(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")};f.preparePath=function(b,c,e){e=this.locInfo(e);for(var d=b?"@":"",g=[],f=0,h=0,r=c.length;h<r;h++){var w=c[h].part,u=c[h].original!==w;d+=(c[h].separator||"")+w;if(u||".."!==w&&
"."!==w&&"this"!==w)g.push(w);else{if(0<g.length)throw new a["default"]("Invalid path: "+d,{loc:e});".."===w&&f++}}return{type:"PathExpression",data:b,depth:f,parts:g,original:d,loc:e}};f.prepareMustache=function(a,b,c,e,f,n){var d=e.charAt(3)||e.charAt(2);d="{"!==d&&"&"!==d;return{type:/\*/.test(e)?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:d,strip:f,loc:this.locInfo(n)}};f.prepareRawBlock=function(a,c,e,f){b(a,e);f=this.locInfo(f);return{type:"BlockStatement",path:a.path,params:a.params,
hash:a.hash,program:{type:"Program",body:c,strip:{},loc:f},openStrip:{},inverseStrip:{},closeStrip:{},loc:f}};f.prepareBlock=function(c,d,e,f,l,n){f&&f.path&&b(c,f);var g=/\*/.test(c.open);d.blockParams=c.blockParams;var h=void 0,k=void 0;if(e){if(g)throw new a["default"]("Unexpected inverse block on decorator",e);e.chain&&(e.program.body[0].closeStrip=f.strip);k=e.strip;h=e.program}l&&(l=h,h=d,d=l);return{type:g?"DecoratorBlock":"BlockStatement",path:c.path,params:c.params,hash:c.hash,program:d,
inverse:h,openStrip:c.strip,inverseStrip:k,closeStrip:f&&f.strip,loc:this.locInfo(n)}};f.prepareProgram=function(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}};f.preparePartialBlock=function(a,c,e,f){b(a,e);return{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:c,openStrip:a.strip,closeStrip:e&&e.strip,
loc:this.locInfo(f)}};f=c(6);var a=e(f)},function(e,f,c){function b(){}function a(b,c){if(b===c)return!0;if(g.isArray(b)&&g.isArray(c)&&b.length===c.length){for(var d=0;d<b.length;d++)if(!a(b[d],c[d]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}e=c(1)["default"];f.__esModule=!0;f.Compiler=b;f.precompile=function(a,b,c){if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new d["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
a);b=b||{};"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);a=c.parse(a,b);a=(new c.Compiler).compile(a,b);return(new c.JavaScriptCompiler).compile(a,b)};f.compile=function(a,b,c){function e(){var d=c.parse(a,b);d=(new c.Compiler).compile(d,b);d=(new c.JavaScriptCompiler).compile(d,b,void 0,!0);return c.template(d)}function f(a,b){g||(g=e());return g.call(this,a,b)}void 0===b&&(b={});if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new d["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
a);"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);var g=void 0;f._setup=function(a){g||(g=e());return g._setup(a)};f._child=function(a,b,c,d){g||(g=e());return g._child(a,b,c,d)};return f};f=c(6);var d=e(f),g=c(5);c=c(35);var k=e(c),l=[].slice;b.prototype={compiler:b,equals:function(b){var c=this.opcodes.length;if(b.opcodes.length!==c)return!1;for(var d=0;d<c;d++){var e=this.opcodes[d],f=b.opcodes[d];if(e.opcode!==f.opcode||!a(e.args,f.args))return!1}c=this.children.length;for(d=0;d<c;d++)if(!this.children[d].equals(b.children[d]))return!1;
return!0},guid:0,compile:function(a,b){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=b;this.stringParams=b.stringParams;this.trackIds=b.trackIds;b.blockParams=b.blockParams||[];var c=b.knownHelpers;b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var b=this.guid++;this.usePartial=
this.usePartial||a.usePartial;this.children[b]=a;this.useDepths=this.useDepths||a.useDepths;return b},accept:function(a){if(!this[a.type])throw new d["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);a=this[a.type](a);this.sourceNode.shift();return a},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);this.options.blockParams.shift();this.isSimple=1===c;this.blockParams=a.blockParams?a.blockParams.length:0;return this},
BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b);c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},
DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program);b=this.setupFullMustacheParams(a,b,void 0);a=a.path;this.useDecorators=!0;this.opcode("registerDecorator",b.length,a.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(1<c.length)throw new d["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",
parts:[],depth:0}));c=a.name.original;var e="SubExpression"===a.name.type;e&&this.accept(a.name);this.setupFullMustacheParams(a,b,void 0,!0);a=a.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a="");this.opcode("invokePartial",e,c,a);this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},
ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){a=a.path;var d=a.parts[0],e=null!=b||null!=c;this.opcode("getContext",a.depth);this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.strict=!0;this.accept(a);this.opcode("invokeAmbiguous",d,e)},simpleSexpr:function(a){a=
a.path;a.strict=!0;this.accept(a);this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){b=this.setupFullMustacheParams(a,b,c);c=a.path;var e=c.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",b.length,e);else{if(this.options.knownHelpersOnly)throw new d["default"]("You specified knownHelpersOnly, but used the unknown helper "+e,a);c.strict=!0;c.falsy=!0;this.accept(c);this.opcode("invokeHelper",b.length,c.original,k["default"].helpers.simpleId(c))}},PathExpression:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);var b=a.parts[0],c=k["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",
a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){a=a.pairs;var b=0,c=a.length;for(this.opcode("pushHash");b<c;b++)this.pushParam(a[b].value);for(;b--;)this.opcode("assignToHash",a[b].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=k["default"].helpers.simpleId(a.path),
c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&k["default"].helpers.helperExpression(a);(b=!c&&(d||b))&&!d&&(c=this.options,c.knownHelpers[a.path.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",
a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;!a.parts||k["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0]));c?(b=a.parts.slice(1).join("."),this.opcode("pushId","BlockParam",c,b)):(b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b))}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;this.pushParams(e);
this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.hash?this.accept(a.hash):this.opcode("emptyHash",d);return e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&g.indexOf(d,a);if(d&&0<=e)return[b,e]}}}},function(e,f,c){function b(a){this.value=a}function a(){}function h(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),
")"]:e}var d=c(1)["default"];f.__esModule=!0;var g=c(4),k=c(6),l=d(k),n=c(5);c=c(43);var p=d(c);a.prototype={nameLookup:function(b,c){return a.isValidJavaScriptVariableName(c)?[b,".",c]:[b,"[",JSON.stringify(c),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=g.COMPILER_REVISION;return[a,g.REVISION_CHANGES[a]]},appendToBuffer:function(a,b,c){n.isArray(a)||(a=[a]);a=this.source.wrap(a,b);if(this.environment.isSimple)return["return ",
a,";"];if(c)return["buffer += ",a,";"];a.appendToBuffer=!0;return a},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a;this.options=b;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!d;this.name=this.environment.name;this.isChild=!!c;this.context=c||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];
this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(a,b);this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0;a=0;for(c=e.length;a<c;a++){var g=e[a];this.source.currentLocation=g.loc;f=f||g.loc;this[g.opcode].apply(this,g.args)}this.source.currentLocation=f;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l["default"]("Compile completed with content left on stack");
this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));a=this.createFunctionContext(d);
if(this.isChild)return a;e={compiler:this.compilerInfo(),main:a};this.decorators&&(e.main_d=this.decorators,e.useDecorators=!0);a=this.context;g=a.programs;f=a.decorators;a=0;for(c=g.length;a<c;a++)g[a]&&(e[a]=g[a],f[a]&&(e[a+"_d"]=f[a],e.useDecorators=!0));this.environment.usePartial&&(e.usePartial=!0);this.options.data&&(e.useData=!0);this.useDepths&&(e.useDepths=!0);this.useBlockParams&&(e.useBlockParams=!0);this.options.compat&&(e.compat=!0);d?e.compilerOptions=this.options:(e.compiler=JSON.stringify(e.compiler),
this.source.currentLocation={start:{line:1,column:0}},e=this.objectLiteral(e),b.srcName?(e=e.toStringWithSourceMap({file:b.destName}),e.map=e.map&&e.map.toString()):e=e.toString());return e},preamble:function(){this.lastContext=0;this.source=new p["default"](this.options.srcName);this.decorators=new p["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);0<c.length&&(b+=", "+c.join(", "));c=0;for(var d in this.aliases){var e=this.aliases[d];
this.aliases.hasOwnProperty(d)&&e.children&&1<e.referenceCount&&(b+=", alias"+ ++c+"="+d,e.children[0]="alias"+c)}d=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&d.push("blockParams");this.useDepths&&d.push("depths");b=this.mergeSource(b);return a?(d.push(b),Function.apply(this,d)):this.source.wrap(["function(",d.join(","),") {\n  ",b,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;this.source.each(function(a){a.appendToBuffer?
(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))});c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;"));a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n"));return this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,
0,c);a=this.popStack();c.splice(1,0,a);this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0);this.flushInline();var c=this.topStack();b.splice(1,0,c);this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation;
this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]);this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),
")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++]));this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0;this.push(["blockParams[",a[0],"][",a[1],"]"]);this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+
a+")"):this.pushStackLiteral("data");this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)this.push(h(this.options.strict&&e,this,b,a));else for(e=b.length;c<e;c++)this.replaceStack(function(e){var g=f.nameLookup(e,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,
b){this.pushContext();this.pushString(b);"SubExpression"!==b&&("string"===typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}");this.stringParams&&(this.push("{}"),this.push("{}"));this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop();this.trackIds&&this.push(this.objectLiteral(a.ids));
this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types)));this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator");a=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",
this.decorators.functionCall(c,"",["fn","props","container",a])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack();a=this.setupHelper(a,b);c=["("].concat(c?[a.name," || "]:"",d);this.options.strict||c.push(" || ",this.aliasable("helpers.helperMissing"));c.push(")");this.push(this.source.functionCall(c,"call",a.callParams))},invokeKnownHelper:function(a,b){a=this.setupHelper(a,b);this.push(this.source.functionCall(a.name,"call",a.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");
var c=this.popStack();this.emptyHash();b=this.setupHelper(0,a,b);a=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",a,"helper")," || ",c,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("helpers.helperMissing")));this.push(["(",a,b.paramsInit?["),(",b.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",b.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,
1,d);a&&(b=this.popStack(),delete e.name);c&&(e.indent=JSON.stringify(c));e.helpers="helpers";e.partials="partials";e.decorators="container.decorators";a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial"));this.options.compat&&(e.depths="depths");e=this.objectLiteral(e);d.push(e);this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack());this.stringParams&&(d=this.popStack(),
c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c);d&&(f.types[a]=d);e&&(f.ids[a]=e);f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:a,compileChildren:function(a,b){a=a.children;for(var c,d,e=0,f=a.length;e<f;e++){c=a[e];d=new this.compiler;var g=this.matchExistingProgram(c);
null==g?(this.context.programs.push(""),g=this.context.programs.length,c.index=g,c.name="program"+g,this.context.programs[g]=d.compile(c,b,this.context,!this.precompile),this.context.decorators[g]=d.decorators,this.context.environments[g]=c,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams,c.useDepths=this.useDepths,c.useBlockParams=this.useBlockParams):(c.index=g.index,c.name="program"+g.index,this.useDepths=this.useDepths||g.useDepths,this.useBlockParams=
this.useBlockParams||g.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){a=this.environment.children[a];a=[a.index,"data",a.blockParams];(this.useBlockParams||this.useDepths)&&a.push("blockParams");this.useDepths&&a.push("depths");return"container.program("+a.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},
push:function(a){a instanceof b||(a=this.source.wrap(a));this.inlineStack.push(a);return a},pushStackLiteral:function(a){this.push(new b(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0);a&&this.source.push(a)},replaceStack:function(a){var c=void 0,d=void 0;if(!this.isInline())throw new l["default"]("replaceStack on non-inline");var e=this.popStack(!0);if(e instanceof
b){var f=[e.value];e=["(",f];d=!0}else c=!0,f=this.incrStack(),e=["((",this.push(f)," = ",e,")"],f=this.topStack();a=a.call(this,f);d||this.popStack();c&&this.stackSlot--;this.push(e.concat(a,")"))},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var c=0,d=a.length;c<d;c++){var e=
a[c];if(e instanceof b)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]);this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var c=this.isInline(),d=(c?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof b)return d.value;if(!c){if(!this.stackSlot)throw new l["default"]("Invalid stack pop");this.stackSlot--}return d},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack;a=a[a.length-
1];return a instanceof b?a.value:a},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];if(b)return b.referenceCount++,b;b=this.aliases[a]=this.source.wrap(a);b.aliasable=!0;b.referenceCount=1;return b},setupHelper:function(a,b,c){var d=[];a=this.setupHelperArgs(b,a,d,c);b=this.nameLookup("helpers",b,"helper");
c=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:a,name:b,callParams:[c].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c;h&&(c=[]);d.name=this.quotedString(a);d.hash=this.popStack();this.trackIds&&(d.hashIds=this.popStack());this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());a=this.popStack();var k=this.popStack();if(k||a)d.fn=k||"container.noop",d.inverse=a||"container.noop";
for(a=b;a--;)b=this.popStack(),c[a]=b,this.trackIds&&(g[a]=this.popStack()),this.stringParams&&(f[a]=this.popStack(),e[a]=this.popStack());h&&(d.args=this.source.generateArray(c));this.trackIds&&(d.ids=this.source.generateArray(g));this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e));this.options.data&&(d.data="data");this.useBlockParams&&(d.blockParams="blockParams");return d},setupHelperArgs:function(a,b,c,d){a=this.setupParams(a,b,c);a=this.objectLiteral(a);
return d?(this.useRegister("options"),c.push("options"),["options=",a]):c?(c.push(a),""):a}};(function(){for(var b="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),
c=a.RESERVED_WORDS={},d=0,e=b.length;d<e;d++)c[b[d]]=!0})();a.isValidJavaScriptVariableName=function(b){return!a.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(b)};f["default"]=a;e.exports=f["default"]},function(e,f,c){function b(a,b,c){if(h.isArray(a)){for(var d=[],e=0,f=a.length;e<f;e++)d.push(b.wrap(a[e],c));return d}return"boolean"===typeof a||"number"===typeof a?a+"":a}function a(a){this.srcFile=a;this.source=[]}f.__esModule=!0;var h=c(5),d=void 0;d||(d=function(a,b,c,d){this.src="";d&&
this.add(d)},d.prototype={add:function(a){h.isArray(a)&&(a=a.join(""));this.src+=a},prepend:function(a){h.isArray(a)&&(a=a.join(""));this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});a.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();this.each(function(b){a.add(["  ",b,"\n"])});
return a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new d(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var c=1>=arguments.length||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];if(a instanceof d)return a;a=b(a,this,c);return new d(c.start.line,c.start.column,this.srcFile,a)},functionCall:function(a,b,c){c=this.generateList(c);return this.wrap([a,b?"."+b+"(":"(",c,")"])},
quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=b(a[d],this);"undefined"!==e&&c.push([this.quotedString(d),":",e])}a=this.generateList(c);a.prepend("{");a.add("}");return a},generateList:function(a){for(var c=this.empty(),d=0,e=a.length;d<e;d++)d&&c.add(","),c.add(b(a[d],this));return c},
generateArray:function(a){a=this.generateList(a);a.prepend("[");a.add("]");return a}};f["default"]=a;e.exports=f["default"]}])});var CodeMirror=function(){function e(a,b){if(!(this instanceof e))return new e(a,b);this.options=b=b?Xc(b):{};Xc(ri,b,!1);r(b);var c=b.value;"string"==typeof c&&(c=new lc(c,b.mode,null,b.lineSeparator));this.doc=c;var g=new e.inputStyles[b.inputStyle](this);a=this.display=new f(a,c,g);a.wrapper.CodeMirror=this;k(this);d(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");b.autofocus&&!cg&&a.input.focus();t(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,
focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new of,keySeq:null,specialChars:null};var m=this;Ha&&11>Wa&&setTimeout(function(){m.display.input.reset(!0)},20);Le(this);xh||(si(),xh=!0);xa(this);this.curOp.forceUpdate=!0;oi(this,c);b.autofocus&&!cg||m.hasFocus()?setTimeout(Xf(bg,this),20):Yd(this);for(var h in Ve)if(Ve.hasOwnProperty(h))Ve[h](this,b[h],Qg);E(this);b.finishInit&&b.finishInit(this);for(c=0;c<yh.length;++c)yh[c](this);Dc(this);Sb&&b.lineWrapping&&
"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function f(a,b,c){this.input=c;this.scrollbarFiller=ha("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=ha("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=ha("div",null,"CodeMirror-code");this.selectionDiv=ha("div",null,null,"position: relative; z-index: 1");this.cursorDiv=
ha("div",null,"CodeMirror-cursors");this.measure=ha("div",null,"CodeMirror-measure");this.lineMeasure=ha("div",null,"CodeMirror-measure");this.lineSpace=ha("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=ha("div",[ha("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=ha("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=ha("div",null,null,"position: absolute; height: "+
zh+"px; width: 1px;");this.gutters=ha("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=ha("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=ha("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Ha&&8>Wa&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Sb||We&&cg||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=
this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=
this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function c(a){a.doc.mode=e.getMode(a.options,a.doc.modeOption);b(a)}function b(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;wb(a,100);a.state.modeGen++;a.curOp&&Fa(a)}function a(a){var b=rb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/rd(a.display)-3);return function(e){if(se(a.doc,
e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function h(b){var c=b.doc,d=a(b);c.iter(function(a){var b=d(a);b!=a.height&&Rd(a,b)})}function d(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");hc(a)}function g(a){k(a);Fa(a);setTimeout(function(){y(a)},20)}function k(a){var b=a.display.gutters,c=a.options.gutters;
qe(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(ha("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";l(a)}function l(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function n(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=sf(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=sf(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,
d=c.to.line,b+=d.text.length-c.to.ch;return b}function p(a){var b=a.display;a=a.doc;b.maxLine=ma(a,a.first);b.maxLineLength=n(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=n(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function r(a){var b=Vb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function w(a){var b=a.display,c=b.gutters.offsetWidth,
d=Math.round(a.doc.height+Kc(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+sc(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function u(a,b,c){this.cm=c;var d=this.vert=ha("div",[ha("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=ha("div",[ha("div",null,
null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);qa(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});qa(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;Ha&&8>Wa&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function A(){}function t(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&ue(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new e.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,
a.display.scrollbarFiller);qa(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?zb(a,b):cb(a,b)},a);a.display.scrollbars.addClass&&Ef(a.display.wrapper,a.display.scrollbars.addClass)}function z(a,b){b||(b=w(a));var c=a.display.barWidth,d=a.display.barHeight;B(a,b);for(b=0;4>b&&c!=a.display.barWidth||d!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&M(a),B(a,w(a)),
c=a.display.barWidth,d=a.display.barHeight}function B(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=
d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function D(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-a.lineSpace.offsetTop);var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight;d=ud(b,d);e=ud(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=ud(b,Yc(ma(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=ud(b,Yc(ma(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,
d+1)}}function y(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=H(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var m=c[g].alignable;if(m)for(var h=0;h<m.length;h++)m[h].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function E(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=x(a.options,b.first+
b.size-1);var c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(ha("div",[ha("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth;d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";l(a);return!0}return!1}function x(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}
function H(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function F(a,b,c){var d=a.display;this.viewport=b;this.visible=D(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=Tc(a);this.force=c;this.dims=ia(a);this.events=[]}function m(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Xb(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=
c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Ec(a))return!1;E(a)&&(Xb(a),b.dims=ia(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));ve&&(f=th(a.doc,f),g=tf(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=
b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Qb(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Qb(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Od(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Qb(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,Od(a,g))));e.viewTo=g;c.viewOffset=Yc(ma(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Ec(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=
c.viewTo))return!1;f=Pd();4<g&&(c.lineDiv.style.display="none");za(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&Pd()!=f&&f.offsetHeight&&f.focus();qe(c.cursorDiv);qe(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,wb(a,400));c.updateLineNumbers=null;return!0}function q(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Tc(a))if(c&&null!=
c.top&&(c={top:Math.min(a.doc.height+Kc(a.display)-Nd(a),c.top)}),b.visible=D(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!m(a,b))break;M(a);d=w(a);Cc(a);I(a,d);z(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function G(a,
b){b=new F(a,b);if(m(a,b)){M(a);q(a,b);var c=w(a);Cc(a);I(a,c);z(a,c);b.finish()}}function I(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+sc(a),b.clientHeight)+"px"}function M(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c];if(!d.hidden){if(Ha&&8>Wa){var e=d.node.offsetTop+d.node.offsetHeight;var f=e-b;b=e}else f=d.node.getBoundingClientRect(),
f=f.bottom-f.top;e=d.line.height-f;2>f&&(f=rb(a));if(.001<e||-.001>e)if(Rd(d.line,f),S(d.line),d.rest)for(f=0;f<d.rest.length;f++)S(d.rest[f])}}}function S(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function ia(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:H(b),gutterTotalWidth:b.gutters.offsetWidth,
gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function za(a,b,c){function d(b){var c=b.nextSibling;Sb&&dd&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,m=g.firstChild,h=e.view;e=e.viewFrom;for(var q=0;q<h.length;q++){var k=h[q];if(!k.hidden)if(k.node&&k.node.parentNode==g){for(;m!=k.node;)m=d(m);m=f&&null!=b&&b<=e&&k.lineNumber;k.changes&&(-1<Vb(k.changes,"gutter")&&(m=!1),W(a,k,e,c));
m&&(qe(k.lineNumber),k.lineNumber.appendChild(document.createTextNode(x(a.options,e))));m=k.node.nextSibling}else{var V=sa(a,k,e,c);g.insertBefore(V,m)}e+=k.size}for(;m;)m=d(m)}function W(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){f=b;var g=f.text.className,m=aa(a,f);f.text==f.node&&(f.node=m.pre);f.text.parentNode.replaceChild(m.pre,f.text);f.text=m.pre;m.bgClass!=f.bgClass||m.textClass!=f.textClass?(f.bgClass=m.bgClass,f.textClass=m.textClass,U(f)):g&&(f.text.className=
g)}else if("gutter"==f)Z(a,b,c,d);else if("class"==f)U(b);else if("widget"==f){g=a;m=b;var h=d;m.alignable&&(m.alignable=null);for(var q=m.node.firstChild;q;q=f)f=q.nextSibling,"CodeMirror-linewidget"==q.className&&m.node.removeChild(q);ca(g,m,h)}}b.changes=null}function X(a){a.node==a.text&&(a.node=ha("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Ha&&8>Wa&&(a.node.style.zIndex=2));return a.node}function aa(a,b){var c=
a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):ni(a,b)}function U(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=X(a);a.background=c.insertBefore(ha("div",null,b),c.firstChild)}a.line.wrapClass?X(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className=
"");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function Z(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var e=X(b);b.gutterBackground=ha("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,
b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){e=X(b);var g=b.gutter=ha("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);e.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(ha("div",x(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(ha("div",[e],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function sa(a,b,c,d){var e=aa(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);U(b);Z(a,b,c,d);ca(a,b,d);return b.node}function ca(a,b,c){ea(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)ea(a,
b.rest[d],b,c,!1)}function ea(a,b,c,d,e){if(b.widgets){var f=X(c),g=0;for(b=b.widgets;g<b.length;++g){var m=b[g],h=ha("div",[m.node],"CodeMirror-linewidget");m.handleMouseEvents||h.setAttribute("cm-ignore-events","true");var q=m,k=h,V=d;if(q.noHScroll){(c.alignable||(c.alignable=[])).push(k);var l=V.wrapperWidth;k.style.left=V.fixedPos+"px";q.coverGutter||(l-=V.gutterTotalWidth,k.style.paddingLeft=V.gutterTotalWidth+"px");k.style.width=l+"px"}q.coverGutter&&(k.style.zIndex=5,k.style.position="relative",
q.noHScroll||(k.style.marginLeft=-V.gutterTotalWidth+"px"));a.display.input.setUneditable(h);e&&m.above?f.insertBefore(h,c.gutter||c.text):f.appendChild(h);hb(m,"redraw")}}}function la(a){return P(a.line,a.ch)}function Aa(a,b){return 0>va(a,b)?b:a}function Qa(a,b){return 0>va(a,b)?a:b}function yb(a){a.state.focused||(a.display.input.focus(),bg(a))}function ya(a){return a.options.readOnly||a.doc.cantEdit}function Kb(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||
"paste"==e,m=f.splitLines(b),h=null;if(g&&1<d.ranges.length)if(Gc&&Gc.join("\n")==b){if(0==d.ranges.length%Gc.length){h=[];for(var q=0;q<Gc.length;q++)h.push(f.splitLines(Gc[q]))}}else m.length==d.ranges.length&&(h=pf(m,function(a){return[a]}));for(q=d.ranges.length-1;0<=q;q--){var k=d.ranges[q],V=k.from(),l=k.to();k.empty()&&(c&&0<c?V=P(V.line,V.ch-c):a.state.overwrite&&!g&&(l=P(l.line,Math.min(ma(f,l.line).text.length,l.ch+Pa(m).length))));k=a.curOp.updateInput;V={from:V,to:l,text:h?h[q%h.length]:
m,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};jc(a.doc,V);hb(a,"inputRead",a,V)}b&&!g&&Za(a,b);$b(a);a.curOp.updateInput=k;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Ta(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");if(c)return a.preventDefault(),fb(b,function(){Kb(b,c,0,null,"paste")}),!0}function Za(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||
d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var m=0;m<f.electricChars.length;m++){if(-1<b.indexOf(f.electricChars.charAt(m))){g=Qc(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(ma(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Qc(a,e.head.line,"smart"));g&&hb(a,"electricInput",a,e.head.line)}}}function Na(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line;e={anchor:P(e,0),head:P(e+
1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Ra(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function Ca(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new of;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function R(){var a=ha("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=ha("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");
Sb?a.style.width="1000px":a.setAttribute("wrap","off");Zd&&(a.style.border="1px solid black");Ra(a);return b}function Da(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new of;this.gracePeriod=!1}function xb(a,b){var c=Xa(a,b.line);if(!c||c.hidden)return null;a=ma(a.doc,b.line);c=jb(c,a,b.line);a=wd(a);var d="left";a&&(d=we(a,b.ch)%2?"right":"left");b=Oc(c.map,b.ch,d);b.offset="right"==b.collapse?b.end:b.start;return b}function Ba(a,
b){b&&(a.bad=!0);return a}function Ya(a,b,c){if(b==a.display.lineDiv){var d=a.display.lineDiv.childNodes[c];if(!d)return Ba(a.clipPos(P(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ba(f,b,c)}}function ba(a,b,c){function d(b,c,d){for(var e=-1;e<(q?q.length:0);e++)for(var f=0>e?h.map:q[e],g=0;g<f.length;g+=
3){var m=f[g+2];if(m==b||m==c){c=Sa(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||m!=b)e=f[g+(d?1:0)];return P(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!xe(e,b))return Ba(P(Sa(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?Pa(a.rest):a.line,Ba(P(Sa(c),c.text.length),f);var g=3==b.nodeType?b:null,m=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;m.parentNode!=e;)m=m.parentNode;var h=a.measure,q=h.maps;if(b=d(g,m,c))return Ba(b,
f);e=m.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return Ba(P(b.line,b.ch-g),f);g+=e.textContent.length}m=m.previousSibling;for(g=c;m;m=m.previousSibling){if(b=d(m,m.firstChild,-1))return Ba(P(b.line,b.ch+g),f);g+=e.textContent.length}}function gc(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),m+=c;else{c=b.getAttribute("cm-marker");
var k;if(c)b=a.findMarks(P(d,0),P(e+1,0),f(+c)),b.length&&(k=b[0].find())&&(m+=Bc(a.doc,k.from,k.to).join(q));else if("false"!=b.getAttribute("contenteditable")){for(k=0;k<b.childNodes.length;k++)g(b.childNodes[k]);/^(pre|div|p)$/i.test(b.nodeName)&&(h=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(h&&(m+=q,h=!1),m+=b)}for(var m="",h=!1,q=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return m}function gb(a,b){this.ranges=a;this.primIndex=b}function O(a,b){this.anchor=a;this.head=b}function v(a,
b){b=a[b];a.sort(function(a,b){return va(a.from(),b.from())});b=Vb(a,b);for(var c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=va(e.to(),d.from())){var f=Qa(e.from(),d.from()),g=Aa(e.to(),d.to());d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new O(d?g:f,d?f:g))}}return new gb(a,b)}function Ea(a,b){return new gb([new O(a,b||a)],0)}function fa(a,b){if(b.line<a.first)return P(a.first,0);var c=a.first+a.size-1;if(b.line>c)return P(c,ma(a,c).text.length);a=ma(a,b.line).text.length;
c=b.ch;b=null==c||c>a?P(b.line,a):0>c?P(b.line,0):b;return b}function Lb(a,b){return b>=a.first&&b<a.first+a.size}function Vc(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>va(c,a),b!=0>va(d,a)?(a=c,c=d):b!=0>va(c,d)&&(c=d)),new O(a,c)):new O(d||c,c)}function mb(a,b,c,d){Ka(a,new gb([Vc(a,a.sel.primary(),b,c)],0),d)}function Ia(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Vc(a,a.sel.ranges[e],b[e],null);b=v(d,a.sel.primIndex);Ka(a,b,c)}function $a(a,b,c,d){var e=
a.sel.ranges.slice(0);e[b]=c;Ka(a,v(e,a.sel.primIndex),d)}function Ud(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new O(fa(a,b[c].anchor),fa(a,b[c].head))}};qb(a,"beforeSelectionChange",a,c);a.cm&&qb(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?v(c.ranges,c.ranges.length-1):b}function uc(a,b,c){var d=a.history.done,e=Pa(d);e&&e.ranges?(d[d.length-1]=b,Rb(a,b,c)):Ka(a,b,c)}function Ka(a,b,c){Rb(a,b,c);b=a.sel;var d=a.cm?
a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=Pa(e.done);var m=f.charAt(0);g="*"==m||"+"==m&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Wc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&qh(e.undone)}function Rb(a,b,c){if(Lc(a,
"beforeSelectionChange")||a.cm&&Lc(a.cm,"beforeSelectionChange"))b=Ud(a,b);var d=c&&c.bias||(0>va(b.primary().head,a.sel.primary().head)?-1:1);Nc(a,zf(a,b,d,!0));c&&!1===c.scroll||!a.cm||$b(a.cm)}function Nc(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ig(a.cm)),hb(a,"cursorActivity",a))}function Vd(a){Nc(a,zf(a,a.sel,null,!1),Rc)}function zf(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],m=vb(a,g.anchor,c,d),h=vb(a,g.head,c,d);if(e||
m!=g.anchor||h!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new O(m,h)}return e?v(e,b.primIndex):b}function vb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var m=ma(a,f.line);if(m.markedSpans)for(var h=0;h<m.markedSpans.length;++h){var q=m.markedSpans[h],k=q.marker;if((null==q.from||(k.inclusiveLeft?q.from<=f.ch:q.from<f.ch))&&(null==q.to||(k.inclusiveRight?q.to>=f.ch:q.to>f.ch))){if(d&&(qb(k,"beforeCursorEnter"),k.explicitlyCleared))if(m.markedSpans){--h;continue}else break;if(k.atomic){h=k.find(0>
g?-1:1);if(0==va(h,f)&&(h.ch+=g,0>h.ch?h=h.line>a.first?fa(a,P(h.line-1)):null:h.ch>m.text.length&&(h=h.line<a.first+a.size-1?P(h.line+1,0):null),!h)){if(e){if(!d)return vb(a,b,c,!0);a.cantEdit=!0;return P(a.first,0)}e=!0;h=b;g=-g}f=h;continue a}}}return f}}function Cc(a){a.display.input.showSelection(a.display.input.prepareSelection())}function vh(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==
b||g!=c.sel.primIndex){var m=c.sel.ranges[g],h=m.empty();if(h||a.options.showCursorWhenSelecting){var q=a,k=e,l=wc(q,m.head,"div",null,null,!q.options.singleCursorHeightPerLine),V=k.appendChild(ha("div","\u00a0","CodeMirror-cursor"));V.style.left=l.left+"px";V.style.top=l.top+"px";V.style.height=Math.max(0,l.bottom-l.top)*q.options.cursorHeight+"px";l.other&&(q=k.appendChild(ha("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),q.style.display="",q.style.left=l.other.left+"px",q.style.top=
l.other.top+"px",q.style.height=.85*(l.other.bottom-l.other.top)+"px")}h||le(a,m,f)}return d}function le(a,b,c){function d(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);m.appendChild(ha("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?k-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){var f=ma(g,b),m=f.text.length,h,l;ye(wd(f),c||0,null==e?m:e,function(g,V,n){var G=Zc(a,P(b,g),"div",f,"left"),p;if(g==V){var kc=G;n=p=G.left}else kc=Zc(a,P(b,
V-1),"div",f,"right"),"rtl"==n&&(n=G,G=kc,kc=n),n=G.left,p=kc.right;null==c&&0==g&&(n=q);3<kc.top-G.top&&(d(n,G.top,null,G.bottom),n=q,G.bottom<kc.top&&d(n,G.bottom,null,kc.top));null==e&&V==m&&(p=k);if(!h||G.top<h.top||G.top==h.top&&G.left<h.left)h=G;if(!l||kc.bottom>l.bottom||kc.bottom==l.bottom&&kc.right>l.right)l=kc;n<q+1&&(n=q);d(n,kc.top,p-n,kc.bottom)});return{start:h,end:l}}var f=a.display,g=a.doc,m=document.createDocumentFragment(),h=vc(a.display),q=h.left,k=Math.max(f.sizerWidth,Tc(a)-f.sizer.offsetLeft)-
h.right;f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var l=ma(g,f.line);h=ma(g,b.line);h=Qd(l)==Qd(h);f=e(f.line,f.ch,h?l.text.length+1:null).end;b=e(b.line,h?0:null,b.ch).start;h&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(q,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(q,f.bottom,null,b.top)}c.appendChild(m)}function Ie(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?
b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function wb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,Xf(xd,a))}function xd(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Ff(b.mode,Ac(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,
a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,m=nh(a,f,d,!0);f.styles=m.styles;var h=f.styleClasses;(m=m.classes)?f.styleClasses=m:h&&(f.styleClasses=null);h=!g||g.length!=f.styles.length||h!=m&&(!h||!m||h.bgClass!=m.bgClass||h.textClass!=m.textClass);for(m=0;!h&&m<g.length;++m)h=g[m]!=f.styles[m];h&&e.push(b.frontier);f.stateAfter=Ff(b.mode,d)}else rh(a,f.text,d),f.stateAfter=0==b.frontier%5?Ff(b.mode,d):null;++b.frontier;if(+new Date>c)return wb(a,a.options.workDelay),
!0});e.length&&fb(a,function(){for(var b=0;b<e.length;b++)Wb(a,e[b],"text")})}}function mf(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var m=ma(f,b-1);if(m.stateAfter&&(!c||b<=f.frontier))return b;m=ed(m.text,null,a.options.tabSize);if(null==e||d>m)e=b-1,d=m}return e}function Ac(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=mf(a,b,c),g=f>d.first&&ma(d,f-1).stateAfter;g=g?Ff(d.mode,g):ti(d.mode);d.iter(f,b,function(c){rh(a,
c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?Ff(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Kc(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function vc(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=tc(a.measure,ha("pre","x"));b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function sc(a){return zh-a.display.nativeBarWidth}
function Tc(a){return a.display.scroller.clientWidth-sc(a)-a.display.barWidth}function Nd(a){return a.display.scroller.clientHeight-sc(a)-a.display.barHeight}function jb(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(Sa(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Xa(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Od(a,
b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function Fb(a,b){var c=Sa(b),d=Xa(a,c);d&&!d.text?d=null:d&&d.changes&&(W(a,d,c,ia(a)),a.curOp.forceUpdate=!0);if(!d){var e=Qd(b);d=Sa(e);e=a.display.externalMeasured=new Uc(a.doc,e,d);e.lineN=d;d=e.built=ni(a,e);e.text=d.pre;tc(a.display.lineMeasure,d.pre);d=e}a=jb(d,b,c);return{line:b,view:d,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function oe(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=
b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,m=b.rect,h=a.options.lineWrapping,q=h&&Tc(a);if(!g.measure.heights||h&&g.measure.width!=q){var k=g.measure.heights=[];if(h)for(g.measure.width=q,g=g.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){q=g[h];var l=g[h+1];2<Math.abs(q.bottom-l.bottom)&&k.push((q.bottom+l.top)/2-m.top)}k.push(m.bottom-m.top)}b.hasHeights=!0}g=d;h=Oc(b.map,c,g);d=h.node;m=h.start;q=h.end;c=h.collapse;if(3==d.nodeType){for(k=
0;4>k;k++){for(;m&&Jg(b.line.text.charAt(h.coverStart+m));)--m;for(;h.coverStart+q<h.coverEnd&&Jg(b.line.text.charAt(h.coverStart+q));)++q;if(Ha&&9>Wa&&0==m&&q==h.coverEnd-h.coverStart)var V=d.parentNode.getBoundingClientRect();else if(Ha&&a.options.lineWrapping){var n=Xe(d,m,q).getClientRects();V=n.length?n["right"==g?n.length-1:0]:Gh}else V=Xe(d,m,q).getBoundingClientRect()||Gh;if(V.left||V.right||0==m)break;q=m;--m;c="right"}Ha&&11>Wa&&((n=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==
screen.deviceXDPI)||(null!=ui?n=ui:(k=tc(a.display.measure,ha("span","x")),n=k.getBoundingClientRect(),k=Xe(k,0,1).getBoundingClientRect(),n=ui=1<Math.abs(n.left-k.left)),n=!n),n||(n=screen.logicalXDPI/screen.deviceXDPI,k=screen.logicalYDPI/screen.deviceYDPI,V={left:V.left*n,right:V.right*n,top:V.top*k,bottom:V.bottom*k}))}else 0<m&&(c=g="right"),V=a.options.lineWrapping&&1<(n=d.getClientRects()).length?n["right"==g?n.length-1:0]:d.getBoundingClientRect();!(Ha&&9>Wa)||m||V&&(V.left||V.right)||(V=
(V=d.parentNode.getClientRects()[0])?{left:V.left,right:V.left+rd(a.display),top:V.top,bottom:V.bottom}:Gh);n=V.top-b.rect.top;d=V.bottom-b.rect.top;m=(n+d)/2;g=b.view.measure.heights;for(k=0;k<g.length-1&&!(m<g[k]);k++);c={left:("right"==c?V.right:V.left)-b.rect.left,right:("left"==c?V.left:V.right)-b.rect.left,top:k?g[k-1]:0,bottom:g[k]};V.left||V.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=n,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:
a.top,bottom:e?a.rbottom:a.bottom}}function Oc(a,b,c){for(var d,e,f,g,m=0;m<a.length;m+=3){var h=a[m],q=a[m+1];if(b<h)e=0,f=1,g="left";else if(b<q)e=b-h,f=e+1;else if(m==a.length-3||b==q&&a[m+3]>b)f=q-h,e=f-1,b>=q&&(g="right");if(null!=e){d=a[m+2];h==q&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;m&&a[m-2]==a[m-3]&&a[m-1].insertLeft;)d=a[(m-=3)+2],g="left";if("right"==c&&e==q-h)for(;m<a.length-3&&a[m+3]==a[m+4]&&!a[m+5].insertLeft;)d=a[(m+=3)+2],g="right";break}}return{node:d,
start:e,end:f,collapse:g,coverStart:h,coverEnd:q}}function Af(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Pe(a){a.display.externalMeasure=null;qe(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Af(a.display.view[b])}function hc(a){Pe(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}
function K(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=uf(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Yc(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),
c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function yd(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Zc(a,b,c,d,e){d||(d=ma(a.doc,b.line));var f=d;b=b.ch;d=oe(a,
Fb(a,d),b,e);return K(a,f,d,c)}function wc(a,b,c,d,e,f){function g(b,g){b=oe(a,e,b,g?"right":"left",f);g?b.left=b.right:b.right=b.left;return K(a,d,b,c)}function m(a,b){var c=h[b],d=c.level%2;a==Hh(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=Ab(c)-(c.level%2?0:1),d=!0):a==Ab(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=Hh(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||ma(a.doc,b.line);e||(e=Fb(a,d));var h=wd(d);b=b.ch;if(!h)return g(b);var q=we(h,b);q=m(b,q);null!=dg&&(q.other=
m(b,dg));return q}function Qe(a,b){var c=0;b=fa(a.doc,b);a.options.lineWrapping||(c=rd(a.display)*b.ch);b=ma(a.doc,b.line);a=Yc(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function pe(a,b,c,d){a=P(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Hg(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return pe(d.first,0,!0,-1);var e=ud(d,c),f=d.first+d.size-1;if(e>f)return pe(d.first+d.size-1,ma(d,f).text.length,!0,1);0>b&&(b=0);for(d=ma(d,e);;)if(e=Je(a,d,e,b,c),
f=(d=sf(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=Sa(d=f.to.line);else return e}function Je(a,b,c,d,e){function f(d){d=wc(a,P(c,d),"line",b,q);m=!0;if(g>d.bottom)return d.left-h;if(g<d.top)return d.left+h;m=!1;return d.left}var g=e-Yc(b),m=!1,h=2*a.display.wrapper.clientWidth,q=Fb(a,b),k=wd(b),l=b.text.length;e=Rg(b);var V=Sg(b),n=f(e),G=m,p=f(V),I=m;if(d>p)return pe(c,V,I,1);for(;;){if(k?V==e||V==Tg(b,e,1):1>=V-e){k=d<n||d-n<=p-d?e:V;for(d-=k==e?n:p;Jg(b.text.charAt(k));)++k;
return pe(c,k,k==e?G:I,-1>d?-1:1<d?1:0)}var t=Math.ceil(l/2),r=e+t;if(k){r=e;for(var u=0;u<t;++u)r=Tg(b,r,1)}u=f(r);if(u>d){V=r;p=u;if(I=m)p+=1E3;l=t}else e=r,n=u,G=m,l-=t}}function rb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==bc){bc=ha("pre");for(var b=0;49>b;++b)bc.appendChild(document.createTextNode("x")),bc.appendChild(ha("br"));bc.appendChild(document.createTextNode("x"))}tc(a.measure,bc);b=bc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);qe(a.measure);return b||1}function rd(a){if(null!=
a.cachedCharWidth)return a.cachedCharWidth;var b=ha("span","xxxxxxxxxx"),c=ha("pre",[b]);tc(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function xa(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++uj};mc?mc.ops.push(a.curOp):a.curOp.ownsGroup=
mc={ops:[a.curOp],delayedCallbacks:[]}}function Dc(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}finally{mc=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){e=a[b];c=e.cm;var f=d=c.display;
!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=sc(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=sc(c)+"px",f.scrollbarsClipped=!0);e.updateMaxLine&&p(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new F(c,
e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&m(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&M(c),e.barMeasure=w(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=d.maxLine.text.length,f=oe(c,Fb(c,d.maxLine),f,void 0),e.adjustWidthTo=f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+sc(c)+c.display.barWidth),
e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-Tc(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&zb(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&I(c,e.barMeasure),
(e.updatedDisplay||e.startHeight!=c.doc.height)&&z(c,e.barMeasure),e.selectionChanged&&Ie(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),e.focus&&e.focus==Pd()&&yb(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&q(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-
d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-Tc(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,y(c));if(e.scrollToPos){var g=fa(f,e.scrollToPos.from);var h=fa(f,e.scrollToPos.to);var k=e.scrollToPos.margin;null==k&&(k=0);for(var l=0;5>l;l++){var V=!1,n=wc(c,
g),G=h&&h!=g?wc(c,h):n;G=Ue(c,Math.min(n.left,G.left),Math.min(n.top,G.top)-k,Math.max(n.left,G.left),Math.max(n.bottom,G.bottom)+k);var t=c.doc.scrollTop,r=c.doc.scrollLeft;null!=G.scrollTop&&(cb(c,G.scrollTop),1<Math.abs(c.doc.scrollTop-t)&&(V=!0));null!=G.scrollLeft&&(zb(c,G.scrollLeft),1<Math.abs(c.doc.scrollLeft-r)&&(V=!0));if(!V)break}h=n;e.scrollToPos.isCursor&&c.state.focused&&(vd(c,"scrollCursorIntoView")||(k=c.display,l=k.sizer.getBoundingClientRect(),g=null,0>h.top+l.top?g=!0:h.bottom+
l.top>(window.innerHeight||document.documentElement.clientHeight)&&(g=!1),null==g||Ih||(h=ha("div","\u200b",null,"position: absolute; top: "+(h.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(h.bottom-h.top+sc(c)+k.barHeight)+"px; left: "+h.left+"px; width: 2px;"),c.display.lineSpace.appendChild(h),h.scrollIntoView(g),c.display.lineSpace.removeChild(h))))}g=e.maybeHiddenMarkers;h=e.maybeUnhiddenMarkers;if(g)for(k=0;k<g.length;++k)g[k].lines.length||qb(g[k],"hide");if(h)for(k=0;k<h.length;++k)h[k].lines.length&&
qb(h[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&qb(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function fb(a,b){if(a.curOp)return b();xa(a);try{return b()}finally{Dc(a)}}function Ua(a,b){return function(){if("EditorRich"!=virtualclass.currApp||!arguments[0].ctrlKey||90!=arguments[0].keyCode&&89!=arguments[0].keyCode){if(a.curOp)return b.apply(a,arguments);xa(a);try{return b.apply(a,arguments)}finally{Dc(a)}}else virtualclass.editorRich.undoManager(arguments[0].keyCode)}}
function sb(a){return function(){if(this.curOp)return a.apply(this,arguments);xa(this);try{return a.apply(this,arguments)}finally{Dc(this)}}}function kb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);xa(b);try{return a.apply(this,arguments)}finally{Dc(b)}}}function Uc(a,b,c){for(var d=this.line=b,e;d=sf(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?Sa(Pa(this.rest))-c+1:1;this.node=this.text=null;this.hidden=se(a,b)}function Qb(a,b,c){var d=
[],e;for(e=b;e<c;)b=new Uc(a.doc,ma(a.doc,e),e),e+=b.size,d.push(b);return d}function Fa(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)ve&&th(a.doc,b)<e.viewTo&&Xb(a);else if(c<=e.viewFrom)ve&&tf(a.doc,c+d)>e.viewFrom?Xb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Xb(a);else if(b<=e.viewFrom){var f=te(a,
c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Xb(a)}else if(c>=e.viewTo)(f=te(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Xb(a);else{f=te(a,b,b,-1);var g=te(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Qb(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Xb(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Wb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;
e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Od(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Vb(a,c)&&a.push(c)))}function Xb(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Od(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;a=a.display.view;for(var c=0;c<a.length;c++)if(b-=a[c].size,0>b)return c}function te(a,b,c,d){var e=Od(a,b),f=a.display.view;if(!ve||
c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,m=a.display.viewFrom;g<e;g++)m+=f[g].size;if(m!=b){if(0<d){if(e==f.length-1)return null;b=m+f[e].size-b;e++}else b=m-b;c+=b}for(;th(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Ec(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function Le(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=null},
1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left;a=b.top-a.top;return 400<c*c+a*a}var d=a.display;qa(d.scroller,"mousedown",Ua(a,Bf));Ha&&11>Wa?qa(d.scroller,"dblclick",Ua(a,function(b){if(!vd(a,b)){var c=tb(a,b);!c||Va(a,b,"gutterClick",!0,hb)||Jb(a.display,b)||(Mb(b),b=a.findWordAt(c),mb(a.doc,b.anchor,b.head))}})):qa(d.scroller,"dblclick",function(b){vd(a,b)||Mb(b)});Jh||qa(d.scroller,"contextmenu",function(b){Yb(a,b)});var e,f={end:0};qa(d.scroller,
"touchstart",function(a){if(1!=a.touches.length)var b=!1;else b=a.touches[0],b=1>=b.radiusX&&1>=b.radiusY;b||(clearTimeout(e),b=+new Date,d.activeTouch={start:b,moved:!1,prev:300>=b-f.end?f:null},1==a.touches.length&&(d.activeTouch.left=a.touches[0].pageX,d.activeTouch.top=a.touches[0].pageY))});qa(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});qa(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!Jb(d,e)&&null!=f.left&&!f.moved&&300>new Date-f.start){var g=
a.coordsChar(d.activeTouch,"page");f=!f.prev||c(f,f.prev)?new O(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new O(P(g.line,0),fa(a.doc,P(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();Mb(e)}b()});qa(d.scroller,"touchcancel",b);qa(d.scroller,"scroll",function(){d.scroller.clientHeight&&(cb(a,d.scroller.scrollTop),zb(a,d.scroller.scrollLeft,!0),qb(a,"scroll",a))});qa(d.scroller,"mousewheel",function(b){zd(a,b)});qa(d.scroller,"DOMMouseScroll",function(b){zd(a,b)});qa(d.wrapper,"scroll",
function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={simple:function(b){vd(a,b)||eg(b)},start:function(b){if(Ha&&(!a.state.draggingText||100>+new Date-fg))eg(b);else if(!vd(a,b)&&!Jb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!db)){var c=ha("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";Hc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),
c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);Hc&&c.parentNode.removeChild(c)}},drop:Ua(a,$c)};var g=d.input.getField();qa(g,"keyup",function(b){T.call(a,b)});qa(g,"keydown",Ua(a,$f));qa(g,"keypress",Ua(a,La));qa(g,"focus",Xf(bg,a));qa(g,"blur",Xf(Yd,a))}function Ke(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function Jb(a,b){for(b=b.target||
b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function tb(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;c=e.lineSpace.getBoundingClientRect();try{var f=b.clientX-c.left;var g=b.clientY-c.top}catch(Ah){return null}b=Hg(a,f,g);var m;d&&1==b.xRel&&(m=ma(a.doc,b.line).text).length==b.ch&&(d=ed(m,m.length,a.options.tabSize)-m.length,b=P(b.line,
Math.max(0,Math.round((f-vc(a.display).left)/rd(a.display))-d)));return b}function Bf(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||vd(this,a)))if(b.shift=a.shiftKey,Jb(b,a))Sb||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!Va(this,a,"gutterClick",!0,hb)){var c=tb(this,a);window.focus();switch(Ne(a)){case 1:c?Ma(this,a,c):(a.target||a.srcElement)==b.scroller&&Mb(a);break;case 2:Sb&&(this.state.lastMiddleDown=+new Date);c&&mb(this.doc,c);
setTimeout(function(){b.input.focus()},20);Mb(a);break;case 3:Jh?Yb(this,a):ag(this)}}}function Ma(a,b,c){Ha?setTimeout(Xf(yb,a),0):a.curOp.focus=Pd();var d=+new Date;if(gg&&gg.time>d-400&&0==va(gg.pos,c))var e="triple";else Kh&&Kh.time>d-400&&0==va(Kh.pos,c)?(e="double",gg={time:d,pos:c}):(e="single",Kh={time:d,pos:c});d=a.doc.sel;var f=dd?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&vi&&!ya(a)&&"single"==e&&-1<(g=d.contains(c))&&(0>va((g=d.ranges[g]).from(),c)||0<c.xRel)&&(0<va(g.to(),c)||0>c.xRel)?
Wd(a,b,c,f):Ng(a,b,c,e,f)}function Wd(a,b,c,d){var e=a.display,f=+new Date,g=Ua(a,function(m){Sb&&(e.scroller.draggable=!1);a.state.draggingText=!1;xc(document,"mouseup",g);xc(e.scroller,"drop",g);10>Math.abs(b.clientX-m.clientX)+Math.abs(b.clientY-m.clientY)&&(Mb(m),!d&&+new Date-200<f&&mb(a.doc,c),Sb||Ha&&9==Wa?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});Sb&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();qa(document,
"mouseup",g);qa(e.scroller,"drop",g)}function Ng(a,b,c,d,e){function f(b){if(0!=va(p,b))if(p=b,"rect"==d){var e=[],f=a.options.tabSize,g=ed(ma(q,c.line).text,c.ch,f),m=ed(ma(q,b.line).text,b.ch,f),h=Math.min(g,m);g=Math.max(g,m);m=Math.min(c.line,b.line);for(var l=Math.min(a.lastLine(),Math.max(c.line,b.line));m<=l;m++){var G=ma(q,m).text,I=hj(G,h,f);h==g?e.push(new O(P(m,I),P(m,I))):G.length>I&&e.push(new O(P(m,I),P(m,hj(G,g,f))))}e.length||e.push(new O(c,c));Ka(q,v(k.ranges.slice(0,n).concat(e),
n),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=V,f=e.anchor,h=b,"single"!=d&&(b="double"==d?a.findWordAt(b):new O(P(b.line,0),fa(q,P(b.line+1,0))),0<va(b.anchor,f)?(h=b.head,f=Qa(e.from(),b.anchor)):(h=b.anchor,f=Aa(e.to(),b.head))),e=k.ranges.slice(0),e[n]=new O(fa(q,f),h),Ka(q,v(e,n),Lh)}function g(b){var c=++t,e=tb(a,b,!0,"rect"==d);if(e)if(0!=va(e,p)){a.curOp.focus=Pd();f(e);var m=D(h,q);(e.line>=m.to||e.line<m.from)&&setTimeout(Ua(a,function(){t==c&&g(b)}),150)}else{var k=b.clientY<
I.top?-20:b.clientY>I.bottom?20:0;k&&setTimeout(Ua(a,function(){t==c&&(h.scroller.scrollTop+=k,g(b))}),50)}}function m(a){t=Infinity;Mb(a);h.input.focus();xc(document,"mousemove",r);xc(document,"mouseup",u);q.history.lastSelOrigin=null}var h=a.display,q=a.doc;Mb(b);var k=q.sel,l=k.ranges;if(e&&!b.shiftKey){var n=q.sel.contains(c);var V=-1<n?l[n]:new O(c,c)}else V=q.sel.primary(),n=q.sel.primIndex;if(b.altKey)d="rect",e||(V=new O(c,c)),c=tb(a,b,!0,!0),n=-1;else if("double"==d){var G=a.findWordAt(c);
V=a.display.shift||q.extend?Vc(q,V,G.anchor,G.head):G}else"triple"==d?(G=new O(P(c.line,0),fa(q,P(c.line+1,0))),V=a.display.shift||q.extend?Vc(q,V,G.anchor,G.head):G):V=Vc(q,V,c);e?-1==n?(n=l.length,Ka(q,v(l.concat([V]),n),{scroll:!1,origin:"*mouse"})):1<l.length&&l[n].empty()&&"single"==d&&!b.shiftKey?(Ka(q,v(l.slice(0,n).concat(l.slice(n+1)),0)),k=q.sel):$a(q,n,V,Lh):(n=0,Ka(q,new gb([V],0),Lh),k=q.sel);var p=c,I=h.wrapper.getBoundingClientRect(),t=0,r=Ua(a,function(a){Ne(a)?g(a):m(a)}),u=Ua(a,
m);qa(document,"mousemove",r);qa(document,"mouseup",u)}function Va(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(Ch){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Mb(b);d=a.display;var m=d.lineDiv.getBoundingClientRect();if(g>m.bottom||!Lc(a,c))return qi(b);g-=m.top-d.viewOffset;for(m=0;m<a.options.gutters.length;++m){var h=d.gutters.childNodes[m];if(h&&h.getBoundingClientRect().right>=f)return f=ud(a.doc,g),e(a,c,a,f,a.options.gutters[m],b),qi(b)}}function $c(a){var b=
this;if(!vd(b,a)&&!Jb(b.display,a)){Mb(a);Ha&&(fg=+new Date);var c=tb(b,a,!0),d=a.dataTransfer.files;if(c&&!ya(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var m=new FileReader;m.onload=Ua(b,function(){f[d]=m.result;if(++g==e){c=fa(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};jc(b.doc,a);uc(b.doc,Ea(c,fd(a)))}});m.readAsText(a)};for(var m=0;m<e;++m)a(d[m],m)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),
setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(dd?!a.altKey:!a.ctrlKey))var h=b.listSelections();Rb(b.doc,Ea(c,c));if(h)for(m=0;m<h.length;++m)Cd(b.doc,"",h[m].anchor,h[m].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(Ch){}}}function cb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,We||G(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),
We&&G(a),wb(a,100))}function zb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,y(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function zd(a,b){var c=ze(b),d=c.x;c=c.y;var e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&dd&&Sb){var g=b.target,m=e.view;a:for(;g!=f;g=g.parentNode)for(var h=
0;h<m.length;h++)if(m[h].node==g){a.display.currentWheelTarget=g;break a}}!d||We||Hc||null==Bb?(c&&null!=Bb&&(b=c*Bb,g=a.doc.scrollTop,m=g+e.wrapper.clientHeight,0>b?g=Math.max(0,g+b-50):m=Math.min(a.doc.height,m+b+50),G(a,{top:g,bottom:m})),20>gd&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY;a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;
e.wheelStartX=e.wheelStartY=null;a&&(Bb=(Bb*gd+a)/(gd+1),++gd)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&cb(a,Math.max(0,Math.min(f.scrollTop+c*Bb,f.scrollHeight-f.clientHeight))),zb(a,Math.max(0,Math.min(f.scrollLeft+d*Bb,f.scrollWidth-f.clientWidth))),Mb(b),e.wheelStartX=null)}}function Pc(a,b,c){if("string"==typeof b&&(b=Gf[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{ya(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Mh}finally{a.display.shift=d,
a.state.suppressEdits=!1}return e}function Og(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=hg(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&hg(b,a.options.extraKeys,c,a)||hg(b,a.options.keyMap,c,a)}function Re(a,b,c,d){var e=a.state.keySeq;if(e){if(wi(b))return"handled";Vg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=Og(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&hb(a,"keyHandled",a,b,c);if("handled"==d||"multi"==
d)Mb(c),Ie(a);return e&&!d&&/'$/.test(b)?(Mb(c),!0):!!d}function Ad(a,b){var c=vj(b,!0);return c?b.shiftKey&&!a.state.keySeq?Re(a,"Shift-"+c,b,function(b){return Pc(a,b,!0)})||Re(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Pc(a,b)}):Re(a,c,b,function(b){return Pc(a,b)}):!1}function Xd(a,b,c){return Re(a,"'"+c+"'",b,function(b){return Pc(a,b,!0)})}function $f(a){this.curOp.focus=Pd();if(!vd(this,a)){Ha&&11>Wa&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=
16==b||a.shiftKey;var c=Ad(this,a);Hc&&(ig=c?b:null,!c&&88==b&&!Ye&&(dd?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Se(this)}}function Se(a){function b(a){18!=a.keyCode&&a.altKey||(ue(c,"CodeMirror-crosshair"),xc(document,"keyup",b),xc(document,"mouseover",b))}var c=a.display.lineDiv;Ef(c,"CodeMirror-crosshair");qa(document,"keyup",b);qa(document,"mouseover",b)}function T(a){16==a.keyCode&&(this.doc.sel.shift=
!1);vd(this,a)}function La(a){if(!(Jb(this.display,a)||vd(this,a)||a.ctrlKey&&!a.altKey||dd&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(Hc&&b==ig)ig=null,Mb(a);else if(!Hc||a.which&&!(10>a.which)||!Ad(this,a))if(b=String.fromCharCode(null==c?b:c),!Xd(this,a,b))this.display.input.onKeyPress(a)}}function ag(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Yd(a))},100)}function bg(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=
!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(qb(a,"focus",a),a.state.focused=!0,Ef(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Sb&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Ie(a))}function Yd(a){a.state.delayingBlurEvent||(a.state.focused&&(qb(a,"blur",a),a.state.focused=!1,ue(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||
(a.display.shift=!1)},150))}function Yb(a,b){var c;(c=Jb(a.display,b))||(c=Lc(a,"gutterContextMenu")?Va(a,b,"gutterContextMenu",!1,qb):!1);if(!c)a.display.input.onContextMenu(b)}function Cf(a,b){if(0>va(a,b.from))return a;if(0>=va(a,b.to))return fd(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=fd(b).ch-b.to.ch);return P(c,d)}function ic(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new O(Cf(e.anchor,b),Cf(e.head,b)))}return v(c,
a.sel.primIndex)}function Vf(a,b,c){return a.line==b.line?P(c.line,a.ch-b.ch+c.ch):P(c.line+(a.line-b.line),a.ch)}function Fc(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=fa(a,b));c&&(this.to=fa(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});qb(a,"beforeChange",a,b);a.cm&&qb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function jc(a,
b,c){if(a.cm){if(!a.cm.curOp)return Ua(a.cm,jc)(a,b,c);if(a.cm.state.suppressEdits)return}if(Lc(a,"beforeChange")||a.cm&&Lc(a.cm,"beforeChange"))if(b=Fc(a,b,!0),!b)return;if(c=nc&&!c&&Ek(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Bd(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else Bd(a,b)}function Bd(a,b){if(1!=b.text.length||""!=b.text[0]||0!=va(b.from,b.to)){var c=ic(a,b);Me(a,b,c,a.cm?a.cm.curOp.id:NaN);Zb(a,b,c,Gg(a,b));var d=[];Oe(a,function(a,c){c||-1!=Vb(d,a.history)||(ij(a.history,
b),d.push(a.history));Zb(a,b,null,Gg(a,b))})}}function Te(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,m="undo"==b?d.undone:d.done,h=0;h<g.length&&(e=g[h],c?!e.ranges||e.equals(a.sel):e.ranges);h++);if(h!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Wc(e,m);if(c&&!e.equals(a.sel)){Ka(a,e,{clearRedo:!1});return}f=e}else break;c=[];Wc(f,m);m.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;
d=Lc(a,"beforeChange")||a.cm&&Lc(a.cm,"beforeChange");for(h=e.changes.length-1;0<=h;--h){var q=e.changes[h];q.origin=b;if(d&&!Fc(a,q,!1)){g.length=0;break}c.push(yf(a,q));f=h?ic(a,q):Pa(g);Zb(a,q,f,ne(a,q));!h&&a.cm&&a.cm.scrollIntoView({from:q.from,to:fd(q)});var k=[];Oe(a,function(a,b){b||-1!=Vb(k,a.history)||(ij(a.history,q),k.push(a.history));Zb(a,q,null,ne(a,q))})}}}}function nf(a,b){if(0!=b&&(a.first+=b,a.sel=new gb(pf(a.sel.ranges,function(a){return new O(P(a.anchor.line+b,a.anchor.ch),P(a.head.line+
b,a.head.ch))}),a.sel.primIndex),a.cm)){Fa(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Wb(a.cm,d,"gutter")}}function Zb(a,b,c,d){if(a.cm&&!a.cm.curOp)return Ua(a.cm,Zb)(a,b,c,d);if(b.to.line<a.first)nf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);nf(a,e);b={from:P(a.first,0),to:P(b.to.line+e,b.to.ch),text:[Pa(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&
(b={from:b.from,to:P(e,ma(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Bc(a,b.from,b.to);c||(c=ic(a,b));a.cm?Pg(a.cm,b,d):uh(a,b,d);Rb(a,c,Rc)}}function Pg(b,c,d){var e=b.doc,f=b.display,g=c.from,m=c.to,h=!1,q=g.line;b.options.lineWrapping||(q=Sa(Qd(ma(e,g.line))),e.iter(q,m.line+1,function(a){if(a==f.maxLine)return h=!0}));-1<e.sel.contains(c.from,c.to)&&Ig(b);uh(e,c,d,a(b));b.options.lineWrapping||(e.iter(q,g.line+c.text.length,function(a){var b=n(a);b>f.maxLineLength&&(f.maxLine=
a,f.maxLineLength=b,f.maxLineChanged=!0,h=!1)}),h&&(b.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,g.line);wb(b,400);d=c.text.length-(m.line-g.line)-1;c.full?Fa(b):g.line!=m.line||1!=c.text.length||Mc(b.doc,c)?Fa(b,g.line,m.line+1,d):Wb(b,g.line,"text");d=Lc(b,"changes");if((e=Lc(b,"change"))||d)c={from:g,to:m,text:c.text,removed:c.removed,origin:c.origin},e&&hb(b,"change",b,c),d&&(b.curOp.changeObjs||(b.curOp.changeObjs=[])).push(c);b.display.selForContextMenu=null}function Cd(a,b,c,d,
e){d||(d=c);if(0>va(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));jc(a,{from:c,to:d,text:b,origin:e})}function Ue(a,b,c,d,e){var f=a.display,g=rb(a.display);0>c&&(c=0);var m=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,h=Nd(a),q={};e-c>h&&(e=c+h);var k=a.doc.height+Kc(f),l=c<g;g=e>k-g;c<m?q.scrollTop=l?0:c:e>m+h&&(c=Math.min(c,(g?k:e)-h),c!=m&&(q.scrollTop=c));m=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=Tc(a)-(a.options.fixedGutter?
f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?q.scrollLeft=0:b<m?q.scrollLeft=Math.max(0,b-(f?0:10)):d>a+m-3&&(q.scrollLeft=d+(f?0:10)-a);return q}function ad(a,b,c){null==b&&null==c||Dd(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function $b(a){Dd(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?P(b.line,b.ch-1):b,d=P(b.line,b.ch+1));a.curOp.scrollToPos=
{from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Dd(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Qe(a,b.from),d=Qe(a,b.to);b=Ue(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function Qc(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=Ac(a,b):c="prev");var g=a.options.tabSize,m=ma(e,b),h=ed(m.text,null,g);m.stateAfter&&(m.stateAfter=
null);var q=m.text.match(/^\s*/)[0];if(!d&&!/\S/.test(m.text)){var k=0;c="not"}else if("smart"==c&&(k=e.mode.indent(f,m.text.slice(q.length),m.text),k==Mh||150<k)){if(!d)return;c="prev"}"prev"==c?k=b>e.first?ed(ma(e,b-1).text,null,g):0:"add"==c?k=h+a.options.indentUnit:"subtract"==c?k=h-a.options.indentUnit:"number"==typeof c&&(k=h+c);k=Math.max(0,k);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(k/g);a;--a)d+=g,c+="\t";d<k&&(c+=td(k-d));if(c!=q)return Cd(e,c,P(b,0),P(b,q.length),"+input"),
m.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<q.length){d=P(b,q.length);$a(e,a,new O(d,d));break}}function bd(a,b,c,d){var e=b,f=b;"number"==typeof b?f=ma(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=Sa(b);if(null==e)return null;d(f,e)&&a.cm&&Wb(a.cm,e,c);return f}function cd(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=va(f.from,Pa(d).to);){var g=d.pop();if(0>va(g.from,f.from)){f.from=g.from;
break}}d.push(f)}fb(a,function(){for(var b=d.length-1;0<=b;b--)Cd(a.doc,"",d[b].from,d[b].to,"+delete");$b(a)})}function Df(a,b,c,d,e){function f(b){var d=(e?Tg:wj)(q,m,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=k=!1:(g=b,b=q=ma(a,b));if(b)m=e?(0>c?Sg:Rg)(q):0>c?q.text.length:0;else return k=!1}else m=d;return!0}var g=b.line,m=b.ch,h=c,q=ma(a,g),k=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var l=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");
for(var n=!0;!(0>c)||f(!n);n=!1){var G=q.text.charAt(m)||"\n";G=Yf(G,b)?"w":d&&"\n"==G?"n":!d||/\s/.test(G)?null:"p";!d||n||G||(G="s");if(l&&l!=G){0>c&&(c=1,f());break}G&&(l=G);if(0<c&&!f(!n))break}}h=vb(a,P(g,m),h,!0);k||(h.hitSide=!0);return h}function qc(a,b,c,d){var e=a.doc,f=b.left,g;for("page"==d?g=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(0>c?1.5:.5)*rb(a.display)):"line"==d&&(g=0<c?b.bottom+3:b.top-3);;){b=Hg(a,f,g);if(!b.outside)break;
if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function pa(a,b,c,d){e.defaults[a]=b;c&&(Ve[a]=d?function(a,b,d){d!=Qg&&c(a,b,d)}:c)}function He(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var m=b[g];if(/^(cmd|meta|m)$/i.test(m))f=!0;else if(/^a(lt)?$/i.test(m))c=!0;else if(/^(c|ctrl|control)$/i.test(m))d=!0;else if(/^s(hift)$/i.test(m))e=!0;else throw Error("Unrecognized modifier name: "+m);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+
a);return a}function fc(a){return"string"==typeof a?hd[a]:a}function pd(a,b,c,d,e){if(d&&d.shared)return qd(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Ua(a.cm,pd)(a,b,c,d,e);var f=new Ze(a,e);e=va(b,c);d&&Xc(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=ha("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(pj(a,b.line,b,
c,f)||b.line!=c.line&&pj(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");ve=!0}f.addToHistory&&Me(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,m=a.cm,h;a.iter(g,c.line+1,function(a){m&&f.collapsed&&!m.options.lineWrapping&&Qd(a)==m.display.maxLine&&(h=!0);f.collapsed&&g!=b.line&&Rd(a,0);var d=new rc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&
a.iter(b.line,c.line+1,function(b){se(a,b)&&Rd(b,0)});f.clearOnEnter&&qa(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(nc=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Nh,f.atomic=!0);if(m){h&&(m.curOp.updateMaxLine=!0);if(f.collapsed)Fa(m,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)Wb(m,d,"text");f.atomic&&Vd(m.doc);hb(m,"markerAdded",m,f)}return f}function qd(a,b,c,d,e){d=Xc(d);
d.shared=!1;var f=[pd(a,b,c,d,e)],g=f[0],m=d.widgetNode;Oe(a,function(a){m&&(d.widgetNode=m.cloneNode(!0));f.push(pd(a,fa(a,b),fa(a,c),d,e));for(var h=0;h<a.linked.length;++h)if(a.linked[h].isParent)return;g=Pa(f)});return new jg(f,g)}function ra(a){return a.findMarks(P(a.first,0),a.clipPos(P(a.lastLine())),function(a){return a.parent})}function Tf(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Oe(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];
-1==Vb(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function rc(a,b,c){this.marker=a;this.from=b;this.to=c}function Uf(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Gg(a,b){if(b.full)return null;var c=Lb(a,b.from.line)&&ma(a,b.from.line).markedSpans,d=Lb(a,b.to.line)&&ma(a,b.to.line).markedSpans;if(!c&&!d)return null;a=b.from.ch;var e=b.to.ch,f=0==va(b.from,b.to);if(c)for(var g=0,m;g<c.length;++g){var h=c[g],q=h.marker;if(null==h.from||(q.inclusiveLeft?
h.from<=a:h.from<a)||!(h.from!=a||"bookmark"!=q.type||f&&h.marker.insertLeft)){var k=null==h.to||(q.inclusiveRight?h.to>=a:h.to>a);(m||(m=[])).push(new rc(q,h.from,k?null:h.to))}}c=m;var l;if(d)for(m=0;m<d.length;++m)if(g=d[m],h=g.marker,null==g.to||(h.inclusiveRight?g.to>=e:g.to>e)||g.from==e&&"bookmark"==h.type&&(!f||g.marker.insertLeft))q=null==g.from||(h.inclusiveLeft?g.from<=e:g.from<e),(l||(l=[])).push(new rc(h,q?null:g.from-e,null==g.to?null:g.to-e));e=1==b.text.length;f=Pa(b.text).length+
(e?a:0);if(c)for(d=0;d<c.length;++d)if(m=c[d],null==m.to)(g=Uf(l,m.marker),g)?e&&(m.to=null==g.to?null:g.to+f):m.to=a;if(l)for(d=0;d<l.length;++d)m=l[d],null!=m.to&&(m.to+=f),null==m.from?(g=Uf(c,m.marker),g||(m.from=f,e&&(c||(c=[])).push(m))):(m.from+=f,e&&(c||(c=[])).push(m));c&&(c=mh(c));l&&l!=c&&(l=mh(l));a=[c];if(!e){b=b.text.length-2;var n;if(0<b&&c)for(d=0;d<c.length;++d)null==c[d].to&&(n||(n=[])).push(new rc(c[d].marker,null,null));for(d=0;d<b;++d)a.push(n);a.push(l)}return a}function mh(a){for(var b=
0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function ne(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Sd(c[d]));c=e}else c=null;a=Gg(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(d=c[b],e=a[b],d&&e){var f=0;a:for(;f<e.length;++f){for(var g=e[f],m=0;m<d.length;++m)if(d[m].marker==g.marker)continue a;d.push(g)}}else e&&(c[b]=e);return c}function Ek(a,b,c){var d=null;a.iter(b.line,
c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Vb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>va(g.to,e.from)||0<va(g.from,e.to))){var m=[f,1],h=va(g.from,e.from),q=va(g.to,e.to);(0>h||!c.inclusiveLeft&&!h)&&m.push({from:g.from,to:e.from});(0<q||!c.inclusiveRight&&!q)&&m.push({from:e.to,to:g.to});a.splice.apply(a,
m);f+=m.length-1}}}return a}function li(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function nj(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function mi(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;c=a.find();var d=b.find(),e=va(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=va(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function sf(a,
b){a=ve&&a.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=a[d],c.marker.collapsed&&null==(b?c.from:c.to)&&(!e||0>mi(e,c.marker)))var e=c.marker;return e}function pj(a,b,c,d,e){a=ma(a,b);if(a=ve&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),m=va(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),h=va(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=m&&0>=h||0>=m&&0<=h)&&(0>=m&&(0<va(g.to,c)||f.marker.inclusiveRight&&
e.inclusiveLeft)||0<=m&&(0>va(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function Qd(a){for(var b;b=sf(a,!0);)a=b.find(-1,!0).line;return a}function th(a,b){a=ma(a,b);var c=Qd(a);return a==c?b:Sa(c)}function tf(a,b){if(b>a.lastLine())return b;var c=ma(a,b);if(!se(a,c))return b;for(;a=sf(c,!1);)c=a.find(1,!0).line;return Sa(c)+1}function se(a,b){var c=ve&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&
d.marker.inclusiveLeft&&oh(a,b,d)))return!0}function oh(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),oh(a,b.line,Uf(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&oh(a,b,d))return!0}function uf(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;
if(!xe(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");tc(b.display.measure,ha("div",[a.node],null,c))}return a.height=a.node.offsetHeight}function ph(a,b,c,d){var e=new Hf(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);bd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),
0,e);e.line=b;f&&!se(a,b)&&(c=Yc(b)<a.scrollTop,Rd(b,b.height+uf(e)),c&&ad(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function lj(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function qj(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=e.innerMode(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}
function Kg(a,b,c,d){for(var f=0;10>f;f++){d&&(d[0]=e.innerMode(a,c).mode);var g=a.token(b,c);if(b.pos>b.start)return g}throw Error("Mode "+a.name+" failed to advance stream.");}function jj(a,b,c,d){function e(a){return{start:q.start,end:q.pos,string:q.current(),type:l||null,state:a?Ff(f.mode,h):h}}var f=a.doc,g=f.mode;b=fa(f,b);var m=ma(f,b.line),h=Ac(a,b.line,c),q=new Wg(m.text,a.options.tabSize),k;for(d&&(k=[]);(d||q.pos<b.ch)&&!q.eol();){q.start=q.pos;var l=Kg(g,q,h);d&&k.push(e(!0))}return d?
k:e()}function mj(a,b,c,d,e,f,g){var m=c.flattenSpans;null==m&&(m=a.options.flattenSpans);var h=0,q=null,k=new Wg(b,a.options.tabSize),l=a.options.addModeClass&&[null];for(""==b&&lj(qj(c,d),f);!k.eol();){if(k.pos>a.options.maxHighlightLength){m=!1;g&&rh(a,b,d,k.pos);k.pos=b.length;var n=null}else n=lj(Kg(c,k,d,l),f);if(l){var G=l[0].name;G&&(n="m-"+(n?G+" "+n:G))}if(!m||q!=n){for(;h<k.start;)h=Math.min(k.start,h+5E4),e(h,q);q=n}k.start=k.pos}for(;h<k.pos;)a=Math.min(k.pos,h+5E4),e(a,q),h=a}function nh(a,
b,c,d){var e=[a.state.modeGen],f={};mj(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],m=1,h=0;mj(a,b.text,g.mode,!0,function(a,b){for(var c=m;h<a;){var d=e[m];d>a&&e.splice(m,1,a,e[m+1],d);m+=2;h=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,m-c,a,"cm-overlay "+b),m=c+2;else for(;c<m;c+=2)a=e[c+1],e[c+1]=(a?a+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function sh(a,b,c){if(!b.styles||b.styles[0]!=
a.state.modeGen){var d=nh(a,b,b.stateAfter=Ac(a,Sa(b)));b.styles=d.styles;d.classes?b.styleClasses=d.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function rh(a,b,c,d){var e=a.doc.mode,f=new Wg(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&qj(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Kg(e,f,c),f.start=f.pos}function Lg(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?If:xi;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function ni(a,
b){var c=ha("span",null,null,Sb?"padding-right: .1px":null);c={pre:ha("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(Ha||Sb)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=kj;if(null!=Xg)var g=Xg;else{g=tc(a.display.measure,document.createTextNode("A\u062eA"));var m=Xe(g,0,1).getBoundingClientRect();g=m&&m.left!=m.right?Xg=3>Xe(g,1,2).getBoundingClientRect().right-m.right:!1}g&&(f=wd(e))&&
(c.addToken=Gk(c.addToken,f));c.map=[];var h=b!=a.display.externalMeasured&&Sa(e);a:{var q=m=g=void 0,k=void 0,l=void 0,n=void 0,G=void 0,p=c;h=sh(a,e,h);var I=e.markedSpans,t=e.text,r=0;if(I){var V=t.length,u=0;B=1;for(var A="",w=0;;){if(w==u){l=k=q=m=n="";g=null;w=Infinity;for(var z=[],F=0;F<I.length;++F){var M=I[F],x=M.marker;"bookmark"==x.type&&M.from==u&&x.widgetNode?z.push(x):M.from<=u&&(null==M.to||M.to>u||x.collapsed&&M.to==u&&M.from==u)?(null!=M.to&&M.to!=u&&w>M.to&&(w=M.to,k=""),x.className&&
(l+=" "+x.className),x.css&&(n=x.css),x.startStyle&&M.from==u&&(q+=" "+x.startStyle),x.endStyle&&M.to==w&&(k+=" "+x.endStyle),x.title&&!m&&(m=x.title),x.collapsed&&(!g||0>mi(g.marker,x))&&(g=M)):M.from>u&&w>M.from&&(w=M.from)}if(g&&(g.from||0)==u){vf(p,(null==g.to?V+1:g.to)-u,g.marker,null==g.from);if(null==g.to)break a;g.to==u&&(g=!1)}if(!g&&z.length)for(F=0;F<z.length;++F)vf(p,0,z[F])}if(u>=V)break;for(z=Math.min(V,w);;){if(A){F=u+A.length;g||(M=F>z?A.slice(0,z-u):A,p.addToken(p,M,G?G+l:l,q,u+M.length==
w?k:"",m,n));if(F>=z){A=A.slice(z-u);u=z;break}u=F;q=""}A=t.slice(r,r=h[B++]);G=Lg(h[B++],p.cm.options)}}}else for(var B=1;B<h.length;B+=2)p.addToken(p,t.slice(r,r=h[B]),Lg(h[B+1],p.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Oh(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Oh(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(Nb(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||
(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Sb&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");qb(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Oh(c.pre.className,c.textClass||""));return c}function kj(a,b,c,d,e,f,g){if(b){var m=a.splitSpaces?b.replace(/ {3,}/g,Fk):b,h=a.cm.state.specialChars,q=!1;if(h.test(b)){p=document.createDocumentFragment();for(var k=0;;){h.lastIndex=k;var l=h.exec(b),n=l?l.index-
k:b.length-k;if(n){var G=document.createTextNode(m.slice(k,k+n));Ha&&9>Wa?p.appendChild(ha("span",[G])):p.appendChild(G);a.map.push(a.pos,a.pos+n,G);a.col+=n;a.pos+=n}if(!l)break;k+=n+1;"\t"==l[0]?(G=a.cm.options.tabSize,l=G-a.col%G,G=p.appendChild(ha("span",td(l),"cm-tab")),G.setAttribute("role","presentation"),G.setAttribute("cm-text","\t"),a.col+=l):("\r"==l[0]||"\n"==l[0]?(G=p.appendChild(ha("span","\r"==l[0]?"\u240d":"\u2424","cm-invalidchar")),G.setAttribute("cm-text",l[0])):(G=a.cm.options.specialCharPlaceholder(l[0]),
G.setAttribute("cm-text",l[0]),Ha&&9>Wa?p.appendChild(ha("span",[G])):p.appendChild(G)),a.col+=1);a.map.push(a.pos,a.pos+1,G);a.pos++}}else{a.col+=b.length;var p=document.createTextNode(m);a.map.push(a.pos,a.pos+b.length,p);Ha&&9>Wa&&(q=!0);a.pos+=b.length}if(c||d||e||q||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=ha("span",[p],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(p)}}function Fk(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}function Gk(a,b){return function(c,
d,e,f,g,m,h){e=e?e+" cm-force-border":"cm-force-border";for(var q=c.pos,k=q+d.length;;){for(var l=0;l<b.length;l++){var n=b[l];if(n.to>q&&n.from<=q)break}if(n.to>=k)return a(c,d,e,f,g,m,h);a(c,d.slice(0,n.to-q),e,f,null,m,h);f=null;d=d.slice(n.to-q);q=n.to}}}function vf(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),
a.content.appendChild(e));a.pos+=b}function Mc(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Pa(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function uh(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);li(a);nj(a,e);c=d?d(a):1;c!=a.height&&Rd(a,c);hb(a,"change",a,b)}function f(a,b){for(var e=[];a<b;++a)e.push(new id(h[a],c?c[a]:null,d));return e}var g=b.from,m=b.to,h=b.text,q=ma(a,g.line),k=ma(a,m.line),l=Pa(h),n=c?c[h.length-
1]:null,G=m.line-g.line;if(b.full)a.insert(0,f(0,h.length)),a.remove(h.length,a.size-h.length);else if(Mc(a,b)){var p=f(0,h.length-1);e(k,k.text,n);G&&a.remove(g.line,G);p.length&&a.insert(g.line,p)}else q==k?1==h.length?e(q,q.text.slice(0,g.ch)+l+q.text.slice(m.ch),n):(p=f(1,h.length-1),p.push(new id(l+q.text.slice(m.ch),n,d)),e(q,q.text.slice(0,g.ch)+h[0],c?c[0]:null),a.insert(g.line+1,p)):1==h.length?(e(q,q.text.slice(0,g.ch)+h[0]+k.text.slice(m.ch),c?c[0]:null),a.remove(g.line+1,G)):(e(q,q.text.slice(0,
g.ch)+h[0],c?c[0]:null),e(k,l+k.text.slice(m.ch),n),p=f(1,h.length-1),1<G&&a.remove(g.line+1,G-1),a.insert(g.line+1,p));hb(a,"change",a,b)}function Wf(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function wf(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize();c+=e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Oe(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var m=
a.linked[g];if(m.doc!=e){var h=f&&m.sharedHist;if(!c||h)b(m.doc,h),d(m.doc,a,h)}}}d(a,null,!0)}function oi(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;h(a);c(a);a.options.lineWrapping||p(a);a.options.mode=b.modeOption;Fa(a)}function ma(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function Bc(a,b,c){var d=
[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Mg(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function Rd(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function Sa(a){if(null==a.parent)return null;var b=a.parent;a=Vb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function ud(a,b){var c=a.first;
a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Yc(a){a=Qd(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function wd(a){var b=a.order;null==b&&(b=a.order=xj(a.text));
return b}function xf(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function yf(a,b){var c={from:la(b.from),to:fd(b),text:Bc(a,b.from,b.to)};Zf(a,c,b.from.line,b.to.line+1);Oe(a,function(a){Zf(a,c,b.from.line,b.to.line+1)},!0);return c}function qh(a){for(;a.length;)if(Pa(a).ranges)a.pop();else break}function Me(a,b,c,d){var e=a.history;e.undone.length=
0;var f=+new Date,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0))){if(e.lastOp==d){qh(e.done);var m=Pa(e.done)}else e.done.length&&!Pa(e.done).ranges?m=Pa(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),m=Pa(e.done)):m=void 0;g=m}if(g){var h=Pa(m.changes);0==va(b.from,b.to)&&0==va(b.from,h.to)?h.to=fd(b):m.changes.push(yf(a,b))}else for((m=Pa(e.done))&&m.ranges||Wc(a.sel,
e.done),m={changes:[yf(a,b)],generation:e.generation},e.done.push(m);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;h||qb(a,"historyAdded")}function Wc(a,b){var c=Pa(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Zf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||
(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function Sd(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Td(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?gb.prototype.deepCopy.call(f):f);else{f=f.changes;var g=[];e.push({changes:g});for(var m=0;m<f.length;++m){var h=f[m],q;g.push({from:h.from,to:h.to,text:h.text});if(b)for(var k in h)(q=k.match(/^spans_(\d+)$/))&&-1<
Vb(b,Number(q[1]))&&(Pa(g)[k]=h[k],delete h[k])}}}return e}function pb(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function pi(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var m=0;m<f.ranges.length;m++)pb(f.ranges[m].anchor,b,c,d),pb(f.ranges[m].head,b,c,d)}else{for(m=0;m<f.changes.length;++m){var h=f.changes[m];if(c<h.from.line)h.from=P(h.from.line+d,h.from.ch),h.to=P(h.to.line+d,h.to.ch);else if(b<=h.to.line){g=!1;
break}}g||(a.splice(0,e+1),e=0)}}}function ij(a,b){var c=b.from.line,d=b.to.line;b=b.text.length-(d-c)-1;pi(a.done,c,d,b);pi(a.undone,c,d,b)}function qi(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Ne(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));dd&&a.ctrlKey&&1==b&&(b=3);return b}function hb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);if(mc)var f=
mc.delayedCallbacks;else $e?f=$e:(f=$e=[],setTimeout(Hk,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function Hk(){var a=$e;$e=null;for(var b=0;b<a.length;++b)a[b]()}function vd(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});qb(a,c||b.type,a,b);return qi(b)||b.codemirrorIgnore}function Ig(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==Vb(a,b[c])&&
a.push(b[c])}}function Lc(a,b){return(a=a._handlers&&a._handlers[b])&&0<a.length}function sd(a){a.prototype.on=function(a,b){qa(this,a,b)};a.prototype.off=function(a,b){xc(this,a,b)}}function of(){this.id=null}function hj(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function td(a){for(;Yg.length<=a;)Yg.push(Pa(Yg)+" ");return Yg[a]}function Pa(a){return a[a.length-1]}function Vb(a,
b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function pf(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function qf(){}function rf(a,b){Object.create?a=Object.create(a):(qf.prototype=a,a=new qf);b&&Xc(b,a);return a}function Xc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Xf(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Yf(a,b){return b?-1<b.source.indexOf("\\w")&&
yi(a)?!0:b.test(a):yi(a)}function oj(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Jg(a){return 768<=a.charCodeAt(0)&&yj.test(a)}function ha(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function qe(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function tc(a,b){return qe(a).appendChild(b)}
function Pd(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function re(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function Oh(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)a[c]&&!re(a[c]).test(b)&&(b+=" "+a[c]);return b}function zj(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function si(){var a;qa(window,"resize",function(){null==
a&&(a=setTimeout(function(){a=null;zj(Ke)},100))});qa(window,"blur",function(){zj(Yd)})}function Nb(a){if(null==kg){var b=ha("span","\u200b");tc(a,ha("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(kg=1>=b.offsetWidth&&2<b.offsetHeight&&!(Ha&&8>Wa))}a=kg?ha("span","\u200b"):ha("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function ye(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=
a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Hh(a){return a.level%2?a.to:a.from}function Ab(a){return a.level%2?a.from:a.to}function Rg(a){return(a=wd(a))?Hh(a[0]):0}function Sg(a){var b=wd(a);return b?Ab(Pa(b)):a.text.length}function be(a,b){var c=ma(a.doc,b);a=Qd(c);a!=c&&(b=Sa(a));a=(c=wd(a))?c[0].level%2?Sg(a):Rg(a):0;return P(b,a)}function yc(a,b){var c=be(a,b.line);a=ma(a.doc,c.line);var d=wd(a);return d&&
0!=d[0].level?c:(a=Math.max(0,a.text.search(/\S/)),P(c.line,b.line==c.line&&b.ch<=a&&b.ch?0:a))}function we(a,b){dg=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{b=e.level;var f=a[d].level;a=a[0].level;a=b==a?!0:f==a?!1:b<f;if(a)return e.from!=e.to&&(dg=d),c;e.from!=e.to&&(dg=c);break}}return d}function cc(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Jg(a.text.charAt(b)));return b}function Tg(a,b,c,d){var e=wd(a);if(!e)return wj(a,
b,c,d);var f=we(e,b),g=e[f];for(b=cc(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(we(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?cc(a,g.to,-1,d):cc(a,g.from,1,d)}}function wj(a,b,c,d){b+=c;if(d)for(;0<b&&Jg(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var We=/gecko\/\d/i.test(navigator.userAgent),Aj=/MSIE \d/.test(navigator.userAgent),zi=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
Ha=Aj||zi,Wa=Ha&&(Aj?document.documentMode||6:zi[1]),Sb=/WebKit\//.test(navigator.userAgent),Mk=Sb&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Zg=/Chrome\//.test(navigator.userAgent),Hc=/Opera\//.test(navigator.userAgent),db=/Apple Computer/.test(navigator.vendor),af=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ih=/PhantomJS/.test(navigator.userAgent),Zd=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cg=Zd||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
dd=Zd||/Mac/.test(navigator.platform),Ai=/win/i.test(navigator.platform),dc=Hc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);dc&&(dc=Number(dc[1]));dc&&15<=dc&&(Hc=!1,Sb=!0);var lg=dd&&(Mk||Hc&&(null==dc||12.11>dc)),Jh=We||Ha&&9<=Wa,nc=!1,ve=!1;u.prototype=Xc({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-
a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?
d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=dd&&!af?"12px":"18px";var a=this,b=function(b){(b.target||b.srcElement)!=a.vert&&(b.target||b.srcElement)!=a.horiz&&Ua(a.cm,Bf)(b)};qa(this.vert,"mousedown",b);qa(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},
u.prototype);A.prototype=Xc({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},A.prototype);e.scrollbarModel={"native":u,"null":A};F.prototype.signal=function(a,b){Lc(a,b)&&this.events.push(arguments)};F.prototype.finish=function(){for(var a=0;a<this.events.length;a++)qb.apply(null,this.events[a])};var P=e.Pos=function(a,b){if(!(this instanceof P))return new P(a,b);this.line=a;this.ch=b},va=e.cmpPos=function(a,b){return a.line-b.line||
a.ch-b.ch},Gc=null;Ca.prototype=Xc({init:function(a){function b(a){if(d.somethingSelected())Gc=d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=Gc.join("\n"),ce(f));else if(d.options.lineWiseCopyCut){var b=Na(d);Gc=b.text;"cut"==a.type?d.setSelections(b.ranges,null,Rc):(c.prevInput="",f.value=b.text.join("\n"),ce(f))}else return;"cut"==a.type&&(d.state.cutIncoming=!0)}var c=this,d=this.cm,e=this.wrapper=R(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,
a.wrapper.firstChild);Zd&&(f.style.width="0px");qa(f,"input",function(){Ha&&9<=Wa&&c.hasSelection&&(c.hasSelection=null);c.poll()});qa(f,"paste",function(a){if(Ta(a,d))return!0;d.state.pasteIncoming=!0;c.fastPoll()});qa(f,"cut",b);qa(f,"copy",b);qa(a.scroller,"paste",function(b){Jb(a,b)||(d.state.pasteIncoming=!0,c.focus())});qa(a.lineSpace,"selectstart",function(b){Jb(a,b)||Mb(b)});qa(f,"compositionstart",function(){var a=d.getCursor("from");c.composing={start:a,range:d.markText(a,d.getCursor("to"),
{className:"CodeMirror-composing"})}});qa(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=vh(a);if(a.options.moveInputWithCursor){a=wc(a,c.sel.primary().head,"div");c=b.wrapper.getBoundingClientRect();var e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},
showSelection:function(a){var b=this.cm.display;tc(b.cursorDiv,a.cursors);tc(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b=this.cm,c=b.doc;if(b.somethingSelected()){this.prevInput="";var d=c.sel.primary();var e=(d=Ye&&(100<d.to().line-d.from().line||1E3<(e=b.getSelection()).length))?"-":e||b.getSelection();this.textarea.value=e;b.state.focused&&ce(this.textarea);Ha&&9<=Wa&&
(this.hasSelection=e)}else a||(this.prevInput=this.textarea.value="",Ha&&9<=Wa&&(this.hasSelection=null));this.inaccurateSelection=d}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!cg||Pd()!=this.textarea))try{this.textarea.focus()}catch(V){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=
this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||Bj(b)&&!c&&!this.composing||ya(a)||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;
if(Ha&&9<=Wa&&this.hasSelection===d||dd&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}var f=0;for(e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;fb(a,function(){Kb(a,d.slice(f),c.length-f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&
(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){Ha&&9<=Wa&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=
b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=q;Ha&&9>Wa&&f.scrollbars.setScrollTop(f.scroller.scrollTop=h);if(null!=g.selectionStart){(!Ha||Ha&&9>Wa)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?Ua(e,Gf.selectAll)(e):10>a++?f.detectingSelectAll=setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,
g=d.textarea,m=tb(e,a),h=f.scroller.scrollTop;if(m&&!Hc){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(m)&&Ua(e,Ka)(e.doc,Ea(m),Rc);var q=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(Ha?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
if(Sb)var k=window.scrollY;f.input.focus();Sb&&window.scrollTo(null,k);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);Ha&&9<=Wa&&b();if(Jh){eg(a);var l=function(){xc(window,"mouseup",l);setTimeout(c,20)};qa(window,"mouseup",l)}else setTimeout(c,50)}},setUneditable:qf,needsContentAttribute:!1},Ca.prototype);Da.prototype=Xc({init:function(a){function b(a){if(d.somethingSelected())Gc=d.getSelections(),
"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=Na(d);Gc=b.text;"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,Rc);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData&&!Zd)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",Gc.join("\n"));else{var c=R();a=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild);a.value=Gc.join("\n");var e=document.activeElement;ce(a);setTimeout(function(){d.display.lineSpace.removeChild(c);
e.focus()},50)}}var c=this,d=c.cm;a=c.div=a.lineDiv;a.contentEditable="true";Ra(a);qa(a,"paste",function(a){Ta(a,d)});qa(a,"compositionstart",function(a){a=a.data;c.composing={sel:d.doc.sel,data:a,startData:a};if(a){var b=d.doc.sel.primary(),e=d.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<e&&e<=b.head.ch&&(c.composing.sel=Ea(P(b.head.line,e),P(b.head.line,e+a.length)))}});qa(a,"compositionupdate",function(a){c.composing.data=a.data});qa(a,"compositionend",function(a){var b=c.composing;
b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b);c.composing==b&&(c.composing=null)},50))});qa(a,"touchstart",function(){c.forceCompositionEnd()});qa(a,"input",function(){c.composing||c.pollContent()||fb(c.cm,function(){Fa(d)})});qa(a,"copy",b);qa(a,"cut",b)},prepareSelection:function(){var a=vh(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),
this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=Ya(this.cm,a.anchorNode,a.anchorOffset),d=Ya(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=va(Qa(c,d),b.from())||0!=va(Aa(c,d),b.to()))if(c=xb(this.cm,b.from()),d=xb(this.cm,b.to()),c||d){var e=this.cm.display.view;b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-
3]}):c={node:e[0].measure.map[2],offset:0};try{var f=Xe(c.node,c.offset,d.offset,d.node)}catch(nm){}f&&(a.removeAllRanges(),a.addRange(f),b&&null==a.anchorNode?a.addRange(b):We&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){tc(this.cm.display.cursorDiv,
a.cursors);tc(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return xe(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},
getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():fb(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=
this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=Ya(b,a.anchorNode,a.anchorOffset),d=Ya(b,a.focusNode,a.focusOffset);c&&d&&fb(b,function(){Ka(b.doc,Ea(c,d),Rc);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from();c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-
1)return!1;var e;d.line==b.viewFrom||0==(e=Od(a,d.line))?(d=Sa(b.view[0].line),e=b.view[0].node):(d=Sa(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=Od(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=Sa(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(gc(a,e,b,d,c));for(e=Bc(a.doc,P(d,0),P(c,ma(a.doc,c).text.length));1<b.length&&1<e.length;)if(Pa(b)==Pa(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),d++;else break;var g=0;f=0;for(var m=
b[0],h=e[0],q=Math.min(m.length,h.length);g<q&&m.charCodeAt(g)==h.charCodeAt(g);)++g;m=Pa(b);h=Pa(e);for(q=Math.min(m.length-(1==b.length?g:0),h.length-(1==e.length?g:0));f<q&&m.charCodeAt(m.length-f-1)==h.charCodeAt(h.length-f-1);)++f;b[b.length-1]=m.slice(0,m.length-f);b[0]=b[0].slice(g);d=P(d,g);c=P(c,e.length?Pa(e).length-f:0);if(1<b.length||b[0]||va(d,c))return Cd(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&
!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&Ua(this.cm,Kb)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();Ua(this.cm,Kb)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:qf,resetPosition:qf,needsContentAttribute:!0},Da.prototype);e.inputStyles=
{textarea:Ca,contenteditable:Da};gb.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=va(c.anchor,d.anchor)||0!=va(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new O(la(this.ranges[b].anchor),la(this.ranges[b].head));return new gb(a,this.primIndex)},
somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=va(b,d.from())&&0>=va(a,d.to()))return c}return-1}};O.prototype={from:function(){return Qa(this.anchor,this.head)},to:function(){return Aa(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Gh={left:0,right:0,top:0,bottom:0},bc,
mc=null,uj=0,Kh,gg,fg=0,gd=0,Bb=null;Ha?Bb=-.53:We?Bb=15:Zg?Bb=-.7:db&&(Bb=-1/3);var ze=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};e.wheelEventPixels=function(a){a=ze(a);a.x*=Bb;a.y*=Bb;return a};var Vg=new of,ig=null,fd=e.changeEnd=function(a){return a.text?P(a.from.line+a.text.length-1,Pa(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};
e.prototype={constructor:e,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ve.hasOwnProperty(a)&&Ua(this,Ve[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](fc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:sb(function(a,
b){var c=a.token?a:e.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;Fa(this)}),removeOverlay:sb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Fa(this);break}}}),indentLine:sb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?
"smart":"prev":b?"add":"subtract");Lb(this.doc,a)&&Qc(this,a,b,c)}),indentSelection:sb(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Qc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&$b(this));else{var f=e.from();e=e.to();var g=Math.max(c,f.line);c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1;for(e=g;e<c;++e)Qc(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&$a(this.doc,d,new O(f,e[d].to()),
Rc)}}}),getTokenAt:function(a,b){return jj(this,a,b)},getLineTokens:function(a,b){return jj(this,P(a),b,!0)},getTokenTypeAt:function(a){a=fa(this.doc,a);var b=sh(this,ma(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?e.innerMode(b,this.getTokenAt(a).state).mode:
b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Gb.hasOwnProperty(b))return c;var d=Gb[b];a=this.getModeAt(a);if("string"==typeof a[b])d[a[b]]&&c.push(d[a[b]]);else if(a[b])for(var e=0;e<a[b].length;e++){var f=d[a[b][e]];f&&c.push(f)}else a.helperType&&d[a.helperType]?c.push(d[a.helperType]):d[a.name]&&c.push(d[a.name]);for(e=0;e<d._global.length;e++)b=d._global[e],b.pred(a,this)&&-1==Vb(c,b.val)&&c.push(b.val);return c},getStateAfter:function(a,b){var c=
this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Ac(this,a+1,b)},cursorCoords:function(a,b){var c=this.doc.sel.primary();a=null==a?c.head:"object"==typeof a?fa(this.doc,a):a?c.from():c.to();return wc(this,a,b||"page")},charCoords:function(a,b){return Zc(this,fa(this.doc,a),b||"page")},coordsChar:function(a,b){a=yd(this,a,b||"page");return Hg(this,a.left,a.top)},lineAtHeight:function(a,b){a=yd(this,{top:a,left:0},b||"page").top;return ud(this.doc,a+this.display.viewOffset)},
heightAtLine:function(a,b){var c=!1;if("number"==typeof a){var d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);a=ma(this.doc,a)}return K(this,a,{top:0,left:0},b||"page").top+(c?this.doc.height-Yc(a):0)},defaultTextHeight:function(){return rb(this.display)},defaultCharWidth:function(){return rd(this.display)},setGutterMarker:sb(function(a,b,c){return bd(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&oj(d)&&(a.gutterMarkers=
null);return!0})}),clearGutter:sb(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Wb(b,d,"gutter"),oj(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!Lb(this.doc,a))return null;var b=a;a=ma(this.doc,a);if(!a)return null}else if(b=Sa(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,
widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=wc(this,fa(this.doc,a));var g=a.bottom,m=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var h=Math.max(f.wrapper.clientHeight,this.doc.height),q=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==
d||a.bottom+b.offsetHeight>h)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=h&&(g=a.bottom);m+b.offsetWidth>q&&(m=q-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(m=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?m=0:"middle"==e&&(m=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=m+"px");c&&(a=Ue(this,m,g,m+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&cb(this,a.scrollTop),null!=a.scrollLeft&&zb(this,a.scrollLeft))},triggerOnKeyDown:sb($f),
triggerOnKeyPress:sb(La),triggerOnKeyUp:T,execCommand:function(a){if(Gf.hasOwnProperty(a))return Gf[a].call(null,this)},triggerElectric:sb(function(a){Za(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=fa(this.doc,a);f<b&&(a=Df(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:sb(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Df(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},mg)}),deleteH:sb(function(a,
b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):cd(this,function(d){var e=Df(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=fa(this.doc,a);f<b&&(a=wc(this,a,"div"),null==d?d=a.left:a.left=d,a=qc(this,a,e,c),!a.hitSide);++f);return a},moveV:sb(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>
a?g.from():g.to();var m=wc(c,g.head,"div");null!=g.goalColumn&&(m.left=g.goalColumn);e.push(m.left);var h=qc(c,m,a,b);"page"==b&&g==d.sel.primary()&&ad(c,null,Zc(c,h,"div").top-m.top);return h},mg);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=ma(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;var f=b.charAt(c);for(f=Yf(f,e)?function(a){return Yf(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:
function(a){return!/\s/.test(a)&&!Yf(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new O(P(a.line,c),P(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?Ef(this.display.cursorDiv,"CodeMirror-overwrite"):ue(this.display.cursorDiv,"CodeMirror-overwrite"),qb(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Pd()},scrollTo:sb(function(a,b){null==
a&&null==b||Dd(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-sc(this)-this.display.barHeight,width:a.scrollWidth-sc(this)-this.display.barWidth,clientHeight:Nd(this),clientWidth:Tc(this)}},scrollIntoView:sb(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:P(a,0),
to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(Dd(this),this.curOp.scrollToPos=a):(a=Ue(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin),this.scrollTo(a.scrollLeft,a.scrollTop))}),setSize:sb(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&
(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&Pe(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Wb(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;qb(d,"refresh",this)}),operation:function(a){return fb(this,a)},refresh:sb(function(){var a=this.display.cachedTextHeight;Fa(this);this.curOp.forceUpdate=!0;hc(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);l(this);(null==a||
.5<Math.abs(a-rb(this.display)))&&h(this);qb(this,"refresh",this)}),swapDoc:sb(function(a){var b=this.doc;b.cm=null;oi(this,a);hc(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;hb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
sd(e);var ri=e.defaults={},Ve=e.optionHandlers={},Qg=e.Init={toString:function(){return"CodeMirror.Init"}};pa("value","",function(a,b){a.setValue(b)},!0);pa("mode",null,function(a,b){a.doc.modeOption=b;c(a)},!0);pa("indentUnit",2,c,!0);pa("indentWithTabs",!1);pa("smartIndent",!0);pa("tabSize",4,function(a){b(a);hc(a);Fa(a)},!0);pa("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;
c.push(P(d,f))}d++});for(var e=c.length-1;0<=e;e--)Cd(a.doc,b,c[e],P(c[e].line,c[e].ch+b.length))}});pa("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=e.Init&&a.refresh()});pa("specialCharPlaceholder",function(a){var b=ha("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);pa("electricChars",
!0);pa("inputStyle",cg?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);pa("rtlMoveVisually",!Ai);pa("wholeLineUpdateBefore",!0);pa("theme","default",function(a){d(a);g(a)},!0);pa("keyMap","default",function(a,b,c){b=fc(b);(c=c!=e.Init&&fc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});pa("extraKeys",null);pa("lineWrapping",!1,function(a){a.options.lineWrapping?(Ef(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=
"",a.display.sizerWidth=null):(ue(a.display.wrapper,"CodeMirror-wrap"),p(a));h(a);Fa(a);hc(a);setTimeout(function(){z(a)},100)},!0);pa("gutters",[],function(a){r(a.options);g(a)},!0);pa("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?H(a.display)+"px":"0";a.refresh()},!0);pa("coverGutterNextToScrollbar",!1,function(a){z(a)},!0);pa("scrollbarStyle","native",function(a){t(a);z(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);
pa("lineNumbers",!1,function(a){r(a.options);g(a)},!0);pa("firstLineNumber",1,g,!0);pa("lineNumberFormatter",function(a){return a},g,!0);pa("showCursorWhenSelecting",!1,Cc,!0);pa("resetSelectionOnContextMenu",!0);pa("lineWiseCopyCut",!0);pa("readOnly",!1,function(a,b){"nocursor"==b?(Yd(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});pa("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);pa("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=
e.Init)&&(c=a.display.dragFunctions,b=b?qa:xc,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.simple),b(a.display.scroller,"dragover",c.simple),b(a.display.scroller,"drop",c.drop))});pa("cursorBlinkRate",530);pa("cursorScrollMargin",0);pa("cursorHeight",1,Cc,!0);pa("singleCursorHeightPerLine",!0,Cc,!0);pa("workTime",100);pa("workDelay",100);pa("flattenSpans",!0,b,!0);pa("addModeClass",!1,b,!0);pa("pollInterval",100);pa("undoDepth",200,function(a,b){a.doc.history.undoDepth=
b});pa("historyEventDelay",1250);pa("viewportMargin",10,function(a){a.refresh()},!0);pa("maxHighlightLength",1E4,b,!0);pa("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});pa("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});pa("autofocus",null);var Bi=e.modes={},ng=e.mimeModes={};e.defineMode=function(a,b){e.defaults.mode||"null"==a||(e.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));Bi[a]=b};e.defineMIME=
function(a,b){ng[a]=b};e.resolveMode=function(a){if("string"==typeof a&&ng.hasOwnProperty(a))a=ng[a];else if(a&&"string"==typeof a.name&&ng.hasOwnProperty(a.name)){var b=ng[a.name];"string"==typeof b&&(b={name:b});a=rf(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return e.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};e.getMode=function(a,b){b=e.resolveMode(b);var c=Bi[b.name];if(!c)return e.getMode(a,"text/plain");a=c(a,b);if(Jf.hasOwnProperty(b.name)){c=
Jf[b.name];for(var d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);if(b.modeProps)for(d in b.modeProps)a[d]=b.modeProps[d];return a};e.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});e.defineMIME("text/plain","null");var Jf=e.modeExtensions={};e.extendMode=function(a,b){a=Jf.hasOwnProperty(a)?Jf[a]:Jf[a]={};Xc(b,a)};e.defineExtension=function(a,b){e.prototype[a]=b};e.defineDocExtension=function(a,
b){lc.prototype[a]=b};e.defineOption=pa;var yh=[];e.defineInitHook=function(a){yh.push(a)};var Gb=e.helpers={};e.registerHelper=function(a,b,c){Gb.hasOwnProperty(a)||(Gb[a]=e[a]={_global:[]});Gb[a][b]=c};e.registerGlobalHelper=function(a,b,c,d){e.registerHelper(a,b,d);Gb[a]._global.push({pred:c,val:d})};var Ff=e.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);a={};for(var c in b){var d=b[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a},ti=e.startState=function(a,
b,c){return a.startState?a.startState(b,c):!0};e.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Gf=e.commands={selectAll:function(a){a.setSelection(P(a.firstLine(),0),P(a.lastLine()),Rc)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Rc)},killLine:function(a){cd(a,function(b){if(b.empty()){var c=ma(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?
{from:b.head,to:P(b.head.line+1,0)}:{from:b.head,to:P(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){cd(a,function(b){return{from:P(b.from().line,0),to:fa(a.doc,P(b.to().line+1,0))}})},delLineLeft:function(a){cd(a,function(a){return{from:P(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){cd(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){cd(a,function(b){var c=
a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(P(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(P(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return be(a,b.head.line)},{origin:"+move",bias:1})},
goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return yc(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=ma(a.doc,b);c=sf(d,!1);)d=c.find(1,!0).line,b=null;c=(c=wd(d))?c[0].level%2?Rg(d):Sg(d):d.text.length;return P(null==b?Sa(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},
"div")},mg)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},mg)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?yc(a,b.head):c},mg)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from();f=ed(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){fb(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=ma(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new P(e.line,e.ch-1)),0<e.ch)e=new P(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),P(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=ma(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
a.doc.lineSeparator()+g.charAt(g.length-1),P(e.line-1,g.length-1),P(e.line,1),"+transpose")}c.push(new O(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){fb(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);$b(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},hd=e.keyMap={};hd.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};hd.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};hd.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",
"Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};hd.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft",
"Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",
fallthrough:["basic","emacsy"]};hd["default"]=dd?hd.macDefault:hd.pcDefault;e.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=pf(c.split(" "),He),f=0;f<e.length;f++){if(f==e.length-1){var g=e.join(" ");var m=d}else g=e.slice(0,f+1).join(" "),m="...";var h=b[g];if(!h)b[g]=m;else if(h!=m)throw Error("Inconsistent bindings for "+g);}delete a[c]}}for(var q in b)a[q]=b[q];return a};var hg=e.lookupKey=
function(a,b,c,d){b=fc(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return hg(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=hg(a,b.fallthrough[e],c,d);if(f)return f}}},wi=e.isModifierKey=function(a){a="string"==typeof a?a:de[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},vj=e.keyName=function(a,b){if(Hc&&34==a.keyCode&&
a["char"])return!1;var c=de[a.keyCode],d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(lg?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(lg?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};e.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b=b?Xc(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=Pd();b.autofocus=
d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(qa(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form,g=f.submit;try{var m=f.submit=function(){c();f.submit=g;f.submit();f.submit=m}}catch(Ah){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(xc(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))}};a.style.display=
"none";var h=e(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);return h};var Wg=e.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Wg.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=
this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&
(this.lastColumnValue=ed(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?ed(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ed(this.string,null,this.tabSize)-(this.lineStart?ed(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==
b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var Nh=0,Ze=e.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++Nh};sd(Ze);Ze.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&xa(a);if(Lc(this,
"clear")){var c=this.find();c&&hb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Uf(f.markedSpans,this);a&&!this.collapsed?Wb(a,Sa(f),"text"):a&&(null!=g.to&&(d=Sa(f)),null!=g.from&&(c=Sa(f)));for(var m=f,h=void 0,q=f.markedSpans,k=g,l=0;l<q.length;++l)q[l]!=k&&(h||(h=[])).push(q[l]);m.markedSpans=h;null==g.from&&this.collapsed&&!se(this.doc,f)&&a&&Rd(f,rb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=Qd(this.lines[e]),
g=n(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Fa(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Vd(a.doc));a&&hb(a,"markerCleared",a,this);b&&Dc(a);this.parent&&this.parent.clear()}};Ze.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Uf(f.markedSpans,this);if(null!=
g.from&&(c=P(b?f:Sa(f),g.from),-1==a))return c;if(null!=g.to&&(d=P(b?f:Sa(f),g.to),1==a))return d}return c&&{from:c,to:d}};Ze.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&fb(c,function(){var d=a.line,e=Sa(a.line);if(e=Xa(c,e))Af(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;se(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=uf(b)-e)&&Rd(d,d.height+e))})};Ze.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=
this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Vb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ze.prototype.detachLine=function(a){this.lines.splice(Vb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};Nh=0;var jg=e.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};sd(jg);jg.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();hb(this,"clear")}};jg.prototype.find=function(a,b){return this.primary.find(a,b)};var Hf=e.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};sd(Hf);Hf.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=Sa(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=uf(this);Rd(c,Math.max(0,c.height-f));a&&
fb(a,function(){var b=-f;Yc(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&ad(a,null,b);Wb(a,d,"widget")})}};Hf.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=uf(this)-a;d&&(Rd(c,c.height+d),b&&fb(b,function(){b.curOp.forceUpdate=!0;Yc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&ad(b,null,d)}))};var id=e.Line=function(a,b,c){this.text=a;nj(this,b);this.height=c?c(this):1};sd(id);id.prototype.lineNo=function(){return Sa(this)};var xi={},If=
{};Wf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;li(f);hb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};
wf.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Wf))&&(a=[],this.collapse(a),this.children=[new Wf(a)],this.children[0].parent=this)},collapse:function(a){for(var b=
0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Wf(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=
a.children.splice(a.children.length-5,5);b=new wf(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Vb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new wf(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var Kf=0,lc=e.Doc=function(a,
b,c,d){if(!(this instanceof lc))return new lc(a,b,c,d);null==c&&(c=0);wf.call(this,[new Wf([new id("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=P(c,0);this.sel=Ea(c);this.history=new xf(null);this.id=++Kf;this.modeOption=b;this.lineSep=d;"string"==typeof a&&(a=this.splitLines(a));uh(this,{from:c,to:c,text:a});Ka(this,Ea(c),Rc)};lc.prototype=rf(wf.prototype,{constructor:lc,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):
this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Mg(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:kb(function(a){var b=P(this.first,0),c=this.first+this.size-1;jc(this,{from:b,to:P(c,ma(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);Ka(this,
Ea(b))}),replaceRange:function(a,b,c,d){b=fa(this,b);c=c?fa(this,c):b;Cd(this,a,b,c,d)},getRange:function(a,b,c){a=Bc(this,fa(this,a),fa(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Lb(this,a))return ma(this,a)},getLineNumber:function(a){return Sa(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=ma(this,a));return Qd(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},
lastLine:function(){return this.first+this.size-1},clipPos:function(a){return fa(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:kb(function(a,b,c){a=fa(this,"number"==typeof a?P(a,b||0):a);Ka(this,Ea(a,null),c)}),setSelection:kb(function(a,b,c){var d=fa(this,a);a=fa(this,
b||a);Ka(this,Ea(d,a),c)}),extendSelection:kb(function(a,b,c){mb(this,fa(this,a),b&&fa(this,b),c)}),extendSelections:kb(function(a,b){b=[];for(var c=0;c<a.length;c++)b[c]=fa(this,a[c]);Ia(this,b)}),extendSelectionsBy:kb(function(a,b){Ia(this,pf(this.sel.ranges,a),b)}),setSelections:kb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new O(fa(this,a[d].anchor),fa(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ka(this,v(e,b),c)}}),addSelection:kb(function(a,b,
c){var d=this.sel.ranges.slice(0);d.push(new O(fa(this,a),fa(this,b||a)));Ka(this,v(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Bc(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Bc(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=
0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:kb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=P(this.first,0);for(e=0;e<d.length;e++){var m=d[e];g=Vf(m.from,a,c);var h=Vf(fd(m),a,c);a=m.to;c=h;"around"==b?(m=this.sel.ranges[e],m=0>va(m.head,m.anchor),f[e]=new O(m?h:g,m?g:h)):f[e]=new O(g,g)}f=new gb(f,this.sel.primIndex)}b=
f;for(f=d.length-1;0<=f;f--)jc(this,d[f]);b?uc(this,b):this.cm&&$b(this.cm)}),undo:kb(function(){Te(this,"undo")}),redo:kb(function(){Te(this,"redo")}),undoSelection:kb(function(){Te(this,"undo",!0)}),redoSelection:kb(function(){Te(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,
redo:c}},clearHistory:function(){this.history=new xf(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Td(this.history.done),undone:Td(this.history.undone)}},setHistory:function(a){var b=this.history=new xf(this.history.maxGeneration);
b.done=Td(a.done.slice(0),null,!0);b.undone=Td(a.undone.slice(0),null,!0)},addLineClass:kb(function(a,b,c){return bd(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(re(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:kb(function(a,b,c){return bd(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":
"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(re(c));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:kb(function(a,b,c){return ph(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return pd(this,fa(this,a),fa(this,b),c,"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,
shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=fa(this,a);return pd(this,a,a,b,"bookmark")},findMarksAt:function(a){a=fa(this,a);var b=[],c=ma(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=fa(this,a);b=fa(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var m=f[g];e==a.line&&
a.ch>m.to||null==m.from&&e!=a.line||e==b.line&&m.from>b.ch||c&&!c(m.marker)||d.push(m.marker.parent||m.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return fa(this,P(c,b))},indexFromPos:function(a){a=fa(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;
this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new lc(Mg(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new lc(Mg(this,
b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=ra(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from);e=b.clipPos(e.to);va(f,e)&&(f=pd(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof e&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==
a){this.linked.splice(b,1);a.unlinkDoc(this);Tf(ra(this));break}if(a.history==this.history){var c=[a.id];Oe(a,function(a){c.push(a.id)},!0);a.history=new xf(null);a.history.done=Td(this.history.done,c);a.history.undone=Td(this.history.undone,c)}},iterLinkedDocs:function(a){Oe(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):bf(a)},lineSeparator:function(){return this.lineSep||"\n"}});lc.prototype.eachLine=
lc.prototype.iter;var Lf="iter insert remove copy getEditor constructor".split(" "),Mf;for(Mf in lc.prototype)lc.prototype.hasOwnProperty(Mf)&&0>Vb(Lf,Mf)&&(e.prototype[Mf]=function(a){return function(){return a.apply(this.doc,arguments)}}(lc.prototype[Mf]));sd(lc);var Mb=e.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Ph=e.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},eg=e.e_stop=function(a){Mb(a);Ph(a)},qa=e.on=function(a,
b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},xc=e.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},qb=e.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,
d)},$e=null,zh=30,Mh=e.Pass={toString:function(){return"CodeMirror.Pass"}},Rc={scroll:!1},Lh={origin:"*mouse"},mg={origin:"+move"};of.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var ed=e.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Yg=[""],ce=function(a){a.select()};Zd?ce=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:
Ha&&(ce=function(a){try{a.select()}catch(kc){}});var Cj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,yi=e.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||Cj.test(a))},yj=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
var Xe=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(wh){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var xe=e.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};Ha&&11>Wa&&(Pd=function(){try{return document.activeElement}catch(V){return document.body}});
var ue=e.rmClass=function(a,b){var c=a.className;if(b=re(b).exec(c)){var d=c.slice(b.index+b[0].length);a.className=c.slice(0,b.index)+(d?b[1]+d:"")}},Ef=e.addClass=function(a,b){var c=a.className;re(b).test(c)||(a.className+=(c?" ":"")+b)},xh=!1,vi=function(){if(Ha&&9>Wa)return!1;var a=ha("div");return"draggable"in a||"dragDrop"in a}(),kg,Xg,bf=e.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Bj=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(kc){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(lm){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ye=function(){var a=ha("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
ui=null,de={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",
63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=de;(function(){for(var a=0;10>a;a++)de[a+48]=de[a+96]=String(a);for(a=65;90>=a;a++)de[a]=String.fromCharCode(a);for(a=1;12>=a;a++)de[a+111]=de[a+63235]="F"+a})();var dg,xj=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1773>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(a-1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(m){if(!c.test(m))return!1;
for(var h=m.length,q=[],k=0,l;k<h;++k)q.push(a(m.charCodeAt(k)));k=0;for(var n="L";k<h;++k)l=q[k],"m"==l?q[k]=n:n=l;k=0;for(n="L";k<h;++k)l=q[k],"1"==l&&"r"==n?q[k]="n":e.test(l)&&(n=l,"r"==l&&(q[k]="R"));k=1;for(n=q[0];k<h-1;++k)l=q[k],"+"==l&&"1"==n&&"1"==q[k+1]?q[k]="1":","!=l||n!=q[k+1]||"1"!=n&&"n"!=n||(q[k]=n),n=l;for(k=0;k<h;++k)if(l=q[k],","==l)q[k]="N";else if("%"==l){for(n=k+1;n<h&&"%"==q[n];++n);var G=k&&"!"==q[k-1]||n<h&&"1"==q[n]?"1":"N";for(l=k;l<n;++l)q[l]=G;k=n-1}k=0;for(n="L";k<h;++k)l=
q[k],"L"==n&&"1"==l?q[k]="L":e.test(l)&&(n=l);for(k=0;k<h;++k)if(d.test(q[k])){for(n=k+1;n<h&&d.test(q[n]);++n);l="L"==(n<h?q[n]:"L");G="L"==(k?q[k-1]:"L")||l?"L":"R";for(l=k;l<n;++l)q[l]=G;k=n-1}n=[];var p;for(k=0;k<h;)if(f.test(q[k])){l=k;for(++k;k<h&&f.test(q[k]);++k);n.push(new b(0,l,k))}else{var I=k;G=n.length;for(++k;k<h&&"L"!=q[k];++k);for(l=I;l<k;)if(g.test(q[l])){I<l&&n.splice(G,0,new b(1,I,l));I=l;for(++l;l<k&&g.test(q[l]);++l);n.splice(G,0,new b(2,I,l));I=l}else++l;I<k&&n.splice(G,0,new b(1,
I,k))}1==n[0].level&&(p=m.match(/^\s+/))&&(n[0].from=p[0].length,n.unshift(new b(0,0,p[0].length)));1==Pa(n).level&&(p=m.match(/\s+$/))&&(Pa(n).to-=p[0].length,n.push(new b(0,h-p[0].length,h)));2==n[0].level&&n.unshift(new b(1,n[0].to,n[0].to));n[0].level!=Pa(n).level&&n.push(new b(n[0].level,h,h));return n}}();e.version="5.5.1";return e}();(function(e){e(CodeMirror)})(function(e){var f=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,c=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,b=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(a){if(a.getOption("disableInput"))return e.Pass;for(var h=a.listSelections(),d=[],g=0;g<h.length;g++){var k=h[g].head,l=a.getStateAfter(k.line),n=!1!==l.list,p=0!==l.quote,r=a.getLine(k.line);l=f.exec(r);if(!h[g].empty()||!n&&!p||!l){a.execCommand("newlineAndIndent");return}c.test(r)?(a.replaceRange("",
{line:k.line,ch:0},{line:k.line,ch:k.ch+1}),d[g]="\n"):(k=l[1],n=l[5],l=b.test(l[2])||0<=l[2].indexOf(">")?l[2]:parseInt(l[3],10)+1+l[4],d[g]="\n"+k+l+n)}a.replaceSelections(d)}});(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){var f={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(b,a){function h(a,b){function c(c){b.tokenize=c;return c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(k("atom","]]\x3e")):null:a.match("--")?c(k("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(l(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=
k("meta","?>"),"meta";m=a.eat("/")?"closeTag":"openTag";b.tokenize=d;return"tag bracket"}if("&"==e)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function d(a,b){var c=a.next();if(">"==c||"/"==c&&a.eat(">"))return b.tokenize=h,m=">"==c?"endTag":"selfcloseTag","tag bracket";if("="==c)return m="equals",null;if("<"==c)return b.tokenize=h,b.state=w,b.tagName=b.tagStart=
null,(a=b.tokenize(a,b))?a+" tag error":"tag error";if(/['"]/.test(c))return b.tokenize=g(c),b.stringStartCol=a.column(),b.tokenize(a,b);a.match(/^[^\s\u00a0=<>"']*[^\s\u00a0=<>"'\/]/);return"word"}function g(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"};b.isInAttribute=!0;return b}function k(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=h;break}c.next()}return a}}function l(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==
d)return c.tokenize=l(a+1),c.tokenize(b,c);if(">"==d)if(1==a){c.tokenize=h;break}else return c.tokenize=l(a-1),c.tokenize(b,c)}return"meta"}}function n(a,b,c){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=c;if(H.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)this.noIndent=!0}function p(a){a.context&&(a.context=a.context.prev)}function r(a,b){for(var c;a.context;){c=a.context.tagName;if(!H.contextGrabbers.hasOwnProperty(c)||!H.contextGrabbers[c].hasOwnProperty(b))break;
p(a)}}function w(a,b,c){return"openTag"==a?(c.tagStart=b.column(),u):"closeTag"==a?A:w}function u(a,b,c){if("word"==a)return c.tagName=b.current(),q="tag",B;if(H.allowMissingTagName&&"endTag"==a)return q="tag bracket",B(a,b,c);q="error";return u}function A(a,b,c){if("word"==a){a=b.current();c.context&&c.context.tagName!=a&&H.implicitlyClosed.hasOwnProperty(c.context.tagName)&&p(c);if(c.context&&c.context.tagName==a||!1===H.matchClosing)return q="tag",t;q="tag error";return z}if(H.allowMissingTagName&&
"endTag"==a)return q="tag bracket",t(a,b,c);q="error";return z}function t(a,b,c){if("endTag"!=a)return q="error",t;p(c);return w}function z(a,b,c){q="error";return t(a,b,c)}function B(a,b,c){if("word"==a)return q="attribute",D;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;c.tagName=c.tagStart=null;"selfcloseTag"==a||H.autoSelfClosers.hasOwnProperty(b)?r(c,b):(r(c,b),c.context=new n(c,b,d==c.indented));return w}q="error";return B}function D(a,b,c){if("equals"==a)return y;H.allowMissing||
(q="error");return B(a,b,c)}function y(a,b,c){if("string"==a)return E;if("word"==a&&H.allowUnquoted)return q="string",B;q="error";return B(a,b,c)}function E(a,b,c){return"string"==a?E:B(a,b,c)}var x=b.indentUnit,H={};b=a.htmlMode?f:c;for(var F in b)H[F]=b[F];for(F in a)H[F]=a[F];var m,q;h.isInText=!0;return{startState:function(a){var b={tokenize:h,state:w,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(b.baseIndent=a);return b},token:function(a,b){!b.tagName&&a.sol()&&(b.indented=
a.indentation());if(a.eatSpace())return null;m=null;var c=b.tokenize(a,b);(c||m)&&"comment"!=c&&(q=null,b.state=b.state(m||c,a,b),q&&(c="error"==q?c+" error":q));return c},indent:function(a,b,c){var f=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+x;if(f&&f.noIndent)return e.Pass;if(a.tokenize!=d&&a.tokenize!=h)return c?c.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==H.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+x*(H.multilineTagIndentFactor||
1);if(H.alignCDATA&&/<!\[CDATA\[/.test(b))return 0;if((b=b&&/^<(\/)?([\w_:\.-]*)/.exec(b))&&b[1])for(;f;)if(f.tagName==b[2]){f=f.prev;break}else if(H.implicitlyClosed.hasOwnProperty(f.tagName))f=f.prev;else break;else if(b)for(;f;)if((c=H.contextGrabbers[f.tagName])&&c.hasOwnProperty(b[2]))f=f.prev;else break;for(;f&&f.prev&&!f.startOfLine;)f=f.prev;return f?f.indent+x:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:H.htmlMode?"html":
"xml",helperType:H.htmlMode?"html":"xml",skipAttribute:function(a){a.state==y&&(a.state=B)}}});e.defineMIME("text/xml","xml");e.defineMIME("application/xml","xml");e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})});(function(e){e(CodeMirror)})(function(e){e.defineMode("markdown",function(f,c){function b(a,b,c){b.f=b.inline=c;return c(a,b)}function a(a){return!a||!/\S/.test(a.string)}function h(a){a.linkTitle=!1;a.em=!1;a.strong=!1;a.strikethrough=!1;a.quote=0;a.indentedCode=!1;y||a.f!=g||(a.f=r,a.block=d);a.trailingSpace=0;a.trailingSpaceNewLine=!1;a.prevLine=a.thisLine;return a.thisLine=null}function d(d,g){var h=d.sol(),l=!1!==g.list,p=g.indentedCode;g.indentedCode=!1;l&&(0<=g.indentationDiff?(4>g.indentationDiff&&
(g.indentation-=g.indentationDiff),g.list=null):0<g.indentation?(g.list=null,g.listDepth=Math.floor(g.indentation/4)):(g.list=!1,g.listDepth=0));var r=null;if(4<=g.indentationDiff)return d.skipToEnd(),p||a(g.prevLine)?(g.indentation-=4,g.indentedCode=!0,H.code):null;if(d.eatSpace())return null;if((r=d.match(M))&&6>=r[1].length)return g.header=r[1].length,c.highlightFormatting&&(g.formatting="header"),g.f=g.inline,n(g);if(a(g.prevLine)||g.quote||l||p||!(r=d.match(S))){if(d.eat(">"))return g.quote=
h?1:g.quote+1,c.highlightFormatting&&(g.formatting="quote"),d.eatSpace(),n(g);if("["===d.peek())return b(d,g,t);if(d.match(m,!0))return g.hr=!0,H.hr;if((a(g.prevLine)||l)&&(d.match(q,!1)||d.match(G,!1)))return d.match(q,!0)?h="ul":(d.match(G,!0),h="ol"),g.indentation=d.column()+d.current().length,g.list=!0,g.listDepth++,c.taskLists&&d.match(I,!1)&&(g.taskList=!0),g.f=g.inline,c.highlightFormatting&&(g.formatting=["list","list-"+h]),n(g);if(c.fencedCodeBlocks&&(r=d.match(za,!0)))return g.fencedChars=
r[1],d=r[2],e.findModeByName&&(h=e.findModeByName(d))&&(d=h.mime||h.mimes[0]),d=e.getMode(f,d),g.localMode="null"==d.name?null:d,g.localMode&&(g.localState=g.localMode.startState()),g.f=g.block=k,c.highlightFormatting&&(g.formatting="code-block"),g.code=!0,n(g)}else return g.header="="==r[0].charAt(0)?1:2,c.highlightFormatting&&(g.formatting="header"),g.f=g.inline,n(g);return b(d,g,g.inline)}function g(a,b){var c=E.token(a,b.htmlState);if(y&&null===b.htmlState.tagStart&&!b.htmlState.context&&b.htmlState.tokenize.isInText||
b.md_inside&&-1<a.current().indexOf(">"))b.f=r,b.block=d,b.htmlState=null;return c}function k(a,b){if(a.sol()&&b.fencedChars&&a.match(b.fencedChars,!1))return b.localMode=b.localState=null,b.f=b.block=l,null;if(b.localMode)return b.localMode.token(a,b.localState);a.skipToEnd();return H.code}function l(a,b){a.match(b.fencedChars);b.block=d;b.f=r;b.fencedChars=null;c.highlightFormatting&&(b.formatting="code-block");b.code=!0;a=n(b);b.code=!1;return a}function n(a){var b=[];if(a.formatting){b.push(H.formatting);
"string"===typeof a.formatting&&(a.formatting=[a.formatting]);for(var d=0;d<a.formatting.length;d++)b.push(H.formatting+"-"+a.formatting[d]),"header"===a.formatting[d]&&b.push(H.formatting+"-"+a.formatting[d]+"-"+a.header),"quote"===a.formatting[d]&&(!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(H.formatting+"-"+a.formatting[d]+"-"+a.quote):b.push("error"))}if(a.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(a.taskClosed)return b.push("property"),b.length?b.join(" "):null;
a.linkHref?b.push(H.linkHref,"url"):(a.strong&&b.push(H.strong),a.em&&b.push(H.em),a.strikethrough&&b.push(H.strikethrough),a.linkText&&b.push(H.linkText),a.code&&b.push(H.code));a.header&&b.push(H.header,H.header+"-"+a.header);a.quote&&(b.push(H.quote),!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(H.quote+"-"+a.quote):b.push(H.quote+"-"+c.maxBlockquoteDepth));!1!==a.list&&((d=(a.listDepth-1)%3)?1===d?b.push(H.list2):b.push(H.list3):b.push(H.list1));a.trailingSpaceNewLine?b.push("trailing-space-new-line"):
a.trailingSpace&&b.push("trailing-space-"+(a.trailingSpace%2?"a":"b"));return b.length?b.join(" "):null}function p(a,b){if(a.match(ia,!0))return n(b)}function r(a,b){var d=b.text(a,b);if("undefined"!==typeof d)return d;if(b.list)return b.list=null,n(b);if(b.taskList)return"x"!==a.match(I,!0)[1]?b.taskOpen=!0:b.taskClosed=!0,c.highlightFormatting&&(b.formatting="task"),b.taskList=!1,n(b);b.taskOpen=!1;b.taskClosed=!1;if(b.header&&a.match(/^#+$/,!0))return c.highlightFormatting&&(b.formatting="header"),
n(b);d=a.sol();var f=a.next();if("\\"===f&&(a.next(),c.highlightFormatting))return a=n(b),b=H.formatting+"-escape",a?a+" "+b:b;if(b.linkTitle){b.linkTitle=!1;var m=f;"("===f&&(m=")");m=(m+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(a.match(new RegExp("^\\s*(?:[^"+m+"\\\\]+|\\\\\\\\|\\\\.)"+m),!0))return H.linkHref}if("`"===f){d=b.formatting;c.highlightFormatting&&(b.formatting="code");f=n(b);m=a.pos;a.eatWhile("`");a=1+a.pos-m;if(b.code){if(a===x)return b.code=!1,f;b.formatting=d}else x=a,b.code=
!0;return n(b)}if(b.code)return n(b);if("!"===f&&a.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.match(/\[[^\]]*\]/),b.inline=b.f=u,H.image;if("["===f&&a.match(/.*\](\(.*\)| ?\[.*\])/,!1))return b.linkText=!0,c.highlightFormatting&&(b.formatting="link"),n(b);if("]"===f&&b.linkText&&a.match(/\(.*\)| ?\[.*\]/,!1))return c.highlightFormatting&&(b.formatting="link"),a=n(b),b.linkText=!1,b.inline=b.f=u,a;if("<"===f&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=w,c.highlightFormatting&&
(b.formatting="link"),a=n(b),(a?a+" ":"")+H.linkInline;if("<"===f&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=w,c.highlightFormatting&&(b.formatting="link"),a=n(b),(a?a+" ":"")+H.linkEmail;if("<"===f&&a.match(/^(!--|\w)/,!1))return d=a.string.indexOf(">",a.pos),-1!=d&&(d=a.string.substring(a.start,d),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(d)&&(b.md_inside=!0)),a.backUp(1),b.htmlState=e.startState(E),d=g,b.f=b.block=d,d(a,b);if("<"===f&&a.match(/^\/\w*?>/))return b.md_inside=
!1,"tag";m=!1;if(!c.underscoresBreakWords&&"_"===f&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var h=a.pos-2;0<=h&&(h=a.string.charAt(h),"_"!==h&&h.match(/(\w)/,!1)&&(m=!0))}if("*"===f||"_"===f&&!m){if(!d||" "!==a.peek()){if(b.strong===f&&a.eat(f))return c.highlightFormatting&&(b.formatting="strong"),f=n(b),b.strong=!1,f;if(!b.strong&&a.eat(f))return b.strong=f,c.highlightFormatting&&(b.formatting="strong"),n(b);if(b.em===f)return c.highlightFormatting&&(b.formatting="em"),f=n(b),b.em=!1,f;if(!b.em)return b.em=
f,c.highlightFormatting&&(b.formatting="em"),n(b)}}else if(" "===f&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return n(b);a.backUp(1)}if(c.strikethrough)if("~"===f&&a.eatWhile(f)){if(b.strikethrough)return c.highlightFormatting&&(b.formatting="strikethrough"),f=n(b),b.strikethrough=!1,f;if(a.match(/^[^\s]/,!1))return b.strikethrough=!0,c.highlightFormatting&&(b.formatting="strikethrough"),n(b)}else if(" "===f&&a.match(/^~~/,!0)){if(" "===a.peek())return n(b);a.backUp(2)}" "===f&&(a.match(/ +$/,
!1)?b.trailingSpace++:b.trailingSpace&&(b.trailingSpaceNewLine=!0));return n(b)}function w(a,b){if(">"===a.next())return b.f=b.inline=r,c.highlightFormatting&&(b.formatting="link"),a=n(b),(a?a+" ":"")+H.linkInline;a.match(/^[^>]+/,!0);return H.linkInline}function u(a,b){if(a.eatSpace())return null;a=a.next();return"("===a||"["===a?(b.f=b.inline=A("("===a?")":"]"),c.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,n(b)):"error"}function A(a){return function(b,d){if(b.next()===a)return d.f=
d.inline=r,c.highlightFormatting&&(d.formatting="link-string"),b=n(d),d.linkHref=!1,b;b.match(D(a),!0)&&b.backUp(1);d.linkHref=!0;return n(d)}}function t(a,d){return a.match(/^[^\]]*\]:/,!1)?(d.f=z,a.next(),c.highlightFormatting&&(d.formatting="link"),d.linkText=!0,n(d)):b(a,d,r)}function z(a,b){if(a.match(/^\]:/,!0))return b.f=b.inline=B,c.highlightFormatting&&(b.formatting="link"),a=n(b),b.linkText=!1,a;a.match(/^[^\]]+/,!0);return H.linkText}function B(a,b){if(a.eatSpace())return null;a.match(/^[^\s]+/,
!0);void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);b.f=b.inline=r;return H.linkHref+" url"}function D(a){W[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),W[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")"));return W[a]}var y=e.modes.hasOwnProperty("xml"),E=e.getMode(f,y?{name:"xml",htmlMode:!0}:"text/plain");void 0===c.highlightFormatting&&(c.highlightFormatting=!1);void 0===c.maxBlockquoteDepth&&(c.maxBlockquoteDepth=
0);void 0===c.underscoresBreakWords&&(c.underscoresBreakWords=!0);void 0===c.taskLists&&(c.taskLists=!1);void 0===c.strikethrough&&(c.strikethrough=!1);void 0===c.tokenTypeOverrides&&(c.tokenTypeOverrides={});var x=0,H={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"},F;for(F in H)H.hasOwnProperty(F)&&
c.tokenTypeOverrides[F]&&(H[F]=c.tokenTypeOverrides[F]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,q=/^[*\-+]\s+/,G=/^[0-9]+([.)])\s+/,I=/^\[(x| )\](?=\s)/,M=c.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,S=/^ *(?:={1,}|-{1,})\s*$/,ia=/^[^#!\[\]*_\\<>` "'(~]+/,za=new RegExp("^("+(!0===c.fencedCodeBlocks?"~~~+|```+":c.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),W=[],X={startState:function(){return{f:d,prevLine:null,thisLine:null,block:d,htmlState:null,indentation:0,inline:r,text:p,formatting:!1,linkText:!1,
linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(a){return{f:a.f,prevLine:a.prevLine,thisLine:a.this,block:a.block,htmlState:a.htmlState&&e.copyState(E,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?e.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,formatting:!1,linkTitle:a.linkTitle,code:a.code,em:a.em,
strong:a.strong,strikethrough:a.strikethrough,header:a.header,hr:a.hr,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,indentedCode:a.indentedCode,trailingSpace:a.trailingSpace,trailingSpaceNewLine:a.trailingSpaceNewLine,md_inside:a.md_inside,fencedChars:a.fencedChars}},token:function(a,b){b.formatting=!1;if(a!=b.thisLine){var c=b.header||b.hr;b.header=0;b.hr=!1;if(a.match(/^\s*$/,!0)||c){h(b);if(!c)return null;b.prevLine=null}b.prevLine=b.thisLine;b.thisLine=a;b.taskList=!1;b.trailingSpace=
0;b.trailingSpaceNewLine=!1;b.f=b.block;c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;var d=4*Math.floor((c-b.indentation)/4);4<d&&(d=4);d=b.indentation+d;b.indentationDiff=d-b.indentation;b.indentation=d;if(0<c)return null}return b.f(a,b)},innerMode:function(a){return a.block==g?{state:a.htmlState,mode:E}:a.localState?{state:a.localState,mode:a.localMode}:{state:a,mode:X}},blankLine:h,getType:n,fold:"markdown"};return X},"xml");e.defineMIME("text/x-markdown","markdown")});/*
 SlickQuiz jQuery Plugin
 http://github.com/jewlofthelotus/SlickQuiz

 @updated August 9, 2014
 @version 1.5.164

 @author Julie Cameron - http://www.juliecameron.com
 @copyright (c) 2013 Quicken Loans - http://www.quickenloans.com
 @license MIT
*/
(function(e){e.slickQuiz=function(f,c){var b=this,a=e(f),h="#"+a.attr("id");f={checkAnswerText:"Check My Answer!",nextQuestionText:virtualclass.lang.getString("Next")+" &raquo;",backButtonText:"&laquo;"+virtualclass.lang.getString("Back"),tryAgainText:"",questionCountText:"Question %current of %total",preventUnansweredText:"You must select at least one answer.",questionTemplateText:"%count. %text",scoreTemplateText:"%score / %total",nameTemplateText:"<span>Quiz: </span>%name",skipStartButton:!0,numberOfQuestions:null,
randomSortQuestions:!1,randomSortAnswers:!0,preventUnanswered:!1,disableScore:!1,disableRanking:!0,quizTime:0,displayDetailResult:!0,questionMode:"deferredfeedback",perQuestionResponseMessaging:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!0:!1,perQuestionResponseAnswers:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!0:!1,completionResponseMessaging:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!1:c.displayDetailResult,displayQuestionCount:!1,displayQuestionNumber:!0,
submitQuestionText:virtualclass.lang.getString("quizSubmit"),questionPerPage:50,resultDisplayDetailed:!0,animationCallbacks:{setupQuiz:function(){},startQuiz:function(){},resetQuiz:function(){},checkAnswer:function(){},nextQuestion:function(){},backToQuestion:function(){},completeQuiz:function(){}},events:{onStartQuiz:function(a){},onCompleteQuiz:function(a){}}};var d="nextQuestion",g="."+d,k=h+" .startQuiz",l=h+" .quizName",n=h+" .quizArea",p=h+" .quizResults",r=h+" .quizResultsCopy",w=h+" .quizHeader",
u=h+" .quizScore",A=h+" .quizLevel",t=e(k),z=e(l),B=e(n),D=e(p),y=e(r),E=e(w);e(u);var x=e(A),H=0,F=0;l="";c&&"undefined"!=typeof c.disableNext&&("undefined"==typeof c.preventUnanswered&&(c.preventUnanswered=c.disableNext),l+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n");c&&"undefined"!=typeof c.disableResponseMessaging&&("undefined"==typeof c.preventUnanswered&&(c.perQuestionResponseMessaging=c.disableResponseMessaging),l+="The 'disableResponseMessaging' option has been deprecated, please use 'perQuestionResponseMessaging' and 'completionResponseMessaging' in it's place.\n\n");
c&&"undefined"!=typeof c.randomSort&&("undefined"==typeof c.randomSortQuestions&&(c.randomSortQuestions=c.randomSort),"undefined"==typeof c.randomSortAnswers&&(c.randomSortAnswers=c.randomSort),l+="The 'randomSort' option has been deprecated, please use 'randomSortQuestions' and 'randomSortAnswers' in it's place.\n\n");""!==l&&("undefined"!=typeof console?console.warn(l):alert(l));b.config=e.extend(f,c);var m=e.parseJSON(b.config.json?b.config.json:"undefined"!=typeof quizJSON?quizJSON:null),q=b.config.randomSortQuestions?
m.questions.sort(function(){return Math.round(Math.random())-.5}):m.questions,G=q.length;b.config.numberOfQuestions&&G>=b.config.numberOfQuestions&&(q=q.slice(0,b.config.numberOfQuestions),G=q.length);var I={getKey:function(a){var b=[];for(i=0;i<a;i++)b[i]=e.Deferred();return b},turnKeyAndGo:function(a,b){e.when.apply(null,a).then(function(){b()})},getKeyNotch:function(a,b){return function(){a[b-1].resolve()}}};b.method={setupQuiz:function(a){console.log("quiz data setup quiz");var c=I.getKey(3);
var f=I.getKeyNotch;b.config.quizTime&&0<b.config.quizTime?e("#timeText").html(virtualclass.lang.getString("Time remaining")+' <span id="qztime">'+b.config.quizTime+"</span>"):e("#timeText").html(virtualclass.lang.getString("ETime")+' <span id="qztime">00:00:00</span>');z.hide().html(b.config.nameTemplateText.replace("%name",m.info.name)).fadeIn(1E3,f(c,1));E.hide().prepend(e('<div class="quizDescription">'+m.info.main+"</div>")).fadeIn(1E3,f(c,2));b.config.tryAgainText&&""!==b.config.tryAgainText&&
y.append('<p><a class="button tryAgain" href="#">'+b.config.tryAgainText+"</a></p>");var g=e('<ol class="questions"></ol>'),h=1;for(i in q)if(q.hasOwnProperty(i)){var k=q[i],l=e('<li data-id="'+k.qid+'" class="question" id="question'+(h-1)+'"></li>');b.config.displayQuestionCount&&l.append('<div class="questionCount">'+b.config.questionCountText.replace("%current",'<span class="current">'+h+"</span>").replace("%total",'<span class="total">'+G+"</span>")+"</div>");var n="";n=b.config.displayQuestionNumber?
b.config.questionTemplateText.replace("%count",h).replace("%text",k.q):k.q;l.append('<div class="quesname"> <span class= "unflagged" title="flag this question for future reference"></span><span class="questext">'+n+"</span></div>");var p=0;for(i in k.a)k.a.hasOwnProperty(i)&&(answer=k.a[i],answer.correct&&p++);n=e('<ul class="answers"></ul>');var r=b.config.randomSortAnswers?k.a.sort(function(){return Math.round(Math.random())-.5}):k.a,u=k.select_any?k.select_any:!1,A=k.force_checkbox?k.force_checkbox:
!1,w="question"+(h-1);p=1<p&&!u||A?"checkbox":"radio";h==m.questions.length&&(d+=" lastQuestion");for(i in r)r.hasOwnProperty(i)&&(answer=r[i],optionId=w+"_"+i.toString(),u='<input id="'+optionId+'" class="ansck" name="'+w+'" type="'+p+'" /> ',A='<label for="'+optionId+'">'+answer.option+"</label>",u=e("<li></li>").append(u).append(A),n.append(u));l.append(n);if(b.config.perQuestionResponseMessaging||b.config.completionResponseMessaging)n=e('<ul class="responses"></ul>'),n.append('<li class="correct">'+
k.correct+"</li>"),n.append('<li class="incorrect">'+k.incorrect+"</li>"),l.append(n);b.config.backButtonText&&""!==b.config.backButtonText&&l.append('<a href="#" class="button backToQuestion">'+b.config.backButtonText+"</a>");b.config.perQuestionResponseMessaging&&(l.append('<a href="#" class="button '+d+'">'+b.config.nextQuestionText+"</a>"),l.append('<a href="#" class="button checkAnswer">'+b.config.checkAnswerText+"</a>"));1>b.config.questionPerPage&&(b.config.questionPerPage=m.questions.length);
h==m.questions.length?l.append('<a href="#" class="button '+d+' checkAnswer">'+b.config.submitQuestionText+"</a>"):(h==b.config.questionPerPage||0==h%b.config.questionPerPage)&&l.append('<a href="#" class="button '+d+'" style = "display: list-item">'+b.config.nextQuestionText+"</a>");h<=b.config.questionPerPage?(l.show(),k=e(' <a href="#question'+(h-1)+'" class="qnbutton notyetanswered free thispage" title="Not yet answered" id="navquestion'+(h-1)+'">'+h+"</a>")):k=e(' <a href="#question'+(h-1)+'" class="qnbutton notyetanswered free" title="Not yet answered" id="navquestion'+
(h-1)+'">'+h+"</a>");e("div#exam_navblock .content .qn_buttons").append(k);g.append(l);h++}B.append(g);b.config.skipStartButton||0==t.length?(t.hide(),b.method.startQuiz.apply(this,[{callback:b.config.animationCallbacks.startQuiz}]),f(c,3).apply(null,[])):t.fadeIn(500,f(c,3));I.turnKeyAndGo(c,a&&a.callback?a.callback:function(){})},startQuiz:function(a){function c(a){var b=e(h+" .questions li").first();b.length&&b.fadeIn(500,function(){a&&a.callback&&a.callback()})}var d=I.getKey(1);var f=I.getKeyNotch;
b.config.skipStartButton||0==t.length?c({callback:f(d,1)}):t.fadeOut(300,function(){c({callback:f(d,1)})});I.turnKeyAndGo(d,a&&a.callback?a.callback:function(){});b.config.events&&b.config.events.onStartQuiz&&b.config.events.onStartQuiz.apply(null,[]);a=b.config.ptm;var g=(new Date).getTime();if(!virtualclass.vutil.isPlayMode())var m=(g-a)/1E3;b.config.quizTime&&0<b.config.quizTime?(timeLeft=virtualclass.quiz.calculateRemainingTime(b.config.quizTime),a=document.querySelector("#qztime"),b.method.startTimer(timeLeft,
a,"desc","vmQuiz")):(m=m?m:0,a=document.querySelector("#qztime"),b.method.startTimer(m,a,"asc","vmQuiz"))},resetQuiz:function(a,c){var d=I.getKey(1);var f=I.getKeyNotch;D.fadeOut(300,function(){e(h+" input").prop("checked",!1).prop("disabled",!1);x.attr("class","quizLevel");e(h+" .question").removeClass("correctResponse").removeClass("incorrectResponse");e(h+" .answers li").removeClass("correct").removeClass("incorrect");e(h+" .question,"+h+" .responses,"+h+" .responses li,"+h+" "+g+","+h+" .backToQuestion").hide();
e(h+" .questionCount,"+h+" .answers,"+h+" .checkAnswer").show();B.append(e(h+" .questions")).show();f(d,1).apply(null,[]);b.method.startQuiz({callback:b.config.animationCallbacks.startQuiz},D)});I.turnKeyAndGo(d,c&&c.callback?c.callback:function(){})},checkAnswer:function(a,c){var d=I.getKey(2);var f=I.getKeyNotch;var g=e(e(a).parents(".question")[0]),m=g.find(".answers li"),k=m.find("input:checked"),l=parseInt(g.attr("id").replace(/(question)/,""),10),n=parseInt(g.attr("data-id")),G=q[l].a;l=q[l].select_any?
q[l].select_any:!1;m.addClass("incorrect");var p=[];for(i in G)if(G.hasOwnProperty(i)){var r=G[i],t=parseInt(i,10);r.correct?(p.push(t),"interactive"==b.config.questionMode&&m.eq(t).removeClass("incorrect").addClass("correct")):(-1<e.inArray(t,p)&&p.pop(t),m.eq(t).removeClass("wrong"))}var u=[];k.each(function(){var a=e(this).attr("id");u.push(parseInt(a.replace(/(question\d{1,}_)/,""),10))});if(b.config.preventUnanswered&&0===u.length)return alert(b.config.preventUnansweredText),!1;k=b.method.compareAnswers(p,
u,l);e("a#nav"+g.attr("id")+".qnbutton").removeClass("notyetanswered").removeAttr("title");k?(g.addClass("correctResponse"),"deferredfeedback"!=b.config.questionMode&&m.eq(u[0]).removeClass("incorrect").addClass("correct"),e("a#nav"+g.attr("id")+".qnbutton").removeClass("incorrect").addClass("correct"),b.method.sendQzdata(n,!0)):(g.removeClass("correctResponse"),"deferredfeedback"!=b.config.questionMode&&m.eq(u[0]).addClass("wrong"),e("a#nav"+g.attr("id")+".qnbutton").removeClass("correct").addClass("incorrect"),
0<e(h+" .answers").find("input:checked").length&&b.method.sendQzdata(n,!1));g.find(".responses li").hide();g.find(k?".correct":".incorrect").show();b.config.perQuestionResponseMessaging?("adaptive"!=b.config.questionMode&&(e(a).hide(),g.find(".answers li input[type=radio]").attr("disabled",!0)),b.config.perQuestionResponseAnswers||g.find(".answers").hide(),g.find(".responses").show(),g.find(".backToQuestion").length||f(d,2).apply(null,[])):(f(d,1).apply(null,[]),f(d,2).apply(null,[]));I.turnKeyAndGo(d,
c&&c.callback?c.callback:function(){})},nextQuestion:function(a,c){var d=I.getKey(1);var f=I.getKeyNotch;var g=e(e(a).parents(".question")[0]);a=g.next(".question");var h=g.find("input:checked");if(b.config.preventUnanswered&&0===h.length)return!1;e("a#navquestion0.qnbutton").removeClass("thispage");e("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");a.length?g.fadeOut(300,function(){g.prevAll(".question").hide();if(g.nextAll(".question").length>b.config.questionPerPage){var a=
parseInt(g.prevAll(".question").length)+parseInt(b.config.questionPerPage)+1;g.nextUntil("li#question"+a+".question").show();e("li#question"+(a-1)+".question").find(".backToQuestion").show().end().fadeIn(500,f(d,1));e("a#nav"+g[0].id+".qnbutton").nextUntil("a#navquestion"+a+".qnbutton").addClass("thispage")}else g.nextAll(".question").show(),e("li#question"+(m.questions.length-1)+".question").find(".backToQuestion").show().end().length||f(d,1).apply(null,[]),e("a#nav"+g[0].id+".qnbutton").nextAll(".qnbutton").addClass("thispage")}):
(f(d,1).apply(null,[]),b.method.completeQuiz({callback:b.config.animationCallbacks.completeQuiz}));I.turnKeyAndGo(d,c&&c.callback?c.callback:function(){});virtualclass.quiz.scrollToTop()},backToQuestion:function(a,c){var d=I.getKey(2);var f=I.getKeyNotch;var m=e(e(a).parents(".question")[0]),h=m.find(".answers");e("a#navquestion0.qnbutton").removeClass("thispage");e("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");if("block"===h.css("display")){var q=m.prev(".question");e("li#question0.question").nextAll(".question").hide();
if(m.prevAll(".question").length>=b.config.questionPerPage){a=1+Number(m.attr("id").replace(/^\D+/g,""));var k=a%b.config.questionPerPage;a=0<k?a-k:a-b.config.questionPerPage;a>b.config.questionPerPage?(e("li#question"+a+".question").prevUntil("li#question"+(a-1-b.config.questionPerPage)+".question").show(),e("a#navquestion"+a+".qnbutton").prevUntil("a#navquestion"+(a-1-b.config.questionPerPage)+".qnbutton").addClass("thispage")):(e("li#question"+a+".question").prevAll(".question").show(),e("a#navquestion"+
a+".qnbutton").prevAll(".qnbutton").addClass("thispage"))}else m.prevAll(".question").show();m.fadeOut(300,function(){q.removeClass("correctResponse").removeClass("incorrectResponse");q.find(".responses, .responses li").hide();q.find(".answers").show();q.find(".checkAnswer").show();f(d,2).apply(null,[])})}else m.find(".responses").fadeOut(300,function(){m.removeClass("correctResponse").removeClass("incorrectResponse");m.find(".responses li").hide();h.fadeIn(500,f(d,1));m.find(".checkAnswer").fadeIn(500,
f(d,2));m.find(g).hide();"question0"!=m.attr("id")?m.find(".backToQuestion").show():m.find(".backToQuestion").hide()});I.turnKeyAndGo(d,c&&c.callback?c.callback:function(){});virtualclass.quiz.scrollToTop()},diaplayQuestion:function(a,c){I.getKey(1);c=e("li"+a.hash+".question");c.next(".question");c=c.find("input:checked");if(b.config.preventUnanswered&&0===c.length)return!1;c=1+Number(a.id.replace(/^\D+/g,""));if(c>b.config.questionPerPage){var d=0<c%b.config.questionPerPage?parseInt(c/b.config.questionPerPage)+
1:parseInt(c/b.config.questionPerPage);c=b.config.questionPerPage*(d-1);d*=b.config.questionPerPage;e("li#question0.question").hide();e("li#question0").nextAll(".question").hide();e("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");e("a#navquestion0.qnbutton").removeClass("thispage");c>=b.config.questionPerPage?(e("li#question"+(c-1)+".question").nextUntil("li#question"+d+".question").show(),e("a#navquestion"+(c-1)+".qnbutton").nextUntil("a#navquestion"+d+".qnbutton").addClass("thispage")):
(e("li#question0.question").nextUntil("li#question"+b.config.questionPerPage+".question").show(),e("a#navquestion0.qnbutton").addClass("thispage"),e("a#navquestion0.qnbutton").nextUntil("a#navquestion"+b.config.questionPerPage+".qnbutton").addClass("thispage"))}else e("li#question0").nextAll(".question").hide(),e("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage"),e("li#question0.question").show(),e("li#question0.question").nextUntil("li#question"+b.config.questionPerPage+".question").show(),
e("a#navquestion0.qnbutton").addClass("thispage"),e("a#navquestion0.qnbutton").nextUntil("a#navquestion"+b.config.questionPerPage+".qnbutton").addClass("thispage");window.location.href=a.hash;virtualclass.quiz.scrollToTop()},flagQuestion:function(a,b){b=e(e(a).parents(".question")[0]);e("a#nav"+b.attr("id")+".qnbutton").toggleClass("trafficlight");e(a).toggleClass("flagged")},startTimer:function(a,b,c,d){function e(){b||"undefined"==typeof H?(g="asc"==c?a+((Date.now()-f)/1E3|0):a-((Date.now()-f)/
1E3|0),m=g/3600|0,h=g%3600/60|0,q=g%60|0,m=10>m?"0"+m:m,h=10>h?"0"+h:h,q=10>q?"0"+q:q,b.textContent=m+":"+h+":"+q,F=m+":"+h+":"+q,0>=g&&(f=0,"undefined"!=typeof H&&(console.log("Clear quiz interval"),clearInterval(H)))):clearInterval(H)}"undefined"!=typeof H&&(clearInterval(H),console.log("Clear quiz interval"));c="undefined"!==typeof c?c:"desc";var f=Date.now(),g,m,h,q;"asc"!==c&&e();H=setInterval(e,1E3)},completeQuiz:function(a){var c=I.getKey(1);var d=I.getKeyNotch;var f=e(h+" .answers").find("input:checked").length,
g=(Number(m.info.results)/G).toFixed(3),q=e(h+" .correctResponse").length,k=q*g,l=parseInt(m.info.results);b.config.disableScore?e(u).remove():e(u+" span").html(b.config.scoreTemplateText.replace("%score",k.toFixed(2)).replace("%total",l.toFixed(2)));if(b.config.disableRanking)e(A).remove();else{var n=[m.info.level1,m.info.level2,m.info.level3,m.info.level4,m.info.level5];g=b.method.calculateLevel(k);n=e.isNumeric(g)?n[g]:"";e(A+" span").html(n);e(A).addClass("level"+g)}B.fadeOut(0,function(){console.log("quiz data complete quiz");
clearInterval(H);console.log("Clear quiz interval");if(b.config.completionResponseMessaging)e(h+" .qnbutton").addClass("show"),e(h+" input").prop("disabled",!0),e(h+" .button:not(.tryAgain), "+h+" .questionCount").hide(),e(h+" .question, "+h+" .answers, "+h+" .responses").show(),D.append(e(h+" .questions")).fadeIn(500,d(c,1));else{if(b.config.quizTime&&0<b.config.quizTime){var a=F.split(":");a=3600*+a[0]+60*+a[1]+ +a[2];a=parseInt(b.config.quizTime)-a;var g=virtualclass.quiz.convertSecToTime(a)}else g=
F;e(h+" .navblock").hide();D.prepend(e("<h4>Questions attempted: <span>"+f+"</span></h4>"));D.prepend(e("<h4>Correct answers: <span>"+q+"</span></h4>"));D.prepend(e("<h4>Maximum mark: <span>"+l.toFixed(2)+"</span></h4>"));D.prepend(e("<h4>Time taken: <span>"+g+"</span></h4>"));e(h+" #timeText").hide();D.prepend(e("<h4>Total no of questions: <span>"+G+"</span></h4>"));D.fadeIn(500,d(c,1))}if(!roles.hasControls()){console.log("quiz submit init from "+virtualclass.gObj.uid);var n=100*+k/+m.info.results;
virtualclass.vutil.whoIsTeacher();virtualclass.quiz.hasOwnProperty("timeQuizComplete")&&clearTimeout(virtualclass.quiz.timeQuizComplete);virtualclass.config.makeWebSocketReady&&(virtualclass.quiz.timeQuizComplete=setTimeout(function(){console.log("quiz submit from "+virtualclass.gObj.uid);virtualclass.quiz.sendSubmittedQuiz({quizMsg:"quizsubmitted",timetaken:g,quesattemptd:f,correctans:q,score:n.toFixed(2),user:virtualclass.gObj.uid,maxmarks:m.info.results,noofqus:G})},300))}});I.turnKeyAndGo(c,a&&
a.callback?a.callback:function(){});b.config.events&&b.config.events.onCompleteQuiz&&b.config.events.onCompleteQuiz.apply(null,[{questionCount:G,score:k}])},compareAnswers:function(a,b,c){return c?-1<e.inArray(b[0],a):0===e(a).not(b).length&&0===e(b).not(a).length},calculateLevel:function(a){a=(a/G).toFixed(2);var c=null;b.method.inRange(0,.2,a)?c=4:b.method.inRange(.21,.4,a)?c=3:b.method.inRange(.41,.6,a)?c=2:b.method.inRange(.61,.8,a)?c=1:b.method.inRange(.81,1,a)&&(c=0);return c},inRange:function(a,
b,c){return c>=a&&c<=b},sendQzdata:function(a,b){virtualclass.quiz.sendQuizData(m.info.quiz,a,b)}};b.init=function(){b.method.setupQuiz.apply(null,[{callback:b.config.animationCallbacks.setupQuiz}]);t.on("click",function(a){a.preventDefault();this.disabled||e(this).hasClass("disabled")||b.method.startQuiz.apply(null,[{callback:b.config.animationCallbacks.startQuiz}])});e(h+" .tryAgain").on("click",function(a){a.preventDefault();b.method.resetQuiz(this,{callback:b.config.animationCallbacks.resetQuiz})});
e(h+" .checkAnswer").on("click",function(a){a.preventDefault();b.method.checkAnswer(this,{callback:b.config.animationCallbacks.checkAnswer})});if(!b.config.perQuestionResponseMessaging)e(h+" .ansck").on("click",function(a){b.method.checkAnswer(this,{callback:b.config.animationCallbacks.checkAnswer})});e("#exam_navblock .qn_buttons a").on("click",function(a){a.preventDefault();"none"==e("li"+this.hash+".question").css("display")?b.method.diaplayQuestion(this,{callback:b.config.animationCallbacks.diaplayQuestion}):
window.location.href=this.hash});e(h+" .quesname span.unflagged").on("click",function(a){a.preventDefault();b.method.flagQuestion(this,{callback:b.config.animationCallbacks.flagQuestion})});e(h+" .backToQuestion").on("click",function(a){a.preventDefault();b.method.backToQuestion(this,{callback:b.config.animationCallbacks.backToQuestion})});e(h+" "+g).on("click",function(a){a.preventDefault();b.method.nextQuestion(this,{callback:b.config.animationCallbacks.nextQuestion})});var c=a.attr("id")+"-name";
z.attr("id",c);a.attr({"aria-labelledby":c,"aria-live":"polite","aria-relevant":"additions",role:"form"});e(k+', [href = "#"]').attr("role","button")};b.init()};e.fn.slickQuiz=function(f){return this.each(function(){if(void 0===e(this).data("slickQuiz")){var c=new e.slickQuiz(this,f);e(this).data("slickQuiz",c);virtualclass.quiz.plugin=c}})}})(jQuery);(function(e,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(e.d3=e.d3||{})})(this,function(e){function f(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function c(a){1===a.length&&(a=b(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var f=d+e>>>1;0>a(b[f],c)?d=f+1:e=f}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var f=d+e>>>1;0<a(b[f],c)?e=f:d=f+1}return d}}}
function b(a){return function(b,c){return f(a(b),c)}}function a(a,b){return[a,b]}function h(a){return null===a?NaN:+a}function d(a,b){var c=a.length,d=0,e=-1,f=0,g,m=0;if(null==b)for(;++e<c;){if(!isNaN(g=h(a[e]))){var q=g-f;f+=q/++d;m+=q*(g-f)}}else for(;++e<c;)isNaN(g=h(b(a[e],e,a)))||(q=g-f,f+=q/++d,m+=q*(g-f));if(1<d)return m/(d-1)}function g(a,b){return(a=d(a,b))?Math.sqrt(a):a}function k(a,b){var c=a.length,d=-1,e,f,g;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(f=g=e;++d<c;)null!=(e=
a[d])&&(f>e&&(f=e),g<e&&(g=e))}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(f=g=e;++d<c;)null!=(e=b(a[d],d,a))&&(f>e&&(f=e),g<e&&(g=e));return[f,g]}function l(a){return function(){return a}}function n(a){return a}function p(a,b,c){a=+a;b=+b;c=2>(e=arguments.length)?(b=a,a=0,1):3>e?1:+c;for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c))|0,f=Array(e);++d<e;)f[d]=a+d*c;return f}function r(a,b,c){var d,e=-1,f;b=+b;a=+a;c=+c;if(a===b&&0<c)return[a];if(d=b<a){var g=a;a=b;b=g}if(0===(f=w(a,b,c))||!isFinite(f))return[];
if(0<f)for(a=Math.ceil(a/f),b=Math.floor(b/f),b=Array(g=Math.ceil(b-a+1));++e<g;)b[e]=(a+e)*f;else for(a=Math.floor(a*f),b=Math.ceil(b*f),b=Array(g=Math.ceil(a-b+1));++e<g;)b[e]=(a-e)/f;d&&b.reverse();return b}function w(a,b,c){b=(b-a)/Math.max(0,c);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=Nk?10:b>=Ok?5:b>=Pk?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=Nk?10:b>=Ok?5:b>=Pk?2:1)}function u(a,b,c){var d=Math.abs(b-a)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));
d/=c;d>=Nk?c*=10:d>=Ok?c*=5:d>=Pk&&(c*=2);return b<a?-c:c}function A(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function t(a,b,c){null==c&&(c=h);if(d=a.length){if(0>=(b=+b)||2>d)return+c(a[0],0,a);if(1<=b)return+c(a[d-1],d-1,a);var d;b*=d-1;d=Math.floor(b);var e=+c(a[d],d,a);a=+c(a[d+1],d+1,a);return e+(a-e)*(b-d)}}function z(a,b){var c=a.length,d=-1,e,f;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(f=e;++d<c;)null!=(e=a[d])&&e>f&&(f=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=
e)for(f=e;++d<c;)null!=(e=b(a[d],d,a))&&e>f&&(f=e);return f}function B(a){var b=a.length;var c=-1;for(var d=0,e,f;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(f=a[b],c=f.length;0<=--c;)e[--d]=f[c];return e}function D(a,b){var c=a.length,d=-1,e,f;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(f=e;++d<c;)null!=(e=a[d])&&f>e&&(f=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(f=e;++d<c;)null!=(e=b(a[d],d,a))&&f>e&&(f=e);return f}function y(a){if(!(f=a.length))return[];for(var b=-1,c=
D(a,E),d=Array(c);++b<c;)for(var e=-1,f,g=d[b]=Array(f);++e<f;)g[e]=a[e][b];return d}function E(a){return a.length}function x(a){return a}function H(a){return"translate("+(a+.5)+",0)"}function F(a){return"translate(0,"+(a+.5)+")"}function m(a){return function(b){return+a(b)}}function q(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return+a(c)+b}}function G(){return!this.__axis}function I(a,b){function c(c){var n=null==e?b.ticks?b.ticks.apply(b,d):b.domain():
e,J=null==f?b.tickFormat?b.tickFormat.apply(b,d):x:f,L=Math.max(g,0)+k,nb=b.range(),p=+nb[0]+.5;nb=+nb[nb.length-1]+.5;var Q=(b.bandwidth?q:m)(b.copy()),N=c.selection?c.selection():c,r=N.selectAll(".domain").data([null]);n=N.selectAll(".tick").data(n,b).order();var t=n.exit(),I=n.enter().append("g").attr("class","tick"),u=n.select("line"),ja=n.select("text");r=r.merge(r.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));n=n.merge(I);u=u.merge(I.append("line").attr("stroke",
"currentColor").attr(Oa+"2",l*g));ja=ja.merge(I.append("text").attr("fill","currentColor").attr(Oa,l*L).attr("dy",1===a?"0em":3===a?"0.71em":"0.32em"));c!==N&&(r=r.transition(c),n=n.transition(c),u=u.transition(c),ja=ja.transition(c),t=t.transition(c).attr("opacity",1E-6).attr("transform",function(a){return isFinite(a=Q(a))?C(a):this.getAttribute("transform")}),I.attr("opacity",1E-6).attr("transform",function(a){var b=this.parentNode.__axis;return C(b&&isFinite(b=b(a))?b:Q(a))}));t.remove();r.attr("d",
4===a||2==a?h?"M"+l*h+","+p+"H0.5V"+nb+"H"+l*h:"M0.5,"+p+"V"+nb:h?"M"+p+","+l*h+"V0.5H"+nb+"V"+l*h:"M"+p+",0.5H"+nb);n.attr("opacity",1).attr("transform",function(a){return C(Q(a))});u.attr(Oa+"2",l*g);ja.attr(Oa,l*L).text(J);N.filter(G).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===a?"start":4===a?"end":"middle");N.each(function(){this.__axis=Q})}var d=[],e=null,f=null,g=6,h=6,k=3,l=1===a||4===a?-1:1,Oa=4===a||2===a?"x":"y",C=1===a||3===a?H:F;c.scale=
function(a){return arguments.length?(b=a,c):b};c.ticks=function(){return d=Qk.call(arguments),c};c.tickArguments=function(a){return arguments.length?(d=null==a?[]:Qk.call(a),c):d.slice()};c.tickValues=function(a){return arguments.length?(e=null==a?null:Qk.call(a),c):e&&e.slice()};c.tickFormat=function(a){return arguments.length?(f=a,c):f};c.tickSize=function(a){return arguments.length?(g=h=+a,c):g};c.tickSizeInner=function(a){return arguments.length?(g=+a,c):g};c.tickSizeOuter=function(a){return arguments.length?
(h=+a,c):h};c.tickPadding=function(a){return arguments.length?(k=+a,c):k};return c}function M(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new S(c)}function S(a){this._=a}function ia(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");0<=d&&(c=a.slice(d+1),a=a.slice(0,d));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function za(a,b,c){for(var d=0,e=a.length;d<
e;++d)if(a[d].name===b){a[d]=yo;a=a.slice(0,d).concat(a.slice(d+1));break}null!=c&&a.push({name:b,value:c});return a}function W(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return Rk.hasOwnProperty(b)?{space:Rk[b],local:a}:a}function X(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function aa(a){return function(){return this.ownerDocument.createElementNS(a.space,
a.local)}}function U(a){a=W(a);return(a.local?aa:X)(a)}function Z(){}function sa(a){return null==a?Z:function(){return this.querySelector(a)}}function ca(){return[]}function ea(a){return null==a?ca:function(){return this.querySelectorAll(a)}}function la(a){return function(){return this.matches(a)}}function Aa(a){return Array(a.length)}function Qa(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function yb(a){return function(){return a}}
function ya(a,b,c,d,e,f){for(var g=0,m,h=b.length,q=f.length;g<q;++g)(m=b[g])?(m.__data__=f[g],d[g]=m):c[g]=new Qa(a,f[g]);for(;g<h;++g)if(m=b[g])e[g]=m}function Kb(a,b,c,d,e,f,g){var m,h,q={},k=b.length,l=f.length,Oa=Array(k),C;for(m=0;m<k;++m)if(h=b[m])Oa[m]=C="$"+g.call(h,h.__data__,m,b),C in q?e[m]=h:q[C]=h;for(m=0;m<l;++m)C="$"+g.call(a,f[m],m,f),(h=q[C])?(d[m]=h,h.__data__=f[m],q[C]=null):c[m]=new Qa(a,f[m]);for(m=0;m<k;++m)(h=b[m])&&q[Oa[m]]===h&&(e[m]=h)}function Ta(a,b){return a<b?-1:a>b?
1:a>=b?0:NaN}function Za(a){return function(){this.removeAttribute(a)}}function Na(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Ra(a,b){return function(){this.setAttribute(a,b)}}function Ca(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function R(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function Da(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,
a.local):this.setAttributeNS(a.space,a.local,c)}}function xb(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Ba(a){return function(){this.style.removeProperty(a)}}function Ya(a,b,c){return function(){this.style.setProperty(a,b,c)}}function ba(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function gc(a,b){return a.style.getPropertyValue(b)||xb(a).getComputedStyle(a,null).getPropertyValue(b)}
function gb(a){return function(){delete this[a]}}function O(a,b){return function(){this[a]=b}}function v(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Ea(a){return a.classList||new fa(a)}function fa(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function Lb(a,b){a=Ea(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function Vc(a,b){a=Ea(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function mb(a){return function(){Lb(this,
a)}}function Ia(a){return function(){Vc(this,a)}}function $a(a,b){return function(){(b.apply(this,arguments)?Lb:Vc)(this,a)}}function Ud(){this.textContent=""}function uc(a){return function(){this.textContent=a}}function Ka(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function Rb(){this.innerHTML=""}function Nc(a){return function(){this.innerHTML=a}}function Vd(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function zf(){this.nextSibling&&
this.parentNode.appendChild(this)}function vb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cc(){return null}function vh(){var a=this.parentNode;a&&a.removeChild(this)}function le(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Ie(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function wb(a,b,c){a=xd(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&
8)||a.call(this,b)}}function xd(a,b,c){return function(d){var f=e.event;e.event=d;try{a.call(this,this.__data__,b,c)}finally{e.event=f}}}function mf(a){return a.trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");0<=c&&(b=a.slice(c+1),a=a.slice(0,c));return{type:a,name:b}})}function Ac(a){return function(){var b=this.__on;if(b){for(var c=0,d=-1,e=b.length,f;c<e;++c)(f=b[c],a.type&&f.type!==a.type||f.name!==a.name)?b[++d]=f:this.removeEventListener(f.type,f.listener,f.capture);++d?b.length=
d:delete this.__on}}}function Kc(a,b,c){var d=Sk.hasOwnProperty(a.type)?wb:xd;return function(e,f,g){e=this.__on;var m;f=d(b,f,g);if(e){g=0;for(var h=e.length;g<h;++g)if((m=e[g]).type===a.type&&m.name===a.name){this.removeEventListener(m.type,m.listener,m.capture);this.addEventListener(m.type,m.listener=f,m.capture=c);m.value=b;return}}this.addEventListener(a.type,f,c);m={type:a.type,name:a.name,value:b,listener:f,capture:c};e?e.push(m):this.__on=[m]}}function vc(a,b,c,d){var f=e.event;a.sourceEvent=
e.event;e.event=a;try{return b.apply(c,d)}finally{e.event=f}}function sc(a,b,c){var d=xb(a),e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1));a.dispatchEvent(e)}function Tc(a,b){return function(){return sc(this,a,b)}}function Nd(a,b){return function(){return sc(this,a,b.apply(this,arguments))}}function jb(a,b){this._groups=a;this._parents=b}function Xa(){return new jb([[document.documentElement]],
Tk)}function Fb(a){return"string"===typeof a?new jb([[document.querySelector(a)]],[document.documentElement]):new jb([[a]],Tk)}function oe(){return new Oc}function Oc(){this._="@"+(++zo).toString(36)}function Af(){for(var a=e.event,b;b=a.sourceEvent;)a=b;return a}function Pe(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,
b.clientY-c.top-a.clientTop]}function hc(a){var b=Af();b.changedTouches&&(b=b.changedTouches[0]);return Pe(a,b)}function K(a,b,c){3>arguments.length&&(c=b,b=Af().changedTouches);for(var d=0,e=b?b.length:0,f;d<e;++d)if((f=b[d]).identifier===c)return Pe(a,f);return null}function yd(){e.event.preventDefault();e.event.stopImmediatePropagation()}function Zc(a){var b=a.document.documentElement;a=Fb(a).on("dragstart.drag",yd,!0);if("onselectstart"in b)a.on("selectstart.drag",yd,!0);else b.__noselect=b.style.MozUserSelect,
b.style.MozUserSelect="none"}function wc(a,b){var c=a.document.documentElement,d=Fb(a).on("dragstart.drag",null);b&&(d.on("click.drag",yd,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function Qe(a){return function(){return a}}function pe(a,b,c,d,e,f,g,m,h,q){this.target=a;this.type=b;this.subject=c;this.identifier=d;this.active=e;this.x=f;this.y=g;this.dx=m;this.dy=h;this._=q}
function Hg(){return!e.event.button}function Je(){return this.parentNode}function rb(a){return null==a?{x:e.event.x,y:e.event.y}:a}function rd(){return"ontouchstart"in this}function xa(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function Dc(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function fb(){}function Ua(a){var b;a=(a+"").trim().toLowerCase();return(b=sm.exec(a))?(b=parseInt(b[1],16),new Fa(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=jd.exec(a))?sb(parseInt(b[1],
16)):(b=tm.exec(a))?new Fa(b[1],b[2],b[3],1):(b=um.exec(a))?new Fa(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Ao.exec(a))?kb(b[1],b[2],b[3],b[4]):(b=vm.exec(a))?kb(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Bo.exec(a))?Xb(b[1],b[2]/100,b[3]/100,1):(b=wm.exec(a))?Xb(b[1],b[2]/100,b[3]/100,b[4]):Dj.hasOwnProperty(a)?sb(Dj[a]):"transparent"===a?new Fa(NaN,NaN,NaN,0):null}function sb(a){return new Fa(a>>16&255,a>>8&255,a&255,1)}function kb(a,b,c,d){0>=d&&(a=b=c=NaN);return new Fa(a,b,c,d)}function Uc(a){a instanceof
fb||(a=Ua(a));if(!a)return new Fa;a=a.rgb();return new Fa(a.r,a.g,a.b,a.opacity)}function Qb(a,b,c,d){return 1===arguments.length?Uc(a):new Fa(a,b,c,null==d?1:d)}function Fa(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function Wb(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function Xb(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new Ec(a,b,c,d)}function Od(a){if(a instanceof Ec)return new Ec(a.h,a.s,a.l,a.opacity);a instanceof fb||
(a=Ua(a));if(!a)return new Ec;if(a instanceof Ec)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,m=f-e,h=(f+e)/2;m?(g=b===f?(c-d)/m+6*(c<d):c===f?(d-b)/m+2:(b-c)/m+4,m/=.5>h?f+e:2-f-e,g*=60):m=0<h&&1>h?0:g;return new Ec(g,m,h,a.opacity)}function te(a,b,c,d){return 1===arguments.length?Od(a):new Ec(a,b,c,null==d?1:d)}function Ec(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Le(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*
(240-a)/60:b)}function Ke(a){if(a instanceof tb)return new tb(a.l,a.a,a.b,a.opacity);if(a instanceof cb){if(isNaN(a.h))return new tb(a.l,0,0,a.opacity);var b=a.h*Tb;return new tb(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof Fa||(a=Uc(a));var c=Ng(a.r),d=Ng(a.g),e=Ng(a.b);b=Bf(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var f=c=b;else f=Bf((.4360747*c+.3850649*d+.1430804*e)/.96422),c=Bf((.0139322*c+.0971045*d+.7141733*e)/.82521);return new tb(116*b-16,500*(f-b),200*(b-c),a.opacity)}
function Jb(a,b,c,d){return 1===arguments.length?Ke(a):new tb(a,b,c,null==d?1:d)}function tb(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function Bf(a){return a>J?Math.pow(a,1/3):a/C+N}function Ma(a){return a>L?a*a*a:C*(a-N)}function Wd(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Ng(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Va(a){if(a instanceof cb)return new cb(a.h,a.c,a.l,a.opacity);a instanceof tb||(a=Ke(a));if(0===a.a&&0===
a.b)return new cb(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Fd;return new cb(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function $c(a,b,c,d){return 1===arguments.length?Va(a):new cb(a,b,c,null==d?1:d)}function cb(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function zb(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof zd)e=new zd(e.h,e.s,e.l,e.opacity);else{e instanceof Fa||(e=Uc(e));var f=e.g/255,g=e.b/255,m=(da*g+e.r/255*-1.7884503806-3.5172982438*f)/(da+-1.7884503806-
3.5172982438);g-=m;var h=(1.97294*(f-m)- -.29227*g)/-.90649;g=(f=Math.sqrt(h*h+g*g)/(1.97294*m*(1-m)))?Math.atan2(h,g)*Fd-120:NaN;e=new zd(0>g?g+360:g,f,m,e.opacity)}}else e=new zd(a,b,c,null==d?1:d);return e}function zd(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Pc(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function Og(a){var b=a.length-1;return function(c){var d=0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1];return Pc((c-
d/b)*b,0<d?a[d-1]:2*e-f,e,f,d<b-1?a[d+2]:2*f-e)}}function Re(a){var b=a.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*b);return Pc((c-d/b)*b,a[(d+b-1)%b],a[d%b],a[(d+1)%b],a[(d+2)%b])}}function Ad(a){return function(){return a}}function Xd(a,b){return function(c){return a+c*b}}function $f(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function Se(a,b){var c=b-a;return c?Xd(a,180<c||-180>c?c-360*Math.round(c/360):c):Ad(isNaN(a)?b:a)}function T(a){return 1===
(a=+a)?La:function(b,c){return c-b?$f(b,c,a):Ad(isNaN(b)?c:b)}}function La(a,b){var c=b-a;return c?Xd(a,c):Ad(isNaN(a)?b:a)}function ag(a){return function(b){var c=b.length,d=Array(c),e=Array(c),f=Array(c),g;for(g=0;g<c;++g){var m=Qb(b[g]);d[g]=m.r||0;e[g]=m.g||0;f[g]=m.b||0}d=a(d);e=a(e);f=a(f);m.opacity=1;return function(a){m.r=d(a);m.g=e(a);m.b=f(a);return m+""}}}function bg(a,b){var c=b?b.length:0,d=a?Math.min(c,a.length):0,e=Array(d),f=Array(c),g;for(g=0;g<d;++g)e[g]=jc(a[g],b[g]);for(;g<c;++g)f[g]=
b[g];return function(a){for(g=0;g<d;++g)f[g]=e[g](a);return f}}function Yd(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}}function Yb(a,b){return a=+a,b-=a,function(c){return a+b*c}}function Cf(a,b){var c={},d={},e;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(e in b)e in a?c[e]=jc(a[e],b[e]):d[e]=b[e];return function(a){for(e in c)d[e]=c[e](a);return d}}function ic(a){return function(){return a}}function Vf(a){return function(b){return a(b)+
""}}function Fc(a,b){var c=na.lastIndex=kd.lastIndex=0,d,e,f,g=-1,m=[],h=[];a+="";for(b+="";(d=na.exec(a))&&(e=kd.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),m[g]?m[g]+=f:m[++g]=f),(d=d[0])===(e=e[0])?m[g]?m[g]+=e:m[++g]=e:(m[++g]=null,h.push({i:g,x:Yb(d,e)})),c=kd.lastIndex;c<b.length&&(f=b.slice(c),m[g]?m[g]+=f:m[++g]=f);return 2>m.length?h[0]?Vf(h[0].x):ic(b):(b=h.length,function(a){for(var c=0,d;c<b;++c)m[(d=h[c]).i]=d.x(a);return m.join("")})}function jc(a,b){var c=typeof b,d;return null==b||"boolean"===
c?Ad(b):("number"===c?Yb:"string"===c?(d=Ua(b))?(b=d,ja):Fc:b instanceof Ua?ja:b instanceof Date?Yd:Array.isArray(b)?bg:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||isNaN(b)?Cf:Yb)(a,b)}function Bd(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}}function Te(a,b,c,d,e,f){var g,m,h;if(g=Math.sqrt(a*a+b*b))a/=g,b/=g;if(h=a*c+b*d)c-=a*h,d-=b*h;if(m=Math.sqrt(c*c+d*d))c/=m,d/=m,h/=m;a*d<b*c&&(a=-a,b=-b,h=-h,g=-g);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*Ej,
skewX:Math.atan(h)*Ej,scaleX:g,scaleY:m}}function nf(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,m){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),m.push({i:g-4,x:Yb(a,e)},{i:g-2,x:Yb(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:Yb(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function m(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:Yb(a,b)}):b&&c.push(e(c)+
"skewX("+b+d)}function h(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:Yb(a,c)},{i:f-2,x:Yb(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);f(b.translateX,b.translateY,c.translateX,c.translateY,d,e);g(b.rotate,c.rotate,d,e);m(b.skewX,c.skewX,d,e);h(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function Zb(a){return((a=
Math.exp(a))+1/a)/2}function Pg(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var f=b[0]-c,g=b[1]-d,m=f*f+g*g;if(1E-12>m){var h=Math.log(a/e)/Ci;a=function(a){return[c+a*f,d+a*g,e*Math.exp(Ci*a*h)]}}else{var q=Math.sqrt(m);b=(a*a-e*e+4*m)/(4*e*q);a=(a*a-e*e-4*m)/(4*a*q);var k=Math.log(Math.sqrt(b*b+1)-b);h=(Math.log(Math.sqrt(a*a+1)-a)-k)/Ci;a=function(a){a*=h;var b=Zb(k),m=Ci*a+k;var l=((m=Math.exp(2*m))-1)/(m+1);var C=k;m=((C=Math.exp(C))-1/C)/2;l=e/(2*q)*(b*l-m);return[c+l*f,d+l*g,e*b/Zb(Ci*a+k)]}}a.duration=
1E3*h;return a}function Cd(a){return function(b,c){var d=a((b=te(b)).h,(c=te(c)).h),e=La(b.s,c.s),f=La(b.l,c.l),g=La(b.opacity,c.opacity);return function(a){b.h=d(a);b.s=e(a);b.l=f(a);b.opacity=g(a);return b+""}}}function Ue(a){return function(b,c){var d=a((b=$c(b)).h,(c=$c(c)).h),e=La(b.c,c.c),f=La(b.l,c.l),g=La(b.opacity,c.opacity);return function(a){b.h=d(a);b.c=e(a);b.l=f(a);b.opacity=g(a);return b+""}}}function ad(a){return function xo(b){function c(c,d){var e=a((c=zb(c)).h,(d=zb(d)).h),f=La(c.s,
d.s),g=La(c.l,d.l),m=La(c.opacity,d.opacity);return function(a){c.h=e(a);c.s=f(a);c.l=g(Math.pow(a,b));c.opacity=m(a);return c+""}}b=+b;c.gamma=xo;return c}(1)}function $b(){return Di||(pq(Dd),Di=Uk.now()+xm)}function Dd(){Di=0}function Qc(){this._call=this._time=this._next=null}function bd(a,b,c){var d=new Qc;d.restart(a,b,c);return d}function cd(){$b();++Fj;for(var a=ym,b;a;)0<=(b=Di-a._time)&&a._call.call(null,b),a=a._next;--Fj}function Df(){Di=(zm=Uk.now())+xm;Fj=Vk=0;try{cd()}finally{Fj=0;for(var a,
b=ym,c,d=Infinity;b;)b._call?(d>b._time&&(d=b._time),a=b,b=b._next):(c=b._next,b._next=null,b=a?a._next=c:ym=c);Wk=a;pa(d);Di=0}}function qc(){var a=Uk.now(),b=a-zm;1E3<b&&(xm-=b,zm=a)}function pa(a){Fj||(Vk&&(Vk=clearTimeout(Vk)),24<a-Di?(Infinity>a&&(Vk=setTimeout(Df,a-Uk.now()-xm)),Xk&&(Xk=clearInterval(Xk))):(Xk||(zm=Uk.now(),Xk=setInterval(qc,1E3)),Fj=1,pq(Df)))}function He(a,b,c){var d=new Qc;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function fc(a,b,c,d,e,f){var g=
a.__transition;if(!g)a.__transition={};else if(c in g)return;Tf(a,c,{name:b,index:d,group:e,on:Es,tween:Fs,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function pd(a,b){a=ra(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function qd(a,b){a=ra(a,b);if(3<a.state)throw Error("too late; already running");return a}function ra(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function Tf(a,b,c){function d(h){var q,
k;if(1!==c.state)return f();for(C in g){var l=g[C];if(l.name===c.name){if(3===l.state)return He(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,l.index,l.group),delete g[C]):+C<b&&(l.state=6,l.timer.stop(),l.on.call("cancel",a,a.__data__,l.index,l.group),delete g[C])}}He(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(h))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;m=Array(k=c.tween.length);var C=0;for(q=
-1;C<k;++C)if(l=c.tween[C].value.call(a,a.__data__,c.index,c.group))m[++q]=l;m.length=q+1}}function e(b){b=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(f),c.state=5,1);for(var d=-1,e=m.length;++d<e;)m[d].call(a,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),f())}function f(){c.state=6;c.timer.stop();delete g[b];for(var d in g)return;delete a.__transition}var g=a.__transition,m;g[b]=c;c.timer=bd(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-
c.delay)},0,c.time)}function rc(a,b){var c=a.__transition,d,e=!0,f;if(c){b=null==b?null:b+"";for(f in c)if((d=c[f]).name!==b)e=!1;else{var g=2<d.state&&5>d.state;d.state=6;d.timer.stop();d.on.call(g?"interrupt":"cancel",a,a.__data__,d.index,d.group);delete c[f]}e&&delete a.__transition}}function Uf(a,b){var c,d;return function(){var e=qd(this,a),f=e.tween;if(f!==c){d=c=f;f=0;for(var g=d.length;f<g;++f)if(d[f].name===b){d=d.slice();d.splice(f,1);break}}e.tween=d}}function Gg(a,b,c){var d,e;if("function"!==
typeof c)throw Error();return function(){var f=qd(this,a),g=f.tween;if(g!==d){e=(d=g).slice();g={name:b,value:c};for(var m=0,h=e.length;m<h;++m)if(e[m].name===b){e[m]=g;break}m===h&&e.push(g)}f.tween=e}}function mh(a,b,c){var d=a._id;a.each(function(){var a=qd(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return ra(a,d).value[b]}}function ne(a,b){var c;return("number"===typeof b?Yb:b instanceof Ua?ja:(c=Ua(b))?(b=c,ja):Fc)(a,b)}function Ek(a){return function(){this.removeAttribute(a)}}
function li(a){return function(){this.removeAttributeNS(a.space,a.local)}}function nj(a,b,c){var d,e=c+"",f;return function(){var g=this.getAttribute(a);return g===e?null:g===d?f:f=b(d=g,c)}}function mi(a,b,c){var d,e=c+"",f;return function(){var g=this.getAttributeNS(a.space,a.local);return g===e?null:g===d?f:f=b(d=g,c)}}function sf(a,b,c){var d,e,f;return function(){var g=c(this);if(null==g)return void this.removeAttribute(a);var m=this.getAttribute(a);var h=g+"";return m===h?null:m===d&&h===e?
f:(e=h,f=b(d=m,g))}}function pj(a,b,c){var d,e,f;return function(){var g=c(this);if(null==g)return void this.removeAttributeNS(a.space,a.local);var m=this.getAttributeNS(a.space,a.local);var h=g+"";return m===h?null:m===d&&h===e?f:(e=h,f=b(d=m,g))}}function Qd(a,b){return function(c){this.setAttribute(a,b(c))}}function th(a,b){return function(c){this.setAttributeNS(a.space,a.local,b(c))}}function tf(a,b){function c(){var c=b.apply(this,arguments);c!==e&&(d=(e=c)&&th(a,c));return d}var d,e;c._value=
b;return c}function se(a,b){function c(){var c=b.apply(this,arguments);c!==e&&(d=(e=c)&&Qd(a,c));return d}var d,e;c._value=b;return c}function oh(a,b){return function(){pd(this,a).delay=+b.apply(this,arguments)}}function uf(a,b){return b=+b,function(){pd(this,a).delay=b}}function ph(a,b){return function(){qd(this,a).duration=+b.apply(this,arguments)}}function lj(a,b){return b=+b,function(){qd(this,a).duration=b}}function qj(a,b){if("function"!==typeof b)throw Error();return function(){qd(this,a).ease=
b}}function Kg(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function jj(a,b,c){var d,e,f=Kg(b)?pd:qd;return function(){var g=f(this,a),m=g.on;if(m!==d)(e=(d=m).copy()).on(b,c);g.on=e}}function mj(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function nh(a,b){var c,d,e;return function(){var f=gc(this,a),g=(this.style.removeProperty(a),gc(this,a));return f===
g?null:f===c&&g===d?e:e=b(c=f,d=g)}}function sh(a){return function(){this.style.removeProperty(a)}}function rh(a,b,c){var d,e=c+"",f;return function(){var g=gc(this,a);return g===e?null:g===d?f:f=b(d=g,c)}}function Lg(a,b,c){var d,e,f;return function(){var g=gc(this,a),m=c(this),h=m+"";null==m&&(h=m=(this.style.removeProperty(a),gc(this,a)));return g===h?null:g===d&&h===e?f:(e=h,f=b(d=g,m))}}function ni(a,b){var c,d,e,f="style."+b,g="end."+f,m;return function(){var h=qd(this,a),q=h.on,k=null==h.value[f]?
m||(m=sh(b)):void 0;if(q!==c||e!==k)(d=(c=q).copy()).on(g,e=k);h.on=d}}function kj(a,b,c){return function(d){this.style.setProperty(a,b(d),c)}}function Fk(a,b,c){function d(){var d=b.apply(this,arguments);d!==f&&(e=(f=d)&&kj(a,d,c));return e}var e,f;d._value=b;return d}function Gk(a){return function(){this.textContent=a}}function vf(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function Mc(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function uh(a){return Xa().transition(a)}
function Wf(a){return(1>=(a*=2)?a*a:--a*(2-a)+1)/2}function wf(a){return(1>=(a*=2)?a*a*a:(a-=2)*a*a+2)/2}function Oe(a){return(1-Math.cos(qq*a))/2}function oi(a){return(1>=(a*=2)?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function ma(a){return(1>=(a*=2)?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function Bc(a){return(a=+a)<Co?Am*a*a:a<Gs?Am*(a-=Hs)*a+.75:a<Is?Am*(a-=Js)*a+.9375:Am*(a-=Ks)*a+.984375}function Mg(a){return function(){return a}}function Rd(a,b,c){this.target=a;this.type=b;this.selection=
c}function Sa(){e.event.preventDefault();e.event.stopImmediatePropagation()}function ud(a){return{type:a}}function Yc(){return!e.event.button}function wd(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function xf(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function yf(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function qh(a){function b(b){var d=b.property("__brush",m).selectAll(".overlay").data([ud("overlay")]);d.enter().append("rect").attr("class",
"overlay").attr("pointer-events","all").attr("cursor",$g.overlay).merge(d).each(function(){var a=xf(this).extent;Fb(this).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1])});b.selectAll(".selection").data([ud("selection")]).enter().append("rect").attr("class","selection").attr("cursor",$g.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");d=b.selectAll(".handle").data(a.handles,function(a){return a.type});
d.exit().remove();d.enter().append("rect").attr("class",function(a){return"handle handle--"+a.type}).attr("cursor",function(a){return $g[a.type]});b.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",g)}function c(){var a=Fb(this),b=xf(this).selection;b?(a.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),a.selectAll(".handle").style("display",
null).attr("x",function(a){return"e"===a.type[a.type.length-1]?b[1][0]-l/2:b[0][0]-l/2}).attr("y",function(a){return"s"===a.type[0]?b[1][1]-l/2:b[0][1]-l/2}).attr("width",function(a){return"n"===a.type||"s"===a.type?b[1][0]-b[0][0]+l:l}).attr("height",function(a){return"e"===a.type||"w"===a.type?b[1][1]-b[0][1]+l:l})):a.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(a,b){return a.__brush.emitter||new f(a,b)}function f(a,
b){this.that=a;this.args=b;this.state=a.__brush;this.active=0}function g(){function b(){var a=hc(k);!w||Pb||z||(Math.abs(a[0]-Fd[0])>Math.abs(a[1]-Fd[1])?z=!0:Pb=!0);Fd=a;A=!0;Sa();f()}function f(){na=Fd[0]-F[0];nb=Fd[1]-F[1];switch(n){case Do:case rq:J&&(na=Math.max(Q-N,Math.min(I-u,na)),Tb=N+na,M=u+na);L&&(nb=Math.max(r-t,Math.min(ja-da,nb)),B=t+nb,y=da+nb);break;case Gj:0>J?(na=Math.max(Q-N,Math.min(I-N,na)),Tb=N+na,M=u):0<J&&(na=Math.max(Q-u,Math.min(I-u,na)),Tb=N,M=u+na);0>L?(nb=Math.max(r-t,
Math.min(ja-t,nb)),B=t+nb,y=da):0<L&&(nb=Math.max(r-da,Math.min(ja-da,nb)),B=t,y=da+nb);break;case Hj:J&&(Tb=Math.max(Q,Math.min(I,N-na*J)),M=Math.max(Q,Math.min(I,u+na*J))),L&&(B=Math.max(r,Math.min(ja,t-nb*L)),y=Math.max(r,Math.min(ja,da+nb*L)))}if(M<Tb){J*=-1;var a=N;N=u;u=a;a=Tb;Tb=M;M=a;l in sq&&D.attr("cursor",$g[l=sq[l]])}y<B&&(L*=-1,a=t,t=da,da=a,a=B,B=y,y=a,l in tq&&D.attr("cursor",$g[l=tq[l]]));G.selection&&(Oa=G.selection);Pb&&(Tb=Oa[0][0],M=Oa[1][0]);z&&(B=Oa[0][1],y=Oa[1][1]);if(Oa[0][0]!==
Tb||Oa[0][1]!==B||Oa[1][0]!==M||Oa[1][1]!==y)G.selection=[[Tb,B],[M,y]],c.call(k),x.brush()}function g(){e.event.stopImmediatePropagation();if(e.event.touches){if(e.event.touches.length)return;C&&clearTimeout(C);C=setTimeout(function(){C=null},500);kd.on("touchmove.brush touchend.brush touchcancel.brush",null)}else wc(e.event.view,A),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);kd.attr("pointer-events","all");D.attr("cursor",$g.overlay);G.selection&&(Oa=G.selection);yf(Oa)&&
(G.selection=null,c.call(k));x.end()}function m(){switch(e.event.keyCode){case 16:w=J&&L;break;case 18:n===Gj&&(J&&(u=M-na*J,N=Tb+na*J),L&&(da=y-nb*L,t=B+nb*L),n=Hj,f());break;case 32:if(n===Gj||n===Hj)0>J?u=M-na:0<J&&(N=Tb-na),0>L?da=y-nb:0<L&&(t=B-nb),n=Do,D.attr("cursor",$g.selection),f();break;default:return}Sa()}function h(){switch(e.event.keyCode){case 16:w&&(Pb=z=w=!1,f());break;case 18:n===Hj&&(0>J?u=M:0<J&&(N=Tb),0>L?da=y:0<L&&(t=B),n=Gj,f());break;case 32:n===Do&&(e.event.altKey?(J&&(u=
M-na*J,N=Tb+na*J),L&&(da=y-nb*L,t=B+nb*L),n=Hj):(0>J?u=M:0<J&&(N=Tb),0>L?da=y:0<L&&(t=B),n=Gj),D.attr("cursor",$g[l]),f());break;default:return}Sa()}if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return Sa()}else if(C)return;if(q.apply(this,arguments)){var k=this,l=e.event.target.__data__.type,n="selection"===(e.event.metaKey?l="overlay":l)?rq:e.event.altKey?Hj:Gj,J=a===Bm?null:Ms[l],L=a===Cm?null:Ns[l],G=xf(k),p=G.extent,Oa=G.selection,Q=p[0][0],N,r=p[0][1],t,I=p[1][0],
u,ja=p[1][1],da,na,nb,A,w=J&&L&&e.event.shiftKey,Pb,z,F=hc(k),Fd=F,x=d(k,arguments).beforestart();"overlay"===l?G.selection=Oa=[[N=a===Bm?Q:F[0],t=a===Cm?r:F[1]],[u=a===Bm?I:N,da=a===Cm?ja:t]]:(N=Oa[0][0],t=Oa[0][1],u=Oa[1][0],da=Oa[1][1]);var Tb=N;var B=t;var M=u;var y=da;var kd=Fb(k).attr("pointer-events","none"),D=kd.selectAll(".overlay").attr("cursor",$g[l]);if(e.event.touches)kd.on("touchmove.brush",b,!0).on("touchend.brush touchcancel.brush",g,!0);else{var X=Fb(e.event.view).on("keydown.brush",
m,!0).on("keyup.brush",h,!0).on("mousemove.brush",b,!0).on("mouseup.brush",g,!0);Zc(e.event.view)}e.event.stopImmediatePropagation();rc(k);c.call(k);x.start()}}function m(){var b=this.__brush||{selection:null};b.extent=h.apply(this,arguments);b.dim=a;return b}var h=wd,q=Yc,k=M(b,"start","brush","end"),l=6,C;b.move=function(b,e){b.selection?b.on("start.brush",function(){d(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){d(this,arguments).end()}).tween("brush",function(){function b(a){g.selection=
1===a&&yf(q)?null:k(a);c.call(f);m.brush()}var f=this,g=f.__brush,m=d(f,arguments),h=g.selection,q=a.input("function"===typeof e?e.apply(this,arguments):e,g.extent),k=jc(h,q);return h&&q?b:b(1)}):b.each(function(){var b=arguments,f=this.__brush,g=a.input("function"===typeof e?e.apply(this,b):e,f.extent);b=d(this,b).beforestart();rc(this);f.selection=null==g||yf(g)?null:g;c.call(this);b.start().brush().end()})};f.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=
!0);return this},start:function(){this.starting&&(this.starting=!1,this.emit("start"));return this},brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&(delete this.state.emitter,this.emit("end"));return this},emit:function(c){vc(new Rd(b,c,a.output(this.state.selection)),k.apply,k,[c,this.that,this.args])}};b.extent=function(a){return arguments.length?(h="function"===typeof a?a:Mg([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),b):h};b.filter=function(a){return arguments.length?
(q="function"===typeof a?a:Mg(!!a),b):q};b.handleSize=function(a){return arguments.length?(l=+a,b):l};b.on=function(){var a=k.on.apply(k,arguments);return a===k?b:a};return b}function Me(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}function Wc(a){return function(){return a}}function Zf(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function Sd(){return new Zf}function Td(a){return a.source}function pb(a){return a.target}function pi(a){return a.radius}
function ij(a){return a.startAngle}function qi(a){return a.endAngle}function Ne(){}function hb(a,b){var c=new Ne;if(a instanceof Ne)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d=-1,e=a.length,f;if(null==b)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b(f=a[d],d,a),f)}else if(a)for(d in a)c.set(d,a[d]);return c}function Hk(){return{}}function vd(a,b,c){a[b]=c}function Ig(){return hb()}function Lc(a,b,c){a.set(b,c)}function sd(){}function of(a,b){var c=new sd;if(a instanceof sd)a.each(function(a){c.add(a)});
else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}function hj(a,b){return a-b}function td(a){return function(){return a}}function Pa(){}function Vb(){function a(a){var c=g(a);if(Array.isArray(c))c=c.slice().sort(hj);else{var d=k(a),e=d[0];d=d[1];c=u(e,d,c);c=p(Math.floor(e/c)*c,Math.floor(d/c)*c,c)}return c.map(function(c){return b(a,c)})}function b(a,b){var d=[],e=[];c(a,b,function(c){m(c,a,b);for(var f=0,g=c.length,h=c[g-1][1]*c[0][0]-
c[g-1][0]*c[0][1];++f<g;)h+=c[f-1][1]*c[f][0]-c[f-1][0]*c[f][1];0<h?d.push([c]):e.push(c)});e.forEach(function(a){for(var b=0,c=d.length,e;b<c;++b){a:{var f=(e=d[b])[0];for(var g=a,m=-1,h=g.length;++m<h;){b:{var q=f;for(var k=g[m],l=k[0],C=k[1],n=-1,J=0,L=q.length,G=L-1;J<L;G=J++){var p=q[J],Q=p[0],N=p[1],Oa=q[G];G=Oa[0];var t=Oa[1],r,I=p;p=Oa;Oa=k;if(r=(p[0]-I[0])*(Oa[1]-I[1])===(Oa[0]-I[0])*(p[1]-I[1]))I=I[r=+(I[0]===p[0])],Oa=Oa[r],p=p[r],r=I<=Oa&&Oa<=p||p<=Oa&&Oa<=I;if(r){q=0;break b}N>C!==t>
C&&l<(G-Q)*(C-N)/(t-N)+Q&&(n=-n)}q=n}if(q){f=q;break a}}f=0}if(-1!==f){e.push(a);break}}});return{type:"MultiPolygon",value:b,coordinates:d}}function c(a,b,c){function d(a){var b=[a[0][0]+q,a[0][1]+h];a=[a[1][0]+q,a[1][1]+h];var d=2*b[0]+b[1]*(e+1)*4,f=2*a[0]+a[1]*(e+1)*4,k,l;(k=m[d])?(l=g[f])?(delete m[k.end],delete g[l.start],k===l?(k.ring.push(a),c(k.ring)):g[k.start]=m[l.end]={start:k.start,end:l.end,ring:k.ring.concat(l.ring)}):(delete m[k.end],k.ring.push(a),m[k.end=f]=k):(k=g[f])?(l=m[d])?
(delete g[k.start],delete m[l.end],k===l?(k.ring.push(a),c(k.ring)):g[l.start]=m[k.end]={start:l.start,end:k.end,ring:l.ring.concat(k.ring)}):(delete g[k.start],k.ring.unshift(b),g[k.start=d]=k):g[d]=m[f]={start:d,end:f,ring:[b,a]}}var g=[],m=[],h;var q=h=-1;var k=a[0]>=b;for(ah[k<<1].forEach(d);++q<e-1;){var l=k;k=a[q+1]>=b;ah[l|k<<1].forEach(d)}for(ah[k<<0].forEach(d);++h<f-1;){q=-1;k=a[h*e+e]>=b;var C=a[h*e]>=b;for(ah[k<<1|C<<2].forEach(d);++q<e-1;){l=k;k=a[h*e+e+q+1]>=b;var n=C;C=a[h*e+q+1]>=
b;ah[l|k<<1|C<<2|n<<3].forEach(d)}ah[k|C<<3].forEach(d)}q=-1;C=a[h*e]>=b;for(ah[C<<2].forEach(d);++q<e-1;)n=C,C=a[h*e+q+1]>=b,ah[C<<2|n<<3].forEach(d);ah[C<<3].forEach(d)}function d(a,b,c){a.forEach(function(a){var d=a[0],g=a[1],m=d|0,h=g|0,q=b[h*e+m];if(0<d&&d<e&&m===d){var k=b[h*e+m-1];a[0]=d+(c-k)/(q-k)-.5}0<g&&g<f&&h===g&&(k=b[(h-1)*e+m],a[1]=g+(c-k)/(q-k)-.5)})}var e=1,f=1,g=A,m=d;a.contour=b;a.size=function(b){if(!arguments.length)return[e,f];var c=Math.ceil(b[0]),d=Math.ceil(b[1]);if(!(0<c&&
0<d))throw Error("invalid size");return e=c,f=d,a};a.thresholds=function(b){return arguments.length?(g="function"===typeof b?b:Array.isArray(b)?td(uq.call(b)):td(b),a):g};a.smooth=function(b){return arguments.length?(m=b?d:Pa,a):m===d};return a}function pf(a,b,c){for(var d=a.width,e=a.height,f=(c<<1)+1,g=0;g<e;++g)for(var m=0,h=0;m<d+c;++m)m<d&&(h+=a.data[m+g*d]),m>=c&&(m>=f&&(h-=a.data[m-f+g*d]),b.data[m-c+g*d]=h/Math.min(m+1,d-1+f-m,f))}function qf(a,b,c){for(var d=a.width,e=a.height,f=(c<<1)+1,
g=0;g<d;++g)for(var m=0,h=0;m<e+c;++m)m<e&&(h+=a.data[g+m*d]),m>=c&&(m>=f&&(h-=a.data[g+(m-f)*d]),b.data[g+(m-c)*d]=h/Math.min(m+1,e-1+f-m,f))}function rf(a){return a[0]}function Xc(a){return a[1]}function Xf(){return 1}function Yf(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function oj(a,b){var c=Yf(a);return function(d,e){return b(c(d),e,a)}}function Jg(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in
b||c.push(b[d]=d)});return c}function ha(a){function b(a,b){function c(){if(q)return Eo;if(k)return k=!1,vq;var b,c=g,d;if(34===a.charCodeAt(c)){for(;g++<e&&34!==a.charCodeAt(g)||34===a.charCodeAt(++g););(b=g)>=e?q=!0:10===(d=a.charCodeAt(g++))?k=!0:13===d&&(k=!0,10===a.charCodeAt(g)&&++g);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;g<e;){if(10===(d=a.charCodeAt(b=g++)))k=!0;else if(13===d)k=!0,10===a.charCodeAt(g)&&++g;else if(d!==f)continue;return a.slice(c,b)}return q=!0,a.slice(c,e)}var d=
[],e=a.length,g=0,m=0,h,q=0>=e,k=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(h=c())!==Eo;){for(var l=[];h!==vq&&h!==Eo;)l.push(h),h=c();b&&null==(l=b(l,m++))||d.push(l)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?oj(a,c):Yf(a)});a.columns=e||[];return a},parseRows:b,
format:function(b,c){null==c&&(c=Jg(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function qe(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.blob()}function tc(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.arrayBuffer()}function Pd(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.text()}function re(a,b){return fetch(a,b).then(Pd)}function Oh(a){return function(b,
c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=void 0);return re(b,c).then(function(b){return a(b,d)})}}function zj(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.json()}function si(a){return function(b,c){return re(b,c).then(function(b){return(new DOMParser).parseFromString(b,a)})}}function Nb(a){return function(){return a}}function ye(){return 1E-6*(Math.random()-.5)}function Hh(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,f=a._root;d={data:d};var g=a._x0,m=a._y0,h=a._x1,
q=a._y1,k,l,C,n;if(!f)return a._root=d,a;for(;f.length;)if((C=b>=(k=(g+h)/2))?g=k:h=k,(n=c>=(l=(m+q)/2))?m=l:q=l,e=f,!(f=f[C|=n<<1]))return e[C]=d,a;var J=+a._x.call(null,f.data);var L=+a._y.call(null,f.data);if(b===J&&c===L)return d.next=f,e?e[C]=d:a._root=d,a;do e=e?e[C]=Array(4):a._root=Array(4),(C=b>=(k=(g+h)/2))?g=k:h=k,(n=c>=(l=(m+q)/2))?m=l:q=l;while((C|=n<<1)===(n=(L>=l)<<1|J>=k));return e[n]=f,e[C]=d,a}function Ab(a,b,c,d,e){this.node=a;this.x0=b;this.y0=c;this.x1=d;this.y1=e}function Rg(a){return a[0]}
function Sg(a){return a[1]}function be(a,b,c){b=new yc(null==b?Rg:b,null==c?Sg:c,NaN,NaN,NaN,NaN);return null==a?b:b.addAll(a)}function yc(a,b,c,d,e,f){this._x=a;this._y=b;this._x0=c;this._y0=d;this._x1=e;this._y1=f;this._root=void 0}function we(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}function cc(a){return a.x+a.vx}function Tg(a){return a.y+a.vy}function wj(a){return a.index}function We(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function Aj(a){return a.x}
function zi(a){return a.y}function Ha(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+1)]}function Wa(a){return a=Ha(Math.abs(a)),a?a[1]:NaN}function Sb(a,b){return function(c,d){for(var e=c.length,f=[],g=0,m=a[0],h=0;0<e&&0<m;){h+m+1>d&&(m=Math.max(1,d-h));f.push(c.substring(e-=m,e+m));if((h+=m+1)>d)break;m=a[g=(g+1)%a.length]}return f.reverse().join(b)}}function Mk(a){return function(b){return b.replace(/[0-9]/g,
function(b){return a[+b]})}}function Zg(a){return new Hc(a)}function Hc(a){if(!(b=Os.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function db(a,b){b=Ha(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+
2).join("0")}function af(a){return a}function Ih(a){function b(a){function b(a){var b=G,d=Q,g,k;if("c"===p)d=N(a)+d,a="";else{a=+a;var t=0>a;a=N(Math.abs(a),J);if(L){var r=a.length,I=1,u=-1;a:for(;I<r;++I)switch(a[I]){case ".":u=g=I;break;case "0":0===u&&(u=I);g=I;break;default:if(0<u){if(!+a[I])break a;u=0}}a=0<u?a.slice(0,u)+a.slice(g+1):a}t&&0===+a&&(t=!1);b=(t?"("===q?q:"-":"-"===q||"("===q?"":q)+b;d=("s"===p?wq[8+xq/3]:"")+d+(t&&"("===q?")":"");if(Oa)for(t=-1,g=a.length;++t<g;)if(k=a.charCodeAt(t),
48>k||57<k){d=(46===k?e+a.slice(t+1):a.slice(t))+d;a=a.slice(0,t);break}}n&&!l&&(a=c(a,Infinity));k=b.length+a.length+d.length;t=k<C?Array(C-k+1).join(m):"";n&&l&&(a=c(t+a,t.length?C-d.length:Infinity),t="");switch(h){case "<":a=b+a+d+t;break;case "=":a=b+t+a+d;break;case "^":a=t.slice(0,k=t.length>>1)+b+a+d+t.slice(k);break;default:a=t+b+a+d}return f(a)}a=Zg(a);var m=a.fill,h=a.align,q=a.sign,k=a.symbol,l=a.zero,C=a.width,n=a.comma,J=a.precision,L=a.trim,p=a.type;"n"===p?(n=!0,p="g"):yq[p]||(null==
J&&(J=12),L=!0,p="g");if(l||"0"===m&&"="===h)l=!0,m="0",h="=";var G="$"===k?d[0]:"#"===k&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",Q="$"===k?d[1]:/[%p]/.test(p)?g:"",N=yq[p],Oa=/[defgprs%]/.test(p);J=null==J?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?Sb(a.grouping,a.thousands):af,d=a.currency,e=a.decimal,f=a.numerals?Mk(a.numerals):af,g=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=
b((a=Zg(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(Wa(c)/3)));var e=Math.pow(10,-a),f=wq[8+a/3];return function(a){return d(e*a)+f}}}}function Zd(a){Dm=Ih(a);e.format=Dm.format;e.formatPrefix=Dm.formatPrefix;return Dm}function cg(a){return Math.max(0,-Wa(Math.abs(a)))}function dd(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Wa(b)/3)))-Wa(Math.abs(a)))}function Ai(a,b){a=Math.abs(a);b=Math.abs(b)-a;return Math.max(0,Wa(b)-Wa(a))+1}function dc(){this.reset()}function lg(a,
b,c){var d=a.s=b+c,e=d-b;a.t=b-(d-e)+(c-e)}function Jh(a){return 1<a?0:-1>a?ab:Math.acos(a)}function nc(a){return 1<a?Cb:-1>a?-Cb:Math.asin(a)}function ve(a){return(a=ka(a/2))*a}function P(){}function va(a,b){if(a&&zq.hasOwnProperty(a.type))zq[a.type](a,b)}function Gc(a,b,c){var d=-1;c=a.length-c;for(b.lineStart();++d<c;){var e=a[d];b.point(e[0],e[1],e[2])}b.lineEnd()}function Gh(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Gc(a[c],b,1);b.polygonEnd()}function bc(a,b){if(a&&Aq.hasOwnProperty(a.type))Aq[a.type](a,
b);else va(a,b)}function mc(){og.point=Kh}function uj(){gg(Bq,Cq)}function Kh(a,b){og.point=gg;Bq=a;Cq=b;a*=wa;b*=wa;Fo=a;Go=oa(b=b/2+Em);Ho=ka(b)}function gg(a,b){a*=wa;b*=wa;b=b/2+Em;var c=a-Fo,d=0<=c?1:-1,e=d*c;c=oa(b);b=ka(b);var f=Ho*b,g=Go*c+f*oa(e);d=f*d*ka(e);Fm.add(Gd(d,g));Fo=a;Go=c;Ho=b}function fg(a){return[Gd(a[1],a[0]),nc(a[2])]}function gd(a){var b=a[0];a=a[1];var c=oa(a);return[c*oa(b),c*ka(b),ka(a)]}function Bb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function ze(a,b){return[a[1]*
b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Vg(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function ig(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function fd(a){var b=oc(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function ri(a,b){Qh.push(bh=[Ub=a,ec=a]);b<Ae&&(Ae=b);b>cf&&(cf=b)}function Ve(a,b){var c=gd([a*wa,b*wa]);if(Ij){var d=ze(Ij,c);d=ze([d[1],-d[0],0],d);fd(d);d=fg(d);var e=a-Ei,f=0<e?1:-1,g=d[0]*ub*f;e=180<bb(e);e^(f*Ei<g&&g<f*a)?(d=d[1]*ub,d>cf&&(cf=d)):(g=(g+360)%360-180,
e^(f*Ei<g&&g<f*a))?(d=-d[1]*ub,d<Ae&&(Ae=d)):(b<Ae&&(Ae=b),b>cf&&(cf=b));e?a<Ei?Gb(Ub,a)>Gb(Ub,ec)&&(ec=a):Gb(a,ec)>Gb(Ub,ec)&&(Ub=a):ec>=Ub?(a<Ub&&(Ub=a),a>ec&&(ec=a)):a>Ei?Gb(Ub,a)>Gb(Ub,ec)&&(ec=a):Gb(a,ec)>Gb(Ub,ec)&&(Ub=a)}else Qh.push(bh=[Ub=a,ec=a]);b<Ae&&(Ae=b);b>cf&&(cf=b);Ij=c;Ei=a}function Qg(){ch.point=Ve}function Bi(){bh[0]=Ub;bh[1]=ec;ch.point=ri;Ij=null}function ng(a,b){if(Ij){var c=a-Ei;Yk.add(180<bb(c)?c+(0<c?360:-360):c)}else Dq=a,Eq=b;og.point(a,b);Ve(a,b)}function Jf(){og.lineStart()}
function yh(){ng(Dq,Eq);og.lineEnd();1E-6<bb(Yk)&&(Ub=-(ec=180));bh[0]=Ub;bh[1]=ec;Ij=null}function Gb(a,b){return 0>(b-=a)?b+360:b}function Ff(a,b){return a[0]-b[0]}function ti(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function Gf(a,b){a*=wa;b*=wa;var c=oa(b);hd(c*oa(a),c*ka(a),ka(b))}function hd(a,b,c){++Zk;Gm+=(a-Gm)/Zk;Hm+=(b-Hm)/Zk;Im+=(c-Im)/Zk}function hg(){Nf.point=wi}function wi(a,b){a*=wa;b*=wa;var c=oa(b);Hd=c*oa(a);Id=c*ka(a);Jd=ka(b);Nf.point=vj;hd(Hd,Id,Jd)}function vj(a,
b){a*=wa;b*=wa;var c=oa(b),d=c*oa(a);a=c*ka(a);b=ka(b);var e=Gd(oc((e=Id*b-Jd*a)*e+(e=Jd*d-Hd*b)*e+(e=Hd*a-Id*d)*e),Hd*d+Id*a+Jd*b);Jm+=e;Km+=e*(Hd+(Hd=d));Lm+=e*(Id+(Id=a));Mm+=e*(Jd+(Jd=b));hd(Hd,Id,Jd)}function Wg(){Nf.point=Gf}function Nh(){Nf.point=jg}function Ze(){Hf(Fq,Gq);Nf.point=Gf}function jg(a,b){Fq=a;Gq=b;a*=wa;b*=wa;Nf.point=Hf;var c=oa(b);Hd=c*oa(a);Id=c*ka(a);Jd=ka(b);hd(Hd,Id,Jd)}function Hf(a,b){a*=wa;b*=wa;var c=oa(b),d=c*oa(a);a=c*ka(a);b=ka(b);c=Id*b-Jd*a;var e=Jd*d-Hd*b,f=Hd*
a-Id*d,g=oc(c*c+e*e+f*f),m=nc(g);g=g&&-m/g;Io+=g*c;Jo+=g*e;Ko+=g*f;Jm+=m;Km+=m*(Hd+(Hd=d));Lm+=m*(Id+(Id=a));Mm+=m*(Jd+(Jd=b));hd(Hd,Id,Jd)}function id(a){return function(){return a}}function xi(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function If(a,b){return[bb(a)>ab?a+Math.round(-a/ee)*ee:a,b]}function Kf(a,b,c){return(a%=ee)?b||c?xi(Lf(a),Mf(b,c)):Lf(a):b||c?Mf(b,c):If}function lc(a){return function(b,
c){return b+=a,[b>ab?b-ee:b<-ab?b+ee:b,c]}}function Lf(a){var b=lc(a);b.invert=lc(-a);return b}function Mf(a,b){function c(a,b){var c=oa(b),m=oa(a)*c;a=ka(a)*c;b=ka(b);c=b*d+m*e;return[Gd(a*f-c*g,m*d-b*e),nc(c*f+a*g)]}var d=oa(a),e=ka(a),f=oa(b),g=ka(b);c.invert=function(a,b){var c=oa(b),m=oa(a)*c;a=ka(a)*c;b=ka(b);c=b*f-a*g;return[Gd(a*f+b*g,m*d+c*e),nc(c*d-m*e)]};return c}function Mb(a){function b(b){b=a(b[0]*wa,b[1]*wa);return b[0]*=ub,b[1]*=ub,b}a=Kf(a[0]*wa,a[1]*wa,2<a.length?a[2]*wa:0);b.invert=
function(b){b=a.invert(b[0]*wa,b[1]*wa);return b[0]*=ub,b[1]*=ub,b};return b}function Ph(a,b,c,d,e,f){if(c){var g=oa(b),m=ka(b);c*=d;if(null==e)e=b+d*ee,f=b-c/2;else if(e=eg(g,e),f=eg(g,f),0<d?e<f:e>f)e+=d*ee;for(;0<d?e>f:e<f;e-=c)b=fg([g,-m*oa(e),-m*ka(e)]),a.point(b[0],b[1])}}function eg(a,b){b=gd(b);b[0]-=a;fd(b);a=Jh(-b[1]);return((0>-b[2]?-a:a)+ee-1E-6)%ee}function qa(){var a=[],b;return{point:function(a,c){b.push([a,c])},lineStart:function(){a.push(b=[])},lineEnd:P,rejoin:function(){1<a.length&&
a.push(a.pop().concat(a.shift()))},result:function(){var c=a;a=[];b=null;return c}}}function xc(a,b){return 1E-6>bb(a[0]-b[0])&&1E-6>bb(a[1]-b[1])}function qb(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function $e(a,b,c,d,e){var f=[],g=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(xc(c,d)){e.lineStart();for(m=0;m<b;++m)e.point((c=a[m])[0],c[1]);e.lineEnd()}else f.push(b=new qb(c,a,null,!0)),g.push(b.o=new qb(c,null,b,!1)),f.push(b=new qb(d,
a,null,!1)),g.push(b.o=new qb(d,null,b,!0))}});if(f.length){g.sort(b);zh(f);zh(g);var m=0;for(a=g.length;m<a;++m)g[m].e=c=!c;c=f[0];for(var h;;){for(var q=c,k=!0;q.v;)if((q=q.n)===c)return;b=q.z;e.lineStart();do{q.v=q.o.v=!0;if(q.e){if(k)for(m=0,a=b.length;m<a;++m)e.point((h=b[m])[0],h[1]);else d(q.x,q.n.x,1,e);q=q.n}else{if(k)for(b=q.p.z,m=b.length-1;0<=m;--m)e.point((h=b[m])[0],h[1]);else d(q.x,q.p.x,-1,e);q=q.p}q=q.o;b=q.z;k=!k}while(!q.v);e.lineEnd()}}}function zh(a){if(b=a.length){for(var b,
c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Mh(a,b){var c=b[0];b=b[1];var d=ka(b),e=[ka(c),-oa(c),0],f=0,g=0;Lo.reset();1===d?b=Cb+1E-6:-1===d&&(b=-Cb-1E-6);d=0;for(var m=a.length;d<m;++d)if(q=(h=a[d]).length){var h,q,k=h[q-1],l=k[0],C=k[1]/2+Em,n=ka(C),J=oa(C);for(C=0;C<q;++C,l=p,n=G,J=Q,k=L){var L=h[C],p=L[0];Q=L[1]/2+Em;var G=ka(Q),Q=oa(Q),N=p-l,t=0<=N?1:-1,r=t*N,I=r>ab;n*=G;Lo.add(Gd(n*t*ka(r),J*Q+n*oa(r)));f+=I?N+t*ee:N;I^l>=c^p>=c&&(k=ze(gd(k),gd(L)),fd(k),l=ze(e,k),
fd(l),l=(I^0<=N?-1:1)*nc(l[2]),b>l||b===l&&(k[0]||k[1]))&&(g+=I^0<=N?1:-1)}}return(-1E-6>f||1E-6>f&&-1E-6>Lo)^g&1}function Rc(a,b,c,d){return function(e){function f(b,c){a(b,c)&&e.point(b,c)}function g(a,b){C.point(a,b)}function m(){N.point=g;C.lineStart()}function h(){N.point=f;C.lineEnd()}function q(a,b){Q.push([a,b]);J.point(a,b)}function k(){J.lineStart();Q=[]}function l(){q(Q[0][0],Q[0][1]);J.lineEnd();var a=J.clean(),b=n.result(),c=b.length,d;Q.pop();p.push(Q);Q=null;if(c)if(a&1){if(c=b[0],
0<(b=c.length-1)){L||(e.polygonStart(),L=!0);e.lineStart();for(a=0;a<b;++a)e.point((d=c[a])[0],d[1]);e.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),G.push(b.filter(Lh))}var C=b(e),n=qa(),J=b(n),L=!1,p,G,Q,N={point:f,lineStart:m,lineEnd:h,polygonStart:function(){N.point=q;N.lineStart=k;N.lineEnd=l;G=[];p=[]},polygonEnd:function(){N.point=f;N.lineStart=m;N.lineEnd=h;G=B(G);var a=Mh(p,d);G.length?(L||(e.polygonStart(),L=!0),$e(G,mg,a,c,e)):a&&(L||(e.polygonStart(),L=!0),e.lineStart(),
c(null,null,1,e),e.lineEnd());L&&(e.polygonEnd(),L=!1);G=p=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}};return N}}function Lh(a){return 1<a.length}function mg(a,b){return(0>(a=a.x)[0]?a[1]-Cb-1E-6:Cb-a[1])-(0>(b=b.x)[0]?b[1]-Cb-1E-6:Cb-b[1])}function ed(a){function b(a,b){return oa(a)*oa(b)>e}function c(a,b,c){var d=gd(a),f=gd(b),g=[1,0,0];f=ze(d,f);var m=Bb(f,f);d=f[0];var h=m-d*d;if(!h)return!c&&a;m=e*m/h;h=-e*d/h;d=ze(g,f);g=ig(g,m);f=ig(f,
h);Vg(g,f);f=Bb(g,d);m=Bb(d,d);h=f*f-m*(Bb(g,g)-1);if(!(0>h)){var q=oc(h);h=ig(d,(-f-q)/m);Vg(h,g);h=fg(h);if(!c)return h;c=a[0];var k=b[0];a=a[1];b=b[1];if(k<c){var l=c;c=k;k=l}var C=k-c,n=1E-6>bb(C-ab);!n&&b<a&&(l=a,a=b,b=l);if(n||1E-6>C?n?0<a+b^h[1]<(1E-6>bb(h[0]-c)?a:b):a<=h[1]&&h[1]<=b:C>ab^(c<=h[0]&&h[0]<=k))return b=ig(d,(-f+q)/m),Vg(b,g),[h,fg(b)]}}function d(b,c){var d=g?a:ab-a,e=0;b<-d?e|=1:b>d&&(e|=2);c<-d?e|=4:c>d&&(e|=8);return e}var e=oa(a),f=6*wa,g=0<e,m=1E-6<bb(e);return Rc(b,function(a){var e,
f,h,q,k;return{lineStart:function(){q=h=!1;k=1},point:function(l,C){var n=[l,C],J=b(l,C);C=g?J?0:d(l,C):J?d(l+(0>l?ab:-ab),C):0;!e&&(q=h=J)&&a.lineStart();J!==h&&(l=c(e,n),!l||xc(e,l)||xc(n,l))&&(n[0]+=1E-6,n[1]+=1E-6,J=b(n[0],n[1]));if(J!==h)k=0,J?(a.lineStart(),l=c(n,e),a.point(l[0],l[1])):(l=c(e,n),a.point(l[0],l[1]),a.lineEnd()),e=l;else if(m&&e&&g^J){var L;C&f||!(L=c(n,e,!0))||(k=0,g?(a.lineStart(),a.point(L[0][0],L[0][1]),a.point(L[1][0],L[1][1]),a.lineEnd()):(a.point(L[1][0],L[1][1]),a.lineEnd(),
a.lineStart(),a.point(L[0][0],L[0][1])))}!J||e&&xc(e,n)||a.point(n[0],n[1]);e=n;h=J;f=C},lineEnd:function(){h&&a.lineEnd();e=null},clean:function(){return k|(q&&h)<<1}}},function(b,c,d,e){Ph(e,a,f,d,b,c)},g?[0,-a]:[-ab,a-ab])}function Yg(a,b,c,d,e,f){var g=a[0],m=a[1],h=0,q=1,k=b[0]-g,l=b[1]-m;c-=g;if(k||!(0<c)){c/=k;if(0>k){if(c<h)return;c<q&&(q=c)}else if(0<k){if(c>q)return;c>h&&(h=c)}c=e-g;if(k||!(0>c)){c/=k;if(0>k){if(c>q)return;c>h&&(h=c)}else if(0<k){if(c<h)return;c<q&&(q=c)}c=d-m;if(l||!(0<
c)){c/=l;if(0>l){if(c<h)return;c<q&&(q=c)}else if(0<l){if(c>q)return;c>h&&(h=c)}c=f-m;if(l||!(0>c)){c/=l;if(0>l){if(c>q)return;c>h&&(h=c)}else if(0<l){if(c<h)return;c<q&&(q=c)}0<h&&(a[0]=g+h*k,a[1]=m+h*l);1>q&&(b[0]=g+q*k,b[1]=m+q*l);return!0}}}}}function ce(a,b,c,d){function e(e,g,h,q){var k=0,l=0;if(null==e||(k=f(e,h))!==(l=f(g,h))||0>m(e,g)^0<h){do q.point(0===k||3===k?a:c,1<k?d:b);while((k=(k+h+4)%4)!==l)}else q.point(g[0],g[1])}function f(d,e){return 1E-6>bb(d[0]-a)?0<e?0:3:1E-6>bb(d[0]-c)?0<
e?2:1:1E-6>bb(d[1]-b)?0<e?1:0:0<e?3:2}function g(a,b){return m(a.x,b.x)}function m(a,b){var c=f(a,1),d=f(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(f){function m(e,f){a<=e&&e<=c&&b<=f&&f<=d&&q.point(e,f)}function h(e,f){var g=a<=e&&e<=c&&b<=f&&f<=d;C&&n.push([e,f]);if(t)J=e,L=f,p=g,t=!1,g&&(q.lineStart(),q.point(e,f));else if(g&&N)q.point(e,f);else{var m=[G=Math.max(-1E9,Math.min(1E9,G)),Q=Math.max(-1E9,Math.min(1E9,Q))],h=[e=Math.max(-1E9,Math.min(1E9,
e)),f=Math.max(-1E9,Math.min(1E9,f))];Yg(m,h,a,b,c,d)?(N||(q.lineStart(),q.point(m[0],m[1])),q.point(h[0],h[1]),g||q.lineEnd(),r=!1):g&&(q.lineStart(),q.point(e,f),r=!1)}G=e;Q=f;N=g}var q=f,k=qa(),l,C,n,J,L,p,G,Q,N,t,r,I={point:m,lineStart:function(){I.point=h;C&&C.push(n=[]);t=!0;N=!1;G=Q=NaN},lineEnd:function(){l&&(h(J,L),p&&N&&k.rejoin(),l.push(k.result()));I.point=m;N&&q.lineEnd()},polygonStart:function(){q=k;l=[];C=[];r=!0},polygonEnd:function(){for(var b,c=b=0,m=C.length;c<m;++c){var h=C[c],
k=1,J=h.length,L=h[0],p=L[0];for(L=L[1];k<J;++k){var G=p;var N=L;L=h[k];p=L[0];L=L[1];N<=d?L>d&&(p-G)*(d-N)>(L-N)*(a-G)&&++b:L<=d&&(p-G)*(d-N)<(L-N)*(a-G)&&--b}}c=r&&b;m=(l=B(l)).length;if(c||m)f.polygonStart(),c&&(f.lineStart(),e(null,null,1,f),f.lineEnd()),m&&$e(l,g,b,e,f),f.polygonEnd();q=f;l=C=n=null}};return I}}function Cj(){Jj.point=Jj.lineEnd=P}function yi(a,b){a*=wa;b*=wa;Mo=a;Nm=ka(b);Om=oa(b);Jj.point=yj}function yj(a,b){a*=wa;b*=wa;var c=ka(b);b=oa(b);var d=bb(a-Mo),e=oa(d);d=ka(d);d*=
b;var f=Om*c-Nm*b*e;e=Nm*c+Om*b*e;No.add(Gd(oc(d*d+f*f),e));Mo=a;Nm=c;Om=b}function Xe(a){No.reset();bc(a,Jj);return+No}function xe(a,b){Oo[0]=a;Oo[1]=b;return Xe(Ps)}function ue(a,b){return a&&Hq.hasOwnProperty(a.type)?Hq[a.type](a,b):!1}function Ef(a,b){var c=xe(a[0],a[1]),d=xe(a[0],b);a=xe(b,a[1]);return d+a<=c+1E-6}function xh(a,b){return!!Mh(a.map(vi),kg(b))}function vi(a){return a=a.map(kg),a.pop(),a}function kg(a){return[a[0]*wa,a[1]*wa]}function Xg(a,b,c){var d=p(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,
b]})}}function bf(a,b,c){var d=p(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Bj(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return p(Pm(f/C)*C,e,C).map(G).concat(p(Pm(q/n)*n,h,n).map(N)).concat(p(Pm(d/k)*k,c,k).filter(function(a){return 1E-6<bb(a%C)}).map(J)).concat(p(Pm(m/l)*l,g,l).filter(function(a){return 1E-6<bb(a%n)}).map(L))}var c,d,e,f,g,m,h,q,k=10,l=k,C=90,n=360,J,L,G,N,Q=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[G(f).concat(N(h).slice(1),G(e).reverse().slice(1),N(q).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.extentMajor(b).extentMinor(b):a.extentMinor()};a.extentMajor=function(b){if(!arguments.length)return[[f,q],[e,h]];f=+b[0][0];e=+b[1][0];q=+b[0][1];h=+b[1][1];f>e&&(b=f,f=e,e=b);q>h&&(b=q,q=h,h=b);return a.precision(Q)};a.extentMinor=function(b){if(!arguments.length)return[[d,m],[c,g]];d=+b[0][0];c=+b[1][0];
m=+b[0][1];g=+b[1][1];d>c&&(b=d,d=c,c=b);m>g&&(b=m,m=g,g=b);return a.precision(Q)};a.step=function(b){return arguments.length?a.stepMajor(b).stepMinor(b):a.stepMinor()};a.stepMajor=function(b){if(!arguments.length)return[C,n];C=+b[0];n=+b[1];return a};a.stepMinor=function(b){if(!arguments.length)return[k,l];k=+b[0];l=+b[1];return a};a.precision=function(b){if(!arguments.length)return Q;Q=+b;J=Xg(m,g,90);L=bf(d,c,Q);G=Xg(q,h,90);N=bf(f,e,Q);return a};return a.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,
-80.000001],[180,80.000001]])}function Ye(a){return a}function ui(){dh.point=de}function de(a,b){dh.point=dg;Iq=Po=a;Jq=Qo=b}function dg(a,b){Ro.add(Qo*a-Po*b);Po=a;Qo=b}function xj(){dg(Iq,Jq)}function V(a,b){So+=a;To+=b;++$k}function kc(){df.point=lm}function lm(a,b){df.point=Y;V(pg=a,qg=b)}function Y(a,b){var c=a-pg,d=b-qg;c=oc(c*c+d*d);Qm+=c*(pg+a)/2;Rm+=c*(qg+b)/2;Kj+=c;V(pg=a,qg=b)}function wh(){df.point=V}function mm(){df.point=om}function nm(){Ah(Kq,Lq)}function om(a,b){df.point=Ah;V(Kq=pg=
a,Lq=qg=b)}function Ah(a,b){var c=a-pg,d=b-qg;c=oc(c*c+d*d);Qm+=c*(pg+a)/2;Rm+=c*(qg+b)/2;Kj+=c;c=qg*a-pg*b;Uo+=c*(pg+a);Vo+=c*(qg+b);al+=3*c;V(pg=a,qg=b)}function Ch(a){this._context=a}function rj(a,b){bl.point=pm;Mq=cl=a;Nq=dl=b}function pm(a,b){cl-=a;dl-=b;Wo.add(oc(cl*cl+dl*dl));cl=a;dl=b}function ac(){this._string=[]}function Bh(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ed(a){return function(b){var c=new Dh,d;for(d in a)c[d]=a[d];c.stream=b;return c}}
function Dh(){}function Eh(a,b,c){var d=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);null!=d&&a.clipExtent(null);bc(c,a.stream(Sm));b(Sm.result());null!=d&&a.clipExtent(d);return a}function Fh(a,b,c){return Eh(a,function(c){var d=b[1][0]-b[0][0],e=b[1][1]-b[0][1],f=Math.min(d/(c[1][0]-c[0][0]),e/(c[1][1]-c[0][1]));d=+b[0][0]+(d-f*(c[1][0]+c[0][0]))/2;c=+b[0][1]+(e-f*(c[1][1]+c[0][1]))/2;a.scale(150*f).translate([d,c])},c)}function sj(a,b,c){return Eh(a,function(c){var d=+b,e=d/(c[1][0]-
c[0][0]);d=(d-e*(c[1][0]+c[0][0]))/2;c=-e*c[0][1];a.scale(150*e).translate([d,c])},c)}function $d(a,b,c){return Eh(a,function(c){var d=+b,e=d/(c[1][1]-c[0][1]),f=-e*c[0][0];c=(d-e*(c[1][1]+c[0][1]))/2;a.scale(150*e).translate([f,c])},c)}function qm(a){return Ed({point:function(b,c){b=a(b,c);this.stream.point(b[0],b[1])}})}function Ik(a,b){function c(d,e,f,g,m,h,q,k,l,C,n,J,L,p){var G=q-d,N=k-e,Q=G*G+N*N;if(Q>4*b&&L--){var t=g+C,r=m+n,I=h+J,u=oc(t*t+r*r+I*I),ja=nc(I/=u),da=1E-6>bb(bb(I)-1)||1E-6>bb(f-
l)?(f+l)/2:Gd(r,t),na=a(da,ja);ja=na[0];na=na[1];var A=ja-d,w=na-e,Pb=N*A-G*w;if(Pb*Pb/Q>b||.3<bb((G*A+N*w)/Q-.5)||g*C+m*n+h*J<Qs)c(d,e,f,g,m,h,ja,na,da,t/=u,r/=u,I,L,p),p.point(ja,na),c(ja,na,da,t,r,I,q,k,l,C,n,J,L,p)}}return function(b){function d(c,d){c=a(c,d);b.point(c[0],c[1])}function e(){G=NaN;I.point=f;b.lineStart()}function f(d,e){var f=gd([d,e]);e=a(d,e);c(G,N,p,Q,t,r,G=e[0],N=e[1],p=d,Q=f[0],t=f[1],r=f[2],16,b);b.point(G,N)}function g(){I.point=d;b.lineEnd()}function m(){e();I.point=h;
I.lineEnd=q}function h(a,b){f(k=a,b);l=G;C=N;n=Q;J=t;L=r;I.point=f}function q(){c(G,N,p,Q,t,r,l,C,k,n,J,L,16,b);I.lineEnd=g;g()}var k,l,C,n,J,L,p,G,N,Q,t,r,I={point:d,lineStart:e,lineEnd:g,polygonStart:function(){b.polygonStart();I.lineStart=m},polygonEnd:function(){b.polygonEnd();I.lineStart=e}};return I}}function tj(a){return Ed({point:function(b,c){b=a(b,c);return this.stream.point(b[0],b[1])}})}function Jk(a,b,c){function d(d,e){return[b+a*d,c-a*e]}d.invert=function(d,e){return[(d-b)/a,(c-e)/
a]};return d}function Kk(a,b,c,d){function e(a,d){return[g*a-m*d+b,c-m*a-g*d]}var f=oa(d);d=ka(d);var g=f*a,m=d*a,h=f/a,q=d/a,k=(d*c-f*b)/a,l=(d*b+f*c)/a;e.invert=function(a,b){return[h*a-q*b+k,l-q*a-h*b]};return e}function ae(a){return Lk(function(){return a})()}function Lk(a){function b(a){return na(a[0]*wa,a[1]*wa)}function c(a){return(a=na.invert(a[0],a[1]))&&[a[0]*ub,a[1]*ub]}function d(){var a=Kk(g,0,0,L).apply(null,f(q,k));a=(L?Kk:Jk)(g,m-a[0],h-a[1],L);J=Kf(l,C,n);da=xi(f,a);na=xi(J,da);a=
da;ja=+u?Ik(a,u):qm(a);return e()}function e(){A=w=null;return b}var f,g=150,m=480,h=250,q=0,k=0,l=0,C=0,n=0,J,L=0,G=null,p=Xo,N=null,Q,t,r,I=Ye,u=.5,ja,da,na,A,w;b.stream=function(a){return A&&w===a?A:A=Rs(tj(J)(p(ja(I(w=a)))))};b.preclip=function(a){return arguments.length?(p=a,G=void 0,e()):p};b.postclip=function(a){return arguments.length?(I=a,N=Q=t=r=null,e()):I};b.clipAngle=function(a){return arguments.length?(p=+a?ed(G=a*wa):(G=null,Xo),e()):G*ub};b.clipExtent=function(a){return arguments.length?
(I=null==a?(N=Q=t=r=null,Ye):ce(N=+a[0][0],Q=+a[0][1],t=+a[1][0],r=+a[1][1]),e()):null==N?null:[[N,Q],[t,r]]};b.scale=function(a){return arguments.length?(g=+a,d()):g};b.translate=function(a){return arguments.length?(m=+a[0],h=+a[1],d()):[m,h]};b.center=function(a){return arguments.length?(q=a[0]%360*wa,k=a[1]%360*wa,d()):[q*ub,k*ub]};b.rotate=function(a){return arguments.length?(l=a[0]%360*wa,C=a[1]%360*wa,n=2<a.length?a[2]%360*wa:0,d()):[l*ub,C*ub,n*ub]};b.angle=function(a){return arguments.length?
(L=a%360*wa,d()):L*ub};b.precision=function(a){if(arguments.length){var b=da;var c=u=a*a;b=(ja=+c?Ik(b,c):qm(b),e())}else b=oc(u);return b};b.fitExtent=function(a,c){return Fh(b,a,c)};b.fitSize=function(a,c){return Fh(b,[[0,0],a],c)};b.fitWidth=function(a,c){return sj(b,a,c)};b.fitHeight=function(a,c){return $d(b,a,c)};return function(){f=a.apply(this,arguments);b.invert=f.invert&&c;return d()}}function Ug(a){var b=0,c=ab/3,d=Lk(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*
wa,c=a[1]*wa):[b*ub,c*ub]};return a}function wo(a){function b(a,b){return[a*c,ka(b)/c]}var c=oa(a);b.invert=function(a,b){return[a/c,nc(b*c)]};return b}function el(a,b){function c(a,b){b=oc(f-2*e*ka(b))/e;return[b*ka(a*=e),g-b*oa(a)]}var d=ka(a),e=(d+ka(b))/2;if(1E-6>bb(e))return wo(a);var f=1+d*(2*e-d),g=oc(f)/e;c.invert=function(a,b){b=g-b;return[Gd(a,bb(b))/e*fl(b),nc((f-(a*a+b*b)*e*e)/(2*e))]};return c}function Fi(){return Ug(el).scale(155.424).center([0,33.6442])}function ld(){return Fi().parallels([29.5,
45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Yo(a){var b=a.length;return{point:function(c,d){for(var e=-1;++e<b;)a[e].point(c,d)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}function Gi(a){return function(b,c){var d=
oa(b),e=oa(c);d=a(d*e);return[d*e*ka(b),d*ka(c)]}}function Rh(a){return function(b,c){var d=oc(b*b+c*c),e=a(d),f=ka(e);e=oa(e);return[Gd(b*f,d*e),nc(d&&c*f/d)]}}function Hi(a,b){return[a,Tm(Lj((Cb+b)/2))]}function gl(a){function b(){var b=ab*e(),d=c(Mb(c.rotate()).invert([0,0]));return g(null==m?[[d[0]-b,d[1]-b],[d[0]+b,d[1]+b]]:a===Hi?[[Math.max(d[0]-b,m),h],[Math.min(d[0]+b,q),k]]:[[m,Math.max(d[1]-b,h)],[q,Math.min(d[1]+b,k)]])}var c=ae(a),d=c.center,e=c.scale,f=c.translate,g=c.clipExtent,m=null,
h,q,k;c.scale=function(a){return arguments.length?(e(a),b()):e()};c.translate=function(a){return arguments.length?(f(a),b()):f()};c.center=function(a){return arguments.length?(d(a),b()):d()};c.clipExtent=function(a){return arguments.length?(null==a?m=h=q=k=null:(m=+a[0][0],h=+a[0][1],q=+a[1][0],k=+a[1][1]),b()):null==m?null:[[m,h],[q,k]]};return b()}function Mj(a,b){function c(a,b){0<f?b<-Cb+1E-6&&(b=-Cb+1E-6):b>Cb-1E-6&&(b=Cb-1E-6);b=f/Zo(Lj((Cb+b)/2),e);return[b*ka(e*a),f-b*oa(e*a)]}var d=oa(a),
e=a===b?ka(a):Tm(d/oa(b))/Tm(Lj((Cb+b)/2)/Lj((Cb+a)/2)),f=d*Zo(Lj((Cb+a)/2),e)/e;if(!e)return Hi;c.invert=function(a,b){b=f-b;var c=fl(e)*oc(a*a+b*b);return[Gd(a,bb(b))/e*fl(b),2*Nj(Zo(f/c,1/e))-Cb]};return c}function Of(a,b){return[a,b]}function Um(a,b){function c(a,b){b=f-b;a*=e;return[b*ka(a),f-b*oa(a)]}var d=oa(a),e=a===b?ka(a):(d-oa(b))/(b-a),f=d/e+a;if(1E-6>bb(e))return Of;c.invert=function(a,b){b=f-b;return[Gd(a,bb(b))/e*fl(b),f-fl(e)*oc(a*a+b*b)]};return c}function hl(a,b){b=nc(Vm*ka(b));
var c=b*b,d=c*c*c;return[a*oa(b)/(Vm*(1.340264+3*-.081106*c+d*(7*8.93E-4+.034164*c))),b*(1.340264+-.081106*c+d*(8.93E-4+.003796*c))]}function Ii(a,b){var c=oa(b),d=oa(a)*c;return[c*ka(a)/d,ka(b)/d]}function Ji(a,b,c,d){return 1===a&&1===b&&0===c&&0===d?Ye:Ed({point:function(e,f){this.stream.point(e*a+c,f*b+d)}})}function il(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function Oj(a,b){return[oa(b)*ka(a),
ka(b)]}function Ki(a,b){var c=oa(b),d=1+oa(a)*c;return[c*ka(a)/d,ka(b)/d]}function jl(a,b){return[Tm(Lj((Cb+b)/2)),-a]}function $o(a,b){return a.parent===b.parent?1:2}function ap(a,b){return a+b.x}function bp(a,b){return Math.max(a,b.y)}function Wm(a){for(var b;b=a.children;)a=b[0];return a}function Xm(a){for(var b;b=a.children;)a=b[b.length-1];return a}function Ym(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;0<=--d;)b+=c[d].value;else b=1;a.value=b}function kl(a,b){var c=new Db(a);a=+a.value&&
(c.value=a.value);var d,e=[c],f,g,m,h;for(null==b&&(b=cp);d=e.pop();)if(a&&(d.value=+d.data.value),(g=b(d.data))&&(h=g.length))for(d.children=Array(h),m=h-1;0<=m;--m)e.push(f=d.children[m]=new Db(g[m])),f.parent=d,f.depth=d.depth+1;return c.eachBefore(Zm)}function cp(a){return a.children}function dp(a){a.data=a.data.data}function Zm(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function Db(a){this.data=a;this.depth=this.height=0;this.parent=null}function Sh(a){var b=0;a=Ss.call(a);for(var c=
a.length,d,e;c;)e=Math.random()*c--|0,d=a[c],a[c]=a[e],a[e]=d;c=a.length;d=[];for(var f;b<c;)if(e=a[b],f&&Ic(f,e))++b;else{a:if(b=d,ll(e,b))b=[e];else{for(d=0;d<b.length;++d)if(Li(e,b[d])&&ll(rg(b[d],e),b)){b=[b[d],e];break a}for(d=0;d<b.length-1;++d)for(f=d+1;f<b.length;++f)if(Li(rg(b[d],b[f]),e)&&Li(rg(b[d],e),b[f])&&Li(rg(b[f],e),b[d])&&ll(Pj(b[d],b[f],e),b)){b=[b[d],b[f],e];break a}throw Error();}a:{b=d=b;switch(b.length){case 1:b=b[0];b={x:b.x,y:b.y,r:b.r};break a;case 2:b=rg(b[0],b[1]);break a;
case 3:b=Pj(b[0],b[1],b[2]);break a}b=void 0}f=b;b=0}return f}function Li(a,b){var c=a.r-b.r,d=b.x-a.x;a=b.y-a.y;return 0>c||c*c<d*d+a*a}function Ic(a,b){var c=a.r-b.r+1E-6,d=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>d*d+a*a}function ll(a,b){for(var c=0;c<b.length;++c)if(!Ic(a,b[c]))return!1;return!0}function rg(a,b){var c=a.x,d=a.y;a=a.r;var e=b.x,f=b.y;b=b.r;var g=e-c,m=f-d,h=b-a,q=Math.sqrt(g*g+m*m);return{x:(c+e+g/q*h)/2,y:(d+f+m/q*h)/2,r:(q+a+b)/2}}function Pj(a,b,c){var d=a.x,e=a.y;a=a.r;var f=b.x,
g=b.y,m=b.r,h=c.x,q=c.y,k=c.r;c=d-f;b=d-h;var l=e-g,C=e-q,n=m-a,J=k-a,L=d*d+e*e-a*a;g=L-f*f-g*g+m*m;q=L-h*h-q*q+k*k;h=b*l-c*C;f=(l*q-C*g)/(2*h)-d;l=(C*n-l*J)/h;C=(b*g-c*q)/(2*h)-e;c=(c*J-b*n)/h;b=l*l+c*c-1;n=2*(a+f*l+C*c);a=f*f+C*C-a*a;a=-(b?(n+Math.sqrt(n*n-4*b*a))/(2*b):a/n);return{x:d+f+l*a,y:e+C+c*a,r:a}}function $m(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=d*d+e*e;if(f){var g=b.r+c.r;g*=g;var m=a.r+c.r;m*=m;if(g>m){var h=(f+m-g)/(2*f);g=Math.sqrt(Math.max(0,m/f-h*h));c.x=a.x-h*d-g*e;c.y=a.y-h*e+g*d}else h=
(f+g-m)/(2*f),g=Math.sqrt(Math.max(0,g/f-h*h)),c.x=b.x+h*d-g*e,c.y=b.y+h*e+g*d}else c.x=b.x+c.r,c.y=b.y}function an(a,b){var c=a.r+b.r-1E-6,d=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>d*d+a*a}function bn(a){var b=a._,c=a.next._,d=b.r+c.r;a=(b.x*c.r+c.x*b.r)/d;b=(b.y*c.r+c.y*b.r)/d;return a*a+b*b}function Qj(a){this._=a;this.previous=this.next=null}function ml(a){if(!(c=a.length))return 0;var b,c;var d=a[0];d.x=0;d.y=0;if(!(1<c))return d.r;var e=a[1];d.x=-e.r;e.x=d.r;e.y=0;if(!(2<c))return d.r+e.r;$m(e,d,
b=a[2]);d=new Qj(d);e=new Qj(e);b=new Qj(b);d.next=b.previous=e;e.next=d.previous=b;b.next=e.previous=d;var f=3;a:for(;f<c;++f){$m(d._,e._,b=a[f]);b=new Qj(b);var g=e.next;var m=d.previous;var h=e._.r;var q=d._.r;do if(h<=q){if(an(g._,b._)){e=g;d.next=e;e.previous=d;--f;continue a}h+=g._.r;g=g.next}else{if(an(m._,b._)){d=m;d.next=e;e.previous=d;--f;continue a}q+=m._.r;m=m.previous}while(g!==m.next);b.previous=d;b.next=e;d.next=e.previous=e=b;for(g=bn(d);(b=b.next)!==e;)(m=bn(b))<g&&(d=b,g=m);e=d.next}d=
[e._];for(b=e;(b=b.next)!==e;)d.push(b._);b=Sh(d);for(f=0;f<c;++f)d=a[f],d.x-=b.x,d.y-=b.y;return b.r}function Rj(a){if("function"!==typeof a)throw Error();return a}function sg(){return 0}function Jc(a){return function(){return a}}function nl(a){return Math.sqrt(a.value)}function Be(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function Th(a,b){return function(c){if(d=c.children){var d,e,f=d.length,g=a(c)*b||0;if(g)for(e=0;e<f;++e)d[e].r+=g;var m=ml(d);if(g)for(e=0;e<f;++e)d[e].r-=
g;c.r=m+g}}}function Kd(a){return function(b){var c=b.parent;b.r*=a;c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function ol(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)}function Ce(a,b,c,d,e){var f=a.children,g=-1,m=f.length;for(d=a.value&&(d-b)/a.value;++g<m;)a=f[g],a.y0=c,a.y1=e,a.x0=b,a.x1=b+=a.value*d}function md(a){return a.id}function cn(a){return a.parentId}function Sj(a,b){return a.parent===b.parent?1:2}function Tj(a){var b=a.children;return b?b[0]:a.t}
function Uj(a){var b=a.children;return b?b[b.length-1]:a.t}function Uh(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function Ja(a){a=new Uh(a,0);for(var b,c=[a],d,e,f;b=c.pop();)if(e=b._.children)for(b.children=Array(d=e.length),f=d-1;0<=f;--f)c.push(d=b.children[f]=new Uh(e[f],f)),d.parent=b;(a.parent=new Uh(null,0)).children=[a];return a}function Vh(a,b,c,d,e){var f=a.children,g=-1,m=f.length;for(e=a.value&&(e-c)/a.value;++g<
m;)a=f[g],a.x0=b,a.x1=d,a.y0=c,a.y1=c+=a.value*e}function pl(a,b,c,d,e,f){for(var g=[],m=b.children,h,q,k=h=0,l=m.length,C,n=b.value,J,L,G,p,N,Q;h<l;){b=e-c;C=f-d;do J=m[k++].value;while(!J&&k<l);L=G=J;Q=Math.max(C/b,b/C)/(n*a);p=J*J*Q;for(N=Math.max(G/p,p/L);k<l;++k){J+=q=m[k].value;q<L&&(L=q);q>G&&(G=q);p=J*J*Q;p=Math.max(G/p,p/L);if(p>N){J-=q;break}N=p}g.push(h={value:J,dice:b<C,children:m.slice(h,k)});h.dice?Ce(h,c,d,e,n?d+=C*J/n:f):Vh(h,c,d,n?c+=b*J/n:e,f);n-=J;h=k}return g}function dn(a,b,c){return(b[0]-
a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function en(a,b){return a[0]-b[0]||a[1]-b[1]}function ql(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;++e){for(;1<d&&0>=dn(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function eh(){return Math.random()}function fe(a,b){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(b).domain(a)}return this}function ef(a,b){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(b).domain(a)}return this}
function Vj(){function a(a){var f=a+"",g=b.get(f);if(!g){if(e!==ep)return e;b.set(f,g=c.push(a))}return d[(g-1)%d.length]}var b=hb(),c=[],d=[],e=ep;a.domain=function(d){if(!arguments.length)return c.slice();c=[];b=hb();for(var e=-1,f=d.length,g,m;++e<f;)b.has(m=(g=d[e])+"")||b.set(m,c.push(g));return a};a.range=function(b){return arguments.length?(d=Mi.call(b),a):d.slice()};a.unknown=function(b){return arguments.length?(e=b,a):e};a.copy=function(){return Vj(c,d).unknown(e)};fe.apply(a,arguments);
return a}function Ni(){function a(){var a=c().length,b=e[1]<e[0],l=e[b-0],C=e[1-b];f=(C-l)/Math.max(1,a-h+2*q);m&&(f=Math.floor(f));l+=(C-l-f*(a-h))*k;g=f*(1-h);m&&(l=Math.round(l),g=Math.round(g));a=p(a).map(function(a){return l+f*a});return d(b?a.reverse():a)}var b=Vj().unknown(void 0),c=b.domain,d=b.range,e=[0,1],f,g,m=!1,h=0,q=0,k=.5;delete b.unknown;b.domain=function(b){return arguments.length?(c(b),a()):c()};b.range=function(b){return arguments.length?(e=[+b[0],+b[1]],a()):e.slice()};b.rangeRound=
function(b){return e=[+b[0],+b[1]],m=!0,a()};b.bandwidth=function(){return g};b.step=function(){return f};b.round=function(b){return arguments.length?(m=!!b,a()):m};b.padding=function(b){return arguments.length?(h=Math.min(1,q=+b),a()):h};b.paddingInner=function(b){return arguments.length?(h=Math.min(1,b),a()):h};b.paddingOuter=function(b){return arguments.length?(q=+b,a()):q};b.align=function(b){return arguments.length?(k=Math.max(0,Math.min(1,b)),a()):k};b.copy=function(){return Ni(c(),e).round(m).paddingInner(h).paddingOuter(q).align(k)};
return fe.apply(a(),arguments)}function rl(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return rl(b())};return a}function fn(a){return function(){return a}}function Wj(a){return+a}function ta(a){return a}function sl(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:fn(isNaN(b)?NaN:.5)}function gn(a){var b=a[0],c=a[a.length-1];b>c&&(a=b,b=c,c=a);return function(a){return Math.max(b,Math.min(c,a))}}function hn(a,b,c){var d=a[0];a=a[1];var e=b[0];
b=b[1];a<d?(d=sl(a,d),e=c(b,e)):(d=sl(d,a),e=c(e,b));return function(a){return e(d(a))}}function fp(a,b,c){var d=Math.min(a.length,b.length)-1,e=Array(d),f=Array(d),g=-1;a[d]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<d;)e[g]=sl(a[g],a[g+1]),f[g]=c(b[g],b[g+1]);return function(b){var c=tg(a,b,1,d)-1;return f[c](e[c](b))}}function Oi(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Xj(){function a(){q=2<
Math.min(c.length,d.length)?fp:hn;k=l=null;return b}function b(a){return isNaN(a=+a)?m:(k||(k=q(c.map(f),d,e)))(f(h(a)))}var c=Oq,d=Oq,e=jc,f,g,m,h=ta,q,k,l;b.invert=function(a){return h(g((l||(l=q(d,c.map(f),Yb)))(a)))};b.domain=function(b){return arguments.length?(c=jn.call(b,Wj),h===ta||(h=gn(c)),a()):c.slice()};b.range=function(b){return arguments.length?(d=Mi.call(b),a()):d.slice()};b.rangeRound=function(b){return d=Mi.call(b),e=Bd,a()};b.clamp=function(a){return arguments.length?(h=a?gn(c):
ta,b):h!==ta};b.interpolate=function(b){return arguments.length?(e=b,a()):e};b.unknown=function(a){return arguments.length?(m=a,b):m};return function(b,c){f=b;g=c;return a()}}function kn(a,b){return Xj()(a,b)}function ln(a,b,c,d){c=u(a,b,c);var f;d=Zg(null==d?",f":d);switch(d.type){case "s":return a=Math.max(Math.abs(a),Math.abs(b)),null!=d.precision||isNaN(f=dd(c,a))||(d.precision=f),e.formatPrefix(d,a);case "":case "e":case "g":case "p":case "r":null!=d.precision||isNaN(f=Ai(c,Math.max(Math.abs(a),
Math.abs(b))))||(d.precision=f-("e"===d.type));break;case "f":case "%":null!=d.precision||isNaN(f=cg(c))||(d.precision=f-2*("%"===d.type))}return e.format(d)}function ug(a){var b=a.domain;a.ticks=function(a){var c=b();return r(c[0],c[c.length-1],null==a?10:a)};a.tickFormat=function(a,c){var d=b();return ln(d[0],d[d.length-1],null==a?10:a,c)};a.nice=function(c){null==c&&(c=10);var d=b(),e=0,f=d.length-1,g=d[e],m=d[f];if(m<g){var h=g;g=m;m=h;h=e;e=f;f=h}h=w(g,m,c);0<h?(g=Math.floor(g/h)*h,m=Math.ceil(m/
h)*h,h=w(g,m,c)):0>h&&(g=Math.ceil(g*h)/h,m=Math.floor(m*h)/h,h=w(g,m,c));0<h?(d[e]=Math.floor(g/h)*h,d[f]=Math.ceil(m/h)*h,b(d)):0>h&&(d[e]=Math.ceil(g*h)/h,d[f]=Math.floor(m*h)/h,b(d));return a};return a}function mn(){var a=kn(ta,ta);a.copy=function(){return Oi(a,mn())};fe.apply(a,arguments);return ug(a)}function nn(a){function b(a){return isNaN(a=+a)?c:a}var c;b.invert=b;b.domain=b.range=function(c){return arguments.length?(a=jn.call(c,Wj),b):a.slice()};b.unknown=function(a){return arguments.length?
(c=a,b):c};b.copy=function(){return nn(a).unknown(c)};a=arguments.length?jn.call(a,Wj):[0,1];return ug(b)}function on(a,b){a=a.slice();var c=0,d=a.length-1,e=a[c],f=a[d];if(f<e){var g=c;c=d;d=g;g=e;e=f;f=g}a[c]=b.floor(e);a[d]=b.ceil(f);return a}function pn(a){return Math.log(a)}function qn(a){return Math.exp(a)}function gp(a){return-Math.log(-a)}function hp(a){return-Math.exp(-a)}function ip(a){return isFinite(a)?+("1e"+a):0>a?0:a}function Pi(a){return 10===a?ip:a===Math.E?Math.exp:function(b){return Math.pow(a,
b)}}function pc(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function Wh(a){return function(b){return-a(-b)}}function ff(a){function b(){g=pc(f);m=Pi(f);0>d()[0]?(g=Wh(g),m=Wh(m),a(gp,hp)):a(pn,qn);return c}var c=a(pn,qn),d=c.domain,f=10,g,m;c.base=function(a){return arguments.length?(f=+a,b()):f};c.domain=function(a){return arguments.length?(d(a),b()):d()};c.ticks=function(a){var b=d(),c=b[0];b=b[b.length-1];var e;if(e=b<c)h=
c,c=b,b=h;var h=g(c),q=g(b);var k=null==a?10:+a;a=[];if(!(f%1)&&q-h<k)if(h=Math.round(h)-1,q=Math.round(q)+1,0<c)for(;h<q;++h){var l=1;for(k=m(h);l<f;++l){var C=k*l;if(!(C<c)){if(C>b)break;a.push(C)}}}else for(;h<q;++h)for(l=f-1,k=m(h);1<=l;--l){if(C=k*l,!(C<c)){if(C>b)break;a.push(C)}}else a=r(h,q,Math.min(q-h,k)).map(m);return e?a.reverse():a};c.tickFormat=function(a,b){null==b&&(b=10===f?".0e":",");"function"!==typeof b&&(b=e.format(b));if(Infinity===a)return b;null==a&&(a=10);var d=Math.max(1,
f*a/c.ticks().length);return function(a){var c=a/m(Math.round(g(a)));c*f<f-.5&&(c*=f);return c<=d?b(a):""}};c.nice=function(){return d(on(d(),{floor:function(a){return m(Math.floor(g(a)))},ceil:function(a){return m(Math.ceil(g(a)))}}))};return c}function Yj(){var a=ff(Xj()).domain([1,10]);a.copy=function(){return Oi(a,Yj()).base(a.base())};fe.apply(a,arguments);return a}function eb(a){return function(b){return Math.sign(b)*Math.log1p(Math.abs(b/a))}}function rn(a){return function(b){return Math.sign(b)*
Math.expm1(Math.abs(b))*a}}function Zj(a){var b=1,c=a(eb(b),rn(b));c.constant=function(c){return arguments.length?a(eb(b=+c),rn(b)):b};return ug(c)}function tl(){var a=Zj(Xj());a.copy=function(){return Oi(a,tl()).constant(a.constant())};return fe.apply(a,arguments)}function ul(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function sn(a){return 0>a?-Math.sqrt(-a):Math.sqrt(a)}function tn(a){return 0>a?-a*a:a*a}function Xh(a){var b=a(ta,ta),c=1;b.exponent=function(b){return arguments.length?
(c=+b,1===c?a(ta,ta):.5===c?a(sn,tn):a(ul(c),ul(1/c))):c};return ug(b)}function ge(){var a=Xh(Xj());a.copy=function(){return Oi(a,ge()).exponent(a.exponent())};fe.apply(a,arguments);return a}function Yh(){function a(){var a=0,f=Math.max(1,d.length);for(e=Array(f-1);++a<f;)e[a-1]=t(c,a/f);return b}function b(a){return isNaN(a=+a)?g:d[tg(e,a)]}var c=[],d=[],e=[],g;b.invertExtent=function(a){a=d.indexOf(a);return 0>a?[NaN,NaN]:[0<a?e[a-1]:c[0],a<e.length?e[a]:c[c.length-1]]};b.domain=function(b){if(!arguments.length)return c.slice();
c=[];for(var d=0,e=b.length,g;d<e;++d)(g=b[d],null==g||isNaN(g=+g))||c.push(g);c.sort(f);return a()};b.range=function(b){return arguments.length?(d=Mi.call(b),a()):d.slice()};b.unknown=function(a){return arguments.length?(g=a,b):g};b.quantiles=function(){return e.slice()};b.copy=function(){return Yh().domain(c).range(d).unknown(g)};return fe.apply(b,arguments)}function De(){function a(a){return a<=a?g[tg(f,a,0,e)]:m}function b(){var b=-1;for(f=Array(e);++b<e;)f[b]=((b+1)*d-(b-e)*c)/(e+1);return a}
var c=0,d=1,e=1,f=[.5],g=[0,1],m;a.domain=function(a){return arguments.length?(c=+a[0],d=+a[1],b()):[c,d]};a.range=function(a){return arguments.length?(e=(g=Mi.call(a)).length-1,b()):g.slice()};a.invertExtent=function(a){a=g.indexOf(a);return 0>a?[NaN,NaN]:1>a?[c,f[0]]:a>=e?[f[e-1],d]:[f[a-1],f[a]]};a.unknown=function(b){return arguments.length?(m=b,a):a};a.thresholds=function(){return f.slice()};a.copy=function(){return De().domain([c,d]).range(g).unknown(m)};return fe.apply(ug(a),arguments)}function un(){function a(a){return a<=
a?c[tg(b,a,0,e)]:d}var b=[.5],c=[0,1],d,e=1;a.domain=function(d){return arguments.length?(b=Mi.call(d),e=Math.min(b.length,c.length-1),a):b.slice()};a.range=function(d){return arguments.length?(c=Mi.call(d),e=Math.min(b.length,c.length-1),a):c.slice()};a.invertExtent=function(a){a=c.indexOf(a);return[b[a-1],b[a]]};a.unknown=function(b){return arguments.length?(d=b,a):d};a.copy=function(){return un().domain(b).range(c).unknown(d)};return fe.apply(a,arguments)}function Hb(a,b,c,d){function e(b){return a(b=
new Date(+b)),b}e.floor=e;e.ceil=function(c){return a(c=new Date(c-1)),b(c,1),a(c),c};e.round=function(a){var b=e(a),c=e.ceil(a);return a-b<c-a?b:c};e.offset=function(a,c){return b(a=new Date(+a),null==c?1:Math.floor(c)),a};e.range=function(c,d,f){var g=[],m;c=e.ceil(c);f=null==f?1:Math.floor(f);if(!(c<d&&0<f))return g;do g.push(m=new Date(+c)),b(c,f),a(c);while(m<c&&c<d);return g};e.filter=function(c){return Hb(function(b){if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},function(a,d){if(a>=a)if(0>d)for(;0>=
++d;)for(;b(a,-1),!c(a););else for(;0<=--d;)for(;b(a,1),!c(a););})};c&&(e.count=function(b,d){jp.setTime(+b);kp.setTime(+d);a(jp);a(kp);return Math.floor(c(jp,kp))},e.every=function(a){a=Math.floor(a);return isFinite(a)&&0<a?1<a?e.filter(d?function(b){return 0===d(b)%a}:function(b){return 0===e.count(0,b)%a}):e:null});return e}function fh(a){return Hb(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+7*b)},function(a,b){return(b-a-6E4*(b.getTimezoneOffset()-
a.getTimezoneOffset()))/6048E5})}function Ld(a){return Hb(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+7*b)},function(a,b){return(b-a)/6048E5})}function Eb(a){if(0<=a.y&&100>a.y){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function ak(a){if(0<=a.y&&100>a.y){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,
a.m,a.d,a.H,a.M,a.S,a.L))}function Ib(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function Pf(a){function b(a,b){return function(c){var d=[],e=-1,f=0,g=a.length,m,h;for(c instanceof Date||(c=new Date(+c));++e<g;)if(37===a.charCodeAt(e)){d.push(a.slice(f,e));null!=(f=Pq[m=a.charAt(++e)])?m=a.charAt(++e):f="e"===m?" ":"0";if(h=b[m])m=h(c,f);d.push(m);f=e+1}d.push(a.slice(f,e));return d.join("")}}function c(a,b){return function(c){var e=Ib(1900);if(d(e,a,c+="",0)!=c.length)return null;if("Q"in e)return new Date(e.Q);
"p"in e&&(e.H=e.H%12+12*e.p);if("V"in e){if(1>e.V||53<e.V)return null;"w"in e||(e.w=1);if("Z"in e){c=ak(Ib(e.y));var f=c.getUTCDay();c=4<f||0===f?vl.ceil(c):vl(c);c=wl.offset(c,7*(e.V-1));e.y=c.getUTCFullYear();e.m=c.getUTCMonth();e.d=c.getUTCDate()+(e.w+6)%7}else c=b(Ib(e.y)),f=c.getDay(),c=4<f||0===f?xl.ceil(c):xl(c),c=yl.offset(c,7*(e.V-1)),e.y=c.getFullYear(),e.m=c.getMonth(),e.d=c.getDate()+(e.w+6)%7}else if("W"in e||"U"in e)"w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),f="Z"in e?ak(Ib(e.y)).getUTCDay():
b(Ib(e.y)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(f+5)%7:e.w+7*e.U-(f+6)%7;return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,ak(e)):b(e)}}function d(a,b,c,d){for(var e=0,f=b.length,g=c.length,m;e<f;){if(d>=g)return-1;m=b.charCodeAt(e++);if(37===m){if(m=b.charAt(e++),m=ja[m in Pq?b.charAt(e++):m],!m||0>(d=m(a,c,d)))return-1}else if(m!=c.charCodeAt(d++))return-1}return d}var e=a.dateTime,f=a.date,g=a.time,m=a.periods,h=a.days,q=a.shortDays,k=a.months,l=a.shortMonths,C=vg(m),n=Zh(m),J=vg(h),L=Zh(h),p=
vg(q),G=Zh(q),N=vg(k),Q=Zh(k),t=vg(l),r=Zh(l),I={a:function(a){return q[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return k[a.getMonth()]},c:null,d:zl,e:zl,f:vn,H:lp,I:bk,j:Al,L:$h,m:mp,M:np,p:function(a){return m[+(12<=a.getHours())]},Q:wn,s:Qi,S:op,u:pp,U:xn,V:ck,w:dk,W:Bl,x:null,X:null,y:Ob,Y:qp,Z:ek,"%":fk},u={a:function(a){return q[a.getUTCDay()]},A:function(a){return h[a.getUTCDay()]},b:function(a){return l[a.getUTCMonth()]},B:function(a){return k[a.getUTCMonth()]},
c:null,d:yn,e:yn,f:zn,H:rp,I:he,j:sp,L:Cl,m:ie,M:An,p:function(a){return m[+(12<=a.getUTCHours())]},Q:wn,s:Qi,S:tp,u:gh,U:gk,V:je,w:Ee,W:up,x:null,X:null,y:Qf,Y:gf,Z:vp,"%":fk},ja={a:function(a,b,c){return(b=p.exec(b.slice(c)))?(a.w=G[b[0].toLowerCase()],c+b[0].length):-1},A:function(a,b,c){return(b=J.exec(b.slice(c)))?(a.w=L[b[0].toLowerCase()],c+b[0].length):-1},b:function(a,b,c){return(b=t.exec(b.slice(c)))?(a.m=r[b[0].toLowerCase()],c+b[0].length):-1},B:function(a,b,c){return(b=N.exec(b.slice(c)))?
(a.m=Q[b[0].toLowerCase()],c+b[0].length):-1},c:function(a,b,c){return d(a,e,b,c)},d:hk,e:hk,f:Dl,H:ik,I:ik,j:wp,L:Rf,m:xp,M:yp,p:function(a,b,c){return(b=C.exec(b.slice(c)))?(a.p=n[b[0].toLowerCase()],c+b[0].length):-1},Q:Bn,s:Cn,S:Dn,u:El,U:jk,V:Fl,w:Gl,W:ke,x:function(a,b,c){return d(a,f,b,c)},X:function(a,b,c){return d(a,g,b,c)},y:En,Y:kk,Z:lk,"%":zp};I.x=b(f,I);I.X=b(g,I);I.c=b(e,I);u.x=b(f,u);u.X=b(g,u);u.c=b(e,u);return{format:function(a){var c=b(a+="",I);c.toString=function(){return a};return c},
parse:function(a){var b=c(a+="",Eb);b.toString=function(){return a};return b},utcFormat:function(a){var c=b(a+="",u);c.toString=function(){return a};return c},utcParse:function(a){var b=c(a,ak);b.toString=function(){return a};return b}}}function ib(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function Ri(a){return a.replace(Ts,"\\$&")}function vg(a){return new RegExp("^(?:"+a.map(Ri).join("|")+")","i")}function Zh(a){for(var b={},c=-1,d=a.length;++c<
d;)b[a[c].toLowerCase()]=c;return b}function Gl(a,b,c){return(b=Sc.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function El(a,b,c){return(b=Sc.exec(b.slice(c,c+1)))?(a.u=+b[0],c+b[0].length):-1}function jk(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.U=+b[0],c+b[0].length):-1}function Fl(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.V=+b[0],c+b[0].length):-1}function ke(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.W=+b[0],c+b[0].length):-1}function kk(a,b,c){return(b=Sc.exec(b.slice(c,c+4)))?(a.y=
+b[0],c+b[0].length):-1}function En(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1}function lk(a,b,c){return(b=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6)))?(a.Z=b[1]?0:-(b[2]+(b[3]||"00")),c+b[0].length):-1}function xp(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function hk(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function wp(a,b,c){return(b=Sc.exec(b.slice(c,c+3)))?(a.m=0,a.d=+b[0],c+b[0].length):
-1}function ik(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function yp(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Dn(a,b,c){return(b=Sc.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Rf(a,b,c){return(b=Sc.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Dl(a,b,c){return(b=Sc.exec(b.slice(c,c+6)))?(a.L=Math.floor(b[0]/1E3),c+b[0].length):-1}function zp(a,b,c){return(a=Us.exec(b.slice(c,c+1)))?c+a[0].length:-1}function Bn(a,
b,c){return(b=Sc.exec(b.slice(c)))?(a.Q=+b[0],c+b[0].length):-1}function Cn(a,b,c){return(b=Sc.exec(b.slice(c)))?(a.Q=1E3*+b[0],c+b[0].length):-1}function zl(a,b){return ib(a.getDate(),b,2)}function lp(a,b){return ib(a.getHours(),b,2)}function bk(a,b){return ib(a.getHours()%12||12,b,2)}function Al(a,b){return ib(1+yl.count(hh(a),a),b,3)}function $h(a,b){return ib(a.getMilliseconds(),b,3)}function vn(a,b){return $h(a,b)+"000"}function mp(a,b){return ib(a.getMonth()+1,b,2)}function np(a,b){return ib(a.getMinutes(),
b,2)}function op(a,b){return ib(a.getSeconds(),b,2)}function pp(a){a=a.getDay();return 0===a?7:a}function xn(a,b){return ib(Hl.count(hh(a),a),b,2)}function ck(a,b){var c=a.getDay();a=4<=c||0===c?Il(a):Il.ceil(a);return ib(Il.count(hh(a),a)+(4===hh(a).getDay()),b,2)}function dk(a){return a.getDay()}function Bl(a,b){return ib(xl.count(hh(a),a),b,2)}function Ob(a,b){return ib(a.getFullYear()%100,b,2)}function qp(a,b){return ib(a.getFullYear()%1E4,b,4)}function ek(a){a=a.getTimezoneOffset();return(0<
a?"-":(a*=-1,"+"))+ib(a/60|0,"0",2)+ib(a%60,"0",2)}function yn(a,b){return ib(a.getUTCDate(),b,2)}function rp(a,b){return ib(a.getUTCHours(),b,2)}function he(a,b){return ib(a.getUTCHours()%12||12,b,2)}function sp(a,b){return ib(1+wl.count(ih(a),a),b,3)}function Cl(a,b){return ib(a.getUTCMilliseconds(),b,3)}function zn(a,b){return Cl(a,b)+"000"}function ie(a,b){return ib(a.getUTCMonth()+1,b,2)}function An(a,b){return ib(a.getUTCMinutes(),b,2)}function tp(a,b){return ib(a.getUTCSeconds(),b,2)}function gh(a){a=
a.getUTCDay();return 0===a?7:a}function gk(a,b){return ib(Jl.count(ih(a),a),b,2)}function je(a,b){var c=a.getUTCDay();a=4<=c||0===c?Kl(a):Kl.ceil(a);return ib(Kl.count(ih(a),a)+(4===ih(a).getUTCDay()),b,2)}function Ee(a){return a.getUTCDay()}function up(a,b){return ib(vl.count(ih(a),a),b,2)}function Qf(a,b){return ib(a.getUTCFullYear()%100,b,2)}function gf(a,b){return ib(a.getUTCFullYear()%1E4,b,4)}function vp(){return"+0000"}function fk(){return"%"}function wn(a){return+a}function Qi(a){return Math.floor(+a/
1E3)}function Fn(a){mk=Pf(a);e.timeFormat=mk.format;e.timeParse=mk.parse;e.utcFormat=mk.utcFormat;e.utcParse=mk.utcParse;return mk}function Ll(a){return a.toISOString()}function Gn(a){a=new Date(a);return isNaN(a)?null:a}function Hn(a){return new Date(a)}function In(a){return a instanceof Date?+a:+new Date(+a)}function ai(a,b,d,e,f,g,m,h,q){function k(c){return(m(c)<c?L:g(c)<c?p:f(c)<c?G:e(c)<c?N:b(c)<c?d(c)<c?Q:t:a(c)<c?r:I)(c)}function l(b,d,e,f){null==b&&(b=10);if("number"===typeof b){f=Math.abs(e-
d)/b;var g=c(function(a){return a[2]}).right(ja,f);g===ja.length?(f=u(d/Ap,e/Ap,b),b=a):g?(g=ja[f/ja[g-1][2]<ja[g][2]/f?g-1:g],f=g[1],b=g[0]):(f=Math.max(u(d,e,b),1),b=h)}return null==f?b:b.every(f)}var C=kn(ta,ta),n=C.invert,J=C.domain,L=q(".%L"),p=q(":%S"),G=q("%I:%M"),N=q("%I %p"),Q=q("%a %d"),t=q("%b %d"),r=q("%B"),I=q("%Y"),ja=[[m,1,1E3],[m,5,5E3],[m,15,15E3],[m,30,3E4],[g,1,6E4],[g,5,3E5],[g,15,9E5],[g,30,18E5],[f,1,36E5],[f,3,108E5],[f,6,216E5],[f,12,432E5],[e,1,864E5],[e,2,1728E5],[d,1,Vs],
[b,1,Qq],[b,3,3*Qq],[a,1,Ap]];C.invert=function(a){return new Date(n(a))};C.domain=function(a){return arguments.length?J(jn.call(a,In)):J().map(Hn)};C.ticks=function(a,b){var c=J(),d=c[0];c=c[c.length-1];var e=c<d;if(e){var f=d;d=c;c=f}f=(f=l(a,d,c,b))?f.range(d,c+1):[];return e?f.reverse():f};C.tickFormat=function(a,b){return null==b?k:q(b)};C.nice=function(a,b){var c=J();return(a=l(a,c[0],c[c.length-1],b))?J(on(c,a)):C};C.copy=function(){return Oi(C,ai(a,b,d,e,f,g,m,h,q))};return C}function Si(){function a(a){return isNaN(a=
+a)?q:m(0===f?.5:(a=(g(a)-d)*f,h?Math.max(0,Math.min(1,a)):a))}var b=0,c=1,d,e,f,g,m=ta,h=!1,q;a.domain=function(m){return arguments.length?(d=g(b=+m[0]),e=g(c=+m[1]),f=d===e?0:1/(e-d),a):[b,c]};a.clamp=function(b){return arguments.length?(h=!!b,a):h};a.interpolator=function(b){return arguments.length?(m=b,a):m};a.unknown=function(b){return arguments.length?(q=b,a):q};return function(m){g=m;d=m(b);e=m(c);f=d===e?0:1/(e-d);return a}}function wg(a,b){return b.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}
function Ml(){var a=ug(Si()(ta));a.copy=function(){return wg(a,Ml())};return ef.apply(a,arguments)}function Nl(){var a=ff(Si()).domain([1,10]);a.copy=function(){return wg(a,Nl()).base(a.base())};return ef.apply(a,arguments)}function bi(){var a=Zj(Si());a.copy=function(){return wg(a,bi()).constant(a.constant())};return ef.apply(a,arguments)}function nk(){var a=Xh(Si());a.copy=function(){return wg(a,nk()).exponent(a.exponent())};return ef.apply(a,arguments)}function Ol(){function a(a){if(!isNaN(a=+a))return c((tg(b,
a)-1)/(b.length-1))}var b=[],c=ta;a.domain=function(c){if(!arguments.length)return b.slice();b=[];for(var d=0,e=c.length,g;d<e;++d)(g=c[d],null==g||isNaN(g=+g))||b.push(g);b.sort(f);return a};a.interpolator=function(b){return arguments.length?(c=b,a):c};a.copy=function(){return Ol(c).domain(b)};return ef.apply(a,arguments)}function Ti(){function a(a){return isNaN(a=+a)?C:(a=.5+((a=+k(a))-f)*(a<f?m:h),q(l?Math.max(0,Math.min(1,a)):a))}var b=0,c=.5,d=1,e,f,g,m,h,q=ta,k,l=!1,C;a.domain=function(q){return arguments.length?
(e=k(b=+q[0]),f=k(c=+q[1]),g=k(d=+q[2]),m=e===f?0:.5/(f-e),h=f===g?0:.5/(g-f),a):[b,c,d]};a.clamp=function(b){return arguments.length?(l=!!b,a):l};a.interpolator=function(b){return arguments.length?(q=b,a):q};a.unknown=function(b){return arguments.length?(C=b,a):C};return function(q){k=q;e=q(b);f=q(c);g=q(d);m=e===f?0:.5/(f-e);h=f===g?0:.5/(g-f);return a}}function Jn(){var a=ug(Ti()(ta));a.copy=function(){return wg(a,Jn())};return ef.apply(a,arguments)}function Kn(){var a=ff(Ti()).domain([.1,1,10]);
a.copy=function(){return wg(a,Kn()).base(a.base())};return ef.apply(a,arguments)}function Pl(){var a=Zj(Ti());a.copy=function(){return wg(a,Pl()).constant(a.constant())};return ef.apply(a,arguments)}function Ui(){var a=Xh(Ti());a.copy=function(){return wg(a,Ui()).exponent(a.exponent())};return ef.apply(a,arguments)}function Ga(a){for(var b=a.length/6|0,c=Array(b),d=0;d<b;)c[d]="#"+a.slice(6*d,6*++d);return c}function lb(a){return Pb(a[a.length-1])}function ci(a){var b=a.length;return function(c){return a[Math.max(0,
Math.min(b-1,Math.floor(c*b)))]}}function ua(a){return function(){return a}}function Ln(a){return 1<=a?Mn:-1>=a?-Mn:Math.asin(a)}function Bp(a){return a.innerRadius}function Nn(a){return a.outerRadius}function Ql(a){return a.startAngle}function Cp(a){return a.endAngle}function Dp(a){return a&&a.padAngle}function Vi(a,b,c,d,e,f,g){var m=a-c,h=b-d;g=(g?f:-f)/ok(m*m+h*h);h*=g;m*=-g;var q=a+h,k=b+m,l=c+h,C=d+m;c=(q+l)/2;d=(k+C)/2;b=l-q;a=C-k;g=b*b+a*a;f=e-f;C=q*C-l*k;var n=(0>a?-1:1)*ok(Ws(0,f*f*g-C*
C));q=(C*a-b*n)/g;k=(-C*b-a*n)/g;l=(C*a+b*n)/g;b=(-C*b+a*n)/g;a=q-c;g=k-d;c=l-c;d=b-d;a*a+g*g>c*c+d*d&&(q=l,k=b);return{cx:q,cy:k,x01:-h,y01:-m,x11:q*(e/f-1),y11:k*(e/f-1)}}function Wi(a){this._context=a}function Xi(a){return new Wi(a)}function Rl(a){return a[0]}function Sl(a){return a[1]}function Tl(){function a(a){var m,h=a.length,q,k=!1,l;null==e&&(g=f(l=Sd()));for(m=0;m<=h;++m)!(m<h&&d(q=a[m],m,a))===k&&((k=!k)?g.lineStart():g.lineEnd()),k&&g.point(+b(q,m,a),+c(q,m,a));if(l)return g=null,l+""||
null}var b=Rl,c=Sl,d=ua(!0),e=null,f=Xi,g=null;a.x=function(c){return arguments.length?(b="function"===typeof c?c:ua(+c),a):b};a.y=function(b){return arguments.length?(c="function"===typeof b?b:ua(+b),a):c};a.defined=function(b){return arguments.length?(d="function"===typeof b?b:ua(!!b),a):d};a.curve=function(b){return arguments.length?(f=b,null!=e&&(g=f(e)),a):f};a.context=function(b){return arguments.length?(null==b?e=g=null:g=f(e=b),a):e};return a}function On(){function a(a){var b,k,l=a.length,
C,n=!1,J,L=Array(l),p=Array(l);null==m&&(q=h(J=Sd()));for(b=0;b<=l;++b){if(!(b<l&&g(C=a[b],b,a))===n)if(n=!n){var G=b;q.areaStart();q.lineStart()}else{q.lineEnd();q.lineStart();for(k=b-1;k>=G;--k)q.point(L[k],p[k]);q.lineEnd();q.areaEnd()}n&&(L[b]=+c(C,b,a),p[b]=+e(C,b,a),q.point(d?+d(C,b,a):L[b],f?+f(C,b,a):p[b]))}if(J)return q=null,J+""||null}function b(){return Tl().defined(g).curve(h).context(m)}var c=Rl,d=null,e=ua(0),f=Sl,g=ua(!0),m=null,h=Xi,q=null;a.x=function(b){return arguments.length?(c=
"function"===typeof b?b:ua(+b),d=null,a):c};a.x0=function(b){return arguments.length?(c="function"===typeof b?b:ua(+b),a):c};a.x1=function(b){return arguments.length?(d=null==b?null:"function"===typeof b?b:ua(+b),a):d};a.y=function(b){return arguments.length?(e="function"===typeof b?b:ua(+b),f=null,a):e};a.y0=function(b){return arguments.length?(e="function"===typeof b?b:ua(+b),a):e};a.y1=function(b){return arguments.length?(f=null==b?null:"function"===typeof b?b:ua(+b),a):f};a.lineX0=a.lineY0=function(){return b().x(c).y(e)};
a.lineY1=function(){return b().x(c).y(f)};a.lineX1=function(){return b().x(d).y(e)};a.defined=function(b){return arguments.length?(g="function"===typeof b?b:ua(!!b),a):g};a.curve=function(b){return arguments.length?(h=b,null!=m&&(q=h(m)),a):h};a.context=function(b){return arguments.length?(null==b?m=q=null:q=h(m=b),a):m};return a}function Ep(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function Fp(a){return a}function Pn(a){this._curve=a}function xg(a){function b(b){return new Pn(a(b))}b._curve=a;return b}
function Fe(a){var b=a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(a){return arguments.length?b(xg(a)):b()._curve};return a}function Ul(){return Fe(Tl().curve(Rq))}function Vl(){var a=On().curve(Rq),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,f=a.lineY1;a.angle=a.x;delete a.x;a.startAngle=a.x0;delete a.x0;a.endAngle=a.x1;delete a.x1;a.radius=a.y;delete a.y;a.innerRadius=a.y0;delete a.y0;a.outerRadius=a.y1;delete a.y1;a.lineStartAngle=function(){return Fe(c())};delete a.lineX0;
a.lineEndAngle=function(){return Fe(d())};delete a.lineX1;a.lineInnerRadius=function(){return Fe(e())};delete a.lineY0;a.lineOuterRadius=function(){return Fe(f())};delete a.lineY1;a.curve=function(a){return arguments.length?b(xg(a)):b()._curve};return a}function di(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function Wl(a){return a.source}function Gp(a){return a.target}function pk(a){function b(){var b,m=Hp.call(arguments),h=c.apply(this,m),q=d.apply(this,m);g||(g=b=Sd());a(g,+e.apply(this,
(m[0]=h,m)),+f.apply(this,m),+e.apply(this,(m[0]=q,m)),+f.apply(this,m));if(b)return g=null,b+""||null}var c=Wl,d=Gp,e=Rl,f=Sl,g=null;b.source=function(a){return arguments.length?(c=a,b):c};b.target=function(a){return arguments.length?(d=a,b):d};b.x=function(a){return arguments.length?(e="function"===typeof a?a:ua(+a),b):e};b.y=function(a){return arguments.length?(f="function"===typeof a?a:ua(+a),b):f};b.context=function(a){return arguments.length?(g=null==a?null:a,b):g};return b}function ei(a,b,
c,d,e){a.moveTo(b,c);a.bezierCurveTo(b=(b+d)/2,c,b,e,d,e)}function Ip(a,b,c,d,e){a.moveTo(b,c);a.bezierCurveTo(b,c=(c+e)/2,d,c,d,e)}function Qn(a,b,c,d,e){var f=di(b,c);b=di(b,c=(c+e)/2);c=di(d,c);d=di(d,e);a.moveTo(f[0],f[1]);a.bezierCurveTo(b[0],b[1],c[0],c[1],d[0],d[1])}function yg(){}function hf(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function fi(a){this._context=a}function Rn(a){this._context=
a}function jh(a){this._context=a}function kh(a,b){this._basis=new fi(a);this._beta=b}function Yi(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function qk(a,b){this._context=a;this._k=(1-b)/6}function Zi(a,b){this._context=a;this._k=(1-b)/6}function Xl(a,b){this._context=a;this._k=(1-b)/6}function rk(a,b,c){var d=a._x1,e=a._y1,f=a._x2,g=a._y2;if(1E-12<a._l01_a){var m=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,
h=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*m-a._x0*a._l12_2a+a._x2*a._l01_2a)/h;e=(e*m-a._y0*a._l12_2a+a._y2*a._l01_2a)/h}1E-12<a._l23_a&&(m=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,h=3*a._l23_a*(a._l23_a+a._l12_a),f=(f*m+a._x1*a._l23_2a-b*a._l12_2a)/h,g=(g*m+a._y1*a._l23_2a-c*a._l12_2a)/h);a._context.bezierCurveTo(d,e,f,g,a._x2,a._y2)}function Yl(a,b){this._context=a;this._alpha=b}function gi(a,b){this._context=a;this._alpha=b}function Sn(a,b){this._context=a;this._alpha=b}function sk(a){this._context=
a}function Tn(a,b,c){var d=a._x1-a._x0;b-=a._x1;var e=(a._y1-a._y0)/(d||0>b&&-0);a=(c-a._y1)/(b||0>d&&-0);return((0>e?-1:1)+(0>a?-1:1))*Math.min(Math.abs(e),Math.abs(a),.5*Math.abs((e*b+a*d)/(d+b)))||0}function Un(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function Zl(a,b,c){var d=a._x0,e=a._x1,f=a._y1,g=(e-d)/3;a._context.bezierCurveTo(d+g,a._y0+g*b,e-g,f-g*c,e,f)}function tk(a){this._context=a}function Vn(a){this._context=new Wn(a)}function Wn(a){this._context=a}function uk(a){this._context=
a}function $l(a){var b,c=a.length-1,d=Array(c),e=Array(c),f=Array(c);d[0]=0;e[0]=2;f[0]=a[0]+2*a[1];for(b=1;b<c-1;++b)d[b]=1,e[b]=4,f[b]=4*a[b]+2*a[b+1];d[c-1]=2;e[c-1]=7;f[c-1]=8*a[c-1]+a[c];for(b=1;b<c;++b){var g=d[b]/e[b-1];e[b]-=g;f[b]-=g*f[b-1]}d[c-1]=f[c-1]/e[c-1];for(b=c-2;0<=b;--b)d[b]=(f[b]-d[b+1])/e[b];e[c-1]=(a[c]+d[c-1])/2;for(b=0;b<c-1;++b)e[b]=2*a[b+1]-d[b+1];return[d,e]}function $i(a,b){this._context=a;this._t=b}function zg(a,b){if(1<(g=a.length))for(var c=1,d,e,f=a[b[0]],g,m=f.length;c<
g;++c)for(e=f,f=a[b[c]],d=0;d<m;++d)f[d][1]+=f[d][0]=isNaN(e[d][1])?e[d][0]:e[d][1]}function jf(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Xn(a,b){return a[b]}function am(a){var b=a.map(Yn);return jf(a).sort(function(a,c){return b[a]-b[c]})}function Yn(a){for(var b=-1,c=0,d=a.length,e,f=-Infinity;++b<d;)(e=+a[b][1])>f&&(f=e,c=b);return c}function vk(a){var b=a.map(bm);return jf(a).sort(function(a,c){return b[a]-b[c]})}function bm(a){for(var b=0,c=-1,d=a.length,e;++c<d;)if(e=
+a[c][1])b+=e;return b}function Zn(a){return function(){return a}}function $n(a){return a[0]}function cm(a){return a[1]}function Ag(){this._=null}function wk(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function zc(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function hi(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function ao(a){for(;a.L;)a=a.L;return a}function lh(a,b,c,d){var e=[null,null],f=nd.push(e)-1;e.left=a;e.right=
b;c&&xk(e,a,b,c);d&&xk(e,b,a,d);Ge[a.index].halfedges.push(f);Ge[b.index].halfedges.push(f);return e}function aj(a,b,c){b=[b,c];b.left=a;return b}function xk(a,b,c,d){a[0]||a[1]?a.left===c?a[1]=d:a[0]=d:(a[0]=d,a.left=b,a.right=c)}function Jp(a,b,c,d,e){var f=a[0],g=a[1],m=f[0];f=f[1];var h=0,q=1,k=g[0]-m;g=g[1]-f;b-=m;if(k||!(0<b)){b/=k;if(0>k){if(b<h)return;b<q&&(q=b)}else if(0<k){if(b>q)return;b>h&&(h=b)}b=d-m;if(k||!(0>b)){b/=k;if(0>k){if(b>q)return;b>h&&(h=b)}else if(0<k){if(b<h)return;b<q&&
(q=b)}b=c-f;if(g||!(0<b)){b/=g;if(0>g){if(b<h)return;b<q&&(q=b)}else if(0<g){if(b>q)return;b>h&&(h=b)}b=e-f;if(g||!(0>b)){b/=g;if(0>g){if(b>q)return;b>h&&(h=b)}else if(0<g){if(b<h)return;b<q&&(q=b)}if(!(0<h||1>q))return!0;0<h&&(a[0]=[m+h*k,f+h*g]);1>q&&(a[1]=[m+q*k,f+q*g]);return!0}}}}}function Kp(a,b,c,d,e){var f=a[1];if(f)return!0;var g=a[0],m=a.left,h=a.right;f=m[0];m=m[1];var q=h[0];h=h[1];var k=(f+q)/2;if(h===m){if(k<b||k>=d)return;if(f>q){if(!g)g=[k,c];else if(g[1]>=e)return;f=[k,e]}else{if(!g)g=
[k,e];else if(g[1]<c)return;f=[k,c]}}else{var l=(f-q)/(h-m);k=(m+h)/2-l*k;if(-1>l||1<l)if(f>q){if(!g)g=[(c-k)/l,c];else if(g[1]>=e)return;f=[(e-k)/l,e]}else{if(!g)g=[(e-k)/l,e];else if(g[1]<c)return;f=[(c-k)/l,c]}else if(m<h){if(!g)g=[b,l*b+k];else if(g[0]>=d)return;f=[d,l*d+k]}else{if(!g)g=[d,l*d+k];else if(g[0]<b)return;f=[b,l*b+k]}}a[0]=g;a[1]=f;return!0}function Lp(a,b){a=a.site;var c=b.left,d=b.right;a===d&&(d=c,c=a);if(d)return Math.atan2(d[1]-c[1],d[0]-c[0]);a===c?(c=b[1],d=b[0]):(c=b[0],d=
b[1]);return Math.atan2(c[0]-d[0],d[1]-c[1])}function bo(a,b){return b[+(b.left!==a.site)]}function Mp(){for(var a=0,b=Ge.length,c,d,e,f;a<b;++a)if((c=Ge[a])&&(f=(d=c.halfedges).length)){var g=Array(f),m=Array(f);for(e=0;e<f;++e)g[e]=e,m[e]=Lp(c,nd[d[e]]);g.sort(function(a,b){return m[b]-m[a]});for(e=0;e<f;++e)m[e]=d[g[e]];for(e=0;e<f;++e)d[e]=m[e]}}function co(){wk(this);this.x=this.y=this.arc=this.site=this.cy=null}function kf(a){var b=a.P,c=a.N;if(b&&c){var d=b.site;b=a.site;var e=c.site;if(d!==
e){c=b[0];var f=b[1],g=d[0]-c,m=d[1]-f;d=e[0]-c;var h=e[1]-f;e=2*(g*h-m*d);if(!(e>=-Xs)){var q=g*g+m*m,k=d*d+h*h;m=(h*q-m*k)/e;d=(g*k-d*q)/e;g=Sq.pop()||new co;g.arc=a;g.site=b;g.x=m+c;g.y=(g.cy=d+f)+Math.sqrt(m*m+d*d);a.circle=g;a=null;for(b=dm._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}dm.insert(a,g);a||(Np=g)}}}}function Bg(a){var b=a.circle;b&&(b.P||(Np=b.N),dm.remove(b),Sq.push(b),wk(b),a.circle=null)}function Op(){wk(this);this.edge=this.site=
this.circle=null}function eo(a){var b=Tq.pop()||new Op;b.site=a;return b}function em(a){Bg(a);yk.remove(a);Tq.push(a);wk(a)}function fo(a,b){var c=a.site,d=c[0],e=c[1],f=e-b;if(!f)return d;a=a.P;if(!a)return-Infinity;c=a.site;a=c[0];c=c[1];b=c-b;if(!b)return a;var g=a-d,m=1/f-1/b,h=g/b;return m?(-h+Math.sqrt(h*h-2*m*(g*g/(-2*b)-c+b/2+e-f/2)))/m+d:(d+a)/2}function Pp(a,b){return b[1]-a[1]||b[0]-a[0]}function bj(a,b){var c=a.sort(Pp).pop(),d;nd=[];Ge=Array(a.length);yk=new Ag;for(dm=new Ag;;){var e=
Np;if(c&&(!e||c[1]<e.y||c[1]===e.y&&c[0]<e.x)){if(c[0]!==d||c[1]!==f){var f=d=void 0;e=c;for(var g=e[0],m=e[1],h=yk._;h;){var q=fo(h,m)-g;if(q>ob)h=h.L;else{var k=h;var l=m;var C=k.N;C?l=fo(C,l):(k=k.site,l=k[1]===l?k[0]:Infinity);l=g-l;if(l>ob){if(!h.R){f=h;break}h=h.R}else{q>-ob?(f=h.P,d=h):l>-ob?(f=h,d=h.N):f=d=h;break}}}Ge[e.index]={site:e,halfedges:[]};q=eo(e);yk.insert(f,q);if(f||d)if(f===d)Bg(f),d=eo(f.site),yk.insert(q,d),q.edge=d.edge=lh(f.site,q.site),kf(f),kf(d);else if(d){Bg(f);Bg(d);
g=f.site;h=g[0];l=g[1];k=e[0]-h;C=e[1]-l;m=d.site;var n=m[0]-h,J=m[1]-l,L=2*(k*J-C*n),p=k*k+C*C,G=n*n+J*J;h=[(J*p-C*G)/L+h,(k*G-n*p)/L+l];xk(d.edge,g,m,h);q.edge=lh(g,e,null,h);d.edge=lh(e,m,null,h);kf(f);kf(d)}else q.edge=lh(f.site,q.site);d=c[0];f=c[1]}c=a.pop()}else if(e){m=e.arc;e=m.circle;g=e.x;h=e.cy;e=[g,h];k=m.P;l=m.N;q=[m];em(m);for(m=k;m.circle&&Math.abs(g-m.circle.x)<ob&&Math.abs(h-m.circle.cy)<ob;)k=m.P,q.unshift(m),em(m),m=k;q.unshift(m);Bg(m);for(k=l;k.circle&&Math.abs(g-k.circle.x)<
ob&&Math.abs(h-k.circle.cy)<ob;)l=k.N,q.push(k),em(k),k=l;q.push(k);Bg(k);h=q.length;for(g=1;g<h;++g)k=q[g],m=q[g-1],xk(k.edge,m.site,k.site,e);m=q[0];k=q[h-1];k.edge=lh(m.site,k.site,null,e);kf(m);kf(k)}else break}Mp();if(b){d=+b[0][0];a=+b[0][1];c=+b[1][0];b=+b[1][1];f=nd.length;for(var N;f--;)Kp(N=nd[f],d,a,c,b)&&Jp(N,d,a,c,b)&&(Math.abs(N[0][0]-N[1][0])>ob||Math.abs(N[0][1]-N[1][1])>ob)||delete nd[f];N=Ge.length;f=!0;for(e=0;e<N;++e)if(q=Ge[e]){var Q=q.site;m=q.halfedges;for(g=m.length;g--;)nd[m[g]]||
m.splice(g,1);g=0;for(h=m.length;g<h;)if(l=nd[m[g]],k=l[+(l.left===q.site)],C=k[0],n=k[1],J=bo(q,nd[m[++g%h]]),l=J[0],J=J[1],Math.abs(C-l)>ob||Math.abs(n-J)>ob)m.splice(g,0,nd.push(aj(Q,k,Math.abs(C-d)<ob&&b-n>ob?[d,Math.abs(l-d)<ob?J:b]:Math.abs(n-b)<ob&&c-C>ob?[Math.abs(J-b)<ob?l:c,b]:Math.abs(C-c)<ob&&n-a>ob?[c,Math.abs(l-c)<ob?J:a]:Math.abs(n-a)<ob&&C-d>ob?[Math.abs(J-a)<ob?l:d,a]:null))-1),++h;h&&(f=!1)}if(f){g=Infinity;e=0;for(f=null;e<N;++e)if(q=Ge[e])Q=q.site,m=Q[0]-d,h=Q[1]-a,m=m*m+h*h,m<
g&&(g=m,f=q);f&&(e=[d,a],d=[d,b],b=[c,b],a=[c,a],f.halfedges.push(nd.push(aj(Q=f.site,e,d))-1,nd.push(aj(Q,d,b))-1,nd.push(aj(Q,b,a))-1,nd.push(aj(Q,a,e))-1))}for(e=0;e<N;++e)if(q=Ge[e])q.halfedges.length||delete Ge[e]}this.edges=nd;this.cells=Ge;yk=dm=nd=Ge=null}function cj(a){return function(){return a}}function Qp(a,b,c){this.target=a;this.type=b;this.transform=c}function Sf(a,b,c){this.k=a;this.x=b;this.y=c}function fm(a){return a.__zoom||go}function dj(){e.event.preventDefault();e.event.stopImmediatePropagation()}
function Rp(){return!e.event.button}function zk(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function ho(){return this.__zoom||go}function Sp(){return-e.event.deltaY*(e.event.deltaMode?120:1)/500}function Ak(){return"ontouchstart"in this}function io(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];
return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),b>f?(f+b)/2:Math.min(0,f)||Math.max(0,b))}var jo=c(f),tg=jo.right,Tp=jo.left,ko=Array.prototype,Up=ko.slice,Cg=ko.map,Nk=Math.sqrt(50),Ok=Math.sqrt(10),Pk=Math.sqrt(2),Qk=Array.prototype.slice,yo={value:function(){}};S.prototype=M.prototype={constructor:S,on:function(a,b){var c=this._,d=ia(a+"",c),e,f=-1,g=d.length;if(2>arguments.length)for(;++f<g;){var m;if(m=e=(a=d[f]).type){a:{m=c[e];for(var h=0,q=m.length;h<q;++h)if((e=m[h]).name===a.name){e=
e.value;break a}e=void 0}m=e}if(m)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(e=(a=d[f]).type)c[e]=za(c[e],a.name,b);else if(null==b)for(e in c)c[e]=za(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new S(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,f;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);f=this._[a];d=0;for(e=
f.length;d<e;++d)f[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var Rk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Qa.prototype={constructor:Qa,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,
b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};fa.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var Sk=
{};e.event=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Sk={mouseenter:"mouseover",mouseleave:"mouseout"}));var Tk=[null];jb.prototype=Xa.prototype={constructor:jb,select:function(a){"function"!==typeof a&&(a=sa(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f=b[e],g=f.length,m=d[e]=Array(g),h,q,k=0;k<g;++k)(h=f[k])&&(q=a.call(h,h.__data__,k,f))&&("__data__"in h&&(q.__data__=h.__data__),m[k]=q);return new jb(d,this._parents)},selectAll:function(a){"function"!==
typeof a&&(a=ea(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;f<c;++f)for(var g=b[f],m=g.length,h,q=0;q<m;++q)if(h=g[q])d.push(a.call(h,h.__data__,q,g)),e.push(h);return new jb(d,e)},filter:function(a){"function"!==typeof a&&(a=la(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f=b[e],g=f.length,m=d[e]=[],h,q=0;q<g;++q)(h=f[q])&&a.call(h,h.__data__,q,f)&&m.push(h);return new jb(d,this._parents)},data:function(a,b){if(!a)return n=Array(this.size()),q=-1,this.each(function(a){n[++q]=
a}),n;var c=b?Kb:ya,d=this._parents,e=this._groups;"function"!==typeof a&&(a=yb(a));for(var f=e.length,g=Array(f),m=Array(f),h=Array(f),q=0;q<f;++q){var k=d[q],l=e[q],C=l.length,n=a.call(k,k&&k.__data__,q,d),J=n.length,L=m[q]=Array(J),p=g[q]=Array(J);C=h[q]=Array(C);c(k,l,L,p,C,n,b);l=k=0;for(var G;k<J;++k)if(C=L[k]){for(k>=l&&(l=k+1);!(G=p[l])&&++l<J;);C._next=G||null}}g=new jb(g,d);g._enter=m;g._exit=h;return g},enter:function(){return new jb(this._enter||this._groups.map(Aa),this._parents)},exit:function(){return new jb(this._exit||
this._groups.map(Aa),this._parents)},join:function(a,b,c){var d=this.enter(),e=this,f=this.exit();d="function"===typeof a?a(d):d.append(a+"");null!=b&&(e=b(e));null==c?f.remove():c(f);return d&&e?d.merge(e).order():e},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),f=0;f<d;++f)for(var g=b[f],m=a[f],h=g.length,q=e[f]=Array(h),k,l=0;l<h;++l)if(k=g[l]||m[l])q[l]=k;for(;f<c;++f)e[f]=b[f];return new jb(e,this._parents)},order:function(){for(var a=this._groups,
b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,f=d[e],g;0<=--e;)if(g=d[e])f&&g.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(g,f),f=g;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=Ta);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g=c[f],m=g.length,h=e[f]=Array(m),q,k=0;k<m;++k)if(q=g[k])h[k]=q;h.sort(b)}return(new jb(e,this._parents)).order()},call:function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);
return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],f=0,g=e.length,m;f<g;++f)(m=e[f])&&a.call(m,m.__data__,f,e);return this},attr:function(a,
b){var c=W(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?Na:Za:"function"===typeof b?c.local?Da:R:c.local?Ca:Ra)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?Ba:"function"===typeof b?ba:Ya)(a,b,null==c?"":c)):gc(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?gb:"function"===typeof b?v:O)(a,b)):this.node()[a]},classed:function(a,b){var c=
(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Ea(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?$a:b?mb:Ia)(c,b))},text:function(a){return arguments.length?this.each(null==a?Ud:("function"===typeof a?Ka:uc)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Rb:("function"===typeof a?Vd:Nc)(a)):this.node().innerHTML},raise:function(){return this.each(zf)},lower:function(){return this.each(vb)},
append:function(a){var b="function"===typeof a?a:U(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:U(a),d=null==b?Cc:"function"===typeof b?b:sa(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(vh)},clone:function(a){return this.select(a?Ie:le)},datum:function(a){return arguments.length?this.property("__data__",
a):this.node().__data__},on:function(a,b,c){var d=mf(a+""),e=d.length,f;if(2>arguments.length){var g=this.node().__on;if(g)for(var m=0,h=g.length,q;m<h;++m){var k=0;for(q=g[m];k<e;++k)if((f=d[k]).type===q.type&&f.name===q.name)return q.value}}else{g=b?Kc:Ac;null==c&&(c=!1);for(k=0;k<e;++k)this.each(g(d[k],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Nd:Tc)(a,b))}};var zo=0;Oc.prototype=oe.prototype={constructor:Oc,get:function(a){for(var b=this._;!(b in a);)if(!(a=
a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};pe.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var ii=1/.7,sm=/^#([0-9a-f]{3})$/,jd=/^#([0-9a-f]{6})$/,tm=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,um=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
Ao=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,vm=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Bo=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,wm=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Dj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xa(fb,Ua,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});xa(Fa,Qb,Dc(fb,{brighter:function(a){a=null==a?ii:Math.pow(ii,a);return new Fa(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Fa(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},
displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Wb(this.r)+Wb(this.g)+Wb(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));xa(Ec,te,Dc(fb,{brighter:function(a){a=
null==a?ii:Math.pow(ii,a);return new Ec(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ec(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new Fa(Le(240<=a?a-240:a+120,c,b),Le(a,c,b),Le(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));
var Tb=Math.PI/180,Fd=180/Math.PI,N=4/29,L=6/29,C=3*L*L,J=L*L*L;xa(tb,Jb,Dc(fb,{brighter:function(a){return new tb(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new tb(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*Ma(b);a=1*Ma(a);c=.82521*Ma(c);return new Fa(Wd(3.1338561*b-1.6168667*a-.4906146*c),Wd(-.9787684*b+1.9161415*a+.033454*c),Wd(.0719453*b-.2289914*
a+1.4052427*c),this.opacity)}}));xa(cb,$c,Dc(fb,{brighter:function(a){return new cb(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new cb(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Ke(this).rgb()}}));var da=1.78277*-.29227-.1347134789;xa(zd,zb,Dc(fb,{brighter:function(a){a=null==a?ii:Math.pow(ii,a);return new zd(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new zd(this.h,this.s,this.l*a,this.opacity)},
rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Tb,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);a=Math.sin(a);return new Fa(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var ja=function ks(a){function b(a,b){var d=c((a=Qb(a)).r,(b=Qb(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),g=La(a.opacity,b.opacity);return function(b){a.r=d(b);a.g=e(b);a.b=f(b);a.opacity=g(b);return a+""}}var c=T(a);b.gamma=ks;return b}(1),Pb=ag(Og),Q=ag(Re),na=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
kd=new RegExp(na.source,"g"),Ej=180/Math.PI,Dg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Eg,gm,hm,lo,Vp=nf(function(a){if("none"===a)return Dg;Eg||(Eg=document.createElement("DIV"),gm=document.documentElement,hm=document.defaultView);Eg.style.transform=a;a=hm.getComputedStyle(gm.appendChild(Eg),null).getPropertyValue("transform");gm.removeChild(Eg);a=a.slice(7,-1).split(",");return Te(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5])},"px, ","px)","deg)"),Uq=nf(function(a){if(null==a)return Dg;
lo||(lo=document.createElementNS("http://www.w3.org/2000/svg","g"));lo.setAttribute("transform",a);if(!(a=lo.transform.baseVal.consolidate()))return Dg;a=a.matrix;return Te(a.a,a.b,a.c,a.d,a.e,a.f)},", ",")",")"),Ci=Math.SQRT2,Ys=Cd(Se),Zs=Cd(La),$s=Ue(Se),at=Ue(La),bt=ad(Se),mo=ad(La),Fj=0,Vk=0,Xk=0,ym,Wk,zm=0,Di=0,xm=0,Uk="object"===typeof performance&&performance.now?performance:Date,pq="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,
17)};Qc.prototype=bd.prototype={constructor:Qc,restart:function(a,b,c){if("function"!==typeof a)throw new TypeError("callback is not a function");c=(null==c?$b():+c)+(null==b?0:+b);this._next||Wk===this||(Wk?Wk._next=this:ym=this,Wk=this);this._call=a;this._time=c;pa()},stop:function(){this._call&&(this._call=null,this._time=Infinity,pa())}};var Es=M("start","end","cancel","interrupt"),Fs=[],ct=Xa.prototype.constructor,Vq=0,Bk=Xa.prototype;Mc.prototype=uh.prototype={constructor:Mc,select:function(a){var b=
this._name,c=this._id;"function"!==typeof a&&(a=sa(a));for(var d=this._groups,e=d.length,f=Array(e),g=0;g<e;++g)for(var m=d[g],h=m.length,q=f[g]=Array(h),k,l,C=0;C<h;++C)(k=m[C])&&(l=a.call(k,k.__data__,C,m))&&("__data__"in k&&(l.__data__=k.__data__),q[C]=l,fc(q[C],b,c,C,q,ra(k,c)));return new Mc(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!==typeof a&&(a=ea(a));for(var d=this._groups,e=d.length,f=[],g=[],m=0;m<e;++m)for(var h=d[m],q=h.length,k,l=0;l<q;++l)if(k=
h[l]){for(var C=a.call(k,k.__data__,l,h),n,J=ra(k,c),L=0,p=C.length;L<p;++L)(n=C[L])&&fc(n,b,c,L,C,J);f.push(C);g.push(k)}return new Mc(f,g,b,c)},filter:function(a){"function"!==typeof a&&(a=la(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f=b[e],g=f.length,m=d[e]=[],h,q=0;q<g;++q)(h=f[q])&&a.call(h,h.__data__,q,f)&&m.push(h);return new Mc(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw Error();var b=this._groups;a=a._groups;for(var c=b.length,
d=Math.min(c,a.length),e=Array(c),f=0;f<d;++f)for(var g=b[f],m=a[f],h=g.length,q=e[f]=Array(h),k,l=0;l<h;++l)if(k=g[l]||m[l])q[l]=k;for(;f<c;++f)e[f]=b[f];return new Mc(e,this._parents,this._name,this._id)},selection:function(){return new ct(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=++Vq,d=this._groups,e=d.length,f=0;f<e;++f)for(var g=d[f],m=g.length,h,q=0;q<m;++q)if(h=g[q]){var k=ra(h,b);fc(h,a,c,q,g,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,
ease:k.ease})}return new Mc(d,this._parents,a,c)},call:Bk.call,nodes:Bk.nodes,node:Bk.node,size:Bk.size,empty:Bk.empty,each:Bk.each,on:function(a,b){var c=this._id;return 2>arguments.length?ra(this.node(),c).on.on(a):this.each(jj(c,a,b))},attr:function(a,b){var c=W(a),d="transform"===c?Uq:ne;return this.attrTween(a,"function"===typeof b?(c.local?pj:sf)(c,d,mh(this,"attr."+a,b)):null==b?(c.local?li:Ek)(c):(c.local?mi:nj)(c,d,b))},attrTween:function(a,b){var c="attr."+a;if(2>arguments.length)return(c=
this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!==typeof b)throw Error();var d=W(a);return this.tween(c,(d.local?tf:se)(d,b))},style:function(a,b,c){var d="transform"===(a+="")?Vp:ne;return null==b?this.styleTween(a,nh(a,d)).on("end.style."+a,sh(a)):"function"===typeof b?this.styleTween(a,Lg(a,d,mh(this,"style."+a,b))).each(ni(this._id,a)):this.styleTween(a,rh(a,d,b),c).on("end.style."+a,null)},styleTween:function(a,b,c){var d="style."+(a+="");if(2>arguments.length)return(d=
this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!==typeof b)throw Error();return this.tween(d,Fk(a,b,null==c?"":c))},text:function(a){return this.tween("text","function"===typeof a?vf(mh(this,"text",a)):Gk(null==a?"":a+""))},remove:function(){return this.on("end.remove",mj(this._id))},tween:function(a,b){var c=this._id;a+="";if(2>arguments.length){c=ra(this.node(),c).tween;for(var d=0,e=c.length,f;d<e;++d)if((f=c[d]).name===a)return f.value;return null}return this.each((null==
b?Uf:Gg)(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"===typeof a?oh:uf)(b,a)):ra(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"===typeof a?ph:lj)(b,a)):ra(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(qj(b,a)):ra(this.node(),b).ease},end:function(){var a,b,c=this,d=c._id,e=c.size();return new Promise(function(f,g){var m={value:g},h={value:function(){0===
--e&&f()}};c.each(function(){var c=qd(this,d),e=c.on;e!==a&&(b=(a=e).copy(),b._.cancel.push(m),b._.interrupt.push(m),b._.end.push(h));c.on=b})})}};var dt=function xo(a){function b(b){return Math.pow(b,a)}a=+a;b.exponent=xo;return b}(3),et=function ls(a){function b(b){return 1-Math.pow(1-b,a)}a=+a;b.exponent=ls;return b}(3),Wq=function ms(a){function b(b){return(1>=(b*=2)?Math.pow(b,a):2-Math.pow(2-b,a))/2}a=+a;b.exponent=ms;return b}(3),qq=Math.PI,Xq=qq/2,Co=4/11,Hs=6/11,Gs=8/11,Js=9/11,Is=10/11,
Ks=21/22,Am=1/Co/Co,ft=function ns(a){function b(b){return b*b*((a+1)*b-a)}a=+a;b.overshoot=ns;return b}(1.70158),gt=function os(a){function b(b){return--b*b*((a+1)*b+a)+1}a=+a;b.overshoot=os;return b}(1.70158),Yq=function ps(a){function b(b){return(1>(b*=2)?b*b*((a+1)*b-a):(b-=2)*b*((a+1)*b+a)+2)/2}a=+a;b.overshoot=ps;return b}(1.70158),Ck=2*Math.PI,ht=function nq(a,b){function c(c){return a*Math.pow(2,10*--c)*Math.sin((d-c)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=Ck);c.amplitude=function(a){return nq(a,
b*Ck)};c.period=function(b){return nq(a,b)};return c}(1,.3),Zq=function oq(a,b){function c(c){return 1-a*Math.pow(2,-10*(c=+c))*Math.sin((c+d)/b)}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=Ck);c.amplitude=function(a){return oq(a,b*Ck)};c.period=function(b){return oq(a,b)};return c}(1,.3),it=function rm(a,b){function c(c){return(0>(c=2*c-1)?a*Math.pow(2,10*c)*Math.sin((d-c)/b):2-a*Math.pow(2,-10*c)*Math.sin((d+c)/b))/2}var d=Math.asin(1/(a=Math.max(1,a)))*(b/=Ck);c.amplitude=function(a){return rm(a,
b*Ck)};c.period=function(b){return rm(a,b)};return c}(1,.3),Wp={time:null,delay:0,duration:250,ease:wf};Xa.prototype.interrupt=function(a){return this.each(function(){rc(this,a)})};Xa.prototype.transition=function(a){var b;if(a instanceof Mc){var c=a._id;a=a._name}else c=++Vq,(b=Wp).time=$b(),a=null==a?null:a+"";for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g=d[f],m=g.length,h,q=0;q<m;++q)if(h=g[q]){var k=h,l=a,C=c,n=q,J=g,L;if(!(L=b))a:{L=void 0;for(var p=c;!(L=h.__transition)||!(L=L[p]);)if(!(h=
h.parentNode)){L=(Wp.time=$b(),Wp);break a}}fc(k,l,C,n,J,L)}return new Mc(d,this._parents,a,c)};var jt=[null],rq={name:"drag"},Do={name:"space"},Gj={name:"handle"},Hj={name:"center"},Cm={name:"x",handles:["e","w"].map(ud),input:function(a,b){return a&&[[a[0],b[0][1]],[a[1],b[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},Bm={name:"y",handles:["n","s"].map(ud),input:function(a,b){return a&&[[b[0][0],a[0]],[b[1][0],a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},kt={name:"xy",handles:"n e s w nw ne se sw".split(" ").map(ud),
input:function(a){return a},output:function(a){return a}},$g={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sq={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},tq={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ms={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ns={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},$q=Math.cos,ar=Math.sin,br=Math.PI,
no=br/2,cr=2*br,dr=Math.max,lt=Array.prototype.slice,Xp=Math.PI,Yp=2*Xp,mt=Yp-1E-6;Zf.prototype=Sd.prototype={constructor:Zf,moveTo:function(a,b){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,b){this._+="L"+(this._x1=+a)+","+(this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._+="Q"+ +a+","+ +b+","+(this._x1=+c)+","+(this._y1=+d)},bezierCurveTo:function(a,b,c,d,e,f){this._+=
"C"+ +a+","+ +b+","+ +c+","+ +d+","+(this._x1=+e)+","+(this._y1=+f)},arcTo:function(a,b,c,d,e){a=+a;b=+b;c=+c;d=+d;e=+e;var f=this._x1,g=this._y1,m=c-a,h=d-b,q=f-a,k=g-b,l=q*q+k*k;if(0>e)throw Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=b);else if(1E-6<l)if(1E-6<Math.abs(k*m-h*q)&&e){c-=f;d-=g;var C=m*m+h*h;g=Math.sqrt(C);f=Math.sqrt(l);l=e*Math.tan((Xp-Math.acos((C+l-(c*c+d*d))/(2*g*f)))/2);f=l/f;l/=g;1E-6<Math.abs(f-1)&&(this._+="L"+(a+f*q)+","+(b+f*k));
this._+="A"+e+","+e+",0,0,"+ +(k*c>q*d)+","+(this._x1=a+l*m)+","+(this._y1=b+l*h)}else this._+="L"+(this._x1=a)+","+(this._y1=b)},arc:function(a,b,c,d,e,f){a=+a;b=+b;c=+c;var g=c*Math.cos(d),m=c*Math.sin(d),h=a+g,q=b+m,k=1^f;d=f?d-e:e-d;if(0>c)throw Error("negative radius: "+c);if(null===this._x1)this._+="M"+h+","+q;else if(1E-6<Math.abs(this._x1-h)||1E-6<Math.abs(this._y1-q))this._+="L"+h+","+q;c&&(0>d&&(d=d%Yp+Yp),d>mt?this._+="A"+c+","+c+",0,1,"+k+","+(a-g)+","+(b-m)+"A"+c+","+c+",0,1,"+k+","+
(this._x1=h)+","+(this._y1=q):1E-6<d&&(this._+="A"+c+","+c+",0,"+ +(d>=Xp)+","+k+","+(this._x1=a+c*Math.cos(e))+","+(this._y1=b+c*Math.sin(e))))},rect:function(a,b,c,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)+"h"+ +c+"v"+ +d+"h"+-c+"Z"},toString:function(){return this._}};Ne.prototype=hb.prototype={constructor:Ne,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){this["$"+a]=b;return this},remove:function(a){a="$"+a;return a in this&&delete this[a]},
clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push(this[b]);return a},entries:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0,b;for(b in this)"$"===b[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var b in this)"$"===
b[0]&&a(this[b],b.slice(1),this)}};var ej=hb.prototype;sd.prototype=of.prototype={constructor:sd,has:ej.has,add:function(a){a+="";this["$"+a]=a;return this},remove:ej.remove,clear:ej.clear,values:ej.keys,size:ej.size,empty:ej.empty,each:ej.each};var uq=Array.prototype.slice,ah=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],
[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],vq={},Eo={},oo=ha(","),er=oo.parse,nt=oo.parseRows,ot=oo.format,pt=oo.formatRows,po=ha("\t"),fr=po.parse,qt=po.parseRows,rt=po.format,Zp=po.formatRows,st=Oh(er),tt=Oh(fr),im=si("application/xml"),gr=si("text/html"),ut=si("image/svg+xml"),Md=be.prototype=yc.prototype;Md.copy=function(){var a=new yc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),b=this._root,c,d;if(!b)return a;if(!b.length)return a._root=we(b),a;
for(c=[{source:b,target:a._root=Array(4)}];b=c.pop();)for(var e=0;4>e;++e)if(d=b.source[e])d.length?c.push({source:d,target:b.target[e]=Array(4)}):b.target[e]=we(d);return a};Md.add=function(a){var b=+this._x.call(null,a),c=+this._y.call(null,a);return Hh(this.cover(b,c),b,c,a)};Md.addAll=function(a){var b,c,d=a.length,e,f,g=Array(d),m=Array(d),h=Infinity,q=Infinity,k=-Infinity,l=-Infinity;for(c=0;c<d;++c)isNaN(e=+this._x.call(null,b=a[c]))||isNaN(f=+this._y.call(null,b))||(g[c]=e,m[c]=f,e<h&&(h=
e),e>k&&(k=e),f<q&&(q=f),f>l&&(l=f));k<h&&(h=this._x0,k=this._x1);l<q&&(q=this._y0,l=this._y1);this.cover(h,q).cover(k,l);for(c=0;c<d;++c)Hh(this,g[c],m[c],a[c]);return this};Md.cover=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,f=(d=Math.floor(b))+1;else if(c>a||a>e||d>b||b>f){var g=e-c,m=this._root,h;switch(h=(b<(d+f)/2)<<1|a<(c+e)/2){case 0:do{var q=Array(4);q[h]=m;m=q}while(g*=2,e=c+g,f=d+g,a>e||b>f);break;
case 1:do q=Array(4),q[h]=m,m=q;while(g*=2,c=e-g,f=d+g,c>a||b>f);break;case 2:do q=Array(4),q[h]=m,m=q;while(g*=2,e=c+g,d=f-g,a>e||d>b);break;case 3:do q=Array(4),q[h]=m,m=q;while(g*=2,c=e-g,d=f-g,c>a||d>b)}this._root&&this._root.length&&(this._root=m)}else return this;this._x0=c;this._y0=d;this._x1=e;this._y1=f;return this};Md.data=function(){var a=[];this.visit(function(b){if(!b.length){do a.push(b.data);while(b=b.next)}});return a};Md.extent=function(a){return arguments.length?this.cover(+a[0][0],
+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Md.find=function(a,b,c){var d=this._x0,e=this._y0,f,g,m,h,q=this._x1,k=this._y1,l=[],C=this._root,n;C&&l.push(new Ab(C,d,e,q,k));null==c?c=Infinity:(d=a-c,e=b-c,q=a+c,k=b+c,c*=c);for(;n=l.pop();)if(!(!(C=n.node)||(f=n.x0)>q||(g=n.y0)>k||(m=n.x1)<d||(h=n.y1)<e))if(C.length){n=(f+m)/2;var J=(g+h)/2;l.push(new Ab(C[3],n,J,m,h),new Ab(C[2],f,J,n,h),new Ab(C[1],n,g,m,J),new Ab(C[0],f,g,n,J));if(C=(b>=J)<<
1|a>=n)n=l[l.length-1],l[l.length-1]=l[l.length-1-C],l[l.length-1-C]=n}else if(n=a-+this._x.call(null,C.data),J=b-+this._y.call(null,C.data),n=n*n+J*J,n<c){var L=Math.sqrt(c=n);d=a-L;e=b-L;q=a+L;k=b+L;L=C.data}return L};Md.remove=function(a){if(isNaN(h=+this._x.call(null,a))||isNaN(q=+this._y.call(null,a)))return this;var b,c=this._root,d,e=this._x0,f=this._y0,g=this._x1,m=this._y1,h,q,k,l,C,n;if(!c)return this;if(c.length)for(;;){(C=h>=(k=(e+g)/2))?e=k:g=k;(n=q>=(l=(f+m)/2))?f=l:m=l;if(!(b=c,c=c[C|=
n<<1]))return this;if(!c.length)break;if(b[C+1&3]||b[C+2&3]||b[C+3&3]){var J=b;var L=C}}for(;c.data!==a;)if(!(d=c,c=c.next))return this;(a=c.next)&&delete c.next;if(d)return a?d.next=a:delete d.next,this;if(!b)return this._root=a,this;a?b[C]=a:delete b[C];(c=b[0]||b[1]||b[2]||b[3])&&c===(b[3]||b[2]||b[1]||b[0])&&!c.length&&(J?J[L]=c:this._root=c);return this};Md.removeAll=function(a){for(var b=0,c=a.length;b<c;++b)this.remove(a[b]);return this};Md.root=function(){return this._root};Md.size=function(){var a=
0;this.visit(function(b){if(!b.length){do++a;while(b=b.next)}});return a};Md.visit=function(a){var b=[],c,d=this._root,e,f,g,m;for(d&&b.push(new Ab(d,this._x0,this._y0,this._x1,this._y1));c=b.pop();)if(!a(d=c.node,f=c.x0,g=c.y0,m=c.x1,c=c.y1)&&d.length){var h=(f+m)/2,q=(g+c)/2;(e=d[3])&&b.push(new Ab(e,h,q,m,c));(e=d[2])&&b.push(new Ab(e,f,q,h,c));(e=d[1])&&b.push(new Ab(e,h,g,m,q));(e=d[0])&&b.push(new Ab(e,f,g,h,q))}return this};Md.visitAfter=function(a){var b=[],c=[],d;for(this._root&&b.push(new Ab(this._root,
this._x0,this._y0,this._x1,this._y1));d=b.pop();){var e=d.node;if(e.length){var f,g=d.x0,m=d.y0,h=d.x1,q=d.y1,k=(g+h)/2,l=(m+q)/2;(f=e[0])&&b.push(new Ab(f,g,m,k,l));(f=e[1])&&b.push(new Ab(f,k,m,h,l));(f=e[2])&&b.push(new Ab(f,g,l,k,q));(f=e[3])&&b.push(new Ab(f,k,l,h,q))}c.push(d)}for(;d=c.pop();)a(d.node,d.x0,d.y0,d.x1,d.y1);return this};Md.x=function(a){return arguments.length?(this._x=a,this):this._x};Md.y=function(a){return arguments.length?(this._y=a,this):this._y};var vt=Math.PI*(3-Math.sqrt(5)),
Os=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Zg.prototype=Hc.prototype;Hc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var xq,yq={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},
e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return db(100*a,b)},r:db,s:function(a,b){var c=Ha(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(xq=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+Ha(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},
x:function(a){return Math.round(a).toString(16)}},wq="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),Dm;Zd({decimal:".",thousands:",",grouping:[3],currency:["$",""]});dc.prototype={constructor:dc,reset:function(){this.s=this.t=0},add:function(a){lg(qo,a,this.t);lg(this,qo.s,this.s);this.s?this.t+=qo.t:this.s=qo.t},valueOf:function(){return this.s}};var qo=new dc,ab=Math.PI,Cb=ab/2,Em=ab/4,ee=2*ab,ub=180/ab,wa=ab/180,bb=Math.abs,Nj=Math.atan,Gd=Math.atan2,oa=Math.cos,Pm=Math.ceil,hr=Math.exp,Tm=
Math.log,Zo=Math.pow,ka=Math.sin,fl=Math.sign||function(a){return 0<a?1:0>a?-1:0},oc=Math.sqrt,Lj=Math.tan,Aq={Feature:function(a,b){va(a.geometry,b)},FeatureCollection:function(a,b){a=a.features;for(var c=-1,d=a.length;++c<d;)va(a[c].geometry,b)}},zq={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Gc(a.coordinates,b,0)},MultiLineString:function(a,
b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)Gc(a[c],b,0)},Polygon:function(a,b){Gh(a.coordinates,b)},MultiPolygon:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)Gh(a[c],b)},GeometryCollection:function(a,b){a=a.geometries;for(var c=-1,d=a.length;++c<d;)va(a[c],b)}},Fm=new dc,ro=new dc,Bq,Cq,Fo,Go,Ho,og={point:P,lineStart:P,lineEnd:P,polygonStart:function(){Fm.reset();og.lineStart=mc;og.lineEnd=uj},polygonEnd:function(){var a=+Fm;ro.add(0>a?ee+a:a);this.lineStart=this.lineEnd=this.point=
P},sphere:function(){ro.add(ee)}},Ub,Ae,ec,cf,Ei,Dq,Eq,Ij,Yk=new dc,Qh,bh,ch={point:ri,lineStart:Qg,lineEnd:Bi,polygonStart:function(){ch.point=ng;ch.lineStart=Jf;ch.lineEnd=yh;Yk.reset();og.polygonStart()},polygonEnd:function(){og.polygonEnd();ch.point=ri;ch.lineStart=Qg;ch.lineEnd=Bi;0>Fm?(Ub=-(ec=180),Ae=-(cf=90)):1E-6<Yk?cf=90:-1E-6>Yk&&(Ae=-90);bh[0]=Ub;bh[1]=ec}},Zk,Jm,Gm,Hm,Im,Km,Lm,Mm,Io,Jo,Ko,Fq,Gq,Hd,Id,Jd,Nf={sphere:P,point:Gf,lineStart:hg,lineEnd:Wg,polygonStart:function(){Nf.lineStart=
Nh;Nf.lineEnd=Ze},polygonEnd:function(){Nf.lineStart=hg;Nf.lineEnd=Wg}};If.invert=If;var Lo=new dc,Xo=Rc(function(){return!0},function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(f,g){var m=0<f?ab:-ab,h=bb(f-b);if(1E-6>bb(h-ab))a.point(b,c=0<(c+g)/2?Cb:-Cb),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(m,c),a.point(f,c),e=0;else if(d!==m&&h>=ab){1E-6>bb(b-d)&&(b-=1E-6*d);1E-6>bb(f-m)&&(f-=1E-6*m);h=b;var q=c,k=f,l,C,n=ka(h-k);c=1E-6<bb(n)?Nj((ka(q)*(C=
oa(g))*ka(k)-ka(g)*(l=oa(q))*ka(h))/(l*C*n)):(q+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(m,c);e=0}a.point(b=f,c=g);d=m},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=Cb,d.point(-ab,c),d.point(0,c),d.point(ab,c),d.point(ab,0),d.point(ab,-c),d.point(0,-c),d.point(-ab,-c),d.point(-ab,0),d.point(-ab,c)):1E-6<bb(a[0]-b[0])?(a=a[0]<b[0]?ab:-ab,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-ab,-Cb]),No=new dc,Mo,Nm,
Om,Jj={sphere:P,point:P,lineStart:function(){Jj.point=yi;Jj.lineEnd=Cj},lineEnd:P,polygonStart:P,polygonEnd:P},Oo=[null,null],Ps={type:"LineString",coordinates:Oo},ir={Feature:function(a,b){return ue(a.geometry,b)},FeatureCollection:function(a,b){a=a.features;for(var c=-1,d=a.length;++c<d;)if(ue(a[c].geometry,b))return!0;return!1}},Hq={Sphere:function(){return!0},Point:function(a,b){return 0===xe(a.coordinates,b)},MultiPoint:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)if(0===xe(a[c],
b))return!0;return!1},LineString:function(a,b){return Ef(a.coordinates,b)},MultiLineString:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)if(Ef(a[c],b))return!0;return!1},Polygon:function(a,b){return xh(a.coordinates,b)},MultiPolygon:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)if(xh(a[c],b))return!0;return!1},GeometryCollection:function(a,b){a=a.geometries;for(var c=-1,d=a.length;++c<d;)if(ue(a[c],b))return!0;return!1}},$p=new dc,Ro=new dc,Iq,Jq,Po,Qo,dh={point:P,lineStart:P,
lineEnd:P,polygonStart:function(){dh.lineStart=ui;dh.lineEnd=xj},polygonEnd:function(){dh.lineStart=dh.lineEnd=dh.point=P;$p.add(bb(Ro));Ro.reset()},result:function(){var a=$p/2;$p.reset();return a}},Dk=Infinity,so=Dk,jm=-Dk,to=jm,Sm={point:function(a,b){a<Dk&&(Dk=a);a>jm&&(jm=a);b<so&&(so=b);b>to&&(to=b)},lineStart:P,lineEnd:P,polygonStart:P,polygonEnd:P,result:function(){var a=[[Dk,so],[jm,to]];jm=to=-(so=Dk=Infinity);return a}},So=0,To=0,$k=0,Qm=0,Rm=0,Kj=0,Uo=0,Vo=0,al=0,Kq,Lq,pg,qg,df={point:V,
lineStart:kc,lineEnd:wh,polygonStart:function(){df.lineStart=mm;df.lineEnd=nm},polygonEnd:function(){df.point=V;df.lineStart=kc;df.lineEnd=wh},result:function(){var a=al?[Uo/al,Vo/al]:Kj?[Qm/Kj,Rm/Kj]:$k?[So/$k,To/$k]:[NaN,NaN];So=To=$k=Qm=Rm=Kj=Uo=Vo=al=0;return a}};Ch.prototype={_radius:4.5,pointRadius:function(a){return this._radius=a,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();
this._point=NaN},point:function(a,b){switch(this._point){case 0:this._context.moveTo(a,b);this._point=1;break;case 1:this._context.lineTo(a,b);break;default:this._context.moveTo(a+this._radius,b),this._context.arc(a,b,this._radius,0,ee)}},result:P};var Wo=new dc,aq,Mq,Nq,cl,dl,bl={point:P,lineStart:function(){bl.point=rj},lineEnd:function(){aq&&pm(Mq,Nq);bl.point=P},polygonStart:function(){aq=!0},polygonEnd:function(){aq=null},result:function(){var a=+Wo;Wo.reset();return a}};ac.prototype={_radius:4.5,
_circle:Bh(4.5),pointRadius:function(a){(a=+a)!==this._radius&&(this._radius=a,this._circle=null);return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(a,b){switch(this._point){case 0:this._string.push("M",a,",",b);this._point=1;break;case 1:this._string.push("L",a,",",b);break;default:null==this._circle&&(this._circle=Bh(this._radius)),this._string.push("M",
a,",",b,this._circle)}},result:function(){if(this._string.length){var a=this._string.join("");this._string=[];return a}return null}};Dh.prototype={constructor:Dh,point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qs=oa(30*wa),Rs=Ed({point:function(a,b){this.stream.point(a*wa,
b*wa)}}),bq=Gi(function(a){return oc(2/(1+a))});bq.invert=Rh(function(a){return 2*nc(a/2)});var cq=Gi(function(a){return(a=Jh(a))&&a/ka(a)});cq.invert=Rh(function(a){return a});Hi.invert=function(a,b){return[a,2*Nj(hr(b))-Cb]};Of.invert=Of;var Vm=oc(3)/2;hl.invert=function(a,b){for(var c=b,d=c*c,e=d*d*d,f=0,g;12>f&&!(g=c*(1.340264+-.081106*d+e*(8.93E-4+.003796*d))-b,d=1.340264+3*-.081106*d+e*(7*8.93E-4+.034164*d),c-=g/=d,d=c*c,e=d*d*d,1E-12>bb(g));++f);return[Vm*a*(1.340264+3*-.081106*d+e*(7*8.93E-4+
.034164*d))/oa(c),nc(ka(c)/Vm)]};Ii.invert=Rh(Nj);il.invert=function(a,b){var c=b,d=25;do{var e=c*c;var f=e*e;c-=f=(c*(1.007226+e*(.015085+f*(-.044475+.028874*e-.005916*f)))-b)/(1.007226+e*(.045255+f*(-.311325+.259866*e-.005916*11*f)))}while(1E-6<bb(f)&&0<--d);return[a/(.8707+(e=c*c)*(-.131979+e*(-.013791+e*e*e*(.003971-.001529*e)))),c]};Oj.invert=Rh(nc);Ki.invert=Rh(function(a){return 2*Nj(a)});jl.invert=function(a,b){return[-b,2*Nj(hr(a))-Cb]};Db.prototype=kl.prototype={constructor:Db,count:function(){return this.eachAfter(Ym)},
each:function(a){var b,c=[this],d;do{var e=c.reverse();for(c=[];b=e.pop();)if(a(b),b=b.children){var f=0;for(d=b.length;f<d;++f)c.push(b[f])}}while(c.length);return this},eachAfter:function(a){for(var b,c=[this],d=[],e,f;b=c.pop();)if(d.push(b),b=b.children)for(e=0,f=b.length;e<f;++e)c.push(b[e]);for(;b=d.pop();)a(b);return this},eachBefore:function(a){for(var b,c=[this],d;b=c.pop();)if(a(b),b=b.children)for(d=b.length-1;0<=d;--d)c.push(b[d]);return this},sum:function(a){return this.eachAfter(function(b){for(var c=
+a(b.data)||0,d=b.children,e=d&&d.length;0<=--e;)c+=d[e].value;b.value=c})},sort:function(a){return this.eachBefore(function(b){b.children&&b.children.sort(a)})},path:function(a){var b=this;var c=b;var d=a;if(c!==d){var e=c.ancestors(),f=d.ancestors(),g=null;c=e.pop();for(d=f.pop();c===d;)g=c,c=e.pop(),d=f.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d},ancestors:function(){for(var a=this,b=[a];a=a.parent;)b.push(a);return b},descendants:function(){var a=
[];this.each(function(b){a.push(b)});return a},leaves:function(){var a=[];this.eachBefore(function(b){b.children||a.push(b)});return a},links:function(){var a=this,b=[];a.each(function(c){c!==a&&b.push({source:c.parent,target:c})});return b},copy:function(){return kl(this).eachBefore(dp)}};var Ss=Array.prototype.slice,wt={depth:-1},jr={};Uh.prototype=Object.create(Db.prototype);var kr=(1+Math.sqrt(5))/2,lr=function rm(a){function b(b,c,d,e,f){pl(a,b,c,d,e,f)}b.ratio=function(a){return rm(1<(a=+a)?
a:1)};return b}(kr),xt=function qs(a){function b(b,c,d,e,f){if((g=b._squarify)&&g.ratio===a)for(var g,m,h,q=-1,k,l=g.length,C=b.value;++q<l;){b=g[q];m=b.children;h=b.value=0;for(k=m.length;h<k;++h)b.value+=m[h].value;b.dice?Ce(b,c,d,e,d+=(f-d)*b.value/C):Vh(b,c,d,c+=(e-c)*b.value/C,f);C-=b.value}else b._squarify=g=pl(a,b,c,d,e,f),g.ratio=a}b.ratio=function(a){return qs(1<(a=+a)?a:1)};return b}(kr),yt=function rs(a){function b(b,c){b=null==b?0:+b;c=null==c?1:+c;1===arguments.length?(c=b,b=0):c-=b;
return function(){return a()*c+b}}b.source=rs;return b}(eh),mr=function ss(a){function b(b,c){var d,e;b=null==b?0:+b;c=null==c?1:+c;return function(){if(null!=d){var f=d;d=null}else{do d=2*a()-1,f=2*a()-1,e=d*d+f*f;while(!e||1<e)}return b+c*f*Math.sqrt(-2*Math.log(e)/e)}}b.source=ss;return b}(eh),zt=function ts(a){function b(){var b=mr.source(a).apply(this,arguments);return function(){return Math.exp(b())}}b.source=ts;return b}(eh),nr=function us(a){function b(b){return function(){for(var c=0,d=0;d<
b;++d)c+=a();return c}}b.source=us;return b}(eh),At=function vs(a){function b(b){var c=nr.source(a)(b);return function(){return c()/b}}b.source=vs;return b}(eh),Bt=function ws(a){function b(b){return function(){return-Math.log(1-a())/b}}b.source=ws;return b}(eh),or=Array.prototype,jn=or.map,Mi=or.slice,ep={name:"implicit"},Oq=[0,1],jp=new Date,kp=new Date,fj=Hb(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});fj.every=function(a){a=Math.floor(a);return isFinite(a)&&0<a?1<a?Hb(function(b){b.setTime(Math.floor(b/
a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a}):fj:null};var pr=fj.range,km=Hb(function(a){a.setTime(a-a.getMilliseconds())},function(a,b){a.setTime(+a+1E3*b)},function(a,b){return(b-a)/1E3},function(a){return a.getUTCSeconds()}),qr=km.range,dq=Hb(function(a){a.setTime(a-a.getMilliseconds()-1E3*a.getSeconds())},function(a,b){a.setTime(+a+6E4*b)},function(a,b){return(b-a)/6E4},function(a){return a.getMinutes()}),Ct=dq.range,eq=Hb(function(a){a.setTime(a-a.getMilliseconds()-1E3*
a.getSeconds()-6E4*a.getMinutes())},function(a,b){a.setTime(+a+36E5*b)},function(a,b){return(b-a)/36E5},function(a){return a.getHours()}),Dt=eq.range,yl=Hb(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-6E4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/864E5},function(a){return a.getDate()-1}),Et=yl.range,Hl=fh(0),xl=fh(1),rr=fh(2),sr=fh(3),Il=fh(4),tr=fh(5),ur=fh(6),vr=Hl.range,Ft=xl.range,Gt=rr.range,Ht=sr.range,It=Il.range,Jt=tr.range,Kt=ur.range,
fq=Hb(function(a){a.setDate(1);a.setHours(0,0,0,0)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+12*(b.getFullYear()-a.getFullYear())},function(a){return a.getMonth()}),Lt=fq.range,hh=Hb(function(a){a.setMonth(0,1);a.setHours(0,0,0,0)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});hh.every=function(a){return isFinite(a=Math.floor(a))&&0<a?Hb(function(b){b.setFullYear(Math.floor(b.getFullYear()/
a)*a);b.setMonth(0,1);b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*a)}):null};var Mt=hh.range,gq=Hb(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+6E4*b)},function(a,b){return(b-a)/6E4},function(a){return a.getUTCMinutes()}),Nt=gq.range,hq=Hb(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+36E5*b)},function(a,b){return(b-a)/36E5},function(a){return a.getUTCHours()}),Ot=hq.range,wl=Hb(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+
b)},function(a,b){return(b-a)/864E5},function(a){return a.getUTCDate()-1}),Pt=wl.range,Jl=Ld(0),vl=Ld(1),wr=Ld(2),xr=Ld(3),Kl=Ld(4),yr=Ld(5),zr=Ld(6),Ar=Jl.range,Qt=vl.range,Rt=wr.range,St=xr.range,Tt=Kl.range,Ut=yr.range,Vt=zr.range,iq=Hb(function(a){a.setUTCDate(1);a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+12*(b.getUTCFullYear()-a.getUTCFullYear())},function(a){return a.getUTCMonth()}),Wt=iq.range,ih=Hb(function(a){a.setUTCMonth(0,
1);a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});ih.every=function(a){return isFinite(a=Math.floor(a))&&0<a?Hb(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a);b.setUTCMonth(0,1);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*a)}):null};var Xt=ih.range,Pq={"-":"",_:" ",0:"0"},Sc=/^\s*\d+/,Us=/^%/,Ts=/[\\^$*+?|[\]().{}]/g,mk;
Fn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Yt=Date.prototype.toISOString?Ll:e.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Zt=+new Date("2000-01-01T00:00:00.000Z")?
Gn:e.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Vs=6048E5,Qq=2592E6,Ap=31536E6,$t=Ga("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),au=Ga("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),bu=Ga("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cu=Ga("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),du=Ga("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),eu=Ga("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),fu=Ga("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),
gu=Ga("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hu=Ga("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Br=Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ga),
iu=lb(Br),Cr=Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ga),ju=lb(Cr),Dr=Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26",
"d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ga),ku=lb(Dr),Er=Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806",
"542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ga),lu=lb(Er),Fr=Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac",
"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ga),mu=lb(Fr),Gr=Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a",
"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ga),nu=lb(Gr),Hr=Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ga),
ou=lb(Hr),Ir=Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ga),pu=lb(Ir),Jr=Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba",
"d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ga),qu=lb(Jr),Kr=Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c",
"edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ga),ru=lb(Kr),Lr=Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ga),su=lb(Lr),Mr=Array(3).concat("e0f3dba8ddb543a2ca",
"f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ga),tu=lb(Mr),Nr=Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000",
"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ga),uu=lb(Nr),Or=Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ga),vu=lb(Or),Pr=Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d",
"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ga),wu=lb(Pr),Qr=Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ga),xu=lb(Qr),Rr=Array(3).concat("fde0ddfa9fb5c51b8a",
"feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ga),yu=lb(Rr),Sr=Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84",
"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ga),zu=lb(Sr),Tr=Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ga),Au=lb(Tr),Ur=Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404",
"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ga),Bu=lb(Ur),Vr=Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ga),Cu=lb(Vr),Wr=Array(3).concat("deebf79ecae13182bd",
"eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ga),Du=lb(Wr),Xr=Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32",
"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ga),Eu=lb(Xr),Yr=Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ga),Fu=lb(Yr),Zr=Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f",
"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ga),Gu=lb(Zr),$r=Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ga),Hu=lb($r),as=Array(3).concat("fee6cefdae6be6550d",
"feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ga),Iu=lb(as),Ju=mo(zb(300,.5,0),zb(-240,.5,1)),Ku=mo(zb(-100,.75,.35),zb(80,1.5,.8)),Lu=mo(zb(260,.75,.35),zb(80,1.5,.8)),uo=zb(),vo=Qb(),Mu=Math.PI/3,Nu=2*Math.PI/3,Ou=ci(Ga("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),
Pu=ci(Ga("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
Qu=ci(Ga("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
Ru=ci(Ga("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),
bs=Math.abs,od=Math.atan2,gj=Math.cos,Ws=Math.max,jq=Math.min,Fg=Math.sin,ok=Math.sqrt,ji=Math.PI,Mn=ji/2,ki=2*ji;Wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=
2;default:this._context.lineTo(a,b)}}};var Rq=xg(Xi);Pn.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,b){this._curve.point(b*Math.sin(a),b*-Math.cos(a))}};var Hp=Array.prototype.slice,kq={draw:function(a,b){b=Math.sqrt(b/ji);a.moveTo(b,0);a.arc(0,0,b,0,ki)}},cs={draw:function(a,b){b=Math.sqrt(b/5)/2;a.moveTo(-3*b,-b);a.lineTo(-b,-b);a.lineTo(-b,
-3*b);a.lineTo(b,-3*b);a.lineTo(b,-b);a.lineTo(3*b,-b);a.lineTo(3*b,b);a.lineTo(b,b);a.lineTo(b,3*b);a.lineTo(-b,3*b);a.lineTo(-b,b);a.lineTo(-3*b,b);a.closePath()}},ds=Math.sqrt(1/3),Su=2*ds,es={draw:function(a,b){b=Math.sqrt(b/Su);var c=b*ds;a.moveTo(0,-b);a.lineTo(c,0);a.lineTo(0,b);a.lineTo(-c,0);a.closePath()}},fs=Math.sin(ji/10)/Math.sin(7*ji/10),Tu=Math.sin(ki/10)*fs,Uu=-Math.cos(ki/10)*fs,gs={draw:function(a,b){b=Math.sqrt(.8908130915292852*b);var c=Tu*b,d=Uu*b;a.moveTo(0,-b);a.lineTo(c,d);
for(var e=1;5>e;++e){var f=ki*e/5,g=Math.cos(f);f=Math.sin(f);a.lineTo(f*b,-g*b);a.lineTo(g*c-f*d,f*c+g*d)}a.closePath()}},hs={draw:function(a,b){b=Math.sqrt(b);var c=-b/2;a.rect(c,c,b,b)}},lq=Math.sqrt(3),is={draw:function(a,b){b=-Math.sqrt(b/(3*lq));a.moveTo(0,2*b);a.lineTo(-lq*b,-b);a.lineTo(lq*b,-b);a.closePath()}},lf=Math.sqrt(3)/2,mq=1/Math.sqrt(12),Vu=3*(mq/2+1),js={draw:function(a,b){var c=Math.sqrt(b/Vu);b=c/2;var d=c*mq;c=c*mq+c;var e=-b;a.moveTo(b,d);a.lineTo(b,c);a.lineTo(e,c);a.lineTo(-.5*
b-lf*d,lf*b+-.5*d);a.lineTo(-.5*b-lf*c,lf*b+-.5*c);a.lineTo(-.5*e-lf*c,lf*e+-.5*c);a.lineTo(-.5*b+lf*d,-.5*d-lf*b);a.lineTo(-.5*b+lf*c,-.5*c-lf*b);a.lineTo(-.5*e+lf*c,-.5*c-lf*e);a.closePath()}},Wu=[kq,cs,es,hs,gs,is,js];fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:hf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hf(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b}};Rn.prototype={areaStart:yg,areaEnd:yg,lineStart:function(){this._x0=this._x1=
this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,
b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._x2=a;this._y2=b;break;case 1:this._point=2;this._x3=a;this._y3=b;break;case 2:this._point=3;this._x4=a;this._y4=b;this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:hf(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b}};jh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||
0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:hf(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b}};kh.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},
lineEnd:function(){var a=this._x,b=this._y,c=a.length-1;if(0<c)for(var d=a[0],e=b[0],f=a[c]-d,g=b[c]-e,m=-1,h;++m<=c;)h=m/c,this._basis.point(this._beta*a[m]+(1-this._beta)*(d+h*f),this._beta*b[m]+(1-this._beta)*(e+h*g));this._x=this._y=null;this._basis.lineEnd()},point:function(a,b){this._x.push(+a);this._y.push(+b)}};var Xu=function xs(a){function b(b){return 1===a?new fi(b):new kh(b,a)}b.beta=function(a){return xs(+a)};return b}(.85);qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Yi(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;this._x1=a;this._y1=
b;break;case 2:this._point=3;default:Yi(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Yu=function ys(a){function b(b){return new qk(b,a)}b.tension=function(a){return ys(+a)};return b}(0);Zi.prototype={areaStart:yg,areaEnd:yg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._x3=a;this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3;this._x5=a;this._y5=b;break;default:Yi(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=
a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Zu=function zs(a){function b(b){return new Zi(b,a)}b.tension=function(a){return zs(+a)};return b}(0);Xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=
1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yi(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var $u=function As(a){function b(b){return new Xl(b,a)}b.tension=function(a){return As(+a)};return b}(0);Yl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:rk(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var av=function Bs(a){function b(b){return a?new Yl(b,a):new qk(b,0)}b.alpha=function(a){return Bs(+a)};return b}(.5);gi.prototype={areaStart:yg,areaEnd:yg,lineStart:function(){this._x0=
this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,
b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=a;this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3;this._x5=a;this._y5=b;break;default:rk(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=
this._y2;this._y2=b}};var bv=function Cs(a){function b(b){return a?new gi(b,a):new Zi(b,0)}b.alpha=function(a){return Cs(+a)};return b}(.5);Sn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},
point:function(a,b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rk(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=
this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var cv=function Ds(a){function b(b){return a?new Sn(b,a):new Xl(b,0)}b.alpha=function(a){return Ds(+a)};return b}(.5);sk.prototype={areaStart:yg,areaEnd:yg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a=+a;b=+b;this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}};tk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zl(this,this._t0,Un(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){var c=NaN;a=+a;b=+b;if(a!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;
case 1:this._point=2;break;case 2:this._point=3;Zl(this,Un(this,c=Tn(this,a,b)),c);break;default:Zl(this,this._t0,c=Tn(this,a,b))}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b;this._t0=c}}};(Vn.prototype=Object.create(tk.prototype)).point=function(a,b){tk.prototype.point.call(this,b,a)};Wn.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,
a,d,c,f,e)}};uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=$l(a),e=$l(b),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath();this._line=
1-this._line;this._x=this._y=null},point:function(a,b){this._x.push(+a);this._y.push(+b)}};$i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y);this._context.lineTo(c,b)}}this._x=a;this._y=b}};Ag.prototype={constructor:Ag,insert:function(a,b){var c;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;var d=a}else this._?(a=ao(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=
b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)b=d.U,d===b.L?(c=b.R)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.R&&(zc(this,d),a=d,d=a.U),d.C=!1,b.C=!0,hi(this,b)):(c=b.L)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.L&&(hi(this,d),a=d,d=a.U),d.C=!1,b.C=!0,zc(this,b)),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R;var e=c?d?ao(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;if(c&&d){var f=e.C;e.C=a.C;e.L=c;c.U=e;e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=
a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)}else f=a.C,a=e;a&&(a.U=b);if(!f)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,zc(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,hi(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;zc(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,hi(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,zc(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;hi(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};
var Sq=[],Np,Tq=[],ob=1E-6,Xs=1E-12,yk,Ge,dm,nd;bj.prototype={constructor:bj,polygons:function(){var a=this.edges;return this.cells.map(function(b){var c=b.halfedges.map(function(c){return bo(b,a[c])});c.data=b.site.data;return c})},triangles:function(){var a=[],b=this.edges;this.cells.forEach(function(c,d){if(g=(e=c.halfedges).length){c=c.site;var e,f=-1,g,m=b[e[g-1]];for(m=m.left===c?m.right:m.left;++f<g;){var h=m;m=b[e[f]];m=m.left===c?m.right:m.left;h&&m&&d<h.index&&d<m.index&&0>(c[0]-m[0])*(h[1]-
c[1])-(c[0]-h[0])*(m[1]-c[1])&&a.push([c.data,h.data,m.data])}}});return a},links:function(){return this.edges.filter(function(a){return a.right}).map(function(a){return{source:a.left.data,target:a.right.data}})},find:function(a,b,c){var d=this,e=d._found||0;var f=d.cells.length;for(var g;!(g=d.cells[e]);)if(++e>=f)return null;f=a-g.site[0];var m=b-g.site[1],h=f*f+m*m;do g=d.cells[f=e],e=null,g.halfedges.forEach(function(c){var f=d.edges[c];c=f.left;if(c!==g.site&&c||(c=f.right)){f=a-c[0];var m=b-
c[1];f=f*f+m*m;f<h&&(h=f,e=c.index)}});while(null!==e);d._found=f;return null==c||h<=c*c?g.site:null}};Sf.prototype={constructor:Sf,scale:function(a){return 1===a?this:new Sf(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new Sf(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/
this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var go=new Sf(1,0,0);fm.prototype=Sf.prototype;e.version="5.8.2";e.bisect=tg;e.bisectRight=tg;e.bisectLeft=Tp;e.ascending=f;e.bisector=
c;e.cross=function(b,c,d){var e=b.length,f=c.length,g=Array(e*f),m,h,q;null==d&&(d=a);for(m=q=0;m<e;++m){var k=b[m];for(h=0;h<f;++h,++q)g[q]=d(k,c[h])}return g};e.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};e.deviation=g;e.extent=k;e.histogram=function(){function a(a){var e,f=a.length,g=Array(f);for(e=0;e<f;++e)g[e]=b(a[e],e,a);e=c(g);var m=e[0],h=e[1],q=d(g,m,h);Array.isArray(q)||(q=u(m,h,q),q=p(Math.ceil(m/q)*q,h,q));for(var k=q.length;q[0]<=m;)q.shift(),--k;for(;q[k-1]>h;)q.pop(),
--k;var l=Array(k+1);for(e=0;e<=k;++e){var C=l[e]=[];C.x0=0<e?q[e-1]:m;C.x1=e<k?q[e]:h}for(e=0;e<f;++e)C=g[e],m<=C&&C<=h&&l[tg(q,C,0,k)].push(a[e]);return l}var b=n,c=k,d=A;a.value=function(c){return arguments.length?(b="function"===typeof c?c:l(c),a):b};a.domain=function(b){return arguments.length?(c="function"===typeof b?b:l([b[0],b[1]]),a):c};a.thresholds=function(b){return arguments.length?(d="function"===typeof b?b:Array.isArray(b)?l(Up.call(b)):l(b),a):d};return a};e.thresholdFreedmanDiaconis=
function(a,b,c){a=Cg.call(a,h).sort(f);return Math.ceil((c-b)/(2*(t(a,.75)-t(a,.25))*Math.pow(a.length,-1/3)))};e.thresholdScott=function(a,b,c){return Math.ceil((c-b)/(3.5*g(a)*Math.pow(a.length,-1/3)))};e.thresholdSturges=A;e.max=z;e.mean=function(a,b){var c=a.length,d=c,e=-1,f,g=0;if(null==b)for(;++e<c;)isNaN(f=h(a[e]))?--d:g+=f;else for(;++e<c;)isNaN(f=h(b(a[e],e,a)))?--d:g+=f;if(d)return g/d};e.median=function(a,b){var c=a.length,d=-1,e,g=[];if(null==b)for(;++d<c;)isNaN(e=h(a[d]))||g.push(e);
else for(;++d<c;)isNaN(e=h(b(a[d],d,a)))||g.push(e);return t(g.sort(f),.5)};e.merge=B;e.min=D;e.pairs=function(b,c){null==c&&(c=a);for(var d=0,e=b.length-1,f=b[0],g=Array(0>e?0:e);d<e;)g[d]=c(f,f=b[++d]);return g};e.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};e.quantile=t;e.range=p;e.scan=function(a,b){if(c=a.length){var c,d=0,e=0,g,m=a[e];for(null==b&&(b=f);++d<c;)if(0>b(g=a[d],m)||0!==b(m,m))m=g,e=d;if(0===b(m,m))return e}};e.shuffle=function(a,b,c){c=(null==
c?a.length:c)-(b=null==b?0:+b);for(var d,e;c;)e=Math.random()*c--|0,d=a[c+b],a[c+b]=a[e+b],a[e+b]=d;return a};e.sum=function(a,b){var c=a.length,d=-1,e,f=0;if(null==b)for(;++d<c;){if(e=+a[d])f+=e}else for(;++d<c;)if(e=+b(a[d],d,a))f+=e;return f};e.ticks=r;e.tickIncrement=w;e.tickStep=u;e.transpose=y;e.variance=d;e.zip=function(){return y(arguments)};e.axisTop=function(a){return I(1,a)};e.axisRight=function(a){return I(2,a)};e.axisBottom=function(a){return I(3,a)};e.axisLeft=function(a){return I(4,
a)};e.brush=function(){return qh(kt)};e.brushX=function(){return qh(Cm)};e.brushY=function(){return qh(Bm)};e.brushSelection=function(a){return(a=a.__brush)?a.dim.output(a.selection):null};e.chord=function(){function a(a){var f=a.length,g=[],m=p(f),h=[],q=[],k=q.groups=Array(f),l=Array(f*f),C,n;var J=0;for(C=-1;++C<f;){var L=0;for(n=-1;++n<f;)L+=a[C][n];g.push(L);h.push(p(f));J+=L}c&&m.sort(function(a,b){return c(g[a],g[b])});d&&h.forEach(function(b,c){b.sort(function(b,e){return d(a[c][b],a[c][e])})});
var G=(J=dr(0,cr-b*f)/J)?b:cr/f;L=0;for(C=-1;++C<f;){var N=L;for(n=-1;++n<f;){var Q=m[C],t=h[Q][n],r=a[Q][t],I=L,u=L+=r*J;l[t*f+Q]={index:Q,subindex:t,startAngle:I,endAngle:u,value:r}}k[Q]={index:Q,startAngle:N,endAngle:L,value:g[Q]};L+=G}for(C=-1;++C<f;)for(n=C-1;++n<f;)m=l[n*f+C],h=l[C*f+n],(m.value||h.value)&&q.push(m.value<h.value?{source:h,target:m}:{source:m,target:h});return e?q.sort(e):q}var b=0,c=null,d=null,e=null;a.padAngle=function(c){return arguments.length?(b=dr(0,c),a):b};a.sortGroups=
function(b){return arguments.length?(c=b,a):c};a.sortSubgroups=function(b){return arguments.length?(d=b,a):d};a.sortChords=function(b){return arguments.length?(null==b?e=null:(e=Me(b))._=b,a):e&&e._};return a};e.ribbon=function(){function a(){var a,m=lt.call(arguments),h=b.apply(this,m),q=c.apply(this,m);h=+d.apply(this,(m[0]=h,m));var k=e.apply(this,m)-no,l=f.apply(this,m)-no,C=h*$q(k),n=h*ar(k);q=+d.apply(this,(m[0]=q,m));var J=e.apply(this,m)-no;m=f.apply(this,m)-no;g||(g=a=Sd());g.moveTo(C,n);
g.arc(0,0,h,k,l);if(k!==J||l!==m)g.quadraticCurveTo(0,0,q*$q(J),q*ar(J)),g.arc(0,0,q,J,m);g.quadraticCurveTo(0,0,C,n);g.closePath();if(a)return g=null,a+""||null}var b=Td,c=pb,d=pi,e=ij,f=qi,g=null;a.radius=function(b){return arguments.length?(d="function"===typeof b?b:Wc(+b),a):d};a.startAngle=function(b){return arguments.length?(e="function"===typeof b?b:Wc(+b),a):e};a.endAngle=function(b){return arguments.length?(f="function"===typeof b?b:Wc(+b),a):f};a.source=function(c){return arguments.length?
(b=c,a):b};a.target=function(b){return arguments.length?(c=b,a):c};a.context=function(b){return arguments.length?(g=null==b?null:b,a):g};return a};e.nest=function(){function a(b,d,g,m){if(d>=c.length)return null!=e&&b.sort(e),null!=f?f(b):b;for(var h=-1,q=b.length,k=c[d++],l,C,n=hb(),J,L=g();++h<q;)(J=n.get(l=k(C=b[h])+""))?J.push(C):n.set(l,[C]);n.each(function(b,c){m(L,c,a(b,d,g,m))});return L}function b(a,e){if(++e>c.length)return a;var g=d[e-1];if(null!=f&&e>=c.length)var m=a.entries();else m=
[],a.each(function(a,c){m.push({key:c,values:b(a,e)})});return null!=g?m.sort(function(a,b){return g(a.key,b.key)}):m}var c=[],d=[],e,f,g;return g={object:function(b){return a(b,0,Hk,vd)},map:function(b){return a(b,0,Ig,Lc)},entries:function(c){return b(a(c,0,Ig,Lc),0)},key:function(a){c.push(a);return g},sortKeys:function(a){d[c.length-1]=a;return g},sortValues:function(a){e=a;return g},rollup:function(a){f=a;return g}}};e.set=of;e.map=hb;e.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};
e.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};e.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};e.color=Ua;e.rgb=Qb;e.hsl=te;e.lab=Jb;e.hcl=$c;e.lch=function(a,b,c,d){return 1===arguments.length?Va(a):new cb(c,b,a,null==d?1:d)};e.gray=function(a,b){return new tb(a,0,0,null==b?1:b)};e.cubehelix=zb;e.contours=Vb;e.contourDensity=function(){function a(a){var c=new Float32Array(J*L),d=new Float32Array(J*L);a.forEach(function(a,b,d){var e=+g(a,b,d)+n>>
C,f=+m(a,b,d)+n>>C;a=+h(a,b,d);0<=e&&e<J&&0<=f&&f<L&&(c[e+f*J]+=a)});pf({width:J,height:L,data:c},{width:J,height:L,data:d},l>>C);qf({width:J,height:L,data:d},{width:J,height:L,data:c},l>>C);pf({width:J,height:L,data:c},{width:J,height:L,data:d},l>>C);qf({width:J,height:L,data:d},{width:J,height:L,data:c},l>>C);pf({width:J,height:L,data:c},{width:J,height:L,data:d},l>>C);qf({width:J,height:L,data:d},{width:J,height:L,data:c},l>>C);a=G(c);Array.isArray(a)||(d=z(c),a=u(0,d,a),a=p(0,Math.floor(d/a)*
a,a),a.shift());return Vb().thresholds(a).size([J,L])(c).map(b)}function b(a){a.value*=Math.pow(2,-2*C);a.coordinates.forEach(c);return a}function c(a){a.forEach(d)}function d(a){a.forEach(e)}function e(a){a[0]=a[0]*Math.pow(2,C)-n;a[1]=a[1]*Math.pow(2,C)-n}function f(){n=3*l;J=q+2*n>>C;L=k+2*n>>C;return a}var g=rf,m=Xc,h=Xf,q=960,k=500,l=20,C=2,n=3*l,J=q+2*n>>C,L=k+2*n>>C,G=td(20);a.x=function(b){return arguments.length?(g="function"===typeof b?b:td(+b),a):g};a.y=function(b){return arguments.length?
(m="function"===typeof b?b:td(+b),a):m};a.weight=function(b){return arguments.length?(h="function"===typeof b?b:td(+b),a):h};a.size=function(a){if(!arguments.length)return[q,k];var b=Math.ceil(a[0]),c=Math.ceil(a[1]);if(!(0<=b||0<=b))throw Error("invalid size");return q=b,k=c,f()};a.cellSize=function(a){if(!arguments.length)return 1<<C;if(!(1<=(a=+a)))throw Error("invalid cell size");return C=Math.floor(Math.log(a)/Math.LN2),f()};a.thresholds=function(b){return arguments.length?(G="function"===typeof b?
b:Array.isArray(b)?td(uq.call(b)):td(b),a):G};a.bandwidth=function(a){if(!arguments.length)return Math.sqrt(l*(l+1));if(!(0<=(a=+a)))throw Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*a*a+1)-1)/2),f()};return a};e.dispatch=M;e.drag=function(){function a(a){a.on("mousedown.drag",b).filter(C).on("touchstart.drag",f).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(){if(!Q&&q.apply(this,
arguments)){var a=h("mouse",k.apply(this,arguments),hc,this,arguments);a&&(Fb(e.event.view).on("mousemove.drag",c,!0).on("mouseup.drag",d,!0),Zc(e.event.view),e.event.stopImmediatePropagation(),N=!1,p=e.event.clientX,G=e.event.clientY,a("start"))}}function c(){yd();if(!N){var a=e.event.clientX-p,b=e.event.clientY-G;N=a*a+b*b>t}n.mouse("drag")}function d(){Fb(e.event.view).on("mousemove.drag mouseup.drag",null);wc(e.event.view,N);yd();n.mouse("end")}function f(){if(q.apply(this,arguments)){var a=e.event.changedTouches,
b=k.apply(this,arguments),c=a.length,d,f;for(d=0;d<c;++d)if(f=h(a[d].identifier,b,K,this,arguments))e.event.stopImmediatePropagation(),f("start")}}function g(){var a=e.event.changedTouches,b=a.length,c,d;for(c=0;c<b;++c)if(d=n[a[c].identifier])yd(),d("drag")}function m(){var a=e.event.changedTouches,b=a.length,c,d;Q&&clearTimeout(Q);Q=setTimeout(function(){Q=null},500);for(c=0;c<b;++c)if(d=n[a[c].identifier])e.event.stopImmediatePropagation(),d("end")}function h(b,c,d,f,g){var m=d(c,b),h,q,k,C=J.copy();
if(vc(new pe(a,"beforestart",h,b,L,m[0],m[1],0,0,C),function(){if(null==(e.event.subject=h=l.apply(f,g)))return!1;q=h.x-m[0]||0;k=h.y-m[1]||0;return!0}))return function dv(e){var l=m;switch(e){case "start":n[b]=dv;var J=L++;break;case "end":delete n[b],--L;case "drag":m=d(c,b),J=L}vc(new pe(a,e,h,b,J,m[0]+q,m[1]+k,m[0]-l[0],m[1]-l[1],C),C.apply,C,[e,f,g])}}var q=Hg,k=Je,l=rb,C=rd,n={},J=M("start","drag","end"),L=0,p,G,N,Q,t=0;a.filter=function(b){return arguments.length?(q="function"===typeof b?b:
Qe(!!b),a):q};a.container=function(b){return arguments.length?(k="function"===typeof b?b:Qe(b),a):k};a.subject=function(b){return arguments.length?(l="function"===typeof b?b:Qe(b),a):l};a.touchable=function(b){return arguments.length?(C="function"===typeof b?b:Qe(!!b),a):C};a.on=function(){var b=J.on.apply(J,arguments);return b===J?a:b};a.clickDistance=function(b){return arguments.length?(t=(b=+b)*b,a):Math.sqrt(t)};return a};e.dragDisable=Zc;e.dragEnable=wc;e.dsvFormat=ha;e.csvParse=er;e.csvParseRows=
nt;e.csvFormat=ot;e.csvFormatRows=pt;e.tsvParse=fr;e.tsvParseRows=qt;e.tsvFormat=rt;e.tsvFormatRows=Zp;e.easeLinear=function(a){return+a};e.easeQuad=Wf;e.easeQuadIn=function(a){return a*a};e.easeQuadOut=function(a){return a*(2-a)};e.easeQuadInOut=Wf;e.easeCubic=wf;e.easeCubicIn=function(a){return a*a*a};e.easeCubicOut=function(a){return--a*a*a+1};e.easeCubicInOut=wf;e.easePoly=Wq;e.easePolyIn=dt;e.easePolyOut=et;e.easePolyInOut=Wq;e.easeSin=Oe;e.easeSinIn=function(a){return 1-Math.cos(a*Xq)};e.easeSinOut=
function(a){return Math.sin(a*Xq)};e.easeSinInOut=Oe;e.easeExp=oi;e.easeExpIn=function(a){return Math.pow(2,10*a-10)};e.easeExpOut=function(a){return 1-Math.pow(2,-10*a)};e.easeExpInOut=oi;e.easeCircle=ma;e.easeCircleIn=function(a){return 1-Math.sqrt(1-a*a)};e.easeCircleOut=function(a){return Math.sqrt(1- --a*a)};e.easeCircleInOut=ma;e.easeBounce=Bc;e.easeBounceIn=function(a){return 1-Bc(1-a)};e.easeBounceOut=Bc;e.easeBounceInOut=function(a){return(1>=(a*=2)?1-Bc(1-a):Bc(a-1)+1)/2};e.easeBack=Yq;
e.easeBackIn=ft;e.easeBackOut=gt;e.easeBackInOut=Yq;e.easeElastic=Zq;e.easeElasticIn=ht;e.easeElasticOut=Zq;e.easeElasticInOut=it;e.blob=function(a,b){return fetch(a,b).then(qe)};e.buffer=function(a,b){return fetch(a,b).then(tc)};e.dsv=function(a,b,c,d){3===arguments.length&&"function"===typeof c&&(d=c,c=void 0);var e=ha(a);return re(b,c).then(function(a){return e.parse(a,d)})};e.csv=st;e.tsv=tt;e.image=function(a,b){return new Promise(function(c,d){var e=new Image,f;for(f in b)e[f]=b[f];e.onerror=
d;e.onload=function(){c(e)};e.src=a})};e.json=function(a,b){return fetch(a,b).then(zj)};e.text=re;e.xml=im;e.html=gr;e.svg=ut;e.forceCenter=function(a,b){function c(){var c,e=d.length,f=0,g=0;for(c=0;c<e;++c){var m=d[c];f+=m.x;g+=m.y}f=f/e-a;g=g/e-b;for(c=0;c<e;++c)m=d[c],m.x-=f,m.y-=g}var d;null==a&&(a=0);null==b&&(b=0);c.initialize=function(a){d=a};c.x=function(b){return arguments.length?(a=+b,c):a};c.y=function(a){return arguments.length?(b=+a,c):b};return c};e.forceCollide=function(a){function b(){function a(a,
b,c,d,e){var f=a.data;a=a.r;var m=C+a;if(f)f.index>q.index&&(b=k-f.x-f.vx,c=l-f.y-f.vy,d=b*b+c*c,d<m*m&&(0===b&&(b=ye(),d+=b*b),0===c&&(c=ye(),d+=c*c),d=(m-(d=Math.sqrt(d)))/d*g,q.vx+=(b*=d)*(m=(a*=a)/(n+a)),q.vy+=(c*=d)*m,f.vx-=b*(m=1-m),f.vy-=c*m));else return b>k+m||d<k-m||c>l+m||e<l-m}for(var b,d=e.length,h,q,k,l,C,n,J=0;J<m;++J)for(h=be(e,cc,Tg).visitAfter(c),b=0;b<d;++b)q=e[b],C=f[q.index],n=C*C,k=q.x+q.vx,l=q.y+q.vy,h.visit(a)}function c(a){if(a.data)return a.r=f[a.data.index];for(var b=a.r=
0;4>b;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function d(){if(e){var b,c=e.length;f=Array(c);for(b=0;b<c;++b){var d=e[b];f[d.index]=+a(d,b,e)}}}var e,f,g=1,m=1;"function"!==typeof a&&(a=Nb(null==a?1:+a));b.initialize=function(a){e=a;d()};b.iterations=function(a){return arguments.length?(m=+a,b):m};b.strength=function(a){return arguments.length?(g=+a,b):g};b.radius=function(c){return arguments.length?(a="function"===typeof c?c:Nb(+c),d(),b):a};return b};e.forceLink=function(a){function b(b){for(var c=0,
d=a.length;c<n;++c)for(var e=0,f,g,h,k,l;e<d;++e)f=a[e],g=f.source,f=f.target,h=f.x+f.vx-g.x-g.vx||ye(),k=f.y+f.vy-g.y-g.vy||ye(),l=Math.sqrt(h*h+k*k),l=(l-q[e])/l*b*m[e],h*=l,k*=l,f.vx-=h*(l=C[e]),f.vy-=k*l,g.vx+=h*(l=1-l),g.vy+=k*l}function c(){if(k){var b=k.length,c=a.length,g=hb(k,f);var h=0;for(l=Array(b);h<c;++h)b=a[h],b.index=h,"object"!==typeof b.source&&(b.source=We(g,b.source)),"object"!==typeof b.target&&(b.target=We(g,b.target)),l[b.source.index]=(l[b.source.index]||0)+1,l[b.target.index]=
(l[b.target.index]||0)+1;h=0;for(C=Array(c);h<c;++h)b=a[h],C[h]=l[b.source.index]/(l[b.source.index]+l[b.target.index]);m=Array(c);d();q=Array(c);e()}}function d(){if(k)for(var b=0,c=a.length;b<c;++b)m[b]=+g(a[b],b,a)}function e(){if(k)for(var b=0,c=a.length;b<c;++b)q[b]=+h(a[b],b,a)}var f=wj,g=function(a){return 1/Math.min(l[a.source.index],l[a.target.index])},m,h=Nb(30),q,k,l,C,n=1;null==a&&(a=[]);b.initialize=function(a){k=a;c()};b.links=function(d){return arguments.length?(a=d,c(),b):a};b.id=
function(a){return arguments.length?(f=a,b):f};b.iterations=function(a){return arguments.length?(n=+a,b):n};b.strength=function(a){return arguments.length?(g="function"===typeof a?a:Nb(+a),d(),b):g};b.distance=function(a){return arguments.length?(h="function"===typeof a?a:Nb(+a),e(),b):h};return b};e.forceManyBody=function(){function a(a){var b=e.length,m=be(e,Aj,zi).visitAfter(c);g=a;for(a=0;a<b;++a)f=e[a],m.visit(d)}function b(){if(e){var a,b=e.length;h=Array(b);for(a=0;a<b;++a){var c=e[a];h[c.index]=
+m(c,a,e)}}}function c(a){var b=0,c,d,e=0,f,g,m;if(a.length){for(f=g=m=0;4>m;++m)(c=a[m])&&(d=Math.abs(c.value))&&(b+=c.value,e+=d,f+=d*c.x,g+=d*c.y);a.x=f/e;a.y=g/e}else{c=a;c.x=c.data.x;c.y=c.data.y;do b+=h[c.data.index];while(c=c.next)}a.value=b}function d(a,b,c,d){if(!a.value)return!0;c=a.x-f.x;var e=a.y-f.y;b=d-b;d=c*c+e*e;if(b*b/l<d)return d<k&&(0===c&&(c=ye(),d+=c*c),0===e&&(e=ye(),d+=e*e),d<q&&(d=Math.sqrt(q*d)),f.vx+=c*a.value*g/d,f.vy+=e*a.value*g/d),!0;if(!(a.length||d>=k)){if(a.data!==
f||a.next)0===c&&(c=ye(),d+=c*c),0===e&&(e=ye(),d+=e*e),d<q&&(d=Math.sqrt(q*d));do a.data!==f&&(b=h[a.data.index]*g/d,f.vx+=c*b,f.vy+=e*b);while(a=a.next)}}var e,f,g,m=Nb(-30),h,q=1,k=Infinity,l=.81;a.initialize=function(a){e=a;b()};a.strength=function(c){return arguments.length?(m="function"===typeof c?c:Nb(+c),b(),a):m};a.distanceMin=function(b){return arguments.length?(q=b*b,a):Math.sqrt(q)};a.distanceMax=function(b){return arguments.length?(k=b*b,a):Math.sqrt(k)};a.theta=function(b){return arguments.length?
(l=b*b,a):Math.sqrt(l)};return a};e.forceRadial=function(a,b,c){function d(a){for(var d=0,e=f.length;d<e;++d){var g=f[d],q=g.x-b||1E-6,k=g.y-c||1E-6,l=Math.sqrt(q*q+k*k);l=(h[d]-l)*m[d]*a/l;g.vx+=q*l;g.vy+=k*l}}function e(){if(f){var b,c=f.length;m=Array(c);h=Array(c);for(b=0;b<c;++b)h[b]=+a(f[b],b,f),m[b]=isNaN(h[b])?0:+g(f[b],b,f)}}var f,g=Nb(.1),m,h;"function"!==typeof a&&(a=Nb(+a));null==b&&(b=0);null==c&&(c=0);d.initialize=function(a){f=a;e()};d.strength=function(a){return arguments.length?(g=
"function"===typeof a?a:Nb(+a),e(),d):g};d.radius=function(b){return arguments.length?(a="function"===typeof b?b:Nb(+b),e(),d):a};d.x=function(a){return arguments.length?(b=+a,d):b};d.y=function(a){return arguments.length?(c=+a,d):c};return d};e.forceSimulation=function(a){function b(){c();n.call("tick",f);g<m&&(C.stop(),n.call("end",f))}function c(b){var c,d=a.length;void 0===b&&(b=1);for(var e=0;e<b;++e)for(g+=(q-g)*h,l.each(function(a){a(g)}),c=0;c<d;++c){var m=a[c];null==m.fx?m.x+=m.vx*=k:(m.x=
m.fx,m.vx=0);null==m.fy?m.y+=m.vy*=k:(m.y=m.fy,m.vy=0)}return f}function d(){for(var b=0,c=a.length,d;b<c;++b){d=a[b];d.index=b;isNaN(d.fx)||(d.x=d.fx);isNaN(d.fy)||(d.y=d.fy);if(isNaN(d.x)||isNaN(d.y)){var e=10*Math.sqrt(b),f=b*vt;d.x=e*Math.cos(f);d.y=e*Math.sin(f)}if(isNaN(d.vx)||isNaN(d.vy))d.vx=d.vy=0}}function e(b){b.initialize&&b.initialize(a);return b}var f,g=1,m=.001,h=1-Math.pow(m,1/300),q=0,k=.6,l=hb(),C=bd(b),n=M("tick","end");null==a&&(a=[]);d();return f={tick:c,restart:function(){return C.restart(b),
f},stop:function(){return C.stop(),f},nodes:function(b){return arguments.length?(a=b,d(),l.each(e),f):a},alpha:function(a){return arguments.length?(g=+a,f):g},alphaMin:function(a){return arguments.length?(m=+a,f):m},alphaDecay:function(a){return arguments.length?(h=+a,f):+h},alphaTarget:function(a){return arguments.length?(q=+a,f):q},velocityDecay:function(a){return arguments.length?(k=1-a,f):1-k},force:function(a,b){return 1<arguments.length?(null==b?l.remove(a):l.set(a,e(b)),f):l.get(a)},find:function(b,
c,d){var e,f=a.length;d=null==d?Infinity:d*d;for(e=0;e<f;++e){var g=a[e];var m=b-g.x;var h=c-g.y;m=m*m+h*h;if(m<d){var q=g;d=m}}return q},on:function(a,b){return 1<arguments.length?(n.on(a,b),f):n.on(a)}}};e.forceX=function(a){function b(a){for(var b=0,c=e.length,d;b<c;++b)d=e[b],d.vx+=(g[b]-d.x)*f[b]*a}function c(){if(e){var b,c=e.length;f=Array(c);g=Array(c);for(b=0;b<c;++b)f[b]=isNaN(g[b]=+a(e[b],b,e))?0:+d(e[b],b,e)}}var d=Nb(.1),e,f,g;"function"!==typeof a&&(a=Nb(null==a?0:+a));b.initialize=
function(a){e=a;c()};b.strength=function(a){return arguments.length?(d="function"===typeof a?a:Nb(+a),c(),b):d};b.x=function(d){return arguments.length?(a="function"===typeof d?d:Nb(+d),c(),b):a};return b};e.forceY=function(a){function b(a){for(var b=0,c=e.length,d;b<c;++b)d=e[b],d.vy+=(g[b]-d.y)*f[b]*a}function c(){if(e){var b,c=e.length;f=Array(c);g=Array(c);for(b=0;b<c;++b)f[b]=isNaN(g[b]=+a(e[b],b,e))?0:+d(e[b],b,e)}}var d=Nb(.1),e,f,g;"function"!==typeof a&&(a=Nb(null==a?0:+a));b.initialize=
function(a){e=a;c()};b.strength=function(a){return arguments.length?(d="function"===typeof a?a:Nb(+a),c(),b):d};b.y=function(d){return arguments.length?(a="function"===typeof d?d:Nb(+d),c(),b):a};return b};e.formatDefaultLocale=Zd;e.formatLocale=Ih;e.formatSpecifier=Zg;e.precisionFixed=cg;e.precisionPrefix=dd;e.precisionRound=Ai;e.geoArea=function(a){ro.reset();bc(a,og);return 2*ro};e.geoBounds=function(a){var b,c,d;cf=ec=-(Ub=Ae=Infinity);Qh=[];bc(a,ch);if(b=Qh.length){Qh.sort(Ff);a=1;var e=Qh[0];
for(c=[e];a<b;++a){var f=Qh[a];ti(e,f[0])||ti(e,f[1])?(Gb(e[0],f[1])>Gb(e[0],e[1])&&(e[1]=f[1]),Gb(f[0],e[1])>Gb(e[0],e[1])&&(e[0]=f[0])):c.push(e=f)}var g=-Infinity;b=c.length-1;a=0;for(e=c[b];a<=b;e=f,++a)f=c[a],(d=Gb(e[1],f[0]))>g&&(g=d,Ub=f[0],ec=e[1])}Qh=bh=null;return Infinity===Ub||Infinity===Ae?[[NaN,NaN],[NaN,NaN]]:[[Ub,Ae],[ec,cf]]};e.geoCentroid=function(a){Zk=Jm=Gm=Hm=Im=Km=Lm=Mm=Io=Jo=Ko=0;bc(a,Nf);a=Io;var b=Jo,c=Ko,d=a*a+b*b+c*c;return 1E-12>d&&(a=Km,b=Lm,c=Mm,1E-6>Jm&&(a=Gm,b=Hm,c=
Im),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Gd(b,a)*ub,nc(c/oc(d))*ub]};e.geoCircle=function(){function a(){var a=b.apply(this,arguments),m=c.apply(this,arguments)*wa,h=d.apply(this,arguments)*wa;e=[];f=Kf(-a[0]*wa,-a[1]*wa,0).invert;Ph(g,m,h,1);a={type:"Polygon",coordinates:[e]};e=f=null;return a}var b=id([0,0]),c=id(90),d=id(6),e,f,g={point:function(a,b){e.push(a=f(a,b));a[0]*=ub;a[1]*=ub}};a.center=function(c){return arguments.length?(b="function"===typeof c?c:id([+c[0],+c[1]]),a):b};a.radius=function(b){return arguments.length?
(c="function"===typeof b?b:id(+b),a):c};a.precision=function(b){return arguments.length?(d="function"===typeof b?b:id(+b),a):d};return a};e.geoClipAntimeridian=Xo;e.geoClipCircle=ed;e.geoClipExtent=function(){var a=0,b=0,c=960,d=500,e,f,g;return g={stream:function(g){return e&&f===g?e:e=ce(a,b,c,d)(f=g)},extent:function(m){return arguments.length?(a=+m[0][0],b=+m[0][1],c=+m[1][0],d=+m[1][1],e=f=null,g):[[a,b],[c,d]]}}};e.geoClipRectangle=ce;e.geoContains=function(a,b){return(a&&ir.hasOwnProperty(a.type)?
ir[a.type]:ue)(a,b)};e.geoDistance=xe;e.geoGraticule=Bj;e.geoGraticule10=function(){return Bj()()};e.geoInterpolate=function(a,b){var c=a[0]*wa,d=a[1]*wa;a=b[0]*wa;b=b[1]*wa;var e=oa(d),f=ka(d),g=oa(b),m=ka(b),h=e*oa(c),q=e*ka(c),k=g*oa(a),l=g*ka(a),C=2*nc(oc(ve(b-d)+e*g*ve(a-c))),n=ka(C);a=C?function(a){var b=ka(a*=C)/n,c=ka(C-a)/n;a=c*h+b*k;var d=c*q+b*l;b=c*f+b*m;return[Gd(d,a)*ub,Gd(b,oc(a*a+d*d))*ub]}:function(){return[c*ub,d*ub]};a.distance=C;return a};e.geoLength=Xe;e.geoPath=function(a,b){function c(a){a&&
("function"===typeof d&&f.pointRadius(+d.apply(this,arguments)),bc(a,e(f)));return f.result()}var d=4.5,e,f;c.area=function(a){bc(a,e(dh));return dh.result()};c.measure=function(a){bc(a,e(bl));return bl.result()};c.bounds=function(a){bc(a,e(Sm));return Sm.result()};c.centroid=function(a){bc(a,e(df));return df.result()};c.projection=function(b){return arguments.length?(e=null==b?(a=null,Ye):(a=b).stream,c):a};c.context=function(a){if(!arguments.length)return b;f=null==a?(b=null,new ac):new Ch(b=a);
"function"!==typeof d&&f.pointRadius(d);return c};c.pointRadius=function(a){if(!arguments.length)return d;d="function"===typeof a?a:(f.pointRadius(+a),+a);return c};return c.projection(a).context(b)};e.geoAlbers=ld;e.geoAlbersUsa=function(){function a(a){var b=a[0];a=a[1];return k=null,(f.point(b,a),k)||(m.point(b,a),k)||(q.point(b,a),k)}function b(){c=d=null;return a}var c,d,e=ld(),f,g=Fi().rotate([154,0]).center([-2,58.5]).parallels([55,65]),m,h=Fi().rotate([157,0]).center([-3,19.9]).parallels([8,
18]),q,k,l={point:function(a,b){k=[a,b]}};a.invert=function(a){var b=e.scale(),c=e.translate(),d=(a[0]-c[0])/b;b=(a[1]-c[1])/b;return(.12<=b&&.234>b&&-.425<=d&&-.214>d?g:.166<=b&&.234>b&&-.214<=d&&-.115>d?h:e).invert(a)};a.stream=function(a){return c&&d===a?c:c=Yo([e.stream(d=a),g.stream(a),h.stream(a)])};a.precision=function(a){if(!arguments.length)return e.precision();e.precision(a);g.precision(a);h.precision(a);return b()};a.scale=function(b){if(!arguments.length)return e.scale();e.scale(b);g.scale(.35*
b);h.scale(b);return a.translate(e.translate())};a.translate=function(a){if(!arguments.length)return e.translate();var c=e.scale(),d=+a[0],k=+a[1];f=e.translate(a).clipExtent([[d-.455*c,k-.238*c],[d+.455*c,k+.238*c]]).stream(l);m=g.translate([d-.307*c,k+.201*c]).clipExtent([[d-.425*c+1E-6,k+.12*c+1E-6],[d-.214*c-1E-6,k+.234*c-1E-6]]).stream(l);q=h.translate([d-.205*c,k+.212*c]).clipExtent([[d-.214*c+1E-6,k+.166*c+1E-6],[d-.115*c-1E-6,k+.234*c-1E-6]]).stream(l);return b()};a.fitExtent=function(b,c){return Fh(a,
b,c)};a.fitSize=function(b,c){return Fh(a,[[0,0],b],c)};a.fitWidth=function(b,c){return sj(a,b,c)};a.fitHeight=function(b,c){return $d(a,b,c)};return a.scale(1070)};e.geoAzimuthalEqualArea=function(){return ae(bq).scale(124.75).clipAngle(179.999)};e.geoAzimuthalEqualAreaRaw=bq;e.geoAzimuthalEquidistant=function(){return ae(cq).scale(79.4188).clipAngle(179.999)};e.geoAzimuthalEquidistantRaw=cq;e.geoConicConformal=function(){return Ug(Mj).scale(109.5).parallels([30,30])};e.geoConicConformalRaw=Mj;e.geoConicEqualArea=
Fi;e.geoConicEqualAreaRaw=el;e.geoConicEquidistant=function(){return Ug(Um).scale(131.154).center([0,13.9389])};e.geoConicEquidistantRaw=Um;e.geoEqualEarth=function(){return ae(hl).scale(177.158)};e.geoEqualEarthRaw=hl;e.geoEquirectangular=function(){return ae(Of).scale(152.63)};e.geoEquirectangularRaw=Of;e.geoGnomonic=function(){return ae(Ii).scale(144.049).clipAngle(60)};e.geoGnomonicRaw=Ii;e.geoIdentity=function(){function a(){C=n=null;return J}var b=1,c=0,d=0,e=1,f=1,g=Ye,m=null,h,q,k,l=Ye,C,
n,J;return J={stream:function(a){return C&&n===a?C:C=g(l(n=a))},postclip:function(b){return arguments.length?(l=b,m=h=q=k=null,a()):l},clipExtent:function(b){return arguments.length?(l=null==b?(m=h=q=k=null,Ye):ce(m=+b[0][0],h=+b[0][1],q=+b[1][0],k=+b[1][1]),a()):null==m?null:[[m,h],[q,k]]},scale:function(m){return arguments.length?(g=Ji((b=+m)*e,b*f,c,d),a()):b},translate:function(m){return arguments.length?(g=Ji(b*e,b*f,c=+m[0],d=+m[1]),a()):[c,d]},reflectX:function(m){return arguments.length?(g=
Ji(b*(e=m?-1:1),b*f,c,d),a()):0>e},reflectY:function(m){return arguments.length?(g=Ji(b*e,b*(f=m?-1:1),c,d),a()):0>f},fitExtent:function(a,b){return Fh(J,a,b)},fitSize:function(a,b){return Fh(J,[[0,0],a],b)},fitWidth:function(a,b){return sj(J,a,b)},fitHeight:function(a,b){return $d(J,a,b)}}};e.geoProjection=ae;e.geoProjectionMutator=Lk;e.geoMercator=function(){return gl(Hi).scale(961/ee)};e.geoMercatorRaw=Hi;e.geoNaturalEarth1=function(){return ae(il).scale(175.295)};e.geoNaturalEarth1Raw=il;e.geoOrthographic=
function(){return ae(Oj).scale(249.5).clipAngle(90.000001)};e.geoOrthographicRaw=Oj;e.geoStereographic=function(){return ae(Ki).scale(250).clipAngle(142)};e.geoStereographicRaw=Ki;e.geoTransverseMercator=function(){var a=gl(jl),b=a.center,c=a.rotate;a.center=function(a){return arguments.length?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return arguments.length?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90]).scale(159.155)};e.geoTransverseMercatorRaw=
jl;e.geoRotation=Mb;e.geoStream=bc;e.geoTransform=function(a){return{stream:Ed(a)}};e.cluster=function(){function a(a){var f,g=0;a.eachAfter(function(a){var c=a.children;if(c){var d=c.reduce(ap,0)/c.length;a.x=d;a.y=1+c.reduce(bp,0)}else a.x=f?g+=b(a,f):0,a.y=0,f=a});var m=Wm(a),h=Xm(a),q=m.x-b(m,h)/2,k=h.x+b(h,m)/2;return a.eachAfter(e?function(b){b.x=(b.x-a.x)*c;b.y=(a.y-b.y)*d}:function(b){b.x=(b.x-q)/(k-q)*c;b.y=(1-(a.y?b.y/a.y:1))*d})}var b=$o,c=1,d=1,e=!1;a.separation=function(c){return arguments.length?
(b=c,a):b};a.size=function(b){return arguments.length?(e=!1,c=+b[0],d=+b[1],a):e?null:[c,d]};a.nodeSize=function(b){return arguments.length?(e=!0,c=+b[0],d=+b[1],a):e?[c,d]:null};return a};e.hierarchy=kl;e.pack=function(){function a(a){a.x=c/2;a.y=d/2;b?a.eachBefore(Be(b)).eachAfter(Th(e,.5)).eachBefore(Kd(1)):a.eachBefore(Be(nl)).eachAfter(Th(sg,1)).eachAfter(Th(e,a.r/Math.min(c,d))).eachBefore(Kd(Math.min(c,d)/(2*a.r)));return a}var b=null,c=1,d=1,e=sg;a.radius=function(c){return arguments.length?
(b=null==c?null:Rj(c),a):b};a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]};a.padding=function(b){return arguments.length?(e="function"===typeof b?b:Jc(+b),a):e};return a};e.packSiblings=function(a){ml(a);return a};e.packEnclose=Sh;e.partition=function(){function a(a){var g=a.height+1;a.x0=a.y0=e;a.x1=c;a.y1=d/g;a.eachBefore(b(d,g));f&&a.eachBefore(ol);return a}function b(a,b){return function(c){c.children&&Ce(c,c.x0,a*(c.depth+1)/b,c.x1,a*(c.depth+2)/b);var d=c.x0,f=c.y0,g=
c.x1-e,m=c.y1-e;g<d&&(d=g=(d+g)/2);m<f&&(f=m=(f+m)/2);c.x0=d;c.y0=f;c.x1=g;c.y1=m}}var c=1,d=1,e=0,f=!1;a.round=function(b){return arguments.length?(f=!!b,a):f};a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]};a.padding=function(b){return arguments.length?(e=+b,a):e};return a};e.stratify=function(){function a(a){var d,e=a.length,f=Array(e),g,m={};for(d=0;d<e;++d){var h=a[d];var q=f[d]=new Db(h);null!=(g=b(h,d,a))&&(g+="")&&(h="$"+(q.id=g),m[h]=h in m?jr:q)}for(d=0;d<e;++d)if(q=
f[d],g=c(a[d],d,a),null!=g&&(g+="")){h=m["$"+g];if(!h)throw Error("missing: "+g);if(h===jr)throw Error("ambiguous: "+g);h.children?h.children.push(q):h.children=[q];q.parent=h}else{if(k)throw Error("multiple roots");var k=q}if(!k)throw Error("no root");k.parent=wt;k.eachBefore(function(a){a.depth=a.parent.depth+1;--e}).eachBefore(Zm);k.parent=null;if(0<e)throw Error("cycle");return k}var b=md,c=cn;a.id=function(c){return arguments.length?(b=Rj(c),a):b};a.parentId=function(b){return arguments.length?
(c=Rj(b),a):c};return a};e.tree=function(){function a(a){var h=Ja(a);h.eachAfter(b);h.parent.m=-h.z;h.eachBefore(c);if(m)a.eachBefore(d);else{var q=a,k=a,l=a;a.eachBefore(function(a){a.x<q.x&&(q=a);a.x>k.x&&(k=a);a.depth>l.depth&&(l=a)});h=q===k?1:e(q,k)/2;var C=h-q.x,n=f/(k.x+h+C),J=g/(l.depth||1);a.eachBefore(function(a){a.x=(a.x+C)*n;a.y=a.depth*J})}return a}function b(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b){for(var f=0,g=0,m=a.children,h=m.length,q;0<=--h;)q=m[h],q.z+=
f,q.m+=f,f+=q.s+(g+=q.c);b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+e(a._,d._),a.m=a.z-b):a.z=b}else d&&(a.z=d.z+e(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){g=f=a;m=f.parent.children[0];h=f.m;q=g.m;for(var k=d.m,l=m.m,C;d=Uj(d),f=Tj(f),d&&f;){m=Tj(m);g=Uj(g);g.a=a;C=d.z+k-f.z-h+e(d._,f._);if(0<C){var n=d.a.parent===a.parent?d.a:c,J=a,L=C,p=L/(J.i-n.i);J.c-=p;J.s+=L;n.c+=p;J.z+=L;J.m+=L;h+=C;q+=C}k+=d.m;h+=f.m;l+=m.m;q+=g.m}d&&!Uj(g)&&(g.t=d,g.m+=k-q);f&&!Tj(m)&&(m.t=f,m.m+=h-l,c=a)}b.A=c}function c(a){a._.x=
a.z+a.parent.m;a.m+=a.parent.m}function d(a){a.x*=f;a.y=a.depth*g}var e=Sj,f=1,g=1,m=null;a.separation=function(b){return arguments.length?(e=b,a):e};a.size=function(b){return arguments.length?(m=!1,f=+b[0],g=+b[1],a):m?null:[f,g]};a.nodeSize=function(b){return arguments.length?(m=!0,f=+b[0],g=+b[1],a):m?[f,g]:null};return a};e.treemap=function(){function a(a){a.x0=a.y0=0;a.x1=e;a.y1=f;a.eachBefore(b);g=[0];d&&a.eachBefore(ol);return a}function b(a){var b=g[a.depth],d=a.x0+b,e=a.y0+b,f=a.x1-b,C=a.y1-
b;f<d&&(d=f=(d+f)/2);C<e&&(e=C=(e+C)/2);a.x0=d;a.y0=e;a.x1=f;a.y1=C;a.children&&(b=g[a.depth+1]=m(a)/2,d+=l(a)-b,e+=h(a)-b,f-=q(a)-b,C-=k(a)-b,f<d&&(d=f=(d+f)/2),C<e&&(e=C=(e+C)/2),c(a,d,e,f,C))}var c=lr,d=!1,e=1,f=1,g=[0],m=sg,h=sg,q=sg,k=sg,l=sg;a.round=function(b){return arguments.length?(d=!!b,a):d};a.size=function(b){return arguments.length?(e=+b[0],f=+b[1],a):[e,f]};a.tile=function(b){return arguments.length?(c=Rj(b),a):c};a.padding=function(b){return arguments.length?a.paddingInner(b).paddingOuter(b):
a.paddingInner()};a.paddingInner=function(b){return arguments.length?(m="function"===typeof b?b:Jc(+b),a):m};a.paddingOuter=function(b){return arguments.length?a.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):a.paddingTop()};a.paddingTop=function(b){return arguments.length?(h="function"===typeof b?b:Jc(+b),a):h};a.paddingRight=function(b){return arguments.length?(q="function"===typeof b?b:Jc(+b),a):q};a.paddingBottom=function(b){return arguments.length?(k="function"===typeof b?b:Jc(+b),
a):k};a.paddingLeft=function(b){return arguments.length?(l="function"===typeof b?b:Jc(+b),a):l};return a};e.treemapBinary=function(a,b,c,d,e){function f(a,b,c,d,e,m,h){if(a>=b-1)a=g[a],a.x0=d,a.y0=e,a.x1=m,a.y1=h;else{for(var q=k[a],l=c/2+q,C=a+1,n=b-1;C<n;){var J=C+n>>>1;k[J]<l?C=J+1:n=J}l-k[C-1]<k[C]-l&&a+1<C&&--C;q=k[C]-q;l=c-q;m-d>h-e?(c=(d*l+m*q)/c,f(a,C,q,d,e,c,h),f(C,b,l,c,e,m,h)):(c=(e*l+h*q)/c,f(a,C,q,d,e,m,c),f(C,b,l,d,c,m,h))}}var g=a.children,m,h=g.length,q,k=Array(h+1);for(k[0]=q=m=0;m<
h;++m)k[m+1]=q+=g[m].value;f(0,h,a.value,b,c,d,e)};e.treemapDice=Ce;e.treemapSlice=Vh;e.treemapSliceDice=function(a,b,c,d,e){(a.depth&1?Vh:Ce)(a,b,c,d,e)};e.treemapSquarify=lr;e.treemapResquarify=xt;e.interpolate=jc;e.interpolateArray=bg;e.interpolateBasis=Og;e.interpolateBasisClosed=Re;e.interpolateDate=Yd;e.interpolateDiscrete=function(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}};e.interpolateHue=function(a,b){var c=Se(+a,+b);return function(a){a=c(a);
return a-360*Math.floor(a/360)}};e.interpolateNumber=Yb;e.interpolateObject=Cf;e.interpolateRound=Bd;e.interpolateString=Fc;e.interpolateTransformCss=Vp;e.interpolateTransformSvg=Uq;e.interpolateZoom=Pg;e.interpolateRgb=ja;e.interpolateRgbBasis=Pb;e.interpolateRgbBasisClosed=Q;e.interpolateHsl=Ys;e.interpolateHslLong=Zs;e.interpolateLab=function(a,b){var c=La((a=Jb(a)).l,(b=Jb(b)).l),d=La(a.a,b.a),e=La(a.b,b.b),f=La(a.opacity,b.opacity);return function(b){a.l=c(b);a.a=d(b);a.b=e(b);a.opacity=f(b);
return a+""}};e.interpolateHcl=$s;e.interpolateHclLong=at;e.interpolateCubehelix=bt;e.interpolateCubehelixLong=mo;e.piecewise=function(a,b){for(var c=0,d=b.length-1,e=b[0],f=Array(0>d?0:d);c<d;)f[c]=a(e,e=b[++c]);return function(a){var b=Math.max(0,Math.min(d-1,Math.floor(a*=d)));return f[b](a-b)}};e.quantize=function(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a(d/(b-1));return c};e.path=Sd;e.polygonArea=function(a){for(var b=-1,c=a.length,d,e=a[c-1],f=0;++b<c;)d=e,e=a[b],f+=d[1]*e[0]-d[0]*e[1];return f/
2};e.polygonCentroid=function(a){for(var b=-1,c=a.length,d=0,e=0,f,g=a[c-1],m,h=0;++b<c;)f=g,g=a[b],h+=m=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*m,e+=(f[1]+g[1])*m;return h*=3,[d/h,e/h]};e.polygonHull=function(a){if(3>(c=a.length))return null;var b,c,d=Array(c),e=Array(c);for(b=0;b<c;++b)d[b]=[+a[b][0],+a[b][1],b];d.sort(en);for(b=0;b<c;++b)e[b]=[d[b][0],-d[b][1]];c=ql(d);e=ql(e);var f=e[0]===c[0],g=e[e.length-1]===c[c.length-1],m=[];for(b=c.length-1;0<=b;--b)m.push(a[d[c[b]][2]]);for(b=+f;b<e.length-
g;++b)m.push(a[d[e[b]][2]]);return m};e.polygonContains=function(a,b){var c=a.length,d=a[c-1],e=b[0];b=b[1];for(var f=d[0],g=d[1],m,h=!1,q=0;q<c;++q)d=a[q],m=d[0],d=d[1],d>b!==g>b&&e<(f-m)*(b-d)/(g-d)+m&&(h=!h),f=m,g=d;return h};e.polygonLength=function(a){var b=-1,c=a.length,d=a[c-1],e=d[0];d=d[1];for(var f=0;++b<c;){var g=e;var m=d;d=a[b];e=d[0];d=d[1];g-=e;m-=d;f+=Math.sqrt(g*g+m*m)}return f};e.quadtree=be;e.randomUniform=yt;e.randomNormal=mr;e.randomLogNormal=zt;e.randomBates=At;e.randomIrwinHall=
nr;e.randomExponential=Bt;e.scaleBand=Ni;e.scalePoint=function(){return rl(Ni.apply(null,arguments).paddingInner(1))};e.scaleIdentity=nn;e.scaleLinear=mn;e.scaleLog=Yj;e.scaleSymlog=tl;e.scaleOrdinal=Vj;e.scaleImplicit=ep;e.scalePow=ge;e.scaleSqrt=function(){return ge.apply(null,arguments).exponent(.5)};e.scaleQuantile=Yh;e.scaleQuantize=De;e.scaleThreshold=un;e.scaleTime=function(){return fe.apply(ai(hh,fq,Hl,yl,eq,dq,km,fj,e.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)};
e.scaleUtc=function(){return fe.apply(ai(ih,iq,Jl,wl,hq,gq,km,fj,e.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)};e.scaleSequential=Ml;e.scaleSequentialLog=Nl;e.scaleSequentialPow=nk;e.scaleSequentialSqrt=function(){return nk.apply(null,arguments).exponent(.5)};e.scaleSequentialSymlog=bi;e.scaleSequentialQuantile=Ol;e.scaleDiverging=Jn;e.scaleDivergingLog=Kn;e.scaleDivergingPow=Ui;e.scaleDivergingSqrt=function(){return Ui.apply(null,arguments).exponent(.5)};e.scaleDivergingSymlog=
Pl;e.tickFormat=ln;e.schemeCategory10=$t;e.schemeAccent=au;e.schemeDark2=bu;e.schemePaired=cu;e.schemePastel1=du;e.schemePastel2=eu;e.schemeSet1=fu;e.schemeSet2=gu;e.schemeSet3=hu;e.interpolateBrBG=iu;e.schemeBrBG=Br;e.interpolatePRGn=ju;e.schemePRGn=Cr;e.interpolatePiYG=ku;e.schemePiYG=Dr;e.interpolatePuOr=lu;e.schemePuOr=Er;e.interpolateRdBu=mu;e.schemeRdBu=Fr;e.interpolateRdGy=nu;e.schemeRdGy=Gr;e.interpolateRdYlBu=ou;e.schemeRdYlBu=Hr;e.interpolateRdYlGn=pu;e.schemeRdYlGn=Ir;e.interpolateSpectral=
qu;e.schemeSpectral=Jr;e.interpolateBuGn=ru;e.schemeBuGn=Kr;e.interpolateBuPu=su;e.schemeBuPu=Lr;e.interpolateGnBu=tu;e.schemeGnBu=Mr;e.interpolateOrRd=uu;e.schemeOrRd=Nr;e.interpolatePuBuGn=vu;e.schemePuBuGn=Or;e.interpolatePuBu=wu;e.schemePuBu=Pr;e.interpolatePuRd=xu;e.schemePuRd=Qr;e.interpolateRdPu=yu;e.schemeRdPu=Rr;e.interpolateYlGnBu=zu;e.schemeYlGnBu=Sr;e.interpolateYlGn=Au;e.schemeYlGn=Tr;e.interpolateYlOrBr=Bu;e.schemeYlOrBr=Ur;e.interpolateYlOrRd=Cu;e.schemeYlOrRd=Vr;e.interpolateBlues=
Du;e.schemeBlues=Wr;e.interpolateGreens=Eu;e.schemeGreens=Xr;e.interpolateGreys=Fu;e.schemeGreys=Yr;e.interpolatePurples=Gu;e.schemePurples=Zr;e.interpolateReds=Hu;e.schemeReds=$r;e.interpolateOranges=Iu;e.schemeOranges=as;e.interpolateCubehelixDefault=Ju;e.interpolateRainbow=function(a){if(0>a||1<a)a-=Math.floor(a);var b=Math.abs(a-.5);uo.h=360*a-100;uo.s=1.5-1.5*b;uo.l=.8-.9*b;return uo+""};e.interpolateWarm=Ku;e.interpolateCool=Lu;e.interpolateSinebow=function(a){var b;a=(.5-a)*Math.PI;vo.r=255*
(b=Math.sin(a))*b;vo.g=255*(b=Math.sin(a+Mu))*b;vo.b=255*(b=Math.sin(a+Nu))*b;return vo+""};e.interpolateViridis=Ou;e.interpolateMagma=Pu;e.interpolateInferno=Qu;e.interpolatePlasma=Ru;e.create=function(a){return Fb(U(a).call(document.documentElement))};e.creator=U;e.local=oe;e.matcher=la;e.mouse=hc;e.namespace=W;e.namespaces=Rk;e.clientPoint=Pe;e.select=Fb;e.selectAll=function(a){return"string"===typeof a?new jb([document.querySelectorAll(a)],[document.documentElement]):new jb([null==a?[]:a],Tk)};
e.selection=Xa;e.selector=sa;e.selectorAll=ea;e.style=gc;e.touch=K;e.touches=function(a,b){null==b&&(b=Af().touches);for(var c=0,d=b?b.length:0,e=Array(d);c<d;++c)e[c]=Pe(a,b[c]);return e};e.window=xb;e.customEvent=vc;e.arc=function(){function a(){var a,q=+b.apply(this,arguments),k=+c.apply(this,arguments),l=f.apply(this,arguments)-Mn,C=g.apply(this,arguments)-Mn,n=bs(C-l),J=C>l;h||(h=a=Sd());if(k<q){var L=k;k=q;q=L}if(1E-12<k)if(n>ki-1E-12)h.moveTo(k*gj(l),k*Fg(l)),h.arc(0,0,k,l,C,!J),1E-12<q&&(h.moveTo(q*
gj(C),q*Fg(C)),h.arc(0,0,q,C,l,J));else{var p=l,G=C;L=l;var N=C,Q=n,t=n,r=m.apply(this,arguments)/2,I=1E-12<r&&(e?+e.apply(this,arguments):ok(q*q+k*k)),u=jq(bs(k-q)/2,+d.apply(this,arguments)),ja=u,da=u;if(1E-12<I){var na=Ln(I/q*Fg(r));r=Ln(I/k*Fg(r));1E-12<(Q-=2*na)?(na*=J?1:-1,L+=na,N-=na):(Q=0,L=N=(l+C)/2);1E-12<(t-=2*r)?(r*=J?1:-1,p+=r,G-=r):(t=0,p=G=(l+C)/2)}l=k*gj(p);C=k*Fg(p);na=q*gj(N);r=q*Fg(N);if(1E-12<u){var A=k*gj(G),w=k*Fg(G),Pb=q*gj(L),z=q*Fg(L);if(n=n<ji){var F=Pb-l;n=z-C;I=na-A;var Fd=
r-w,x=Fd*F-I*n;1E-12>x*x?F=void 0:(x=(I*(C-w)-Fd*(l-A))/x,F=[l+x*F,C+x*n]);n=F}n&&(ja=l-F[0],da=C-F[1],n=A-F[0],I=w-F[1],ja=(ja*n+da*I)/(ok(ja*ja+da*da)*ok(n*n+I*I)),da=1/Fg((1<ja?0:-1>ja?ji:Math.acos(ja))/2),F=ok(F[0]*F[0]+F[1]*F[1]),ja=jq(u,(q-F)/(da-1)),da=jq(u,(k-F)/(da+1)))}1E-12<t?1E-12<da?(p=Vi(Pb,z,l,C,k,da,J),G=Vi(A,w,na,r,k,da,J),h.moveTo(p.cx+p.x01,p.cy+p.y01),da<u?h.arc(p.cx,p.cy,da,od(p.y01,p.x01),od(G.y01,G.x01),!J):(h.arc(p.cx,p.cy,da,od(p.y01,p.x01),od(p.y11,p.x11),!J),h.arc(0,0,k,
od(p.cy+p.y11,p.cx+p.x11),od(G.cy+G.y11,G.cx+G.x11),!J),h.arc(G.cx,G.cy,da,od(G.y11,G.x11),od(G.y01,G.x01),!J))):(h.moveTo(l,C),h.arc(0,0,k,p,G,!J)):h.moveTo(l,C);1E-12<q&&1E-12<Q?1E-12<ja?(p=Vi(na,r,A,w,q,-ja,J),G=Vi(l,C,Pb,z,q,-ja,J),h.lineTo(p.cx+p.x01,p.cy+p.y01),ja<u?h.arc(p.cx,p.cy,ja,od(p.y01,p.x01),od(G.y01,G.x01),!J):(h.arc(p.cx,p.cy,ja,od(p.y01,p.x01),od(p.y11,p.x11),!J),h.arc(0,0,q,od(p.cy+p.y11,p.cx+p.x11),od(G.cy+G.y11,G.cx+G.x11),J),h.arc(G.cx,G.cy,ja,od(G.y11,G.x11),od(G.y01,G.x01),
!J))):h.arc(0,0,q,N,L,J):h.lineTo(na,r)}else h.moveTo(0,0);h.closePath();if(a)return h=null,a+""||null}var b=Bp,c=Nn,d=ua(0),e=null,f=Ql,g=Cp,m=Dp,h=null;a.centroid=function(){var a=(+b.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+f.apply(this,arguments)+ +g.apply(this,arguments))/2-ji/2;return[gj(d)*a,Fg(d)*a]};a.innerRadius=function(c){return arguments.length?(b="function"===typeof c?c:ua(+c),a):b};a.outerRadius=function(b){return arguments.length?(c="function"===typeof b?b:ua(+b),a):
c};a.cornerRadius=function(b){return arguments.length?(d="function"===typeof b?b:ua(+b),a):d};a.padRadius=function(b){return arguments.length?(e=null==b?null:"function"===typeof b?b:ua(+b),a):e};a.startAngle=function(b){return arguments.length?(f="function"===typeof b?b:ua(+b),a):f};a.endAngle=function(b){return arguments.length?(g="function"===typeof b?b:ua(+b),a):g};a.padAngle=function(b){return arguments.length?(m="function"===typeof b?b:ua(+b),a):m};a.context=function(b){return arguments.length?
(h=null==b?null:b,a):h};return a};e.area=On;e.line=Tl;e.pie=function(){function a(a){var m,h=a.length;var q=0;var k=Array(h),l=Array(h),C=+e.apply(this,arguments);var n=Math.min(ki,Math.max(-ki,f.apply(this,arguments)-C));var J=Math.min(Math.abs(n)/h,g.apply(this,arguments)),L=J*(0>n?-1:1),p;for(m=0;m<h;++m)0<(p=l[k[m]=m]=+b(a[m],m,a))&&(q+=p);null!=c?k.sort(function(a,b){return c(l[a],l[b])}):null!=d&&k.sort(function(b,c){return d(a[b],a[c])});m=0;for(n=q?(n-h*L)/q:0;m<h;++m,C=G){q=k[m];p=l[q];var G=
C+(0<p?p*n:0)+L;l[q]={data:a[q],index:m,value:p,startAngle:C,endAngle:G,padAngle:J}}return l}var b=Fp,c=Ep,d=null,e=ua(0),f=ua(ki),g=ua(0);a.value=function(c){return arguments.length?(b="function"===typeof c?c:ua(+c),a):b};a.sortValues=function(b){return arguments.length?(c=b,d=null,a):c};a.sort=function(b){return arguments.length?(d=b,c=null,a):d};a.startAngle=function(b){return arguments.length?(e="function"===typeof b?b:ua(+b),a):e};a.endAngle=function(b){return arguments.length?(f="function"===
typeof b?b:ua(+b),a):f};a.padAngle=function(b){return arguments.length?(g="function"===typeof b?b:ua(+b),a):g};return a};e.areaRadial=Vl;e.radialArea=Vl;e.lineRadial=Ul;e.radialLine=Ul;e.pointRadial=di;e.linkHorizontal=function(){return pk(ei)};e.linkVertical=function(){return pk(Ip)};e.linkRadial=function(){var a=pk(Qn);a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;return a};e.symbol=function(){function a(){var a;d||(d=a=Sd());b.apply(this,arguments).draw(d,+c.apply(this,arguments));if(a)return d=
null,a+""||null}var b=ua(kq),c=ua(64),d=null;a.type=function(c){return arguments.length?(b="function"===typeof c?c:ua(c),a):b};a.size=function(b){return arguments.length?(c="function"===typeof b?b:ua(+b),a):c};a.context=function(b){return arguments.length?(d=null==b?null:b,a):d};return a};e.symbols=Wu;e.symbolCircle=kq;e.symbolCross=cs;e.symbolDiamond=es;e.symbolSquare=hs;e.symbolStar=gs;e.symbolTriangle=is;e.symbolWye=js;e.curveBasisClosed=function(a){return new Rn(a)};e.curveBasisOpen=function(a){return new jh(a)};
e.curveBasis=function(a){return new fi(a)};e.curveBundle=Xu;e.curveCardinalClosed=Zu;e.curveCardinalOpen=$u;e.curveCardinal=Yu;e.curveCatmullRomClosed=bv;e.curveCatmullRomOpen=cv;e.curveCatmullRom=av;e.curveLinearClosed=function(a){return new sk(a)};e.curveLinear=Xi;e.curveMonotoneX=function(a){return new tk(a)};e.curveMonotoneY=function(a){return new Vn(a)};e.curveNatural=function(a){return new uk(a)};e.curveStep=function(a){return new $i(a,.5)};e.curveStepAfter=function(a){return new $i(a,1)};e.curveStepBefore=
function(a){return new $i(a,0)};e.stack=function(){function a(a){var f=b.apply(this,arguments),g,m=a.length,h=f.length,q=Array(h);for(g=0;g<h;++g){for(var k=f[g],l=q[g]=Array(m),C=0,n;C<m;++C)l[C]=n=[0,+e(a[C],k,C,a)],n.data=a[C];l.key=k}g=0;for(f=c(q);g<h;++g)q[f[g]].index=g;d(q,f);return q}var b=ua([]),c=jf,d=zg,e=Xn;a.keys=function(c){return arguments.length?(b="function"===typeof c?c:ua(Hp.call(c)),a):b};a.value=function(b){return arguments.length?(e="function"===typeof b?b:ua(+b),a):e};a.order=
function(b){return arguments.length?(c=null==b?jf:"function"===typeof b?b:ua(Hp.call(b)),a):c};a.offset=function(b){return arguments.length?(d=null==b?zg:b,a):d};return a};e.stackOffsetExpand=function(a,b){if(0<(d=a.length)){for(var c,d,e=0,f=a[0].length,g;e<f;++e){for(g=c=0;c<d;++c)g+=a[c][e][1]||0;if(g)for(c=0;c<d;++c)a[c][e][1]/=g}zg(a,b)}};e.stackOffsetDiverging=function(a,b){if(1<(h=a.length))for(var c,d=0,e,f,g,m,h,q=a[b[0]].length;d<q;++d)for(c=g=m=0;c<h;++c)0<=(f=(e=a[b[c]][d])[1]-e[0])?(e[0]=
g,e[1]=g+=f):0>f?(e[1]=m,e[0]=m+=f):e[0]=g};e.stackOffsetNone=zg;e.stackOffsetSilhouette=function(a,b){if(0<(e=a.length)){for(var c=0,d=a[b[0]],e,f=d.length;c<f;++c){for(var g=0,m=0;g<e;++g)m+=a[g][c][1]||0;d[c][1]+=d[c][0]=-m/2}zg(a,b)}};e.stackOffsetWiggle=function(a,b){if(0<(g=a.length)&&0<(f=(e=a[b[0]]).length)){for(var c=0,d=1,e,f,g;d<f;++d){for(var m=0,h=0,q=0;m<g;++m){var k=a[b[m]],l=k[d][1]||0;k=(l-(k[d-1][1]||0))/2;for(var C=0;C<m;++C){var n=a[b[C]];k+=(n[d][1]||0)-(n[d-1][1]||0)}h+=l;q+=
k*l}e[d-1][1]+=e[d-1][0]=c;h&&(c-=q/h)}e[d-1][1]+=e[d-1][0]=c;zg(a,b)}};e.stackOrderAppearance=am;e.stackOrderAscending=vk;e.stackOrderDescending=function(a){return vk(a).reverse()};e.stackOrderInsideOut=function(a){var b=a.length,c=a.map(bm),d=am(a),e=0,f=0,g=[],m=[];for(a=0;a<b;++a){var h=d[a];e<f?(e+=c[h],g.push(h)):(f+=c[h],m.push(h))}return m.reverse().concat(g)};e.stackOrderNone=jf;e.stackOrderReverse=function(a){return jf(a).reverse()};e.timeInterval=Hb;e.timeMillisecond=fj;e.timeMilliseconds=
pr;e.utcMillisecond=fj;e.utcMilliseconds=pr;e.timeSecond=km;e.timeSeconds=qr;e.utcSecond=km;e.utcSeconds=qr;e.timeMinute=dq;e.timeMinutes=Ct;e.timeHour=eq;e.timeHours=Dt;e.timeDay=yl;e.timeDays=Et;e.timeWeek=Hl;e.timeWeeks=vr;e.timeSunday=Hl;e.timeSundays=vr;e.timeMonday=xl;e.timeMondays=Ft;e.timeTuesday=rr;e.timeTuesdays=Gt;e.timeWednesday=sr;e.timeWednesdays=Ht;e.timeThursday=Il;e.timeThursdays=It;e.timeFriday=tr;e.timeFridays=Jt;e.timeSaturday=ur;e.timeSaturdays=Kt;e.timeMonth=fq;e.timeMonths=
Lt;e.timeYear=hh;e.timeYears=Mt;e.utcMinute=gq;e.utcMinutes=Nt;e.utcHour=hq;e.utcHours=Ot;e.utcDay=wl;e.utcDays=Pt;e.utcWeek=Jl;e.utcWeeks=Ar;e.utcSunday=Jl;e.utcSundays=Ar;e.utcMonday=vl;e.utcMondays=Qt;e.utcTuesday=wr;e.utcTuesdays=Rt;e.utcWednesday=xr;e.utcWednesdays=St;e.utcThursday=Kl;e.utcThursdays=Tt;e.utcFriday=yr;e.utcFridays=Ut;e.utcSaturday=zr;e.utcSaturdays=Vt;e.utcMonth=iq;e.utcMonths=Wt;e.utcYear=ih;e.utcYears=Xt;e.timeFormatDefaultLocale=Fn;e.timeFormatLocale=Pf;e.isoFormat=Yt;e.isoParse=
Zt;e.now=$b;e.timer=bd;e.timerFlush=cd;e.timeout=He;e.interval=function(a,b,c){var d=new Qc,e=b;if(null==b)return d.restart(a,b,c),d;b=+b;c=null==c?$b():+c;d.restart(function Ls(f){f+=e;d.restart(Ls,e+=b,c);a(f)},b,c);return d};e.transition=uh;e.active=function(a,b){var c=a.__transition,d,e;if(c)for(e in b=null==b?null:b+"",c)if(1<(d=c[e]).state&&d.name===b)return new Mc([[a]],jt,b,+e);return null};e.interrupt=rc;e.voronoi=function(){function a(a){return new bj(a.map(function(d,e){var f=[Math.round(b(d,
e,a)/ob)*ob,Math.round(c(d,e,a)/ob)*ob];f.index=e;f.data=d;return f}),d)}var b=$n,c=cm,d=null;a.polygons=function(b){return a(b).polygons()};a.links=function(b){return a(b).links()};a.triangles=function(b){return a(b).triangles()};a.x=function(c){return arguments.length?(b="function"===typeof c?c:Zn(+c),a):b};a.y=function(b){return arguments.length?(c="function"===typeof b?b:Zn(+b),a):c};a.extent=function(b){return arguments.length?(d=null==b?null:[[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]],a):d&&[[d[0][0],
d[0][1]],[d[1][0],d[1][1]]]};a.size=function(b){return arguments.length?(d=null==b?null:[[0,0],[+b[0],+b[1]]],a):d&&[d[1][0]-d[0][0],d[1][1]-d[0][1]]};return a};e.zoom=function(){function a(a){a.property("__zoom",ho).on("wheel.zoom",h).on("mousedown.zoom",q).on("dblclick.zoom",k).filter(N).on("touchstart.zoom",l).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",n).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(a,b){b=Math.max(Q[0],Math.min(Q[1],
b));return b===a.k?a:new Sf(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=b[1]-c[1]*a.k;return d===a.x&&b===a.y?a:new Sf(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function f(a,b,c){a.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=g(this,a),f=L.apply(this,a),m=c||d(f),h=Math.max(f[1][0]-f[0][0],f[1][1]-f[0][1]);f=this.__zoom;var q="function"===
typeof b?b.apply(this,a):b,k=I(f.invert(m).concat(h/f.k),q.invert(m).concat(h/q.k));return function(a){if(1===a)a=q;else{a=k(a);var b=h/a[2];a=new Sf(b,m[0]-a[0]*b,m[1]-a[1]*b)}e.zoom(null,a)}})}function g(a,b){for(var c=0,d=u.length,e;c<d;++c)if((e=u[c]).that===a)return e;return new m(a,b)}function m(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=L.apply(a,b)}function h(){if(J.apply(this,arguments)){var a=g(this,arguments),d=this.__zoom,e=Math.max(Q[0],Math.min(Q[1],d.k*Math.pow(2,
G.apply(this,arguments)))),f=hc(this);if(a.wheel){if(a.mouse[0][0]!==f[0]||a.mouse[0][1]!==f[1])a.mouse[1]=d.invert(a.mouse[0]=f);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[f,d.invert(f)];rc(this);a.start()}dj();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",p(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,t))}}function q(){if(!na&&J.apply(this,arguments)){var a=g(this,arguments),b=Fb(e.event.view).on("mousemove.zoom",function(){dj();if(!a.moved){var b=e.event.clientX-
f,d=e.event.clientY-m;a.moved=b*b+d*d>A}a.zoom("mouse",p(c(a.that.__zoom,a.mouse[0]=hc(a.that),a.mouse[1]),a.extent,t))},!0).on("mouseup.zoom",function(){b.on("mousemove.zoom mouseup.zoom",null);wc(e.event.view,a.moved);dj();a.end()},!0),d=hc(this),f=e.event.clientX,m=e.event.clientY;Zc(e.event.view);e.event.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];rc(this);a.start()}}function k(){if(J.apply(this,arguments)){var d=this.__zoom,g=hc(this),m=d.invert(g);d=p(c(b(d,d.k*(e.event.shiftKey?
.5:2)),g,m),L.apply(this,arguments),t);dj();0<r?Fb(this).transition().duration(r).call(f,d,g):Fb(this).call(a.transform,d)}}function l(){if(J.apply(this,arguments)){var a=g(this,arguments),b=e.event.changedTouches,c=b.length,d;e.event.stopImmediatePropagation();for(d=0;d<c;++d){var f=b[d];var m=K(this,b,f.identifier);m=[m,this.__zoom.invert(m),f.identifier];if(a.touch0)a.touch1||(a.touch1=m);else{a.touch0=m;var h=!0}}if(da&&(da=clearTimeout(da),!a.touch1)){a.end();(m=Fb(this).on("dblclick.zoom"))&&
m.apply(this,arguments);return}h&&(da=setTimeout(function(){da=null},500),rc(this),a.start())}}function C(){var a=g(this,arguments),d=e.event.changedTouches,f=d.length,m;dj();da&&(da=clearTimeout(da));for(m=0;m<f;++m){var h=d[m];var q=K(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=q:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=q)}h=a.that.__zoom;if(a.touch1){q=a.touch0[0];d=a.touch0[1];m=a.touch1[0];f=a.touch1[1];var k=(k=m[0]-q[0])*k+(k=m[1]-q[1])*k;var l=(l=f[0]-d[0])*
l+(l=f[1]-d[1])*l;h=b(h,Math.sqrt(k/l));q=[(q[0]+m[0])/2,(q[1]+m[1])/2];k=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else if(a.touch0)q=a.touch0[0],k=a.touch0[1];else return;a.zoom("touch",p(c(h,q,k),a.extent,t))}function n(){var a=g(this,arguments),b=e.event.changedTouches,c=b.length,d;e.event.stopImmediatePropagation();na&&clearTimeout(na);na=setTimeout(function(){na=null},500);for(d=0;d<c;++d){var f=b[d];a.touch0&&a.touch0[2]===f.identifier?delete a.touch0:a.touch1&&a.touch1[2]===f.identifier&&delete a.touch1}a.touch1&&
!a.touch0&&(a.touch0=a.touch1,delete a.touch1);a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var J=Rp,L=zk,p=io,G=Sp,N=Ak,Q=[0,Infinity],t=[[-Infinity,-Infinity],[Infinity,Infinity]],r=250,I=Pg,u=[],ja=M("start","zoom","end"),da,na,A=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",ho);a!==c?f(a,b):c.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,
function(){var a=this.__zoom.k,b="function"===typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=L.apply(this,arguments),e=this.__zoom,g=d(a),m=e.invert(g),h="function"===typeof f?f.apply(this,arguments):f;return p(c(b(e,h),g,m),a,t)})};a.translateBy=function(b,c,d){a.transform(b,function(){return p(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),L.apply(this,arguments),t)})};
a.translateTo=function(b,c,e){a.transform(b,function(){var a=L.apply(this,arguments),b=this.__zoom,f=d(a);return p(go.translate(f[0],f[1]).scale(b.k).translate("function"===typeof c?-c.apply(this,arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,t)})};m.prototype={start:function(){1===++this.active&&(this.index=u.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=
b.invert(this.touch0[0]));this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&(u.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(b){vc(new Qp(a,b,this.that.__zoom),ja.apply,ja,[b,this.that,this.args])}};a.wheelDelta=function(b){return arguments.length?(G="function"===typeof b?b:cj(+b),a):G};a.filter=function(b){return arguments.length?(J="function"===typeof b?b:cj(!!b),
a):J};a.touchable=function(b){return arguments.length?(N="function"===typeof b?b:cj(!!b),a):N};a.extent=function(b){return arguments.length?(L="function"===typeof b?b:cj([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):L};a.scaleExtent=function(b){return arguments.length?(Q[0]=+b[0],Q[1]=+b[1],a):[Q[0],Q[1]]};a.translateExtent=function(b){return arguments.length?(t[0][0]=+b[0][0],t[1][0]=+b[1][0],t[0][1]=+b[0][1],t[1][1]=+b[1][1],a):[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]};a.constrain=function(b){return arguments.length?
(p=b,a):p};a.duration=function(b){return arguments.length?(r=+b,a):r};a.interpolate=function(b){return arguments.length?(I=b,a):I};a.on=function(){var b=ja.on.apply(ja,arguments);return b===ja?a:b};a.clickDistance=function(b){return arguments.length?(A=(b=+b)*b,a):Math.sqrt(A)};return a};e.zoomTransform=fm;e.zoomIdentity=go;Object.defineProperty(e,"__esModule",{value:!0})});(function(e,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):(e=e||self,e.c3=f())})(this,function(){function e(a){e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return e(a)}function f(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):
a[b]=c;return a}function c(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function b(a){this.d3=window.d3?window.d3:"undefined"!==typeof require?require("d3"):void 0;this.api=a;this.config=this.getDefaultConfig();this.data={};this.cache={};this.axes=
{}}function a(c){this.internal=new b(this);this.internal.loadConfig(c);this.internal.beforeInit(c);this.internal.init();this.internal.afterInit(c);(function M(a,b,c){Object.keys(a).forEach(function(d){b[d]=a[d].bind(c);0<Object.keys(a[d]).length&&M(a[d],b[d],c)})})(a.prototype,this,this)}function h(a,b){this.component=a;this.params=b||{};this.d3=a.d3;this.scale=this.d3.scaleLinear();this.range;this.orient="bottom";this.innerTickSize=6;this.outerTickSize=this.params.withOuterTick?6:0;this.tickPadding=
3;this.tickValues=null;this.tickFormat;this.tickArguments;this.tickOffset=0;this.tickCulling=!0;this.tickCentered;this.tickTextCharSize;this.tickTextRotate=this.params.tickTextRotate;this.tickLength;this.axis=this.generateAxis()}function d(a){return 1===a/Math.pow(10,Math.ceil(Math.log(a)/Math.LN10-1E-12))}var g=function(a){return a[1]-a[0]},k=function(a,b,c){return r(a[b])?a[b]:c},l=function(a){var b=n(a);a=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:a[0].x,y:Math.min(a[0].y,a[1].y),
width:b.width,height:b.height}},n=function(a){try{return a.getBBox()}catch(m){return{x:0,y:0,width:0,height:0}}},p=function(a,b){var c=!1;Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)});return c},r=function(a){return"undefined"!==typeof a},w=function(a){return"undefined"===typeof a||null===a||A(a)&&0===a.length||"object"===e(a)&&0===Object.keys(a).length},u=function(a){return"function"===typeof a},A=function(a){return"string"===typeof a},t=function(a){return"undefined"===typeof a},z=function(a){return a||
0===a},B=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},D=function(a){var b;return Array.isArray(a)?(b=[]).concat.apply(b,c(a)):[]};h.prototype.axisX=function(a,b,c){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+c)+", 0)"})};h.prototype.axisY=function(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})};h.prototype.scaleExtent=function(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]};h.prototype.generateTicks=
function(a){var b=[];if(a.ticks)return a.ticks.apply(a,this.tickArguments);var c=a.domain();for(a=Math.ceil(c[0]);a<c[1];a++)b.push(a);0<b.length&&0<b[0]&&b.unshift(b[0]-(b[1]-b[0]));return b};h.prototype.copyScale=function(){var a=this.scale.copy();if(this.params.isCategory){var b=this.scale.domain();a.domain([b[0],b[1]-1])}return a};h.prototype.textFormatted=function(a){a=this.tickFormat?this.tickFormat(a):a;return"undefined"!==typeof a?a:""};h.prototype.updateRange=function(){return this.range=
this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range())};h.prototype.updateTickTextCharSize=function(a){var b=this;if(b.tickTextCharSize)return b.tickTextCharSize;var c={h:11.5,w:5.5};a.select("text").text(function(a){return b.textFormatted(a)}).each(function(a){var d=n(this),e=b.textFormatted(a);a=d.height;d=e?d.width/e.length:void 0;a&&d&&(c.h=a,c.w=d)}).text("");return b.tickTextCharSize=c};h.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient};
h.prototype.tspanData=function(a,b,c){var d=this.params.tickMultiline?this.splitTickText(a,c):[].concat(this.textFormatted(a));this.params.tickMultiline&&0<this.params.tickMultilineMax&&(d=this.ellipsify(d,this.params.tickMultilineMax));return d.map(function(a){return{index:b,splitted:a,length:d.length}})};h.prototype.splitTickText=function(a,b){function c(a,b){g=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(g=h),f=b.substr(0,h+1),m=d.tickTextCharSize.w*f.length,e<m)return c(a.concat(b.substr(0,
g?g:h)),b.slice(g?g+1:h));return a.concat(b)}var d=this;a=d.textFormatted(a);var e=d.params.tickWidth,f,g,m;if("[object Array]"===Object.prototype.toString.call(a))return a;if(!e||0>=e)e=d.isVertical()?95:d.params.isCategory?Math.ceil(b(1)-b(0))-12:110;return c([],a+"")};h.prototype.ellipsify=function(a,b){if(a.length<=b)return a;a=a.slice(0,b);var c=3;for(--b;0<=b;b--){var d=a[b].length;a[b]=a[b].substr(0,d-c).padEnd(d,".");c-=d;if(0>=c)break}return a};h.prototype.updateTickLength=function(){this.tickLength=
Math.max(this.innerTickSize,0)+this.tickPadding};h.prototype.lineY2=function(a){a=this.scale(a)+(this.tickCentered?0:this.tickOffset);return this.range[0]<a&&a<this.range[1]?this.innerTickSize:0};h.prototype.textY=function(){var a=this.tickTextRotate;return a?11.5-a/15*2.5*(0<a?1:-1):this.tickLength};h.prototype.textTransform=function(){var a=this.tickTextRotate;return a?"rotate("+a+")":""};h.prototype.textTextAnchor=function(){var a=this.tickTextRotate;return a?0<a?"start":"end":"middle"};h.prototype.tspanDx=
function(){var a=this.tickTextRotate;return a?8*Math.sin(a/180*Math.PI):0};h.prototype.tspanDy=function(a,b){var c=this.tickTextCharSize.h;0===b&&(c=this.isVertical()?-(this.tickTextCharSize.h/2*(a.length-1)-3):".71em");return c};h.prototype.generateAxis=function(){function a(e,f){var g;e.each(function(){var e=a.g=c.select(this),m=this.__chart__||b.scale,h=this.__chart__=b.copyScale(),q=b.tickValues?b.tickValues:b.generateTicks(h),k=e.selectAll(".tick").data(q,h);q=k.enter().insert("g",".domain").attr("class",
"tick").style("opacity",1E-6);var l=k.exit().remove();k=k.merge(q);if(d.isCategory){b.tickOffset=Math.ceil((h(1)-h(0))/2);var n=b.tickCentered?0:b.tickOffset;var p=b.tickCentered?b.tickOffset:0}else b.tickOffset=n=0;b.updateRange();b.updateTickLength();b.updateTickTextCharSize(e.select(".tick"));var G=k.select("line").merge(q.append("line")),t=k.select("text").merge(q.append("text")),r=k.selectAll("text").selectAll("tspan").data(function(a,c){return b.tspanData(a,c,h)}),I=r.enter().append("tspan").merge(r).text(function(a){return a.splitted});
r.exit().remove();e=e.selectAll(".domain").data([0]);e=e.enter().append("path").merge(e).attr("class","domain");switch(b.orient){case "bottom":var u=b.axisX;G.attr("x1",n).attr("x2",n).attr("y2",function(a,c){return b.lineY2(a,c)});t.attr("x",0).attr("y",function(a,c){return b.textY(a,c)}).attr("transform",function(a,c){return b.textTransform(a,c)}).style("text-anchor",function(a,c){return b.textTextAnchor(a,c)});I.attr("x",0).attr("dy",function(a,c){return b.tspanDy(a,c)}).attr("dx",function(a,c){return b.tspanDx(a,
c)});e.attr("d","M"+b.range[0]+","+b.outerTickSize+"V0H"+b.range[1]+"V"+b.outerTickSize);break;case "top":u=b.axisX;G.attr("x1",n).attr("x2",n).attr("y2",function(a,c){return-1*b.lineY2(a,c)});t.attr("x",0).attr("y",function(a,c){return-1*b.textY(a,c)-(d.isCategory?2:b.tickLength-2)}).attr("transform",function(a,c){return b.textTransform(a,c)}).style("text-anchor",function(a,c){return b.textTextAnchor(a,c)});I.attr("x",0).attr("dy",function(a,c){return b.tspanDy(a,c)}).attr("dx",function(a,c){return b.tspanDx(a,
c)});e.attr("d","M"+b.range[0]+","+-b.outerTickSize+"V0H"+b.range[1]+"V"+-b.outerTickSize);break;case "left":u=b.axisY;G.attr("x2",-b.innerTickSize).attr("y1",p).attr("y2",p);t.attr("x",-b.tickLength).attr("y",b.tickOffset).style("text-anchor","end");I.attr("x",-b.tickLength).attr("dy",function(a,c){return b.tspanDy(a,c)});e.attr("d","M"+-b.outerTickSize+","+b.range[0]+"H0V"+b.range[1]+"H"+-b.outerTickSize);break;case "right":u=b.axisY,G.attr("x2",b.innerTickSize).attr("y1",p).attr("y2",p),t.attr("x",
b.tickLength).attr("y",b.tickOffset).style("text-anchor","start"),I.attr("x",b.tickLength).attr("dy",function(a,c){return b.tspanDy(a,c)}),e.attr("d","M"+b.outerTickSize+","+b.range[0]+"H0V"+b.range[1]+"H"+b.outerTickSize)}if(h.rangeBand){var A=h,w=A.rangeBand()/2;m=h=function(a){return A(a)+w}}else m.rangeBand?m=h:l.call(u,h,b.tickOffset);q.call(u,m,b.tickOffset);g=(f?k.transition(f):k).style("opacity",1).call(u,h,b.tickOffset)});return g}var b=this,c=b.d3,d=b.params;a.scale=function(c){if(!arguments.length)return b.scale;
b.scale=c;return a};a.orient=function(c){if(!arguments.length)return b.orient;b.orient=c in{top:1,right:1,bottom:1,left:1}?c+"":"bottom";return a};a.tickFormat=function(c){if(!arguments.length)return b.tickFormat;b.tickFormat=c;return a};a.tickCentered=function(c){if(!arguments.length)return b.tickCentered;b.tickCentered=c;return a};a.tickOffset=function(){return b.tickOffset};a.tickInterval=function(){if(d.isCategory)var c=2*b.tickOffset;else c=a.g.select("path.domain").node().getTotalLength()-2*
b.outerTickSize,c/=a.g.selectAll("line").size();return Infinity===c?0:c};a.ticks=function(){if(!arguments.length)return b.tickArguments;b.tickArguments=arguments;return a};a.tickCulling=function(c){if(!arguments.length)return b.tickCulling;b.tickCulling=c;return a};a.tickValues=function(c){if("function"===typeof c)b.tickValues=function(){return c(b.scale.domain())};else{if(!arguments.length)return b.tickValues;b.tickValues=c}return a};return a};var y={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",
chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",
eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",
arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",
stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",
dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},E=function q(a){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");this.owner=a;this.d3=a.d3;this.internal=h};E.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",y.axis+" "+y.axisX).attr("clip-path",b.axis_x_inner?"":a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden");a.axes.x.append("text").attr("class",
y.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));a.axes.y=c.append("g").attr("class",y.axis+" "+y.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden");a.axes.y.append("text").attr("class",y.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));a.axes.y2=c.append("g").attr("class",
y.axis+" "+y.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden");a.axes.y2.append("text").attr("class",y.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};E.prototype.getXAxis=function(a,b,c,d,e,f,g){var m=this.owner,h=m.config;e={isCategory:m.isCategorized(),withOuterTick:e,tickMultiline:h.axis_x_tick_multiline,tickMultilineMax:h.axis_x_tick_multiline?Number(h.axis_x_tick_multilineMax):
0,tickWidth:h.axis_x_tick_width,tickTextRotate:g?0:h.axis_x_tick_rotate,withoutTransition:f};a=(new this.internal(this,e)).axis.scale(a).orient(b);m.isTimeSeries()&&d&&"function"!==typeof d&&(d=d.map(function(a){return m.parseDate(a)}));a.tickFormat(c).tickValues(d);m.isCategorized()&&(a.tickCentered(h.axis_x_tick_centered),w(h.axis_x_tick_culling)&&(h.axis_x_tick_culling=!1));return a};E.prototype.updateXAxisTickValues=function(a,b){var c=this.owner,d=c.config;if(d.axis_x_tick_fit||d.axis_x_tick_count)var e=
this.generateTickValues(c.mapTargetsToUniqueXs(a),d.axis_x_tick_count,c.isTimeSeries());b?b.tickValues(e):(c.xAxis.tickValues(e),c.subXAxis.tickValues(e));return e};E.prototype.getYAxis=function(a,b,c,d,e,f,g){var m=this.owner,h=m.config,q=h["axis_".concat(a,"_tick_format")];!q&&m.isAxisNormalized(a)&&(q=function(a){return"".concat(a,"%")});a=(new this.internal(this,{withOuterTick:e,withoutTransition:f,tickTextRotate:g?0:h.axis_y_tick_rotate})).axis.scale(b).orient(c);q&&a.tickFormat(q);m.isTimeSeriesY()?
a.ticks(h.axis_y_tick_time_type,h.axis_y_tick_time_interval):a.tickValues(d);return a};E.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"};E.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return a};b.axis_x_tick_format&&(u(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):
""}));return u(c)?function(b){return c.call(a,b)}:c};E.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0};E.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};E.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};E.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};
E.prototype.getLabelOptionByAxisId=function(a){var b=this.owner.config;if("y"===a)var c=b.axis_y_label;else"y2"===a?c=b.axis_y2_label:"x"===a&&(c=b.axis_x_label);return c};E.prototype.getLabelText=function(a){a=this.getLabelOptionByAxisId(a);return A(a)?a:a?a.text:null};E.prototype.setLabelText=function(a,b){var c=this.owner.config,d=this.getLabelOptionByAxisId(a);A(d)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):d&&(d.text=b)};E.prototype.getLabelPosition=function(a,
b){b=(a=this.getLabelOptionByAxisId(a))&&"object"===e(a)&&a.position?a.position:b;return{isInner:0<=b.indexOf("inner"),isOuter:0<=b.indexOf("outer"),isLeft:0<=b.indexOf("left"),isCenter:0<=b.indexOf("center"),isRight:0<=b.indexOf("right"),isTop:0<=b.indexOf("top"),isMiddle:0<=b.indexOf("middle"),isBottom:0<=b.indexOf("bottom")}};E.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};E.prototype.getYAxisLabelPosition=
function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};E.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};E.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};E.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};E.prototype.textForYAxisLabel=
function(){return this.getLabelText("y")};E.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};E.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0};E.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"};E.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":
b.isBottom?"start":b.isMiddle?"middle":"end"};E.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};E.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};E.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};E.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,
this.getXAxisLabelPosition())};E.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};E.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};E.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-(a.config.axis_x_inner?0:this.getMaxTickWidth("x")):c.isInner?"-0.5em":
a.getHorizontalAxisHeight("x")-10};E.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};E.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};E.prototype.textAnchorForXAxisLabel=
function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};E.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};E.prototype.textAnchorForY2AxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};E.prototype.getMaxTickWidth=function(a,b){var c=this.owner,d=0;if(b&&c.currentMaxTickWidths[a])return c.currentMaxTickWidths[a];
if(c.svg){b=c.filterTargetsToShow(c.data.targets);if("y"===a){var e=c.y.copy().domain(c.getYDomain(b,"y"));e=this.getYAxis(a,e,c.yOrient,c.yAxisTickValues,!1,!0,!0)}else"y2"===a?(e=c.y2.copy().domain(c.getYDomain(b,"y2")),e=this.getYAxis(a,e,c.y2Orient,c.y2AxisTickValues,!1,!0,!0)):(e=c.x.copy().domain(c.getXDomain(b)),e=this.getXAxis(e,c.xOrient,c.xAxisTickFormat,c.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(b,e));var f=c.d3.select("body").append("div").classed("c3",!0);b=f.append("svg").style("visibility",
"hidden").style("position","fixed").style("top",0).style("left",0);b.append("g").call(e).each(function(){c.d3.select(this).selectAll("text").each(function(){var a=n(this);d<a.width&&(d=a.width)});f.remove()})}c.currentMaxTickWidths[a]=0>=d?c.currentMaxTickWidths[a]:d;return c.currentMaxTickWidths[a]};E.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+y.axisX+" ."+y.axisXLabel),d=b.main.select("."+y.axisY+" ."+y.axisYLabel);b=b.main.select("."+y.axisY2+" ."+y.axisY2Label);(a?
c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(a?b.transition():b).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};
E.prototype.getPadding=function(a,b,c,d){var e="number"===typeof a?a:a[b];return z(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c};E.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return a/(c.config.axis_rotated?c.width:c.height)*b};E.prototype.generateTickValues=function(a,b,c){var d=a,e;if(b)if(b=u(b)?b():b,1===b)d=[a[0]];else if(2===b)d=[a[0],a[a.length-1]];else if(2<b){var f=b-2;b=a[0];a=a[a.length-1];var g=(a-b)/(f+1);d=[b];for(e=0;e<f;e++){var m=+b+g*
(e+1);d.push(c?new Date(m):m)}d.push(a)}c||(d=d.sort(function(a,b){return a-b}));return d};E.prototype.generateTransitions=function(a){var b=this.owner.axes;return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}};E.prototype.redraw=function(a,b){var c=this.owner;a=a?c.d3.transition().duration(a):null;c.axes.x.style("opacity",b?0:1).call(c.xAxis,a);c.axes.y.style("opacity",
b?0:1).call(c.yAxis,a);c.axes.y2.style("opacity",b?0:1).call(c.y2Axis,a);c.axes.subx.style("opacity",b?0:1).call(c.subXAxis,a)};var x={version:"0.7.8",chart:{fn:a.prototype,internal:{fn:b.prototype,axis:{fn:E.prototype,internal:{fn:h.prototype}}}},generate:function(b){return new a(b)}};b.prototype.beforeInit=function(){};b.prototype.afterInit=function(){};b.prototype.init=function(){var a=this.config;this.initParams();if(a.data_url)this.convertUrlToData(a.data_url,a.data_mimeType,a.data_headers,a.data_keys,
this.initWithData);else if(a.data_json)this.initWithData(this.convertJsonToData(a.data_json,a.data_keys));else if(a.data_rows)this.initWithData(this.convertRowsToData(a.data_rows));else if(a.data_columns)this.initWithData(this.convertColumnsToData(a.data_columns));else throw Error("url or json or rows or columns is required.");};b.prototype.initParams=function(){var a=this.d3,b=this.config;this.clipId="c3-"+ +new Date+"-clip";this.clipIdForXAxis=this.clipId+"-xaxis";this.clipIdForYAxis=this.clipId+
"-yaxis";this.clipIdForGrid=this.clipId+"-grid";this.clipIdForSubchart=this.clipId+"-subchart";this.clipPath=this.getClipPath(this.clipId);this.clipPathForXAxis=this.getClipPath(this.clipIdForXAxis);this.clipPathForYAxis=this.getClipPath(this.clipIdForYAxis);this.clipPathForGrid=this.getClipPath(this.clipIdForGrid);this.clipPathForSubchart=this.getClipPath(this.clipIdForSubchart);this.dragStart=null;this.transiting=this.mouseover=this.cancelClick=this.flowing=this.dragging=!1;this.color=this.generateColor();
this.levelColor=this.generateLevelColor();this.dataTimeParse=(b.data_xLocaltime?a.timeParse:a.utcParse)(this.config.data_xFormat);this.axisTimeFormat=b.axis_x_localtime?a.timeFormat:a.utcFormat;this.defaultAxisTimeFormat=function(b){return b.getMilliseconds()?a.timeFormat(".%L")(b):b.getSeconds()?a.timeFormat(":%S")(b):b.getMinutes()?a.timeFormat("%I:%M")(b):b.getHours()?a.timeFormat("%I %p")(b):b.getDay()&&1!==b.getDate()||1!==b.getDate()||b.getMonth()?a.timeFormat("%-m/%-d")(b):a.timeFormat("%Y/%-m/%-d")(b)};
this.hiddenTargetIds=[];this.hiddenLegendIds=[];this.focusedTargetIds=[];this.defocusedTargetIds=[];this.xOrient=b.axis_rotated?b.axis_x_inner?"right":"left":b.axis_x_inner?"top":"bottom";this.yOrient=b.axis_rotated?b.axis_y_inner?"top":"bottom":b.axis_y_inner?"right":"left";this.y2Orient=b.axis_rotated?b.axis_y2_inner?"bottom":"top":b.axis_y2_inner?"left":"right";this.subXOrient=b.axis_rotated?"left":"bottom";this.isLegendRight="right"===b.legend_position;this.isLegendInset="inset"===b.legend_position;
this.isLegendTop="top-left"===b.legend_inset_anchor||"top-right"===b.legend_inset_anchor;this.isLegendLeft="top-left"===b.legend_inset_anchor||"bottom-left"===b.legend_inset_anchor;this.legendItemHeight=this.legendItemWidth=this.legendStep=0;this.currentMaxTickWidths={x:0,y:0,y2:0};this.rotated_padding_left=30;this.rotated_padding_right=b.axis_rotated&&!b.axis_x_show?0:30;this.rotated_padding_top=5;this.withoutFadeIn={};this.intervalForObserveInserted=void 0;this.axes.subx=a.selectAll([])};b.prototype.initChartElements=
function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};b.prototype.initWithData=function(a){var b=this,c=b.d3,d=b.config,e=!0;b.axis=new E(b);b.selectChart=d.bindto?"function"===typeof d.bindto.node?d.bindto:c.select(d.bindto):c.selectAll([]);b.selectChart.empty()&&(b.selectChart=c.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),e=!1);b.selectChart.html("").classed("c3",
!0);b.data.xs={};b.data.targets=b.convertDataToTargets(a);d.data_filter&&(b.data.targets=b.data.targets.filter(d.data_filter));d.data_hide&&b.addHiddenTargetIds(!0===d.data_hide?b.mapToIds(b.data.targets):d.data_hide);d.legend_hide&&b.addHiddenLegendIds(!0===d.legend_hide?b.mapToIds(b.data.targets):d.legend_hide);b.isStanfordGraphType()&&b.initStanfordData();b.updateSizes();b.updateScales();b.x.domain(c.extent(b.getXDomain(b.data.targets)));b.y.domain(b.getYDomain(b.data.targets,"y"));b.y2.domain(b.getYDomain(b.data.targets,
"y2"));b.subX.domain(b.x.domain());b.subY.domain(b.y.domain());b.subY2.domain(b.y2.domain());b.orgXDomain=b.x.domain();b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return d.onmouseover.call(b)}).on("mouseleave",function(){return d.onmouseout.call(b)});b.config.svg_classname&&b.svg.attr("class",b.config.svg_classname);a=b.svg.append("defs");b.clipChart=b.appendClip(a,b.clipId);b.clipXAxis=b.appendClip(a,b.clipIdForXAxis);b.clipYAxis=b.appendClip(a,b.clipIdForYAxis);
b.clipGrid=b.appendClip(a,b.clipIdForGrid);b.clipSubchart=b.appendClip(a,b.clipIdForSubchart);b.updateSvgSize();a=b.main=b.svg.append("g").attr("transform",b.getTranslate("main"));b.initPie&&b.initPie();b.initDragZoom&&b.initDragZoom();b.initSubchart&&b.initSubchart();b.initTooltip&&b.initTooltip();b.initLegend&&b.initLegend();b.initTitle&&b.initTitle();b.initZoom&&b.initZoom();b.isStanfordGraphType()&&b.drawColorScale();b.initSubchartBrush&&b.initSubchartBrush();a.append("text").attr("class",y.text+
" "+y.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");b.initRegion();b.initGrid();a.append("g").attr("clip-path",b.clipPath).attr("class",y.chart);d.grid_lines_front&&b.initGridLines();b.initStanfordElements();b.initEventRect();b.initChartElements();b.axis.init();b.updateTargets(b.data.targets);d.axis_x_selection&&b.brush.selectionAsValue(b.getDefaultSelection());e&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,
withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));b.bindResize();b.bindWindowFocus();b.api.element=b.selectChart.node()};b.prototype.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})};b.prototype.updateSizes=function(){var a=this.config,b=this.legend?this.getLegendHeight():0,c=this.legend?this.getLegendWidth():0,d=this.isLegendRight||
this.isLegendInset?0:b,e=this.hasArcType(),f=a.axis_rotated||e?0:this.getHorizontalAxisHeight("x"),g=a.subchart_show&&!e?a.subchart_size_height+f:0;this.currentWidth=this.getCurrentWidth();this.currentHeight=this.getCurrentHeight();this.margin=a.axis_rotated?{top:this.getHorizontalAxisHeight("y2")+this.getCurrentPaddingTop(),right:e?0:this.getCurrentPaddingRight(),bottom:this.getHorizontalAxisHeight("y")+d+this.getCurrentPaddingBottom(),left:g+(e?0:this.getCurrentPaddingLeft())}:{top:4+this.getCurrentPaddingTop(),
right:e?0:this.getCurrentPaddingRight(),bottom:f+g+d+this.getCurrentPaddingBottom(),left:e?0:this.getCurrentPaddingLeft()};this.margin2=a.axis_rotated?{top:this.margin.top,right:NaN,bottom:20+d,left:this.rotated_padding_left}:{top:this.currentHeight-g-d,right:NaN,bottom:f+d,left:this.margin.left};this.margin3={top:0,right:NaN,bottom:0,left:0};this.updateSizeForLegend&&this.updateSizeForLegend(b,c);this.width=this.currentWidth-this.margin.left-this.margin.right;this.height=this.currentHeight-this.margin.top-
this.margin.bottom;0>this.width&&(this.width=0);0>this.height&&(this.height=0);this.width2=a.axis_rotated?this.margin.left-this.rotated_padding_left-this.rotated_padding_right:this.width;this.height2=a.axis_rotated?this.height:this.currentHeight-this.margin2.top-this.margin2.bottom;0>this.width2&&(this.width2=0);0>this.height2&&(this.height2=0);this.arcWidth=this.width-(this.isLegendRight?c+10:0);this.arcHeight=this.height-(this.isLegendRight?0:10);this.hasType("gauge")&&!a.gauge_fullCircle&&(this.arcHeight+=
this.height-this.getGaugeLabelHeight());this.updateRadius&&this.updateRadius();this.isLegendRight&&e&&(this.margin3.left=this.arcWidth/2+1.1*this.radiusExpanded)};b.prototype.updateTargets=function(a){this.updateTargetsForText(a);this.updateTargetsForBar(a);this.updateTargetsForLine(a);this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(a);this.updateTargetsForSubchart&&this.updateTargetsForSubchart(a);this.showTargets()};b.prototype.showTargets=function(){var a=this;a.svg.selectAll("."+
y.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)};b.prototype.redraw=function(a,b){var c=this,d=c.main,e=c.d3,f=c.config,g=c.getShapeIndices(c.isAreaType),h=c.getShapeIndices(c.isBarType),m=c.getShapeIndices(c.isLineType),q=c.hasArcType(),l,n=c.filterTargetsToShow(c.data.targets),p,t,r=c.xv.bind(c);a=a||{};var u=k(a,"withY",!0);var A=k(a,"withSubchart",!0);var w=k(a,"withTransition",!0);var z=k(a,"withTransform",!1);
var x=k(a,"withUpdateXDomain",!1);var B=k(a,"withUpdateOrgXDomain",!1);var D=k(a,"withTrimXDomain",!0);var E=k(a,"withUpdateXAxis",x);var H=k(a,"withLegend",!1);var Na=k(a,"withEventRect",!0);var Ra=k(a,"withDimension",!0);var Ca=k(a,"withTransitionForExit",w);var R=k(a,"withTransitionForAxis",w);var Da=w?f.transition_duration:0;Ca=Ca?Da:0;R=R?Da:0;b=b||c.axis.generateTransitions(R);H&&f.legend_show?c.updateLegend(c.mapToIds(c.data.targets),a,b):Ra&&c.updateDimension(!0);c.isCategorized()&&0===n.length&&
c.x.domain([0,c.axes.x.selectAll(".tick").size()]);n.length?(c.updateXDomain(n,x,B,D),f.axis_x_tick_values||(p=c.axis.updateXAxisTickValues(n))):(c.xAxis.tickValues([]),c.subXAxis.tickValues([]));f.zoom_rescale&&!a.flow&&(t=c.x.orgDomain());c.y.domain(c.getYDomain(n,"y",t));c.y2.domain(c.getYDomain(n,"y2",t));!f.axis_y_tick_values&&f.axis_y_tick_count&&c.yAxis.tickValues(c.axis.generateTickValues(c.y.domain(),f.axis_y_tick_count));!f.axis_y2_tick_values&&f.axis_y2_tick_count&&c.y2Axis.tickValues(c.axis.generateTickValues(c.y2.domain(),
f.axis_y2_tick_count));c.axis.redraw(R,q);c.axis.updateLabels(w);if((x||E)&&n.length)if(f.axis_x_tick_culling&&p){for(w=1;w<p.length;w++)if(p.length/w<f.axis_x_tick_culling_max){var xb=w;break}c.svg.selectAll("."+y.axisX+" .tick text").each(function(a){a=p.indexOf(a);0<=a&&e.select(this).style("display",a%xb?"none":"block")})}else c.svg.selectAll("."+y.axisX+" .tick text").style("display","block");w=c.generateDrawArea?c.generateDrawArea(g,!1):void 0;x=c.generateDrawBar?c.generateDrawBar(h):void 0;
B=c.generateDrawLine?c.generateDrawLine(m,!1):void 0;D=c.generateXYForText(g,h,m,!0);H=c.generateXYForText(g,h,m,!1);c.updateCircleY();Ra=(c.config.axis_rotated?c.circleY:c.circleX).bind(c);E=(c.config.axis_rotated?c.circleX:c.circleY).bind(c);u&&(c.subY.domain(c.getYDomain(n,"y")),c.subY2.domain(c.getYDomain(n,"y2")));c.updateXgridFocus();d.select("text."+y.text+"."+y.empty).attr("x",c.width/2).attr("y",c.height/2).text(f.data_empty_label_text).transition().style("opacity",n.length?0:1);Na&&c.redrawEventRect();
c.updateGrid(Da);c.updateStanfordElements(Da);c.updateRegion(Da);c.updateBar(Ca);c.updateLine(Ca);c.updateArea(Ca);c.updateCircle(Ra,E);c.hasDataLabel()&&c.updateText(D,H,Ca);c.redrawTitle&&c.redrawTitle();c.redrawArc&&c.redrawArc(Da,Ca,z);c.redrawSubchart&&c.redrawSubchart(A,b,Da,Ca,g,h,m);c.isStanfordGraphType()&&c.drawColorScale();d.selectAll("."+y.selectedCircles).filter(c.isBarType.bind(c)).selectAll("circle").remove();a.flow&&(l=c.generateFlow({targets:n,flow:a.flow,duration:a.flow.duration,
drawBar:x,drawLine:B,drawArea:w,cx:Ra,cy:E,xv:r,xForText:D,yForText:H}));if(Da&&c.isTabVisible()){b=e.transition().duration(Da);var Ba=[];[c.redrawBar(x,!0,b),c.redrawLine(B,!0,b),c.redrawArea(w,!0,b),c.redrawCircle(Ra,E,!0,b),c.redrawText(D,H,a.flow,!0,b),c.redrawRegion(!0,b),c.redrawGrid(!0,b)].forEach(function(a){a.forEach(function(a){Ba.push(a)})});var Ya=c.generateWait();Ba.forEach(function(a){Ya.add(a)});Ya(function(){l&&l();f.onrendered&&f.onrendered.call(c)})}else c.redrawBar(x),c.redrawLine(B),
c.redrawArea(w),c.redrawCircle(Ra,E),c.redrawText(D,H,a.flow),c.redrawRegion(),c.redrawGrid(),l&&l(),f.onrendered&&f.onrendered.call(c);c.mapToIds(c.data.targets).forEach(function(a){c.withoutFadeIn[a]=!0})};b.prototype.updateAndRedraw=function(a){var b=this.config;a=a||{};a.withTransition=k(a,"withTransition",!0);a.withTransform=k(a,"withTransform",!1);a.withLegend=k(a,"withLegend",!1);a.withUpdateXDomain=k(a,"withUpdateXDomain",!0);a.withUpdateOrgXDomain=k(a,"withUpdateOrgXDomain",!0);a.withTransitionForExit=
!1;a.withTransitionForTransform=k(a,"withTransitionForTransform",a.withTransition);this.updateSizes();if(!a.withLegend||!b.legend_show){var c=this.axis.generateTransitions(a.withTransitionForAxis?b.transition_duration:0);this.updateScales();this.updateSvgSize();this.transformAll(a.withTransitionForTransform,c)}this.redraw(a,c)};b.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};b.prototype.isTimeSeries=function(){return"timeseries"===
this.config.axis_x_type};b.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")};b.prototype.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||!w(a.data_xs))};b.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};b.prototype.getTranslate=function(a){var b=this.config;if("main"===a){var c=Math.ceil(this.margin.left)+.5;var d=Math.ceil(this.margin.top)+.5}else"context"===a?(c=Math.ceil(this.margin2.left)+.5,
d=Math.ceil(this.margin2.top)+.5):"legend"===a?(c=this.margin3.left,d=this.margin3.top):"x"===a?(c=0,d=b.axis_rotated?0:this.height):"y"===a?(c=0,d=b.axis_rotated?this.height:0):"y2"===a?(c=b.axis_rotated?0:this.width,d=b.axis_rotated?1:0):"subx"===a?(c=0,d=b.axis_rotated?0:this.height2):"arc"===a&&(c=this.arcWidth/2,d=this.arcHeight/2-(this.hasType("gauge")?6:0));return"translate("+c+","+d+")"};b.prototype.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0};b.prototype.initialOpacityForCircle=
function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0};b.prototype.opacityForCircle=function(a){var b=(u(this.config.point_show)?this.config.point_show(a):this.config.point_show)||this.isStanfordType(a)?1:0;return z(a.value)?this.isScatterType(a)?.5:b:0};b.prototype.opacityForText=function(){return this.hasDataLabel()?1:0};b.prototype.xx=function(a){return a?this.x(a.x):null};b.prototype.xvCustom=function(a,b){b=b?a[b]:a.value;this.isTimeSeries()?b=this.parseDate(a.value):
this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));return Math.ceil(this.x(b))};b.prototype.yvCustom=function(a,b){return Math.ceil((a.axis&&"y2"===a.axis?this.y2:this.y)(b?a[b]:a.value))};b.prototype.xv=function(a){var b=a.value;this.isTimeSeries()?b=this.parseDate(a.value):this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));return Math.ceil(this.x(b))};b.prototype.yv=function(a){return Math.ceil((a.axis&&
"y2"===a.axis?this.y2:this.y)(a.value))};b.prototype.subxx=function(a){return a?this.subX(a.x):null};b.prototype.transformMain=function(a,b){if(b&&b.axisX)var c=b.axisX;else c=this.main.select("."+y.axisX),a&&(c=c.transition());if(b&&b.axisY)var d=b.axisY;else d=this.main.select("."+y.axisY),a&&(d=d.transition());b&&b.axisY2?b=b.axisY2:(b=this.main.select("."+y.axisY2),a&&(b=b.transition()));(a?this.main.transition():this.main).attr("transform",this.getTranslate("main"));c.attr("transform",this.getTranslate("x"));
d.attr("transform",this.getTranslate("y"));b.attr("transform",this.getTranslate("y2"));this.main.select("."+y.chartArcs).attr("transform",this.getTranslate("arc"))};b.prototype.transformAll=function(a,b){this.transformMain(a,b);this.config.subchart_show&&this.transformContext(a,b);this.legend&&this.transformLegend(a)};b.prototype.updateSvgSize=function(){var a=this.svg.select(".c3-brush .overlay");this.svg.attr("width",this.currentWidth).attr("height",this.currentHeight);this.svg.selectAll(["#"+this.clipId,
"#"+this.clipIdForGrid]).select("rect").attr("width",this.width).attr("height",this.height);this.svg.select("#"+this.clipIdForXAxis).select("rect").attr("x",this.getXAxisClipX.bind(this)).attr("y",this.getXAxisClipY.bind(this)).attr("width",this.getXAxisClipWidth.bind(this)).attr("height",this.getXAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForYAxis).select("rect").attr("x",this.getYAxisClipX.bind(this)).attr("y",this.getYAxisClipY.bind(this)).attr("width",this.getYAxisClipWidth.bind(this)).attr("height",
this.getYAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForSubchart).select("rect").attr("width",this.width).attr("height",a.size()?a.attr("height"):0);this.selectChart.style("max-height",this.currentHeight+"px")};b.prototype.updateDimension=function(a){a||(this.config.axis_rotated?(this.axes.x.call(this.xAxis),this.axes.subx.call(this.subXAxis)):(this.axes.y.call(this.yAxis),this.axes.y2.call(this.y2Axis)));this.updateSizes();this.updateScales();this.updateSvgSize();this.transformAll(!1)};
b.prototype.observeInserted=function(a){var b=this;if("undefined"===typeof MutationObserver)window.console.error("MutationObserver not defined.");else{var c=new MutationObserver(function(d){d.forEach(function(d){"childList"===d.type&&d.previousSibling&&(c.disconnect(),b.intervalForObserveInserted=window.setInterval(function(){a.node().parentNode&&(window.clearInterval(b.intervalForObserveInserted),b.updateDimension(),b.brush&&b.brush.update(),b.config.oninit.call(b),b.redraw({withTransform:!0,withUpdateXDomain:!0,
withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})});c.observe(a.node(),{attributes:!0,childList:!0,characterData:!0})}};b.prototype.bindResize=function(){var a=this,b=a.config;a.resizeFunction=a.generateResize();a.resizeFunction.add(function(){b.onresize.call(a)});b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout);a.resizeTimeout=window.setTimeout(function(){delete a.resizeTimeout;
a.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0});a.brush&&a.brush.update()},100)});a.resizeFunction.add(function(){b.onresized.call(a)});a.resizeIfElementDisplayed=function(){null!=a.api&&a.api.element.offsetParent&&a.resizeFunction()};if(window.attachEvent)window.attachEvent("onresize",a.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",a.resizeIfElementDisplayed,!1);else{var c=
window.onresize;c?c.add&&c.remove||(c=a.generateResize(),c.add(window.onresize)):c=a.generateResize();c.add(a.resizeFunction);window.onresize=function(){a.api.element.offsetParent&&c()}}};b.prototype.bindWindowFocus=function(){var a=this;this.windowFocusHandler||(this.windowFocusHandler=function(){a.redraw()},window.addEventListener("focus",this.windowFocusHandler))};b.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler);delete this.windowFocusHandler};
b.prototype.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];a.add=function(a){b.push(a)};a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}};return a};b.prototype.endall=function(a,b){var c=0;a.each(function(){++c}).on("end",function(){--c||b.apply(this,arguments)})};b.prototype.generateWait=function(){var a=this,b=[],c=function(c){var d=setInterval(function(){if(a.isTabVisible()){var e=0;b.forEach(function(a){if(a.empty())e+=1;else try{a.transition()}catch(za){e+=
1}});e===b.length&&(clearInterval(d),c&&c())}},50)};c.add=function(a){b.push(a)};return c};b.prototype.parseDate=function(a){var b;a instanceof Date?b=a:"string"===typeof a?b=this.dataTimeParse(a):"object"===e(a)?b=new Date(+a):"number"!==typeof a||isNaN(a)||(b=new Date(+a));b&&!isNaN(+b)||window.console.error("Failed to parse x '"+a+"' to Date object");return b};b.prototype.isTabVisible=function(){return!document.hidden};b.prototype.getPathBox=l;b.prototype.CLASS=y;(function(){"SVGPathSeg"in window||
(window.SVGPathSeg=function(a,b,c){this.pathSegType=a;this.pathSegTypeAsLetter=b;this._owningPathSegList=c},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=
8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=
19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},
window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a);this._x=b;this._y=c},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+
" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(a,
b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",a);this._x=b;this._y=c},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},
Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",a);this._x=b;this._y=c},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),
window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(a,b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",a);this._x=b;this._y=c},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+
" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(a,
b,c,d,e,f,g){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a);this._x=b;this._y=c;this._x1=d;this._y1=e;this._x2=f;this._y2=g},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+
" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a);this._x=b;this._y=c;this._x1=d;this._y1=e;this._x2=f;this._y2=g},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=
function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=
a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=
a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,
"Q",a);this._x=b;this._y=c;this._x1=d;this._y1=e},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,
this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=
a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a);this._x=b;this._y=c;this._x1=d;this._y1=e},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=
function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},
enumerable:!0}),window.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",a);this._x=b;this._y=c;this._r1=d;this._r2=e;this._angle=f;this._largeArcFlag=g;this._sweepFlag=h},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+
" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},
set:function(a){this._angle=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){window.SVGPathSeg.call(this,
window.SVGPathSeg.PATHSEG_ARC_REL,"a",a);this._x=b;this._y=c;this._r1=d;this._r2=e;this._angle=f;this._largeArcFlag=g;this._sweepFlag=h},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+
this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),
Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,
"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a);this._x=b},window.SVGPathSegLinetoHorizontalAbs.prototype=
Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},
set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a);this._x=b},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+
" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a);this._y=b},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),
window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},
enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(a,b){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a);this._y=b},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=
function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a);this._x=b;this._y=c;this._x2=d;this._y2=e},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),
window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,
"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,
"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a);this._x=b;this._y=c;this._x2=d;this._y2=e},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},
window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,
b,c){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a);this._x=b;this._y=c},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=
function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){window.SVGPathSeg.call(this,
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a);this._x=b;this._y=c},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,
this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=
function(a,b){return new window.SVGPathSegMovetoAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new window.SVGPathSegMovetoRel(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new window.SVGPathSegLinetoAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new window.SVGPathSegLinetoRel(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,
b,c,d,e,f){return new window.SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new window.SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new window.SVGPathSegCurvetoQuadraticRel(void 0,
a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new window.SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new window.SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new window.SVGPathSegLinetoHorizontalAbs(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new window.SVGPathSegLinetoHorizontalRel(void 0,
a)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new window.SVGPathSegLinetoVerticalAbs(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new window.SVGPathSegLinetoVerticalRel(void 0,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,
b,c,d){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(a){if(void 0===
a||!isFinite(a))throw"Invalid arguments.";var b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",this.getAttribute("d"));var c=b.pathSegList.numberOfItems-1;if(0>=c)return 0;do{b.pathSegList.removeItem(c);if(a>b.getTotalLength())break;c--}while(0<c);return c}));"SVGPathSegList"in window||(window.SVGPathSegList=function(a){this._pathElement=a;this._list=this._parsePath(this._pathElement.getAttribute("d"));this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]};
this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){this._checkPathSynchronizedToList();return this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){this._pathSegList||
(this._pathSegList=new window.SVGPathSegList(this));return this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),
window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)});b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect();this._pathElement.setAttribute("d",
window.SVGPathSegList._pathSegArrayAsString(this._list));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList();this._list.forEach(function(a){a._owningPathSegList=null});this._list=[];this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(a){this._checkPathSynchronizedToList();
this._list=[a];a._owningPathSegList=this;this._writeListToPath();return a},window.SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR";},window.SVGPathSegList.prototype.getItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);return this._list[a]},window.SVGPathSegList.prototype.insertItemBefore=function(a,b){this._checkPathSynchronizedToList();b>this.numberOfItems&&(b=this.numberOfItems);a._owningPathSegList&&
(a=a.clone());this._list.splice(b,0,a);a._owningPathSegList=this;this._writeListToPath();return a},window.SVGPathSegList.prototype.replaceItem=function(a,b){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._checkValidIndex(b);this._list[b]=a;a._owningPathSegList=this;this._writeListToPath();return a},window.SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);var b=this._list[a];this._list.splice(a,1);this._writeListToPath();
return b},window.SVGPathSegList.prototype.appendItem=function(a){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._list.push(a);a._owningPathSegList=this;this._writeListToPath();return a},window.SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()});return b},window.SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};
c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a;this._currentIndex=0;this._endIndex=this._string.length;this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN;this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)};d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;
return this._currentIndex<this._endIndex};d.prototype._skipOptionalSpacesOrDelimiter=function(){if(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))return!1;this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces());return this._currentIndex<this._endIndex};d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex};d.prototype.peekSegmentType=
function(){return this._pathSegTypeFromChar(this._string[this._currentIndex])};d.prototype._pathSegTypeFromChar=function(a){switch(a){case "Z":case "z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case "M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case "m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case "L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case "l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case "C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case "c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;
case "Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case "q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case "A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case "a":return window.SVGPathSeg.PATHSEG_ARC_REL;case "H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case "h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case "V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case "v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case "S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;
case "s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case "T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case "t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}};d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||"0"<=a&&"9">=a)&&b!=window.SVGPathSeg.PATHSEG_CLOSEPATH?b==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:b==window.SVGPathSeg.PATHSEG_MOVETO_REL?
window.SVGPathSeg.PATHSEG_LINETO_REL:b:window.SVGPathSeg.PATHSEG_UNKNOWN};d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==window.SVGPathSeg.PATHSEG_MOVETO_ABS||a==window.SVGPathSeg.PATHSEG_MOVETO_REL};d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;this._skipOptionalSpaces();this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<
this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1);if(!(this._currentIndex==this._endIndex||("0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=h)for(var m=this._currentIndex-
1,k=1;m>=h;)b+=k*(this._string.charAt(m--)-0),k*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){this._currentIndex++;if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)c*=10,d+=(this._string.charAt(this._currentIndex)-0)/c,this._currentIndex+=1}if(this._currentIndex!=
g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){this._currentIndex++;"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1);if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;
for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)a*=10,a+=this._string.charAt(this._currentIndex)-0,this._currentIndex++}b=(b+d)*e;a&&(b*=Math.pow(10,f*a));if(g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),b}};d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=this._string.charAt(this._currentIndex++);if("0"==a)a=!1;else if("1"==a)a=!0;else return;this._skipOptionalSpacesOrDelimiter();
return a}};d.prototype.parseSegment=function(){var a=this._string[this._currentIndex];var c=this._pathSegTypeFromChar(a);if(c==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;c=this._nextCommandHelper(a,this._previousCommand);if(c==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;this._previousCommand=c;switch(c){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());
case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(b,
this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(b);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:a=this._parseNumber();c=this._parseNumber();var d=this._parseNumber();var e=this._parseNumber();
var f=this._parseNumber();var g=this._parseNumber();return new window.SVGPathSegCurvetoCubicRel(b,f,g,a,c,d,e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return a=this._parseNumber(),c=this._parseNumber(),d=this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new window.SVGPathSegCurvetoCubicAbs(b,f,g,a,c,d,e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return d=this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),
new window.SVGPathSegCurvetoCubicSmoothRel(b,f,g,d,e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return d=this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new window.SVGPathSegCurvetoCubicSmoothAbs(b,f,g,d,e);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return a=this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new window.SVGPathSegCurvetoQuadraticRel(b,f,g,a,c);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return a=
this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new window.SVGPathSegCurvetoQuadraticAbs(b,f,g,a,c);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:a=this._parseNumber();
c=this._parseNumber();d=this._parseNumber();e=this._parseArcFlag();var h=this._parseArcFlag();f=this._parseNumber();g=this._parseNumber();return new window.SVGPathSegArcRel(b,f,g,a,c,d,e,h);case window.SVGPathSeg.PATHSEG_ARC_ABS:return a=this._parseNumber(),c=this._parseNumber(),d=this._parseNumber(),e=this._parseArcFlag(),h=this._parseArcFlag(),f=this._parseNumber(),g=this._parseNumber(),new window.SVGPathSegArcAbs(b,f,g,a,c,d,e,h);default:throw"Unknown path seg type.";}};c=new c;a=new d(a);if(!a.initialCommandIsMoveTo())return[];
for(;a.hasMoreData();){d=a.parseSegment();if(!d)return[];c.appendSegment(d)}return c.pathSegList})})();String.prototype.padEnd||(String.prototype.padEnd=function(a,b){a>>=0;b=String("undefined"!==typeof b?b:" ");if(this.length>a)return String(this);a-=this.length;a>b.length&&(b+=b.repeat(a/b.length));return String(this)+b.slice(0,a)});a.prototype.axis=function(){};a.prototype.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),
b.axis.updateLabels())};a.prototype.axis.max=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===e(a)?(z(a.x)&&(c.axis_x_max=a.x),z(a.y)&&(c.axis_y_max=a.y),z(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}};a.prototype.axis.min=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===e(a)?(z(a.x)&&(c.axis_x_min=a.x),z(a.y)&&(c.axis_y_min=
a.y),z(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}};a.prototype.axis.range=function(a){if(arguments.length)r(a.max)&&this.axis.max(a.max),r(a.min)&&this.axis.min(a.min);else return{max:this.axis.max(),min:this.axis.min()}};a.prototype.category=function(a,b){var c=this.internal,d=c.config;1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw());return d.axis_x_categories[a]};
a.prototype.categories=function(a){var b=this.internal,c=b.config;if(!arguments.length)return c.axis_x_categories;c.axis_x_categories=a;b.redraw();return c.axis_x_categories};a.prototype.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null;b.size_height=a?a.height:null;this.flush()};a.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};a.prototype.destroy=function(){var a=this.internal;window.clearInterval(a.intervalForObserveInserted);
void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout);if(window.detachEvent)window.detachEvent("onresize",a.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",a.resizeIfElementDisplayed);else{var b=window.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}a.resizeFunction.remove();a.unbindWindowFocus();a.selectChart.classed("c3",!1).html("");Object.keys(a).forEach(function(b){a[b]=null});return null};a.prototype.color=function(a){return this.internal.color(a)};
a.prototype.data=function(a){var b=this.internal.data.targets;return"undefined"===typeof a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})};a.prototype.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))};a.prototype.data.values=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,c=null;if(a){var d=this.data(a);d&&Array.isArray(d)&&(c=d.reduce(function(a,c){c=c.values.map(function(a){return a.value});b?a=a.concat(c):a.push(c);return a},
[]))}return c};a.prototype.data.names=function(a){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",a)};a.prototype.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)};a.prototype.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)};a.prototype.data.stackNormalized=function(a){if(void 0===a)return this.internal.isStackNormalized();this.internal.config.data_stack_normalize=!!a;this.internal.redraw()};a.prototype.donut=
function(){};a.prototype.donut.padAngle=function(a){if(void 0===a)return this.internal.config.donut_padAngle;this.internal.config.donut_padAngle=a;this.flush()};a.prototype.flow=function(a){var b=this.internal,c=[],d=b.getMaxDataCount(),e=0,f=0;if(a.json)var g=b.convertJsonToData(a.json,a.keys);else if(a.rows)g=b.convertRowsToData(a.rows);else if(a.columns)g=b.convertColumnsToData(a.columns);else return;var h=b.convertDataToTargets(g,!0);b.data.targets.forEach(function(a){var d=!1,g,m;for(g=0;g<h.length;g++)if(a.id===
h[g].id){d=!0;a.values[a.values.length-1]&&(f=a.values[a.values.length-1].index+1);e=h[g].values.length;for(m=0;m<e;m++)h[g].values[m].index=f+m,b.isTimeSeries()||(h[g].values[m].x=f+m);a.values=a.values.concat(h[g].values);h.splice(g,1);break}d||c.push(a.id)});b.data.targets.forEach(function(a){var d,g;for(d=0;d<c.length;d++)if(a.id===c[d])for(f=a.values[a.values.length-1].index+1,g=0;g<e;g++)a.values.push({id:a.id,index:f+g,x:b.isTimeSeries()?b.getOtherTargetX(f+g):f+g,value:null})});b.data.targets.length&&
h.forEach(function(a){var c,d=[];for(c=b.data.targets[0].values[0].index;c<f;c++)d.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=f;b.isTimeSeries()||(a.x+=f)});a.values=d.concat(a.values)});b.data.targets=b.data.targets.concat(h);b.getMaxDataCount();var m=b.data.targets[0];g=m.values[0];if(r(a.to)){e=0;var k=b.isTimeSeries()?b.parseDate(a.to):a.to;m.values.forEach(function(a){a.x<k&&e++})}else r(a.length)&&(e=a.length);d?1===d&&
b.isTimeSeries()&&(m=(m.values[m.values.length-1].x-g.x)/2,m=[new Date(+g.x-m),new Date(+g.x+m)],b.updateXDomain(null,!0,!0,!1,m)):(m=b.isTimeSeries()?1<m.values.length?m.values[m.values.length-1].x-g.x:g.x-b.getXDomain(b.data.targets)[0]:1,m=[g.x-m,g.x],b.updateXDomain(null,!0,!0,!1,m));b.updateTargets(b.data.targets);b.redraw({flow:{index:g.index,length:e,duration:z(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:d},withLegend:!0,withTransition:1<d,withTrimXDomain:!1,
withUpdateXAxis:!0})};b.prototype.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e=a.targets,f=a.flow,h=a.drawBar,m=a.drawLine,k=a.drawArea,l=a.cx,q=a.cy,n=a.xv,p=a.xForText,t=a.yForText,r=a.duration,G=1,u=f.index,I=f.length,A=b.getValueOnIndex(b.data.targets[0].values,u),w=b.getValueOnIndex(b.data.targets[0].values,u+I);G=b.x.domain();var z=f.duration||r,x=f.done||function(){};r=b.generateWait();b.flowing=!0;b.data.targets.forEach(function(a){a.values.splice(0,I)});e=
b.updateXDomain(e,!0,!0);b.updateXGrid&&b.updateXGrid(!0);var B=b.xgrid||d.selectAll([]);var D=b.xgridLines||d.selectAll([]);var E=b.mainRegion||d.selectAll([]);var H=b.mainText||d.selectAll([]);var Ca=b.mainBar||d.selectAll([]);var R=b.mainLine||d.selectAll([]);var Da=b.mainArea||d.selectAll([]);var xb=b.mainCircle||d.selectAll([]);f.orgDataCount?f=1===f.orgDataCount||(A&&A.x)===(w&&w.x)?b.x(G[0])-b.x(e[0]):b.isTimeSeries()?b.x(G[0])-b.x(e[0]):b.x(A.x)-b.x(w.x):1!==b.data.targets[0].values.length?
f=b.x(G[0])-b.x(e[0]):b.isTimeSeries()?(A=b.getValueOnIndex(b.data.targets[0].values,0),w=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),f=b.x(A.x)-b.x(w.x)):f=g(e)/2;G=g(G)/g(e);f="translate("+f+",0) scale("+G+",1)";b.hideXGridFocus();z=d.transition().ease(d.easeLinear).duration(z);r.add(b.xAxis(b.axes.x,z));r.add(Ca.transition(z).attr("transform",f));r.add(R.transition(z).attr("transform",f));r.add(Da.transition(z).attr("transform",f));r.add(xb.transition(z).attr("transform",
f));r.add(H.transition(z).attr("transform",f));r.add(E.filter(b.isRegionOnX).transition(z).attr("transform",f));r.add(B.transition(z).attr("transform",f));r.add(D.transition(z).attr("transform",f));r(function(){var a,d=[],e=[];if(I){for(a=0;a<I;a++)d.push("."+y.shape+"-"+(u+a)),e.push("."+y.text+"-"+(u+a));b.svg.selectAll("."+y.shapes).selectAll(d).remove();b.svg.selectAll("."+y.texts).selectAll(e).remove();b.svg.select("."+y.xgrid).remove()}B.attr("transform",null).attr("x1",b.xgridAttr.x1).attr("x2",
b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",b.xgridAttr.opacity);D.attr("transform",null);D.select("line").attr("x1",c.axis_rotated?0:n).attr("x2",c.axis_rotated?b.width:n);D.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",n);Ca.attr("transform",null).attr("d",h);R.attr("transform",null).attr("d",m);Da.attr("transform",null).attr("d",k);xb.attr("transform",null).attr("cx",l).attr("cy",q);H.attr("transform",null).attr("x",p).attr("y",t).style("fill-opacity",
b.opacityForText.bind(b));E.attr("transform",null);E.filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b));x();b.flowing=!1})}};a.prototype.focus=function(a){var b=this.internal;a=b.mapToTargetIds(a);var c=b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b)));this.revert();this.defocus();c.classed(y.focused,!0).classed(y.defocused,!1);b.hasArcType()&&b.expandArc(a);b.toggleFocusLegend(a,!0);b.focusedTargetIds=a;b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return 0>
a.indexOf(b)})};a.prototype.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))).classed(y.focused,!1).classed(y.defocused,!0);b.hasArcType()&&b.unexpandArc(a);b.toggleFocusLegend(a,!1);b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return 0>a.indexOf(b)});b.defocusedTargetIds=a};a.prototype.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a)).classed(y.focused,!1).classed(y.defocused,
!1);b.hasArcType()&&b.unexpandArc(a);b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(y.legendItemFocused)}).classed(y.legendItemFocused,!1));b.focusedTargetIds=[];b.defocusedTargetIds=[]};a.prototype.xgrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_x_lines;c.grid_x_lines=a;b.redrawWithoutRescale();return c.grid_x_lines};a.prototype.xgrids.add=function(a){return this.xgrids(this.internal.config.grid_x_lines.concat(a?
a:[]))};a.prototype.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)};a.prototype.ygrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_y_lines;c.grid_y_lines=a;b.redrawWithoutRescale();return c.grid_y_lines};a.prototype.ygrids.add=function(a){return this.ygrids(this.internal.config.grid_y_lines.concat(a?a:[]))};a.prototype.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)};a.prototype.groups=function(a){var b=this.internal,c=b.config;if(t(a))return c.data_groups;
c.data_groups=a;b.redraw();return c.data_groups};a.prototype.legend=function(){};a.prototype.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};a.prototype.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!1})};a.prototype.load=function(b){var c=this.internal,d=c.config;b.xs&&c.addXs(b.xs);"names"in b&&a.prototype.data.names.bind(this)(b.names);"classes"in b&&Object.keys(b.classes).forEach(function(a){d.data_classes[a]=
b.classes[a]});"categories"in b&&c.isCategorized()&&(d.axis_x_categories=b.categories);"axes"in b&&Object.keys(b.axes).forEach(function(a){d.data_axes[a]=b.axes[a]});"colors"in b&&Object.keys(b.colors).forEach(function(a){d.data_colors[a]=b.colors[a]});"cacheIds"in b&&c.hasCaches(b.cacheIds)?c.load(c.getCaches(b.cacheIds),b.done):b.unload?c.unload(c.mapToTargetIds(!0===b.unload?null:b.unload),function(){c.loadFromArgs(b)}):c.loadFromArgs(b)};a.prototype.unload=function(a){var b=this.internal;a=a||
{};a instanceof Array?a={ids:a}:"string"===typeof a&&(a={ids:[a]});b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});a.done&&a.done()})};a.prototype.pie=function(){};a.prototype.pie.padAngle=function(a){if(void 0===a)return this.internal.config.pie_padAngle;this.internal.config.pie_padAngle=a;this.flush()};a.prototype.regions=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=a;b.redrawWithoutRescale();return c.regions};
a.prototype.regions.add=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=c.regions.concat(a);b.redrawWithoutRescale();return c.regions};a.prototype.regions.remove=function(a){var b=this.internal,c=b.config;a=a||{};var d=k(a,"duration",c.transition_duration);var e=k(a,"classes",[y.region]);a=b.main.select("."+y.regions).selectAll(e.map(function(a){return"."+a}));(d?a.transition().duration(d):a).style("opacity",0).remove();c.regions=c.regions.filter(function(a){var b=!1;if(!a["class"])return!0;
a["class"].split(" ").forEach(function(a){0<=e.indexOf(a)&&(b=!0)});return!b});return c.regions};a.prototype.selected=function(a){var b=this.internal,c=b.d3;return b.main.selectAll("."+y.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+y.shape).filter(function(){return c.select(this).classed(y.SELECTED)}).nodes().map(function(a){a=a.__data__;return a.data?a.data:a})};a.prototype.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+y.shapes).selectAll("."+
y.shape).each(function(g,h){var m=e.select(this),k=g.data?g.data.id:g.id,l=d.getToggle(this,g).bind(d);k=f.data_selection_grouped||!a||0<=a.indexOf(k);var q=!b||0<=b.indexOf(h),n=m.classed(y.SELECTED);m.classed(y.line)||m.classed(y.area)||(k&&q?f.data_selection_isselectable(g)&&!n&&l(!0,m.classed(y.SELECTED,!0),g,h):r(c)&&c&&n&&l(!1,m.classed(y.SELECTED,!1),g,h))})};a.prototype.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+y.shapes).selectAll("."+
y.shape).each(function(f,g){var h=d.select(this),m=f.data?f.data.id:f.id,k=c.getToggle(this,f).bind(c);m=e.data_selection_grouped||!a||0<=a.indexOf(m);var l=!b||0<=b.indexOf(g),q=h.classed(y.SELECTED);h.classed(y.line)||h.classed(y.area)||m&&l&&e.data_selection_isselectable(f)&&q&&k(!1,h.classed(y.SELECTED,!1),f,g)})};a.prototype.show=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.removeHiddenTargetIds(a);var d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("display",
"initial","important").style("opacity",1,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",1)});b.withLegend&&c.showLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};a.prototype.hide=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.addHiddenTargetIds(a);var d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",0,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",0);d.style("display",
"none")});b.withLegend&&c.hideLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};a.prototype.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})};a.prototype.tooltip=function(){};a.prototype.tooltip.show=function(a){var b=this.internal,c={};if(a.mouse)c=a.mouse;else{if(a.data)var d=a.data;else"undefined"!==typeof a.x&&(d=a.id?b.data.targets.filter(function(b){return b.id===a.id}):b.data.targets,
d=b.filterByX(d,a.x).slice(0,1)[0]);c=d?b.getMousePosition(d):null}b.dispatchEvent("mousemove",c);b.config.tooltip_onshow.call(b,d)};a.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};a.prototype.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;c.transformTo(b,a,d)};b.prototype.transformTo=function(a,b,c){var d=!this.hasArcType();c=c||{withTransitionForAxis:d};this.transiting=
c.withTransitionForTransform=!1;this.setTargetType(a,b);this.updateTargets(this.data.targets);this.updateAndRedraw(c)};a.prototype.x=function(a){var b=this.internal;arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};a.prototype.xs=function(a){var b=this.internal;arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};a.prototype.zoom=function(a){var b=
this.internal;return a?(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.config.subchart_show?b.brush.selectionAsValue(a,!0):(b.updateXDomain(null,!0,!1,!1,a),b.redraw({withY:b.config.zoom_rescale,withSubchart:!1})),b.config.zoom_onzoom.call(this,b.x.orgDomain()),a):b.x.domain()};a.prototype.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a;b.updateAndRedraw()};a.prototype.unzoom=function(){var a=this.internal;a.config.subchart_show?a.brush.clear():(a.updateXDomain(null,
!0,!1,!1,a.subX.domain()),a.redraw({withY:a.config.zoom_rescale,withSubchart:!1}))};a.prototype.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_max=d.max([b.orgXDomain[1],a]);else return c.zoom_x_max};a.prototype.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_min=d.min([b.orgXDomain[0],a]);else return c.zoom_x_min};a.prototype.zoom.range=function(a){if(arguments.length)r(a.max)&&this.domain.max(a.max),r(a.min)&&this.domain.min(a.min);
else return{max:this.domain.max(),min:this.domain.min()}};b.prototype.initPie=function(){this.pie=this.d3.pie().padAngle(this.getPadAngle.bind(this)).value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)});var a=this.getOrderFunction();if(a&&(this.isOrderAsc()||this.isOrderDesc())){var b=a;a=function(a,c){return-1*b(a,c)}}this.pie.sort(a||null)};b.prototype.updateRadius=function(){var a=this.config;a=a.gauge_width||a.donut_width;var b=this.filterTargetsToShow(this.data.targets).length*
this.config.gauge_arcs_minWidth;this.radiusExpanded=Math.min(this.arcWidth,this.arcHeight)/2*(this.hasType("gauge")?.85:1);this.radius=.95*this.radiusExpanded;this.innerRadiusRatio=a?(this.radius-a)/this.radius:.6;this.innerRadius=this.hasType("donut")||this.hasType("gauge")?this.radius*this.innerRadiusRatio:0;this.gaugeArcWidth=a?a:b<=this.radius-this.innerRadius?this.radius-this.innerRadius:b<=this.radius?b:this.radius};b.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||
0:this.hasType("donut")?this.config.donut_padAngle||0:0};b.prototype.updateArc=function(){this.svgArc=this.getSvgArc();this.svgArcExpanded=this.getSvgArcExpanded();this.svgArcExpandedSub=this.getSvgArcExpanded(.98)};b.prototype.updateAngle=function(a){var b=this.config,c=!1,d=0;if(!b)return null;this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(b){c||b.data.id!==a.data.id||(c=!0,a=b,a.index=d);d++});isNaN(a.startAngle)&&(a.startAngle=0);isNaN(a.endAngle)&&(a.endAngle=a.startAngle);
if(this.isGaugeType(a.data)){var e=b.gauge_min;var f=b.gauge_max;var g=Math.PI*(b.gauge_fullCircle?2:1)/(f-e);e=a.value<e?0:a.value<f?a.value-e:f-e;a.startAngle=b.gauge_startingAngle;a.endAngle=a.startAngle+g*e}return c?a:null};b.prototype.getSvgArc=function(){var a=this,b=a.hasType("gauge"),c=a.gaugeArcWidth/a.filterTargetsToShow(a.data.targets).length,d=a.d3.arc().outerRadius(function(d){return b?a.radius-c*d.index:a.radius}).innerRadius(function(d){return b?a.radius-c*(d.index+1):a.innerRadius}),
e=function(b,c){return c?d(b):(b=a.updateAngle(b))?d(b):"M 0 0"};e.centroid=d.centroid;return e};b.prototype.getSvgArcExpanded=function(a){a=a||1;var b=this,c=b.hasType("gauge"),d=b.gaugeArcWidth/b.filterTargetsToShow(b.data.targets).length,e=Math.min(b.radiusExpanded*a-b.radius,.8*d-100*(1-a)),f=b.d3.arc().outerRadius(function(f){return c?b.radius-d*f.index+e:b.radiusExpanded*a}).innerRadius(function(a){return c?b.radius-d*(a.index+1):b.innerRadius});return function(a){return(a=b.updateAngle(a))?
f(a):"M 0 0"}};b.prototype.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"};b.prototype.transformForArcLabel=function(a){var b=this.config,c=this.updateAngle(a);var d="";var e=this.hasType("gauge");c&&!e?(d=this.svgArc.centroid(c),c=isNaN(d[0])?0:d[0],d=isNaN(d[1])?0:d[1],e=Math.sqrt(c*c+d*d),a=this.hasType("donut")&&b.donut_label_ratio?u(b.donut_label_ratio)?b.donut_label_ratio(a,this.radius,e):b.donut_label_ratio:this.hasType("pie")&&b.pie_label_ratio?u(b.pie_label_ratio)?
b.pie_label_ratio(a,this.radius,e):b.pie_label_ratio:this.radius&&e?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/e:0,d="translate("+c*a+","+d*a+")"):c&&e&&1<this.filterTargetsToShow(this.data.targets).length&&(a=Math.sin(c.endAngle-Math.PI/2),c=Math.cos(c.endAngle-Math.PI/2)*(this.radiusExpanded+25),d=a*(this.radiusExpanded+15-Math.abs(10*a))+3,d="translate("+c+","+d+")");return d};b.prototype.getArcRatio=function(a){return this.getRatio("arc",a)};b.prototype.convertToArcData=function(a){return this.addName({id:a.data.id,
value:a.value,ratio:this.getRatio("arc",a),index:a.index})};b.prototype.textForArcLabel=function(a){var b,c;if(!this.shouldShowArcLabel())return"";var d=(b=this.updateAngle(a))?b.value:null;b=this.getRatio("arc",b);a=a.data.id;return this.hasType("gauge")||this.meetsArcLabelThreshold(b)?(c=this.getArcLabelFormat())?c(d,b,a):this.defaultArcValueFormat(d,b):""};b.prototype.textForGaugeMinMax=function(a,b){var c=this.getGaugeLabelExtents();return c?c(a,b):a};b.prototype.expandArc=function(a){var b=this;
if(b.transiting)var c=window.setInterval(function(){b.transiting||(window.clearInterval(c),0<b.legend.selectAll(".c3-legend-item-focused").size()&&b.expandArc(a))},10);else a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+y.chartArc)).each(function(a){b.shouldExpand(a.data.id)&&b.d3.select(this).selectAll("path").transition().duration(b.expandDuration(a.data.id)).attr("d",b.svgArcExpanded).transition().duration(2*b.expandDuration(a.data.id)).attr("d",b.svgArcExpandedSub).each(function(a){b.isDonutType(a.data)})})};
b.prototype.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+y.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+y.arc))};b.prototype.expandDuration=function(a){var b=this.config;return this.isDonutType(a)?b.donut_expand_duration:this.isGaugeType(a)?b.gauge_expand_duration:this.isPieType(a)?b.pie_expand_duration:50};b.prototype.shouldExpand=function(a){var b=
this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&b.pie_expand};b.prototype.shouldShowArcLabel=function(){var a=this.config,b=!0;this.hasType("donut")?b=a.donut_label_show:this.hasType("pie")&&(b=a.pie_label_show);return b};b.prototype.meetsArcLabelThreshold=function(a){var b=this.config;b=this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold;return a>=b};b.prototype.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;
this.hasType("gauge")?b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format);return b};b.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents};b.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""};b.prototype.updateTargetsForArc=function(a){var b=this.main,c=this.classChartArc.bind(this),d=this.classArcs.bind(this),e=this.classFocus.bind(this);a=b.select("."+y.chartArcs).selectAll("."+y.chartArc).data(this.pie(a)).attr("class",
function(a){return c(a)+e(a.data)}).enter().append("g").attr("class",c);a.append("g").attr("class",d);a.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};b.prototype.initArc=function(){this.arcs=this.main.select("."+y.chart).append("g").attr("class",y.chartArcs).attr("transform",this.getTranslate("arc"));this.arcs.append("text").attr("class",y.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())};
b.prototype.redrawArc=function(a,b,c){var d=this,e=d.d3,f=d.config,g=d.main,h=d.hasType("gauge");var m=g.selectAll("."+y.arcs).selectAll("."+y.arc).data(d.arcData.bind(d));var k=m.enter().append("path").attr("class",d.classArc.bind(d)).style("fill",function(a){return d.color(a.data)}).style("cursor",function(a){return f.interaction_enabled&&f.data_selection_isselectable(a)?"pointer":null}).each(function(a){d.isGaugeType(a.data)&&(a.startAngle=a.endAngle=f.gauge_startingAngle);this._current=a}).merge(m);
if(h){var l=g.selectAll("."+y.arcs).selectAll("."+y.arcLabelLine).data(d.arcData.bind(d));l=l.enter().append("rect").attr("class",function(a){return y.arcLabelLine+" "+y.target+" "+y.target+"-"+a.data.id}).merge(l);1===d.filterTargetsToShow(d.data.targets).length?l.style("display","none"):l.style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):d.color(a.data)}).style("display",f.gauge_labelLine_show?"":"none").each(function(a){var b=0,c=0,f=0,g="";0>d.hiddenTargetIds.indexOf(a.data.id)&&
(c=d.updateAngle(a),b=d.gaugeArcWidth/d.filterTargetsToShow(d.data.targets).length*(c.index+1),a=c.endAngle-Math.PI/2,f=d.radius-b,g=a-(0===f?0:1/f),b=d.radiusExpanded-d.radius+b,c=Math.cos(g)*f,f*=Math.sin(g),g="rotate("+180*a/Math.PI+", "+c+", "+f+")");e.select(this).attr("x",c).attr("y",f).attr("width",b).attr("height",2).attr("transform",g).style("stroke-dasharray","0, "+(b+2)+", 0")})}k.attr("transform",function(a){return!d.isGaugeType(a.data)&&c?"scale(0)":""}).on("mouseover",f.interaction_enabled?
function(a){if(!d.transiting&&(a=d.updateAngle(a))){var b=d.convertToArcData(a);d.expandArc(a.data.id);d.api.focus(a.data.id);d.toggleFocusLegend(a.data.id,!0);d.config.data_onmouseover(b,this)}}:null).on("mousemove",f.interaction_enabled?function(a){if(a=d.updateAngle(a))a=d.convertToArcData(a),a=[a],d.showTooltip(a,this)}:null).on("mouseout",f.interaction_enabled?function(a){if(!d.transiting&&(a=d.updateAngle(a))){var b=d.convertToArcData(a);d.unexpandArc(a.data.id);d.api.revert();d.revertLegend();
d.hideTooltip();d.config.data_onmouseout(b,this)}}:null).on("click",f.interaction_enabled?function(a,b){if(a=d.updateAngle(a))a=d.convertToArcData(a),d.toggleShape&&d.toggleShape(this,a,b),d.config.data_onclick.call(d.api,a,this)}:null).each(function(){d.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b=d.updateAngle(a);if(!b)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0);isNaN(this._current.endAngle)&&(this._current.endAngle=
this._current.startAngle);var c=e.interpolate(this._current,b);this._current=c(0);return function(b){if(null===d.config)return"M 0 0";b=c(b);b.data=a.data;return d.getArc(b,!0)}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):d.color(a.data.id)}).call(d.endall,function(){d.transiting=!1});m.exit().transition().duration(b).style("opacity",0).remove();g.selectAll("."+y.chartArc).select("text").style("opacity",0).attr("class",function(a){return d.isGaugeType(a.data)?
y.gaugeValue:""}).text(d.textForArcLabel.bind(d)).attr("transform",d.transformForArcLabel.bind(d)).style("font-size",function(a){return d.isGaugeType(a.data)&&1===d.filterTargetsToShow(d.data.targets).length?Math.round(d.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return d.isTargetToShow(a.data.id)&&d.isArcType(a.data)?1:0});g.select("."+y.chartArcsTitle).style("opacity",d.hasType("donut")||h?1:0);if(h){var q=0;a=d.arcs.select("g."+y.chartArcsBackground).selectAll("path."+
y.chartArcsBackground).data(d.data.targets);a.enter().append("path").attr("class",function(a,b){return y.chartArcsBackground+" "+y.chartArcsBackground+"-"+b}).merge(a).attr("d",function(a){if(0<=d.hiddenTargetIds.indexOf(a.id))return"M 0 0";a={data:[{value:f.gauge_max}],startAngle:f.gauge_startingAngle,endAngle:-1*f.gauge_startingAngle*(f.gauge_fullCircle?Math.PI:1),index:q++};return d.getArc(a,!0,!0)});a.exit().remove();d.arcs.select("."+y.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?
f.gauge_units:"");d.arcs.select("."+y.chartArcsGaugeMin).attr("dx",-1*(d.innerRadius+(d.radius-d.innerRadius)/(f.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(f.gauge_label_show?d.textForGaugeMinMax(f.gauge_min,!1):"");d.arcs.select("."+y.chartArcsGaugeMax).attr("dx",d.innerRadius+(d.radius-d.innerRadius)/(f.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(f.gauge_label_show?d.textForGaugeMinMax(f.gauge_max,!0):"")}};b.prototype.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&
(a.append("g").attr("class",y.chartArcsBackground),a.append("text").attr("class",y.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",y.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",y.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};b.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};b.prototype.addToCache=function(a,
b){this.cache["$".concat(a)]=b};b.prototype.getFromCache=function(a){return this.cache["$".concat(a)]};b.prototype.resetCache=function(){var a=this;Object.keys(this.cache).filter(function(a){return/^\$/.test(a)}).forEach(function(b){delete a.cache[b]})};b.prototype.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0};b.prototype.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)};b.prototype.getCaches=function(a){var b=[],c;for(c=0;c<a.length;c++)a[c]in
this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};b.prototype.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a};b.prototype.generateTargetClass=function(a){return a||0===a?("-"+a).replace(/\s/g,"-"):""};b.prototype.generateClass=function(a,b){return" "+a+" "+a+this.generateTargetClass(b)};b.prototype.classText=function(a){return this.generateClass(y.text,a.index)};b.prototype.classTexts=function(a){return this.generateClass(y.texts,
a.id)};b.prototype.classShape=function(a){return this.generateClass(y.shape,a.index)};b.prototype.classShapes=function(a){return this.generateClass(y.shapes,a.id)};b.prototype.classLine=function(a){return this.classShape(a)+this.generateClass(y.line,a.id)};b.prototype.classLines=function(a){return this.classShapes(a)+this.generateClass(y.lines,a.id)};b.prototype.classCircle=function(a){return this.classShape(a)+this.generateClass(y.circle,a.index)};b.prototype.classCircles=function(a){return this.classShapes(a)+
this.generateClass(y.circles,a.id)};b.prototype.classBar=function(a){return this.classShape(a)+this.generateClass(y.bar,a.index)};b.prototype.classBars=function(a){return this.classShapes(a)+this.generateClass(y.bars,a.id)};b.prototype.classArc=function(a){return this.classShape(a.data)+this.generateClass(y.arc,a.data.id)};b.prototype.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(y.arcs,a.data.id)};b.prototype.classArea=function(a){return this.classShape(a)+this.generateClass(y.area,
a.id)};b.prototype.classAreas=function(a){return this.classShapes(a)+this.generateClass(y.areas,a.id)};b.prototype.classRegion=function(a,b){return this.generateClass(y.region,b)+" "+("class"in a?a["class"]:"")};b.prototype.classEvent=function(a){return this.generateClass(y.eventRect,a.index)};b.prototype.classTarget=function(a){var b=this.config.data_classes[a],c="";b&&(c=" "+y.target+"-"+b);return this.generateClass(y.target,a)+c};b.prototype.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)};
b.prototype.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?y.focused:"")};b.prototype.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?y.defocused:"")};b.prototype.classChartText=function(a){return y.chartText+this.classTarget(a.id)};b.prototype.classChartLine=function(a){return y.chartLine+this.classTarget(a.id)};b.prototype.classChartBar=function(a){return y.chartBar+this.classTarget(a.id)};b.prototype.classChartArc=function(a){return y.chartArc+
this.classTarget(a.data.id)};b.prototype.getTargetSelectorSuffix=function(a){a=this.generateTargetClass(a);return window.CSS&&window.CSS.escape?window.CSS.escape(a):a.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")};b.prototype.selectorTarget=function(a,b){return(b||"")+"."+y.target+this.getTargetSelectorSuffix(a)};b.prototype.selectorTargets=function(a,b){var c=this;a=a||[];return a.length?a.map(function(a){return c.selectorTarget(a,b)}):null};b.prototype.selectorLegend=function(a){return"."+
y.legendItem+this.getTargetSelectorSuffix(a)};b.prototype.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};b.prototype.getClipPath=function(a){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"};b.prototype.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")};b.prototype.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?
-(1+b):-(b-1)};b.prototype.getAxisClipY=function(a){return a?-20:-this.margin.top};b.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)};b.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)};b.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)};b.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)};b.prototype.getAxisClipWidth=function(a){var b=
Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20};b.prototype.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20};b.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)};b.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)};b.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+
(this.config.axis_y_inner?20:0)};b.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)};b.prototype.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=w(a.color_pattern)?b.schemeCategory10:a.color_pattern,e=a.data_color,f=[];return function(a){var b=a.id||a.data&&a.data.id||a;if(c[b]instanceof Function)var g=c[b](a);else c[b]?g=c[b]:(0>f.indexOf(b)&&f.push(b),g=d[f.indexOf(b)%d.length],c[b]=g);return e instanceof Function?e(g,a):g}};
b.prototype.generateLevelColor=function(){var a=this.config,b=a.color_pattern;a=a.color_threshold;var c="value"===a.unit,d=a.values&&a.values.length?a.values:[],e=a.max||100;return w(a)||w(b)?null:function(a){var f,g=b[b.length-1];for(f=0;f<d.length;f++){var h=c?a:100*a/e;if(h<d[f]){g=b[f];break}}return g}};b.prototype.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,
resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,
data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},
data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,
legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,
axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,
axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,
point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,
gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,
stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",
left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this);return a};b.prototype.additionalConfig={};b.prototype.loadConfig=function(a){function b(){var a=f.shift();if(a&&d&&"object"===e(d)&&a in d)return d=d[a],b();if(!a)return d}var c=this.config,d,f,g;Object.keys(c).forEach(function(e){d=a;f=e.split("_");
g=b();r(g)&&(c[e]=g)})};b.prototype.convertUrlToData=function(a,b,c,d,e){var f=this;b=b?b:"csv";if("json"===b){b=f.d3.json;var g=f.convertJsonToData}else b="tsv"===b?f.d3.tsv:f.d3.csv,g=f.convertXsvToData;b(a,c).then(function(a){e.call(f,g.call(f,a,d))})["catch"](function(a){throw a;})};b.prototype.convertXsvToData=function(a){var b=a.columns;return 0===a.length?{keys:b,rows:[b.reduce(function(a,b){return Object.assign(a,f({},b,null))},{})]}:{keys:b,rows:[].concat(a)}};b.prototype.convertJsonToData=
function(a,b){var c=this,d=[];if(b){if(b.x){var e=b.value.concat(b.x);c.config.data_x=b.x}else e=b.value;d.push(e);a.forEach(function(a){var b=[];e.forEach(function(d){d=c.findValueInJson(a,d);t(d)&&(d=null);b.push(d)});d.push(b)});b=c.convertRowsToData(d)}else Object.keys(a).forEach(function(b){d.push([b].concat(a[b]))}),b=c.convertColumnsToData(d);return b};b.prototype.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1");b=b.replace(/^\./,"");b=b.split(".");for(var c=0;c<b.length;++c){var d=
b[c];if(d in a)a=a[d];else return}return a};b.prototype.convertRowsToData=function(a){for(var b=[],c=a[0],d=1;d<a.length;d++){for(var e={},f=0;f<a[d].length;f++){if(t(a[d][f]))throw Error("Source data is missing a component at ("+d+","+f+")!");e[c[f]]=a[d][f]}b.push(e)}return{keys:c,rows:b}};b.prototype.convertColumnsToData=function(a){for(var b=[],c=[],d=0;d<a.length;d++){for(var e=a[d][0],f=1;f<a[d].length;f++){t(b[f-1])&&(b[f-1]={});if(t(a[d][f]))throw Error("Source data is missing a component at ("+
d+","+f+")!");b[f-1][e]=a[d][f]}c.push(e)}return{keys:c,rows:b}};b.prototype.convertDataToTargets=function(a,b){var c=this,d=c.config;if(Array.isArray(a))var e=Object.keys(a[0]);else e=a.keys,a=a.rows;var f=e.filter(c.isX,c);if(c.isStanfordGraphType()){var g=e.filter(c.isEpochs,c);e=e.filter(c.isNotXAndNotEpochs,c);if(1!==f.length||1!==g.length||1!==e.length)throw Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams");}else e=e.filter(c.isNotX,c);e.forEach(function(e){var g=
c.getXKey(e);c.isCustomX()||c.isTimeSeries()?0<=f.indexOf(g)?c.data.xs[e]=(b&&c.data.xs[e]?c.data.xs[e]:[]).concat(a.map(function(a){return a[g]}).filter(z).map(function(a,b){return c.generateTargetX(a,e,b)})):d.data_x?c.data.xs[e]=c.getOtherTargetXs():w(d.data_xs)||(c.data.xs[e]=c.getXValuesOfXKey(g,c.data.targets)):c.data.xs[e]=a.map(function(a,b){return b})});e.forEach(function(a){if(!c.data.xs[a])throw Error('x is not defined for id = "'+a+'".');});e=e.map(function(b,e){var f=d.data_idConverter(b);
return{id:f,id_org:b,values:a.map(function(a,h){var m=c.getXKey(b);m=a[m];var k=null===a[b]||isNaN(a[b])?null:+a[b];if(c.isCustomX()&&c.isCategorized()&&!t(m)){0===e&&0===h&&(d.axis_x_categories=[]);var l=d.axis_x_categories.indexOf(m);-1===l&&(l=d.axis_x_categories.length,d.axis_x_categories.push(m))}else l=c.generateTargetX(m,b,h);if(t(a[b])||c.data.xs[b].length<=h)l=void 0;h={x:l,value:k,id:f};c.isStanfordGraphType()&&(h.epochs=a[g]);return h}).filter(function(a){return r(a.x)})}});e.forEach(function(a){d.data_xSort&&
(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)}));var b=0;a.values.forEach(function(a){a.index=b++});c.data.xs[a.id].sort(function(a,b){return a-b})});c.hasNegativeValue=c.hasNegativeValueInTargets(e);c.hasPositiveValue=c.hasPositiveValueInTargets(e);d.data_type&&c.setTargetType(c.mapToIds(e).filter(function(a){return!(a in d.data_types)}),d.data_type);e.forEach(function(a){c.addCache(a.id_org,a)});return e};b.prototype.isEpochs=function(a){var b=
this.config;return b.data_epochs&&a===b.data_epochs};b.prototype.isX=function(a){var b=this.config;return b.data_x&&a===b.data_x||!w(b.data_xs)&&p(b.data_xs,a)};b.prototype.isNotX=function(a){return!this.isX(a)};b.prototype.isNotXAndNotEpochs=function(a){return!this.isX(a)&&!this.isEpochs(a)};b.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&0<this.config.data_groups.length};b.prototype.isAxisNormalized=function(a){var b=this;return b.isStackNormalized()?b.data.targets.filter(function(c){return b.axis.getId(c.id)===
a}).some(function(a){return b.isTargetNormalized(a.id)}):!1};b.prototype.isTargetNormalized=function(a){return this.isStackNormalized()&&this.config.data_groups.some(function(b){return b.includes(a)})};b.prototype.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:w(b.data_xs)?null:b.data_xs[a]};b.prototype.getTotalPerIndex=function(a){var b=this;if(!b.isStackNormalized())return null;var c=b.getFromCache("getTotalPerIndex");if(void 0!==c)return c[a];var d={y:[],y2:[]};b.data.targets.filter(function(a){return b.isTargetNormalized(a.id)}).filter(function(a){return b.isTargetToShow(a.id)}).forEach(function(a){var c=
d[b.axis.getId(a.id)];a.values.forEach(function(a,b){c[b]||(c[b]=0);c[b]+="number"===typeof a.value?a.value:0})});b.addToCache("getTotalPerIndex",d);return d[a]};b.prototype.getTotalDataSum=function(){var a=this,b=a.getFromCache("getTotalDataSum");if(void 0!==b)return b;b=D(a.data.targets.filter(function(b){return a.isTargetToShow(b.id)}).map(function(a){return a.values})).map(function(a){return a.value}).reduce(function(a,b){return a+b},0);a.addToCache("getTotalDataSum",b);return b};b.prototype.getXValuesOfXKey=
function(a,b){var c=this,d;(b&&!w(b)?c.mapToIds(b):[]).forEach(function(b){c.getXKey(b)===a&&(d=c.data.xs[b])});return d};b.prototype.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&z(this.data.xs[a][b])?this.data.xs[a][b]:b};b.prototype.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null};b.prototype.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null};b.prototype.addXs=function(a){var b=this;
Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})};b.prototype.addName=function(a){if(a){var b=this.config.data_names[a.id];a.name=void 0!==b?b:a.id}return a};b.prototype.getValueOnIndex=function(a,b){a=a.filter(function(a){return a.index===b});return a.length?a[0]:null};b.prototype.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)});c.data.xs[a.id]=b})};b.prototype.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&
c.updateTargetX([a],b[a.id])})};b.prototype.generateTargetX=function(a,b,c){return this.isTimeSeries()?a?this.parseDate(a):this.parseDate(this.getXValue(b,c)):this.isCustomX()&&!this.isCategorized()?z(a)?+a:this.getXValue(b,c):c};b.prototype.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}};b.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})};b.prototype.mapToIds=
function(a){return a.map(function(a){return a.id})};b.prototype.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)};b.prototype.hasTarget=function(a,b){a=this.mapToIds(a);var c;for(c=0;c<a.length;c++)if(a[c]===b)return!0;return!1};b.prototype.isTargetToShow=function(a){return 0>this.hiddenTargetIds.indexOf(a)};b.prototype.isLegendToShow=function(a){return 0>this.hiddenLegendIds.indexOf(a)};b.prototype.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})};
b.prototype.mapTargetsToUniqueXs=function(a){a=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();a=this.isTimeSeries()?a.map(function(a){return new Date(+a)}):a.map(function(a){return+a});return a.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})};b.prototype.addHiddenTargetIds=function(a){a=a instanceof Array?a:Array(a);for(var b=0;b<a.length;b++)0>this.hiddenTargetIds.indexOf(a[b])&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(a[b]));this.resetCache()};
b.prototype.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return 0>a.indexOf(b)});this.resetCache()};b.prototype.addHiddenLegendIds=function(a){a=a instanceof Array?a:Array(a);for(var b=0;b<a.length;b++)0>this.hiddenLegendIds.indexOf(a[b])&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(a[b]))};b.prototype.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return 0>a.indexOf(b)})};b.prototype.getValuesAsIdKeyed=
function(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(c){b[a.id].push(c.value)})});return b};b.prototype.checkValueInTargets=function(a,b){var c=Object.keys(a),d,e;for(d=0;d<c.length;d++){var f=a[c[d]].values;for(e=0;e<f.length;e++)if(b(f[e].value))return!0}return!1};b.prototype.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})};b.prototype.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<
a})};b.prototype.isOrderDesc=function(){var a=this.config;return"string"===typeof a.data_order&&"desc"===a.data_order.toLowerCase()};b.prototype.isOrderAsc=function(){var a=this.config;return"string"===typeof a.data_order&&"asc"===a.data_order.toLowerCase()};b.prototype.getOrderFunction=function(){var a=this.config,b=this.isOrderAsc(),c=this.isOrderDesc();if(b||c){var d=function(a,b){return a+Math.abs(b.value)};return function(a,c){a=a.values.reduce(d,0);c=c.values.reduce(d,0);return b?c-a:a-c}}if(u(a.data_order))return a.data_order;
if(Array.isArray(a.data_order)){var e=a.data_order;return function(a,b){return e.indexOf(a.id)-e.indexOf(b.id)}}};b.prototype.orderTargets=function(a){var b=this.getOrderFunction();b&&a.sort(b);return a};b.prototype.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return 0===a.x-b})};b.prototype.filterRemoveNull=function(a){return a.filter(function(a){return z(a.value)})};b.prototype.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,
id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})};b.prototype.hasDataLabel=function(){var a=this.config;return"boolean"===typeof a.data_labels&&a.data_labels||"object"===e(a.data_labels)&&!w(a.data_labels)?!0:!1};b.prototype.getDataLabelLength=function(a,b,c){var d=this,e=[0,0];d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=1.3*n(this)[c]}).remove();return e};
b.prototype.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)};b.prototype.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)};b.prototype.findClosestFromTargets=function(a,b){var c=this;a=a.map(function(a){return c.findClosest(a.values,b)});return c.findClosest(a,b)};b.prototype.findClosest=function(a,b){var c=this,d=c.config.point_sensitivity,e;a.filter(function(a){return a&&c.isBarType(a.id)}).forEach(function(a){var b=c.main.select("."+y.bars+c.getTargetSelectorSuffix(a.id)+
" ."+y.bar+"-"+a.index).node();!e&&c.isWithinBar(c.d3.mouse(b),b)&&(e=a)});a.filter(function(a){return a&&!c.isBarType(a.id)}).forEach(function(a){var f=c.config.tooltip_horizontal?c.horizontalDistance(a,b):c.dist(a,b);f<d&&(d=f,e=a)});return e};b.prototype.dist=function(a,b){var c=this.config,d=c.axis_rotated?1:0;c=c.axis_rotated?0:1;var e=this.circleY(a,a.index);a=this.x(a.x);return Math.sqrt(Math.pow(a-b[d],2)+Math.pow(e-b[c],2))};b.prototype.horizontalDistance=function(a,b){var c=this.config.axis_rotated?
1:0;a=this.x(a.x);return Math.abs(a-b[c])};b.prototype.convertValuesToStep=function(a){var b=[].concat(a),c;if(!this.isCategorized())return a;for(c=a.length+1;0<c;c--)b[c]=b[c-1];b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id};b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id};return b};b.prototype.getRatio=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,d=this.api,e=0;b&&d.data.shown.call(d).length&&(e=b.ratio||b.value,"arc"===a?this.hasType("gauge")?
e=(b.endAngle-b.startAngle)/(Math.PI*(this.config.gauge_fullCircle?2:1)):(d=this.getTotalDataSum(),e=b.value/d):"index"===a&&(d=this.getTotalPerIndex(this.axis.getId(b.id)),b.ratio="number"===typeof b.value&&d&&0<d[b.index]?b.value/d[b.index]:0,e=b.ratio));return c&&e?100*e:e};b.prototype.updateDataAttributes=function(a,b){var c=this.config["data_"+a];if("undefined"===typeof b)return c;Object.keys(b).forEach(function(a){c[a]=b[a]});this.redraw({withLegend:!0});return c};b.prototype.load=function(a,
b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){c.setTargetType(a.id,b.types&&b.types[a.id]?b.types[a.id]:b.type)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values;a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a));c.updateTargets(c.data.targets);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});b.done&&b.done()};b.prototype.loadFromArgs=function(a){var b=this;b.resetCache();
a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)};b.prototype.unload=function(a,b){var c=this;c.resetCache();b||(b=function(){});(a=a.filter(function(a){return c.hasTarget(c.data.targets,
a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),a.forEach(function(a){c.withoutFadeIn[a]=!1;c.legend&&c.legend.selectAll("."+y.legendItem+c.getTargetSelectorSuffix(a)).remove();c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):b()};b.prototype.getYDomainMin=function(a){var b=this,c=b.config,d=b.mapToIds(a),e=b.getValuesAsIdKeyed(a),f;if(0<c.data_groups.length){var g=b.hasNegativeValueInTargets(a);
for(a=0;a<c.data_groups.length;a++){var h=c.data_groups[a].filter(function(a){return 0<=d.indexOf(a)});if(0!==h.length){var m=h[0];g&&e[m]&&e[m].forEach(function(a,b){e[m][b]=0>a?a:0});for(f=1;f<h.length;f++){var k=h[f];e[k]&&e[k].forEach(function(a,c){b.axis.getId(k)!==b.axis.getId(m)||!e[m]||g&&0<+a||(e[m][c]+=+a)})}}}}return b.d3.min(Object.keys(e).map(function(a){return b.d3.min(e[a])}))};b.prototype.getYDomainMax=function(a){var b=this,c=b.config,d=b.mapToIds(a),e=b.getValuesAsIdKeyed(a),f;if(0<
c.data_groups.length){var g=b.hasPositiveValueInTargets(a);for(a=0;a<c.data_groups.length;a++){var h=c.data_groups[a].filter(function(a){return 0<=d.indexOf(a)});if(0!==h.length){var m=h[0];g&&e[m]&&e[m].forEach(function(a,b){e[m][b]=0<a?a:0});for(f=1;f<h.length;f++){var k=h[f];e[k]&&e[k].forEach(function(a,c){b.axis.getId(k)!==b.axis.getId(m)||!e[m]||g&&0>+a||(e[m][c]+=+a)})}}}}return b.d3.max(Object.keys(e).map(function(a){return b.d3.max(e[a])}))};b.prototype.getYDomain=function(a,b,c){var d=this,
e=d.config;if(d.isAxisNormalized(b))return[0,100];a=a.filter(function(a){return d.axis.getId(a.id)===b});var f=c?d.filterByXDomain(a,c):a,h="y2"===b?e.axis_y2_min:e.axis_y_min,m="y2"===b?e.axis_y2_max:e.axis_y_max,k=d.getYDomainMin(f);a=d.getYDomainMax(f);var l,n="y2"===b?e.axis_y2_center:e.axis_y_center,q=d.hasType("bar",f)&&e.bar_zerobased||d.hasType("area",f)&&e.area_zerobased;c="y2"===b?e.axis_y2_inverted:e.axis_y_inverted;var p=d.hasDataLabel()&&e.axis_rotated;var t=d.hasDataLabel()&&!e.axis_rotated;
k=z(h)?h:z(m)?k<m?k:m-10:k;a=z(m)?m:z(h)?h<a?a:h+10:a;if(0===f.length)return"y2"===b?d.y2.domain():d.y.domain();isNaN(k)&&(k=0);isNaN(a)&&(a=k);k===a&&(0>k?a=0:k=0);f=0<=k&&0<=a;var r=0>=k&&0>=a;if(z(h)&&f||z(m)&&r)q=!1;q&&(f&&(k=0),r&&(a=0));h=Math.abs(a-k);m=l=.1*h;"undefined"!==typeof n&&(k=Math.max(Math.abs(k),Math.abs(a)),a=n+k,k=n-k);p?(n=d.getDataLabelLength(k,a,"width"),p=g(d.y.range()),n=[n[0]/p,n[1]/p],m+=n[1]/(1-n[0]-n[1])*h,l+=n[0]/(1-n[0]-n[1])*h):t&&(n=d.getDataLabelLength(k,a,"height"),
m+=d.axis.convertPixelsToAxisPadding(n[1],h),l+=d.axis.convertPixelsToAxisPadding(n[0],h));"y"!==b||w(e.axis_y_padding)||(m=d.axis.getPadding(e.axis_y_padding,"top",m,h),l=d.axis.getPadding(e.axis_y_padding,"bottom",l,h));"y2"!==b||w(e.axis_y2_padding)||(m=d.axis.getPadding(e.axis_y2_padding,"top",m,h),l=d.axis.getPadding(e.axis_y2_padding,"bottom",l,h));q&&(f&&(l=k),r&&(m=-a));e=[k-l,a+m];return c?e.reverse():e};b.prototype.getXDomainMin=function(a){var b=this,c=b.config;return r(c.axis_x_min)?b.isTimeSeries()?
this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})};b.prototype.getXDomainMax=function(a){var b=this,c=b.config;return r(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})};b.prototype.getXDomainPadding=function(a){var b=this.config;a=a[1]-a[0];var c;if(this.isCategorized())a=0;else if(this.hasType("bar")){var d=this.getMaxDataCount();a=
1<d?a/(d-1)/2:.5}else a*=.01;"object"!==e(b.axis_x_padding)||w(b.axis_x_padding)?d="number"===typeof b.axis_x_padding?c=b.axis_x_padding:c=a:(d=z(b.axis_x_padding.left)?b.axis_x_padding.left:a,c=z(b.axis_x_padding.right)?b.axis_x_padding.right:a);return{left:d,right:c}};b.prototype.getXDomain=function(a){var b=[this.getXDomainMin(a),this.getXDomainMax(a)];a=b[0];var c=b[1];b=this.getXDomainPadding(b);var d=0,e=0;0!==a-c||this.isCategorized()||(this.isTimeSeries()?(a=new Date(.5*a.getTime()),c=new Date(1.5*
c.getTime())):(a=0===a?1:.5*a,c=0===c?-1:1.5*c));if(a||0===a)d=this.isTimeSeries()?new Date(a.getTime()-b.left):a-b.left;if(c||0===c)e=this.isTimeSeries()?new Date(c.getTime()+b.right):c+b.right;return[d,e]};b.prototype.updateXDomain=function(a,b,c,d,e){var f=this.config;c&&(this.x.domain(e?e:this.d3.extent(this.getXDomain(a))),this.orgXDomain=this.x.domain(),f.zoom_enabled&&this.zoom.update(),this.subX.domain(this.x.domain()),this.brush&&this.brush.updateScale(this.subX));b&&this.x.domain(e?e:!this.brush||
this.brush.empty()?this.orgXDomain:this.brush.selectionAsValue());d&&this.x.domain(this.trimXDomain(this.x.orgDomain()));return this.x.domain()};b.prototype.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0];b=b[1];a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c);b<=a[1]&&(a[0]=+a[0]-(a[1]-b),a[1]=b);return a};b.prototype.drag=function(a){var b=this,c=b.config,d=b.main,e=b.d3;if(!b.hasArcType()&&c.data_selection_enabled&&c.data_selection_multiple){var f=b.dragStart[0];var g=b.dragStart[1];var h=a[0];
a=a[1];var k=Math.min(f,h);var m=Math.max(f,h);var n=c.data_selection_grouped?b.margin.top:Math.min(g,a);var p=c.data_selection_grouped?b.height:Math.max(g,a);d.select("."+y.dragarea).attr("x",k).attr("y",n).attr("width",m-k).attr("height",p-n);d.selectAll("."+y.shapes).selectAll("."+y.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var d=e.select(this),f=d.classed(y.SELECTED),g=d.classed(y.INCLUDED);if(d.classed(y.circle)){var h=1*d.attr("cx");var q=1*d.attr("cy");
var t=b.togglePoint;h=k<h&&h<m&&n<q&&q<p}else if(d.classed(y.bar)){t=l(this);h=t.x;q=t.y;var r=t.width;var u=t.height;t=b.togglePath;h=!(m<h||h+r<k)&&!(p<q||q+u<n)}else return;h^g&&(d.classed(y.INCLUDED,!g),d.classed(y.SELECTED,!f),t.call(b,!f,d,a,c))})}};b.prototype.dragstart=function(a){var b=this.config;!this.hasArcType()&&b.data_selection_enabled&&(this.dragStart=a,this.main.select("."+y.chart).append("rect").attr("class",y.dragarea).style("opacity",.1),this.dragging=!0)};b.prototype.dragend=
function(){var a=this.config;!this.hasArcType()&&a.data_selection_enabled&&(this.main.select("."+y.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+y.shape).classed(y.INCLUDED,!1),this.dragging=!1)};b.prototype.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){return("y2"===b.axis.getId(f)?d:c).call(b,a,e)}};b.prototype.yFormat=function(a){var b=
this.config;return(b.axis_y_tick_format?b.axis_y_tick_format:this.defaultValueFormat)(a)};b.prototype.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)};b.prototype.defaultValueFormat=function(a){return z(a)?+a:""};b.prototype.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"};b.prototype.dataLabelFormat=function(a){var b=this.config.data_labels,c=function(a){return z(a)?+a:""};return"function"===typeof b.format?b.format:
"object"===e(b.format)?b.format[a]?!0===b.format[a]?c:b.format[a]:function(){return""}:c};b.prototype.initGrid=function(){var a=this.config,b=this.d3;this.grid=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",y.grid);a.grid_x_show&&this.grid.append("g").attr("class",y.xgrids);a.grid_y_show&&this.grid.append("g").attr("class",y.ygrids);a.grid_focus_show&&this.grid.append("g").attr("class",y.xgridFocus).append("line").attr("class",y.xgridFocus);this.xgrid=b.selectAll([]);a.grid_lines_front||
this.initGridLines()};b.prototype.initGridLines=function(){var a=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",y.grid+" "+y.gridLines);this.gridLines.append("g").attr("class",y.xgridLines);this.gridLines.append("g").attr("class",y.ygridLines);this.xgridLines=a.selectAll([])};b.prototype.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?
{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height};b.xgridAttr.opacity=function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1};e=b.main.select("."+y.xgrids).selectAll("."+y.xgrid).data(e);var g=e.enter().append("line").attr("class",y.xgrid).attr("x1",b.xgridAttr.x1).attr("x2",b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",
0);b.xgrid=g.merge(e);a||b.xgrid.attr("x1",b.xgridAttr.x1).attr("x2",b.xgridAttr.x2).attr("y1",b.xgridAttr.y1).attr("y2",b.xgridAttr.y2).style("opacity",b.xgridAttr.opacity);e.exit().remove()};b.prototype.updateYGrid=function(){var a=this.config,b=this.yAxis.tickValues()||this.y.ticks(a.grid_y_ticks);b=this.main.select("."+y.ygrids).selectAll("."+y.ygrid).data(b);this.ygrid=b.enter().append("line").attr("class",y.ygrid).merge(b);this.ygrid.attr("x1",a.axis_rotated?this.y:0).attr("x2",a.axis_rotated?
this.y:this.width).attr("y1",a.axis_rotated?0:this.y).attr("y2",a.axis_rotated?this.height:this.y);b.exit().remove();this.smoothLines(this.ygrid,"grid")};b.prototype.gridTextAnchor=function(a){return a.position?a.position:"end"};b.prototype.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4};b.prototype.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0};b.prototype.yGridTextX=function(a){return"start"===a.position?0:"middle"===
a.position?this.width/2:this.width};b.prototype.updateGrid=function(a){var b=this.main,c=this.config,d=this.xv.bind(this),e=this.yv.bind(this),f=this.xGridTextX.bind(this),g=this.yGridTextX.bind(this);this.grid.style("visibility",this.hasArcType()?"hidden":"visible");b.select("line."+y.xgridFocus).style("visibility","hidden");c.grid_x_show&&this.updateXGrid();var h=b.select("."+y.xgridLines).selectAll("."+y.xgridLine).data(c.grid_x_lines);var k=h.enter().append("g").attr("class",function(a){return y.xgridLine+
(a["class"]?" "+a["class"]:"")});k.append("line").attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?this.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:this.height).style("opacity",0);k.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"":"rotate(-90)").attr("x",c.axis_rotated?g:f).attr("y",d).attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);this.xgridLines=k.merge(h);h.exit().transition().duration(a).style("opacity",0).remove();
c.grid_y_show&&this.updateYGrid();b=b.select("."+y.ygridLines).selectAll("."+y.ygridLine).data(c.grid_y_lines);h=b.enter().append("g").attr("class",function(a){return y.ygridLine+(a["class"]?" "+a["class"]:"")});h.append("line").attr("x1",c.axis_rotated?e:0).attr("x2",c.axis_rotated?e:this.width).attr("y1",c.axis_rotated?0:e).attr("y2",c.axis_rotated?this.height:e).style("opacity",0);h.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"rotate(-90)":"").attr("x",
c.axis_rotated?f:g).attr("y",e).attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);this.ygridLines=h.merge(b);this.ygridLines.select("line").transition().duration(a).attr("x1",c.axis_rotated?e:0).attr("x2",c.axis_rotated?e:this.width).attr("y1",c.axis_rotated?0:e).attr("y2",c.axis_rotated?this.height:e).style("opacity",1);this.ygridLines.select("text").transition().duration(a).attr("x",c.axis_rotated?this.xGridTextX.bind(this):this.yGridTextX.bind(this)).attr("y",e).text(function(a){return a.text}).style("opacity",
1);b.exit().transition().duration(a).style("opacity",0).remove()};b.prototype.redrawGrid=function(a,b){var c=this.config,d=this.xv.bind(this),e=this.xgridLines.select("line"),f=this.xgridLines.select("text");return[(a?e.transition(b):e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?this.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:this.height).style("opacity",1),(a?f.transition(b):f).attr("x",c.axis_rotated?this.yGridTextX.bind(this):this.xGridTextX.bind(this)).attr("y",
d).text(function(a){return a.text}).style("opacity",1)]};b.prototype.showXGridFocus=function(a){var b=this.config;a=a.filter(function(a){return a&&z(a.value)});var c=this.main.selectAll("line."+y.xgridFocus),d=this.xx.bind(this);!b.tooltip_show||this.hasType("scatter")||this.hasType("stanford")||this.hasArcType()||(c.style("visibility","visible").data([a[0]]).attr(b.axis_rotated?"y1":"x1",d).attr(b.axis_rotated?"y2":"x2",d),this.smoothLines(c,"grid"))};b.prototype.hideXGridFocus=function(){this.main.select("line."+
y.xgridFocus).style("visibility","hidden")};b.prototype.updateXgridFocus=function(){var a=this.config;this.main.select("line."+y.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)};b.prototype.generateGridData=function(a,b){var c=[],d=this.main.select("."+y.axisX).selectAll(".tick").size();if("year"===a)for(b=this.getXDomain(),a=b[0].getFullYear(),b=b[1].getFullYear();a<=b;a++)c.push(new Date(a+
"-01-01 00:00:00"));else c=b.ticks(10),c.length>d&&(c=c.filter(function(a){return 0>(""+a).indexOf(".")}));return c};b.prototype.getGridFilterToRemove=function(a){return a?function(b){var c=!1;[].concat(a).forEach(function(a){if("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])c=!0});return c}:function(){return!0}};b.prototype.removeGridLines=function(a,b){var c=this.config,d=this.getGridFilterToRemove(a);a=function(a){return!d(a)};var e=b?y.xgridLine:y.ygridLine;this.main.select("."+
(b?y.xgridLines:y.ygridLines)).selectAll("."+e).filter(d).transition().duration(c.transition_duration).style("opacity",0).remove();b?c.grid_x_lines=c.grid_x_lines.filter(a):c.grid_y_lines=c.grid_y_lines.filter(a)};b.prototype.initEventRect=function(){var a=this.config;this.main.select("."+y.chart).append("g").attr("class",y.eventRects).style("fill-opacity",0);this.eventRect=this.main.select("."+y.eventRects).append("rect").attr("class",y.eventRect);a.zoom_enabled&&this.zoom&&(this.eventRect.call(this.zoom).on("dblclick.zoom",
null),a.zoom_initialRange&&this.eventRect.transition().duration(0).call(this.zoom.transform,this.zoomTransform(a.zoom_initialRange)))};b.prototype.redrawEventRect=function(){function a(){b.svg.select("."+y.eventRect).style("cursor",null);b.hideXGridFocus();b.hideTooltip();b.unexpandCircles();b.unexpandBars()}var b=this,c=b.d3,d=b.config;var e=b.width;var f=b.height;b.main.select("."+y.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null);b.eventRect.attr("x",0).attr("y",
0).attr("width",e).attr("height",f).on("mouseout",d.interaction_enabled?function(){d&&(b.hasArcType()||a())}:null).on("mousemove",d.interaction_enabled?function(){if(!b.dragging&&!b.hasArcType(e)){var e=b.filterTargetsToShow(b.data.targets);var f=c.mouse(this);var g=b.findClosestFromTargets(e,f);!b.mouseover||g&&g.id===b.mouseover.id||(d.data_onmouseout.call(b.api,b.mouseover),b.mouseover=void 0);if(g){if(e=b.isScatterOrStanfordType(g)||!d.tooltip_grouped?[g]:b.filterByX(e,g.x),e=e.map(function(a){return b.addName(a)}),
b.showTooltip(e,this),d.point_focus_expand_enabled&&(b.unexpandCircles(),e.forEach(function(a){b.expandCircles(a.index,a.id,!1)})),b.expandBars(g.index,g.id,!0),b.showXGridFocus(e),b.isBarType(g.id)||b.dist(g,f)<d.point_sensitivity)b.svg.select("."+y.eventRect).style("cursor","pointer"),b.mouseover||(d.data_onmouseover.call(b.api,g),b.mouseover=g)}else a()}}:null).on("click",d.interaction_enabled?function(){var a;if(!b.hasArcType(e)){var e=b.filterTargetsToShow(b.data.targets);var f=c.mouse(this);
(a=b.findClosestFromTargets(e,f))&&(b.isBarType(a.id)||b.dist(a,f)<d.point_sensitivity)&&(e=b.isScatterOrStanfordType(a)||!d.data_selection_grouped?[a]:b.filterByX(e,a.x),e.forEach(function(a){b.main.selectAll("."+y.shapes+b.getTargetSelectorSuffix(a.id)).selectAll("."+y.shape+"-"+a.index).each(function(){if(d.data_selection_grouped||b.isWithinShape(this,a))b.toggleShape(this,a,a.index),d.data_onclick.call(b.api,a,this)})}))}}:null).call(d.interaction_enabled&&d.data_selection_draggable&&b.drag?c.drag().on("drag",
function(){b.drag(c.mouse(this))}).on("start",function(){b.dragstart(c.mouse(this))}).on("end",function(){b.dragend()}):function(){})};b.prototype.getMousePosition=function(a){return[this.x(a.x),this.getYScale(a.id)(a.value)]};b.prototype.dispatchEvent=function(a,b){var c=this.main.select("."+y.eventRect).node(),d=c.getBoundingClientRect(),e=d.left+(b?b[0]:0);b=d.top+(b?b[1]:0);d=document.createEvent("MouseEvents");d.initMouseEvent(a,!0,!0,window,0,e,b,e,b,!1,!1,!1,!1,0,null);c.dispatchEvent(d)};
b.prototype.initLegend=function(){this.legendItemTextBox={};this.legendHasRendered=!1;this.legend=this.svg.append("g").attr("transform",this.getTranslate("legend"));this.config.legend_show?this.updateLegendWithDefaults():(this.legend.style("visibility","hidden"),this.hiddenLegendIds=this.mapToIds(this.data.targets))};b.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};b.prototype.updateSizeForLegend=
function(a,b){var c=this.config,d=this.isLegendTop?this.getCurrentPaddingTop()+c.legend_inset_y+5.5:this.currentHeight-a-this.getCurrentPaddingBottom()-c.legend_inset_y;c=this.isLegendLeft?this.getCurrentPaddingLeft()+c.legend_inset_x+.5:this.currentWidth-b-this.getCurrentPaddingRight()-c.legend_inset_x+.5;this.margin3={top:this.isLegendRight?0:this.isLegendInset?d:this.currentHeight-a,right:NaN,bottom:0,left:this.isLegendRight?this.currentWidth-b:this.isLegendInset?c:0}};b.prototype.transformLegend=
function(a){(a?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))};b.prototype.updateLegendStep=function(a){this.legendStep=a};b.prototype.updateLegendItemWidth=function(a){this.legendItemWidth=a};b.prototype.updateLegendItemHeight=function(a){this.legendItemHeight=a};b.prototype.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0};b.prototype.getLegendHeight=function(){var a=
0;this.config.legend_show&&(a=this.isLegendRight?this.currentHeight:Math.max(20,this.legendItemHeight)*(this.legendStep+1));return a};b.prototype.opacityForLegend=function(a){return a.classed(y.legendItemHidden)?null:1};b.prototype.opacityForUnfocusedLegend=function(a){return a.classed(y.legendItemHidden)?null:.3};b.prototype.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a);c.legend.selectAll("."+y.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(y.legendItemFocused,
b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,c.d3.select(this))})};b.prototype.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+y.legendItem).classed(y.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})};b.prototype.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||
b.updateLegendWithDefaults());b.removeHiddenLegendIds(a);b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})};b.prototype.hideLegend=function(a){var b=this.config;b.legend_show&&w(a)&&(b.legend_show=!1,this.legend.style("visibility","hidden"));this.addHiddenLegendIds(a);this.legend.selectAll(this.selectorLegends(a)).style("opacity",0).style("visibility","hidden")};b.prototype.clearLegendItemTextBoxCache=
function(){this.legendItemTextBox={}};b.prototype.updateLegend=function(a,b,c){function d(a,b){f.legendItemTextBox[b]||(f.legendItemTextBox[b]=f.getTextRect(a.textContent,y.legendItem,a));return f.legendItemTextBox[b]}function e(b,c,e){function k(a,b){b||(G=(x-n-z)/2,10>G&&(G=(x-z)/2,n=0,w++));A[a]=w;u[w]=f.isLegendInset?10:G;q[a]=n;n+=z}var r=0===e;e=e===a.length-1;b=d(b,c);e=b.width+l+(!e||f.isLegendRight||f.isLegendInset?10:0)+g.legend_padding;b=b.height+4;var z=f.isLegendRight||f.isLegendInset?
b:e,x=f.isLegendRight||f.isLegendInset?f.getLegendHeight():f.getLegendWidth();r&&(m=h=w=n=0);if(g.legend_show&&!f.isLegendToShow(c))p[c]=t[c]=A[c]=q[c]=0;else{p[c]=e;t[c]=b;if(!h||e>=h)h=e;if(!m||b>=m)m=b;r=f.isLegendRight||f.isLegendInset?m:h;if(g.legend_equally){Object.keys(p).forEach(function(a){p[a]=h});Object.keys(t).forEach(function(a){t[a]=m});var G=(x-r*a.length)/2;10>G?(w=n=0,a.forEach(function(a){k(a)})):k(c,!0)}else k(c)}}var f=this,g=f.config,h=0,m=0,l=g.legend_item_tile_width+5,n=0,q=
{},p={},t={},u=[0],A={},w=0;a=a.filter(function(a){return!r(g.data_names[a])||null!==g.data_names[a]});b=b||{};var z=k(b,"withTransition",!0);var x=k(b,"withTransitionForTransform",!0);f.isLegendInset&&(w=g.legend_inset_step?g.legend_inset_step:a.length,f.updateLegendStep(w));if(f.isLegendRight){var G=function(a){return h*A[a]};var B=function(a){return u[A[a]]+q[a]}}else f.isLegendInset?(G=function(a){return h*A[a]+10},B=function(a){return u[A[a]]+q[a]}):(G=function(a){return u[A[a]]+q[a]},B=function(a){return m*
A[a]});var D=function(a,b){return G(a,b)+4+g.legend_item_tile_width};var E=function(a,b){return B(a,b)+9};var H=function(a,b){return G(a,b)};var Na=function(a,b){return B(a,b)-5};b=function(a,b){return G(a,b)-2};var Ra=function(a,b){return G(a,b)-2+g.legend_item_tile_width};var Ca=function(a,b){return B(a,b)+4};var R=f.legend.selectAll("."+y.legendItem).data(a).enter().append("g").attr("class",function(a){return f.generateClass(y.legendItem,a)}).style("visibility",function(a){return f.isLegendToShow(a)?
"visible":"hidden"}).style("cursor","pointer").on("click",function(a){g.legend_item_onclick?g.legend_item_onclick.call(f,a):f.d3.event.altKey?(f.api.hide(),f.api.show(a)):(f.api.toggle(a),f.isTargetToShow(a)?f.api.focus(a):f.api.revert())}).on("mouseover",function(a){g.legend_item_onmouseover?g.legend_item_onmouseover.call(f,a):(f.d3.select(this).classed(y.legendItemFocused,!0),!f.transiting&&f.isTargetToShow(a)&&f.api.focus(a))}).on("mouseout",function(a){g.legend_item_onmouseout?g.legend_item_onmouseout.call(f,
a):(f.d3.select(this).classed(y.legendItemFocused,!1),f.api.revert())});R.append("text").text(function(a){return r(g.data_names[a])?g.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",f.isLegendRight||f.isLegendInset?D:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:E);R.append("rect").attr("class",y.legendItemEvent).style("fill-opacity",0).attr("x",f.isLegendRight||f.isLegendInset?H:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:Na);R.append("line").attr("class",
y.legendItemTile).style("stroke",f.color).style("pointer-events","none").attr("x1",f.isLegendRight||f.isLegendInset?b:-200).attr("y1",f.isLegendRight||f.isLegendInset?-200:Ca).attr("x2",f.isLegendRight||f.isLegendInset?Ra:-200).attr("y2",f.isLegendRight||f.isLegendInset?-200:Ca).attr("stroke-width",g.legend_item_tile_height);R=f.legend.select("."+y.legendBackground+" rect");f.isLegendInset&&0<h&&0===R.size()&&(R=f.legend.insert("g","."+y.legendItem).attr("class",y.legendBackground).append("rect"));
var Da=f.legend.selectAll("text").data(a).text(function(a){return r(g.data_names[a])?g.data_names[a]:a}).each(function(a,b){e(this,a,b)});(z?Da.transition():Da).attr("x",D).attr("y",E);D=f.legend.selectAll("rect."+y.legendItemEvent).data(a);(z?D.transition():D).attr("width",function(a){return p[a]}).attr("height",function(a){return t[a]}).attr("x",H).attr("y",Na);H=f.legend.selectAll("line."+y.legendItemTile).data(a);(z?H.transition():H).style("stroke",f.levelColor?function(a){return f.levelColor(f.cache[a].values[0].value)}:
f.color).attr("x1",b).attr("y1",Ca).attr("x2",Ra).attr("y2",Ca);R&&(z?R.transition():R).attr("height",f.getLegendHeight()-12).attr("width",h*(w+1)+10);f.legend.selectAll("."+y.legendItem).classed(y.legendItemHidden,function(a){return!f.isTargetToShow(a)});f.updateLegendItemWidth(h);f.updateLegendItemHeight(m);f.updateLegendStep(w);f.updateSizes();f.updateScales();f.updateSvgSize();f.transformAll(x,c);f.legendHasRendered=!0};b.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",
this.clipPath).attr("class",y.regions)};b.prototype.updateRegion=function(a){var b=this.config;this.region.style("visibility",this.hasArcType()?"hidden":"visible");b=this.main.select("."+y.regions).selectAll("."+y.region).data(b.regions);this.mainRegion=b.enter().append("rect").attr("x",this.regionX.bind(this)).attr("y",this.regionY.bind(this)).attr("width",this.regionWidth.bind(this)).attr("height",this.regionHeight.bind(this)).style("fill-opacity",0).merge(b).attr("class",this.classRegion.bind(this));
b.exit().transition().duration(a).style("opacity",0).remove()};b.prototype.redrawRegion=function(a,b){var c=this.mainRegion;return[(a?c.transition(b):c).attr("x",this.regionX.bind(this)).attr("y",this.regionY.bind(this)).attr("width",this.regionWidth.bind(this)).attr("height",this.regionHeight.bind(this)).style("fill-opacity",function(a){return z(a.opacity)?a.opacity:.1})]};b.prototype.regionX=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?
"start"in a?c(a.start):0:0:b.axis_rotated?0:"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0};b.prototype.regionY=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?0:"end"in a?c(a.end):0:b.axis_rotated?"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0:0};b.prototype.regionWidth=function(a){var b=this.config,c=this.regionX(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?
"end"in a?d(a.end):this.width:this.width:b.axis_rotated?this.width:"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.width;return a<c?0:a-c};b.prototype.regionHeight=function(a){var b=this.config,c=this.regionY(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?this.height:"start"in a?d(a.start):this.height:b.axis_rotated?"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.height:this.height;return a<c?0:a-c};b.prototype.isRegionOnX=
function(a){return!a.axis||"x"===a.axis};b.prototype.getScale=function(a,b,c){return(c?this.d3.scaleTime():this.d3.scaleLinear()).range([a,b])};b.prototype.getX=function(a,b,c,d){var e=this.getScale(a,b,this.isTimeSeries()),f=c?e.domain(c):e,g;this.isCategorized()?(d=d||function(){return 0},e=function(a,b){a=f(a)+d(a);return b?a:Math.ceil(a)}):e=function(a,b){a=f(a);return b?a:Math.ceil(a)};for(g in f)e[g]=f[g];e.orgDomain=function(){return f.domain()};this.isCategorized()&&(e.domain=function(a){if(!arguments.length)return a=
this.orgDomain(),[a[0],a[1]+1];f.domain(a);return e});return e};b.prototype.getY=function(a,b,c){a=this.getScale(a,b,this.isTimeSeriesY());c&&a.domain(c);return a};b.prototype.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y};b.prototype.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY};b.prototype.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0;a.xMax=b.axis_rotated?a.height:a.width;a.yMin=b.axis_rotated?0:a.height;a.yMax=
b.axis_rotated?a.width:1;a.subXMin=a.xMin;a.subXMax=a.xMax;a.subYMin=b.axis_rotated?0:a.height2;a.subYMax=b.axis_rotated?a.width2:1;a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()});a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain());a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain());a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()});a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain());
a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain());a.xAxisTickFormat=a.axis.getXAxisTickFormat();a.xAxisTickValues=a.axis.getXAxisTickValues();a.yAxisTickValues=a.axis.getYAxisTickValues();a.y2AxisTickValues=a.axis.getY2AxisTickValues();a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.yAxis=a.axis.getYAxis("y",a.y,a.yOrient,a.yAxisTickValues,
b.axis_y_tick_outer);a.y2Axis=a.axis.getYAxis("y2",a.y2,a.y2Orient,a.y2AxisTickValues,b.axis_y2_tick_outer);c||a.brush&&a.brush.updateScale(a.subX);a.updateArc&&a.updateArc()};b.prototype.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node());d.main.select("."+y.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+y.selectedCircle+"-"+
c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(y.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)};b.prototype.unselectPoint=function(a,b,c){this.config.data_onunselected.call(this.api,b,a.node());this.main.select("."+y.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+y.selectedCircle+"-"+c).transition().duration(100).attr("r",
0).remove()};b.prototype.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)};b.prototype.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})};b.prototype.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})};
b.prototype.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)};b.prototype.getToggle=function(a,b){if("circle"===a.nodeName)var c=this.isStepType(b)?function(){}:this.togglePoint;else"path"===a.nodeName&&(c=this.togglePath);return c};b.prototype.toggleShape=function(a,b,c){var d=this.d3,e=this.config,f=d.select(a),g=f.classed(y.SELECTED),h=this.getToggle(a,b).bind(this);e.data_selection_enabled&&e.data_selection_isselectable(b)&&(e.data_selection_multiple||this.main.selectAll("."+
y.shapes+(e.data_selection_grouped?this.getTargetSelectorSuffix(b.id):"")).selectAll("."+y.shape).each(function(a,b){var c=d.select(this);c.classed(y.SELECTED)&&h(!1,c.classed(y.SELECTED,!1),a,b)}),f.classed(y.SELECTED,!g),h(!g,f,b,c))};b.prototype.initBar=function(){this.main.select("."+y.chart).append("g").attr("class",y.chartBars)};b.prototype.updateTargetsForBar=function(a){var b=this.config,c=this.classChartBar.bind(this),d=this.classBars.bind(this),e=this.classFocus.bind(this);this.main.select("."+
y.chartBars).selectAll("."+y.chartBar).data(a).attr("class",function(a){return c(a)+e(a)}).enter().append("g").attr("class",c).style("pointer-events","none").append("g").attr("class",d).style("cursor",function(a){return b.data_selection_isselectable(a)?"pointer":null})};b.prototype.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};c=b.main.selectAll("."+y.bars).selectAll("."+y.bar).data(c);d=c.enter().append("path").attr("class",
d).style("stroke",f).style("fill",f);b.mainBar=d.merge(c).style("opacity",e);c.exit().transition().duration(a).style("opacity",0)};b.prototype.redrawBar=function(a,b,c){return[(b?this.mainBar.transition(c):this.mainBar).attr("d",a).style("stroke",this.color).style("fill",this.color).style("opacity",1)]};b.prototype.getBarW=function(a,b){var c=this.config;a="number"===typeof c.bar_width?c.bar_width:b?a.tickInterval()*c.bar_width_ratio/b:0;return c.bar_width_max&&a>c.bar_width_max?c.bar_width_max:a};
b.prototype.getBars=function(a,b){return(b?this.main.selectAll("."+y.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+y.bar+(z(a)?"-"+a:""))};b.prototype.expandBars=function(a,b,c){c&&this.unexpandBars();this.getBars(a,b).classed(y.EXPANDED,!0)};b.prototype.unexpandBars=function(a){this.getBars(a).classed(y.EXPANDED,!1)};b.prototype.generateDrawBar=function(a,b){var c=this.config,d=this.generateGetBarPoints(a,b);return function(a,b){a=d(a,b);b=c.axis_rotated?1:0;var e=c.axis_rotated?
0:1;return"M "+a[0][b]+","+a[0][e]+" L"+a[1][b]+","+a[1][e]+" L"+a[2][b]+","+a[2][e]+" L"+a[3][b]+","+a[3][e]+" z"}};b.prototype.generateGetBarPoints=function(a,b){var c=this,d=a.__max__+1,e=c.getBarW(b?c.subXAxis:c.xAxis,d),f=c.getShapeX(e,d,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isBarType,a,!!b),k=c.config.bar_space/2*e,m=b?c.getSubYScale:c.getYScale;return function(a,b){var d=m.call(c,a.id)(0);b=h(a,b)||d;var l=f(a),n=g(a);c.config.axis_rotated&&(0<a.value&&n<d||0>a.value&&d<n)&&(n=d);
n-=d-b;return[[l+k,b],[l+k,n],[l+e-k,n],[l+e-k,b]]}};b.prototype.isWithinBar=function(a,b){if(2>b.pathSegList.numberOfItems)return!1;var c=n(b),d=b.pathSegList.getItem(0),e=b.pathSegList.getItem(1);b=Math.min(d.x,e.x);d=Math.min(d.y,e.y);e=c.width;c=c.height;return b-2<a[0]&&a[0]<b+e+2&&d-2<a[1]&&a[1]<d+c+2};b.prototype.getShapeIndices=function(a){var b=this.config,c={},d=0,e,f;this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(e=0;e<b.data_groups.length;e++)if(!(0>
b.data_groups[e].indexOf(a.id)))for(f=0;f<b.data_groups[e].length;f++)if(b.data_groups[e][f]in c){c[a.id]=c[b.data_groups[e][f]];break}t(c[a.id])&&(c[a.id]=d++)});c.__max__=d-1;return c};b.prototype.getShapeX=function(a,b,c,d){var e=d?this.subX:this.x;return function(d){var f=d.id in c?c[d.id]:0;return d.x||0===d.x?e(d.x)-a*(b/2-f):0}};b.prototype.getShapeY=function(a){var b=this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(b.isTargetNormalized(c.id)?b.getRatio("index",c,!0):
c.value)}};b.prototype.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),k=h(0),m=k;e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values,l=d.isTargetNormalized(a.id),n=e.map(function(a){return l?d.getRatio("index",a,!0):a.value});if(c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)){if(t(e[g])||
+e[g].x!==+a.x)g=-1,e.forEach(function(b,c){(b.x.constructor===Date?+b.x:b.x)===(a.x.constructor===Date?+a.x:a.x)&&(g=c)});g in e&&0<=e[g].value*a.value&&(m+=h(n[g])-k)}});return m}};b.prototype.isWithinShape=function(a,b){var c=this.d3.select(a),d;this.isTargetToShow(b.id)?"circle"===a.nodeName?d=this.isStepType(b)?this.isWithinStep(a,this.getYScale(b.id)(b.value)):this.isWithinCircle(a,1.5*this.pointSelectR(b)):"path"===a.nodeName&&(d=c.classed(y.bar)?this.isWithinBar(this.d3.mouse(a),a):!0):d=
!1;return d};b.prototype.getInterpolate=function(a){var b=this.d3;b={linear:b.curveLinear,"linear-closed":b.curveLinearClosed,basis:b.curveBasis,"basis-open":b.curveBasisOpen,"basis-closed":b.curveBasisClosed,bundle:b.curveBundle,cardinal:b.curveCardinal,"cardinal-open":b.curveCardinalOpen,"cardinal-closed":b.curveCardinalClosed,monotone:b.curveMonotoneX,step:b.curveStep,"step-before":b.curveStepBefore,"step-after":b.curveStepAfter};return this.isSplineType(a)?b[this.config.spline_interpolation_type]||
b.cardinal:this.isStepType(a)?b[this.config.line_step_type]:b.linear};b.prototype.initLine=function(){this.main.select("."+y.chart).append("g").attr("class",y.chartLines)};b.prototype.updateTargetsForLine=function(a){var b=this,c=b.config,d=b.classChartLine.bind(b),e=b.classLines.bind(b),f=b.classAreas.bind(b),g=b.classCircles.bind(b),h=b.classFocus.bind(b);var k=b.main.select("."+y.chartLines).selectAll("."+y.chartLine).data(a).attr("class",function(a){return d(a)+h(a)}).enter().append("g").attr("class",
d).style("opacity",0).style("pointer-events","none");k.append("g").attr("class",e);k.append("g").attr("class",f);k.append("g").attr("class",function(a){return b.generateClass(y.selectedCircles,a.id)});k.append("g").attr("class",g).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null});a.forEach(function(a){b.main.selectAll("."+y.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+y.selectedCircle).each(function(b){b.value=a.values[b.index].value})})};b.prototype.updateLine=
function(a){var b=this,c=b.main.selectAll("."+y.lines).selectAll("."+y.line).data(b.lineData.bind(b)),d=c.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color);b.mainLine=d.merge(c).style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null);c.exit().transition().duration(a).style("opacity",0)};b.prototype.redrawLine=function(a,b,c){return[(b?this.mainLine.transition(c):this.mainLine).attr("d",
a).style("stroke",this.color).style("opacity",1)]};b.prototype.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale;a=function(a){return(b?c.subxx:c.xx).call(c,a)};var h=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(a.value)};e=d.axis_rotated?e.x(h).y(a):e.x(a).y(h);d.line_connectNull||(e=e.defined(function(a){return null!=a.value}));return function(a){var f=d.line_connectNull?c.filterRemoveNull(a.values):
a.values,h=b?c.subX:c.x,k=g.call(c,a.id),m=0,l=0;c.isLineType(a)?d.data_regions[a.id]?a=c.lineWithRegions(f,h,k,d.data_regions[a.id]):(c.isStepType(a)&&(f=c.convertValuesToStep(f)),a=e.curve(c.getInterpolate(a))(f)):(f[0]&&(m=h(f[0].x),l=k(f[0].value)),a=d.axis_rotated?"M "+l+" "+m:"M "+m+" "+l);return a?a:"M 0 0"}};b.prototype.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=c.getShapeX(0,a.__max__+1,a,!!b),f=c.getShapeY(!!b),g=c.getShapeOffset(c.isLineType,a,!!b),h=b?c.getSubYScale:c.getYScale;
return function(a,b){var k=h.call(c,a.id)(0);b=g(a,b)||k;var m=e(a),l=f(a);d.axis_rotated&&(0<a.value&&l<k||0>a.value&&k<l)&&(l=k);return[[m,l-(k-b)],[m,l-(k-b)],[m,l-(k-b)],[m,l-(k-b)]]}};b.prototype.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g=this.config,h,k="M",m=this.isCategorized()?.5:0,l=[];if(r(d))for(h=0;h<d.length;h++)l[h]={},t(d[h].start)?
l[h].start=a[0].x:l[h].start=this.isTimeSeries()?this.parseDate(d[h].start):d[h].start,t(d[h].end)?l[h].end=a[a.length-1].x:l[h].end=this.isTimeSeries()?this.parseDate(d[h].end):d[h].end;var n=g.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)};var q=g.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)};d=this.isTimeSeries()?function(a,d,e,h){var k=a.x.getTime();d=d.x-a.x;a=new Date(k+d*e);k=new Date(k+d*(e+h));e=g.axis_rotated?[[c(u(e)),b(a)],[c(u(e+h)),b(k)]]:
[[b(a),c(u(e))],[b(k),c(u(e+h))]];return f(e)}:function(a,d,e,h){a=g.axis_rotated?[[c(u(e),!0),b(p(e))],[c(u(e+h),!0),b(p(e+h))]]:[[b(p(e),!0),c(u(e))],[b(p(e+h),!0),c(u(e+h))]];return f(a)};for(h=0;h<a.length;h++)if(t(l)||!e(a[h].x,l))k+=" "+n(a[h])+" "+q(a[h]);else{var p=this.getScale(a[h-1].x+m,a[h].x+m,this.isTimeSeries());var u=this.getScale(a[h-1].value,a[h].value);var A=b(a[h].x)-b(a[h-1].x);var w=c(a[h].value)-c(a[h-1].value);A=Math.sqrt(Math.pow(A,2)+Math.pow(w,2));w=2/A;var z=2*w;for(A=
w;1>=A;A+=z)k+=d(a[h-1],a[h],A,w)}return k};b.prototype.updateArea=function(a){var b=this,c=b.d3,d=b.main.selectAll("."+y.areas).selectAll("."+y.area).data(b.lineData.bind(b)),e=d.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.mainArea=e.merge(d).style("opacity",b.orgAreaOpacity);d.exit().transition().duration(a).style("opacity",0)};b.prototype.redrawArea=function(a,b,c){return[(b?
this.mainArea.transition(c):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};b.prototype.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale;a=function(a){return(b?c.subxx:c.xx).call(c,a)};var h=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},k=function(a,b){return 0<d.data_groups.length?f(a,b)[1][1]:g.call(c,a.id)(a.value)};e=d.axis_rotated?
e.x0(h).x1(k).y(a):e.x(a).y0(d.area_above?0:h).y1(k);d.line_connectNull||(e=e.defined(function(a){return null!==a.value}));return function(a){var b=d.line_connectNull?c.filterRemoveNull(a.values):a.values,f=0,g=0;c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),a=e.curve(c.getInterpolate(a))(b)):(b[0]&&(f=c.x(b[0].x),g=c.getYScale(a.id)(b[0].value)),a=d.axis_rotated?"M "+g+" "+f:"M "+f+" "+g);return a?a:"M 0 0"}};b.prototype.getAreaBaseValue=function(){return 0};b.prototype.generateGetAreaPoints=
function(a,b){var c=this,d=c.config,e=c.getShapeX(0,a.__max__+1,a,!!b),f=c.getShapeY(!!b),g=c.getShapeOffset(c.isAreaType,a,!!b),h=b?c.getSubYScale:c.getYScale;return function(a,b){var k=h.call(c,a.id)(0);b=g(a,b)||k;var m=e(a),l=f(a);d.axis_rotated&&(0<a.value&&l<k||0>a.value&&k<l)&&(l=k);return[[m,b],[m,l-(k-b)],[m,l-(k-b)],[m,b]]}};b.prototype.updateCircle=function(a,b){var c=this.main.selectAll("."+y.circles).selectAll("."+y.circle).data(this.lineOrScatterOrStanfordData.bind(this));this.mainCircle=
c.enter().append("circle").attr("shape-rendering",this.isStanfordGraphType()?"crispEdges":"").attr("class",this.classCircle.bind(this)).attr("cx",a).attr("cy",b).attr("r",this.pointR.bind(this)).style("color",this.isStanfordGraphType()?this.getStanfordPointColor.bind(this):this.color).merge(c).style("opacity",this.isStanfordGraphType()?1:this.initialOpacityForCircle.bind(this));c.exit().style("opacity",0)};b.prototype.redrawCircle=function(a,b,c,d){var e=this.main.selectAll("."+y.selectedCircle);
return[(c?this.mainCircle.transition(d):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("color",this.isStanfordGraphType()?this.getStanfordPointColor.bind(this):this.color).attr("cx",a).attr("cy",b),(c?e.transition(d):e).attr("cx",a).attr("cy",b)]};b.prototype.circleX=function(a){return a.x||0===a.x?this.x(a.x):null};b.prototype.updateCircleY=function(){var a=this;if(0<a.config.data_groups.length){var b=a.getShapeIndices(a.isLineType);var c=a.generateGetLinePoints(b);a.circleY=
function(a,b){return c(a,b)[0][1]}}else a.circleY=function(b){return a.getYScale(b.id)(b.value)}};b.prototype.getCircles=function(a,b){return(b?this.main.selectAll("."+y.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+y.circle+(z(a)?"-"+a:""))};b.prototype.expandCircles=function(a,b,c){var d=this.pointExpandedR.bind(this);c&&this.unexpandCircles();this.getCircles(a,b).classed(y.EXPANDED,!0).attr("r",d)};b.prototype.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(y.EXPANDED)}).classed(y.EXPANDED,
!1).attr("r",c)};b.prototype.pointR=function(a){var b=this.config;return this.isStepType(a)?0:u(b.point_r)?b.point_r(a):b.point_r};b.prototype.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?u(b.point_focus_expand_r)?b.point_focus_expand_r(a):b.point_focus_expand_r?b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)};b.prototype.pointSelectR=function(a){var b=this.config;return u(b.point_select_r)?b.point_select_r(a):b.point_select_r?b.point_select_r:4*this.pointR(a)};
b.prototype.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a);c=c.select(a);a=+c.attr("cx");c=+c.attr("cy");return Math.sqrt(Math.pow(a-d[0],2)+Math.pow(c-d[1],2))<b};b.prototype.isWithinStep=function(a,b){return 30>Math.abs(b-this.d3.mouse(a)[1])};b.prototype.getCurrentWidth=function(){var a=this.config;return a.size_width?a.size_width:this.getParentWidth()};b.prototype.getCurrentHeight=function(){var a=this.config,b=a.size_height?a.size_height:this.getParentHeight();return 0<b?b:320/(this.hasType("gauge")&&
!a.gauge_fullCircle?2:1)};b.prototype.getCurrentPaddingTop=function(){var a=this.config;a=z(a.padding_top)?a.padding_top:0;this.title&&this.title.node()&&(a+=this.getTitlePadding());return a};b.prototype.getCurrentPaddingBottom=function(){var a=this.config;return z(a.padding_bottom)?a.padding_bottom:0};b.prototype.getCurrentPaddingLeft=function(a){var b=this.config;return z(b.padding_left)?b.padding_left:b.axis_rotated?!b.axis_x_show||b.axis_x_inner?1:Math.max(10*Math.ceil(this.getAxisWidthByAxisId("x",
a)/10),40):!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:10*Math.ceil(this.getAxisWidthByAxisId("y",a)/10)};b.prototype.getCurrentPaddingRight=function(){var a=this.config,b=this.isLegendRight?this.getLegendWidth()+20:0;a=z(a.padding_right)?a.padding_right+1:a.axis_rotated?10+b:!a.axis_y2_show||a.axis_y2_inner?2+b+(this.axis.getY2AxisLabelPosition().isOuter?20:0):10*Math.ceil(this.getAxisWidthByAxisId("y2")/10)+b;this.colorScale&&this.colorScale.node()&&(a+=this.getColorScalePadding());
return a};b.prototype.getParentRectValue=function(a){for(var b=this.selectChart.node(),c;b&&"BODY"!==b.tagName;){try{c=b.getBoundingClientRect()[a]}catch(I){"width"===a&&(c=b.offsetWidth)}if(c)break;b=b.parentNode}return c};b.prototype.getParentWidth=function(){return this.getParentRectValue("width")};b.prototype.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?+a.replace("px",""):0};b.prototype.getSvgLeft=function(a){var b=this.config,c=b.axis_rotated||!b.axis_rotated&&
!b.axis_y_inner;c=(b=this.main.select("."+(b.axis_rotated?y.axisX:y.axisY)).node())&&c?b.getBoundingClientRect():{right:0};b=this.selectChart.node().getBoundingClientRect();var d=this.hasArcType();a=c.right-b.left-(d?0:this.getCurrentPaddingLeft(a));return 0<a?a:0};b.prototype.getAxisWidthByAxisId=function(a,b){var c=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,b)+(c.isInner?20:40)};b.prototype.getHorizontalAxisHeight=function(a){var b=this.config,c=30;if("x"===a&&!b.axis_x_show)return 8;
if("x"===a&&b.axis_x_height)return b.axis_x_height;if("y"===a&&!b.axis_y_show)return!b.legend_show||this.isLegendRight||this.isLegendInset?1:10;if("y2"===a&&!b.axis_y2_show)return this.rotated_padding_top;"x"===a&&!b.axis_rotated&&b.axis_x_tick_rotate&&(c=30+this.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-Math.abs(b.axis_x_tick_rotate))/180));"y"===a&&b.axis_rotated&&b.axis_y_tick_rotate&&(c=30+this.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-Math.abs(b.axis_y_tick_rotate))/180));return c+(this.axis.getLabelPositionById(a).isInner?
0:10)+("y2"===a?-10:0)};b.prototype.initBrush=function(a){var b=this,c=b.d3;b.brush=(b.config.axis_rotated?c.brushY():c.brushX()).on("brush",function(){var a=c.event.sourceEvent;a&&"zoom"===a.type||b.redrawForBrush()}).on("end",function(){var a=c.event.sourceEvent;a&&"zoom"===a.type||b.brush.empty()&&a&&"end"!==a.type&&b.brush.clear()});b.brush.updateExtent=function(){var a=this.scale.range();this.extent(b.config.axis_rotated?[[0,a[0]],[b.width2,a[1]]]:[[a[0],0],[a[1],b.height2]]);return this};b.brush.updateScale=
function(a){this.scale=a;return this};b.brush.update=function(a){this.updateScale(a||b.subX).updateExtent();b.context.select("."+y.brush).call(this)};b.brush.clear=function(){b.context.select("."+y.brush).call(b.brush.move,null)};b.brush.selection=function(){return c.brushSelection(b.context.select("."+y.brush).node())};b.brush.selectionAsValue=function(a,c){if(a){if(b.context){a=[this.scale(a[0]),this.scale(a[1])];var d=b.context.select("."+y.brush);c&&(d=d.transition());b.brush.move(d,a)}return[]}a=
b.brush.selection()||[0,0];return[this.scale.invert(a[0]),this.scale.invert(a[1])]};b.brush.empty=function(){var a=b.brush.selection();return!a||a[0]===a[1]};return b.brush.updateScale(a)};b.prototype.initSubchart=function(){var a=this.config,b=this.context=this.svg.append("g").attr("transform",this.getTranslate("context"));b.style("visibility",a.subchart_show?"visible":"hidden");b.append("g").attr("clip-path",this.clipPathForSubchart).attr("class",y.chart);b.select("."+y.chart).append("g").attr("class",
y.chartBars);b.select("."+y.chart).append("g").attr("class",y.chartLines);b.append("g").attr("clip-path",this.clipPath).attr("class",y.brush);this.axes.subx=b.append("g").attr("class",y.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",a.axis_rotated?"":this.clipPathForXAxis)};b.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent();this.context.select("."+y.brush).call(this.brush)};b.prototype.updateTargetsForSubchart=function(a){var b=this.context,c=this.config,
d=this.classChartBar.bind(this),e=this.classBars.bind(this),f=this.classChartLine.bind(this),g=this.classLines.bind(this),h=this.classAreas.bind(this);if(c.subchart_show){var k=b.select("."+y.chartBars).selectAll("."+y.chartBar).data(a);var l=k.enter().append("g").style("opacity",0);l.merge(k).attr("class",d);l.append("g").attr("class",e);l=b.select("."+y.chartLines).selectAll("."+y.chartLine).data(a);a=l.enter().append("g").style("opacity",0);a.merge(l).attr("class",f);a.append("g").attr("class",
g);a.append("g").attr("class",h);b.selectAll("."+y.brush+" rect").attr(c.axis_rotated?"width":"height",c.axis_rotated?this.width2:this.height2)}};b.prototype.updateBarForSubchart=function(a){var b=this.context.selectAll("."+y.bars).selectAll("."+y.bar).data(this.barData.bind(this)),c=b.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);b.exit().transition().duration(a).style("opacity",0).remove();this.contextBar=c.merge(b).style("opacity",
this.initialOpacity.bind(this))};b.prototype.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)};b.prototype.updateLineForSubchart=function(a){var b=this.context.selectAll("."+y.lines).selectAll("."+y.line).data(this.lineData.bind(this)),c=b.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);b.exit().transition().duration(a).style("opacity",0).remove();this.contextLine=
c.merge(b).style("opacity",this.initialOpacity.bind(this))};b.prototype.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)};b.prototype.updateAreaForSubchart=function(a){var b=this,c=b.d3,d=b.context.selectAll("."+y.areas).selectAll("."+y.area).data(b.lineData.bind(b)),e=d.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=
+c.select(this).style("opacity");return 0});d.exit().transition().duration(a).style("opacity",0).remove();b.contextArea=e.merge(d).style("opacity",0)};b.prototype.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)};b.prototype.redrawSubchart=function(a,b,c,d,e,f,g){b=this.d3;d=this.config;this.context.style("visibility",d.subchart_show?"visible":"hidden");
d.subchart_show&&(b.event&&"zoom"===b.event.type&&this.brush.selectionAsValue(this.x.orgDomain()),a&&(this.brush.empty()||this.brush.selectionAsValue(this.x.orgDomain()),a=this.generateDrawArea(e,!0),f=this.generateDrawBar(f,!0),g=this.generateDrawLine(g,!0),this.updateBarForSubchart(c),this.updateLineForSubchart(c),this.updateAreaForSubchart(c),this.redrawBarForSubchart(f,c,c),this.redrawLineForSubchart(g,c,c),this.redrawAreaForSubchart(a,c,c)))};b.prototype.redrawForBrush=function(){var a=this.x,
b=this.d3;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1});var c=b.event.selection||this.brush.scale.range();this.main.select("."+y.eventRect).call(this.zoom.transform,b.zoomIdentity.scale(this.width/(c[1]-c[0])).translate(-c[0],0));this.config.subchart_onbrush.call(this.api,a.orgDomain())};b.prototype.transformContext=function(a,b){b&&b.axisSubX?b=b.axisSubX:(b=this.context.select("."+y.axisX),a&&(b=b.transition()));
this.context.attr("transform",this.getTranslate("context"));b.attr("transform",this.getTranslate("subx"))};b.prototype.getDefaultSelection=function(){var a=this.config;a=u(a.axis_x_selection)?a.axis_x_selection(this.getXDomain(this.data.targets)):a.axis_x_selection;this.isTimeSeries()&&(a=[this.parseDate(a[0]),this.parseDate(a[1])]);return a};b.prototype.initText=function(){this.main.select("."+y.chart).append("g").attr("class",y.chartTexts);this.mainText=this.d3.selectAll([])};b.prototype.updateTargetsForText=
function(a){var b=this.classChartText.bind(this),c=this.classTexts.bind(this),d=this.classFocus.bind(this);a=this.main.select("."+y.chartTexts).selectAll("."+y.chartText).data(a);var e=a.enter().append("g").attr("class",b).style("opacity",0).style("pointer-events","none");e.append("g").attr("class",c);e.merge(a).attr("class",function(a){return b(a)+d(a)})};b.prototype.updateText=function(a,b,c){var d=this,e=d.config,f=d.barOrLineData.bind(d),g=d.classText.bind(d);f=d.main.selectAll("."+y.texts).selectAll("."+
y.text).data(f);a=f.enter().append("text").attr("class",g).attr("text-anchor",function(a){return e.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").attr("x",a).attr("y",b).style("fill",function(a){return d.color(a)}).style("fill-opacity",0);d.mainText=a.merge(f).text(function(a,b,c){return d.dataLabelFormat(a.id)(a.value,a.id,b,c)});f.exit().transition().duration(c).style("fill-opacity",0).remove()};b.prototype.redrawText=function(a,b,c,d,e){return[(d?this.mainText.transition(e):
this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]};b.prototype.getTextRect=function(a,b,c){var d=this.d3.select("body").append("div").classed("c3",!0),e=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);c=this.d3.select(c).style("font");var f;e.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",c).text(a).each(function(){f=n(this)});d.remove();
return f};b.prototype.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),k=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return k.call(e,c(a,b),a,this)}};b.prototype.getXForText=function(a,b,c){c=n(c);if(this.config.axis_rotated){var d=this.isBarType(b)?4:6;a=a[2][1]+d*(0>b.value?-1:1)}else a=this.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0];null===b.value&&(a>this.width?
a=this.width-c.width:0>a&&(a=4));return a};b.prototype.getYForText=function(a,b,c){c=n(c);this.config.axis_rotated?a=(a[0][0]+a[2][0]+.6*c.height)/2:(a=a[2][1],0>b.value||0===b.value&&!this.hasPositiveValue?(a+=c.height,this.isBarType(b)&&this.isSafari()?a-=3:!this.isBarType(b)&&this.isChrome()&&(a+=3)):a+=this.isBarType(b)?-3:-6);null!==b.value||this.config.axis_rotated||(a<c.height?a=c.height:a>this.height&&(a=this.height-4));return a};b.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",
this.CLASS.title)};b.prototype.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))};b.prototype.xForTitle=function(){var a=this.config,b=a.title_position||"left";return 0<=b.indexOf("right")?this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width-a.title_padding.right:0<=b.indexOf("center")?Math.max((this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width)/
2,0):a.title_padding.left};b.prototype.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height};b.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom};b.prototype.drawColorScale=function(){var a=this.d3,b=this.config,c=this.data.targets[0];var e=isNaN(b.stanford_scaleWidth)?20:b.stanford_scaleWidth;if(0>e)throw Error("Colorscale's barheight and barwidth must be greater than 0.");
var f=this.height-b.stanford_padding.bottom-b.stanford_padding.top;var g=a.range(b.stanford_padding.bottom,f,5);var h=a.scaleSequential(c.colors).domain([g[g.length-1],g[0]]);this.colorScale&&this.colorScale.remove();this.colorScale=this.svg.append("g").attr("width",50).attr("height",f).attr("class",y.colorScale);this.colorScale.append("g").attr("transform","translate(0, ".concat(b.stanford_padding.top,")")).selectAll("bars").data(g).enter().append("rect").attr("y",function(a,b){return 5*b}).attr("x",
0).attr("width",e).attr("height",5).attr("fill",function(a){return h(a)});g=a.scaleLog().domain([c.minEpochs,c.maxEpochs]).range([g[0]+b.stanford_padding.top+g[g.length-1]+5-1,g[0]+b.stanford_padding.top]);g=a.axisRight(g);"pow10"===b.stanford_scaleFormat?g.tickValues([1,10,100,1E3,1E4,1E5,1E6,1E7]):u(b.stanford_scaleFormat)?g.tickFormat(b.stanford_scaleFormat):g.tickFormat(a.format("d"));u(b.stanford_scaleValues)&&g.tickValues(b.stanford_scaleValues(c.minEpochs,c.maxEpochs));a=this.colorScale.append("g").attr("class",
"legend axis").attr("transform","translate(".concat(e,",0)")).call(g);"pow10"===b.stanford_scaleFormat&&a.selectAll(".tick text").text(null).filter(d).text(10).append("tspan").attr("dy","-.7em").text(function(a){return Math.round(Math.log(a)/Math.LN10)});this.colorScale.attr("transform","translate(".concat(this.currentWidth-this.xForColorScale(),", 0)"))};b.prototype.xForColorScale=function(){return this.config.stanford_padding.right+n(this.colorScale.node()).width};b.prototype.getColorScalePadding=
function(){return this.xForColorScale()+this.config.stanford_padding.left+20};b.prototype.isStanfordGraphType=function(){return"stanford"===this.config.data_type};b.prototype.initStanfordData=function(){var a=this.d3,b=this.config,c=this.data.targets[0];c.values.sort(H);var d=c.values.map(function(a){return a.epochs});var e=isNaN(b.stanford_scaleMin)?a.min(d):b.stanford_scaleMin;d=isNaN(b.stanford_scaleMax)?a.max(d):b.stanford_scaleMax;if(e>d)throw Error("Number of minEpochs has to be smaller than maxEpochs");
c.colors=u(b.stanford_colors)?b.stanford_colors:a.interpolateHslLong(a.hsl(250,1,.5),a.hsl(0,1,.5));c.colorscale=a.scaleSequentialLog(c.colors).domain([e,d]);c.minEpochs=e;c.maxEpochs=d};b.prototype.getStanfordPointColor=function(a){return this.data.targets[0].colorscale(a.epochs)};b.prototype.getCentroid=function(a){var b=0,c;var d=0;for(c=a.length-1;d<a.length;c=d,d+=1){var e=a[d];c=a[c];b+=e.x*c.y;b-=e.y*c.x}e=d=0;var f;c=0;for(f=a.length-1;c<a.length;f=c,c+=1){var g=a[c];var h=a[f];f=g.x*h.y-
h.x*g.y;d+=(g.x+h.x)*f;e+=(g.y+h.y)*f}f=b/2*6;return{x:d/f,y:e/f}};b.prototype.getStanfordTooltipTitle=function(a){var b=this.axis.getLabelText("x"),c=this.axis.getLabelText("y");return"\n      <tr><th>".concat(b?B(b):"x","</th><th class='value'>").concat(a.x,"</th></tr>\n      <tr><th>").concat(c?B(c):"y","</th><th class='value'>").concat(a.value,"</th></tr>\n    ")};b.prototype.countEpochsInRegion=function(a){var b=this.data.targets[0];var c=b.values.reduce(function(a,b){return a+Number(b.epochs)},
0);b=b.values.reduce(function(b,c){var d,e=c.x,f=c.value,g=!1,h=0;for(d=a.length-1;h<a.length;d=h++){var k=a[h].x;var l=a[h].y;var m=a[d].x;d=a[d].y;(k=l>f!==d>f&&e<(m-k)*(f-l)/(d-l)+k)&&(g=!g)}return g?b+Number(c.epochs):b},0);return{value:b,percentage:0!==b?(b/c*100).toFixed(1):0}};var H=function(a,b){return a.epochs<b.epochs?-1:a.epochs>b.epochs?1:0};b.prototype.initStanfordElements=function(){this.stanfordElements=this.main.select("."+y.chart).append("g").attr("class",y.stanfordElements);this.stanfordElements.append("g").attr("class",
y.stanfordLines);this.stanfordElements.append("g").attr("class",y.stanfordTexts);this.stanfordElements.append("g").attr("class",y.stanfordRegions)};b.prototype.updateStanfordElements=function(a){var b=this,c=b.main,d=b.config,e=b.xvCustom.bind(b),f=b.yvCustom.bind(b),g=b.countEpochsInRegion.bind(b);var h=c.select("."+y.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+y.stanfordLine).data(d.stanford_lines);var k=h.enter().append("g").attr("class",function(a){return y.stanfordLine+
(a["class"]?" "+a["class"]:"")});k.append("line").attr("x1",function(a){return d.axis_rotated?f(a,"value_y1"):e(a,"value_x1")}).attr("x2",function(a){return d.axis_rotated?f(a,"value_y2"):e(a,"value_x2")}).attr("y1",function(a){return d.axis_rotated?e(a,"value_x1"):f(a,"value_y1")}).attr("y2",function(a){return d.axis_rotated?e(a,"value_x2"):f(a,"value_y2")}).style("opacity",0);b.stanfordLines=k.merge(h);b.stanfordLines.select("line").transition().duration(a).attr("x1",function(a){return d.axis_rotated?
f(a,"value_y1"):e(a,"value_x1")}).attr("x2",function(a){return d.axis_rotated?f(a,"value_y2"):e(a,"value_x2")}).attr("y1",function(a){return d.axis_rotated?e(a,"value_x1"):f(a,"value_y1")}).attr("y2",function(a){return d.axis_rotated?e(a,"value_x2"):f(a,"value_y2")}).style("opacity",1);h.exit().transition().duration(a).style("opacity",0).remove();h=c.select("."+y.stanfordTexts).selectAll("."+y.stanfordText).data(d.stanford_texts);k=h.enter().append("g").attr("class",function(a){return y.stanfordText+
(a["class"]?" "+a["class"]:"")});k.append("text").attr("x",function(a){return d.axis_rotated?f(a,"y"):e(a,"x")}).attr("y",function(a){return d.axis_rotated?e(a,"x"):f(a,"y")}).style("opacity",0);b.stanfordTexts=k.merge(h);b.stanfordTexts.select("text").transition().duration(a).attr("x",function(a){return d.axis_rotated?f(a,"y"):e(a,"x")}).attr("y",function(a){return d.axis_rotated?e(a,"x"):f(a,"y")}).text(function(a){return a.content}).style("opacity",1);h.exit().transition().duration(a).style("opacity",
0).remove();c=c.select("."+y.stanfordRegions).selectAll("."+y.stanfordRegion).data(d.stanford_regions);h=c.enter().append("g").attr("class",function(a){return y.stanfordRegion+(a["class"]?" "+a["class"]:"")});h.append("polygon").attr("points",function(a){return a.points.map(function(a){return[d.axis_rotated?f(a,"y"):e(a,"x"),d.axis_rotated?e(a,"x"):f(a,"y")].join()}).join(" ")}).style("opacity",0);h.append("text").attr("x",function(a){return b.getCentroid(a.points).x}).attr("y",function(a){return b.getCentroid(a.points).y}).style("opacity",
0);b.stanfordRegions=h.merge(c);b.stanfordRegions.select("polygon").transition().duration(a).attr("points",function(a){return a.points.map(function(a){return[d.axis_rotated?f(a,"y"):e(a,"x"),d.axis_rotated?e(a,"x"):f(a,"y")].join()}).join(" ")}).style("opacity",function(a){return a.opacity?a.opacity:.2});b.stanfordRegions.select("text").transition().duration(a).attr("x",function(a){return d.axis_rotated?f(b.getCentroid(a.points),"y"):e(b.getCentroid(a.points),"x")}).attr("y",function(a){return d.axis_rotated?
e(b.getCentroid(a.points),"x"):f(b.getCentroid(a.points),"y")}).text(function(a){if(a.text){if(b.isStanfordGraphType()){var c=g(a.points);var d=c.value;c=c.percentage}return a.text(d,c)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1);c.exit().transition().duration(a).style("opacity",0).remove()};b.prototype.initTooltip=function(){var a=this,b=a.config,c;a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",y.tooltipContainer).style("position",
"absolute").style("pointer-events","none").style("display","none");if(b.tooltip_init_show){if(a.isTimeSeries()&&A(b.tooltip_init_x)){b.tooltip_init_x=a.parseDate(b.tooltip_init_x);for(c=0;c<a.data.targets[0].values.length&&0!==a.data.targets[0].values[c].x-b.tooltip_init_x;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color));a.tooltip.style("top",
b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}};b.prototype.getTooltipSortFunction=function(){var a=this.config;if(0===a.data_groups.length||void 0!==a.tooltip_order){var b=a.tooltip_order;void 0===b&&(b=a.data_order);if(A(b)&&"asc"===b.toLowerCase())return function(a,b){return(a?a.value:0)-(b?b.value:0)};if(A(b)&&"desc"===b.toLowerCase())return function(a,b){return(b?b.value:0)-(a?a.value:0)};if(u(b)){var c=b;void 0===a.tooltip_order&&(c=function(a,
c){return b(a?{id:a.id,values:[a]}:null,c?{id:c.id,values:[c]}:null)});return c}if(Array.isArray(b))return function(a,c){return b.indexOf(a.id)-b.indexOf(c.id)}}else{var d=this.orderTargets(this.data.targets).map(function(a){return a.id});if(this.isOrderAsc()||this.isOrderDesc())d=d.reverse();return function(a,b){return d.indexOf(a.id)-d.indexOf(b.id)}}};b.prototype.getTooltipContent=function(a,b,c,d){var e=this.config;b=e.tooltip_format_title||b;var f=e.tooltip_format_name||function(a){return a},
g=e.tooltip_format_value;g||(g=this.isTargetNormalized(a.id)?function(a,b){return"".concat((100*b).toFixed(2),"%")}:c);(c=this.getTooltipSortFunction())&&a.sort(c);for(c=0;c<a.length;c++)if(a[c]&&(a[c].value||0===a[c].value)){if(this.isStanfordGraphType()){if(!h){var h=this.getStanfordTooltipTitle(a[c]);h="<table class='"+this.CLASS.tooltip+"'>"+h}var k=this.getStanfordPointColor(a[c]);var l=B(e.data_epochs);var m=a[c].epochs}else if(h||(h=B(b?b(a[c].x,a[c].index):a[c].x),h="<table class='"+this.CLASS.tooltip+
"'>"+(h||0===h?"<tr><th colspan='2'>"+h+"</th></tr>":"")),m=B(g(a[c].value,a[c].ratio,a[c].id,a[c].index,a)),void 0!==m){if(null===a[c].name)continue;l=B(f(a[c].name,a[c].ratio,a[c].id,a[c].index));k=this.levelColor?this.levelColor(a[c].value):d(a[c].id)}void 0!==m&&(h+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(a[c].id)+"'>",h+="<td class='name'><span style='background-color:"+k+"'></span>"+l+"</td>",h+="<td class='value'>"+m+"</td>",h+="</tr>")}return h+"</table>"};b.prototype.tooltipPosition=
function(a,b,c,d){var e=this.config,f=this.d3;var g=this.hasArcType();d=f.mouse(d);g?(e=(this.width-(this.isLegendRight?this.getLegendWidth():0))/2+d[0],a=(this.hasType("gauge")?this.height:this.height/2)+d[1]+20):(g=this.getSvgLeft(!0),e.axis_rotated?(e=g+d[0]+100,b=e+b,g=this.currentWidth-this.getCurrentPaddingRight(),a=this.x(a[0].x)+20):(e=g+this.getCurrentPaddingLeft(!0)+this.x(a[0].x)+20,b=e+b,g=g+this.currentWidth-this.getCurrentPaddingRight(),a=d[1]+15),b>g&&(e-=b-g+20),a+c>this.currentHeight&&
(a-=c+30));0>a&&(a=0);return{top:a,left:e}};b.prototype.showTooltip=function(a,c){var d=this.config,e=this.hasArcType(),f=a.filter(function(a){return a&&z(a.value)}),g=d.tooltip_position||b.prototype.tooltipPosition;0!==f.length&&d.tooltip_show&&(this.tooltip.html(d.tooltip_contents.call(this,a,this.axis.getXAxisTickFormat(),this.getYFormat(e),this.color)).style("display","block"),a=this.tooltip.property("offsetWidth"),d=this.tooltip.property("offsetHeight"),c=g.call(this,f,a,d,c),this.tooltip.style("top",
c.top+"px").style("left",c.left+"px"))};b.prototype.hideTooltip=function(){this.tooltip.style("display","none")};b.prototype.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a];d.data_types[a]=b});a||(d.data_type=b)};b.prototype.hasType=function(a,b){var c=this.config.data_types,d=!1;(b=b||this.data.targets)&&b.length?b.forEach(function(b){if((b=c[b.id])&&0<=b.indexOf(a)||!b&&"line"===a)d=!0}):Object.keys(c).length?Object.keys(c).forEach(function(b){c[b]===
a&&(d=!0)}):d=this.config.data_type===a;return d};b.prototype.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)};b.prototype.isLineType=function(a){var b=this.config;a=A(a)?a:a.id;return!b.data_types[a]||0<="line spline area area-spline step area-step".split(" ").indexOf(b.data_types[a])};b.prototype.isStepType=function(a){a=A(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[a])};b.prototype.isSplineType=function(a){a=A(a)?
a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[a])};b.prototype.isAreaType=function(a){a=A(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[a])};b.prototype.isBarType=function(a){a=A(a)?a:a.id;return"bar"===this.config.data_types[a]};b.prototype.isScatterType=function(a){a=A(a)?a:a.id;return"scatter"===this.config.data_types[a]};b.prototype.isStanfordType=function(a){a=A(a)?a:a.id;return"stanford"===this.config.data_types[a]};b.prototype.isScatterOrStanfordType=
function(a){return this.isScatterType(a)||this.isStanfordType(a)};b.prototype.isPieType=function(a){a=A(a)?a:a.id;return"pie"===this.config.data_types[a]};b.prototype.isGaugeType=function(a){a=A(a)?a:a.id;return"gauge"===this.config.data_types[a]};b.prototype.isDonutType=function(a){a=A(a)?a:a.id;return"donut"===this.config.data_types[a]};b.prototype.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)};b.prototype.lineData=function(a){return this.isLineType(a)?
[a]:[]};b.prototype.arcData=function(a){return this.isArcType(a.data)?[a]:[]};b.prototype.barData=function(a){return this.isBarType(a)?a.values:[]};b.prototype.lineOrScatterOrStanfordData=function(a){return this.isLineType(a)||this.isScatterType(a)||this.isStanfordType(a)?a.values:[]};b.prototype.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]};b.prototype.isSafari=function(){var a=window.navigator.userAgent;return 0<=a.indexOf("Safari")&&0>a.indexOf("Chrome")};
b.prototype.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")};b.prototype.initZoom=function(){var a=this,b=a.d3,c=a.config,d;a.zoom=b.zoom().on("start",function(){if("scroll"===c.zoom_type){var e=b.event.sourceEvent;e&&"brush"===e.type||(d=e,c.zoom_onzoomstart.call(a.api,e))}}).on("zoom",function(){if("scroll"===c.zoom_type){var d=b.event.sourceEvent;d&&"brush"===d.type||(a.redrawForZoom(),c.zoom_onzoom.call(a.api,a.x.orgDomain()))}}).on("end",function(){if("scroll"===c.zoom_type){var e=
b.event.sourceEvent;e&&"brush"===e.type||e&&d.clientX===e.clientX&&d.clientY===e.clientY||c.zoom_onzoomend.call(a.api,a.x.orgDomain())}});a.zoom.updateDomain=function(){b.event&&b.event.transform&&a.x.domain(b.event.transform.rescaleX(a.subX).domain());return this};a.zoom.updateExtent=function(){this.scaleExtent([1,Infinity]).translateExtent([[0,0],[a.width,a.height]]).extent([[0,0],[a.width,a.height]]);return this};a.zoom.update=function(){return this.updateExtent().updateDomain()};return a.zoom.updateExtent()};
b.prototype.zoomTransform=function(a){a=[this.x(a[0]),this.x(a[1])];return this.d3.zoomIdentity.scale(this.width/(a[1]-a[0])).translate(-a[0],0)};b.prototype.initDragZoom=function(){var a=this,b=a.d3,c=a.config,d=a.context=a.svg,e=a.margin.left+20.5,f=a.margin.top+.5;if("drag"===c.zoom_type&&c.zoom_enabled){var g=function(b){return b&&b.map(function(b){return a.x.invert(b)})},h=a.dragZoomBrush=b.brushX().on("start",function(){a.api.unzoom();a.svg.select("."+y.dragZoom).classed("disabled",!1);c.zoom_onzoomstart.call(a.api,
b.event.sourceEvent)}).on("brush",function(){c.zoom_onzoom.call(a.api,g(b.event.selection))}).on("end",function(){if(null!=b.event.selection){var d=g(b.event.selection);c.zoom_disableDefaultBehavior||a.api.zoom(d);a.svg.select("."+y.dragZoom).classed("disabled",!0);c.zoom_onzoomend.call(a.api,d)}});d.append("g").classed(y.dragZoom,!0).attr("clip-path",a.clipPath).attr("transform","translate("+e+","+f+")").call(h)}};b.prototype.getZoomDomain=function(){var a=this.config,b=this.d3,c=b.min([this.orgXDomain[0],
a.zoom_x_min]);a=b.max([this.orgXDomain[1],a.zoom_x_max]);return[c,a]};b.prototype.redrawForZoom=function(){var a=this.d3,b=this.config,c=this.zoom,d=this.x;b.zoom_enabled&&0!==this.filterTargetsToShow(this.data.targets).length&&(c.update(),b.zoom_disableDefaultBehavior||(this.isCategorized()&&d.orgDomain()[0]===this.orgXDomain[0]&&d.domain([this.orgXDomain[0]-1E-10,d.orgDomain()[1]]),this.redraw({withTransition:!1,withY:b.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),a.event.sourceEvent&&
"mousemove"===a.event.sourceEvent.type&&(this.cancelClick=!0)))};return x});/*

 Video.js 7.6.0 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 Programatically add the following
 @name m3u8-parser @version 4.3.0 @license Apache-2.0  @name mpd-parser @version 0.8.1 @license Apache-2.0  2019 Brightcove, Inc
 @license Apache-2.0
*/
(function(e,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f(require("global/window"),require("global/document")):"function"===typeof define&&define.amd?define(["global/window","global/document"],f):(e=e||self,e.videojs=f(e.window,e.document))})(this,function(e,f){function c(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}function b(a,c){b=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return b(a,c)}function a(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Tb){return!1}}function h(c,d,e){h=a()?Reflect.construct:function(a,c,d){var e=[null];e.push.apply(e,c);a=new (Function.bind.apply(a,e));d&&b(a,d.prototype);return a};return h.apply(null,arguments)}function d(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function g(a,b){b||(b=a.slice(0));a.raw=b;return a}function k(a){var b="info",c=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];d("log",b,c)};var d=rd(a,c);c.createLogger=function(b){return k(a+": "+b)};c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:b};c.level=function(a){if("string"===typeof a){if(!c.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');
b=a}return b};c.history=function(){return rb?[].concat(rb):[]};c.history.filter=function(a){return(rb||[]).filter(function(b){return(new RegExp(".*"+a+".*")).test(b[0])})};c.history.clear=function(){rb&&(rb.length=0)};c.history.disable=function(){null!==rb&&(rb.length=0,rb=null)};c.history.enable=function(){null===rb&&(rb=[])};c.error=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return d("error",b,c)};c.warn=function(){for(var a=arguments.length,c=Array(a),e=0;e<
a;e++)c[e]=arguments[e];return d("warn",b,c)};c.debug=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return d("debug",b,c)};return c}function l(a,b){sb(a).forEach(function(c){return b(a[c],c)})}function n(a,b,c){void 0===c&&(c=0);return sb(a).reduce(function(c,d){return b(c,a[d],d)},c)}function p(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[a].concat(c));c.forEach(function(b){b&&
l(b,function(b,c){a[c]=b})});return a}function r(a){return!!a&&"object"===typeof a}function w(a){return r(a)&&"[object Object]"===Ua.call(a)&&a.constructor===Object}function u(a,b){return a&&b?"function"===typeof e.getComputedStyle?(a=e.getComputedStyle(a))?a[b]:"":"":""}function A(){var a=g(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ",
"."]);A=function(){return a};return a}function t(a){if(/\s/.test(a))throw Error("class has illegal whitespace characters");}function z(){return f===e.document}function B(a){return r(a)&&1===a.nodeType}function D(){try{return e.parent!==e.self}catch(Tb){return!0}}function y(a){return function(b,c){if("string"!==typeof b||!/\S/.test(b))return f[a](null);"string"===typeof c&&/\S/.test(c)&&(c=f.querySelector(c));c=B(c)?c:f;return c[a]&&c[a](b)}}function E(a,b,c,d){void 0===a&&(a="div");void 0===b&&(b=
{});void 0===c&&(c={});var e=f.createElement(a);Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(xa.warn(fb(A(),a,c)),e.setAttribute(a,c)):"textContent"===a?x(e,c):e[a]=c});Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])});d&&sa(e,d);return e}function x(a,b){"undefined"===typeof a.textContent?a.innerText=b:a.textContent=b;return a}function H(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function F(a,
b){t(b);return a.classList?a.classList.contains(b):(new RegExp("(^|\\s)"+b+"($|\\s)")).test(a.className)}function m(a,b){a.classList?a.classList.add(b):F(a,b)||(a.className=(a.className+" "+b).trim());return a}function q(a,b){a.classList?a.classList.remove(b):(t(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" "));return a}function G(a,b,c){var d=F(a,b);"function"===typeof c&&(c=c(a,b));"boolean"!==typeof c&&(c=!d);if(c!==d)return c?m(a,b):q(a,b),a}function I(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=
b[c];null===d||"undefined"===typeof d||!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)})}function M(a){var b={};if(a&&a.attributes&&0<a.attributes.length)for(var c=a.attributes,d=c.length-1;0<=d;d--){var e=c[d].name,f=c[d].value;if("boolean"===typeof a[e]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+e+","))f=null!==f?!0:!1;b[e]=f}return b}function S(){f.body.focus();f.onselectstart=function(){return!1}}function ia(){f.onselectstart=function(){return!0}}
function za(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(a){void 0!==b[a]&&(c[a]=b[a])});c.height||(c.height=parseFloat(u(a,"height")));c.width||(c.width=parseFloat(u(a,"width")));return c}}function W(a){var b;a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect());if(!b)return{left:0,top:0};a=f.documentElement;var c=f.body;return{left:Math.round(b.left+(e.pageXOffset||c.scrollLeft)-
(a.clientLeft||c.clientLeft||0)),top:Math.round(b.top+(e.pageYOffset||c.scrollTop)-(a.clientTop||c.clientTop||0))}}function X(a,b){var c={},d=W(a),e=a.offsetWidth;a=a.offsetHeight;var f=d.top;d=d.left;var g=b.pageY,h=b.pageX;b.changedTouches&&(h=b.changedTouches[0].pageX,g=b.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(f-g+a)/a));c.x=Math.max(0,Math.min(1,(h-d)/e));return c}function aa(a){return r(a)&&3===a.nodeType}function U(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function Z(a){"function"===
typeof a&&(a=a());return(Array.isArray(a)?a:[a]).map(function(a){"function"===typeof a&&(a=a());if(B(a)||aa(a))return a;if("string"===typeof a&&/\S/.test(a))return f.createTextNode(a)}).filter(function(a){return a})}function sa(a,b){Z(b).forEach(function(b){return a.appendChild(b)});return a}function ca(a,b){return sa(U(a),b)}function ea(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||0===a.button&&0===a.buttons?!0:0!==a.button||1!==a.buttons?!1:!0}function la(a){var b=
a[Xb];b||(b=a[Xb]=Fa++);Wb[b]||(Wb[b]={});return Wb[b]}function Aa(a){return(a=a[Xb])?!!Object.getOwnPropertyNames(Wb[a]).length:!1}function Qa(a){var b=a[Xb];if(b){delete Wb[b];try{delete a[Xb]}catch(N){a.removeAttribute?a.removeAttribute(Xb):a[Xb]=null}}}function yb(a,b){var c=la(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,
delete c.dispatcher,delete c.disabled);0===Object.getOwnPropertyNames(c).length&&Qa(a)}function ya(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function Kb(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||e.event;a={};for(var g in d)"layerX"!==g&&"layerY"!==g&&"keyLocation"!==g&&"webkitMovementX"!==g&&"webkitMovementY"!==g&&("returnValue"===g&&d.preventDefault||(a[g]=d[g]));a.target||(a.target=a.srcElement||f);a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?
a.toElement:a.fromElement);a.preventDefault=function(){d.preventDefault&&d.preventDefault();a.returnValue=!1;d.returnValue=!1;a.defaultPrevented=!0};a.defaultPrevented=!1;a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation();a.cancelBubble=!0;d.cancelBubble=!0;a.isPropagationStopped=b};a.isPropagationStopped=c;a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation();a.isImmediatePropagationStopped=b;a.stopPropagation()};a.isImmediatePropagationStopped=
c;if(null!==a.clientX&&void 0!==a.clientX){g=f.documentElement;var h=f.body;a.pageX=a.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0);a.pageY=a.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}a.which=a.charCode||a.keyCode;null!==a.button&&void 0!==a.button&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a}function Ta(a,b,c){if(Array.isArray(b))return ya(Ta,a,b,c);var d=la(a);d.handlers||(d.handlers={});d.handlers[b]||
(d.handlers[b]=[]);c.guid||(c.guid=Fa++);d.handlers[b].push(c);d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=Kb(b);var e=d.handlers[b.type];if(e){e=e.slice(0);for(var f=0,g=e.length;f<g&&!b.isImmediatePropagationStopped();f++)try{e[f].call(a,b,c)}catch(Q){xa.error(Q)}}}});1===d.handlers[b].length&&(a.addEventListener?(c=!1,Od&&-1<te.indexOf(b)&&(c={passive:!0}),a.addEventListener(b,d.dispatcher,c)):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))}function Za(a,b,c){if(Aa(a)){var d=
la(a);if(d.handlers){if(Array.isArray(b))return ya(Za,a,b,c);if(void 0===b)for(var e in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},e)&&(b=a,c=e,d.handlers[c]=[],yb(b,c));else if(e=d.handlers[b]){if(!c)d.handlers[b]=[];else if(c.guid)for(d=0;d<e.length;d++)e[d].guid===c.guid&&e.splice(d--,1);yb(a,b)}}}}function Na(a,b,c){var d=Aa(a)?la(a):{},e=a.parentNode||a.ownerDocument;"string"===typeof b?b={type:b,target:a}:b.target||(b.target=a);b=Kb(b);d.dispatcher&&d.dispatcher.call(a,b,
c);if(e&&!b.isPropagationStopped()&&!0===b.bubbles)Na.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]&&(a=la(b.target),b.target[b.type])){a.disabled=!0;if("function"===typeof b.target[b.type])b.target[b.type]();a.disabled=!1}return!b.defaultPrevented}function Ra(a,b,c){if(Array.isArray(b))return ya(Ra,a,b,c);var d=function J(){Za(a,b,J);c.apply(this,arguments)};d.guid=c.guid=c.guid||Fa++;Ta(a,b,d)}function Ca(a,b,c){var d=function J(){Za(a,b,J);c.apply(this,arguments)};
d.guid=c.guid=c.guid||Fa++;Ta(a,b,d)}function R(a,b){b&&(Ke=b);e.setTimeout(Jb,a)}function Da(a,b){void 0===b&&(b={});if(b=b.eventBusKey){if(!a[b].nodeName)throw Error('The eventBusKey "'+b+'" does not refer to an element.');a.eventBusEl_=a[b]}else a.eventBusEl_=E("span",{className:"vjs-event-bus"});p(a,$f);a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()});a.on("dispose",function(){a.off();e.setTimeout(function(){a.eventBusEl_=null},0)});return a}function xb(a,b){p(a,Se);a.state=p({},
a.state,b);if("function"===typeof a.handleStateChanged&&cb(a))a.on("statechanged",a.handleStateChanged);return a}function Ba(a){return"string"!==typeof a?a:a.charAt(0).toUpperCase()+a.slice(1)}function Ya(a,b){return Ba(a)===Ba(b)}function ba(){for(var a={},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){b&&l(b,function(b,c){w(b)?(w(a[c])||(a[c]={}),a[c]=ba(a[c],b)):a[c]=b})});return a}function gc(a,b,c,d){var e=c.length-1;if("number"!==typeof d||0>d||d>e)throw Error("Failed to execute '"+
a+"' on 'TimeRanges': The index provided ("+d+") is non-numeric or out of bounds (0-"+e+").");return c[d][b]}function gb(a){return void 0===a||0===a.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:a.length,start:gc.bind(null,"start",0,a),end:gc.bind(null,"end",1,a)}}function O(a,b){return Array.isArray(a)?gb(a):void 0===a||void 0===b?gb():gb([[a,b]])}function v(a,b){var c=0;if(!b)return 0;a&&
a.length||(a=O(0,0));for(var d=0;d<a.length;d++){var e=a.start(d);var f=a.end(d);f>b&&(f=b);c+=f-e}return c/b}function Ea(a){if(a instanceof Ea)return a;"number"===typeof a?this.code=a:"string"===typeof a?this.message=a:r(a)&&("number"===typeof a.code&&(this.code=a.code),p(this,a));this.message||(this.message=Ea.defaultMessages[this.code]||"")}function fa(a){return void 0!==a&&null!==a&&"function"===typeof a.then}function Lb(a){fa(a)&&a.then(null,function(a){})}function Vc(a,b){return b={exports:{}},
a(b,b.exports),b.exports}function mb(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Ia(a,b,c){var d=a,e=qj.call(b);"[object Function]"===e||"function"===typeof b&&"[object RegExp]"!==e||"undefined"!==typeof window&&(b===window.setTimeout||b===window.alert||b===window.confirm||b===window.prompt)?(c=b,"string"===typeof a&&(d={uri:a})):d=si(b,{uri:a});d.callback=c;return d}function $a(a,b,c){b=Ia(a,b,c);return Ud(b)}function Ud(a){function b(b){clearTimeout(q);b instanceof Error||
(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var c=t;d||(d=!0,a.callback(b,c,void 0))}function c(){if(!g){clearTimeout(q);var b=a.useXDR&&void 0===e.status?200:1223===e.status?204:e.status;var c=t,f=null;if(0!==b){e.response?c=e.response:(c=e.responseText)||("document"===e.responseType?c=e.responseXML:(c=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName,c=""!==e.responseType||c?null:e.responseXML));if(p)try{c=JSON.parse(c)}catch(Vp){}c={body:c,statusCode:b,
method:k,headers:{},url:h,rawRequest:e};e.getAllResponseHeaders&&(c.headers=zj(e.getAllResponseHeaders()))}else f=Error("Internal XMLHttpRequest Error");b=c.body;d||(d=!0,a.callback(f,c,b))}}if("undefined"===typeof a.callback)throw Error("callback argument missing");var d=!1,e=a.xhr||null;e||(e=a.cors||a.useXDR?new $a.XDomainRequest:new $a.XMLHttpRequest);var f,g,h=e.url=a.uri||a.url,k=e.method=a.method||"GET",l=a.body||a.data,m=e.headers=a.headers||{},n=!!a.sync,p=!1,q,t={body:void 0,headers:{},
statusCode:0,method:k,url:h,rawRequest:e};"json"in a&&!1!==a.json&&(p=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==k&&"HEAD"!==k&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),l=JSON.stringify(!0===a.json?l:a.json)));e.onreadystatechange=function(){4===e.readyState&&setTimeout(c,0)};e.onload=c;e.onerror=b;e.onprogress=function(){};e.onabort=function(){g=!0};e.ontimeout=b;e.open(k,h,!n,a.username,a.password);n||(e.withCredentials=!!a.withCredentials);
!n&&0<a.timeout&&(q=setTimeout(function(){if(!g){g=!0;e.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT";b(a)}},a.timeout));if(e.setRequestHeader)for(f in m)m.hasOwnProperty(f)&&e.setRequestHeader(f,m[f]);else if(a.headers&&!mb(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in a&&(e.responseType=a.responseType);"beforeSend"in a&&"function"===typeof a.beforeSend&&a.beforeSend(e);e.send(l||null);return e}function uc(){}function Ka(a,
b){this.name="ParsingError";this.code=a.code;this.message=b||a.message}function Rb(a){a=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!a)return null;if(a[3]){var b=a[3].replace(":","");return 3600*(a[1]|0)+60*(a[2]|0)+(b|0)+(a[4]|0)/1E3}return 59<a[1]?3600*(a[1]|0)+60*(a[2]|0)+(a[4]|0)/1E3:60*(a[1]|0)+(a[2]|0)+(a[4]|0)/1E3}function Nc(){this.values=Tg(null)}function Vd(a,b,c,d){a=d?a.split(d):[a];for(var e in a)"string"===typeof a[e]&&(d=a[e].split(c),2===d.length&&b(d[0],d[1]))}function zf(a,b,
c){function d(){var b=Rb(a);if(null===b)throw new Ka(Ka.Errors.BadTimeStamp,"Malformed timestamp: "+f);a=a.replace(/^[^\sa-zA-Z-]+/,"");return b}function e(){a=a.replace(/^\s+/,"")}var f=a;e();b.startTime=d();e();if("--\x3e"!==a.substr(0,3))throw new Ka(Ka.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+f);a=a.substr(3);e();b.endTime=d();e();(function(a,b){var d=new Nc;Vd(a,function(a,b){switch(a){case "region":for(var e=c.length-1;0<=e;e--)if(c[e].id===b){d.set(a,
c[e].region);break}break;case "vertical":d.alt(a,b,["rl","lr"]);break;case "line":b=b.split(",");e=b[0];d.integer(a,e);d.percent(a,e)?d.set("snapToLines",!1):null;d.alt(a,e,["auto"]);2===b.length&&d.alt("lineAlign",b[1],["start","middle","end"]);break;case "position":b=b.split(",");d.percent(a,b[0]);2===b.length&&d.alt("positionAlign",b[1],["start","middle","end"]);break;case "size":d.percent(a,b);break;case "align":d.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/);b.region=d.get("region",
null);b.vertical=d.get("vertical","");b.line=d.get("line","auto");b.lineAlign=d.get("lineAlign","start");b.snapToLines=d.get("snapToLines",!0);b.size=d.get("size",100);b.align=d.get("align","middle");b.position=d.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align);b.positionAlign=d.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)})(a,b)}function vb(a,b){function c(){if(!b)return null;var a=b.match(/^([^<]*)(<[^>]*>?)?/);a=a[1]?a[1]:a[2];
b=b.substr(a.length);return a}function d(a){return wj[a]}function e(a){for(;n=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(n[0],d);return a}function f(b,c){var d=We[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;(b=Aj[b])&&c&&(e[b]=c.trim());return e}for(var g=a.document.createElement("div"),h=g,k,l=[];null!==(k=c());)if("<"===k[0])if("/"===k[1])l.length&&l[l.length-1]===k.substr(2).replace(">","")&&(l.pop(),h=h.parentNode);else{var m=Rb(k.substr(1,k.length-2));if(m)k=
a.document.createProcessingInstruction("timestamp",m),h.appendChild(k);else{var n=k.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);n&&(!(k=f(n[1],n[3]))||zi[k.localName]&&zi[k.localName]!==h.localName||(n[2]&&(k.className=n[2].substr(1).replace("."," ")),l.push(n[1]),h.appendChild(k),h=k))}}else h.appendChild(a.document.createTextNode(e(k)));return g}function Cc(a){for(var b=0;b<Ha.length;b++){var c=Ha[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function vh(a){function b(a,b){for(var c=b.childNodes.length-
1;0<=c;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e)return(d=e.match(/^.*(\n|\r)/))?(a.length=0,d[0]):e;if("ruby"===d.tagName)return c(a);if(d.childNodes)return b(a,d),c(a)}var d=[],e="";if(!a||!a.childNodes)return"ltr";for(b(d,a);e=c(d);)for(var f=0;f<e.length;f++)if(a=e.charCodeAt(f),Cc(a))return"rtl";return"ltr"}function le(){}function Ie(a,b,c){this.cue=b;this.cueDiv=vb(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",
position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv);this.div=a.document.createElement("div");d={direction:vh(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(d);
this.div.appendChild(this.cueDiv);a=0;switch(b.positionAlign){case "start":a=b.position;break;case "middle":a=b.position-b.size/2;break;case "end":a=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(b.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,
"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function wb(a){if(a.div){var b=a.div.offsetHeight;var c=a.div.offsetWidth;var d=a.div.offsetTop;var e=(e=a.div.childNodes)&&(e=e[0])&&e.getClientRects&&e.getClientRects();a=a.div.getBoundingClientRect();var f=e?Math.max(e[0]&&e[0].height||0,a.height/e.length):0}this.left=a.left;this.right=a.right;this.top=a.top||d;this.height=a.height||b;this.bottom=a.bottom||d+(a.height||b);this.width=a.width||c;this.lineHeight=
void 0!==f?f:a.lineHeight}function xd(){}function mf(a){return"string"!==typeof a?!1:Sb[a.toLowerCase()]?a.toLowerCase():!1}function Ac(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,h=c,k=null,l="",m=!0,n="auto",p="start",q=50,N="middle",t=50,r="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!==
typeof a)throw new TypeError("Start time must be set to a number.");f=a;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!==typeof a)throw new TypeError("End time must be set to a number.");g=a;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return k},set:function(a){k=a;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(a){a=
"string"!==typeof a?!1:Wa[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");l=a;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(a){m=!!a;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return n},set:function(a){if("number"!==typeof a&&"auto"!==a)throw new SyntaxError("An invalid number or illegal string was specified.");n=a;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},
set:function(a){a=mf(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");p=a;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return q},set:function(a){if(0>a||100<a)throw Error("Position must be between 0 and 100.");q=a;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return N},set:function(a){a=mf(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");N=a;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return t},
set:function(a){if(0>a||100<a)throw Error("Size must be between 0 and 100.");t=a;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return r},set:function(a){a=mf(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");r=a;this.hasBeenReset=!0}}});this.displayState=void 0}function Kc(a){return"number"===typeof a&&0<=a&&100>=a}function vc(a,b,c){a.setTimeout(function(){return Xa(b,af[b.type],c,a)},1)}function sc(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}
function Tc(a,b,c,d){void 0===d&&(d=null);var e="call"+Ba(c);e=a.reduce(Nd(e),d);b=(d=e===Zd)?null:b[c](e);for(e=a.length-1;0<=e;e--){var f=a[e];if(f[c])f[c](d,b)}return b}function Nd(a){return function(b,c){return b===Zd?Zd:c[a]?c[a](b):b}}function jb(a,b){var c=Ih[a.id()],d=null;if(void 0===c||null===c)return d=b(a),Ih[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e];f[0]===b&&(d=f[1])}null===d&&(d=b(a),c.push([b,d]));return d}function Xa(a,b,c,d,e,f){void 0===a&&(a={});void 0===b&&(b=[]);
void 0===e&&(e=[]);void 0===f&&(f=!1);var g=b[0],h=b.slice(1);if("string"===typeof g)Xa(a,af[g],c,d,e,f);else if(g){var k=jb(d,g);if(!k.setSource)return e.push(k),Xa(a,h,c,d,e,f);k.setSource(p({},a),function(b,g){if(b)return Xa(a,h,c,d,e,f);e.push(k);Xa(g,a.type===g.type?h:af[g.type],c,d,e,f)})}else h.length?Xa(a,h,c,d,e,f):f?c(a,e):Xa(a,af["*"],c,d,e,!0)}function Fb(a){var b=lg(a.src);!a.type&&b&&(a.type=b);return a}function oe(a,b){if(4===a.length)a=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(7===a.length)a=
a.slice(1);else throw Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+b+")"}function Oc(a,b){void 0===b&&(b=a);return gd(a,b)}function Af(a,b){b&&(a=b(a));if(a&&"none"!==a)return a}function Pe(){var a=g(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);Pe=
function(){return a};return a}function hc(){var a=g(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);hc=function(){return a};return a}function K(a,b,c){var d=K.getPlayer(a);if(d)return b&&xa.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"===typeof a?kb("#"+Ik(a)):a;if(!B(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");
e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||xa.warn("The element supplied is not included in the DOM");b=b||{};K.hooks("beforesetup").forEach(function(a){a=a(e,ba(b));!r(a)||Array.isArray(a)?xa.error("please return an object in beforesetup hooks"):b=ba(b,a)});d=new (T.getComponent("Player"))(e,b,c);K.hooks("setup").forEach(function(a){return a(d)});return d}function yd(){yd=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a};return yd.apply(this,arguments)}function Zc(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}function wc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Qe(a,b){return function(c){var d=this;if(b){if(kh&&!c)return c=b.toString().replace(/^function.+?{/,"").slice(0,-1),c=pe(c),this[fi]=new kh(c),Hg(this[fi],c),this[fi];var e={postMessage:function(a){d.onmessage&&setTimeout(function(){d.onmessage({data:a,
target:e})})}};b.call(e);this.postMessage=function(a){setTimeout(function(){e.onmessage({data:a,target:d})})};this.isThisThread=!0}else return new kh(a)}}function pe(a){try{return jh.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(N){var b=new Rn;b.append(a);return jh.createObjectURL(b.getBlob(type))}}function Hg(a,b){if(a&&b){var c=a.terminate;a.objURL=b;a.terminate=function(){a.objURL&&jh.revokeObjectURL(a.objURL);c.call(a)}}}function Je(){}e=e&&e.hasOwnProperty("default")?
e["default"]:e;f=f&&f.hasOwnProperty("default")?f["default"]:f;var rb=[],rd=function(a,b){return function(c,d,f){d=b.levels[d];var g=new RegExp("^("+d+")$");"log"!==c&&f.unshift(c.toUpperCase()+":");f.unshift(a+":");rb&&rb.push([].concat(f));if(e.console){var h=e.console[c];h||"debug"!==c||(h=e.console.info||e.console.log);if(h&&d&&g.test(c))h[Array.isArray(f)?"apply":"call"](e.console,f)}}},xa=k("VIDEOJS"),Dc=xa.createLogger,fb=function(a){for(var b="",c=0;c<arguments.length;c++)b+=a[c].replace(/\n\r?\s*/g,
"")+(arguments[c+1]||"");return b},Ua=Object.prototype.toString,sb=function(a){return r(a)?Object.keys(a):[]},kb=y("querySelector"),Uc=y("querySelectorAll"),Qb=Object.freeze({isReal:z,isEl:B,isInFrame:D,createEl:E,textContent:x,prependTo:H,hasClass:F,addClass:m,removeClass:q,toggleClass:G,setAttributes:I,getAttributes:M,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:S,unblockTextSelection:ia,
getBoundingClientRect:za,findPosition:W,getPointerPosition:X,isTextNode:aa,emptyEl:U,normalizeContent:Z,appendContent:sa,insertContent:ca,isSingleLeftClick:ea,$:kb,$$:Uc}),Fa=1,Wb={},Xb="vdata"+Math.floor(e.performance&&e.performance.now()||Date.now()),Od=!1;(function(){try{var a=Object.defineProperty({},"passive",{get:function(){Od=!0}});e.addEventListener("test",null,a);e.removeEventListener("test",null,a)}catch(Fd){}})();var te=["touchstart","touchmove"],Ec=Object.freeze({fixEvent:Kb,on:Ta,off:Za,
trigger:Na,one:Ra,any:Ca}),Le=!1,Ke,Jb=function(){if(z()&&!1!==Ke.options.autoSetup){var a=Array.prototype.slice.call(f.getElementsByTagName("video")),b=Array.prototype.slice.call(f.getElementsByTagName("audio")),c=Array.prototype.slice.call(f.getElementsByTagName("video-js"));if((a=a.concat(b,c))&&0<a.length)for(b=0,c=a.length;b<c;b++){var d=a[b];if(d&&d.getAttribute)void 0===d.player&&null!==d.getAttribute("data-setup")&&Ke(d);else{R(1);break}}else Le||R(1)}};z()&&"complete"===f.readyState?Le=!0:
Ra(e,"load",function(){Le=!0});var tb=function(a){var b=f.createElement("style");b.className=a;return b},Bf=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},Ma=function(a,b,c){b.guid||(b.guid=Fa++);var d=function(){return b.apply(a,arguments)};d.guid=c?c+"_"+b.guid:b.guid;return d},Wd=function(a,b){var c=e.performance.now();return function(){var d=e.performance.now();d-c>=b&&(a.apply(void 0,arguments),c=d)}},Ng=function(a,b,c,d){void 0===d&&(d=e);var f,g=function(){var e=this,g=
arguments,h=function(){h=f=null;c||a.apply(e,g)};!f&&c&&a.apply(e,g);d.clearTimeout(f);f=d.setTimeout(h,b)};g.cancel=function(){d.clearTimeout(f);f=null};return g},Va=function(){};Va.prototype.allowedEvents_={};Va.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};Ta(this,a,b);this.addEventListener=c};Va.prototype.addEventListener=Va.prototype.on;Va.prototype.off=function(a,b){Za(this,a,b)};Va.prototype.removeEventListener=Va.prototype.off;Va.prototype.one=function(a,
b){var c=this.addEventListener;this.addEventListener=function(){};Ra(this,a,b);this.addEventListener=c};Va.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};Ca(this,a,b);this.addEventListener=c};Va.prototype.trigger=function(a){var b=a.type||a;"string"===typeof a&&(a={type:b});a=Kb(a);if(this.allowedEvents_[b]&&this["on"+b])this["on"+b](a);Na(this,a)};Va.prototype.dispatchEvent=Va.prototype.trigger;var $c;Va.prototype.queueTrigger=function(a){var b=this;$c||
($c=new Map);var c=a.type||a,d=$c.get(this);d||(d=new Map,$c.set(this,d));var f=d.get(c);d["delete"](c);e.clearTimeout(f);f=e.setTimeout(function(){0===d.size&&(d=null,$c["delete"](b));b.trigger(a)},0);d.set(c,f)};var cb=function(a){return a instanceof Va||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"===typeof a[b]})},zb=function(a,b){cb(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},zd=function(a){return"string"===typeof a&&/\S/.test(a)||
Array.isArray(a)&&!!a.length},Pc=function(a){if(!a.nodeName&&!cb(a))throw Error("Invalid target; must be a DOM node or evented object.");},Og=function(a){if(!zd(a))throw Error("Invalid event type; must be a non-empty string or array.");},Re=function(a){if("function"!==typeof a)throw Error("Invalid listener; must be a function.");},Ad=function(a,b){var c=3>b.length||b[0]===a||b[0]===a.eventBusEl_;if(c){var d=a.eventBusEl_;3<=b.length&&b.shift();var e=b[0];b=b[1]}else d=b[0],e=b[1],b=b[2];Pc(d);Og(e);
Re(b);b=Ma(a,b);return{isTargetingSelf:c,target:d,type:e,listener:b}},Xd=function(a,b,c,d){Pc(a);if(a.nodeName)Ec[b](a,c,d);else a[b](c,d)},$f={on:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Ad(this,c);c=b.isTargetingSelf;var e=b.target,f=b.type,g=b.listener;Xd(e,"on",f,g);if(!c){var h=function(){return a.off(e,f,g)};h.guid=g.guid;b=function(){return a.off("dispose",h)};b.guid=g.guid;Xd(this,"on","dispose",h);Xd(e,"on","dispose",b)}},one:function(){for(var a=
this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Ad(this,c);var e=b.target,f=b.type,g=b.listener;b.isTargetingSelf?Xd(e,"one",f,g):(b=function Pb(){a.off(e,f,Pb);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];g.apply(null,c)},b.guid=g.guid,Xd(e,"one",f,b))},any:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Ad(this,c);var e=b.target,f=b.type,g=b.listener;b.isTargetingSelf?Xd(e,"any",f,g):(b=function Pb(){a.off(e,f,Pb);
for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];g.apply(null,c)},b.guid=g.guid,Xd(e,"any",f,b))},off:function(a,b,c){!a||zd(a)?Za(this.eventBusEl_,a,b):(Pc(a),Og(b),Re(c),c=Ma(this,c),this.off("dispose",c),a.nodeName?(Za(a,b,c),Za(a,"dispose",c)):cb(a)&&(a.off(b,c),a.off("dispose",c)))},trigger:function(a,b){return Na(this.eventBusEl_,a,b)}},Se={state:{},setState:function(a){var b=this;"function"===typeof a&&(a=a());var c;l(a,function(a,d){b.state[d]!==a&&(c=c||{},c[d]={from:b.state[d],
to:a});b.state[d]=a});c&&cb(this)&&this.trigger({changes:c,type:"statechanged"});return c}},T=function(){function a(a,b,c){this.player_=!a&&this.play?a=this:a;this.parentComponent_=null;this.options_=ba({},this.options_);b=this.options_=ba(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(a&&a.id&&a.id()||"no_player")+"_component_"+Fa++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&Da(this,{eventBusKey:this.el_?"el_":null});
xb(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};!1!==b.initChildren&&this.initChildren();this.ready(c);!1!==b.reportTouchActivity&&this.enableTouchActivity()}var b=a.prototype;b.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var a=this.children_.length-1;0<=a;a--)this.children_[a].dispose&&this.children_[a].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&
this.el_.parentNode.removeChild(this.el_),Qa(this.el_),this.el_=null);this.player_=null};b.player=function(){return this.player_};b.options=function(a){return a?this.options_=ba(this.options_,a):this.options_};b.el=function(){return this.el_};b.createEl=function(a,b,c){return E(a,b,c)};b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d];d=d&&d.split("-")[0];e=e&&e[d];f&&f[a]?c=f[a]:e&&e[a]&&
(c=e[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(a,c){var d=c=b[c-1];"undefined"===typeof c&&(d=a);return d}));return c};b.contentEl=function(){return this.contentEl_||this.el_};b.id=function(){return this.id_};b.name=function(){return this.name_};b.children=function(){return this.children_};b.getChildById=function(a){return this.childIndex_[a]};b.getChild=function(a){if(a)return a=Ba(a),this.childNameIndex_[a]};b.addChild=function(b,c,d){void 0===c&&(c={});void 0===d&&(d=this.children_.length);if("string"===
typeof b){var e=Ba(b);b=c.componentClass||e;c.name=e;var f=a.getComponent(b);if(!f)throw Error("Component "+b+" does not exist");if("function"!==typeof f)return null;c=new f(this.player_||this,c)}else c=b;c.parentComponent_&&c.parentComponent_.removeChild(c);this.children_.splice(d,0,c);c.parentComponent_=this;"function"===typeof c.id&&(this.childIndex_[c.id()]=c);(e=e||c.name&&Ba(c.name()))&&(this.childNameIndex_[e]=c);"function"===typeof c.el&&c.el()&&(d=this.contentEl().children[d]||null,this.contentEl().insertBefore(c.el(),
d));return c};b.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){for(var b=!1,c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null,(b=a.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}};b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d=this.options_,e=a.getComponent("Tech");
var f=Array.isArray(c)?c:Object.keys(c);f.concat(Object.keys(this.options_).filter(function(a){return!f.some(function(b){return"string"===typeof b?a===b:a===b.name})})).map(function(a){if("string"===typeof a){var d=a;a=c[d]||b.options_[d]||{}}else d=a.name;return{name:d,opts:a}}).filter(function(b){return(b=a.getComponent(b.opts.componentClass||Ba(b.name)))&&!e.isTech(b)}).forEach(function(a){var c=a.name;a=a.opts;void 0!==d[c]&&(a=d[c]);!1!==a&&(!0===a&&(a={}),a.playerOptions=b.options_.playerOptions,
(a=b.addChild(c,a))&&(b[c]=a))})}};b.buildCSSClass=function(){return""};b.ready=function(a,b){void 0===b&&(b=!1);a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))};b.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[];a&&0<a.length&&a.forEach(function(a){a.call(this)},this);this.trigger("ready")},1)};b.$=function(a,b){return kb(a,b||this.contentEl())};b.$$=function(a,b){return Uc(a,
b||this.contentEl())};b.hasClass=function(a){return F(this.el_,a)};b.addClass=function(a){m(this.el_,a)};b.removeClass=function(a){q(this.el_,a)};b.toggleClass=function(a,b){G(this.el_,a,b)};b.show=function(){this.removeClass("vjs-hidden")};b.hide=function(){this.addClass("vjs-hidden")};b.lockShowing=function(){this.addClass("vjs-lock-showing")};b.unlockShowing=function(){this.removeClass("vjs-lock-showing")};b.getAttribute=function(a){return this.el_.getAttribute(a)};b.setAttribute=function(a,b){this.el_.setAttribute(a,
b)};b.removeAttribute=function(a){this.el_.removeAttribute(a)};b.width=function(a,b){return this.dimension("width",a,b)};b.height=function(a,b){return this.dimension("height",a,b)};b.dimensions=function(a,b){this.width(a,!0);this.height(b)};b.dimension=function(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=
b.indexOf("px");return-1!==c?parseInt(b.slice(0,c),10):parseInt(this.el_["offset"+Ba(a)],10)}};b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");"function"===typeof e.getComputedStyle&&(b=e.getComputedStyle(this.el_),b=b.getPropertyValue(a)||b[a]);b=parseFloat(b);0===b&&(a="offset"+Ba(a),b=this.el_[a]);return b};b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};
b.currentWidth=function(){return this.currentDimension("width")};b.currentHeight=function(){return this.currentDimension("height")};b.focus=function(){this.el_.focus()};b.blur=function(){this.el_.blur()};b.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))};b.handleKeyPress=function(a){this.handleKeyDown(a)};b.emitTapEvents=function(){var a=0,b=null,c;this.on("touchstart",function(d){1===d.touches.length&&(b={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},
a=e.performance.now(),c=!0)});this.on("touchmove",function(a){if(1<a.touches.length)c=!1;else if(b){var d=a.touches[0].pageX-b.pageX;a=a.touches[0].pageY-b.pageY;10<Math.sqrt(d*d+a*a)&&(c=!1)}});var d=function(){c=!1};this.on("touchleave",d);this.on("touchcancel",d);this.on("touchend",function(d){b=null;!0===c&&200>e.performance.now()-a&&(d.preventDefault(),this.trigger("tap"))})};b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a=Ma(this.player(),this.player().reportUserActivity),
b;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});var c=function(c){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}};b.setTimeout=function(a,b){var c=this;a=Ma(this,a);var d=e.setTimeout(function(){c.off("dispose",f);a()},b);var f=function(){return c.clearTimeout(d)};f.guid="vjs-timeout-"+d;this.on("dispose",f);return d};b.clearTimeout=function(a){e.clearTimeout(a);var b=function(){};b.guid="vjs-timeout-"+a;this.off("dispose",
b);return a};b.setInterval=function(a,b){var c=this;a=Ma(this,a);var d=e.setInterval(a,b);a=function(){return c.clearInterval(d)};a.guid="vjs-interval-"+d;this.on("dispose",a);return d};b.clearInterval=function(a){e.clearInterval(a);var b=function(){};b.guid="vjs-interval-"+a;this.off("dispose",b);return a};b.requestAnimationFrame=function(a){var b=this;if(this.supportsRaf_){a=Ma(this,a);var c=e.requestAnimationFrame(function(){b.off("dispose",d);a()});var d=function(){return b.cancelAnimationFrame(c)};
d.guid="vjs-raf-"+c;this.on("dispose",d);return c}return this.setTimeout(a,1E3/60)};b.cancelAnimationFrame=function(a){if(this.supportsRaf_){e.cancelAnimationFrame(a);var b=function(){};b.guid="vjs-raf-"+a;this.off("dispose",b);return a}return this.clearTimeout(a)};a.registerComponent=function(b,c){if("string"!==typeof b||!b)throw Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d=a.getComponent("Tech");d=d&&d.isTech(c);var e=a===c||a.prototype.isPrototypeOf(c.prototype);
if(d||!e)throw Error('Illegal component, "'+b+'"; '+(d?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");b=Ba(b);a.components_||(a.components_={});d=a.getComponent("Player");if("Player"===b&&d&&d.players){var f=d.players;d=Object.keys(f);if(f&&0<d.length&&d.map(function(a){return f[a]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return a.components_[b]=c};a.getComponent=function(b){if(b&&(b=Ba(b),a.components_&&
a.components_[b]))return a.components_[b]};return a}();T.prototype.supportsRaf_="function"===typeof e.requestAnimationFrame&&"function"===typeof e.cancelAnimationFrame;T.registerComponent("Component",T);var La=e.navigator&&e.navigator.userAgent||"",ag=/AppleWebKit\/([\d.]+)/i.exec(La),bg=ag?parseFloat(ag.pop()):null,Yd=/iPad/i.test(La),Yb=/iPhone/i.test(La)&&!Yd,Cf=/iPod/i.test(La),ic=Yb||Yd||Cf,Vf=function(){var a=La.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Fc=/Android/i.test(La),jc=function(){var a=
La.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Bd=Fc&&5>jc&&537>bg,Te=/Firefox/i.test(La),nf=/Edge/i.test(La),Zb=!nf&&(/Chrome/i.test(La)||/CriOS/i.test(La)),Pg=function(){var a=La.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),Cd=function(){var a=/MSIE\s(\d+)\.\d/.exec(La);a=a&&parseFloat(a[1]);!a&&/Trident\/7.0/i.test(La)&&/rv:11.0/.test(La)&&(a=11);
return a}(),Ue=/Safari/i.test(La)&&!Zb&&!Fc&&!nf,ad=(Ue||ic)&&!Zb,$b=/Windows/i.test(La),Dd=z()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch),Qc=Object.freeze({IS_IPAD:Yd,IS_IPHONE:Yb,IS_IPOD:Cf,IS_IOS:ic,IOS_VERSION:Vf,IS_ANDROID:Fc,ANDROID_VERSION:jc,IS_NATIVE_ANDROID:Bd,IS_FIREFOX:Te,IS_EDGE:nf,IS_CHROME:Zb,CHROME_VERSION:Pg,IE_VERSION:Cd,IS_SAFARI:Ue,IS_ANY_SAFARI:ad,IS_WINDOWS:$b,TOUCH_ENABLED:Dd}),bd={prefixed:!0},cd=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),
"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Df=cd[0],qc=0;for(;qc<cd.length;qc++)if(cd[qc][1]in
f){var pa=cd[qc];break}if(pa){for(var He=0;He<pa.length;He++)bd[Df[He]]=pa[He];bd.prefixed=pa[0]!==Df[0]}Ea.prototype.code=0;Ea.prototype.message="";Ea.prototype.status=null;Ea.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");Ea.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var fc=0;fc<Ea.errorTypes.length;fc++)Ea[Ea.errorTypes[fc]]=fc,Ea.prototype[Ea.errorTypes[fc]]=fc;var pd=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(b,c,d){a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,
endTime:a.endTime,text:a.text,id:a.id}})})},qd={textTracksToJson:function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=pd(a.track);a.src&&(b.src=a.src);return b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map(pd))},jsonToTextTracks:function(a,b){a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})});
return b.textTracks()},trackToJson_:pd},ra=Vc(function(a,b){function c(a){if(a&&"object"===typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"===typeof a)return f[a];a=String(a);if((b=d[a.toLowerCase()])||(b=e[a.toLowerCase()]))return b;if(1===a.length)return a.charCodeAt(0)}c.isEventKey=function(a,b){if(a&&"object"===typeof a){a=a.which||a.keyCode||a.charCode;if(null===a||void 0===a)return!1;if("string"===typeof b){var c=d[b.toLowerCase()];if(c||(c=e[b.toLowerCase()]))return c===
a}else if("number"===typeof b)return b===a;return!1}};b=a.exports=c;var d=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,
"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;123>a;a++)d[String.fromCharCode(a)]=a-32;for(a=48;58>a;a++)d[a-48]=a;for(a=1;13>a;a++)d["f"+a]=a+111;for(a=0;10>a;a++)d["numpad "+a]=a+96;var f=b.names=b.title={};for(a in d)f[d[a]]=a;for(var g in e)d[g]=e[g]}),Tf=function(a){function b(b,
c){b=a.call(this,b,c)||this;b.opened_=b.hasBeenOpened_=b.hasBeenFilled_=!1;b.closeable(!b.options_.uncloseable);b.content(b.options_.content);b.contentEl_=E("div",{className:"vjs-modal-dialog-content"},{role:"document"});b.descEl_=E("p",{className:"vjs-modal-dialog-description vjs-control-text",id:b.el().getAttribute("aria-describedby")});x(b.descEl_,b.description());b.el_.appendChild(b.descEl_);b.el_.appendChild(b.contentEl_);return b}c(b,a);var d=b.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};d.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;a.prototype.dispose.call(this)};d.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+a.prototype.buildCSSClass.call(this)};d.label=function(){return this.localize(this.options_.label||"Modal Window")};d.description=function(){var a=this.options_.description||
this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return a};d.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=
a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};d.opened=function(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_};d.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden",
"true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};d.closeable=function(a){if("boolean"===typeof a){a=this.closeable_=!!a;var b=this.getChild("closeButton");if(a&&!b){var c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close)}!a&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_};d.fill=function(){this.fillWith(this.content())};
d.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();ca(b,a);this.trigger("modalfill");d?c.insertBefore(b,d):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_)};d.empty=function(){this.trigger("beforemodalempty");U(this.contentEl());this.trigger("modalempty")};d.content=function(a){"undefined"!==typeof a&&(this.content_=a);return this.content_};d.conditionalFocus_=function(){var a=
f.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;if(b.contains(a)||b===a)this.previouslyActiveEl_=a,this.focus()};d.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};d.handleKeyDown=function(a){a.stopPropagation();if(ra.isEventKey(a,"Escape")&&this.closeable())a.preventDefault(),this.close();else if(ra.isEventKey(a,"Tab")){for(var b=this.focusableEls_(),c=this.el_.querySelector(":focus"),d,e=0;e<b.length;e++)if(c===
b[e]){d=e;break}f.activeElement===this.el_&&(d=0);a.shiftKey&&0===d?(b[b.length-1].focus(),a.preventDefault()):a.shiftKey||d!==b.length-1||(b[0].focus(),a.preventDefault())}};d.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof e.HTMLAnchorElement||a instanceof e.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof e.HTMLInputElement||a instanceof e.HTMLSelectElement||a instanceof e.HTMLTextAreaElement||a instanceof
e.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof e.HTMLIFrameElement||a instanceof e.HTMLObjectElement||a instanceof e.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return b}(T);Tf.prototype.options_={pauseOnOpen:!0,temporary:!0};T.registerComponent("ModalDialog",Tf);var rc=function(a){function b(b){void 0===b&&(b=[]);var c=a.call(this)||this;c.tracks_=[];Object.defineProperty(d(c),"length",{get:function(){return this.tracks_.length}});
for(var e=0;e<b.length;e++)c.addTrack(b[e]);return c}c(b,a);var e=b.prototype;e.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}});-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}))};e.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})};
e.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b};return b}(Va);rc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Uf in rc.prototype.allowedEvents_)rc.prototype["on"+Uf]=null;var Gg=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},mh=function(a){function b(b){void 0===b&&(b=[]);for(var c=b.length-1;0<=c;c--)if(b[c].enabled){Gg(b,
b[c]);break}b=a.call(this,b)||this;b.changing_=!1;return b}c(b,a);var d=b.prototype;d.addTrack=function(b){var c=this;b.enabled&&Gg(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,Gg(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};d.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),
b.enabledChange_=null)};return b}(rc),ne=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},Ek=function(a){function b(b){void 0===b&&(b=[]);for(var c=b.length-1;0<=c;c--)if(b[c].selected){ne(b,b[c]);break}b=a.call(this,b)||this;b.changing_=!1;Object.defineProperty(d(b),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}});return b}c(b,a);var e=b.prototype;e.addTrack=function(b){var c=
this;b.selected&&ne(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,ne(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};e.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return b}(rc),li=function(a){function b(){return a.apply(this,arguments)||
this}c(b,a);var d=b.prototype;d.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};d.removeTrack=function(b){a.prototype.removeTrack.call(this,
b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return b}(rc),nj=function(){function a(a){void 0===a&&(a=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;b.addTrackElement_=function(a){var b=this.trackElements_.length;
""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)};b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b};b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&
this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return a}(),mi=function(){function a(b){a.prototype.setCues_.call(this,b);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a;this.length_=a.length;a=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};
if(b<d)for(c=b;c<d;c++)a.call(this,c)};b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b};return a}(),sf={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},pj={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Qd={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",
chapters:"chapters",metadata:"metadata"},th={disabled:"disabled",hidden:"hidden",showing:"showing"},tf=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;var e={id:b.id||"vjs_track_"+Fa++,kind:b.kind||"",label:b.label||"",language:b.language||""};b=function(a){Object.defineProperty(d(c),a,{get:function(){return e[a]},set:function(){}})};for(var f in e)b(f);return c}c(b,a);return b}(Va),se=function(a){var b="protocol hostname port pathname search hash host".split(" "),c=f.createElement("a");
c.href=a;var d=""===c.host&&"file:"!==c.protocol;if(d){var g=f.createElement("div");g.innerHTML='<a href="'+a+'"></a>';c=g.firstChild;g.setAttribute("style","display:none; position:absolute;");f.body.appendChild(g)}a={};for(var h=0;h<b.length;h++)a[b[h]]=c[b[h]];"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,""));"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,""));a.protocol||(a.protocol=e.location.protocol);d&&f.body.removeChild(g);return a},oh=function(a){if(!a.match(/^https?:\/\//)){var b=
f.createElement("div");b.innerHTML='<a href="'+a+'">x</a>';a=b.firstChild.href}return a},uf=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(a))?a.pop().toLowerCase():""},ph=function(a){var b=e.location;a=se(a);return(":"===a.protocol?b.protocol:a.protocol)+a.host!==b.protocol+b.host},lj=Object.freeze({parseUrl:se,getAbsoluteURL:oh,getFileExtension:uf,isCrossOrigin:ph}),qj=Object.prototype.toString,Kg=Array.prototype.slice,jj=
Object.prototype.toString,mj=function(a){var b=this;if("function"!==typeof b||"[object Function]"!==jj.call(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c=Kg.call(arguments,1),d,e=Math.max(0,b.length-c.length),f=[],g=0;g<e;g++)f.push("$"+g);d=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof d){var e=b.apply(this,c.concat(Kg.call(arguments)));return Object(e)===e?e:this}return b.apply(a,
c.concat(Kg.call(arguments)))});b.prototype&&(e=function(){},e.prototype=b.prototype,d.prototype=new e,e.prototype=null);return d},nh=Function.prototype.bind||mj,sh=Object.prototype.toString,rh=function(a){var b=sh.call(a),c="[object Arguments]"===b;c||(c="[object Array]"!==b&&null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Function]"===sh.call(a.callee));return c};if(!Object.keys){var Lg=Object.prototype.hasOwnProperty,ni=Object.prototype.toString,kj=Object.prototype.propertyIsEnumerable,
Fk=!kj.call({toString:null},"toString"),Gk=kj.call(function(){},"prototype"),vf="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),Mc=function(a){var b=a.constructor;return b&&b.prototype===a},uh={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,
$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Wf=function(){if("undefined"===typeof window)return!1;for(var a in window)try{if(!uh["$"+a]&&Lg.call(window,a)&&null!==window[a]&&"object"===typeof window[a])try{Mc(window[a])}catch(Fd){return!0}}catch(Fd){return!0}return!1}();var wf=function(a){var b=null!==a&&"object"===typeof a,c="[object Function]"===ni.call(a),d=rh(a),e=b&&"[object String]"===ni.call(a),f=[];if(!b&&!c&&!d)throw new TypeError("Object.keys called on a non-object");
b=Gk&&c;if(e&&0<a.length&&!Lg.call(a,0))for(e=0;e<a.length;++e)f.push(String(e));if(d&&0<a.length)for(d=0;d<a.length;++d)f.push(String(d));else for(var g in a)b&&"prototype"===g||!Lg.call(a,g)||f.push(String(g));if(Fk){if("undefined"!==typeof window&&Wf)try{var h=Mc(a)}catch(Pb){h=!1}else h=Mc(a);for(d=0;d<vf.length;++d)h&&"constructor"===vf[d]||!Lg.call(a,vf[d])||f.push(vf[d])}return f}}var Oe=wf,oi=Array.prototype.slice,ma=Object.keys,Bc=ma?function(a){return ma(a)}:Oe,Mg=Object.keys;Bc.shim=function(){Object.keys?
function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2)||(Object.keys=function(a){return rh(a)?Mg(oi.call(a)):Mg(a)}):Object.keys=Bc;return Object.keys||Bc};var Rd="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),Sa=Object.prototype.toString,ud=Array.prototype.concat,Yc=Object.defineProperty,wd=function(){var a={};try{Yc(a,"x",{enumerable:!1,value:a});for(var b in a)return!1;return a.x===a}catch(N){return!1}},xf=Yc&&wd(),yf=function(a,b){var c=2<arguments.length?
arguments[2]:{},d=Bc(b);Rd&&(d=ud.call(d,Object.getOwnPropertySymbols(b)));for(var e=0;e<d.length;e+=1){var f=a,g=d[e],h=b[d[e]],k=c[d[e]];if(!(g in f)||"function"===typeof k&&"[object Function]"===Sa.call(k)&&k())xf?Yc(f,g,{configurable:!0,enumerable:!1,value:h,writable:!0}):f[g]=h}};yf.supportsDescriptors=!!xf;var qh=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError;},Me="function"===typeof Symbol&&"symbol"===
typeof Symbol.iterator,Wc=Object.getPrototypeOf||function(a){return a.__proto__},Zf="undefined"===typeof Uint8Array?void 0:Wc(Uint8Array),Sd={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":Me?Wc([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,
"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":void 0,"$ %Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"===typeof DataView?void 0:
DataView,"$ %DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"===
typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,
"$ %Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":Me?Wc(Wc([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"===typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!==
typeof Map&&Me?Wc((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"===typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"===typeof Promise?
void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,
"$ %Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"===typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!==typeof Set&&Me?Wc((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,
"$ %String%":String,"$ %StringIteratorPrototype%":Me?Wc(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":Me?Symbol:void 0,"$ %SymbolPrototype%":Me?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":qh,"$ %TypedArray%":Zf,"$ %TypedArrayPrototype%":Zf?Zf.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"===typeof Uint8Array?void 0:
Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"===typeof Uint32Array?
void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype},Td=function(a,b){if(1<arguments.length&&"boolean"!==typeof b)throw new TypeError('"allowMissing" argument must be a boolean');
var c="$ "+a;if(!(c in Sd))throw new SyntaxError("intrinsic "+a+" does not exist!");if("undefined"===typeof Sd[c]&&!b)throw new TypeError("intrinsic "+a+" exists, but is not available. Please file an issue!");return Sd[c]},pb=nh.call(Function.call,Object.prototype.hasOwnProperty),pi=Td("%TypeError%"),ij=Td("%SyntaxError%"),qi={"Property Descriptor":function(a,b){if("Object"!==a.Type(b))return!1;a={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};
for(var c in b)if(pb(b,c)&&!a[c])return!1;c=pb(b,"[[Value]]");b=pb(b,"[[Get]]")||pb(b,"[[Set]]");if(c&&b)throw new pi("Property Descriptors may not be both accessor and data descriptors");return!0}},Ne=function(a,b,c,d){var e=qi[b];if("function"!==typeof e)throw new ij("unknown record type: "+b);if(!e(a,d))throw new pi(c+" must be a "+b);console.log(e(a,d),d)},hb=Number.isNaN||function(a){return a!==a},Hk=Number.isNaN||function(a){return a!==a},vd=Number.isFinite||function(a){return"number"===typeof a&&
!Hk(a)&&Infinity!==a&&-Infinity!==a},Ig=Function.prototype.toString,Lc=/^\s*class\b/,sd=function(a){try{var b=Ig.call(a);return Lc.test(b)}catch(N){return!1}},of=Object.prototype.toString,hj="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,td=function(a){if(!a||"function"!==typeof a&&"object"!==typeof a)return!1;if("function"===typeof a&&!a.prototype)return!0;if(hj){try{if(sd(a))var b=!1;else Ig.call(a),b=!0}catch(N){b=!1}return b}if(sd(a))return!1;a=of.call(a);return"[object Function]"===
a||"[object GeneratorFunction]"===a},Pa=function(a){return null===a||"function"!==typeof a&&"object"!==typeof a},Vb=Object.prototype.toString,pf={"[[DefaultValue]]":function(a){var b=1<arguments.length?arguments[1]:"[object Date]"===Vb.call(a)?String:Number;if(b===String||b===Number){b=b===String?["toString","valueOf"]:["valueOf","toString"];var c;for(c=0;c<b.length;++c)if(td(a[b[c]])){var d=a[b[c]]();if(Pa(d))return d}throw new TypeError("No default value");}throw new TypeError("invalid [[DefaultValue]] hint supplied");
}},qf=Td("%Object%"),rf=Td("%TypeError%"),Xc=Td("%String%"),Xf={ToPrimitive:function(a){return Pa(a)?a:1<arguments.length?pf["[[DefaultValue]]"](a,arguments[1]):pf["[[DefaultValue]]"](a)},ToBoolean:function(a){return!!a},ToNumber:function(a){return+a},ToInteger:function(a){a=this.ToNumber(a);return hb(a)?0:0!==a&&vd(a)?(0<=a?1:-1)*Math.floor(Math.abs(a)):a},ToInt32:function(a){return this.ToNumber(a)>>0},ToUint32:function(a){return this.ToNumber(a)>>>0},ToUint16:function(a){a=this.ToNumber(a);if(hb(a)||
0===a||!vd(a))return 0;a=(0<=a?1:-1)*Math.floor(Math.abs(a))%65536;return Math.floor(0<=a?a:a+65536)},ToString:function(a){return Xc(a)},ToObject:function(a){this.CheckObjectCoercible(a);return qf(a)},CheckObjectCoercible:function(a,b){if(null==a)throw new rf(b||"Cannot call method on "+a);return a},IsCallable:td,SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:hb(a)&&hb(b)},Type:function(a){if(null===a)return"Null";if("undefined"===typeof a)return"Undefined";if("function"===typeof a||"object"===
typeof a)return"Object";if("number"===typeof a)return"Number";if("boolean"===typeof a)return"Boolean";if("string"===typeof a)return"String"},IsPropertyDescriptor:function(a){if("Object"!==this.Type(a))return!1;var b={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},c;for(c in a)if(pb(a,c)&&!b[c])return!1;b=pb(a,"[[Value]]");a=pb(a,"[[Get]]")||pb(a,"[[Set]]");if(b&&a)throw new rf("Property Descriptors may not be both accessor and data descriptors");
return!0},IsAccessorDescriptor:function(a){if("undefined"===typeof a)return!1;Ne(this,"Property Descriptor","Desc",a);return pb(a,"[[Get]]")||pb(a,"[[Set]]")?!0:!1},IsDataDescriptor:function(a){if("undefined"===typeof a)return!1;Ne(this,"Property Descriptor","Desc",a);return pb(a,"[[Value]]")||pb(a,"[[Writable]]")?!0:!1},IsGenericDescriptor:function(a){if("undefined"===typeof a)return!1;Ne(this,"Property Descriptor","Desc",a);return this.IsAccessorDescriptor(a)||this.IsDataDescriptor(a)?!1:!0},FromPropertyDescriptor:function(a){if("undefined"===
typeof a)return a;Ne(this,"Property Descriptor","Desc",a);if(this.IsDataDescriptor(a))return{value:a["[[Value]]"],writable:!!a["[[Writable]]"],enumerable:!!a["[[Enumerable]]"],configurable:!!a["[[Configurable]]"]};if(this.IsAccessorDescriptor(a))return{get:a["[[Get]]"],set:a["[[Set]]"],enumerable:!!a["[[Enumerable]]"],configurable:!!a["[[Configurable]]"]};throw new rf("FromPropertyDescriptor must be called with a fully populated Property Descriptor");},ToPropertyDescriptor:function(a){if("Object"!==
this.Type(a))throw new rf("ToPropertyDescriptor requires an object");var b={};pb(a,"enumerable")&&(b["[[Enumerable]]"]=this.ToBoolean(a.enumerable));pb(a,"configurable")&&(b["[[Configurable]]"]=this.ToBoolean(a.configurable));pb(a,"value")&&(b["[[Value]]"]=a.value);pb(a,"writable")&&(b["[[Writable]]"]=this.ToBoolean(a.writable));if(pb(a,"get")){var c=a.get;if("undefined"!==typeof c&&!this.IsCallable(c))throw new TypeError("getter must be a function");b["[[Get]]"]=c}if(pb(a,"set")){a=a.set;if("undefined"!==
typeof a&&!this.IsCallable(a))throw new rf("setter must be a function");b["[[Set]]"]=a}if((pb(b,"[[Get]]")||pb(b,"[[Set]]"))&&(pb(b,"[[Value]]")||pb(b,"[[Writable]]")))throw new rf("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return b}},Yf=nh.call(Function.call,String.prototype.replace),oj=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Jg=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,
ha=function(){var a=Xf.ToString(Xf.CheckObjectCoercible(this));return Yf(Yf(a,oj,""),Jg,"")},qe=function(){return String.prototype.trim?String.prototype.trim:ha},tc=nh.call(Function.call,qe());yf(tc,{getPolyfill:qe,implementation:ha,shim:function(){var a=qe();yf(String.prototype,{trim:a},{trim:function(){return String.prototype.trim!==a}});return a}});var Pd=Object.prototype.toString,re=Object.prototype.hasOwnProperty,Oh=function(a,b,c){if(!td(b))throw new TypeError("iterator must be a function");
var d;3<=arguments.length&&(d=c);if("[object Array]"===Pd.call(a)){var e=d;d=0;for(var f=a.length;d<f;d++)re.call(a,d)&&(null==e?b(a[d],d,a):b.call(e,a[d],d,a))}else if("string"===typeof a)for(e=d,d=0,f=a.length;d<f;d++)null==e?b(a.charAt(d),d,a):b.call(e,a.charAt(d),d,a);else for(e in a)re.call(a,e)&&(null==d?b(a[e],e,a):b.call(d,a[e],e,a))},zj=function(a){if(!a)return{};var b={};Oh(tc(a).split("\n"),function(a){var c=a.indexOf(":"),d=tc(a.slice(0,c)).toLowerCase();a=tc(a.slice(c+1));"undefined"===
typeof b[d]?b[d]=a:"[object Array]"===Object.prototype.toString.call(b[d])?b[d].push(a):b[d]=[b[d],a]});return b},si=function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Nb.call(c,d)&&(a[d]=c[d])}return a},Nb=Object.prototype.hasOwnProperty;$a.XMLHttpRequest=e.XMLHttpRequest||uc;$a.XDomainRequest="withCredentials"in new $a.XMLHttpRequest?$a.XMLHttpRequest:e.XDomainRequest;(function(a,b){for(var c=0;c<a.length;c++)b(a[c])})("get put post patch head delete".split(" "),
function(a){$a["delete"===a?"del":a]=function(b,c,d){c=Ia(b,c,d);c.method=a.toUpperCase();return Ud(c)}});var ye=function(a,b){var c=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)};c.onparsingerror=function(a){d.push(a)};c.onflush=function(){b.trigger({type:"loadeddata",target:b})};c.parse(a);0<d.length&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return xa.error(a)}),e.console&&
e.console.groupEnd&&e.console.groupEnd());c.flush()},Hh=function(a,b){var c={uri:a};if(a=ph(a))c.cors=a;$a(c,Ma(this,function(a,c,d){if(a)return xa.error(a,c);b.loaded_=!0;if("function"!==typeof e.WebVTT){if(b.tech_){var f=function(){xa.error("vttjs failed to load, stopping trying to process "+b.src);b.tech_.off("vttjsloaded",g)};var g=function(){b.tech_.off("vttjserror",f);return ye(d,b)};b.tech_.one("vttjsloaded",g);b.tech_.one("vttjserror",f)}}else ye(d,b)}))},Ab=function(a){function b(b){void 0===
b&&(b={});if(!b.tech)throw Error("A tech was not provided.");b=ba(b,{kind:Qd[b.kind]||"subtitles",language:b.language||b.srclang||""});var c=th[b.mode]||"disabled",e=b["default"];if("metadata"===b.kind||"chapters"===b.kind)c="hidden";var f=a.call(this,b)||this;f.tech_=b.tech;f.cues_=[];f.activeCues_=[];var g=new mi(f.cues_),h=new mi(f.activeCues_),k=!1,l=Ma(d(f),function(){this.activeCues=this.activeCues;k&&(this.trigger("cuechange"),k=!1)});"disabled"!==c&&f.tech_.ready(function(){f.tech_.on("timeupdate",
l)},!0);Object.defineProperties(d(f),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return c},set:function(a){var b=this;th[a]&&(c=a,"disabled"!==c?this.tech_.ready(function(){b.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<
d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}k=!1;if(b.length!==this.activeCues_.length)k=!0;else for(a=0;a<b.length;a++)-1===this.activeCues_.indexOf(b[a])&&(k=!0);this.activeCues_=b;h.setCues_(this.activeCues_);return h},set:function(){}}});b.src?(f.src=b.src,Hh(b.src,d(f))):f.loaded_=!0;return f}c(b,a);var f=b.prototype;f.addCue=function(a){var b=a;if(e.vttjs&&!(a instanceof e.vttjs.VTTCue)){b=new e.vttjs.VTTCue(a.startTime,
a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id;b.originalCue_=a}a=this.tech_.textTracks();for(c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)};f.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}};return b}(tf);Ab.prototype.allowedEvents_={cuechange:"cuechange"};var Rg=function(a){function b(b){void 0===
b&&(b={});var c=ba(b,{kind:pj[b.kind]||""});b=a.call(this,c)||this;var e=!1;Object.defineProperty(d(b),"enabled",{get:function(){return e},set:function(a){"boolean"===typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}});c.enabled&&(b.enabled=c.enabled);b.loaded_=!0;return b}c(b,a);return b}(tf),Sg=function(a){function b(b){void 0===b&&(b={});var c=ba(b,{kind:sf[b.kind]||""});b=a.call(this,c)||this;var e=!1;Object.defineProperty(d(b),"selected",{get:function(){return e},set:function(a){"boolean"===
typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}});c.selected&&(b.selected=c.selected);return b}c(b,a);return b}(tf),be=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;var e=new Ab(b);c.kind=e.kind;c.src=e.src;c.srclang=e.language;c.label=e.label;c["default"]=e["default"];Object.defineProperties(d(c),{readyState:{get:function(){return f}},track:{get:function(){return e}}});var f=0;e.addEventListener("loadeddata",function(){f=2;c.trigger({type:"load",target:d(c)})});return c}
c(b,a);return b}(Va);be.prototype.allowedEvents_={load:"load"};be.NONE=0;be.LOADING=1;be.LOADED=2;be.ERROR=3;var yc={audio:{ListClass:mh,TrackClass:Rg,capitalName:"Audio"},video:{ListClass:Ek,TrackClass:Sg,capitalName:"Video"},text:{ListClass:li,TrackClass:Ab,capitalName:"Text"}};Object.keys(yc).forEach(function(a){yc[a].getterName=a+"Tracks";yc[a].privateName=a+"Tracks_"});var we={remoteText:{ListClass:li,TrackClass:Ab,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},
remoteTextEl:{ListClass:nj,TrackClass:be,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},cc=ba(yc,we);we.names=Object.keys(we);yc.names=Object.keys(yc);cc.names=[].concat(we.names).concat(yc.names);var Tg=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");a.prototype=b;return new a}}();Ka.prototype=Tg(Error.prototype);Ka.prototype.constructor=Ka;Ka.Errors=
{BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Nc.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&
(b=parseFloat(b),0<=b&&100>=b)?(this.set(a,b),!0):!1}};var wj={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},We={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Aj={v:"title",lang:"lang"},zi={rt:"ruby"},Ha=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,
1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,
68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,
126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];le.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])};le.prototype.formatStyle=function(a,b){return 0===a?0:a+b};Ie.prototype=Tg(le.prototype);Ie.prototype.constructor=Ie;wb.prototype.move=function(a,b){b=void 0!==
b?b:this.lineHeight;switch(a){case "+x":this.left+=b;this.right+=b;break;case "-x":this.left-=b;this.right-=b;break;case "+y":this.top+=b;this.bottom+=b;break;case "-y":this.top-=b,this.bottom-=b}};wb.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};wb.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1};wb.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=
a.left&&this.right<=a.right};wb.prototype.overlapsOppositeAxis=function(a,b){switch(b){case "+x":return this.left<a.left;case "-x":return this.right>a.right;case "+y":return this.top<a.top;case "-y":return this.bottom>a.bottom}};wb.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)};wb.prototype.toCSSCompatValues=function(a){return{top:this.top-
a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};wb.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;return{left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||
c}};xd.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!==typeof a)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};xd.convertCueToDOMTree=function(a,b){return a&&b?vb(a,b):null};xd.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");d.style.position="absolute";d.style.left="0";d.style.right="0";d.style.top="0";d.style.bottom="0";d.style.margin=
"1.5%";c.appendChild(d);if(function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var e=[],f=wb.getSimpleBoxPosition(d),g={font:Math.round(5*f.height)/100+"px sans-serif"};(function(){for(var c,h,k=0;k<b.length;k++){h=b[k];c=new Ie(a,h,g);d.appendChild(c.div);var l=void 0,m=void 0,n=c,C=f,p=e,J=new wb(n),q=n.cue;if("number"===typeof q.line&&(q.snapToLines||0<=q.line&&100>=q.line))var t=q.line;else if(q.track&&q.track.textTrackList&&q.track.textTrackList.mediaElement){t=
q.track;for(var r=t.textTrackList,u=0,A=0;A<r.length&&r[A]!==t;A++)"showing"===r[A].mode&&u++;t=-1*++u}else t=-1;r=[];if(q.snapToLines){switch(q.vertical){case "":r=["+y","-y"];m="height";break;case "rl":r=["+x","-x"];m="width";break;case "lr":r=["-x","+x"],m="width"}u=J.lineHeight;A=u*Math.round(t);m=C[m]+u;var w=r[0];Math.abs(A)>m&&(A=(0>A?-1:1)*Math.ceil(m/u)*u);0>t&&(A+=""===q.vertical?C.height:C.width,r=r.reverse());J.move(w,A)}else{J=J.lineHeight/C.height*100;switch(q.lineAlign){case "middle":t-=
J/2;break;case "end":t-=J}switch(q.vertical){case "":n.applyStyles({top:n.formatStyle(t,"%")});break;case "rl":n.applyStyles({left:n.formatStyle(t,"%")});break;case "lr":n.applyStyles({right:n.formatStyle(t,"%")})}r=["+y","-x","+x","-y"];J=new wb(n)}a:{q=J;J=r;m=new wb(q);t=1;for(r=0;r<J.length;r++){for(;q.overlapsOppositeAxis(C,J[r])||q.within(C)&&q.overlapsAny(p);)q.move(J[r]);if(q.within(C)){l=q;break a}u=q.intersectPercentage(C);t>u&&(l=new wb(q),t=u);q=new wb(m)}l=l||m}n.move(l.toCSSCompatValues(C));
h.displayState=c.div;e.push(wb.getSimpleBoxPosition(c))}})()}else for(c=0;c<b.length;c++)d.appendChild(b[c].displayState)};xd.Parser=function(a,b,c){c||(c=b,b={});b||(b={});this.window=a;this.vttjs=b;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};xd.Parser.prototype={reportOrThrowError:function(a){if(a instanceof Ka)this.onparsingerror&&this.onparsingerror(a);else throw a;},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&
"\n"!==a[b];)++b;var c=a.substr(0,b);"\r"===a[b]&&++b;"\n"===a[b]&&++b;f.buffer=a.substr(b);return c}function c(a){var b=new Nc;Vd(a,function(a,c){switch(a){case "id":b.set(a,c);break;case "width":b.percent(a,c);break;case "lines":b.integer(a,c);break;case "regionanchor":case "viewportanchor":c=c.split(",");if(2!==c.length)break;var d=new Nc;d.percent("x",c[0]);d.percent("y",c[1]);if(!d.has("x")||!d.has("y"))break;b.set(a+"X",d.get("x"));b.set(a+"Y",d.get("y"));break;case "scroll":b.alt(a,c,["up"])}},
/=/,/\s/);b.has("id")&&(a=new (f.vttjs.VTTRegion||f.window.VTTRegion),a.width=b.get("width",100),a.lines=b.get("lines",3),a.regionAnchorX=b.get("regionanchorX",0),a.regionAnchorY=b.get("regionanchorY",100),a.viewportAnchorX=b.get("viewportanchorX",0),a.viewportAnchorY=b.get("viewportanchorY",100),a.scroll=b.get("scroll",""),f.onregion&&f.onregion(a),f.regionList.push({id:b.get("id"),region:a}))}function d(a){var b=new Nc;Vd(a,function(a,c){switch(a){case "MPEGT":b.integer(a+"S",c);break;case "LOCA":b.set(a+
"L",Rb(c))}},/[^\d]:/,/,/);f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function e(a){a.match(/X-TIMESTAMP-MAP/)?Vd(a,function(a,b){switch(a){case "X-TIMESTAMP-MAP":d(b)}},/=/):Vd(a,function(a,b){switch(a){case "Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;var g=b();var h=g.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new Ka(Ka.Errors.BadSignature);f.state="HEADER"}for(a=
!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;a?a=!1:g=b();switch(f.state){case "HEADER":/:/.test(g)?e(g):g||(f.state="ID");continue;case "NOTE":g||(f.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new (f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");f.state="CUE";if(-1===g.indexOf("--\x3e")){f.cue.id=g;continue}case "CUE":try{zf(g,f.cue,f.regionList)}catch(Q){f.reportOrThrowError(Q);f.cue=null;f.state="BADCUE";continue}f.state="CUETEXT";continue;
case "CUETEXT":var k=-1!==g.indexOf("--\x3e");if(!g||k&&(a=!0)){f.oncue&&f.oncue(f.cue);f.cue=null;f.state="ID";continue}f.cue.text&&(f.cue.text+="\n");f.cue.text+=g;continue;case "BADCUE":g||(f.state="ID")}}}catch(Q){f.reportOrThrowError(Q);if("CUETEXT"===f.state&&f.cue&&f.oncue)f.oncue(f.cue);f.cue=null;f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===
this.state)throw new Ka(Ka.Errors.BadSignature);}catch(Tb){this.reportOrThrowError(Tb)}this.onflush&&this.onflush();return this}};var Wa={"":1,lr:1,rl:1},Sb={start:1,middle:1,end:1,left:1,right:1};Ac.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Mk={"":!0,up:!0},Zg=function(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!Kc(b))throw Error("Width must be between 0 and 100.");
a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!==typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!Kc(a))throw Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!Kc(a))throw Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!Kc(a))throw Error("ViewportAnchorY must be between 0 and 100.");
f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!Kc(a))throw Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){a="string"!==typeof a?!1:Mk[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");g=a}}})},Hc=Vc(function(a){a=a.exports={WebVTT:xd,VTTCue:Ac,VTTRegion:Zg};e.vttjs=a;e.WebVTT=a.WebVTT;var b=a.VTTCue,c=a.VTTRegion,d=e.VTTCue,f=
e.VTTRegion;a.shim=function(){e.VTTCue=b;e.VTTRegion=c};a.restore=function(){e.VTTCue=d;e.VTTRegion=f};e.VTTCue||a.shim()}),db=function(a){function b(b,c){void 0===b&&(b={});void 0===c&&(c=function(){});b.reportTouchActivity=!1;var d=a.call(this,null,b,c)||this;d.hasStarted_=!1;d.on("playing",function(){this.hasStarted_=!0});d.on("loadstart",function(){this.hasStarted_=!1});cc.names.forEach(function(a){a=cc[a];b&&b[a.getterName]&&(d[a.privateName]=b[a.getterName])});d.featuresProgressEvents||d.manualProgressOn();
d.featuresTimeupdateEvents||d.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(a){!1===b["native"+a+"Tracks"]&&(d["featuresNative"+a+"Tracks"]=!1)});if(!1===b.nativeCaptions||!1===b.nativeTextTracks)d.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)d.featuresNativeTextTracks=!0;d.featuresNativeTextTracks||d.emulateTextTracks();d.autoRemoteTextTracks_=new cc.text.ListClass;d.initTrackListeners();b.nativeControlsForTouch||d.emitTapEvents();d.constructor&&
(d.name_=d.constructor.name||"Unknown Tech");return d}c(b,a);var d=b.prototype;d.triggerSourceset=function(a){var b=this;if(!this.isReady_)this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)});this.trigger({src:a,type:"sourceset"})};d.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};d.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",
this.onDurationChange)};d.trackProgress=function(a){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ma(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};d.onDurationChange=function(a){this.duration_=this.duration()};d.buffered=function(){return O(0,0)};d.bufferedPercent=function(){return v(this.buffered(),this.duration_)};d.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};
d.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};d.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};d.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,
manuallyTriggered:!0})},250)};d.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};d.dispose=function(){this.clearTracks(yc.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();a.prototype.dispose.call(this)};d.clearTracks=function(a){var b=this;a=[].concat(a);a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&
b.removeRemoteTextTrack(e);c.removeTrack(e)}})};d.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;)this.removeRemoteTextTrack(a[b])};d.reset=function(){};d.error=function(a){void 0!==a&&(this.error_=new Ea(a),this.trigger("error"));return this.error_};d.played=function(){return this.hasStarted_?O(0,0):O()};d.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};d.initTrackListeners=function(){var a=
this;yc.names.forEach(function(b){var c=function(){a.trigger(b+"trackchange")},d=a[yc[b].getterName]();d.addEventListener("removetrack",c);d.addEventListener("addtrack",c);a.on("dispose",function(){d.removeEventListener("removetrack",c);d.removeEventListener("addtrack",c)})})};d.addWebVttScript_=function(){var a=this;if(!e.WebVTT)if(f.body.contains(this.el()))if(!this.options_["vtt.js"]&&w(Hc)&&0<Object.keys(Hc).length)this.trigger("vttjsloaded");else{var b=f.createElement("script");b.src=this.options_["vtt.js"]||
"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";b.onload=function(){a.trigger("vttjsloaded")};b.onerror=function(){a.trigger("vttjserror")};this.on("dispose",function(){b.onload=null;b.onerror=null});e.WebVTT=!0;this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)};d.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d);c.on("removetrack",
e);this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f);"showing"===c.mode&&c.addEventListener("cuechange",f)}};g();b.addEventListener("change",g);b.addEventListener("addtrack",g);b.addEventListener("removetrack",g);this.on("dispose",function(){c.off("addtrack",d);c.off("removetrack",e);b.removeEventListener("change",g);b.removeEventListener("addtrack",g);b.removeEventListener("removetrack",
g);for(var a=0;a<b.length;a++)b[a].removeEventListener("cuechange",f)})};d.addTextTrack=function(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");var d=void 0;void 0===d&&(d={});var e=this.textTracks();d.kind=a;b&&(d.label=b);c&&(d.language=c);d.tech=this;a=new cc.text.TrackClass(d);e.addTrack(a);return a};d.createRemoteTextTrack=function(a){a=ba(a,{tech:this});return new we.remoteTextEl.TrackClass(a)};d.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=
this.createRemoteTextTrack(a);!0!==b&&!1!==b&&(xa.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0);this.remoteTextTrackEls().addTrackElement_(d);this.remoteTextTracks().addTrack(d.track);!0!==b&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)});return d};d.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);
this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)};d.getVideoPlaybackQuality=function(){return{}};d.requestPictureInPicture=function(){var a=this.options_.Promise||e.Promise;if(a)return a.reject()};d.setPoster=function(){};d.playsinline=function(){};d.setPlaysinline=function(){};d.overrideNativeAudioTracks=function(){};d.overrideNativeVideoTracks=function(){};d.canPlayType=function(){return""};b.canPlayType=function(){return""};b.canPlaySource=function(a,c){return b.canPlayType(a.type)};
b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b};b.registerTech=function(a,c){b.techs_||(b.techs_={});if(!b.isTech(c))throw Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=Ba(a);b.techs_[a]=c;"Tech"!==a&&b.defaultTechOrder_.push(a);return c};b.getTech=function(a){if(a){a=Ba(a);if(b.techs_&&b.techs_[a])return b.techs_[a];
if(e&&e.videojs&&e.videojs[a])return xa.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[a]}};return b}(T);cc.names.forEach(function(a){var b=cc[a];db.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});db.prototype.featuresVolumeControl=!0;db.prototype.featuresMuteControl=!0;db.prototype.featuresFullscreenResize=!1;db.prototype.featuresPlaybackRate=
!1;db.prototype.featuresProgressEvents=!1;db.prototype.featuresSourceset=!1;db.prototype.featuresTimeupdateEvents=!1;db.prototype.featuresNativeTextTracks=!1;db.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]);void 0===c&&(c=d.length);d.splice(c,0,b)};a.canPlayType=function(b){for(var c=a.sourceHandlers||[],d,e=0;e<c.length;e++)if(d=c[e].canPlayType(b))return d;return""};a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||
[],e,f=0;f<d.length;f++)if(e=d[f].canHandleSource(b,c))return d[f];return null};a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"===typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype);a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,
this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:xa.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.one("dispose",this.disposeSourceHandler)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();
this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};T.registerComponent("Tech",db);db.registerTech("Tech",db);db.defaultTechOrder_=[];var af={},Ih={},Zd={},cg={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},dd={setCurrentTime:1,setVolume:1},Ai={play:1,pause:1},dc={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",
oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},lg=function(a){void 0===a&&(a="");a=uf(a);return dc[a.toLowerCase()]||""},Jh=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){var d=a[c];if(d.type&&d.src&&d.src===
b)return d.type}return lg(b)},nc=function N(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=N(a);Array.isArray(a)?b=b.concat(a):r(a)&&b.push(a)});a=b}else a="string"===typeof a&&a.trim()?[Fb({src:a})]:r(a)&&"string"===typeof a.src&&a.src&&a.src.trim()?[Fb(a)]:[];return a},ve=function(a){function b(b,c,d){var e=ba({createEl:!1},c);d=a.call(this,b,e,d)||this;if(c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(e=0,c=c.playerOptions.techOrder;e<
c.length;e++){var f=Ba(c[e]),g=db.getTech(f);f||(g=T.getComponent(f));if(g&&g.isSupported()){b.loadTech_(f);break}}return d}c(b,a);return b}(T);T.registerComponent("MediaLoader",ve);var P=function(a){function b(b,c){b=a.call(this,b,c)||this;b.emitTapEvents();b.enable();return b}c(b,a);var d=b.prototype;d.createEl=function(b,c,d){void 0===b&&(b="div");void 0===c&&(c={});void 0===d&&(d={});c=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),
tabIndex:0},c);"button"===b&&xa.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead.");d=p({role:"button"},d);this.tabIndex_=c.tabIndex;b=a.prototype.createEl.call(this,b,c,d);this.createControlTextEl(b);return b};d.dispose=function(){this.controlTextEl_=null;a.prototype.dispose.call(this)};d.createControlTextEl=function(a){this.controlTextEl_=E("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);
this.controlText(this.controlText_,a);return this.controlTextEl_};d.controlText=function(a,b){void 0===b&&(b=this.el());if(void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a;x(this.controlTextEl_,c);this.nonIconControl||b.setAttribute("title",c)};d.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)};d.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled",
"false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};d.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};d.handleClick=function(a){};d.handleKeyDown=function(b){ra.isEventKey(b,
"Space")||ra.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)};return b}(T);T.registerComponent("ClickableComponent",P);var va=function(a){function b(b,c){c=a.call(this,b,c)||this;c.update();b.on("posterchange",Ma(d(c),c.update));return c}c(b,a);var e=b.prototype;e.dispose=function(){this.player().off("posterchange",this.update);a.prototype.dispose.call(this)};e.createEl=function(){return E("div",{className:"vjs-poster",tabIndex:-1})};
e.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};e.setSrc=function(a){var b="";a&&(b='url("'+a+'")');this.el_.style.backgroundImage=b};e.handleClick=function(a){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Lb(this.player_.play()):this.player_.pause())};return b}(P);T.registerComponent("PosterImage",va);var Gc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',
monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Gh=function(a){function b(b,c,f){c=a.call(this,b,c,f)||this;var g=Ma(d(c),c.updateDisplay);b.on("loadstart",Ma(d(c),c.toggleDisplay));b.on("texttrackchange",g);b.on("loadedmetadata",Ma(d(c),c.preselectTrack));b.ready(Ma(d(c),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)this.hide();
else{b.on("fullscreenchange",g);b.on("playerresize",g);e.addEventListener("orientationchange",g);b.on("dispose",function(){return e.removeEventListener("orientationchange",g)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()}}));return c}c(b,a);var f=b.prototype;f.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,d,e,f,g=0;g<b.length;g++){var h=
b[g];c&&c.enabled&&c.language&&c.language===h.language&&h.kind in a?h.kind===c.kind?f=h:f||(f=h):c&&!c.enabled?e=d=f=null:h["default"]&&("descriptions"!==h.kind||d?h.kind in a&&!e&&(e=h):d=h)}f?f.mode="showing":e?e.mode="showing":d&&(d.mode="showing")};f.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};f.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};
f.clearDisplay=function(){"function"===typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)};f.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(b){b=[];for(var c=0;c<a.length;++c){var d=a[c];"showing"===d.mode&&b.push(d)}this.updateForTrack(b)}else{c=b=null;for(d=a.length;d--;){var e=a[d];"showing"===e.mode&&("descriptions"===e.kind?b=e:c=e)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):
b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))}};f.updateDisplayState=function(a){var b=this.player_.textTrackSettings.getValues();a=a.activeCues;for(var c=a.length;c--;){var d=a[c];if(d){d=d.displayState;b.color&&(d.firstChild.style.color=b.color);if(b.textOpacity){var f=oe(b.color||"#fff",b.textOpacity);try{d.firstChild.style.color=f}catch(Q){}}b.backgroundColor&&(d.firstChild.style.backgroundColor=b.backgroundColor);if(b.backgroundOpacity){f=
oe(b.backgroundColor||"#000",b.backgroundOpacity);try{d.firstChild.style.backgroundColor=f}catch(Q){}}if(b.windowColor)if(b.windowOpacity){f=oe(b.windowColor,b.windowOpacity);try{d.style.backgroundColor=f}catch(Q){}}else d.style.backgroundColor=b.windowColor;b.edgeStyle&&("dropshadow"===b.edgeStyle?d.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===b.edgeStyle?d.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===b.edgeStyle?
d.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(d.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));b.fontPercent&&1!==b.fontPercent&&(f=e.parseFloat(d.style.fontSize),d.style.fontSize=f*b.fontPercent+"px",d.style.height="auto",d.style.top="auto",d.style.bottom="2px");b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=
Gc[b.fontFamily])}}};f.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof e.WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],f=0;f<d.activeCues.length;++f)b.push(d.activeCues[f]);e.WebVTT.processCues(e,b,this.el_);for(b=0;b<a.length;++b){c=a[b];for(d=0;d<c.activeCues.length;++d)f=c.activeCues[d].displayState,m(f,"vjs-text-track-cue"),m(f,"vjs-text-track-cue-"+(c.language?c.language:b));this.player_.textTrackSettings&&this.updateDisplayState(c)}}};
return b}(T);T.registerComponent("TextTrackDisplay",Gh);var bc=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);b.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=E("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[b])});var c=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(b);return c};return b}(T);T.registerComponent("LoadingSpinner",bc);
var mc=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);var d=b.prototype;d.createEl=function(a,b,c){void 0===b&&(b={});void 0===c&&(c={});a="button";b=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b);c=p({type:"button"},c);a=T.prototype.createEl.call(this,a,b,c);this.createControlTextEl(a);return a};d.addChild=function(a,b){void 0===b&&(b={});xa.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+
") is not supported; use a ClickableComponent instead.");return T.prototype.addChild.call(this,a,b)};d.enable=function(){a.prototype.enable.call(this);this.el_.removeAttribute("disabled")};d.disable=function(){a.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};d.handleKeyDown=function(b){ra.isEventKey(b,"Space")||ra.isEventKey(b,"Enter")?b.stopPropagation():a.prototype.handleKeyDown.call(this,b)};return b}(P);T.registerComponent("Button",mc);var uj=function(a){function b(b,
c){b=a.call(this,b,c)||this;b.mouseused_=!1;b.on("mousedown",b.handleMouseDown);return b}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-big-play-button"};d.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)Lb(b),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=function(){return c.focus()},fa(b)?b.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};
d.handleKeyDown=function(b){this.mouseused_=!1;a.prototype.handleKeyDown.call(this,b)};d.handleMouseDown=function(a){this.mouseused_=!0};return b}(mc);uj.prototype.controlText_="Play Video";T.registerComponent("BigPlayButton",uj);var Kh=function(a){function b(b,c){b=a.call(this,b,c)||this;b.controlText(c&&c.controlText||b.localize("Close"));return b}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)};d.handleClick=function(a){this.trigger({type:"close",
bubbles:!1})};d.handleKeyDown=function(b){ra.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)};return b}(mc);T.registerComponent("CloseButton",Kh);var gg=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this;c.replay=void 0===c.replay||c.replay;d.on(b,"play",d.handlePlay);d.on(b,"pause",d.handlePause);if(c.replay)d.on(b,"ended",d.handleEnded);return d}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-play-control "+
a.prototype.buildCSSClass.call(this)};d.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause();a.stopPropagation()};d.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};d.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};d.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};
d.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return b}(mc);gg.prototype.controlText_="Play";T.registerComponent("PlayToggle",gg);var fg=function(a,b){a=0>a?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)e=d=c="-";e=0<e||0<b?e+":":"";return e+(((e||10<=f)&&10>d?"0"+d:d)+":")+(10>c?"0"+c:c)},
gd=fg,Bb=function(a){function b(b,c){c=a.call(this,b,c)||this;c.throttledUpdateContent=Wd(Ma(d(c),c.updateContent),25);c.on(b,"timeupdate",c.throttledUpdateContent);return c}c(b,a);var e=b.prototype;e.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=E("span",{className:b+"-display"},{"aria-live":"off",
role:"presentation"});this.updateTextNode_();c.appendChild(this.contentEl_);return c};e.dispose=function(){this.textNode_=this.contentEl_=null;a.prototype.dispose.call(this)};e.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=f.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}};e.formatTime_=function(a){return Oc(a)};e.updateFormattedTime_=function(a){a=
this.formatTime_(a);a!==this.formattedTime_&&(this.formattedTime_=a,this.requestAnimationFrame(this.updateTextNode_))};e.updateContent=function(a){};return b}(T);Bb.prototype.labelText_="Time";Bb.prototype.controlText_="Time";T.registerComponent("TimeDisplay",Bb);var ze=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"ended",c.handleEnded);return c}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-current-time"};d.updateContent=function(a){a=this.player_.scrubbing()?this.player_.getCache().currentTime:
this.player_.currentTime();this.updateFormattedTime_(a)};d.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return b}(Bb);ze.prototype.labelText_="Current Time";ze.prototype.controlText_="Current Time";T.registerComponent("CurrentTimeDisplay",ze);var Vg=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",c.updateContent);c.on(b,"loadstart",c.updateContent);c.on(b,"loadedmetadata",c.throttledUpdateContent);return c}c(b,a);
var d=b.prototype;d.buildCSSClass=function(){return"vjs-duration"};d.updateContent=function(a){a=this.player_.duration();this.duration_!==a&&(this.duration_=a,this.updateFormattedTime_(a))};return b}(Bb);Vg.prototype.labelText_="Duration";Vg.prototype.controlText_="Duration";T.registerComponent("DurationDisplay",Vg);var ig=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",
innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})};return b}(T);T.registerComponent("TimeDivider",ig);var fd=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",c.throttledUpdateContent);c.on(b,"ended",c.handleEnded);return c}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-remaining-time"};d.createEl=function(){var b=a.prototype.createEl.call(this);b.insertBefore(E("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return b};d.updateContent=function(a){"number"===
typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};d.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(0)};return b}(Bb);fd.prototype.labelText_="Remaining Time";fd.prototype.controlText_="Remaining Time";T.registerComponent("RemainingTimeDisplay",fd);var ri=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateShowing();b.on(b.player(),
"durationchange",b.updateShowing);return b}c(b,a);var d=b.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=E("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});b.appendChild(this.contentEl_);return b};d.dispose=function(){this.contentEl_=null;a.prototype.dispose.call(this)};d.updateShowing=function(a){Infinity===
this.player().duration()?this.show():this.hide()};return b}(T);T.registerComponent("LiveDisplay",ri);var Ve=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateLiveEdgeStatus();if(b.player_.liveTracker)b.on(b.player_.liveTracker,"liveedgechange",b.updateLiveEdgeStatus);return b}c(b,a);var d=b.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=E("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},
{"aria-hidden":"true"});b.appendChild(this.textEl_);return b};d.updateLiveEdgeStatus=function(a){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};d.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};d.dispose=
function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;a.prototype.dispose.call(this)};return b}(mc);Ve.prototype.controlText_="Seek to live, currently playing live";T.registerComponent("SeekToLive",Ve);var Qg=function(a){function b(b,c){b=a.call(this,b,c)||this;b.bar=b.getChild(b.options_.barName);b.vertical(!!b.options_.vertical);b.enable();return b}c(b,a);var d=b.prototype;d.enabled=function(){return this.enabled_};d.enable=
function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};d.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);
this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};d.createEl=
function(b,c,d){void 0===c&&(c={});void 0===d&&(d={});c.className+=" vjs-slider";c=p({tabIndex:0},c);d=p({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d);return a.prototype.createEl.call(this,b,c,d)};d.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||Zb||a.preventDefault();S();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,
"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(a)};d.handleMouseMove=function(a){};d.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;ia();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.update()};d.update=function(){if(this.el_){var a=
this.getPercent(),b=this.bar;if(b){if("number"!==typeof a||a!==a||0>a||Infinity===a)a=0;var c=(100*a).toFixed(2)+"%";b=b.el().style;this.vertical()?b.height=c:b.width=c;return a}}};d.calculateDistance=function(a){a=X(this.el_,a);return this.vertical()?a.y:a.x};d.handleKeyDown=function(b){ra.isEventKey(b,"Left")||ra.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):ra.isEventKey(b,"Right")||ra.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):
a.prototype.handleKeyDown.call(this,b)};d.handleClick=function(a){a.stopPropagation();a.preventDefault()};d.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return b}(T);T.registerComponent("Slider",Qg);var Bi=function(a){function b(b,c){c=a.call(this,b,c)||this;c.partEls_=[];c.on(b,"progress",c.update);return c}c(b,a);var d=b.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})};d.dispose=function(){this.partEls_=null;a.prototype.dispose.call(this)};d.update=function(a){var b=this.player_.liveTracker;a=this.player_.buffered();var c=b&&b.isLive()?b.seekableEnd():this.player_.duration(),d=this.player_.bufferedEnd();b=this.partEls_;var e=this.$(".vjs-control-text-loaded-percentage"),f=function(a,
b,c){a=a/b||0;a=100*(1<=a?1:a);c&&(a=a.toFixed(2));return a+"%"};this.el_.style.width=f(d,c);x(e,f(d,c,!0));for(c=0;c<a.length;c++){e=a.start(c);var g=a.end(c),h=b[c];h||(h=this.el_.appendChild(E()),b[c]=h);h.style.left=f(e,d);h.style.width=f(g-e,d)}for(d=b.length;d>a.length;d--)this.el_.removeChild(b[d-1]);b.length=a.length};return b}(T);T.registerComponent("LoadProgressBar",Bi);var ng=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);var d=b.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};d.update=function(a,b,c){var d=za(this.el_),e=za(this.player_.el()),f=a.width*b;e&&d&&(b=a.left-e.left+f,a=a.width-f+(e.right-a.right),e=d.width/2,b<e?e+=e-b:a<e&&(e=a),0>e?e=0:e>d.width&&(e=d.width),this.el_.style.right="-"+e+"px",this.write(c))};d.write=function(a){x(this.el_,a)};d.updateTime=function(a,b,c,d){var e=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var f=e.player_.duration();
if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){f=e.player_.liveTracker.liveWindow();var g=f-b*f;f=(1>g?"":"-")+Oc(g,f)}else f=Oc(c,f);e.update(a,b,f);d&&d()})};return b}(T);T.registerComponent("TimeTooltip",ng);var Jf=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);var d=b.prototype;d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};d.update=function(a,b){var c=this.getChild("timeTooltip");
if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}};return b}(T);Jf.prototype.options_={children:[]};ic||Fc||Jf.prototype.options_.children.push("timeTooltip");T.registerComponent("PlayProgressBar",Jf);var yh=function(a){function b(b,c){b=a.call(this,b,c)||this;b.update=Wd(Ma(d(b),b.update),25);return b}c(b,a);var e=b.prototype;e.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};e.update=
function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})};return b}(T);yh.prototype.options_={children:["timeTooltip"]};T.registerComponent("MouseTimeDisplay",yh);var Gb=function(a){function b(b,c){b=a.call(this,b,c)||this;b.setEventHandlers_();return b}c(b,a);var d=b.prototype;d.setEventHandlers_=function(){this.update=Wd(Ma(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,
"ended",this.handleEnded);this.on(this.player_,"durationchange",this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in f&&"visibilityState"in f)this.on(f,"visibilitychange",this.toggleVisibility_)};d.toggleVisibility_=function(a){f.hidden?this.disableInterval_(a):(this.enableInterval_(),
this.requestAnimationFrame(this.update))};d.enableInterval_=function(){var a=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){a.requestAnimationFrame(a.update)},30)};d.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==a.type||this.clearInterval(this.updateInterval)};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};
d.update_=function(a,b){var c=this.player_.liveTracker,d=this.player_.duration();c&&c.isLive()&&(d=this.player_.liveTracker.liveCurrentTime());this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Oc(a,d),Oc(d,d)],"{1} of {2}"));this.bar&&this.bar.update(za(this.el_),b)};d.update=function(b){if(null!==this.el().offsetParent)return b=a.prototype.update.call(this),this.update_(this.getCurrentTime_(),
b),b};d.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};d.handleEnded=function(a){this.update_(this.player_.duration(),1)};d.getPercent=function(){var a=this.getCurrentTime_(),b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):a/=this.player_.duration();return 1<=a?1:a||0};d.handleMouseDown=function(b){ea(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=
!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))};d.handleMouseMove=function(a){if(ea(a)){var b=this.calculateDistance(a);var c=this.player_.liveTracker;if(c&&c.isLive()){a=c.seekableStart();var d=c.liveCurrentTime();b=a+b*c.liveWindow();b>=d&&(b=d);b<=a&&(b=a+.1);if(Infinity===b)return}else b*=this.player_.duration(),b===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}};d.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");
b&&b.show()};d.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()};d.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b);b&&b.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&Lb(this.player_.play())};d.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};d.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-
5)};d.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};d.handleKeyDown=function(b){ra.isEventKey(b,"Space")||ra.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.handleAction(b)):ra.isEventKey(b,"Home")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(0)):ra.isEventKey(b,"End")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(ra(b))?(b.preventDefault(),b.stopPropagation(),
b=10*(ra.codes[ra(b)]-ra.codes["0"])/100,this.player_.currentTime(this.player_.duration()*b)):ra.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):ra.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,b)};return b}(Qg);Gb.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};ic||Fc||Gb.prototype.options_.children.splice(1,
0,"mouseTimeDisplay");T.registerComponent("SeekBar",Gb);var Ff=function(a){function b(b,c){b=a.call(this,b,c)||this;b.handleMouseMove=Wd(Ma(d(b),b.handleMouseMove),25);b.throttledHandleMouseSeek=Wd(Ma(d(b),b.handleMouseSeek),25);b.enable();return b}c(b,a);var e=b.prototype;e.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};e.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("mouseTimeDisplay"),d=b.el();
b=za(d);a=X(d,a).x;1<a?a=1:0>a&&(a=0);c&&c.update(b,a)}};e.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)};e.enabled=function(){return this.enabled_};e.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};e.enable=function(){this.children().forEach(function(a){return a.enable&&
a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};e.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)};e.handleMouseUp=function(a){var b=
this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return b}(T);Ff.prototype.options_={children:["seekBar"]};T.registerComponent("ProgressControl",Ff);var ti=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,["enterpictureinpicture","leavepictureinpicture"],c.handlePictureInPictureChange);
f.pictureInPictureEnabled||c.disable();return c}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)};d.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")};d.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return b}(mc);ti.prototype.controlText_=
"Picture-in-Picture";T.registerComponent("PictureInPictureToggle",ti);var Gf=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"fullscreenchange",c.handleFullscreenChange);!1===f[b.fsApi_.fullscreenEnabled]&&c.disable();return c}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)};d.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};d.handleClick=
function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return b}(mc);Gf.prototype.controlText_="Fullscreen";T.registerComponent("FullscreenToggle",Gf);var hd=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},hg=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return b}(T);T.registerComponent("VolumeLevel",hg);var wi=function(a){function b(b,c){var d=a.call(this,b,c)||this;d.on("slideractive",d.updateLastVolume_);d.on(b,"volumechange",d.updateARIAAttributes);b.ready(function(){return d.updateARIAAttributes()});return d}c(b,a);var d=b.prototype;d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),
"aria-live":"polite"})};d.handleMouseDown=function(b){ea(b)&&a.prototype.handleMouseDown.call(this,b)};d.handleMouseMove=function(a){ea(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};d.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};d.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};d.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};d.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-
.1)};d.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};d.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};d.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})};return b}(Qg);wi.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};wi.prototype.playerEvent=
"volumechange";T.registerComponent("VolumeBar",wi);var vj=function(a){function b(b,c){void 0===c&&(c={});c.vertical=c.vertical||!1;if("undefined"===typeof c.volumeBar||w(c.volumeBar))c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical;var e=a.call(this,b,c)||this;hd(d(e),b);e.throttledHandleMouseMove=Wd(Ma(d(e),e.handleMouseMove),25);e.on("mousedown",e.handleMouseDown);e.on("touchstart",e.handleMouseDown);e.on(e.volumeBar,["focus","slideractive"],function(){e.volumeBar.addClass("vjs-slider-active");
e.addClass("vjs-slider-active");e.trigger("slideractive")});e.on(e.volumeBar,["blur","sliderinactive"],function(){e.volumeBar.removeClass("vjs-slider-active");e.removeClass("vjs-slider-active");e.trigger("sliderinactive")});return e}c(b,a);var e=b.prototype;e.createEl=function(){var b="vjs-volume-horizontal";this.options_.vertical&&(b="vjs-volume-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})};e.handleMouseDown=function(a){a=this.el_.ownerDocument;
this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};e.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};e.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};return b}(T);
vj.prototype.options_={children:["volumeBar"]};T.registerComponent("VolumeControl",vj);var Wg=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Nh=function(a){function b(b,c){c=a.call(this,b,c)||this;Wg(d(c),b);c.on(b,["loadstart","volumechange"],c.update);return c}c(b,a);var e=b.prototype;e.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)};
e.handleClick=function(a){a=this.player_.volume();var b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};e.update=function(a){this.updateIcon_();this.updateControlText_()};e.updateIcon_=function(){var a=this.player_.volume(),b=3;ic&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2);for(a=0;4>a;a++)q(this.el_,"vjs-vol-"+
a);m(this.el_,"vjs-vol-"+b)};e.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return b}(mc);Nh.prototype.controlText_="Mute";T.registerComponent("MuteToggle",Nh);var Ze=function(a){function b(b,c){void 0===c&&(c={});c.inline="undefined"!==typeof c.inline?c.inline:!0;if("undefined"===typeof c.volumeControl||w(c.volumeControl))c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline;c=a.call(this,
b,c)||this;c.on(b,["loadstart"],c.volumePanelState_);c.on(c.volumeControl,["slideractive"],c.sliderActive_);c.on(c.volumeControl,["sliderinactive"],c.sliderInactive_);return c}c(b,a);var d=b.prototype;d.sliderActive_=function(){this.addClass("vjs-slider-active")};d.sliderInactive_=function(){this.removeClass("vjs-slider-active")};d.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&
!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};d.createEl=function(){var b="vjs-volume-panel-horizontal";this.options_.inline||(b="vjs-volume-panel-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})};return b}(T);Ze.prototype.options_={children:["muteToggle","volumeControl"]};T.registerComponent("VolumePanel",Ze);var jg=function(a){function b(b,c){b=a.call(this,b,c)||this;c&&(b.menuButton_=c.menuButton);b.focusedChild_=
-1;b.on("keydown",b.handleKeyDown);b.boundHandleBlur_=Ma(d(b),b.handleBlur);b.boundHandleTapClick_=Ma(d(b),b.handleTapClick);return b}c(b,a);var e=b.prototype;e.addEventListenerForItem=function(a){a instanceof T&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};e.removeEventListenerForItem=function(a){a instanceof T&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};e.removeChild=function(b){"string"===
typeof b&&(b=this.getChild(b));this.removeEventListenerForItem(b);a.prototype.removeChild.call(this,b)};e.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};e.createEl=function(){this.contentEl_=E(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var b=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});b.appendChild(this.contentEl_);Ta(b,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});
return b};e.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;a.prototype.dispose.call(this)};e.handleBlur=function(a){var b=a.relatedTarget||f.activeElement;this.children().some(function(a){return a.el()===b})||(a=this.menuButton_)&&a.buttonPressed_&&b!==a.el().firstChild&&a.unpressButton()};e.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(function(b){return b.el()===a.target})[0])&&
"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}};e.handleKeyDown=function(a){if(ra.isEventKey(a,"Left")||ra.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(ra.isEventKey(a,"Right")||ra.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};e.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};e.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);
this.focus(a)};e.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())};return b}(T);T.registerComponent("Menu",jg);var Hf=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this;d.menuButton_=new mc(b,c);d.menuButton_.controlText(d.controlText_);d.menuButton_.el_.setAttribute("aria-haspopup","true");b=mc.prototype.buildCSSClass();
d.menuButton_.el_.className=d.buildCSSClass()+" "+b;d.menuButton_.removeClass("vjs-control");d.addChild(d.menuButton_);d.update();d.enabled_=!0;d.on(d.menuButton_,"tap",d.handleClick);d.on(d.menuButton_,"click",d.handleClick);d.on(d.menuButton_,"keydown",d.handleKeyDown);d.on(d.menuButton_,"mouseenter",function(){d.menu.show()});d.on("keydown",d.handleSubmenuKeyDown);return d}c(b,a);var d=b.prototype;d.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));
this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};d.createMenu=function(){var a=new jg(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=E("li",{className:"vjs-menu-title",innerHTML:Ba(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;b=new T(this.player_,{el:b});a.addItem(b)}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);
return a};d.createItems=function(){};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};d.buildWrapperCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";var c=mc.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)};d.buildCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";return"vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)};
d.controlText=function(a,b){void 0===b&&(b=this.menuButton_.el());return this.menuButton_.controlText(a,b)};d.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};d.focus=function(){this.menuButton_.focus()};d.blur=function(){this.menuButton_.blur()};d.handleKeyDown=function(a){ra.isEventKey(a,"Esc")||ra.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),ra.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!ra.isEventKey(a,"Up")&&!ra.isEventKey(a,
"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};d.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};d.handleSubmenuKeyDown=function(a){if(ra.isEventKey(a,"Esc")||ra.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),ra.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};d.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ic&&
D()||this.menu.focus())};d.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};d.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};d.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return b}(T);T.registerComponent("MenuButton",Hf);var id=function(a){function b(b,c){var e=c.tracks;
b=a.call(this,b,c)||this;1>=b.items.length&&b.hide();if(!e)return d(b);var f=Ma(d(b),b.update);e.addEventListener("removetrack",f);e.addEventListener("addtrack",f);b.player_.on("ready",f);b.player_.on("dispose",function(){e.removeEventListener("removetrack",f);e.removeEventListener("addtrack",f)});return b}c(b,a);return b}(Hf);T.registerComponent("TrackButton",id);var xi="Tab Esc Up Down Right Left".split(" "),If=function(a){function b(b,c){b=a.call(this,b,c)||this;b.selectable=c.selectable;b.isSelected_=
c.selected||!1;b.multiSelectable=c.multiSelectable;b.selected(b.isSelected_);b.selectable?b.multiSelectable?b.el_.setAttribute("role","menuitemcheckbox"):b.el_.setAttribute("role","menuitemradio"):b.el_.setAttribute("role","menuitem");return b}c(b,a);var d=b.prototype;d.createEl=function(b,c,d){this.nonIconControl=!0;return a.prototype.createEl.call(this,"li",p({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),d)};
d.handleKeyDown=function(b){xi.some(function(a){return ra.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)};d.handleClick=function(a){this.selected(!0)};d.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return b}(P);T.registerComponent("MenuItem",
If);var Kf=function(a){function b(b,c){var g=c.track,h=b.textTracks();c.label=g.label||g.language||"Unknown";c.selected="showing"===g.mode;var k=a.call(this,b,c)||this;k.track=g;k.kinds=(c.kinds||[c.kind||k.track.kind]).filter(Boolean);var l=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];k.handleTracksChange.apply(d(k),b)},m=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];k.handleSelectedLanguageChange.apply(d(k),b)};b.on(["loadstart",
"texttrackchange"],l);h.addEventListener("change",l);h.addEventListener("selectedlanguagechange",m);k.on("dispose",function(){b.off(["loadstart","texttrackchange"],l);h.removeEventListener("change",l);h.removeEventListener("selectedlanguagechange",m)});if(void 0===h.onchange){var n;k.on(["tap","click"],function(){if("object"!==typeof e.Event)try{n=new e.Event("change")}catch(Ej){}n||(n=f.createEvent("Event"),n.initEvent("change",!0,!0));h.dispatchEvent(n)})}k.handleTracksChange();return k}c(b,a);
var g=b.prototype;g.handleClick=function(b){var c=this.track,d=this.player_.textTracks();a.prototype.handleClick.call(this,b);if(d)for(b=0;b<d.length;b++){var e=d[b];-1!==this.kinds.indexOf(e.kind)&&(e===c?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}};g.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};g.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,
a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};g.dispose=function(){this.track=null;a.prototype.dispose.call(this)};return b}(If);T.registerComponent("TextTrackMenuItem",Kf);var lc=function(a){function b(b,c){c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"};c.kinds||(c.kinds=[c.kind]);c.track.label=c.label?c.label:c.kinds.join(" and ")+" off";
c.selectable=!0;c.multiSelectable=!1;return a.call(this,b,c)||this}c(b,a);var d=b.prototype;d.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var e=a[c];if(-1<this.options_.kinds.indexOf(e.kind)&&"showing"===e.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};d.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var e=a[c];if(-1<["captions","descriptions","subtitles"].indexOf(e.kind)&&"showing"===
e.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return b}(Kf);T.registerComponent("OffTextTrackMenuItem",lc);var Lf=function(a){function b(b,c){void 0===c&&(c={});c.tracks=b.textTracks();return a.call(this,b,c)||this}c(b,a);b.prototype.createItems=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=Kf);var c;this.label_&&(c=this.label_+" off");a.push(new lc(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=1;c=this.player_.textTracks();Array.isArray(this.kinds_)||
(this.kinds_=[this.kind_]);for(var d=0;d<c.length;d++){var e=c[d];if(-1<this.kinds_.indexOf(e.kind)){var f=new b(this.player_,{track:e,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});f.addClass("vjs-"+e.kind+"-menu-item");a.push(f)}}return a};return b}(id);T.registerComponent("TextTrackButton",Lf);var Mf=function(a){function b(b,c){var e=c.track,f=c.cue,g=b.currentTime();c.selectable=!0;c.multiSelectable=!1;c.label=f.text;c.selected=f.startTime<=g&&g<f.endTime;b=a.call(this,b,
c)||this;b.track=e;b.cue=f;e.addEventListener("cuechange",Ma(d(b),b.update));return b}c(b,a);var e=b.prototype;e.handleClick=function(b){a.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};e.update=function(a){a=this.cue;var b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};return b}(If);T.registerComponent("ChaptersTrackMenuItem",Mf);var Mb=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}c(b,a);var d=
b.prototype;d.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)};d.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack());a.prototype.update.call(this)};d.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var b=
this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};d.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var c=a[b];if(c.kind===this.kind_)return c}};d.getMenuCaption=function(){return this.track_&&this.track_.label?
this.track_.label:this.localize(Ba(this.kind_))};d.createMenu=function(){this.options_.title=this.getMenuCaption();return a.prototype.createMenu.call(this)};d.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=new Mf(this.player_,{track:this.track_,cue:b[c]});a.push(e)}return a};return b}(Lf);Mb.prototype.kind_="chapters";Mb.prototype.controlText_="Chapters";T.registerComponent("ChaptersButton",Mb);var Ph=function(a){function b(b,
c,e){c=a.call(this,b,c,e)||this;var f=b.textTracks(),g=Ma(d(c),c.handleTracksChange);f.addEventListener("change",g);c.on("dispose",function(){f.removeEventListener("change",g)});return c}c(b,a);var e=b.prototype;e.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!1,c=0,d=a.length;c<d;c++){var e=a[c];if(e.kind!==this.kind_&&"showing"===e.mode){b=!0;break}}b?this.disable():this.enable()};e.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)};
e.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)};return b}(Lf);Ph.prototype.kind_="descriptions";Ph.prototype.controlText_="Descriptions";T.registerComponent("DescriptionsButton",Ph);var eg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)};
return b}(Lf);eg.prototype.kind_="subtitles";eg.prototype.controlText_="Subtitles";T.registerComponent("SubtitlesButton",eg);var qa=function(a){function b(b,c){c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};c.selectable=!1;c.name="CaptionSettingsMenuItem";b=a.call(this,b,c)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+c.kind+" settings dialog");return b}c(b,a);b.prototype.handleClick=function(a){this.player().getChild("textTrackSettings").open()};
return b}(Kf);T.registerComponent("CaptionSettingsMenuItem",qa);var xc=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||
(b.push(new qa(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return a.prototype.createItems.call(this,b)};return b}(Lf);xc.prototype.kind_="captions";xc.prototype.controlText_="Captions";T.registerComponent("CaptionsButton",xc);var qb=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);b.prototype.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Captions")+"</span>\n      ");return a.prototype.createEl.call(this,b,p({innerHTML:e+"</span>"},c),d)};return b}(Kf);T.registerComponent("SubsCapsMenuItem",qb);var $e=function(a){function b(b,c){void 0===c&&(c={});b=a.call(this,b,c)||this;b.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(b.player_.language_)&&(b.label_="captions");b.menuButton_.controlText(Ba(b.label_));return b}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)};
d.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new qa(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return b=a.prototype.createItems.call(this,b,qb)};return b}(Lf);$e.prototype.kinds_=["captions","subtitles"];$e.prototype.controlText_="Subtitles";T.registerComponent("SubsCapsButton",
$e);var zh=function(a){function b(b,c){var e=c.track,f=b.audioTracks();c.label=e.label||e.language||"Unknown";c.selected=e.enabled;var g=a.call(this,b,c)||this;g.track=e;g.addClass("vjs-"+e.kind+"-menu-item");var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleTracksChange.apply(d(g),b)};f.addEventListener("change",h);g.on("dispose",function(){f.removeEventListener("change",h)});return g}c(b,a);var e=b.prototype;e.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+
this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return a.prototype.createEl.call(this,b,p({innerHTML:e+"</span>"},c),d)};e.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(b=0;b<c.length;b++){var d=c[b];d.enabled=d===this.track}};e.handleTracksChange=function(a){this.selected(this.track.enabled)};
return b}(If);T.registerComponent("AudioTrackMenuItem",zh);var Mh=function(a){function b(b,c){void 0===c&&(c={});c.tracks=b.audioTracks();return a.call(this,b,c)||this}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++)a.push(new zh(this.player_,
{track:b[c],selectable:!0,multiSelectable:!1}));return a};return b}(id);Mh.prototype.controlText_="Audio Track";T.registerComponent("AudioTrackButton",Mh);var Rc=function(a){function b(b,c){var d=c.rate,e=parseFloat(d,10);c.label=d;c.selected=1===e;c.selectable=!0;c.multiSelectable=!1;c=a.call(this,b,c)||this;c.label=d;c.rate=e;c.on(b,"ratechange",c.update);return c}c(b,a);var d=b.prototype;d.handleClick=function(b){a.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};d.update=
function(a){this.selected(this.player().playbackRate()===this.rate)};return b}(If);Rc.prototype.contentElType="button";T.registerComponent("PlaybackRateMenuItem",Rc);var Lh=function(a){function b(b,c){c=a.call(this,b,c)||this;c.updateVisibility();c.updateLabel();c.on(b,"loadstart",c.updateVisibility);c.on(b,"ratechange",c.updateLabel);return c}c(b,a);var d=b.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this);this.labelEl_=E("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});
b.appendChild(this.labelEl_);return b};d.dispose=function(){this.labelEl_=null;a.prototype.dispose.call(this)};d.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)};d.createMenu=function(){var a=new jg(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;0<=c;c--)a.addChild(new Rc(this.player(),{rate:b[c]+"x"}));return a};d.updateARIAAttributes=
function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};d.handleClick=function(a){a=this.player().playbackRate();for(var b=this.playbackRates(),c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)};d.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};d.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&
0<this.playbackRates().length};d.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};d.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return b}(Hf);Lh.prototype.controlText_="Playback Rate";T.registerComponent("PlaybackRateMenuButton",Lh);var mg=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-spacer "+
a.prototype.buildCSSClass.call(this)};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return b}(T);T.registerComponent("Spacer",mg);var ed=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)};d.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});b.innerHTML="\u00a0";return b};
return b}(mg);T.registerComponent("CustomControlSpacer",ed);var Yg=function(a){function b(){return a.apply(this,arguments)||this}c(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return b}(T);Yg.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton pictureInPictureToggle fullscreenToggle".split(" ")};
T.registerComponent("ControlBar",Yg);var ce=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"error",c.open);return c}c(b,a);var d=b.prototype;d.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)};d.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return b}(Tf);ce.prototype.options_=ba(Tf.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});T.registerComponent("ErrorDisplay",ce);var Cj=["#000",
"Black"],yi=["#00F","Blue"],yj=["#0FF","Cyan"],Xe=["#0F0","Green"],xe=["#F0F","Magenta"],ue=["#F00","Red"],Ef=["#FFF","White"],xh=["#FF0","Yellow"],vi=["1","Opaque"],kg=["0.5","Semi-Transparent"],Xg=["0","Transparent"],bf={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Cj,Ef,ue,Xe,yi,xh,xe,yj]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[vi,kg,Xg]},color:{selector:".vjs-fg-color > select",
id:"captions-foreground-color-%s",label:"Color",options:[Ef,Cj,ue,Xe,yi,xh,xe,yj]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif",
"Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",
label:"Transparency",options:[vi,kg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Xg,kg,vi]}};bf.windowColor.options=bf.backgroundColor.options;var Bj=function(a){function b(b,c){c.temporary=!1;var e=a.call(this,b,c)||this;e.updateDisplay=Ma(d(e),e.updateDisplay);e.fill();e.hasBeenOpened_=e.hasBeenFilled_=!0;e.endDialog=E("p",{className:"vjs-control-text",
textContent:e.localize("End of dialog window.")});e.el().appendChild(e.endDialog);e.setDefaults();void 0===c.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings);e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings();e.close()});e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults();e.updateDisplay()});l(bf,function(a){e.on(e.$(a.selector),"change",e.updateDisplay)});e.options_.persistTextTrackSettings&&e.restoreSettings();
return e}c(b,a);var f=b.prototype;f.dispose=function(){this.endDialog=null;a.prototype.dispose.call(this)};f.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b="");void 0===c&&(c="label");a=bf[a];var e=a.id.replace("%s",this.id_),f=[b,e].join(" ").trim();return["<"+c+' id="'+e+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(a.label),"</"+c+">",'<select aria-labelledby="'+f+'">'].concat(a.options.map(function(a){var b=e+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+
a[0]+'" ','aria-labelledby="'+f+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")};f.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};f.createElBgColor_=function(){var a="captions-background-"+
this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};f.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",
a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};f.createElColors_=function(){return E("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};f.createElFont_=function(){return E("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',
this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};f.createElControls_=function(){var a=this.localize("restore all settings to the default values");return E("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+
this.localize("Done")+"</button>"].join("")})};f.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};f.label=function(){return this.localize("Caption Settings Dialog")};f.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};f.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};f.getValues=function(){var a=this;return n(bf,function(b,c,d){var e=a.$(c.selector);
c=Af(e.options[e.options.selectedIndex].value,c.parser);void 0!==c&&(b[d]=c);return b},{})};f.setValues=function(a){var b=this;l(bf,function(c,d){var e=b.$(c.selector);d=a[d];c=c.parser;if(d)for(var f=0;f<e.options.length;f++)if(Af(e.options[f].value,c)===d){e.selectedIndex=f;break}})};f.setDefaults=function(){var a=this;l(bf,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})};f.restoreSettings=function(){try{var a=JSON.parse(e.localStorage.getItem("vjs-text-track-settings"))}catch(J){xa.warn(J)}a&&
this.setValues(a)};f.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?e.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):e.localStorage.removeItem("vjs-text-track-settings")}catch(J){xa.warn(J)}}};f.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};f.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton;a=a&&a.captionsButton;
b?b.focus():a&&a.focus()};return b}(Tf);T.registerComponent("TextTrackSettings",Bj);var Ye=function(a){function b(b,c){var f=c.ResizeObserver||e.ResizeObserver;null===c.ResizeObserver&&(f=!1);var g=ba({createEl:!f,reportTouchActivity:!1},c);var h=a.call(this,b,g)||this;h.ResizeObserver=c.ResizeObserver||e.ResizeObserver;h.loadListener_=null;h.resizeObserver_=null;h.debouncedHandler_=Ng(function(){h.resizeHandler()},100,!1,d(h));f?(h.resizeObserver_=new h.ResizeObserver(h.debouncedHandler_),h.resizeObserver_.observe(b.el())):
(h.loadListener_=function(){if(h.el_&&h.el_.contentWindow){var a=h.debouncedHandler_,b=h.unloadListener_=function(){Za(this,"resize",a);Za(this,"unload",b);b=null};Ta(h.el_.contentWindow,"unload",b);Ta(h.el_.contentWindow,"resize",a)}},h.one("load",h.loadListener_));return h}c(b,a);var f=b.prototype;f.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};f.resizeHandler=function(){this.player_&&this.player_.trigger&&
this.player_.trigger("playerresize")};f.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;a.prototype.dispose.call(this)};
return b}(T);T.registerComponent("ResizeManager",Ye);var ui=function(a){function b(b,c){c=ba({createEl:!1},c);b=a.call(this,b,c)||this;b.reset_();b.on(b.player_,"durationchange",b.handleDurationchange);if(Cd&&"hidden"in f&&"visibilityState"in f)b.on(f,"visibilitychange",b.handleVisibilityChange);return b}c(b,a);var d=b.prototype;d.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(f.hidden?this.stopTracking():this.startTracking())};d.isBehind_=function(){if(!this.timeupdateSeen_)return!1;
var a=this.liveCurrentTime(),b=this.player_.currentTime(),c=this.seekableIncrement_;return Infinity!==a&&a-(2*c+.07)>=b};d.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var a=this.player_.seekable();a&&a.length&&(a=this.seekableEnd(),a!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(a-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=a,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&
(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange")))};d.handleDurationchange=function(){Infinity===this.player_.duration()?this.startTracking():this.stopTracking()};d.startTracking=function(){var a=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||
(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){a.timeupdateSeen_=!0;a.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))};d.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};d.reset_=function(){this.pastSeekEnd_=0;this.behindLiveEdge_=this.lastSeekEnd_=null;this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,"play",
this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)};d.stopTracking=function(){this.isTracking()&&this.reset_()};d.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:Infinity};d.seekableStart=
function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0};d.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?Infinity:a-this.seekableStart()};d.isLive=function(){return this.isTracking()};d.atLiveEdge=function(){return!this.behindLiveEdge()};d.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()};d.pastSeekEnd=function(){return this.pastSeekEnd_};d.behindLiveEdge=function(){return this.behindLiveEdge_};
d.isTracking=function(){return"number"===typeof this.trackingInterval_};d.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())};d.dispose=function(){this.stopTracking();a.prototype.dispose.call(this)};return b}(T);T.registerComponent("LiveTracker",ui);var de=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");var c=[],d="";if(!b.length)return!1;for(var e=0;e<b.length;e++){var f=
b[e].src;f&&-1===c.indexOf(f)&&c.push(f)}if(!c.length)return!1;1===c.length&&(d=c[0]);a.triggerSourceset(d);return!0},dg=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=f.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(a=f.createDocumentFragment();b.childNodes.length;)a.appendChild(b.childNodes[0]);this.innerText="";e.Element.prototype.appendChild.call(this,a);return this.innerHTML}}),xj=function(a,b){for(var c={},d=0;d<
a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],b))&&c.set&&c.get);d++);c.enumerable=!0;c.configurable=!0;return c},V=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=xj([a.el(),e.HTMLMediaElement.prototype,e.Element.prototype,dg],"innerHTML"),f=function(c){return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];d=c.apply(b,e);de(a);return d}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=f(c[a]))});Object.defineProperty(b,
"innerHTML",ba(d,{set:f(d.set)}));b.resetSourceWatch_=function(){b.resetSourceWatch_=null;Object.keys(c).forEach(function(a){b[a]=c[a]});Object.defineProperty(b,"innerHTML",d)};a.one("sourceset",b.resetSourceWatch_)}},kc=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?oh(e.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){e.Element.prototype.setAttribute.call(this,"src",a);return a}}),lm=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=
xj([a.el(),e.HTMLMediaElement.prototype,kc],"src"),d=b.setAttribute,f=b.load;Object.defineProperty(b,"src",ba(c,{set:function(d){d=c.set.call(b,d);a.triggerSourceset(b.src);return d}}));b.setAttribute=function(c,e){e=d.call(b,c,e);/src/i.test(c)&&a.triggerSourceset(b.src);return e};b.load=function(){var c=f.call(b);de(a)||(a.triggerSourceset(""),V(a));return c};b.currentSrc?a.triggerSourceset(b.currentSrc):de(a)||V(a);b.resetSourceset_=function(){b.resetSourceset_=null;b.load=f;b.setAttribute=d;Object.defineProperty(b,
"src",c);b.resetSourceWatch_&&b.resetSourceWatch_()}}}},Y=function(a){function b(b,c){c=a.call(this,b,c)||this;var d=b.source,e=!1;d&&(c.el_.currentSrc!==d.src||b.tag&&3===b.tag.initNetworkState_)?c.setSource(d):c.handleLateInit_(c.el_);b.enableSourceset&&c.setupSourcesetHandling_();if(c.el_.hasChildNodes()){var f=c.el_.childNodes,g=f.length;for(d=[];g--;){var h=f[g];"track"===h.nodeName.toLowerCase()&&(c.featuresNativeTextTracks?(c.remoteTextTrackEls().addTrackElement_(h),c.remoteTextTracks().addTrack(h.track),
c.textTracks().addTrack(h.track),e||c.el_.hasAttribute("crossorigin")||!ph(h.src)||(e=!0)):d.push(h))}for(f=0;f<d.length;f++)c.el_.removeChild(d[f])}c.proxyNativeTracks_();c.featuresNativeTextTracks&&e&&xa.warn(fb(Pe()));c.restoreMetadataTracksInIOSNativePlayer_();(Dd||Yb||Bd)&&!0===b.nativeControlsForTouch&&c.setControls(!0);c.proxyWebkitFullscreen_();c.triggerReady();return c}c(b,a);var d=b.prototype;d.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();b.disposeMediaElement(this.el_);
this.options_=null;a.prototype.dispose.call(this)};d.setupSourcesetHandling_=function(){lm(this)};d.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b,c=function(){b=[];for(var c=0;c<a.length;c++){var d=a[c];"metadata"===d.kind&&b.push({track:d,storedMode:d.mode})}};c();a.addEventListener("change",c);this.on("dispose",function(){return a.removeEventListener("change",c)});var d=function Q(){for(var c=0;c<b.length;c++){var d=b[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&
(d.track.mode=d.storedMode)}a.removeEventListener("change",Q)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",c);a.removeEventListener("change",d);a.addEventListener("change",d)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",d)})};d.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+
"TracksListeners_"]).forEach(function(a){c.el()[d+"Tracks"].removeEventListener(a,c[d+"TracksListeners_"][a])});this["featuresNative"+a+"Tracks"]=!b;this[d+"TracksListeners_"]=null;this.proxyNativeTracksForType_(d)}};d.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)};d.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};d.proxyNativeTracksForType_=function(a){var b=this;a=yc[a];var c=this.el()[a.getterName],d=this[a.getterName]();if(this["featuresNative"+a.capitalName+
"Tracks"]&&c&&c.addEventListener){var e={change:function(a){d.trigger({type:"change",target:d,currentTarget:d,srcElement:d})},addtrack:function(a){d.addTrack(a.track)},removetrack:function(a){d.removeTrack(a.track)}},f=function(){for(var a=[],b=0;b<d.length;b++){for(var e=!1,f=0;f<c.length;f++)if(c[f]===d[b]){e=!0;break}e||a.push(d[b])}for(;a.length;)d.removeTrack(a.shift())};this[a.getterName+"Listeners_"]=e;Object.keys(e).forEach(function(a){var d=e[a];c.addEventListener(a,d);b.on("dispose",function(b){return c.removeEventListener(a,
d)})});this.on("loadstart",f);this.on("dispose",function(a){return b.off("loadstart",f)})}};d.proxyNativeTracks_=function(){var a=this;yc.names.forEach(function(b){a.proxyNativeTracksForType_(b)})};d.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a);b.disposeMediaElement(a);a=c}else a=f.createElement("video"),c=this.options_.tag&&M(this.options_.tag),c=ba({},c),Dd&&
!0===this.options_.nativeControlsForTouch||delete c.controls,I(a,p(c,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);c=["loop","muted","playsinline","autoplay"];for(var d=0;d<c.length;d++){var e=c[d],g=this.options_[e];"undefined"!==typeof g&&(g?a.setAttribute(e,e):a.removeAttribute(e),a[e]=g)}return a};d.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===
a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};this.on("loadedmetadata",d);this.ready(function(){this.off("loadstart",c);this.off("loadedmetadata",d);b||this.trigger("loadstart")})}else{var e=["loadstart"];e.push("loadedmetadata");2<=a.readyState&&e.push("loadeddata");3<=a.readyState&&e.push("canplay");4<=a.readyState&&e.push("canplaythrough");this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}};d.setCurrentTime=function(a){try{this.el_.currentTime=
a}catch(J){xa(J,"Video is not ready. (Video.js)")}};d.duration=function(){var a=this;return Infinity===this.el_.duration&&Fc&&Zb&&0===this.el_.currentTime?(this.on("timeupdate",function da(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",da))}),NaN):this.el_.duration||NaN};d.width=function(){return this.el_.offsetWidth};d.height=function(){return this.el_.offsetHeight};d.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in
this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",c);this.on("dispose",function(){a.off("webkitbeginfullscreen",c);a.off("webkitendfullscreen",b)})}};d.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=e.navigator&&
e.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};d.enterFullScreen=function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()};d.exitFullScreen=function(){this.el_.webkitExitFullScreen()};d.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};d.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};
d.reset=function(){b.resetMediaElement(this.el_)};d.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};d.setControls=function(a){this.el_.controls=!!a};d.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)};d.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=f.createElement("track");b.kind&&(c.kind=
b.kind);b.label&&(c.label=b.label);if(b.language||b.srclang)c.srclang=b.language||b.srclang;b["default"]&&(c["default"]=b["default"]);b.id&&(c.id=b.id);b.src&&(c.src=b.src);return c};d.addRemoteTextTrack=function(b,c){b=a.prototype.addRemoteTextTrack.call(this,b,c);this.featuresNativeTextTracks&&this.el().appendChild(b);return b};d.removeRemoteTextTrack=function(b){a.prototype.removeRemoteTextTrack.call(this,b);if(this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&
b!==c[d].track||this.el().removeChild(c[d])};d.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);e.performance&&"function"===typeof e.performance.now?a.creationTime=e.performance.now():
e.performance&&e.performance.timing&&"number"===typeof e.performance.timing.navigationStart&&(a.creationTime=e.Date.now()-e.performance.timing.navigationStart);return a};return b}(db);if(z()){Y.TEST_VID=f.createElement("video");var wh=f.createElement("track");wh.kind="captions";wh.srclang="en";wh.label="English";Y.TEST_VID.appendChild(wh)}Y.isSupported=function(){try{Y.TEST_VID.volume=.5}catch(Fd){return!1}return!(!Y.TEST_VID||!Y.TEST_VID.canPlayType)};Y.canPlayType=function(a){return Y.TEST_VID.canPlayType(a)};
Y.canPlaySource=function(a,b){return Y.canPlayType(a.type)};Y.canControlVolume=function(){try{var a=Y.TEST_VID.volume;Y.TEST_VID.volume=a/2+.1;return a!==Y.TEST_VID.volume}catch(N){return!1}};Y.canMuteVolume=function(){try{var a=Y.TEST_VID.muted;Y.TEST_VID.muted=!a;Y.TEST_VID.muted?Y.TEST_VID.setAttribute("muted","muted"):Y.TEST_VID.removeAttribute("muted");return a!==Y.TEST_VID.muted}catch(N){return!1}};Y.canControlPlaybackRate=function(){if(Fc&&Zb&&58>Pg)return!1;try{var a=Y.TEST_VID.playbackRate;
Y.TEST_VID.playbackRate=a/2+.1;return a!==Y.TEST_VID.playbackRate}catch(N){return!1}};Y.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(f.createElement("video"),"src",{get:a,set:a});Object.defineProperty(f.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(f.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(f.createElement("audio"),"innerHTML",{get:a,set:a})}catch(N){return!1}return!0};Y.supportsNativeTextTracks=function(){return ad||
ic&&Zb};Y.supportsNativeVideoTracks=function(){return!(!Y.TEST_VID||!Y.TEST_VID.videoTracks)};Y.supportsNativeAudioTracks=function(){return!(!Y.TEST_VID||!Y.TEST_VID.audioTracks)};Y.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");Y.prototype.featuresVolumeControl=Y.canControlVolume();Y.prototype.featuresMuteControl=Y.canMuteVolume();
Y.prototype.featuresPlaybackRate=Y.canControlPlaybackRate();Y.prototype.featuresSourceset=Y.canOverrideAttributes();Y.prototype.movingMediaElementInDOM=!ic;Y.prototype.featuresFullscreenResize=!0;Y.prototype.featuresProgressEvents=!0;Y.prototype.featuresTimeupdateEvents=!0;Y.prototype.featuresNativeTextTracks=Y.supportsNativeTextTracks();Y.prototype.featuresNativeVideoTracks=Y.supportsNativeVideoTracks();Y.prototype.featuresNativeAudioTracks=Y.supportsNativeAudioTracks();var mm=Y.TEST_VID&&Y.TEST_VID.constructor.prototype.canPlayType,
nm=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Y.patchCanPlayType=function(){4<=jc&&!Te&&!Zb&&(Y.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&nm.test(a)?"maybe":mm.call(this,a)})};Y.unpatchCanPlayType=function(){var a=Y.TEST_VID.constructor.prototype.canPlayType;Y.TEST_VID.constructor.prototype.canPlayType=mm;return a};Y.patchCanPlayType();Y.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");
if("function"===typeof a.load)try{a.load()}catch(N){}}};Y.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(C){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){Y.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Y.prototype["set"+
Ba(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(a){Y.prototype[a]=function(){return this.el_[a]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(a){Y.prototype["set"+Ba(a)]=function(b){this.el_[a]=b}});["pause","load",
"play"].forEach(function(a){Y.prototype[a]=function(){return this.el_[a]()}});db.withSourceHandlers(Y);Y.nativeSourceHandler={};Y.nativeSourceHandler.canPlayType=function(a){try{return Y.TEST_VID.canPlayType(a)}catch(N){return""}};Y.nativeSourceHandler.canHandleSource=function(a,b){return a.type?Y.nativeSourceHandler.canPlayType(a.type):a.src?(a=uf(a.src),Y.nativeSourceHandler.canPlayType("video/"+a)):""};Y.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)};Y.nativeSourceHandler.dispose=
function(){};Y.registerSourceHandler(Y.nativeSourceHandler);db.registerTech("Html5",Y);var om="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Ah={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ch="tiny xsmall small medium large xlarge huge".split(" "),rj={};Ch.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;rj[a]="vjs-layout-"+b});var pm={tiny:210,xsmall:320,small:425,
medium:768,large:1440,xlarge:2560,huge:Infinity},ac=function(a){function b(c,e,f){c.id=c.id||e.id||"vjs_video_"+Fa++;e=p(b.getTagSettings(c),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof c.closest){var g=c.closest("[lang]");g&&g.getAttribute&&(e.language=g.getAttribute("lang"))}else for(g=c;g&&1===g.nodeType;){if(M(g).hasOwnProperty("lang")){e.language=g.getAttribute("lang");break}g=g.parentNode}var h=a.call(this,null,e,f)||this;h.boundDocumentFullscreenChange_=
Ma(d(h),h.documentFullscreenChange_);h.boundFullWindowOnEscKey_=Ma(d(h),h.fullWindowOnEscKey);h.log=Dc(h.id_);h.fsApi_=bd;h.isPosterFromTech_=!1;h.queuedCallbacks_=[];h.isReady_=!1;h.hasStarted_=!1;h.userActive_=!1;if(!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");h.tag=c;h.tagAttributes=c&&M(c);h.language(h.options_.language);if(e.languages){var k=
{};Object.getOwnPropertyNames(e.languages).forEach(function(a){k[a.toLowerCase()]=e.languages[a]});h.languages_=k}else h.languages_=b.prototype.options_.languages;h.resetCache_();h.poster_=e.poster||"";h.controls_=!!e.controls;c.controls=!1;c.removeAttribute("controls");h.changingSrc_=!1;h.playCallbacks_=[];h.playTerminatedQueue_=[];c.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(a){if("function"!==typeof h[a])throw Error('plugin "'+
a+'" does not exist');});h.scrubbing_=!1;h.el_=h.createEl();Da(d(h),{eventBusKey:"el_"});if(h.fluid_)h.on("playerreset",h.updateStyleEl_);f=ba(h.options_);e.plugins&&Object.keys(e.plugins).forEach(function(a){h[a](e.plugins[a])});h.options_.playerOptions=f;h.middleware_=[];h.initChildren();h.isAudio("audio"===c.nodeName.toLowerCase());h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled");h.el_.setAttribute("role","region");h.isAudio()?h.el_.setAttribute("aria-label",
h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player"));h.isAudio()&&h.addClass("vjs-audio");h.flexNotSupported_()&&h.addClass("vjs-no-flex");Dd&&h.addClass("vjs-touch-enabled");ic||h.addClass("vjs-workinghover");b.players[h.id_]=d(h);h.addClass("vjs-v7");h.userActive(!0);h.reportUserActivity();h.one("play",h.listenForUserActivity_);h.on("stageclick",h.handleStageClick_);h.on("keydown",h.handleKeyDown);h.breakpoints(h.options_.breakpoints);h.responsive(h.options_.responsive);
return h}c(b,a);var g=b.prototype;g.dispose=function(){var c=this;this.trigger("dispose");this.off("dispose");Za(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);Za(f,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);b.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=
!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Ih[this.id()]=null;cc.names.forEach(function(a){(a=c[cc[a].getterName]())&&a.off&&a.off()});a.prototype.dispose.call(this)};g.createEl=function(){var b=this.tag,c=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),d="video-js"===this.tag.tagName.toLowerCase();if(c)var g=this.el_=b.parentNode;else d||(g=this.el_=a.prototype.createEl.call(this,"div"));
var h=M(b);if(d){g=this.el_=b;for(b=this.tag=f.createElement("video");g.children.length;)b.appendChild(g.firstChild);F(g,"video-js")||m(g,"video-js");g.appendChild(b);c=this.playerElIngest_=g;Object.keys(g).forEach(function(a){b[a]=g[a]})}b.setAttribute("tabindex","-1");h.tabindex="-1";if(Cd||Zb&&$b)b.setAttribute("role","application"),h.role="application";b.removeAttribute("width");b.removeAttribute("height");"width"in h&&delete h.width;"height"in h&&delete h.height;Object.getOwnPropertyNames(h).forEach(function(a){d&&
"class"===a||g.setAttribute(a,h[a]);d&&b.setAttribute(a,h[a])});b.playerId=b.id;b.id+="_html5_api";b.className="vjs-tech";b.player=g.player=this;this.addClass("vjs-paused");if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=tb("vjs-styles-dimensions");var k=kb(".vjs-styles-defaults"),l=kb("head");l.insertBefore(this.styleEl_,k?k.nextSibling:l.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);
this.aspectRatio(this.options_.aspectRatio);k=b.getElementsByTagName("a");for(l=0;l<k.length;l++){var n=k.item(l);m(n,"vjs-hidden");n.setAttribute("hidden","hidden")}b.initNetworkState_=b.networkState;b.parentNode&&!c&&b.parentNode.insertBefore(g,b);H(b,g);this.children_.unshift(b);this.el_.setAttribute("lang",this.language_);return this.el_=g};g.width=function(a){return this.dimension("width",a)};g.height=function(a){return this.dimension("height",a)};g.dimension=function(a,b){var c=a+"_";if(void 0===
b)return this[c]||0;if(""===b)this[c]=void 0,this.updateStyleEl_();else{var d=parseFloat(b);isNaN(d)?xa.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,this.updateStyleEl_())}};g.fluid=function(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;cb(this)&&this.off("playerreset",this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),zb(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};g.fill=function(a){if(void 0===
a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};g.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};g.updateStyleEl_=function(){if(!0===e.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b=
"number"===typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(0<=a&&(c.width=a),0<=b&&(c.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var d=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/d:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*d;c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():
this.id()+"-dimensions";this.addClass(c);Bf(this.styleEl_,"\n      ."+c+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+c+".vjs-fluid {\n        padding-top: "+100*d+"%;\n      }\n    ")}};g.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=Ba(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(db.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=d;this.isReady_=!1;var f="string"===typeof this.autoplay()?
!1:this.autoplay(),g={source:b,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};
cc.names.forEach(function(a){a=cc[a];g[a.getterName]=c[a.privateName]});p(g,this.options_[d]);p(g,this.options_[e]);p(g,this.options_[a.toLowerCase()]);this.tag&&(g.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(g.startTime=this.cache_.currentTime);a=db.getTech(a);if(!a)throw Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new a(g);this.tech_.ready(Ma(this,this.handleTechReady_),!0);qd.jsonToTextTracks(this.textTracksJson_||
[],this.tech_);om.forEach(function(a){c.on(c.tech_,a,c["handleTech"+Ba(a)+"_"])});Object.keys(Ah).forEach(function(a){c.on(c.tech_,a,function(b){if(0===c.tech_.playbackRate()&&c.tech_.seeking())c.queuedCallbacks_.push({callback:c["handleTech"+Ah[a]+"_"].bind(c),event:b});else c["handleTech"+Ah[a]+"_"](b)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",
this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);
this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||H(this.tech_.el(),this.el());
this.tag&&(this.tag=this.tag.player=null)};g.unloadTech_=function(){var a=this;cc.names.forEach(function(b){b=cc[b];a[b.privateName]=a[b.getterName]()});this.textTracksJson_=qd.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};g.tech=function(a){void 0===a&&xa.warn(fb(hc()));return this.tech_};g.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,
"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};g.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);
this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};g.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};g.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?
(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};g.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"===typeof a){var c=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(fa(d))return d["catch"](c)};if("any"===a&&!0!==this.muted()){var d=this.play();fa(d)&&(d=d["catch"](c))}else d="muted"===a&&!0!==this.muted()?c():this.play();if(fa(d))return d.then(function(){b.trigger({type:"autoplay-success",
autoplay:a})})["catch"](function(c){b.trigger({type:"autoplay-failure",autoplay:a})})}};g.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!==typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=Jh(this,b));this.cache_.source=ba({},a,{src:b,type:c});a=this.cache_.sources.filter(function(a){return a.src&&a.src===b});c=[];for(var d=this.$$("source"),e=[],f=0;f<d.length;f++){var g=M(d[f]);c.push(g);g.src&&
g.src===b&&e.push(g.src)}e.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b};g.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){});c(e);if(!a.src)this.tech_.one(["sourceset","loadstart"],function kd(a){"sourceset"!==
a.type&&(a=b.techGet("currentSrc"),b.lastSource_.tech=a,b.updateSourceCaches_(a));b.tech_.off(["sourceset","loadstart"],kd)})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};g.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};g.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");
this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};g.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};g.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function ja(){b!==
a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",ja))})};g.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};g.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};g.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};g.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};g.handleTechSeeked_=function(){this.removeClass("vjs-seeking");
this.removeClass("vjs-ended");this.trigger("seeked")};g.handleTechFirstPlay_=function(){this.options_.starttime&&(xa.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};g.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};g.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),
this.play()):this.paused()||this.pause();this.trigger("ended")};g.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};g.handleTechClick_=function(a){ea(a)&&this.controls_&&(this.paused()?Lb(this.play()):this.pause())};g.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&
!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};g.handleTechTap_=function(){this.userActive(!this.userActive())};g.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};g.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};
g.handleTechTouchEnd_=function(a){a.preventDefault()};g.handleStageClick_=function(){this.reportUserActivity()};g.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};g.documentFullscreenChange_=function(a){a=this.el();var b=f[this.fsApi_.fullscreenElement]===a;!b&&a.matches?b=a.matches(":"+this.fsApi_.fullscreen):!b&&a.msMatchesSelector&&(b=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(b);!1===this.isFullscreen()&&
Za(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);this.fsApi_.prefixed&&this.trigger("fullscreenchange")};g.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen);this.trigger("fullscreenchange")};g.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};g.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};g.handleTechLeavePictureInPicture_=
function(a){this.isInPictureInPicture(!1)};g.handleTechError_=function(){var a=this.tech_.error();this.error(a)};g.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};g.getCache=function(){return this.cache_};g.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};g.techCall_=function(a,
b){this.ready(function(){if(a in dd)return this.tech_[a](this.middleware_.reduce(Nd(a),b));if(a in Ai)return Tc(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(da){throw xa(da),da;}},!0)};g.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in cg){var b=this.tech_;return this.middleware_.reduceRight(Nd(a),b[a]())}if(a in Ai)return Tc(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(da){if(void 0===this.tech_[a])throw xa("Video.js: "+a+" method not defined for "+
this.techName_+" playback technology.",da),da;if("TypeError"===da.name)throw xa("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",da),this.tech_.isReady_=!1,da;xa(da);throw da;}}};g.play=function(){var a=this,b=this.options_.Promise||e.Promise;return b?new b(function(b){a.play_(b)}):this.play_()};g.play_=function(a){var b=this;void 0===a&&(a=Lb);this.playCallbacks_.push(a);a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],
this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!ad&&!ic||this.load())};g.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(a){a()})};g.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=
[];b.forEach(function(b){b(a)})};g.pause=function(){this.techCall_("pause")};g.paused=function(){return!1===this.techGet_("paused")?!1:!0};g.played=function(){return this.techGet_("played")||O(0,0)};g.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};g.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.techCall_("setCurrentTime",a);else return this.cache_.currentTime=this.techGet_("currentTime")||
0,this.cache_.currentTime};g.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(a)||this.trigger("durationchange"))};g.remainingTime=function(){return this.duration()-this.currentTime()};
g.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};g.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=O(0,0));return a};g.bufferedPercent=function(){return v(this.buffered(),this.duration())};g.bufferedEnd=function(){var a=this.buffered(),b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a};g.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);
else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};g.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};g.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};g.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};g.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};g.isFullscreen=function(a){if(void 0!==
a)this.isFullscreen_=!!a,this.toggleFullscreenClass_();else return!!this.isFullscreen_};g.requestFullscreen=function(a){this.isFullscreen(!0);if(this.fsApi_.requestFullscreen){Ta(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);if(!this.fsApi_.prefixed){var b=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==a&&(b=a)}Lb(this.el_[this.fsApi_.requestFullscreen](b))}else this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),
this.trigger("fullscreenchange"))};g.exitFullscreen=function(){this.isFullscreen(!1);this.fsApi_.requestFullscreen?Lb(f[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};g.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=f.documentElement.style.overflow;Ta(f,"keydown",this.boundFullWindowOnEscKey_);f.documentElement.style.overflow="hidden";m(f.body,"vjs-full-window");this.trigger("enterFullWindow")};
g.fullWindowOnEscKey=function(a){ra.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};g.exitFullWindow=function(){this.isFullWindow=!1;Za(f,"keydown",this.boundFullWindowOnEscKey_);f.documentElement.style.overflow=this.docOrigOverflow;q(f.body,"vjs-full-window");this.trigger("exitFullWindow")};g.isInPictureInPicture=function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};g.requestPictureInPicture=
function(){if("pictureInPictureEnabled"in f)return this.techGet_("requestPictureInPicture")};g.exitPictureInPicture=function(){if("pictureInPictureEnabled"in f)return f.exitPictureInPicture()};g.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=this.el_.ownerDocument.activeElement;var d=c.tagName.toLowerCase(),e="button checkbox hidden radio reset submit".split(" ");c="input"===d?-1===e.indexOf(c.type):-1!==["textarea"].indexOf(d);c||("function"===typeof b.hotkeys?b.hotkeys.call(this,
a):this.handleHotkeys(a))}};g.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=b.muteKey;d=void 0===d?function(a){return ra.isEventKey(a,"m")}:d;b=b.playPauseKey;b=void 0===b?function(a){return ra.isEventKey(a,"k")||ra.isEventKey(a,"Space")}:b;(void 0===c?function(a){return ra.isEventKey(a,"f")}:c).call(this,a)?(a.preventDefault(),a.stopPropagation(),c=T.getComponent("FullscreenToggle"),!1!==f[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,
a)):d.call(this,a)?(a.preventDefault(),a.stopPropagation(),T.getComponent("MuteToggle").prototype.handleClick.call(this,a)):b.call(this,a)&&(a.preventDefault(),a.stopPropagation(),T.getComponent("PlayToggle").prototype.handleClick.call(this,a))};g.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){b=d[c];var e=db.getTech(b);e||(e=T.getComponent(b));if(!e)xa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');else if(e.isSupported()&&(b=
e.canPlayType(a)))return b}return""};g.selectSource=function(a){var b=this,c=this.options_.techOrder.map(function(a){return[a,db.getTech(a)]}).filter(function(a){var b=a[0];if(a=a[1])return a.isSupported();xa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');return!1}),d=function(a,b,c){var d;a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})});return d},e=function(a){return function(b,c){return a(c,b)}},f=function(a,c){var d=a[0];if(a[1].canPlaySource(c,
b.options_[d.toLowerCase()]))return{source:c,tech:d}};return(this.options_.sourceOrder?d(a,c,e(f)):d(c,a,f))||!1};g.src=function(a){var b=this;if("undefined"===typeof a)return this.cache_.src||"";var c=nc(a);c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),vc(this,c[0],function(a,d){b.middleware_=d;b.cache_.sources=c;b.updateSourceCaches_(a);if(b.src_(a)){if(1<c.length)return b.src(c.slice(1));b.changingSrc_=!1;b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},
0);b.triggerReady()}else sc(d,b.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};g.src_=function(a){var b=this,c=this.selectSource([a]);if(!c)return!0;if(!Ya(c.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);
this.changingSrc_=!1},!0);return!1};g.load=function(){this.techCall_("load")};g.reset=function(){var a=this,b=this.options_.Promise||e.Promise;this.paused()||!b?this.doReset_():(b=this.play(),Lb(b.then(function(){return a.doReset_()})))};g.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();cb(this)&&this.trigger("playerreset")};g.resetControlBarUI_=function(){this.resetProgressBar_();
this.resetPlaybackRate_();this.resetVolumeBar_()};g.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay;a=a.remainingTimeDisplay;b&&b.updateContent();a&&a.updateContent()};g.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};g.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};g.currentSources=function(){var a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||
b};g.currentSource=function(){return this.cache_.source||{}};g.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};g.currentType=function(){return this.currentSource()&&this.currentSource().type||""};g.preload=function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};g.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=
a;this.manualAutoplay_(a);var b=!1}else this.options_.autoplay=a?!0:!1;b="undefined"===typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",b)};g.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};g.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};g.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&
(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};g.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};g.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",
a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};g.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=
a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};g.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&a.message&&a.message===this.localize(this.options_.notSupportedMessage)){var b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click",
"touchstart"],b)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Ea(a),this.addClass("vjs-error"),xa.error("(CODE:"+this.error_.code+" "+Ea.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};g.reportUserActivity=function(a){this.userActivity_=!0};g.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),
this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(a){a.stopPropagation();a.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};g.listenForUserActivity_=function(){var a,b,c,d=Ma(this,this.reportUserActivity);this.on("mousedown",function(){d();this.clearInterval(a);a=this.setInterval(d,250)});this.on("mousemove",function(a){if(a.screenX!==b||a.screenY!==
c)b=a.screenX,c=a.screenY,d()});this.on("mouseup",function(b){d();this.clearInterval(a)});var e=this.getChild("controlBar");!e||ic||Fc||(e.on("mouseenter",function(a){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",d);this.on("keyup",d);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=
!1;this.userActive(!0);this.clearTimeout(f);var a=this.options_.inactivityTimeout;0>=a||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)};g.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};g.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?
this.techGet_("defaultPlaybackRate"):1};g.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};g.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)};g.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)};g.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;b||(b=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(b)};g.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};
g.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};g.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};g.language=function(a){if(void 0===a)return this.language_;this.language_=String(a).toLowerCase()};g.languages=function(){return ba(b.prototype.options_.languages,this.languages_)};g.toJSON=function(){var a=ba(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=ba(d);d.player=void 0;
a.tracks[c]=d}return a};g.createModal=function(a,b){var c=this;b=b||{};b.content=a||"";var d=new Tf(this,b);this.addChild(d);d.on("dispose",function(){c.removeChild(d)});d.open();return d};g.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<Ch.length;c++){var d=Ch[c];if(b<=this.breakpoints_[d]){if(a===d)break;a&&this.removeClass(rj[a]);this.addClass(rj[d]);this.breakpoint_=d;break}}};g.removeCurrentBreakpoint_=function(){var a=
this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};g.breakpoints=function(a){if(void 0===a)return p(this.breakpoints_);this.breakpoint_="";this.breakpoints_=p({},pm,a);this.updateCurrentBreakpoint_();return p(this.breakpoints_)};g.responsive=function(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),
this.removeCurrentBreakpoint_()),a};g.currentBreakpoint=function(){return this.breakpoint_};g.currentBreakpointClass=function(){return rj[this.breakpoint_]||""};g.loadMedia=function(a,b){var c=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=ba(a);a=this.cache_.media;var d=a.poster,e=a.src,f=a.textTracks;!a.artwork&&d&&(this.cache_.media.artwork=[{src:d,type:lg(d)}]);e&&this.src(e);d&&this.poster(d);Array.isArray(f)&&f.forEach(function(a){return c.addRemoteTextTrack(a,!1)});this.ready(b)}};
g.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}});b={src:b,textTracks:c};a&&(b.poster=a,b.artwork=[{src:b.poster,type:lg(b.poster)}]);return b}return ba(this.cache_.media)};b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=M(a),d=c["data-setup"];F(a,"vjs-fill")&&(c.fill=!0);F(a,"vjs-fluid")&&(c.fluid=!0);if(null!==d){var e=
null;try{var f=JSON.parse(d||"{}",void 0)}catch(na){e=na}f=[e,f];d=f[0];f=f[1];d&&xa.error(d);p(c,f)}p(b,c);if(a.hasChildNodes())for(a=a.childNodes,c=0,d=a.length;c<d;c++)f=a[c],e=f.nodeName.toLowerCase(),"source"===e?b.sources.push(M(f)):"track"===e&&b.tracks.push(M(f));return b};g.flexNotSupported_=function(){var a=f.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};return b}(T);cc.names.forEach(function(a){var b=
cc[a];ac.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});ac.players={};var Bh=e.navigator;ac.prototype.options_={techOrder:db.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:Bh&&
(Bh.languages&&Bh.languages[0]||Bh.userLanguage||Bh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){ac.prototype[a]=function(){return this.techGet_(a)}});om.forEach(function(a){ac.prototype["handleTech"+Ba(a)+"_"]=function(){return this.trigger(a)}});T.registerComponent("Player",ac);var Ed={},Dh=function(a){return Ed.hasOwnProperty(a)?
Ed[a]:void 0},Eh=function(a,b,c){c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},Fh=function(a,b){var c=function(){Eh(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[a]=!0;Eh(this,{name:a,plugin:b,instance:c});return c};Object.keys(b).forEach(function(a){c[a]=b[a]});return c},sj=function(a,b){b.prototype.name=a;return function(){Eh(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,
d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=h(b,[this].concat(d));this[a]=function(){return f};Eh(this,f.getEventHash());return f}},$d=function(){function a(b){if(this.constructor===a)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;Da(this);delete this.trigger;xb(this,this.constructor.defaultState);var c=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[c]=!0;this.dispose=Ma(this,this.dispose);b.on("dispose",this.dispose)}var b=a.prototype;b.version=
function(){return this.constructor.VERSION};b.getEventHash=function(a){void 0===a&&(a={});a.name=this.name;a.plugin=this.constructor;a.instance=this;return a};b.trigger=function(a,b){void 0===b&&(b={});return Na(this.eventBusEl_,a,this.getEventHash(b))};b.handleStateChanged=function(a){};b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose");this.off();b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=sj(a,Ed[a])};a.isBasic=function(b){b="string"===
typeof b?Dh(b):b;return"function"===typeof b&&!a.prototype.isPrototypeOf(b.prototype)};a.registerPlugin=function(b,c){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(Ed.hasOwnProperty(b))xa.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(ac.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof c)throw Error('Illegal plugin for "'+
b+'", must be a function, was '+typeof c+".");Ed[b]=c;"plugin"!==b&&(a.isBasic(c)?ac.prototype[b]=Fh(b,c):ac.prototype[b]=sj(b,c));return c};a.deregisterPlugin=function(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");Ed.hasOwnProperty(a)&&(delete Ed[a],delete ac.prototype[a])};a.getPlugins=function(a){void 0===a&&(a=Object.keys(Ed));var b;a.forEach(function(a){var c=Dh(a);c&&(b=b||{},b[a]=c)});return b};a.getPluginVersion=function(a){return(a=Dh(a))&&a.VERSION||""};return a}();$d.getPlugin=
Dh;$d.BASE_PLUGIN_NAME="plugin";$d.registerPlugin("plugin",$d);ac.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]};ac.prototype.hasPlugin=function(a){return!!Ed.hasOwnProperty(a)};var qm=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(a.super_=b)},Ik=function(a){return 0===
a.indexOf("#")?a.slice(1):a};K.hooks_={};K.hooks=function(a,b){K.hooks_[a]=K.hooks_[a]||[];b&&(K.hooks_[a]=K.hooks_[a].concat(b));return K.hooks_[a]};K.hook=function(a,b){K.hooks(a,b)};K.hookOnce=function(a,b){K.hooks(a,[].concat(b).map(function(b){return function J(){K.removeHook(a,J);return b.apply(void 0,arguments)}}))};K.removeHook=function(a,b){b=K.hooks(a).indexOf(b);if(-1>=b)return!1;K.hooks_[a]=K.hooks_[a].slice();K.hooks_[a].splice(b,1);return!0};if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&z()){var tj=
kb(".vjs-styles-defaults");if(!tj){tj=tb("vjs-styles-defaults");var Jk=kb("head");Jk&&Jk.insertBefore(tj,Jk.firstChild);Bf(tj,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}R(1,K);K.VERSION="7.6.0";K.options=ac.prototype.options_;K.getPlayers=function(){return ac.players};K.getPlayer=function(a){var b=ac.players;if("string"===typeof a){a=Ik(a);var c=b[a];if(c)return c;a=kb("#"+a)}if(B(a)&&(c=a,a=c.player,
c=c.playerId,a||b[c]))return a||b[c]};K.getAllPlayers=function(){return Object.keys(ac.players).map(function(a){return ac.players[a]}).filter(Boolean)};K.players=ac.players;K.getComponent=T.getComponent;K.registerComponent=function(a,b){db.isTech(b)&&xa.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");T.registerComponent.call(T,a,b)};K.getTech=db.getTech;K.registerTech=db.registerTech;K.use=function(a,b){af[a]=af[a]||[];af[a].push(b)};
Object.defineProperty(K,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(K.middleware,"TERMINATOR",{value:Zd,writeable:!1,enumerable:!0});K.browser=Qc;K.TOUCH_ENABLED=Dd;K.extend=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"===typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"===typeof b&&(c=b);qm(c,a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c};K.mergeOptions=ba;K.bind=
Ma;K.registerPlugin=$d.registerPlugin;K.deregisterPlugin=$d.deregisterPlugin;K.plugin=function(a,b){xa.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return $d.registerPlugin(a,b)};K.getPlugins=$d.getPlugins;K.getPlugin=$d.getPlugin;K.getPluginVersion=$d.getPluginVersion;K.addLanguage=function(a,b){var c;a=(""+a).toLowerCase();K.options.languages=ba(K.options.languages,(c={},c[a]=b,c));return K.options.languages[a]};K.log=xa;K.createLogger=Dc;K.createTimeRange=K.createTimeRanges=
O;K.formatTime=Oc;K.setFormatTime=function(a){gd=a};K.resetFormatTime=function(){gd=fg};K.parseUrl=se;K.isCrossOrigin=ph;K.EventTarget=Va;K.on=Ta;K.one=Ra;K.off=Za;K.trigger=Na;K.xhr=$a;K.TextTrack=Ab;K.AudioTrack=Rg;K.VideoTrack=Sg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(a){K[a]=function(){xa.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead");return Qb[a].apply(null,
arguments)}});K.computedStyle=u;K.dom=Qb;K.url=lj;var Kk=Vc(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=g.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=g.normalizePath(c.path);return g.buildURLFromParts(c)}var e=
g.parseURL(b);if(!e)throw Error("Error trying to parse relative URL.");if(e.scheme){if(!c.alwaysNormalize)return b;e.path=g.normalizePath(e.path);return g.buildURLFromParts(e)}b=g.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};e.netLoc||(a.netLoc=b.netLoc,"/"!==e.path[0]&&(e.path?
(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+e.path,a.path=g.normalizePath(b)):(a.path=b.path,e.params||(a.params=b.params,e.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?g.normalizePath(e.path):e.path);return g.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,
"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g})()}),ae=function(){function a(){this.listeners={}}var b=a.prototype;b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};b.trigger=function(a){var b=this.listeners[a],c;if(b)if(2===arguments.length){var d=
b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var e=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,e)}};b.dispose=function(){this.listeners={}};b.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),Lk=function(a){function b(){var b=a.call(this)||this;b.buffer="";return b}Zc(b,a);b.prototype.push=function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),
this.buffer=this.buffer.substring(a+1)};return b}(ae),Ug=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b},wo=function(a){function b(){var b=a.call(this)||this;b.customParsers=[];b.tagMappers=[];return b}Zc(b,a);var c=b.prototype;c.push=function(a){var b=this,c,d;a=a.trim();
0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(b,c){c=c(a);return c===a?b:b.concat([c])},[a]).forEach(function(a){for(var e=0;e<b.customParsers.length;e++)if(b.customParsers[e].call(b,a))return;0!==a.indexOf("#EXT")?b.trigger("data",{type:"comment",text:a.slice(1)}):(a=a.replace("\r",""),(c=/^#EXTM3U/.exec(a))?b.trigger("data",{type:"tag",tagType:"m3u"}):(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))?(d={type:"tag",tagType:"inf"},c[1]&&(d.duration=parseFloat(c[1])),
c[2]&&(d.title=c[2]),b.trigger("data",d)):(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"targetduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"totalduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"version"},c[1]&&(d.version=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?
(d={type:"tag",tagType:"media-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"discontinuity-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"playlist-type"},c[1]&&(d.playlistType=c[1]),b.trigger("data",d)):(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"byterange"},c[1]&&(d.length=
parseInt(c[1],10)),c[2]&&(d.offset=parseInt(c[2],10)),b.trigger("data",d)):(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))?(d={type:"tag",tagType:"allow-cache"},c[1]&&(d.allowed=!/NO/.test(c[1])),b.trigger("data",d)):(c=/^#EXT-X-MAP:?(.*)$/.exec(a))?(d={type:"tag",tagType:"map"},c[1]&&(a=Ug(c[1]),a.URI&&(d.uri=a.URI),a.BYTERANGE&&(e=a.BYTERANGE.split("@"),a=e[0],e=e[1],d.byterange={},a&&(d.byterange.length=parseInt(a,10)),e&&(d.byterange.offset=parseInt(e,10)))),b.trigger("data",d)):(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?
(d={type:"tag",tagType:"stream-inf"},c[1]&&(d.attributes=Ug(c[1]),d.attributes.RESOLUTION&&(a=d.attributes.RESOLUTION.split("x"),e={},a[0]&&(e.width=parseInt(a[0],10)),a[1]&&(e.height=parseInt(a[1],10)),d.attributes.RESOLUTION=e),d.attributes.BANDWIDTH&&(d.attributes.BANDWIDTH=parseInt(d.attributes.BANDWIDTH,10)),d.attributes["PROGRAM-ID"]&&(d.attributes["PROGRAM-ID"]=parseInt(d.attributes["PROGRAM-ID"],10))),b.trigger("data",d)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(d={type:"tag",tagType:"media"},
c[1]&&(d.attributes=Ug(c[1])),b.trigger("data",d)):(c=/^#EXT-X-ENDLIST/.exec(a))?b.trigger("data",{type:"tag",tagType:"endlist"}):(c=/^#EXT-X-DISCONTINUITY/.exec(a))?b.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(d={type:"tag",tagType:"program-date-time"},c[1]&&(d.dateTimeString=c[1],d.dateTimeObject=new Date(c[1])),b.trigger("data",d)):(c=/^#EXT-X-KEY:?(.*)$/.exec(a))?(d={type:"tag",tagType:"key"},c[1]&&(d.attributes=Ug(c[1]),d.attributes.IV&&
("0x"===d.attributes.IV.substring(0,2).toLowerCase()&&(d.attributes.IV=d.attributes.IV.substring(2)),d.attributes.IV=d.attributes.IV.match(/.{8}/g),d.attributes.IV[0]=parseInt(d.attributes.IV[0],16),d.attributes.IV[1]=parseInt(d.attributes.IV[1],16),d.attributes.IV[2]=parseInt(d.attributes.IV[2],16),d.attributes.IV[3]=parseInt(d.attributes.IV[3],16),d.attributes.IV=new Uint32Array(d.attributes.IV))),b.trigger("data",d)):(c=/^#EXT-X-START:?(.*)$/.exec(a))?(d={type:"tag",tagType:"start"},c[1]&&(d.attributes=
Ug(c[1]),d.attributes["TIME-OFFSET"]=parseFloat(d.attributes["TIME-OFFSET"]),d.attributes.PRECISE=/YES/.test(d.attributes.PRECISE)),b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out-cont"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-in"},d.data=c[1]?c[1]:"",b.trigger("data",d)):b.trigger("data",
{type:"tag",data:a.slice(4)}))}))};c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!==typeof e&&(e=function(a){return a});this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})};c.addTagMapper=function(a){var b=a.expression,c=a.map;this.tagMappers.push(function(a){return b.test(a)?c(a):a})};return b}(ae),el=function(a){function b(){var b=a.call(this)||this;b.lineStream=new Lk;
b.parseStream=new wo;b.lineStream.pipe(b.parseStream);var c=wc(wc(b)),d=[],e={},f,g,h=function(){},k={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};b.parseStream.on("data",function(a){var b,m;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=a.allowed;"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in a&&(e.byterange=
b,b.length=a.length,"offset"in a||(this.trigger("info",{message:"defaulting offset to zero"}),a.offset=0));"offset"in a&&(e.byterange=b,b.offset=a.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));
0<a.duration&&(e.duration=a.duration);0===a.duration&&(e.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=d},key:function(){a.attributes?"NONE"===a.attributes.METHOD?g=null:a.attributes.URI?(a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),g={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!==typeof a.attributes.IV&&(g.iv=a.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):
this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?l=this.manifest.discontinuitySequence=a.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=
a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){f={};a.uri&&(f.uri=a.uri);a.byterange&&(f.byterange=a.byterange)},"stream-inf":function(){this.manifest.playlists=d;this.manifest.mediaGroups=this.manifest.mediaGroups||k;a.attributes?(e.attributes||(e.attributes={}),yd(e.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||k;if(a.attributes&&
a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME){var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{};b=c[a.attributes["GROUP-ID"]];m={"default":/yes/i.test(a.attributes.DEFAULT)};m.autoselect=m["default"]?!0:/yes/i.test(a.attributes.AUTOSELECT);a.attributes.LANGUAGE&&(m.language=a.attributes.LANGUAGE);a.attributes.URI&&(m.uri=a.attributes.URI);a.attributes["INSTREAM-ID"]&&(m.instreamId=a.attributes["INSTREAM-ID"]);a.attributes.CHARACTERISTICS&&
(m.characteristics=a.attributes.CHARACTERISTICS);a.attributes.FORCED&&(m.forced=/yes/i.test(a.attributes.FORCED));b[a.attributes.NAME]=m}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1;e.discontinuity=!0;this.manifest.discontinuityStarts.push(d.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject);e.dateTimeString=
a.dateTimeString;e.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):this.manifest.targetDuration=a.duration},totalduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration}):this.manifest.totalDuration=a.duration},start:function(){!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}},"cue-out":function(){e.cueOut=a.data},"cue-out-cont":function(){e.cueOutCont=a.data},"cue-in":function(){e.cueIn=a.data}}[a.tagType]||h).call(c)},uri:function(){e.uri=a.uri;d.push(e);!this.manifest.targetDuration||"duration"in e||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),e.duration=this.manifest.targetDuration);g&&(e.key=g);e.timeline=l;f&&(e.map=f);e={}},comment:function(){},
custom:function(){a.segment?(e.custom=e.custom||{},e.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(c)});return b}Zc(b,a);var c=b.prototype;c.push=function(a){this.lineStream.push(a)};c.end=function(){this.lineStream.push("\n")};c.addParser=function(a){this.parseStream.addParser(a)};c.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return b}(ae),Fi=function(a){return!!a&&"object"===typeof a},ld=function N(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):Fi(a[c])&&Fi(b[c])?a[c]=N(a[c],b[c]):a[c]=b[c]});return a},{})},Yo=function(a){return Object.keys(a).map(function(b){return a[b]})},Gi=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},Rh=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Hi=function(a,b){return a.reduce(function(a,
c,d){c[b]&&a.push(d);return a},[])},gl=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=g.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=g.normalizePath(c.path);
return g.buildURLFromParts(c)}var e=g.parseURL(b);if(!e)throw Error("Error trying to parse relative URL.");if(e.scheme){if(!c.alwaysNormalize)return b;e.path=g.normalizePath(e.path);return g.buildURLFromParts(e)}b=g.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};e.netLoc||(a.netLoc=
b.netLoc,"/"!==e.path[0]&&(e.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+e.path,a.path=g.normalizePath(b)):(a.path=b.path,e.params||(a.params=b.params,e.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?g.normalizePath(e.path):e.path);return g.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,
"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g})()}),Mj=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=gl.buildAbsoluteURL(e.location.href,a));return gl.buildAbsoluteURL(a,b)},Of=function(a){var b=a.baseUrl,c=a.source;c=void 0===c?"":c;var d=a.range;d=void 0===d?"":d;a=a.indexRange;a=void 0===a?"":a;b={uri:c,resolvedUri:Mj((void 0===b?"":b)||
"",c)};if(d||a)d=(d?d:a).split("-"),c=parseInt(d[0],10),d=parseInt(d[1],10),b.byterange={length:d-c+1,offset:c};return b},Um={"static":function(a){var b=a.timescale;return{start:0,end:Math.ceil(a.sourceDuration/(a.duration/(void 0===b?1:b)))}},dynamic:function(a){var b=a.timescale;b=void 0===b?1:b;var c=a.duration,d=a.start,e=a.minimumUpdatePeriod,f=a.timeShiftBufferDepth,g=(a.NOW+a.clientOffset)/1E3;a=a.availabilityStartTime+(void 0===d?0:d);return{start:Math.max(0,Math.floor((g-a-(void 0===f?Infinity:
f))*b/c)),end:Math.min(Math.ceil((g+(void 0===e?0:e)-a)*b/c),Math.floor((g-a)*b/c))}}},hl=function(a){return function(b,c){var d=a.duration,e=a.timescale,f=a.startNumber;return{number:(void 0===f?1:f)+b,duration:d/(void 0===e?1:e),timeline:a.periodIndex,time:c*d}}},Ii=function(a){var b=a.type,c=void 0===b?"static":b;b=a.duration;var d=a.timescale;d=void 0===d?1:d;var e=a.sourceDuration,f=Um[c](a),g=f.end,h=[];for(f=f.start;f<g;f++)h.push(f);a=h.map(hl(a));"static"===c&&(c=a.length-1,a[c].duration=
e-b/d*c);return a},Ji=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c;c=a.sourceDuration;var e=a.timescale;e=void 0===e?1:e;var f=a.indexRange,g=void 0===f?"":f;f=a.duration;if(!b)throw Error("NO_BASE_URL");d=Of({baseUrl:b,source:d.sourceURL,range:d.range});b=Of({baseUrl:b,source:b,indexRange:g});b.map=d;f?(a=Ii(a),a.length&&(b.duration=a[0].duration,b.timeline=a[0].timeline)):c&&(b.duration=c/e,b.timeline=0);b.number=0;return[b]},il=function(a,b,c){var d=a.sidx.map?a.sidx.map:null,
e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,h=g.offset+g.length;g=b.timescale;var k=b.references.filter(function(a){return 1!==a.referenceType}),l=[];h+=b.firstOffset;for(var m=0;m<k.length;m++){var n=b.references[m],p=n.referencedSize;n=Ji({baseUrl:c,timescale:g,timeline:f,periodIndex:f,duration:n.subsegmentDuration,sourceDuration:e,indexRange:h+"-"+(h+p-1)})[0];d&&(n.map=d);l.push(n);h+=p}a.segments=l;return a},Oj=function(a){return Yo(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||
"");if(a[c]){var d;b.segments[0]&&(b.segments[0].discontinuity=!0);(d=a[c].segments).push.apply(d,b.segments);b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b;return a},{})).map(function(a){a.discontinuityStarts=Hi(a.segments,"discontinuity");return a})},Ki=function(a,b){void 0===b&&(b={});if(!Object.keys(b).length)return a;for(var c in a){var d=a[c];if(d.sidx){var e=d.sidx.byterange;e=d.sidx.uri+"-"+(e.offset+"-"+(e.offset+e.length-1));
e=b[e]&&b[e].sidx;d.sidx&&e&&il(d,e,d.sidx.resolvedUri)}}return a},jl=function(a,b){void 0===b&&(b={});var c;a=a.reduce(function(a,d){var e=d.attributes.role&&d.attributes.role.value||"",f=d.attributes.lang||"",g="main";f&&(g=""+d.attributes.lang+(e?" ("+e+")":""));if(a[g]&&a[g].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth)return a;var h,k=d.attributes,l=d.segments,m=d.sidx;l={attributes:(h={NAME:k.id,BANDWIDTH:k.bandwidth,CODECS:k.codecs},h["PROGRAM-ID"]=1,h),uri:"",endList:"static"===
(k.type||"static"),timeline:k.periodIndex,resolvedUri:"",targetDuration:k.duration,segments:l,mediaSequence:l.length?l[0].number:1};k.contentProtection&&(l.contentProtection=k.contentProtection);m&&(l.sidx=m);a[g]={language:f,autoselect:!0,"default":"main"===e,playlists:Ki([l],b),uri:""};"undefined"===typeof c&&"main"===e&&(c=d,c["default"]=!0);return a},{});if(!c){var d=Object.keys(a)[0];a[d]["default"]=!0}return a},$o=function(a,b){void 0===b&&(b={});return a.reduce(function(a,c){var d=c.attributes.lang||
"text";if(a[d])return a;var e;var f=c.attributes;c=c.segments;"undefined"===typeof c&&(c=[{uri:f.baseUrl,timeline:f.periodIndex,resolvedUri:f.baseUrl||"",duration:f.sourceDuration,number:0}],f.duration=f.sourceDuration);f={attributes:(e={NAME:f.id,BANDWIDTH:f.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(f.type||"static"),timeline:f.periodIndex,resolvedUri:f.baseUrl||"",targetDuration:f.duration,segments:c,mediaSequence:c.length?c[0].number:1};a[d]={language:d,"default":!1,autoselect:!1,
playlists:Ki([f],b),uri:""};return a},{})},ap=function(a){var b,c=a.attributes,d=a.segments;a=a.sidx;d={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};c.contentProtection&&(d.contentProtection=c.contentProtection);a&&(d.sidx=a);return d},
bp=function(a,b){var c;void 0===b&&(b={});if(!a.length)return{};var d=a[0].attributes,e=d.sourceDuration;d=d.minimumUpdatePeriod;var f=void 0===d?0:d,g=Oj(a.filter(function(a){a=a.attributes;return"video/mp4"===a.mimeType||"video"===a.contentType})).map(ap);d=Oj(a.filter(function(a){a=a.attributes;return"audio/mp4"===a.mimeType||"audio"===a.contentType}));a=a.filter(function(a){a=a.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType});e={allowCache:!0,discontinuityStarts:[],segments:[],
endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},c.SUBTITLES={},c),uri:"",duration:e,playlists:Ki(g,b),minimumUpdatePeriod:1E3*f};d.length&&(e.mediaGroups.AUDIO.audio=jl(d,b));a.length&&(e.mediaGroups.SUBTITLES.subs=$o(a,b));return e},Wm=function(a,b){var c=a.type;c=void 0===c?"static":c;var d=a.minimumUpdatePeriod;d=void 0===d?0:d;var e=a.media;e=void 0===e?"":e;var f=a.sourceDuration,g=a.timescale;g=void 0===g?1:g;var h=a.startNumber;h=void 0===h?1:h;for(var k=a.periodIndex,
l=[],m=-1,n=0;n<b.length;n++){var p=b[n],q=p.d,t=p.r||0;p=p.t||0;0>m&&(m=p);p&&p>m&&(m=p);if(0>t)if(t=n+1,t===b.length)if("dynamic"===c&&0<d&&0<e.indexOf("$Number$")){t=a.timescale;p=a.start;var r=a.minimumUpdatePeriod;t=Math.ceil((((a.NOW+a.clientOffset)/1E3+(void 0===r?0:r)-(a.availabilityStartTime+(void 0===p?0:p)))*(void 0===t?1:t)-m)/q)}else t=(f*g-m)/q;else t=(b[t].t-m)/q;else t+=1;t=h+l.length+t;for(p=h+l.length;p<t;)l.push({number:p,duration:q/g,time:m,timeline:k}),m+=q,p++}return l},Xm=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,
Ym=function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"===typeof a[c])return b;b=""+a[c];if("RepresentationID"===c)return b;e=d?parseInt(e,10):1;return b.length>=e?b:""+Array(e-b.length+1).join("0")+b}},kl=function(a,b){return a.duration||b?a.duration?Ii(a):Wm(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},cp=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization;d=void 0===d?{sourceURL:"",range:""}:d;
var e=Of({baseUrl:a.baseUrl,source:d.sourceURL.replace(Xm,Ym(c)),range:d.range});return kl(a,b).map(function(b){c.Number=b.number;c.Time=b.time;var d=(a.media||"").replace(Xm,Ym(c));return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Mj(a.baseUrl||"",d),map:e,number:b.number}})},dp=function(a,b){var c=a.duration,d=a.segmentUrls;d=void 0===d?[]:d;if(!c&&!b||c&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var e=d.map(function(b){var c=a.baseUrl,d=a.initialization;d=void 0===d?{}:d;d=Of({baseUrl:c,
source:d.sourceURL,range:d.range});b=Of({baseUrl:c,source:b.media,range:b.mediaRange});b.map=d;return b}),f;c&&(f=Ii(a));b&&(f=Wm(a,b));return f.map(function(a,b){if(e[b])return b=e[b],b.timeline=a.timeline,b.duration=a.duration,b.number=a.number,b}).filter(function(a){return a})},Zm=function(a){var b=a.attributes;a=a.segmentInfo;if(a.template){var c=cp;var d=ld(b,a.template)}else a.base?(c=Ji,d=ld(b,a.base)):a.list&&(c=dp,d=ld(b,a.list));b={attributes:b};if(!c)return b;c=c(d,a.timeline);if(d.duration){var e=
d,f=e.timescale;d.duration=e.duration/(void 0===f?1:f)}else d.duration=c.length?c.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):0;b.attributes=d;b.segments=c;a.base&&d.indexRange&&(b.sidx=c[0],b.segments=[]);return b},Db=function(a,b){return Rh(a.childNodes).filter(function(a){return a.tagName===b})},Sh=function(a){a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!a)return 0;a=a.slice(1);var b=a[1],c=a[2],d=a[3],e=a[4],f=a[5];return 31536E3*
parseFloat(a[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(c||0)+3600*parseFloat(d||0)+60*parseFloat(e||0)+parseFloat(f||0)},Li={mediaPresentationDuration:function(a){return Sh(a)},availabilityStartTime:function(a){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");return Date.parse(a)/1E3},minimumUpdatePeriod:function(a){return Sh(a)},timeShiftBufferDepth:function(a){return Sh(a)},start:function(a){return Sh(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},
bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?Sh(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Ic=function(a){return a&&a.attributes?Rh(a.attributes).reduce(function(a,b){a[b.name]=(Li[b.name]||Li.DEFAULT)(b.value);return a},{}):{}},ll={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey",
"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},rg=function(a,b){return b.length?Gi(a.map(function(a){return b.map(function(b){return Mj(a,b.textContent.trim())})})):a},Pj=function(a){var b=Db(a,"SegmentTemplate")[0],c=Db(a,"SegmentList")[0],d=c&&Db(c,"SegmentURL").map(function(a){return ld({tag:"SegmentURL"},Ic(a))});a=Db(a,"SegmentBase")[0];
var e=c||b;e=e&&Db(e,"SegmentTimeline")[0];var f=c||a||b;f=f&&Db(f,"Initialization")[0];(b=b&&Ic(b))&&f?b.initialization=f&&Ic(f):b&&b.initialization&&(b.initialization={sourceURL:b.initialization});var g={template:b,timeline:e&&Db(e,"S").map(function(a){return Ic(a)}),list:c&&ld(Ic(c),{segmentUrls:d,initialization:Ic(f)}),base:a&&ld(Ic(a),{initialization:Ic(f)})};Object.keys(g).forEach(function(a){g[a]||delete g[a]});return g},$m=function(a,b,c){return function(d){var e=Db(d,"BaseURL");e=rg(b,e);
var f=ld(a,Ic(d)),g=Pj(d);return e.map(function(a){return{segmentInfo:ld(c,g),attributes:ld(f,{baseUrl:a})}})}},an=function(a){return a.reduce(function(a,b){var c=Ic(b),d=ll[c.schemeIdUri];if(d&&(a[d]={attributes:c},b=Db(b,"cenc:pssh")[0])){if(c=b=b.textContent.trim()){b=e.atob(b);c=new Uint8Array(b.length);for(var f=0;f<b.length;f++)c[f]=b.charCodeAt(f)}a[d].pssh=c}return a},{})},bn=function(a,b,c){return function(d){var e=Ic(d),f=rg(b,Db(d,"BaseURL")),g=Db(d,"Role")[0];g={role:Ic(g)};e=ld(a,e,g);
g=an(Db(d,"ContentProtection"));Object.keys(g).length&&(e=ld(e,{contentProtection:g}));g=Pj(d);d=Db(d,"Representation");g=ld(c,g);return Gi(d.map($m(e,f,g)))}},Qj=function(a,b){return function(c,d){var f=rg(b,Db(c,"BaseURL")),g=Ic(c);g=parseInt(g.id,10);d=e.isNaN(g)?d:g;d=ld(a,{periodIndex:d});g=Db(c,"AdaptationSet");c=Pj(c);return Gi(g.map(bn(d,f,c)))}},ml=function(a){if(""===a)throw Error("DASH_EMPTY_MANIFEST");a=(a=(new e.DOMParser).parseFromString(a,"application/xml"))&&"MPD"===a.documentElement.tagName?
a.documentElement:null;if(!a||a&&0<a.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return a},Rj=function(a){a=Db(a,"UTCTiming")[0];if(!a)return null;a=Ic(a);switch(a.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":a.method=
"DIRECT";a.value=Date.parse(a.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return a},sg=function(a,b){void 0===b&&(b={});a=ml(a);var c=b;void 0===c&&(c={});var d=c;c=d.manifestUri;c=void 0===c?"":c;var e=d.NOW;e=void 0===e?Date.now():e;d=d.clientOffset;d=void 0===d?0:d;var f=Db(a,"Period");if(!f.length)throw Error("INVALID_NUMBER_OF_PERIOD");var g=Ic(a);a=rg([c],Db(a,"BaseURL"));g.sourceDuration=g.mediaPresentationDuration||0;g.NOW=e;g.clientOffset=d;a=Gi(f.map(Qj(g,a)));return bp(a.map(Zm),
b.sidxMapping)};var Jc=function(a,b){var c=[],d;if(!b.length)return null;for(d=0;d<a.byteLength;){var e=(a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3])>>>0;var f=nl(a.subarray(d+4,d+8));e=1<e?d+e:a.byteLength;f===b[0]&&(1===b.length?c.push(a.subarray(d+8,e)):(d=Jc(a.subarray(d+8,e),b.slice(1)),d.length&&(c=c.concat(d))));d=e}return c};var nl=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])};var Be={findBox:Jc,parseType:nl,
timescale:function(a){return Jc(a,["moov","trak"]).reduce(function(a,b){var c=Jc(b,["tkhd"])[0];if(!c)return null;var d=c[0];d=0===d?12:20;c=(c[d]<<24|c[d+1]<<16|c[d+2]<<8|c[d+3])>>>0;b=Jc(b,["mdia","mdhd"])[0];if(!b)return null;d=b[0];d=0===d?12:20;a[c]=(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3])>>>0;return a},{})},startTime:function(a,b){b=Jc(b,["moof","traf"]);b=[].concat.apply([],b.map(function(b){return Jc(b,["tfhd"]).map(function(c){c=a[(c[4]<<24|c[5]<<16|c[6]<<8|c[7])>>>0]||9E4;var d=(d=Jc(b,["tfdt"]).map(function(a){var b=
a[0];var c=(a[4]<<24|a[5]<<16|a[6]<<8|a[7])>>>0;1===b&&(c*=Math.pow(2,32),c+=(a[8]<<24|a[9]<<16|a[10]<<8|a[11])>>>0);return c})[0])||Infinity;return d/c})}));b=Math.min.apply(null,b);return isFinite(b)?b:0},videoTrackIds:function(a){var b=[];Jc(a,["moov","trak"]).forEach(function(a){var c=Jc(a,["mdia","hdlr"]),d=Jc(a,["tkhd"]);c.forEach(function(a,c){a=nl(a.subarray(8,12));c=d[c];"vide"===a&&(c=new DataView(c.buffer,c.byteOffset,c.byteLength),a=c.getUint8(0),c=0===a?c.getUint32(12):c.getUint32(20),
b.push(c))})});return b}},Th=Be.parseType,Kd=function(a){return new Date(1E3*a-20828448E5)},ol=function(a){return{isLeading:(a[0]&12)>>>2,dependsOn:a[0]&3,isDependedOn:(a[1]&192)>>>6,hasRedundancy:(a[1]&48)>>>4,paddingValue:(a[1]&14)>>>1,isNonSyncSample:a[1]&1,degradationPriority:a[2]<<8|a[3]}},Ce={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/
16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:md(a.subarray(78,a.byteLength))}},avcC:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:a[4]&3,sps:[],pps:[]},d=a[5]&31,e;var f=6;for(e=0;e<d;e++){var g=b.getUint16(f);f+=2;c.sps.push(new Uint8Array(a.subarray(f,f+g)));f+=g}d=a[f];f++;for(e=0;e<d;e++)g=
b.getUint16(f),f+=2,c.pps.push(new Uint8Array(a.subarray(f,f+g))),f+=g;return c},btrt:function(a){a=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:a.getUint32(0),maxBitrate:a.getUint32(4),avgBitrate:a.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:a[8]&31,decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],
avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(a[26]&7)<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={majorBrand:Th(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var c=8;c<a.byteLength;)b.compatibleBrands.push(Th(a.subarray(c,c+4))),c+=4;return b},dinf:function(a){return{boxes:md(a)}},dref:function(a){return{version:a[0],
flags:new Uint8Array(a.subarray(1,4)),dataReferences:md(a.subarray(8))}},hdlr:function(a){var b={version:(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:Th(a.subarray(8,12)),name:""},c;for(c=24;c<a.byteLength&&0!==a[c];c++)b.name+=String.fromCharCode(a[c]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(a){var b=a.byteLength,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=[],e;for(e=0;e+4<a.length;e+=f){var f=
c.getUint32(e);e+=4;if(0>=f)d.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(a[e]&31){case 1:d.push("slice_layer_without_partitioning_rbsp");break;case 5:d.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:d.push("sei_rbsp");break;case 7:d.push("seq_parameter_set_rbsp");break;case 8:d.push("pic_parameter_set_rbsp");break;case 9:d.push("access_unit_delimiter_rbsp");break;default:d.push("UNKNOWN NAL - "+a[e]&31)}}return{byteLength:b,nals:d}},mdhd:function(a){var b=new DataView(a.buffer,
a.byteOffset,a.byteLength),c=4;a={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};1===a.version?(c+=4,a.creationTime=Kd(b.getUint32(c)),c+=8,a.modificationTime=Kd(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=8):(a.creationTime=Kd(b.getUint32(c)),c+=4,a.modificationTime=Kd(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=4);a.duration=b.getUint32(c);b=b.getUint16(c+4);a.language+=String.fromCharCode((b>>10)+96);a.language+=String.fromCharCode(((b&992)>>5)+96);a.language+=
String.fromCharCode((b&31)+96);return a},mdia:function(a){return{boxes:md(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:md(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};28<a.byteLength&&(b.streamDescriptor=md(a.subarray(28))[0]);
return b},moof:function(a){return{boxes:md(a)}},moov:function(a){return{boxes:md(a)}},mvex:function(a){return{boxes:md(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=Kd(b.getUint32(c)),c+=8,d.modificationTime=Kd(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8):(d.creationTime=Kd(b.getUint32(c)),c+=4,d.modificationTime=Kd(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),
c+=4);d.duration=b.getUint32(c);c+=4;d.rate=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2+8;d.matrix=new Uint32Array(a.subarray(c,c+36));d.nextTrackId=b.getUint32(c+36+24);return d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},
c;for(c=4;c<a.byteLength;c++)b.samples.push({dependsOn:(a[c]&48)>>4,isDependedOn:(a[c]&12)>>2,hasRedundancy:a[c]&3});return b},sidx:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},d=b.getUint16(22),e;for(e=24;d;e+=12,d--)c.references.push({referenceType:(a[e]&128)>>>7,referencedSize:b.getUint32(e)&
2147483647,subsegmentDuration:b.getUint32(e+4),startsWithSap:!!(a[e+8]&128),sapType:(a[e+8]&112)>>>4,sapDeltaTime:b.getUint32(e+8)&268435455});return c},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:md(a)}},stco:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]};var c=b.getUint32(4),d;for(d=8;c;d+=4,c--)a.chunkOffsets.push(b.getUint32(d));
return a},stsc:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=b.getUint32(4);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};var d;for(d=8;c;d+=12,c--)a.sampleToChunks.push({firstChunk:b.getUint32(d),samplesPerChunk:b.getUint32(d+4),sampleDescriptionIndex:b.getUint32(d+8)});return a},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:md(a.subarray(8))}},stsz:function(a){var b=new DataView(a.buffer,a.byteOffset,
a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},d;for(d=12;d<a.byteLength;d+=4)c.entries.push(b.getUint32(d));return c},stts:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]};var c=b.getUint32(4),d;for(d=8;c;d+=8,c--)a.timeToSamples.push({sampleCount:b.getUint32(d),sampleDelta:b.getUint32(d+4)});return a},styp:function(a){return Ce.ftyp(a)},tfdt:function(a){var b=
{version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:a[4]<<24|a[5]<<16|a[6]<<8|a[7]};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=a[8]<<24|a[9]<<16|a[10]<<8|a[11]);return b},tfhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4)};var c=a.flags[2]&1,d=a.flags[2]&2,e=a.flags[2]&8,f=a.flags[2]&16,g=a.flags[2]&32,h=a.flags[0]&65536,k=a.flags[0]&131072;var l=
8;c&&(l+=4,a.baseDataOffset=b.getUint32(12),l+=4);d&&(a.sampleDescriptionIndex=b.getUint32(l),l+=4);e&&(a.defaultSampleDuration=b.getUint32(l),l+=4);f&&(a.defaultSampleSize=b.getUint32(l),l+=4);g&&(a.defaultSampleFlags=b.getUint32(l));h&&(a.durationIsEmpty=!0);!c&&k&&(a.baseDataOffsetIsMoof=!0);return a},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=Kd(b.getUint32(c)),c+=
8,d.modificationTime=Kd(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+8):(d.creationTime=Kd(b.getUint32(c)),c+=4,d.modificationTime=Kd(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+4);d.duration=b.getUint32(c);c=c+4+8;d.layer=b.getUint16(c);c+=2;d.alternateGroup=b.getUint16(c);c+=2;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2;d.matrix=new Uint32Array(a.subarray(c,c+36));c+=36;d.width=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.height=b.getUint16(c)+b.getUint16(c+2)/16;return d},traf:function(a){return{boxes:md(a)}},
trak:function(a){return{boxes:md(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:a[20]&3,sampleIsDependedOn:(a[21]&192)>>6,sampleHasRedundancy:(a[21]&48)>>4,samplePaddingValue:(a[21]&14)>>1,sampleIsDifferenceSample:!!(a[21]&1),sampleDegradationPriority:b.getUint16(22)}},
trun:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=b.flags[2]&1,e=b.flags[2]&4,f=b.flags[1]&1,g=b.flags[1]&2,h=b.flags[1]&4,k=b.flags[1]&8,l=c.getUint32(4),m=8;d&&(b.dataOffset=c.getInt32(m),m+=4);e&&l&&(d={flags:ol(a.subarray(m,m+4))},m+=4,f&&(d.duration=c.getUint32(m),m+=4),g&&(d.size=c.getUint32(m),m+=4),k&&(d.compositionTimeOffset=c.getUint32(m),m+=4),b.samples.push(d),l--);for(;l--;)d={},f&&(d.duration=c.getUint32(m),
m+=4),g&&(d.size=c.getUint32(m),m+=4),h&&(d.flags=ol(a.subarray(m,m+4)),m+=4),k&&(d.compositionTimeOffset=c.getUint32(m),m+=4),b.samples.push(d);return b},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};var md=function(a){var b=0,c=[],d;
var e=new ArrayBuffer(a.length);var f=new Uint8Array(e);for(d=0;d<a.length;++d)f[d]=a[d];for(e=new DataView(e);b<a.byteLength;){f=e.getUint32(b);d=Th(a.subarray(b+4,b+8));var g=1<f?b+f:a.byteLength;b=(Ce[d]||function(a){return{data:a}})(a.subarray(b+8,g));b.size=f;b.type=d;c.push(b);b=g}return c};var cn=function(a,b){b=b||0;var c=Array(2*b+1).join(" ");return a.map(function(a,d){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ";
b=a[b];return b instanceof Uint8Array||b instanceof Uint32Array?(b=Array.prototype.slice.call(new Uint8Array(b.buffer,b.byteOffset,b.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===b.length?d+"<"+b.join("").slice(1)+">":d+"<\n"+b.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>":d+JSON.stringify(b,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+cn(a.boxes,b+1):"")}).join("\n")};
var Sj={inspect:md,textify:cn,parseTfdt:Ce.tfdt,parseHdlr:Ce.hdlr,parseTfhd:Ce.tfhd,parseTrun:Ce.trun,parseSidx:Ce.sidx},Tj=Math.pow(2,32)-1,Uj,Uh,Ja,Vh,pl,dn,en,ql,eh,fe,ef,Vj,Ni,rl,fn,Wj;(function(){var a;Ja={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==
typeof Uint8Array){for(a in Ja)Ja.hasOwnProperty(a)&&(Ja[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);Vh=new Uint8Array([105,115,111,109]);dn=new Uint8Array([97,118,99,49]);pl=new Uint8Array([0,0,0,1]);en=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);ql=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);eh={video:en,audio:ql};Vj=
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);ef=new Uint8Array([0,0,0,0,0,0,0,0]);rl=Ni=new Uint8Array([0,0,0,0,0,0,0,0]);fn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);Wj=Ni;fe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var ta=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var e=new Uint8Array(c+8);(new DataView(e.buffer,e.byteOffset,e.byteLength)).setUint32(0,e.byteLength);e.set(a,4);d=0;for(c=8;d<b.length;d++)e.set(b[d],
c),c+=b[d].byteLength;return e};var sl=function(){return ta(Ja.dinf,ta(Ja.dref,Vj))};var gn=function(a){return ta(Ja.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var hn=function(){return ta(Ja.ftyp,Vh,pl,Vh,dn)};var fp=function(a){return ta(Ja.hdlr,eh[a])};var Oi=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>
16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return ta(Ja.mdhd,b)};var Xj=function(a){return ta(Ja.mdia,Oi(a),fp(a.type),ln(a))};var kn=function(a){return ta(Ja.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var ln=function(a){return ta(Ja.minf,"video"===a.type?ta(Ja.vmhd,fe):ta(Ja.smhd,ef),sl(),pn(a))};var ug=function(a){for(var b=
a.length,c=[];b--;)c[b]=hp(a[b]);return ta.apply(null,[Ja.moov,nn(4294967295)].concat(c).concat(mn(a)))};var mn=function(a){for(var b=a.length,c=[];b--;)c[b]=ip(a[b]);return ta.apply(null,[Ja.mvex].concat(c))};var nn=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,
255]);return ta(Ja.mvhd,a)};var on=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return ta(Ja.sdtp,b)};var pn=function(a){return ta(Ja.stbl,Uj(a),ta(Ja.stts,Wj),ta(Ja.stsc,rl),ta(Ja.stsz,fn),ta(Ja.stco,Ni))};(function(){Uj=function(c){return ta(Ja.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))};var a=function(a){var b=a.sps||[],c=a.pps||[],d=[],e=[],f;for(f=0;f<b.length;f++)d.push((b[f].byteLength&
65280)>>>8),d.push(b[f].byteLength&255),d=d.concat(Array.prototype.slice.call(b[f]));for(f=0;f<c.length;f++)e.push((c[f].byteLength&65280)>>>8),e.push(c[f].byteLength&255),e=e.concat(Array.prototype.slice.call(c[f]));return ta(Ja.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),
ta(Ja.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(d).concat([c.length]).concat(e))),ta(Ja.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return ta(Ja.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),gn(a))}})();var qn=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,
0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return ta(Ja.tkhd,a)};var gp=function(a){var b=ta(Ja.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var c=Math.floor(a.baseMediaDecodeTime/(Tj+1));var d=Math.floor(a.baseMediaDecodeTime%(Tj+1));c=ta(Ja.tfdt,new Uint8Array([1,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255]));if("audio"===a.type)return a=Uh(a,92),ta(Ja.traf,b,c,a);d=on(a);a=Uh(a,d.length+92);return ta(Ja.traf,b,c,a,d)};var hp=function(a){a.duration=a.duration||4294967295;return ta(Ja.trak,qn(a),Xj(a))};var ip=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>
24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return ta(Ja.trex,b)};(function(){var a=function(a,b){var c=0,d=0,e=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|d|e|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=
function(b,c){var d;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var e=b[d];c=c.concat([(e.duration&4278190080)>>>24,(e.duration&16711680)>>>16,(e.duration&65280)>>>8,e.duration&255,(e.size&4278190080)>>>24,(e.size&16711680)>>>16,(e.size&65280)>>>8,e.size&255,e.flags.isLeading<<2|e.flags.dependsOn,e.flags.isDependedOn<<6|e.flags.hasRedundancy<<4|e.flags.paddingValue<<1|e.flags.isNonSyncSample,e.flags.degradationPriority&61440,e.flags.degradationPriority&15,(e.compositionTimeOffset&
4278190080)>>>24,(e.compositionTimeOffset&16711680)>>>16,(e.compositionTimeOffset&65280)>>>8,e.compositionTimeOffset&255])}return ta(Ja.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var e=b[d];c=c.concat([(e.duration&4278190080)>>>24,(e.duration&16711680)>>>16,(e.duration&65280)>>>8,e.duration&255,(e.size&4278190080)>>>24,(e.size&16711680)>>>16,(e.size&65280)>>>8,e.size&255])}return ta(Ja.trun,new Uint8Array(c))};Uh=function(a,
d){return"audio"===a.type?c(a,d):b(a,d)}})();var Pi={ftyp:hn,mdat:function(a){return ta(Ja.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=gp(b[d]);return ta.apply(null,[Ja.moof,kn(a)].concat(c))},moov:ug,initSegment:function(a){var b=hn();a=ug(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}},pc=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);
a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var e=c.length;for(d=0;d<e;++d)c[d].call(this,arguments[1])}else{var f=[];for(d=1;d<arguments.length;++d)f.push(arguments[d]);e=c.length;for(d=0;d<e;++d)c[d].apply(this,f)}};this.dispose=function(){a={}}}};pc.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};pc.prototype.push=function(a){this.trigger("data",a)};pc.prototype.flush=
function(a){this.trigger("done",a)};var Wh={groupNalsIntoFrames:function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var e=a[b];"access_unit_delimiter_rbsp"===e.nalUnitType?(c.length&&(c.duration=e.dts-c.dts,d.push(c)),c=[e],c.byteLength=e.data.byteLength,c.pts=e.pts,c.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(c.keyFrame=!0),c.duration=e.dts-c.dts,c.byteLength+=e.data.byteLength,c.push(e))}d.length&&(!c.duration||0>=c.duration)&&(c.duration=d[d.length-1].duration);
d.push(c);return d},groupFramesIntoGops:function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var e=a[b];e.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[e],c.nalCount=e.length,c.byteLength=e.byteLength,c.pts=e.pts,c.dts=e.dts,c.duration=e.duration):(c.duration+=e.duration,c.nalCount+=e.length,c.byteLength+=
e.byteLength,c.push(e))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var c,d=b||0,e=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=
f[c];var h={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};h.dataOffset=d;h.compositionTimeOffset=g.pts-g.dts;h.duration=g.duration;h.size=4*g.length;h.size+=g.byteLength;g.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0);g=h;d+=g.size;e.push(g)}}return e},concatenateNalData:function(a){var b,c,d,e=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var h=a[b];for(c=0;c<h.length;c++){var k=
h[c];for(d=0;d<k.length;d++){var l=k[d];g.setUint32(e,l.data.byteLength);e+=4;f.set(l.data,e);e+=l.data.byteLength}}}return f}},ff=[33,16,5,32,164,27],Yj=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],eb=function(a){for(var b=[];a--;)b.push(0);return b},rn=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[ff,[227,64],eb(154),[56]],88200:[ff,[231],eb(170),[56]],64E3:[ff,[248,192],eb(240),[56]],48E3:[ff,[255,
192],eb(268),[55,148,128],eb(54),[112]],44100:[ff,[255,192],eb(268),[55,163,128],eb(84),[112]],32E3:[ff,[255,192],eb(268),[55,234],eb(226),[112]],24E3:[ff,[255,192],eb(268),[55,255,128],eb(268),[111,112],eb(126),[224]],16E3:[ff,[255,192],eb(268),[55,255,128],eb(268),[111,255],eb(269),[223,108],eb(195),[1,192]],12E3:[Yj,eb(268),[3,127,248],eb(268),[6,255,240],eb(268),[13,255,224],eb(268),[27,253,128],eb(259),[56]],11025:[Yj,eb(268),[3,127,248],eb(268),[6,255,240],eb(268),[13,255,224],eb(268),[27,255,
192],eb(268),[55,175,128],eb(108),[112]],8E3:[Yj,eb(268),[3,121,16],eb(47),[7]]});var Zj=function(a){return 9E4*a};var tl=function(a,b){return a*b};var ul=function(a){return a/9E4};var sn=function(a,b){return a/b};var tn={secondsToVideoTs:Zj,secondsToAudioTs:tl,videoTsToSeconds:ul,audioTsToSeconds:sn,audioTsToVideoTs:function(a,b){return Zj(sn(a,b))},videoTsToAudioTs:function(a,b){return tl(ul(a),b)}},Xh={prefixWithSilence:function(a,b,c,d){var e,f=e=0;if(b.length){var g=tn.audioTsToVideoTs(a.baseMediaDecodeTime,
a.samplerate);var h=Math.ceil(9E4/(a.samplerate/1024));c&&d&&(e=g-Math.max(c,d),e=Math.floor(e/h),f=e*h);if(!(1>e||45E3<f)){h=rn[a.samplerate];h||(h=b[0].data);for(c=0;c<e;c++)b.splice(c,0,{data:h});a.baseMediaDecodeTime-=Math.floor(tn.videoTsToAudioTs(f,a.samplerate))}}},trimAdtsFramesByEarliestDts:function(a,b,c){if(b.minSegmentDts>=c)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):
!1})},generateSampleTable:function(a){var b,c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c},concatenateFrameData:function(a){var b,c=0;var d=Uint8Array;var e=0;for(b=0;b<a.length;b++){var f=a[b];e+=f.data.byteLength}f=new d(e);for(d=0;d<a.length;d++)b=a[d],f.set(b.data,c),c+=b.data.byteLength;return f}},ge={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,
b){var c=a.minSegmentDts;b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&
(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},Yh={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;e+=a[b++];if(!c.payload&&4===d){c.payloadType=d;c.payloadSize=e;c.payload=a.subarray(b,b+e);break}b+=e;e=d=0}return c},parseUserData:function(a){return 181!==
a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var e=b[0]&31;for(d=0;d<e;d++){var f=3*d;var g={type:b[f+2]&3,pts:a};b[f+2]&4&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===
a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e},USER_DATA_REGISTERED_ITU_T_T35:4},De=function L(){L.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Eb(0,0),new Eb(0,1),new Eb(1,0),new Eb(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};De.prototype=new pc;De.prototype.push=
function(a){if("sei_rbsp"===a.nalUnitType){var b=Yh.parseSei(a.escapedRBSP);b.payloadType===Yh.USER_DATA_REGISTERED_ITU_T_T35&&(b=Yh.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=Yh.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};De.prototype.flush=
function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};De.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=
!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};De.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};De.prototype.setsChannel1Active=function(a){return 4096===
(a.ccData&30720)};De.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};De.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var un={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,
553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Hb=function(a){if(null===a)return"";a=un[a]||a;return String.fromCharCode(a)},
fh=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ld=function(){for(var a=[],b=15;b--;)a.push("");return a},Eb=function da(a,b){da.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=
null);var c=b>>>8;var d=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):
b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=Ld()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Ld():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&
(this.flushDisplayed(a.pts),this.displayed_=Ld()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=Hb((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=Hb((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts,
" "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=fh.indexOf(b&7968),"rollUp"===this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,
["i"])):this.isNormalChar(c)&&(0===d&&(d=null),b=Hb(c),b+=Hb(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};Eb.prototype=new pc;Eb.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(ja){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};Eb.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=
0;this.displayed_=Ld();this.nonDisplayed_=Ld();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Eb.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=
this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Eb.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};Eb.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};Eb.prototype.isMidRowCode=
function(a,b){return a===this.EXT_&&32<=b&&47>=b};Eb.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};Eb.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};Eb.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};Eb.prototype.isNormalChar=function(a){return 32<=a&&127>=a};Eb.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Ld(),this.displayed_=
Ld());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};Eb.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};Eb.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+
b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};Eb.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};Eb.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};Eb.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};Eb.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};var ak=
Eb,Ib={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pf=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a},ib=function da(a){var b,c;da.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=Pf(a.dts,c),a.pts=Pf(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};ib.prototype=new pc;var Ri=function(a,b,c){for(var d=
"";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},vg=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Zh={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Ri(a.data,1,b));a.value=decodeURIComponent(Ri(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Ri(a.data,1,b));a.url=decodeURIComponent(Ri(a.data,
b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(Ri(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var Gl=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,d=[],e=0,f;Gl.prototype.init.call(this);this.dispatchType=Ib.METADATA_STREAM_TYPE.toString(16);if(a)for(f=0;f<a.length;f++)this.dispatchType+=("00"+a[f].toString(16)).slice(-2);this.push=function(a){var f;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&
(e=0,d.length=0),0===d.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(d.push(a),e+=a.data.byteLength,1===d.length&&(c=vg(a.data.subarray(6,10)),c+=10),!(e<c)){a={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts};for(f=0;f<c;)a.data.set(d[0].data.subarray(0,c-f),f),f+=d[0].data.byteLength,e-=d[0].data.byteLength,d.shift();f=10;a.data[5]&64&&(f=f+4+vg(a.data.subarray(10,14)),c-=vg(a.data.subarray(16,
20)));do{var g=vg(a.data.subarray(f+4,f+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var h=String.fromCharCode(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]);h={id:h,data:a.data.subarray(f+10,f+g+10)};h.key=h.id;if(Zh[h.id]&&(Zh[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var k=h.data,l=(k[3]&1)<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;l*=4;l+=k[7]&3;h.timeStamp=l;void 0===a.pts&&void 0===a.dts&&(a.pts=h.timeStamp,a.dts=h.timeStamp);
this.trigger("timestamp",h)}a.frames.push(h);f+=10;f+=g}while(f<c);this.trigger("data",a)}}};Gl.prototype=new pc;var El=function(){var a=new Uint8Array(188),b=0;El.prototype.init.call(this);this.push=function(c){var d=0,e=188;if(b){var f=new Uint8Array(c.byteLength+b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;e<f.byteLength;)71===f[d]&&71===f[e]?(this.trigger("data",f.subarray(d,e)),d+=188,e+=188):(d++,e++);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)};this.flush=function(){188===
b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};El.prototype=new pc;var jk=function(){jk.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var e=0;b.payloadUnitStartIndicator&&(e+=a[e]+1);"pat"===b.type?c(a.subarray(e),b):d(a.subarray(e),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,
audio:null,"timed-metadata":{}};var e=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<e;){var f=b[d],g=(b[d+1]&31)<<8|b[d+2];f===Ib.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:f===Ib.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:f===Ib.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=f);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&
64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?
Ib.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?Ib.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};jk.prototype=new pc;jk.STREAM_TYPES={h264:27,adts:15};var Fl=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},e=function(b,c,d){var e=new Uint8Array(b.size),f={type:c},g,h=0;if(b.data.length&&!(9>b.size)){f.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var k=b.data[g];e.set(k.data,h);h+=
k.data.byteLength}f.packetLength=6+(e[4]<<8|e[5]);f.dataAlignmentIndicator=0!==(e[6]&4);g=e[7];g&192&&(f.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3,f.pts*=4,f.pts+=(e[13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3,f.dts*=4,f.dts+=(e[18]&6)>>>1));f.data=e.subarray(9+e[8]);c="video"===c||f.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",f)}};Fl.prototype.init.call(this);
this.push=function(f){({pat:function(){},pes:function(){switch(f.streamType){case Ib.H264_STREAM_TYPE:case Ib.H264_STREAM_TYPE:var a=b;var g="video";break;case Ib.ADTS_STREAM_TYPE:a=c;g="audio";break;case Ib.METADATA_STREAM_TYPE:a=d;g="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&e(a,g,!0);a.data.push(f);a.size+=f.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=f.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,
codec:"avc",type:"video"});null!==c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[f.type]()};this.flush=function(){e(b,"video");e(c,"audio");e(d,"timed-metadata");this.trigger("done")}};Fl.prototype=new pc;var ke={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:El,TransportParseStream:jk,ElementaryStream:Fl,TimestampRolloverStream:ib,CaptionStream:De,Cea608Stream:ak,MetadataStream:Gl},kk;for(kk in Ib)Ib.hasOwnProperty(kk)&&
(ke[kk]=Ib[kk]);var En=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var lk=function(){var a;lk.prototype.init.call(this);this.push=function(b){var c=0,d=0;if("audio"===b.type){if(a){var e=a;a=new Uint8Array(e.byteLength+b.data.byteLength);a.set(e);a.set(b.data,e.byteLength)}else a=b.data;for(;c+5<a.length;)if(255!==a[c]||240!==(a[c+1]&246))c++;else{e=2*(~a[c+1]&1);var f=(a[c+3]&3)<<11|a[c+4]<<3|(a[c+5]&224)>>5;var g=1024*((a[c+6]&3)+1);var h=9E4*g/En[(a[c+2]&60)>>>2];f=c+
f;if(a.byteLength<f)break;this.trigger("data",{pts:b.pts+d*h,dts:b.dts+d*h,sampleCount:g,audioobjecttype:(a[c+2]>>>6&3)+1,channelcount:(a[c+2]&1)<<2|(a[c+3]&192)>>>6,samplerate:En[(a[c+2]&60)>>>2],samplingfrequencyindex:(a[c+2]&60)>>>2,samplesize:16,data:a.subarray(c+7+e,f)});if(a.byteLength===f){a=void 0;break}d++;a=a.subarray(f)}}};this.flush=function(){this.trigger("done")}};lk.prototype=new pc;var xp=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b};this.bitsAvailable=
function(){return 8*b+d};this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");f.set(a.subarray(e,e+g));c=(new DataView(f.buffer)).getUint32(0);d=8*g;b-=g};this.skipBits=function(a){if(!(d>a)){a-=d;var e=Math.floor(a/8);a-=8*e;b-=e;this.loadWord()}c<<=a;d-=a};this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;d-=e;0<d?c<<=e:0<b&&this.loadWord();e=a-e;return 0<e?f<<e|this.readBits(e):f};this.skipLeadingZeros=function(){var a;
for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};
this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var hk=function(){var a=0,b,c;hk.prototype.init.call(this);this.push=function(d){if(c){var e=new Uint8Array(c.byteLength+d.data.byteLength);e.set(c);e.set(d.data,c.byteLength);c=e}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);
a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};hk.prototype=new pc;var wp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var ik=function(){var a=new hk,b,c,d;ik.prototype.init.call(this);var e=this;this.push=function(e){"video"===e.type&&(b=
e.trackId,c=e.pts,d=e.dts,a.push(e))};a.on("data",function(a){var f={trackId:b,pts:c,dts:d,data:a};switch(a[0]&31){case 5:f.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:f.nalUnitType="sei_rbsp";f.escapedRBSP=g(a.subarray(1));break;case 7:f.nalUnitType="seq_parameter_set_rbsp";f.escapedRBSP=g(a.subarray(1));f.config=h(f.escapedRBSP);break;case 8:f.nalUnitType="pic_parameter_set_rbsp";break;case 9:f.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",f)});a.on("done",function(){e.trigger("done")});
this.flush=function(){a.flush()};var f=function(a,b){var c=8,d=8,e;for(e=0;e<a;e++)0!==d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var g=function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e};var h=function(a){var b=0,c=0,d=0,e=0,g=1;a=new xp(a);var h=a.readUnsignedByte();var k=a.readUnsignedByte();var l=
a.readUnsignedByte();a.skipUnsignedExpGolomb();if(wp[h]){var m=a.readUnsignedExpGolomb();3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var n=3!==m?8:12;for(m=0;m<n;m++)a.readBoolean()&&(6>m?f(16,a):f(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),n=a.readUnsignedExpGolomb(),m=0;m<n;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();
a.skipBits(1);m=a.readUnsignedExpGolomb();n=a.readUnsignedExpGolomb();var p=a.readBits(1);0===p&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),c=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var q=a.readUnsignedByte();switch(q){case 1:var t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=
[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}t&&(g=t[0]/t[1])}return{profileIdc:h,levelIdc:l,profileCompatibility:k,width:Math.ceil((16*(m+1)-2*b-2*c)*g),height:(2-p)*(n+1)*16-2*d-2*e}}};ik.prototype=new pc;var yp=[96E3,88200,64E3,48E3,44100,32E3,
24E3,22050,16E3,12E3,11025,8E3,7350],Dn=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Rf={isLikelyAacData:function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=
0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;else return yp[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+Dn(a.subarray(10,14)));do{var c=Dn(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){var f=unescape,g,h=d,k=e,l="";for(g=0;g<k;g++)l+="%"+("00"+h[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===
f(l))return a=d.subarray(e+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}};var Dl=function(){var a=new Uint8Array,b=0;Dl.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.push=function(c){var d=0;if(a.length){var e=a.length;a=new Uint8Array(c.byteLength+e);a.set(a.subarray(0,e));a.set(c,e)}else a=c;for(;3<=a.length-d;)if(73===a[d]&&68===a[d+1]&&51===a[d+2]){if(10>a.length-d)break;c=Rf.parseId3TagSize(a,d);if(d+
c>a.length)break;e={type:"timed-metadata",data:a.subarray(d,d+c)};this.trigger("data",e);d+=c}else if(255===(a[d]&255)&&240===(a[d+1]&240)){if(7>a.length-d)break;c=Rf.parseAdtsSize(a,d);if(d+c>a.length)break;e={type:"audio",data:a.subarray(d,d+c),pts:b,dts:b};this.trigger("data",e);d+=c}else d++;a=0<a.length-d?a.subarray(d):new Uint8Array}};Dl.prototype=new pc;var zp=Rf.isLikelyAacData,Bn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Cn=["width","height","profileIdc",
"levelIdc","profileCompatibility"],zl=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},lp=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};var bk=function(a,b){var c=[],d=0,e=0,f=0,g=Infinity;b=b||{};bk.prototype.init.call(this);this.push=function(b){ge.collectDtsInfo(a,b);a&&Bn.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){e=
b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var h=Xh.trimAdtsFramesByEarliestDts(c,a,e);a.baseMediaDecodeTime=ge.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);Xh.prefixWithSilence(a,h,f,g);a.samples=Xh.generateSampleTable(h);var k=Pi.mdat(Xh.concatenateFrameData(h));c=[];h=Pi.moof(d,[a]);var l=new Uint8Array(h.byteLength+k.byteLength);d++;l.set(h);l.set(k,
h.byteLength);ge.clearDtsInfo(a);this.trigger("data",{track:a,boxes:l})}this.trigger("done","AudioSegmentStream")}};bk.prototype=new pc;var Al=function(a,b){var c=0,d=[],e=[],f,g;b=b||{};Al.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){ge.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||f||(f=b.config,a.sps=[b.data],Cn.forEach(function(b){a[b]=f[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);d.push(b)};this.flush=
function(){var f;var g=0;for(var h,k;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0!==d.length){var l=Wh.groupNalsIntoFrames(d);l=Wh.groupFramesIntoGops(l);l[0][0].keyFrame||((f=this.getGopForFusion_(d[0],a))?(g=f.duration,l.unshift(f),l.byteLength+=f.byteLength,l.nalCount+=f.nalCount,l.pts=f.pts,l.dts=f.dts,l.duration+=f.duration):l=Wh.extendFirstKeyFrame(l));if(e.length){f=b.alignGopsAtEnd?this.alignGopsAtEnd_(l):this.alignGopsAtStart_(l);if(!f){this.gopCache_.unshift({gop:l.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}ge.clearDtsInfo(a);l=f}ge.collectDtsInfo(a,l);a.samples=Wh.generateSampleTable(l);f=Pi.mdat(Wh.concatenateNalData(l));a.baseMediaDecodeTime=ge.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",l.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));h=l[0];k=l[l.length-1];this.trigger("segmentTimingInfo",
lp(a.baseMediaDecodeTime,h.dts,h.pts,k.dts+k.duration,k.pts+k.duration,g));this.gopCache_.unshift({gop:l.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=Pi.moof(c,[a]);l=new Uint8Array(g.byteLength+f.byteLength);c++;l.set(g);l.set(f,g.byteLength);this.trigger("data",{track:a,boxes:l})}this.resetStream_();this.trigger("done","VideoSegmentStream")};
this.resetStream_=function(){ge.clearDtsInfo(a);g=f=void 0};this.getGopForFusion_=function(b){var c=Infinity,d;for(d=0;d<this.gopCache_.length;d++){var e=this.gopCache_[d];var f=e.gop;if(a.pps&&zl(a.pps[0],e.pps[0])&&a.sps&&zl(a.sps[0],e.sps[0])&&!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=e;c=f}}return g?g.gop:null};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var f=a.nalCount;var g=a.duration;for(b=c=0;b<e.length&&c<a.length;){var h=
e[b];var k=a[c];if(h.pts===k.pts)break;k.pts>h.pts?b++:(c++,d-=k.byteLength,f-=k.nalCount,g-=k.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=e.length-1;var d=a.length-1;var f=null;for(b=!1;0<=c&&0<=d;){var g=e[c];var h=a[d];if(g.pts===h.pts){b=!0;break}g.pts>h.pts?c--:(c===e.length-1&&(f=d),d--)}if(!b&&null===f)return null;c=b?d:f;if(0===c)return a;a=
a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){e=a}};Al.prototype=new pc;var $h=function(a,b){this.numberOfTracks=0;this.metadataStream=b;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;"boolean"===typeof a.keepOriginalTimestamps&&
(this.keepOriginalTimestamps=a.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;$h.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);
"audio"===a.track.type&&(this.audioTrack=a.track)}};$h.prototype=new pc;$h.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,
Cn.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,Bn.forEach(function(a){c.info[a]=this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=Pi.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],
b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts,this.keepOriginalTimestamps||(b.startTime-=d),b.startTime/=9E4,b.endTime=b.endPts,this.keepOriginalTimestamps||(b.endTime-=d),b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts,this.keepOriginalTimestamps||(b.cueTime-=d),b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var vn=function(a){var b=this,c=!0,d,e;vn.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=
c;c.type="aac";c.metadataStream=new ke.MetadataStream;c.aacStream=new Dl;c.audioTimestampRolloverStream=new ke.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new ke.TimestampRolloverStream("timed-metadata");c.adtsStream=new lk;c.coalesceStream=new $h(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",
function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(d){"timed-metadata"!==d.type||c.audioSegmentStream||(e=e||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new bk(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new ke.MetadataStream;c.packetStream=new ke.TransportPacketStream;c.parseStream=new ke.TransportParseStream;c.elementaryStream=new ke.ElementaryStream;c.videoTimestampRolloverStream=new ke.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new ke.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new ke.TimestampRolloverStream("timed-metadata");c.adtsStream=new lk;c.h264Stream=new ik;c.captionStream=
new ke.CaptionStream;c.coalesceStream=new $h(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",
function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)d||"video"!==f.tracks[g].type?e||"audio"!==f.tracks[g].type||(e=f.tracks[g],e.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(d=f.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new Al(d,a),c.videoSegmentStream.on("timelineStartInfo",function(a){e&&(e.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),
c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){e&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));e&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new bk(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});
c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=b);e&&(e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,ge.clearDtsInfo(e),a.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=b),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());d&&(c.videoSegmentStream&&
(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,ge.clearDtsInfo(d),c.captionStream.reset(),a.keepOriginalTimestamps||(d.timelineStartInfo.baseMediaDecodeTime=b));c.timedMetadataTimestampRolloverStream&&c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&
this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=zp(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};vn.prototype=new pc;var mp=Yh.discardEmulationPreventionBytes,
np=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];a.forEach(function(a){a=Sj.parseTrun(a).samples;a.forEach(function(a){void 0===a.duration&&(a.duration=e);void 0===a.size&&(a.size=f);a.trackId=g;a.dts=d;void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0);a.pts=d+a.compositionTimeOffset;d+=a.duration});h=h.concat(a)});return h},op=function(a,b){var c=Be.findBox(a,["moof","traf"]),d={},e=[];Be.findBox(a,["mdat"]).forEach(function(a,b){e.push({mdat:a,
traf:c[b]})});e.forEach(function(a){var c=a.mdat,e=a.traf;a=Be.findBox(e,["tfhd"]);var f=Sj.parseTfhd(a[0]);a=f.trackId;var g=Be.findBox(e,["tfdt"]);g=0<g.length?Sj.parseTfdt(g[0]).baseMediaDecodeTime:0;e=Be.findBox(e,["trun"]);if(b===a&&0<e.length){e=np(e,g,f);f=new DataView(c.buffer,c.byteOffset,c.byteLength);g=[];var h;for(h=0;h+4<c.length;h+=k){var k=f.getUint32(h);h+=4;if(!(0>=k))switch(c[h]&31){case 6:var l=c.subarray(h+1,h+1+k);a:{var m=h;for(var n=0;n<e.length;n++){var p=e[n];if(m<p.size){m=
p;break a}m-=p.size}m=null}l={nalUnitType:"sei_rbsp",size:k,data:l,escapedRBSP:mp(l),trackId:a};if(m){l.pts=m.pts;l.dts=m.dts;var q=m}else l.pts=q.pts,l.dts=q.dts;g.push(l)}}d[a]||(d[a]=[]);d[a]=d[a].concat(g)}});return d},pp=function(){var a=!1,b,c,d,e,f;this.isInitialized=function(){return a};this.init=function(){b=new De;a=!0;b.on("data",function(a){a.startTime=a.startPts/e;a.endTime=a.endPts/e;f.captions.push(a);f.captionStreams[a.stream]=!0})};this.isNewInit=function(a,b){return a&&0===a.length||
b&&"object"===typeof b&&0===Object.keys(b).length?!1:d!==a[0]||e!==b[d]};this.parse=function(a,b,g){if(this.isInitialized()){if(!b||!g)return null;if(this.isNewInit(b,g))d=b[0],e=g[d];else if(!d||!e)return c.push(a),null}else return null;for(;0<c.length;){var h=c.shift();this.parse(h,b,g)}b=d;g=e;a=b?{seiNals:op(a,b)[b],timescale:g}:null;if(null===a||!a.seiNals)return null;this.pushNals(a.seiNals);this.flushStream();return f};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;
a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;b.flush()};this.clearParsedCaptions=function(){f.captions=[];f.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){c=[];e=d=null;f?this.clearParsedCaptions():f={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},xn=function(a){var b=
a[1]&31;return b=b<<8|a[2]},ck=function(a){return!!(a[1]&64)},dk=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},Bl=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var Ob={parseType:function(a,b){a=xn(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=ck(a),c=4+dk(a);b&&
(c+=a[c]+1);return(a[c+10]&31)<<8|a[c+11]},parsePmt:function(a){var b={},c=ck(a),d=4+dk(a);c&&(d+=a[d]+1);if(a[d+5]&1){c=3+((a[d+1]&15)<<8|a[d+2])-4;for(var e=12+((a[d+10]&15)<<8|a[d+11]);e<c;){var f=d+e;b[(a[f+1]&31)<<8|a[f+2]]=a[f];e+=((a[f+3]&15)<<8|a[f+4])+5}return b}},parsePayloadUnitStartIndicator:ck,parsePesType:function(a,b){a=xn(a);switch(b[a]){case Ib.H264_STREAM_TYPE:return"video";case Ib.ADTS_STREAM_TYPE:return"audio";case Ib.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},
parsePesTime:function(a){if(!ck(a))return null;var b=4+dk(a);if(b>=a.byteLength)return null;var c=null;var d=a[b+7];d&192&&(c={},c.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,c.pts*=4,c.pts+=(a[b+13]&6)>>>1,c.dts=c.pts,d&64&&(c.dts=(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,c.dts*=4,c.dts+=(a[b+18]&6)>>>1));return c},videoPacketContainsKeyFrame:function(a){var b=4+dk(a);a=a.subarray(b);for(var c=b=0,d=!1;c<
a.byteLength-3;c++)if(1===a[c+2]){b=c+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}c+3!==b-2&&(c=Bl(a[c+3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));do b++;while(1!==a[b]&&b<a.length);c=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}c=Bl(a[c+3]&31);"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0);c=b-2;b+=3;break;default:b+=3}(a=a.subarray(c))&&3<a.byteLength&&(c=Bl(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===
c&&(d=!0));return d}};var qp=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=Pf(a.dts,c);a.pts=Pf(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=Pf(a.dts,d);a.pts=Pf(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=Pf(a.dts,d),a.pts=Pf(a.pts,d),a.dtsTime=a.dts/
9E4,a.ptsTime=a.dts/9E4)}},ek=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},yn=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),rp=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},he=null,sp=function(){function a(b){ek(this,a);if(!he){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],d=c[0],e=c[1],f=d[4],g=e[4],h,k,l,m=[],n=[],p;for(h=0;256>h;h++)n[(m[h]=h<<1^283*(h>>7))^h]=h;for(k=l=0;!f[k];k^=p||1,l=n[l]||1){var q=l^l<<1^l<<2^l<<3^l<<4;q=q>>8^q&255^99;f[k]=q;g[q]=k;var t=m[h=m[p=m[k]]];var r=16843009*
t^65537*h^257*p^16843008*k;t=257*m[q]^16843008*q;for(h=0;4>h;h++)d[h][k]=t=t<<24^t>>>8,e[h][q]=r=r<<24^r>>>8}for(h=0;5>h;h++)d[h]=d[h].slice(0),e[h]=e[h].slice(0);he=c}this._tables=[[he[0][0].slice(),he[0][1].slice(),he[0][2].slice(),he[0][3].slice(),he[0][4].slice()],[he[1][0].slice(),he[1][1].slice(),he[1][2].slice(),he[1][3].slice(),he[1][4].slice()]];c=this._tables[0][4];d=this._tables[1];k=b.length;l=1;if(4!==k&&6!==k&&8!==k)throw Error("Invalid aes key size");f=b.slice(0);g=[];this._key=[f,
g];for(b=k;b<4*k+28;b++){e=f[b-1];if(0===b%k||8===k&&4===b%k)e=c[e>>>24]<<24^c[e>>16&255]<<16^c[e>>8&255]<<8^c[e&255],0===b%k&&(e=e<<8^e>>>24^l<<24,l=l<<1^283*(l>>7));f[b]=f[b-k]^e}for(k=0;b;k++,b--)e=f[k&3?b:b-4],g[k]=4>=b||4>k?e:d[0][c[e>>>24]]^d[1][c[e>>16&255]]^d[2][c[e>>8&255]]^d[3][c[e&255]]}a.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1];a^=g[0];d^=g[1];c^=g[2];b^=g[3];var h=g.length/4-2,k,l=4;var m=this._tables[1];var n=m[0],p=m[1],q=m[2],t=m[3],r=m[4];for(k=0;k<h;k++){m=n[a>>>
24]^p[d>>16&255]^q[c>>8&255]^t[b&255]^g[l];var u=n[d>>>24]^p[c>>16&255]^q[b>>8&255]^t[a&255]^g[l+1];var A=n[c>>>24]^p[b>>16&255]^q[a>>8&255]^t[d&255]^g[l+2];b=n[b>>>24]^p[a>>16&255]^q[d>>8&255]^t[c&255]^g[l+3];l+=4;a=m;d=u;c=A}for(k=0;4>k;k++)e[(3&-k)+f]=r[a>>>24]<<24^r[d>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[l++],m=a,a=d,d=c,c=b,b=m};return a}(),Cl=function(){function a(){ek(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};
a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var e=0;e<d;++e)b[e].apply(this,c)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),
zn=function(a){function b(){ek(this,b);var c=a.call(this,Cl);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.jobs=[];c.delay=1;c.timeout_=null;return c}rp(b,a);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),
this.delay))};return b}(Cl),ie=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},An=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new sp(Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var e=new Int32Array(a.buffer),f;var g=c[0];var h=c[1];var k=c[2];c=c[3];for(f=0;f<d.length;f+=4){var l=ie(d[f]);var m=ie(d[f+1]);var n=ie(d[f+2]);var p=ie(d[f+3]);b.decrypt(l,m,n,p,e,f);e[f]=ie(e[f]^g);e[f+1]=ie(e[f+1]^h);e[f+2]=ie(e[f+2]^k);e[f+3]=ie(e[f+3]^
c);g=l;h=m;k=n;c=p}return a},tp=function(){function a(b,c,d,e){ek(this,a);var f=a.STEP,g=new Int32Array(b.buffer),h=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new zn;this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,h));for(b=f;b<g.length;b+=f)d=new Uint32Array([ie(g[b-4]),ie(g[b-3]),ie(g[b-2]),ie(g[b-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,h));this.asyncStream_.push(function(){e(null,h.subarray(0,h.byteLength-h[h.byteLength-1]))})}a.prototype.decryptChunk_=
function(a,b,c,d){return function(){var e=An(a,b,c);d.set(e,a.byteOffset)}};yn(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),gh=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=Kk.buildAbsoluteURL(e.location.href,a));return Kk.buildAbsoluteURL(a,b)},gk=function(a,b,c){return a&&c.responseURL&&b!==c.responseURL?c.responseURL:b},je=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},Ee=function(){function a(a,b){for(var c=0;c<
b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),up=function Q(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return Q(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},Qf=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},gf=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},vp=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),
h;!(d=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(Eg){e=!0,f=Eg}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),fk=K.mergeOptions,wn=K.log,Qi=function(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d])b(a.mediaGroups[c][d][e],c,d,e)})},Fn=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+
c);for(var e=c;e<b;e++)d[e-c]=fk(a[e],d[e-c]);return d},Ll=function(a,b){a=fk(a,{});var c=a.playlists[b.uri];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.endList===b.endList&&c.mediaSequence===b.mediaSequence)return null;var d=fk(c,b);c.segments&&(d.segments=Fn(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){var b=d.resolvedUri;a.resolvedUri||(a.resolvedUri=gh(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=gh(b,a.key.uri));
a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=gh(b,a.map.uri))});for(c=0;c<a.playlists.length;c++)a.playlists[c].uri===b.uri&&(a.playlists[c]=d);a.playlists[b.uri]=d;return a},Gn=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=gh(a.uri,c.uri);c.id=b;c.attributes||(c.attributes={},wn.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Hn=function(a){Qi(a,function(b){b.uri&&(b.resolvedUri=gh(a.uri,b.uri))})},In=function(a,
b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)},ai=function(a){function b(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};je(this,b);var e=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),f=d.withCredentials;d=d.handleManifestRedirects;e.srcUrl=a;e.hls_=c;e.withCredentials=void 0===f?!1:f;e.handleManifestRedirects=void 0===d?!1:d;f=c.options_;e.customTagParsers=f&&f.customTagParsers||[];e.customTagMappers=
f&&f.customTagMappers||[];if(!e.srcUrl)throw Error("A non-empty playlist URL is required");e.state="HAVE_NOTHING";e.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:gh(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(a,b){if(e.request){if(a)return e.playlistRequestError(e.request,e.media().uri,"HAVE_METADATA");e.haveMetadata(e.request,e.media().uri)}}))});return e}Qf(b,a);Ee(b,[{key:"playlistRequestError",
value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+b+".",responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var d=new el;this.customTagParsers.forEach(function(a){return d.addParser(a)});this.customTagMappers.forEach(function(a){return d.addTagMapper(a)});d.push(a.responseText);
d.end();d.manifest.uri=b;d.manifest.attributes=d.manifest.attributes||{};a=Ll(this.master,d.manifest);this.targetDuration=d.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[d.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout(function(){c.trigger("mediaupdatetimeout")},In(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();
e.clearTimeout(this.mediaUpdateTimeout);e.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}e.clearTimeout(this.finalRenditionTimeout);
if(b)b=a.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=e.setTimeout(this.media.bind(this,a,!1),b);else{var d=this.state;b=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,b&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(b){this.state="SWITCHING_MEDIA";if(this.request){if(a.resolvedUri===this.request.url)return;
this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,e){if(c.request){a.resolvedUri=gk(c.handleManifestRedirects,a.resolvedUri,e);if(b)return c.playlistRequestError(c.request,a.uri,d);c.haveMetadata(e,a.uri);"HAVE_MASTER"===d?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest();e.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=this;e.clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=e.setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},
{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.srcUrl+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");var d=new el;a.customTagParsers.forEach(function(a){return d.addParser(a)});a.customTagMappers.forEach(function(a){return d.addTagMapper(a)});
d.push(c.responseText);d.end();a.state="HAVE_MASTER";a.srcUrl=gk(a.handleManifestRedirects,a.srcUrl,c);d.manifest.uri=a.srcUrl;if(d.manifest.playlists)a.master=d.manifest,Gn(a.master),Hn(a.master),a.trigger("loadedplaylist"),a.request||a.media(d.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:a.srcUrl,id:0,resolvedUri:a.srcUrl,attributes:{}}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.haveMetadata(c,
a.srcUrl),a.trigger("loadedmetadata")}})}}]);return b}(K.EventTarget),Si=K.createTimeRange,wg=function(a,b){var c=0;b-=a.mediaSequence;var d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=d.duration;if("undefined"!==typeof d.start)return{result:c+d.start,precise:!0}}return{result:c,precise:!1}},
Ml=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;var d=wg(a,b);if(d.precise)return d.result;a:{var e=0;for(var f=b-a.mediaSequence;f<a.segments.length;f++){b=a.segments[f];if("undefined"!==typeof b.start){a=b.start-e;e=!0;break a}e+=b.duration;if("undefined"!==typeof b.end){a=b.end-e;e=!0;break a}}a=-1;e=!1}return e?a:d.result+c},Nl=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;
if(!a.endList)return e.Infinity}return Ml(a,b,c)},bi=function(a,b,c){var d=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)d+=a.targetDuration;b=0}for(;b<c;b++)d+=a.segments[b].duration;return d},nk=function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,d=c+2*a.targetDuration;b--&&!(c+=a.segments[b].duration,c>=d););return Math.max(0,b)},Ol=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return Nl(a);if(null===
b)return null;b=b||0;c=c?nk(a):a.segments.length;return Ml(a,a.mediaSequence+c,b)},Ti=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var e=Math.pow(10,d),f=b*e;if(0===f-Math.floor(f)||d===c)return(f+a)/e}},Jn=Ti.bind(null,1),Kn=Ti.bind(null,-1),Pl=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},Ui=function(a){return a.excludeUntil&&Infinity===a.excludeUntil},Ga=function(a){var b=Pl(a);return!a.disabled&&!b},lb=function(a,
b){return b.attributes&&b.attributes[a]},ci=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return Ga(a)?(a.attributes.BANDWIDTH||0)<c:!1}).length},ua={duration:Nl,seekable:function(a,b){var c=b||0;a=Ol(a,b,!0);return null===a?Si():Si(c,a)},safeLiveIndex:nk,getMediaInfoForTime:function(a,b,c,d){var e,f=a.segments.length,g=b-d;if(0>g){if(0<c)for(e=c-1;0<=e;e--){var h=a.segments[e];g+=Kn(h.duration);if(0<g)return{mediaIndex:e,
startTime:d-bi(a,c,e)}}return{mediaIndex:0,startTime:b}}if(0>c){for(e=c;0>e;e++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,startTime:b};c=0}for(e=c;e<f;e++)if(h=a.segments[e],g-=Jn(h.duration),0>g)return{mediaIndex:e,startTime:d+bi(a,c,e)};return{mediaIndex:f-1,startTime:b}},isEnabled:Ga,isDisabled:function(a){return a.disabled},isBlacklisted:Pl,isIncompatible:Ui,playlistEnd:Ol,isAes:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},isFmp4:function(a){for(var b=
0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1},hasAttribute:lb,estimateSegmentRequestTime:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return lb("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:ci},Ln=K.xhr,Bp=K.mergeOptions,Nn=function(){return function Q(a,b){a=Bp({timeout:45E3},a);var c=Q.beforeRequest||K.Hls.xhr.beforeRequest;c&&"function"===typeof c&&(c=c(a))&&(a=c);var d=Ln(a,function(a,c){var e=d.response;!a&&
e&&(d.responseTime=Date.now(),d.roundTripTime=d.responseTime-d.requestTime,d.bytesReceived=e.byteLength||e.length,d.bandwidth||(d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8E3)));c.headers&&(d.responseHeaders=c.headers);a&&"ETIMEDOUT"===a.code&&(d.timedout=!0);a||d.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(a=Error("XHR Failed with a response of: "+(d&&(e||d.responseText))));b(a,d)}),e=d.abort;d.abort=function(){d.aborted=!0;return e.apply(d,arguments)};d.uri=a.uri;
d.requestTime=Date.now();return d}},Ql=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},Cp=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},Dp=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Vi=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},Wi=function(a){var b=
a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Xi=function(a){a=Array.prototype.slice.call(a);for(var b="",c,d,e=0;e<a.length/16;e++)c=a.slice(16*e,16*e+16).map(Cp).join(""),d=a.slice(16*e,16*e+16).map(Dp).join(""),b+=c+" "+d+"\n";return b},Rl=Object.freeze({createTransferableMessage:Vi,initSegmentId:Wi,segmentKeyId:function(a){return a.resolvedUri},hexDump:Xi,tagDump:function(a){return Xi(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=
a;var e=c;d=d.start(e)+"-"+d.end(e);b+=d+" "}return b}}),Sl=function(a,b){var c=void 0;try{c=new Date(a)}catch(Ej){return null}if(!b||!b.segments||0===b.segments.length)return null;a=b.segments[0];if(c<a.dateTimeObject)return null;for(var d=0;d<b.segments.length-1&&!(a=b.segments[d],c<b.segments[d+1].dateTimeObject);d++);d=b.segments[b.segments.length-1];var e=d.dateTimeObject;if(d.videoTimingInfo){var f=d.videoTimingInfo;f=f.transmuxedPresentationEnd-f.transmuxedPresentationStart-f.transmuxerPrependedSeconds}else f=
d.duration+.25*d.duration;f=new Date(e.getTime()+1E3*f);if(c>f)return null;c>e&&(a=d);return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:ua.duration(b,b.mediaSequence+b.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"}},Tl=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c=0,d=void 0,e=0;e<b.segments.length&&!(d=b.segments[e],c=d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationEnd:c+d.duration,a<=c);e++);
b=b.segments[b.segments.length-1];if(b.videoTimingInfo&&b.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+.25*b.duration)return null;d=b}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:c-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},On=function(a,b){var c=void 0,d=void 0;try{c=new Date(a),d=new Date(b)}catch(na){}a=c.getTime();return(d.getTime()-a)/1E3},Ep=function(a){if(!a.segments||0===a.segments.length)return!1;
for(var b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0},Fp=function(a){var b=a.playlist,c=a.time;c=void 0===c?void 0:c;a=a.callback;if(!a)throw Error("getProgramTime: callback must be provided");if(!b||void 0===c)return a({message:"getProgramTime: playlist and time must be provided"});var d=Tl(c,b);if(!d)return a({message:"valid programTime was not found"});if("estimate"===d.type)return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:d.estimatedStart});b={mediaSeconds:c};d=d.segment;d.dateTimeObject?(c-=d.videoTimingInfo.transmuxedPresentationStart+d.videoTimingInfo.transmuxerPrependedSeconds,c=new Date(d.dateTimeObject.getTime()+1E3*c)):c=null;c&&(b.programDateTime=c.toISOString());return a(null,b)},Pn=function Pb(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo;d=a.pauseAfterSeek;var g=void 0===d?!0:d,h=a.tech,k=a.callback;if(!k)throw Error("seekToProgramTime: callback must be provided");
if("undefined"===typeof b||!c||!f)return k({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!h.hasStarted_)return k({message:"player must be playing a live stream to start buffering"});if(!Ep(c))return k({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});a=Sl(b,c);if(!a)return k({message:b+" was not found in the stream"});d=a.segment;var l=On(d.dateTimeObject,b);if("estimate"===a.type){if(0===e)return k({message:b+" is not buffered yet. Try again"});
f(a.estimatedStart+l);h.one("seeked",function(){Pb({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:g,tech:h,callback:k})})}else a=d.start+l,h.one("seeked",function(){return k(null,h.currentTime())}),g&&h.pause(),f(a)},xg=1/30,Fe=3*xg,Ul=function(a,b){var c=[],d;if(a&&a.length)for(d=0;d<a.length;d++)b(a.start(d),a.end(d))&&c.push([a.start(d),a.end(d)]);return K.createTimeRanges(c)},Vl=function(a,b){return Ul(a,function(a,c){return a-xg<=b&&c+xg>=b})},di=function(a,b){return Ul(a,function(a){return a-
xg>=b})},Wl=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},Gp=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((a.length?a.end(a.length-1):0)-b)/c},pk=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},ei=function(a,b,c){var d;if(c&&c.cues)for(d=c.cues.length;d--;){var e=c.cues[d];e.startTime<=b&&e.endTime>=a&&c.removeCue(e)}},Ip=function(a){Object.defineProperties(a.frame,
{id:{get:function(){K.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){K.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get:function(){K.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return a.value.data}}})},Qn=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a},yg=function(a,b,c){var d=e.WebKitDataCue||e.VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new d(a.startTime+
this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);if(c){var f=Qn(a.mediaSource_.duration);c.forEach(function(a){var b=a.cueTime+this.timestampOffset;!("number"!==typeof b||e.isNaN(b)||0>b)&&Infinity>b&&a.frames.forEach(function(a){var c=new d(b,b,a.value||a.url||a.data||"");c.frame=a;c.value=a;Ip(c);this.metadataTrack_.addCue(c)},this)},a);if(a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length){a=a.metadataTrack_.cues;b=[];for(c=0;c<a.length;c++)a[c]&&b.push(a[c]);
var g=b.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),h=Object.keys(g).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,b){var c=Number(h[b+1])||f;g[a].forEach(function(a){a.endTime=c})})}}},hf="undefined"!==typeof window?window:{},fi="undefined"===typeof Symbol?"__target":Symbol(),Rn=hf.BlobBuilder||hf.WebKitBlobBuilder||hf.MozBlobBuilder||hf.MSBlobBuilder,jh=hf.URL||hf.webkitURL||jh&&jh.msURL,kh=hf.Worker;if(kh){var Yi=pe("self.onmessage = function () {}"),
qk=new Uint8Array(1);try{var Zi=new kh(Yi);Zi.postMessage(qk,[qk.buffer])}catch(ja){kh=null}finally{jh.revokeObjectURL(Yi),Zi&&Zi.terminate()}}var Xl=new Qe("./transmuxer-worker.worker.js",function(a,b){var c=this;(function(){var a=Math.pow(2,32)-1,b,d,e,f,g,h,k,l,m,n,p,q,t,r,u,A;(function(){var a;e={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],
stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in e)e.hasOwnProperty(a)&&(e[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);f=new Uint8Array([105,115,111,109]);h=new Uint8Array([97,118,99,49]);g=new Uint8Array([0,0,0,1]);k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);l=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,
0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);m={video:k,audio:l};q=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);p=new Uint8Array([0,0,0,0,0,0,0,0]);r=t=new Uint8Array([0,0,0,0,0,0,0,0]);u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);A=t;n=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var w=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var e=new Uint8Array(c+8);(new DataView(e.buffer,e.byteOffset,
e.byteLength)).setUint32(0,e.byteLength);e.set(a,4);d=0;for(c=8;d<b.length;d++)e.set(b[d],c),c+=b[d].byteLength;return e};var z=function(){return w(e.dinf,w(e.dref,q))};var x=function(a){return w(e.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var Q=function(){return w(e.ftyp,f,g,f,h)};var B=function(a){return w(e.hdlr,m[a])};var F=function(a){var b=new Uint8Array([0,
0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return w(e.mdhd,b)};var y=function(a){return w(e.mdia,F(a),B(a.type),E(a))};var D=function(a){return w(e.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var E=function(a){return w(e.minf,"video"===a.type?w(e.vmhd,n):w(e.smhd,
p),z(),mb(a))};var H=function(a){for(var b=a.length,c=[];b--;)c[b]=M(a[b]);return w.apply(null,[e.moov,I(4294967295)].concat(c).concat(G(a)))};var G=function(a){for(var b=a.length,c=[];b--;)c[b]=Ia(a[b]);return w.apply(null,[e.mvex].concat(c))};var I=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return w(e.mvhd,a)};var v=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return w(e.sdtp,b)};var mb=function(a){return w(e.stbl,b(a),w(e.stts,A),w(e.stsc,r),w(e.stsz,u),w(e.stco,t))};(function(){b=function(b){return w(e.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===b.type?a(b):c(b))};var a=function(a){var b=a.sps||[],c=a.pps||[],d=[],f=[],g;for(g=
0;g<b.length;g++)d.push((b[g].byteLength&65280)>>>8),d.push(b[g].byteLength&255),d=d.concat(Array.prototype.slice.call(b[g]));for(g=0;g<c.length;g++)f.push((c[g].byteLength&65280)>>>8),f.push(c[g].byteLength&255),f=f.concat(Array.prototype.slice.call(c[g]));return w(e.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,
115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),w(e.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(d).concat([c.length]).concat(f))),w(e.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var c=function(a){return w(e.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),x(a))}})();var X=function(a){a=
new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return w(e.tkhd,a)};var ia=function(b){var c=w(e.tfhd,new Uint8Array([0,0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>
16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var f=Math.floor(b.baseMediaDecodeTime/(a+1));var g=Math.floor(b.baseMediaDecodeTime%(a+1));f=w(e.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255]));if("audio"===b.type)return b=d(b,92),w(e.traf,c,f,b);g=v(b);b=d(b,g.length+92);return w(e.traf,c,f,b,g)};var M=function(a){a.duration=a.duration||4294967295;return w(e.trak,X(a),y(a))};var Ia=function(a){var b=new Uint8Array([0,0,0,
0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return w(e.trex,b)};(function(){var a=function(a,b){var c=0,d=0,e=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|d|e|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>
8,b&255]};var b=function(b,c){var d;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&
4278190080)>>>24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return w(e.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return w(e.trun,new Uint8Array(c))};d=function(a,d){return"audio"===
a.type?c(a,d):b(a,d)}})();var za={ftyp:Q,mdat:function(a){return w(e.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=ia(b[d]);return w.apply(null,[e.moof,D(a)].concat(c))},moov:H,initSegment:function(a){var b=Q();a=H(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}},aa=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();
a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var e=c.length;for(d=0;d<e;++d)c[d].call(this,arguments[1])}else{var f=[];for(d=1;d<arguments.length;++d)f.push(arguments[d]);e=c.length;for(d=0;d<e;++d)c[d].apply(this,f)}};this.dispose=function(){a={}}}};aa.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};aa.prototype.push=function(a){this.trigger("data",a)};aa.prototype.flush=function(a){this.trigger("done",
a)};var W={groupNalsIntoFrames:function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var e=a[b];"access_unit_delimiter_rbsp"===e.nalUnitType?(c.length&&(c.duration=e.dts-c.dts,d.push(c)),c=[e],c.byteLength=e.data.byteLength,c.pts=e.pts,c.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(c.keyFrame=!0),c.duration=e.dts-c.dts,c.byteLength+=e.data.byteLength,c.push(e))}d.length&&(!c.duration||0>=c.duration)&&(c.duration=d[d.length-1].duration);d.push(c);return d},groupFramesIntoGops:function(a){var b,
c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var e=a[b];e.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[e],c.nalCount=e.length,c.byteLength=e.byteLength,c.pts=e.pts,c.dts=e.dts,c.duration=e.duration):(c.duration+=e.duration,c.nalCount+=e.length,c.byteLength+=e.byteLength,c.push(e))}d.length&&0>=c.duration&&
(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var c,d=b||0,e=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=f[c];var h={size:0,flags:{isLeading:0,dependsOn:1,
isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};h.dataOffset=d;h.compositionTimeOffset=g.pts-g.dts;h.duration=g.duration;h.size=4*g.length;h.size+=g.byteLength;g.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0);g=h;d+=g.size;e.push(g)}}return e},concatenateNalData:function(a){var b,c,d,e=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var h=a[b];for(c=0;c<h.length;c++){var k=h[c];for(d=0;d<k.length;d++){var l=k[d];g.setUint32(e,
l.data.byteLength);e+=4;f.set(l.data,e);e+=l.data.byteLength}}}return f}},ca=[33,16,5,32,164,27],$a=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],S=function(a){for(var b=[];a--;)b.push(0);return b},Pb=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[ca,[227,64],S(154),[56]],88200:[ca,[231],S(170),[56]],64E3:[ca,[248,192],S(240),[56]],48E3:[ca,[255,192],S(268),[55,148,128],S(54),[112]],44100:[ca,[255,192],
S(268),[55,163,128],S(84),[112]],32E3:[ca,[255,192],S(268),[55,234],S(226),[112]],24E3:[ca,[255,192],S(268),[55,255,128],S(268),[111,112],S(126),[224]],16E3:[ca,[255,192],S(268),[55,255,128],S(268),[111,255],S(269),[223,108],S(195),[1,192]],12E3:[$a,S(268),[3,127,248],S(268),[6,255,240],S(268),[13,255,224],S(268),[27,253,128],S(259),[56]],11025:[$a,S(268),[3,127,248],S(268),[6,255,240],S(268),[13,255,224],S(268),[27,255,192],S(268),[55,175,128],S(108),[112]],8E3:[$a,S(268),[3,121,16],S(47),[7]]});
var Ta=function(a){return 9E4*a};var ja=function(a,b){return a*b};var U=function(a){return a/9E4};var Kb=function(a,b){return a/b};var Ud={secondsToVideoTs:Ta,secondsToAudioTs:ja,videoTsToSeconds:U,audioTsToSeconds:Kb,audioTsToVideoTs:function(a,b){return Ta(Kb(a,b))},videoTsToAudioTs:function(a,b){return ja(U(a),b)}},Da={prefixWithSilence:function(a,b,c,d){var e,f=e=0;if(b.length){var g=Ud.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var h=Math.ceil(9E4/(a.samplerate/1024));c&&d&&(e=g-Math.max(c,
d),e=Math.floor(e/h),f=e*h);if(!(1>e||45E3<f)){h=Pb[a.samplerate];h||(h=b[0].data);for(c=0;c<e;c++)b.splice(c,0,{data:h});a.baseMediaDecodeTime-=Math.floor(Ud.videoTsToAudioTs(f,a.samplerate))}}},trimAdtsFramesByEarliestDts:function(a,b,c){if(b.minSegmentDts>=c)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1})},generateSampleTable:function(a){var b,c=[];for(b=0;b<a.length;b++){var d=
a[b];c.push({size:d.data.byteLength,duration:1024})}return c},concatenateFrameData:function(a){var b,c=0;var d=Uint8Array;var e=0;for(b=0;b<a.length;b++){var f=a[b];e+=f.data.byteLength}f=new d(e);for(d=0;d<a.length;d++)b=a[d],f.set(b.data,c),c+=b.data.byteLength;return f}},Z={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,b){var c=a.minSegmentDts;b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;
b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:
Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},Ba={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;e+=a[b++];if(!c.payload&&4===d){c.payloadType=d;c.payloadSize=e;c.payload=a.subarray(b,b+e);break}b+=e;e=d=0}return c},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==
String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var e=b[0]&31;for(d=0;d<e;d++){var f=3*d;var g={type:b[f+2]&3,pts:a};b[f+2]&4&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=
c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e},USER_DATA_REGISTERED_ITU_T_T35:4};ca=function Zp(){Zp.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new R(0,0),new R(0,1),new R(1,0),new R(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};ca.prototype=new aa;ca.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=
Ba.parseSei(a.escapedRBSP);b.payloadType===Ba.USER_DATA_REGISTERED_ITU_T_T35&&(b=Ba.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=Ba.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};ca.prototype.flush=function(){this.captionPackets_.length?
(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};ca.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=
[null,null];this.ccStreams_.forEach(function(a){a.reset()})};ca.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};ca.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};ca.prototype.setsChannel2Active=
function(a){return 6144===(a.ccData&30720)};ca.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var la={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,
559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ea=function(a){if(null===a)return"";a=la[a]||a;return String.fromCharCode(a)},Za=[4352,4384,4608,4640,5376,
5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],uc=function(){for(var a=[],b=15;b--;)a.push("");return a},R=function im(a,b){im.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var c=b>>>8;var d=b&255;
b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=uc()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=uc():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=uc()),
this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=ea((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=ea((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,
["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=Za.indexOf(b&7968),"rollUp"===this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===d&&
(d=null),b=ea(c),b+=ea(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};R.prototype=new aa;R.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(gr){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};R.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=uc();this.nonDisplayed_=
uc();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};R.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|
38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};R.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};R.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};R.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=
b&&47>=b};R.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};R.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};R.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};R.prototype.isNormalChar=function(a){return 32<=a&&127>=a};R.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=uc(),this.displayed_=uc());if(void 0!==b&&b!==this.row_)for(a=
0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};R.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};R.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,
b)}};R.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};R.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};R.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};R.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};$a=R;var Ya={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},
Ka=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a};S=function im(a){var b,c;im.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=Ka(a.dts,c),a.pts=Ka(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};S.prototype=new aa;var Na=function(a,b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},
K=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},xb={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Na(a.data,1,b));a.value=decodeURIComponent(Na(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Na(a.data,1,b));a.url=decodeURIComponent(Na(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;
for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(Na(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var Ca=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,d=[],e=0,f;Ca.prototype.init.call(this);this.dispatchType=Ya.METADATA_STREAM_TYPE.toString(16);if(a)for(f=0;f<a.length;f++)this.dispatchType+=("00"+a[f].toString(16)).slice(-2);this.push=function(a){var f;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(e=0,d.length=0),0===d.length&&
(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(d.push(a),e+=a.data.byteLength,1===d.length&&(c=K(a.data.subarray(6,10)),c+=10),!(e<c)){a={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts};for(f=0;f<c;)a.data.set(d[0].data.subarray(0,c-f),f),f+=d[0].data.byteLength,e-=d[0].data.byteLength,d.shift();f=10;a.data[5]&64&&(f=f+4+K(a.data.subarray(10,14)),c-=K(a.data.subarray(16,20)));do{var g=K(a.data.subarray(f+
4,f+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var h=String.fromCharCode(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]);h={id:h,data:a.data.subarray(f+10,f+g+10)};h.key=h.id;if(xb[h.id]&&(xb[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var k=h.data,l=(k[3]&1)<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;l*=4;l+=k[7]&3;h.timeStamp=l;void 0===a.pts&&void 0===a.dts&&(a.pts=h.timeStamp,a.dts=h.timeStamp);this.trigger("timestamp",h)}a.frames.push(h);
f+=10;f+=g}while(f<c);this.trigger("data",a)}}};Ca.prototype=new aa;var Aa=function(){var a=new Uint8Array(188),b=0;Aa.prototype.init.call(this);this.push=function(c){var d=0,e=188;if(b){var f=new Uint8Array(c.byteLength+b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;e<f.byteLength;)71===f[d]&&71===f[e]?(this.trigger("data",f.subarray(d,e)),d+=188,e+=188):(d++,e++);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),
b=0);this.trigger("done")}};Aa.prototype=new aa;var Ra=function(){Ra.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var e=0;b.payloadUnitStartIndicator&&(e+=a[e]+1);"pat"===b.type?c(a.subarray(e),b):d(a.subarray(e),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};
var e=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<e;){var f=b[d],g=(b[d+1]&31)<<8|b[d+2];f===Ya.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:f===Ya.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:f===Ya.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=f);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=
8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?Ya.H264_STREAM_TYPE:c.pid===
this.programMapTable.audio?Ya.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};Ra.prototype=new aa;Ra.STREAM_TYPES={h264:27,adts:15};var ba=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},e=function(b,c,d){var e=new Uint8Array(b.size),f={type:c},g,h=0;if(b.data.length&&!(9>b.size)){f.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var k=b.data[g];e.set(k.data,h);h+=k.data.byteLength}f.packetLength=
6+(e[4]<<8|e[5]);f.dataAlignmentIndicator=0!==(e[6]&4);g=e[7];g&192&&(f.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3,f.pts*=4,f.pts+=(e[13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3,f.dts*=4,f.dts+=(e[18]&6)>>>1));f.data=e.subarray(9+e[8]);c="video"===c||f.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",f)}};ba.prototype.init.call(this);this.push=function(f){({pat:function(){},
pes:function(){switch(f.streamType){case Ya.H264_STREAM_TYPE:case Ya.H264_STREAM_TYPE:var a=b;var g="video";break;case Ya.ADTS_STREAM_TYPE:a=c;g="audio";break;case Ya.METADATA_STREAM_TYPE:a=d;g="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&e(a,g,!0);a.data.push(f);a.size+=f.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=f.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==
c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[f.type]()};this.flush=function(){e(b,"video");e(c,"audio");e(d,"timed-metadata");this.trigger("done")}};ba.prototype=new aa;var O={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Aa,TransportParseStream:Ra,ElementaryStream:ba,TimestampRolloverStream:S,CaptionStream:ca,Cea608Stream:$a,MetadataStream:Ca},sa;for(sa in Ya)Ya.hasOwnProperty(sa)&&(O[sa]=Ya[sa]);var ya=
[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Rb=function(){var a;Rb.prototype.init.call(this);this.push=function(b){var c=0,d=0;if("audio"===b.type){if(a){var e=a;a=new Uint8Array(e.byteLength+b.data.byteLength);a.set(e);a.set(b.data,e.byteLength)}else a=b.data;for(;c+5<a.length;)if(255!==a[c]||240!==(a[c+1]&246))c++;else{e=2*(~a[c+1]&1);var f=(a[c+3]&3)<<11|a[c+4]<<3|(a[c+5]&224)>>5;var g=1024*((a[c+6]&3)+1);var h=9E4*g/ya[(a[c+2]&60)>>>2];f=c+f;if(a.byteLength<f)break;
this.trigger("data",{pts:b.pts+d*h,dts:b.dts+d*h,sampleCount:g,audioobjecttype:(a[c+2]>>>6&3)+1,channelcount:(a[c+2]&1)<<2|(a[c+3]&192)>>>6,samplerate:ya[(a[c+2]&60)>>>2],samplingfrequencyindex:(a[c+2]&60)>>>2,samplesize:16,data:a.subarray(c+7+e,f)});if(a.byteLength===f){a=void 0;break}d++;a=a.subarray(f)}}};this.flush=function(){this.trigger("done")}};Rb.prototype=new aa;var vb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+d};this.loadWord=
function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");f.set(a.subarray(e,e+g));c=(new DataView(f.buffer)).getUint32(0);d=8*g;b-=g};this.skipBits=function(a){if(!(d>a)){a-=d;var e=Math.floor(a/8);a-=8*e;b-=e;this.loadWord()}c<<=a;d-=a};this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;d-=e;0<d?c<<=e:0<b&&this.loadWord();e=a-e;return 0<e?f<<e|this.readBits(e):f};this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>
a))return c<<=a,d-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};
this.loadWord()};var Qa=function(){var a=0,b,c;Qa.prototype.init.call(this);this.push=function(d){if(c){var e=new Uint8Array(c.byteLength+d.data.byteLength);e.set(c);e.set(d.data,c.byteLength);c=e}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=
3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};Qa.prototype=new aa;var P={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Nc=function(){var a=new Qa,b,c,d;Nc.prototype.init.call(this);var e=this;this.push=function(e){"video"===e.type&&(b=e.trackId,c=e.pts,d=e.dts,a.push(e))};a.on("data",function(a){var f=
{trackId:b,pts:c,dts:d,data:a};switch(a[0]&31){case 5:f.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:f.nalUnitType="sei_rbsp";f.escapedRBSP=g(a.subarray(1));break;case 7:f.nalUnitType="seq_parameter_set_rbsp";f.escapedRBSP=g(a.subarray(1));f.config=h(f.escapedRBSP);break;case 8:f.nalUnitType="pic_parameter_set_rbsp";break;case 9:f.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",f)});a.on("done",function(){e.trigger("done")});this.flush=function(){a.flush()};var f=
function(a,b){var c=8,d=8,e;for(e=0;e<a;e++)0!==d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var g=function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e};var h=function(a){var b=0,c=0,d=0,e=0,g=1;a=new vb(a);var h=a.readUnsignedByte();var k=a.readUnsignedByte();var l=a.readUnsignedByte();a.skipUnsignedExpGolomb();
if(P[h]){var m=a.readUnsignedExpGolomb();3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var n=3!==m?8:12;for(m=0;m<n;m++)a.readBoolean()&&(6>m?f(16,a):f(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),n=a.readUnsignedExpGolomb(),m=0;m<n;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);m=a.readUnsignedExpGolomb();
n=a.readUnsignedExpGolomb();var p=a.readBits(1);0===p&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),c=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var q=a.readUnsignedByte();switch(q){case 1:var t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=
[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}t&&(g=t[0]/t[1])}return{profileIdc:h,levelIdc:l,profileCompatibility:k,width:Math.ceil((16*(m+1)-2*b-2*c)*g),height:(2-p)*(n+1)*16-2*d-2*e}}};Nc.prototype=new aa;var Nd=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],fa=function(a){return a[0]<<
21|a[1]<<14|a[2]<<7|a[3]},T={isLikelyAacData:function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;
else return Nd[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+fa(a.subarray(10,14)));do{var c=fa(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){var f=unescape,g,h=d,k=e,l="";for(g=0;g<k;g++)l+="%"+("00"+h[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(l))return a=d.subarray(e+1),b=(a[3]&1)<<30|a[4]<<22|
a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}};var yb=function(){var a=new Uint8Array,b=0;yb.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.push=function(c){var d=0;if(a.length){var e=a.length;a=new Uint8Array(c.byteLength+e);a.set(a.subarray(0,e));a.set(c,e)}else a=c;for(;3<=a.length-d;)if(73===a[d]&&68===a[d+1]&&51===a[d+2]){if(10>a.length-d)break;c=T.parseId3TagSize(a,d);if(d+c>a.length)break;e={type:"timed-metadata",data:a.subarray(d,
d+c)};this.trigger("data",e);d+=c}else if(255===(a[d]&255)&&240===(a[d+1]&240)){if(7>a.length-d)break;c=T.parseAdtsSize(a,d);if(d+c>a.length)break;e={type:"audio",data:a.subarray(d,d+c),pts:b,dts:b};this.trigger("data",e);d+=c}else d++;a=0<a.length-d?a.subarray(d):new Uint8Array}};yb.prototype=new aa;var Ea=T.isLikelyAacData,zf=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gc=["width","height","profileIdc","levelIdc","profileCompatibility"],V=function(a,b){var c;
if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Vd=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};var gb=function(a,b){var c=[],d=0,e=0,f=0,g=Infinity;b=b||{};gb.prototype.init.call(this);this.push=function(b){Z.collectDtsInfo(a,b);a&&zf.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){e=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=
function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var h=Da.trimAdtsFramesByEarliestDts(c,a,e);a.baseMediaDecodeTime=Z.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);Da.prefixWithSilence(a,h,f,g);a.samples=Da.generateSampleTable(h);var k=za.mdat(Da.concatenateFrameData(h));c=[];h=za.moof(d,[a]);var l=new Uint8Array(h.byteLength+k.byteLength);d++;l.set(h);l.set(k,h.byteLength);Z.clearDtsInfo(a);this.trigger("data",{track:a,boxes:l})}this.trigger("done",
"AudioSegmentStream")}};gb.prototype=new aa;var Cc=function(a,b){var c=0,d=[],e=[],f,g;b=b||{};Cc.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){Z.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||f||(f=b.config,a.sps=[b.data],gc.forEach(function(b){a[b]=f[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);d.push(b)};this.flush=function(){var f;var g=0;for(var h,k;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();
if(0!==d.length){var l=W.groupNalsIntoFrames(d);l=W.groupFramesIntoGops(l);l[0][0].keyFrame||((f=this.getGopForFusion_(d[0],a))?(g=f.duration,l.unshift(f),l.byteLength+=f.byteLength,l.nalCount+=f.nalCount,l.pts=f.pts,l.dts=f.dts,l.duration+=f.duration):l=W.extendFirstKeyFrame(l));if(e.length){f=b.alignGopsAtEnd?this.alignGopsAtEnd_(l):this.alignGopsAtStart_(l);if(!f){this.gopCache_.unshift({gop:l.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();
this.trigger("done","VideoSegmentStream");return}Z.clearDtsInfo(a);l=f}Z.collectDtsInfo(a,l);a.samples=W.generateSampleTable(l);f=za.mdat(W.concatenateNalData(l));a.baseMediaDecodeTime=Z.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",l.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));h=l[0];k=l[l.length-1];this.trigger("segmentTimingInfo",Vd(a.baseMediaDecodeTime,h.dts,h.pts,k.dts+k.duration,k.pts+k.duration,g));this.gopCache_.unshift({gop:l.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=za.moof(c,[a]);l=new Uint8Array(g.byteLength+f.byteLength);c++;l.set(g);l.set(f,g.byteLength);this.trigger("data",{track:a,boxes:l})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){Z.clearDtsInfo(a);g=f=void 0};this.getGopForFusion_=function(b){var c=Infinity,
d;for(d=0;d<this.gopCache_.length;d++){var e=this.gopCache_[d];var f=e.gop;if(a.pps&&V(a.pps[0],e.pps[0])&&a.sps&&V(a.sps[0],e.sps[0])&&!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=e;c=f}}return g?g.gop:null};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var f=a.nalCount;var g=a.duration;for(b=c=0;b<e.length&&c<a.length;){var h=e[b];var k=a[c];if(h.pts===k.pts)break;k.pts>h.pts?b++:(c++,d-=k.byteLength,f-=k.nalCount,g-=k.duration)}if(0===
c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=e.length-1;var d=a.length-1;var f=null;for(b=!1;0<=c&&0<=d;){var g=e[c];var h=a[d];if(g.pts===h.pts){b=!0;break}g.pts>h.pts?c--:(c===e.length-1&&(f=d),d--)}if(!b&&null===f)return null;c=b?d:f;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},
{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){e=a}};Cc.prototype=new aa;var jb=function(a,b){this.numberOfTracks=0;this.metadataStream=b;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;"boolean"===typeof a.keepOriginalTimestamps&&(this.keepOriginalTimestamps=a.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];
this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;jb.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};jb.prototype=new aa;jb.prototype.flush=function(a){var b=0,c={captions:[],
captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,gc.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,zf.forEach(function(a){c.info[a]=
this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=za.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts,this.keepOriginalTimestamps||
(b.startTime-=d),b.startTime/=9E4,b.endTime=b.endPts,this.keepOriginalTimestamps||(b.endTime-=d),b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts,this.keepOriginalTimestamps||(b.cueTime-=d),b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=
0;this.pendingMetadata.length=0;this.trigger("data",c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var Y=function(a){var b=this,c=!0,d,e;Y.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="aac";c.metadataStream=new O.MetadataStream;c.aacStream=new yb;c.audioTimestampRolloverStream=new O.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=
new O.TimestampRolloverStream("timed-metadata");c.adtsStream=new Rb;c.coalesceStream=new jb(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(d){"timed-metadata"!==d.type||c.audioSegmentStream||(e=e||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new gb(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new O.MetadataStream;c.packetStream=new O.TransportPacketStream;c.parseStream=new O.TransportParseStream;c.elementaryStream=new O.ElementaryStream;
c.videoTimestampRolloverStream=new O.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new O.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new O.TimestampRolloverStream("timed-metadata");c.adtsStream=new Rb;c.h264Stream=new Nc;c.captionStream=new O.CaptionStream;c.coalesceStream=new jb(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);
c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)d||"video"!==f.tracks[g].type?e||"audio"!==f.tracks[g].type||(e=f.tracks[g],e.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(d=f.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new Cc(d,a),c.videoSegmentStream.on("timelineStartInfo",function(a){e&&(e.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){e&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),
c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));e&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new gb(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=b);e&&(e.timelineStartInfo.dts=void 0,
e.timelineStartInfo.pts=void 0,Z.clearDtsInfo(e),a.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=b),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());d&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,Z.clearDtsInfo(d),c.captionStream.reset(),a.keepOriginalTimestamps||(d.timelineStartInfo.baseMediaDecodeTime=b));c.timedMetadataTimestampRolloverStream&&
c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=Ea(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};
this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};Y.prototype=new aa;var ha=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Xa=function(a,b){b.on("data",function(b){var c=
b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};c=b.data;b.data=c.buffer;a.postMessage({action:"data",segment:b,byteOffset:c.byteOffset,byteLength:c.byteLength},[b.data])});if(b.captionStream)b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})});b.on("done",function(b){a.postMessage({action:"done"})});b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})});b.on("videoSegmentTimingInfo",function(b){a.postMessage({action:"videoSegmentTimingInfo",
videoSegmentTimingInfo:b})})},ma=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=c||{};this.self=b;this.init()}ha(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new Y(this.options);Xa(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",
value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return a}();return new function(a){a.onmessage=function(b){if("init"===
b.data.action&&b.data.options)this.messageHandlers=new ma(a,b.data.options);else if(this.messageHandlers||(this.messageHandlers=new ma(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action])this.messageHandlers[b.data.action](b.data)}}(c)})()}),rk={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Yl=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);
return"avc1."+a+"00"+c})})},gi=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b={codecCount:0},c;b.codecCount=a.split(",").length;b.codecCount=b.codecCount||2;if(c=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(a))b.videoCodec=c[2],b.videoObjectTypeIndicator=c[3];b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);b.audioProfile=b.audioProfile&&b.audioProfile[2];return b},Sn=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return Yl([a])[0]})},sk=function(a,
b,c){return a+"/"+b+'; codecs="'+c.filter(function(a){return!!a}).join(", ")+'"'},Tn=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;a=a.mediaGroups.AUDIO[b];if(!a)return null;for(var c in a)if(b=a[c],b["default"]&&b.playlists)return gi(b.playlists[0].attributes.CODECS).audioProfile;return null},Un=function(a){var b={type:"",parameters:{}};a=a.trim().split(";");b.type=a.shift().trim();a.forEach(function(a){var c=a.trim().split("=");1<c.length&&(a=c[0].replace(/"/g,"").trim(),c=c[1].replace(/"/g,
"").trim(),b.parameters[a]=c)});return b},Zl=function(a,b,c){if("undefined"===typeof b||null===b||!a.length)return[];b=Math.ceil(9E4*(b-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)},tk=function(a,b,c){var d=null,e=null,f=0,g=[],h=[];if(!a&&!b)return K.createTimeRange();if(!a)return b.buffered;if(!b||c)return a.buffered;if(0===a.buffered.length&&0===b.buffered.length)return K.createTimeRange();a=a.buffered;b=b.buffered;for(c=a.length;c--;)g.push({time:a.start(c),type:"start"}),g.push({time:a.end(c),
type:"end"});for(c=b.length;c--;)g.push({time:b.start(c),type:"start"}),g.push({time:b.end(c),type:"end"});g.sort(function(a,b){return a.time-b.time});for(c=0;c<g.length;c++)"start"===g[c].type?(f++,2===f&&(d=g[c].time)):"end"===g[c].type&&(f--,1===f&&(e=g[c].time)),null!==d&&null!==e&&(h.push([d,e]),e=d=null);return K.createTimeRanges(h)},Vn=function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);d.updating=!1;d.realBuffer_=c;a=function(a){"function"===typeof c[a]?d[a]=function(){return c[a].apply(c,
arguments)}:"undefined"===typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var e in c)a(e);return d},Wn=function(a){function b(a,c){je(this,b);var d=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,K.EventTarget));d.timestampOffset_=0;d.pendingBuffers_=[];d.bufferUpdating_=!1;d.mediaSource_=a;d.codecs_=c;d.audioCodec_=null;d.videoCodec_=null;d.audioDisabled_=!1;d.appendAudioInitSegment_=!0;d.gopBuffer_=[];d.timeMapping_=0;d.safeAppend_=
11<=K.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:d.safeAppend_};d.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?d.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(d.videoCodec_=a)});d.transmuxer_=new Xl;d.transmuxer_.postMessage({action:"init",options:a});d.transmuxer_.onmessage=function(a){if("data"===a.data.action)return d.data_(a);if("done"===a.data.action)return d.done_(a);if("gopInfo"===a.data.action)return d.appendGopInfo_(a);if("videoSegmentTimingInfo"===a.data.action)return d.videoSegmentTimingInfo_(a.data.videoSegmentTimingInfo)};
Object.defineProperty(d,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(d,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=
a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(d,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(d,"buffered",{get:function(){return tk(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return d}Qf(b,a);Ee(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,
a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var c in b.captionStreams)if(!this.inbandTextTracks_[c]){a.tech_.trigger({type:"usage",name:"hls-608"});var d=a.textTracks().getTrackById(c);this.inbandTextTracks_[c]=d?d:a.addRemoteTextTrack({kind:"captions",id:c,label:c},!1).track}}b.metadata&&b.metadata.length&&
!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"videoSegmentTimingInfo_",value:function(a){var b={start:{decode:a.start.dts/9E4,presentation:a.start.pts/9E4},end:{decode:a.end.dts/9E4,presentation:a.end.pts/
9E4},baseMediaDecodeTime:a.baseMediaDecodeTime/9E4};a.prependedContentDuration&&(b.prependedContentDuration=a.prependedContentDuration/9E4);this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?(d=a.mediaSource_[c+"Buffer_"],d.updating=!1):(d=Vn(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+
'"'),a.mediaSource_[c+"Buffer_"]=d);a[c+"Buffer_"]=d;["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===e&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(e)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;
this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Zl(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=
this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var c=a[0].pts,d=0;for(d;d<b.length&&!(b[d].pts>=c);d++);b=b.slice(0,d).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,b);var c=this.gopBuffer_,d=this.timeMapping_,e=Math.ceil(9E4*(a-d)),f=Math.ceil(9E4*(b-d));d=c.slice();for(var g=c.length;g--&&!(c[g].pts<=f););if(-1!==g){for(f=g+1;f--&&!(c[f].pts<=e););f=Math.max(f,0);d.splice(f,
g-f+1)}this.gopBuffer_=d}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));ei(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var h in this.inbandTextTracks_)ei(a,b,this.inbandTextTracks_[h])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,e=b.initSegment;a[c].segments.push(d);a[c].bytes+=
d.byteLength;a[c].initSegment=e;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&
(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);yg(this,a.captions,a.metadata);!this.audioDisabled_&&this.audioBuffer_&&
this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes);a.segments.forEach(function(a){d.set(a,c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(Dg){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:Dg.message,originalError:Dg})}}}},{key:"abort",
value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return b}(K.EventTarget),uk=function(a){function b(){je(this,b);var a=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),c=void 0;a.nativeMediaSource_=new e.MediaSource;for(c in a.nativeMediaSource_)c in b.prototype||"function"!==typeof a.nativeMediaSource_[c]||
(a[c]=a.nativeMediaSource_[c].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(a,"seekable",{get:function(){return Infinity===this.duration_?K.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",
{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,d=!0;for(b=0;b<a.player_.audioTracks().length;b++){var e=a.player_.audioTracks()[b];
if(e.enabled&&"main"!==e.kind){c=!0;d=!1;break}}a.sourceBuffers.forEach(function(b,e){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,d=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=e?d:!d,b.audioDisabled_))return;a.activeSourceBuffers_.push(b)})}};a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&
a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a);a.on("sourceopen",function(b){if(b=f.querySelector('[src="'+a.url_+'"]'))a.player_=K(b.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",
a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))});a.on("sourceended",function(b){b=Qn(a.duration);for(var c=0;c<a.sourceBuffers.length;c++){var d=a.sourceBuffers[c];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&
(d[d.length-1].endTime=b)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",
this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return a}Qf(b,a);Ee(b,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=
b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=Un(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=Yl(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new Wn(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);
this.sourceBuffers.push(b);return b}}]);return b}(K.EventTarget),$l=0;K.mediaSources={};var $i=function(a,b){if(a=K.mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");},zg=function(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},jf=function(){this.MediaSource={open:$i,supportsNativeMediaSources:zg};if(zg())return new uk;throw Error("Cannot use create a virtual MediaSource for this video");
};jf.open=$i;jf.supportsNativeMediaSources=zg;var Xn={createObjectURL:function(a){if(a instanceof uk){var b=e.URL.createObjectURL(a.nativeMediaSource_);return a.url_=b}if(!(a instanceof uk))return b=e.URL.createObjectURL(a),a.url_=b;b="blob:vjs-media-source/"+$l;$l++;K.mediaSources[b]=a;return b}};K.MediaSource=jf;K.URL=Xn;var am=K.mergeOptions,Yn=function(a,b){var c=void 0,d=am(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod});for(a=0;a<b.playlists.length;a++){var e=Ll(d,b.playlists[a]);
e?d=e:c=!0}Qi(b,function(a,b,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].uri;if(a=Ll(d,a.playlists[0]))d=a,d.mediaGroups[b][e][f].playlists[0]=d.playlists[g],c=!1}});return c?null:d},vk=function(a){return a.uri+"-"+a.byterange.offset+"-"+(a.byterange.offset+a.byterange.length-1)},bm=function(a,b){var c={},d;for(d in a){var e=a[d].sidx;if(e){var f=vk(e);if(!b[f])break;var g=b[f].sidxInfo;(!g.map&&!e.map||g.map&&e.map&&g.map.byterange.offset===e.map.byterange.offset&&g.map.byterange.length===
e.map.byterange.length)&&g.uri===e.uri&&g.byterange.offset===e.byterange.offset&&g.byterange.length===e.byterange.length&&(c[f]=b[f])}}return c},Zn=function(a,b,c,d){a=sg(a,{manifestUri:b,clientOffset:c});var e=bm(a.playlists,d);Qi(a,function(a,b,c,f){a.playlists&&a.playlists.length&&(e=am(e,bm(a.playlists,d)))});return e},$n=function(a,b,c,d,e){a={uri:gk(d.handleManifestRedirects,a.resolvedUri),byterange:a.byterange,playlist:b};a=K.mergeOptions(a,{responseType:"arraybuffer",headers:Ql(a)});return c(a,
e)},cm=function(a){function b(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=arguments[3];je(this,b);var f=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),g=d.withCredentials;d=d.handleManifestRedirects;f.hls_=c;f.withCredentials=void 0===g?!1:g;f.handleManifestRedirects=void 0===d?!1:d;if(!a)throw Error("A non-empty playlist URL or playlist is required");f.on("minimumUpdatePeriod",function(){f.refreshXml_()});f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().uri)});
f.state="HAVE_NOTHING";f.loadedPlaylists_={};if("string"===typeof a)return f.srcUrl=a,f.sidxMapping_={},gf(f);f.setupChildLoader(e,a);return f}Qf(b,a);Ee(b,[{key:"setupChildLoader",value:function(a,b){this.masterPlaylistLoader_=a;this.childPlaylist_=b}},{key:"dispose",value:function(){this.stopRequest();this.loadedPlaylists_={};e.clearTimeout(this.minimumUpdatePeriodTimeout_);e.clearTimeout(this.mediaRequest_);e.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||
this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"sidxRequestFinished_",value:function(a,b,c,d){var e=this;return function(f,g){if(e.request){e.request=null;if(f)return e.error={status:g.status,message:"DASH playlist request error at URL: "+a.uri,response:g.response,code:2},c&&(e.state=c),e.trigger("error"),d(b,null);f=new Uint8Array(g.response);f=Sj.parseSidx(f.subarray(8));return d(b,f)}}}},
{key:"media",value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(d&&this.loadedPlaylists_[a.uri]&&this.loadedPlaylists_[a.uri].endList)this.state="HAVE_METADATA",this.media_=a,d&&(this.trigger("mediachanging"),this.trigger("mediachange"));
else if(d)if(this.media_&&this.trigger("mediachanging"),a.sidx){var f=d=void 0;this.masterPlaylistLoader_?(d=this.masterPlaylistLoader_.master,f=this.masterPlaylistLoader_.sidxMapping_):(d=this.master,f=this.sidxMapping_);var g=vk(a.sidx);f[g]={sidxInfo:a.sidx};this.request=$n(a.sidx,a,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(a,d,c,function(d,e){if(!d||!e)throw Error("failed to request sidx");f[g].sidx=e;b.haveMetadata({startingState:c,playlist:d.playlists[a.uri]})}))}else this.mediaRequest_=
e.setTimeout(this.haveMetadata.bind(this,{startingState:c,playlist:a}),0)}},{key:"haveMetadata",value:function(a){var b=a.startingState;a=a.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[a.uri]=a;this.mediaRequest_=null;this.refreshMedia_(a.uri);"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest();e.clearTimeout(this.mediaUpdateTimeout);e.clearTimeout(this.minimumUpdatePeriodTimeout_);"HAVE_NOTHING"===this.state&&
(this.started=!1)}},{key:"load",value:function(a){var b=this;e.clearTimeout(this.mediaUpdateTimeout);e.clearTimeout(this.minimumUpdatePeriodTimeout_);var c=this.media();a?this.mediaUpdateTimeout=e.setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=sg(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var b=
0;b<a.playlists.length;b++){var c="placeholder-uri-"+b;a.playlists[b].uri=c;a.playlists[c]=a.playlists[b]}Qi(a,function(b,c,d,e){b.playlists&&b.playlists.length&&(c="placeholder-uri-"+c+"-"+d+"-"+e,b.playlists[0].uri=c,a.playlists[c]=b.playlists[0])});Gn(a);Hn(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.masterPlaylistLoader_?this.mediaRequest_=e.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},
function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;a.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now();a.srcUrl=gk(a.handleManifestRedirects,a.srcUrl,c);a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",
value:function(a){var b=this,c=Rj(ml(this.masterXml_));if(null===c)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===c.method)return this.clientOffset_=c.value-Date.now(),a();this.request=this.hls_.xhr({uri:gh(this.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.clientOffset_=b.masterLoaded_-Date.now(),a();d="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:
Date.parse(e.responseText);b.clientOffset_=d-Date.now();a()}})}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER";this.mediaRequest_=null;this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var a=this;this.haveMaster_();this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]);this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=
e.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;a.sidxMapping_=Zn(a.masterXml_,
a.srcUrl,a.clientOffset_,a.sidxMapping_);b=a.parseMasterXml();if(c=Yn(a.master,b)){var d=vk(a.media().sidx);a.sidxMapping_[d]?a.master=c:(c=a.media(),a.request=$n(c.sidx,c,a.hls_.xhr,{handleManifestRedirects:a.handleManifestRedirects},a.sidxRequestFinished_(c,b,a.state,function(b,c){if(!b||!c)throw Error("failed to request sidx on minimumUpdatePeriod");a.sidxMapping_[d].sidx=c;a.minimumUpdatePeriodTimeout_=e.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod);a.refreshMedia_(a.media().uri)})))}a.minimumUpdatePeriodTimeout_=
e.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(a){var b=this;if(!a)throw Error("refreshMedia_ must take a media uri");var c=void 0,d=void 0;this.masterPlaylistLoader_?(c=this.masterPlaylistLoader_.master,d=this.masterPlaylistLoader_.parseMasterXml()):(c=this.master,d=this.parseMasterXml());(c=Yn(c,d))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=c:this.master=c,this.media_=c.playlists[a]):(this.media_=
d.playlists[a],this.trigger("playlistunchanged"));this.media().endList||(this.mediaUpdateTimeout=e.setTimeout(function(){b.trigger("mediaupdatetimeout")},In(this.media(),!!c)));this.trigger("loadedplaylist")}}]);return b}(K.EventTarget),Ag=function(a){return K.log.debug?K.log.debug.bind(K,"VHS:",a+" >"):function(){}},wk=function(){function a(b,c,d,e){je(this,a);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=!1;this.type_=d;this.mimeType_=
c;this.logger_=Ag("SourceUpdater["+d+"]["+c+"]");"closed"===b.readyState?b.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,c,e)):this.createSourceBuffer_(c,e)}Ee(a,[{key:"createSourceBuffer_",value:function(a,b){var c=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(a);this.logger_("created SourceBuffer");if(b&&(b.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){b.on("sourcebufferadded",function(){c.start_()});return}this.start_()}},{key:"start_",value:function(){var a=
this;this.started_=!0;this.onUpdateendCallback_=function(){var b=a.pendingCallback_;a.pendingCallback_=null;a.sourceBuffer_.removing=!1;a.logger_("buffered ["+Wl(a.buffered())+"]");b&&b();a.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=
!0;this.queueCallback_(function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.addEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);c.sourceBuffer_.appendBuffer(a.bytes)},function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);b()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:K.createTimeRanges()}},{key:"remove",value:function(a,b){var c=this,
d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Je;this.processedAppend_&&this.queueCallback_(function(){c.logger_("remove ["+a+" => "+b+"]");c.sourceBuffer_.removing=!0;c.sourceBuffer_.remove(a,b)},d)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Je}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a;b.runCallback_()}),
this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){var a=this,b=function kd(){a.sourceBuffer_&&"open"===a.mediaSource.readyState&&a.sourceBuffer_.abort();a.sourceBuffer_.removeEventListener("updateend",
kd)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",b):b()}}]);return a}(),zc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},hi=function(a){a.forEach(function(a){a.abort()})},ao=function(a){var b=a.target;b=Date.now()-b.requestTime;b=
{bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},lh=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b}:null},aj=function(a,b){return function(c,d){var e=d.response;if(c=lh(c,
d))return b(c,a);if(16!==e.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:2,xhr:d},a);d=new DataView(e);a.key.bytes=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]);return b(null,a)}},xk=function(a,b,c){return function(d,e){var f=e.response;if(d=lh(d,e))return c(d,a);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},a);a.map.bytes=new Uint8Array(e.response);b&&!b.isInitialized()&&
b.init();a.map.timescales=Be.timescale(a.map.bytes);a.map.videoTrackIds=Be.videoTrackIds(a.map.bytes);return c(null,a)}},Jp=function(a,b,c){return function(d,e){var f=e.response;if(d=lh(d,e))return c(d,a);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},a);a.stats={bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0};a.key?a.encryptedBytes=new Uint8Array(e.response):a.bytes=new Uint8Array(e.response);
b&&a.map&&a.map.bytes&&(b.isInitialized()||b.init(),(e=b.parse(a.bytes,a.map.videoTrackIds,a.map.timescales))&&e.captions&&(a.captionStreams=e.captionStreams,a.fmp4Captions=e.captions));return c(null,a)}},Kp=function(a,b,c){a.addEventListener("message",function Dg(d){if(d.data.source===b.requestId)return a.removeEventListener("message",Dg),d=d.data.decrypted,b.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),c(null,b)});var d=void 0;d=b.key.bytes.slice?b.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.key.bytes));
a.postMessage(Vi({source:b.requestId,encrypted:b.encryptedBytes,key:d,iv:b.key.iv}),[b.encryptedBytes.buffer,d.buffer])},Lp=function(a,b,c){var d=0,e=!1;return function(f,g){if(!e){if(f)return e=!0,hi(a),c(f,g);d+=1;if(d===a.length)return g.endOfAllRequests=Date.now(),g.encryptedBytes?Kp(b,g,c):c(null,g)}}},bo=function(a,b){return function(c){a.stats=K.mergeOptions(a.stats,ao(c));!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());return b(c,a)}},Mp=function(a,
b,c,d,e,f,g){var h=[];c=Lp(h,c,g);if(e.key&&!e.key.bytes){g=K.mergeOptions(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"});var k=aj(e,c);g=a(g,k);h.push(g)}e.map&&!e.map.bytes&&(g=K.mergeOptions(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:Ql(e.map)}),k=xk(e,d,c),g=a(g,k),h.push(g));b=K.mergeOptions(b,{uri:e.resolvedUri,responseType:"arraybuffer",headers:Ql(e)});d=Jp(e,d,c);a=a(b,d);a.addEventListener("progress",bo(e,f));h.push(a);return function(){return hi(h)}},co=function(a,
b){return a?(a=e.getComputedStyle(a))?a[b]:"":""},kf=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},Bg=function(a,b){var c=void 0,d=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||e.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||e.Number.MAX_VALUE;return c-d},Op=function(a,b,c,d,f){a=a.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var c=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var d=(d=a.attributes.BANDWIDTH)||e.Number.MAX_VALUE;return{bandwidth:d,width:b,height:c,playlist:a}});kf(a,function(a,b){return a.bandwidth-b.bandwidth});a=a.filter(function(a){return!ua.isIncompatible(a.playlist)});var g=a.filter(function(a){return ua.isEnabled(a.playlist)});g.length||(g=a.filter(function(a){return!ua.isDisabled(a.playlist)}));var h=g.filter(function(a){return a.bandwidth*zc.BANDWIDTH_VARIANCE<b}),k=h[h.length-1],l=h.filter(function(a){return a.bandwidth===
k.bandwidth})[0];if(!1===f)return(a=l||g[0]||a[0])?a.playlist:null;f=h.filter(function(a){return a.width&&a.height});kf(f,function(a,b){return a.width-b.width});h=f.filter(function(a){return a.width===c&&a.height===d});k=h[h.length-1];h=h.filter(function(a){return a.bandwidth===k.bandwidth})[0];var m=void 0,n=void 0;n=void 0;h||(m=f.filter(function(a){return a.width>c||a.height>d}),n=m.filter(function(a){return a.width===m[0].width&&a.height===m[0].height}),k=n[n.length-1],n=n.filter(function(a){return a.bandwidth===
k.bandwidth})[0]);return(a=n||h||l||g[0]||a[0])?a.playlist:null},eo=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,e=a.segmentDuration,f=a.timeUntilRebuffer,g=a.currentTimeline,h=a.syncController;a=a.master.playlists.filter(function(a){return!ua.isIncompatible(a)});var k=a.filter(ua.isEnabled);k.length||(k=a.filter(function(a){return!ua.isDisabled(a)}));a=k.filter(ua.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var k=h.getSyncPoint(a,d,g,b)?1:2;k=ua.estimateSegmentRequestTime(e,
c,a)*k-f;return{playlist:a,rebufferingImpact:k}});k=a.filter(function(a){return 0>=a.rebufferingImpact});kf(k,function(a,b){return Bg(b.playlist,a.playlist)});if(k.length)return k[0];kf(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null},em=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=window.WebKitDataCue||window.VTTCue;c.forEach(function(a){var c=a.stream,f=a.startTime,g=a.endTime;b[c]&&(f+=d,g+=d,b[c].addCue(new e(f,g,a.text)))})}},
fo=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null},Pp=function(a){var b=a.segment,c=a.playlist,d=c.mediaSequence,e=c.segments;return["appending ["+a.mediaIndex+"] of ["+d+", "+(d+(void 0===e?[]:e).length)+"] from playlist ["+c.id+"]","["+b.start+" => "+b.end+"] in timeline ["+a.timeline+"]"].join(" ")},bj=function(a){function b(a){je(this,b);var c=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");c.bandwidth=a.bandwidth;c.throughput={rate:0,count:0};c.roundTrip=NaN;c.resetStats_();c.mediaIndex=null;c.hasPlayed_=a.hasPlayed;c.currentTime_=a.currentTime;c.seekable_=a.seekable;c.seeking_=a.seeking;c.duration_=a.duration;c.mediaSource_=a.mediaSource;c.hls_=a.hls;c.loaderType_=a.loaderType;c.startingMedia_=void 0;c.segmentMetadataTrack_=a.segmentMetadataTrack;c.goalBufferLength_=a.goalBufferLength;c.sourceType_=a.sourceType;c.inbandTextTracks_=
a.inbandTextTracks;c.state_="INIT";c.checkBufferTimeout_=null;c.error_=void 0;c.currentTimeline_=-1;c.pendingSegment_=null;c.mimeType_=null;c.sourceUpdater_=null;c.xhrOptions_=null;c.activeInitSegmentId_=null;c.initSegments_={};c.cacheEncryptionKeys_=a.cacheEncryptionKeys;c.keyCache_={};c.captionParser_="main"===c.loaderType_?new pp:null;c.decrypter_=a.decrypter;c.syncController_=a.syncController;c.syncPoint_={segmentIndex:0,time:0};c.syncController_.on("syncinfoupdate",function(){return c.trigger("syncinfoupdate")});
c.mediaSource_.addEventListener("sourceopen",function(){return c.ended_=!1});c.fetchAtBuffer_=!1;c.logger_=Ag("SegmentLoader["+c.loaderType_+"]");Object.defineProperty(c,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}});return c}Qf(b,a);Ee(b,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=
this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=
null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():K.createTimeRanges()}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=Wi(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=
d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds});return d||a}},{key:"segmentKey",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=a.resolvedUri,d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});b={resolvedUri:(d||a).resolvedUri};d&&(b.bytes=d.bytes);return b}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&
(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new wk(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);
this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});b=null;c&&(c.id?b=c.id:c.uri&&(b=c.uri));this.logger_("playlist update ["+b+" => "+(a.id||a.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();
c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},
{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_&&this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=
null;this.abort()}},{key:"remove",value:function(a,b,c){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,c);ei(a,b,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var d in this.inbandTextTracks_)ei(a,b,this.inbandTextTracks_[d])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();
this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(this.isEndOfStream_(a.mediaIndex))this.endOfStream();
else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())a.timeline!==this.currentTimeline_&&(this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(a)}}},{key:"isEndOfStream_",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.playlist_;var c=this.mediaSource_;if(b&&c){var d=a===b.segments.length;b=b.endList&&"open"===c.readyState&&
d}else b=!1;return b&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(a,b,c,d,e,f){var g=0;a.length&&(g=a.end(a.length-1));a=Math.max(0,g-e);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;if(null===f)return c=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,c,null,!0);if(null!==c)return g=(d=b.segments[c])&&d.end?d.end:g,this.generateSegmentInfo_(b,c+1,g,!1);this.fetchAtBuffer_?(g=ua.getMediaInfoForTime(b,g,f.segmentIndex,f.time),c=g.mediaIndex,
g=g.startTime):(g=ua.getMediaInfoForTime(b,e,f.segmentIndex,f.time),c=g.mediaIndex,g=g.startTime);return this.generateSegmentInfo_(b,c,g,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,
b,c,d){if(0>b||b>=a.segments.length)return null;var e=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:e.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:e.timeline,duration:e.duration,segment:e}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=
this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=ua.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived);a=Gp(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(e<=a)return!1;if(b=eo({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=e-a-b.rebufferingImpact;d=.5;a<=xg&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||
c<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*zc.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=Mp(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,
this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=this.seekable_();a=this.currentTime_();var c=this.playlist_.targetDuration||10;b=b.length&&0<b.start(0)&&b.start(0)<a?b.start(0):a-30;a=Math.min(b,a-c);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,
0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key=this.segmentKey(b.key),c.key.iv=a);b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?
(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),b.key&&this.segmentKey(b.key,!0),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);
b.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){b=this.inbandTextTracks_;var c=this.hls_.tech_,d=a.captionStreams,e;for(e in d)b[e]||(c.trigger({type:"usage",name:"hls-608"}),d=c.textTracks().getTrackById(e),b[e]=d?d:c.addRemoteTextTrack({kind:"captions",id:e,label:e},!1).track);em({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_&&this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=
this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"===typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});if(d=fo(this.loaderType_,this.startingMedia_,d))this.error({message:d,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==
b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset"));d=this.syncController_.mappingForTimeline(b.timeline);null!==d&&this.trigger({type:"segmenttimemapping",mapping:d});this.state="APPENDING";if(c.map){var e=Wi(c.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===e||(d=this.initSegment(c.map),this.sourceUpdater_.appendBuffer({bytes:d.bytes},function(){a.activeInitSegmentId_=e}))}b.byteLength=
b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+(c.end-c.start):this.mediaSecondsLoaded+c.duration;this.logger_(Pp(b));this.sourceUpdater_.appendBuffer({bytes:b.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,b.requestId)},this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(a,b){this.pendingSegment_&&a===this.pendingSegment_.requestId&&
(a=this.pendingSegment_.segment,a.videoTimingInfo||(a.videoTimingInfo={}),a.videoTimingInfo.transmuxerPrependedSeconds=b.videoSegmentTimingInfo.prependedContentDuration||0,a.videoTimingInfo.transmuxedPresentationStart=b.videoSegmentTimingInfo.start.presentation,a.videoTimingInfo.transmuxedPresentationEnd=b.videoSegmentTimingInfo.end.presentation,a.videoTimingInfo.baseMediaDecodeTime=b.videoSegmentTimingInfo.baseMediaDecodeTime)}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=
this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(a.mediaIndex+1,a.playlist)&&this.endOfStream(),this.paused()||
this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof d&&isFinite(d)){ei(c,d,this.segmentMetadataTrack_);var f=e.WebKitDataCue||
e.VTTCue;a={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:d};b=JSON.stringify(a);c=new f(c,d,b);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return b}(K.EventTarget),cj=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)})),Qp=function(a){function b(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};je(this,b);c=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));c.mediaSource_=null;c.subtitlesTrack_=null;return c}Qf(b,a);Ee(b,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return K.createTimeRanges();var a=this.subtitlesTrack_.cues;return K.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!1;if(!a)return null;var c=Wi(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=new Uint8Array(cj.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(cj,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===
typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){ei(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),
this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=
this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=void 0,f=function(){a.subtitlesTrack_.tech_.off("vttjsloaded",d);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")};d=function(){a.subtitlesTrack_.tech_.off("vttjserror",f);a.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",
d);this.subtitlesTrack_.tech_.one("vttjserror",f)}else{c.requested=!0;try{this.parseVTTCues_(b)}catch(Eg){return this.error({message:Eg.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-
1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof e.TextDecoder?b=new e.TextDecoder("utf8"):(b=e.WebVTT.StringDecoder(),c=!0);b=new e.WebVTT.Parser(e,e.vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=function(b){return a.timestampmap=b};b.onparsingerror=function(a){K.log.warn("Error encountered when parsing cues: "+
a.message)};if(a.segment.map){var d=a.segment.map.bytes;c&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d)}d=a.bytes;c&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,f=e.MPEGTS/9E4-e.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=f;a.endTime+=f});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,
time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-d.duration)})}else d.empty=!0}}]);return b}(bj),Sf=function(a,b){if(a.segments)for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=void 0,f=0;f<a.segments.length;f++){var g=a.segments[f];if(!d)a:{var h=c+g.duration/2;d=b.cues;for(var k=0;k<d.length;k++){var l=d[k];if(h>=l.adStartTime&&h<=l.adEndTime){d=l;break a}}d=null}if(d){if("cueIn"in g){d.endTime=c;d.adEndTime=c;c+=g.duration;d=null;continue}if(c<d.endTime){c+=
g.duration;continue}d.endTime+=g.duration}else"cueOut"in g&&(d=new e.VTTCue(c,c+g.duration,g.cueOut),d.adStartTime=c,d.adEndTime=c+parseFloat(g.cueOut),b.addCue(d)),"cueOutCont"in g&&(h=g.cueOutCont.split("/").map(parseFloat),d=vp(h,2),h=d[0],k=d[1],d=new e.VTTCue(c,c+g.duration,""),d.adStartTime=c-h,d.adEndTime=d.adStartTime+k,b.addCue(d));c+=g.duration}},fm=[{name:"VOD",run:function(a,b,c,d,e){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!a.datetimeToDisplayTime)return null;
b=b.segments||[];d=c=null;e=e||0;for(var f=0;f<b.length;f++){var g=b[f];if(g.dateTimeObject){g=g.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime;var h=Math.abs(e-g);if(null!==d&&(0===h||d<h))break;d=h;c={time:g,segmentIndex:f}}}return c}},{name:"Segment",run:function(a,b,c,d,e){a=b.segments||[];c=b=null;e=e||0;for(var f=0;f<a.length;f++){var g=a[f];if(g.timeline===d&&"undefined"!==typeof g.start){var h=Math.abs(e-g.start);if(null!==c&&c<h)break;if(!b||null===c||c>=h)c=h,b={time:g.start,segmentIndex:f}}}return b}},
{name:"Discontinuity",run:function(a,b,c,d,e){c=null;e=e||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){d=null;for(var f=0;f<b.discontinuityStarts.length;f++){var g=b.discontinuityStarts[f],h=a.discontinuities[b.discontinuitySequence+f+1];if(h){var k=Math.abs(e-h.time);if(null!==d&&d<k)break;if(!c||null===d||d>=k)d=k,c={time:h.time,segmentIndex:g}}}}return c}},{name:"Playlist",run:function(a,b,c,d,e){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:
null}}],dj=function(a){function b(){je(this,b);var a=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Ag("SyncController");return a}Qf(b,a);Ee(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,
0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+bi(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var e=[],f=0;f<fm.length;f++){var g=fm[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=
Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex+"]"));return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist refresh sync: [time:"+
b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&
this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=Be.timescale(b.map.bytes);c=Be.startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=a.bytes;a=this.inspectCache_;if(Rf.isLikelyAacData(b))b:{for(var c=!1,d=0,e=null,f=null,
g,h=0,k;3<=b.length-h;){switch(Rf.parseType(b,h)){case "timed-metadata":if(10>b.length-h){c=!0;break}g=Rf.parseId3TagSize(b,h);if(g>b.length){c=!0;break}null===f&&(k=b.subarray(h,h+g),f=Rf.parseAacTimestamp(k));h+=g;break;case "audio":if(7>b.length-h){c=!0;break}g=Rf.parseAdtsSize(b,h);if(g>b.length){c=!0;break}null===e&&(k=b.subarray(h,h+g),e=Rf.parseSampleRate(k));d++;h+=g;break;default:h++}if(c){b=null;break b}}null===e||null===f?b=null:(b=9E4/e,b={audio:[{type:"audio",dts:f,pts:f},{type:"audio",
dts:f+1024*d*b,pts:f+1024*d*b}]})}else{f={pid:null,table:null};c={};e=0;for(g=188;g<b.byteLength;)if(71===b[e]&&71===b[g]){h=b.subarray(e,g);k=Ob.parseType(h,f.pid);switch(k){case "pat":f.pid||(f.pid=Ob.parsePat(h));break;case "pmt":f.table||(f.table=Ob.parsePmt(h))}if(f.pid&&f.table)break;e+=188;g+=188}else e++,g++;for(d in f.table)if(f.table.hasOwnProperty(d))switch(f.table[d]){case Ib.H264_STREAM_TYPE:c.video=[];var l;g=b;h=f;k=c;var m=0,n=188,p=!1,q=[];for(l=0;n<g.byteLength;)if(71===g[m]&&71===
g[n]){e=g.subarray(m,n);var t=Ob.parseType(e,h.pid);switch(t){case "pes":var r=Ob.parsePesType(e,h.table);t=Ob.parsePayloadUnitStartIndicator(e);if("video"===r&&(t&&!p&&(r=Ob.parsePesTime(e))&&(r.type="video",k.video.push(r),p=!0),!k.firstKeyFrame)){if(t&&0!==l){r=new Uint8Array(l);for(t=0;q.length;)l=q.shift(),r.set(l,t),t+=l.byteLength;Ob.videoPacketContainsKeyFrame(r)&&((l=Ob.parsePesTime(r))?(k.firstKeyFrame=l,k.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
l=0}q.push(e);l+=e.byteLength}}if(p&&k.firstKeyFrame)break;m+=188;n+=188}else m++,n++;n=g.byteLength;m=n-188;for(p=!1;0<=m;)if(71===g[m]&&71===g[n]){e=g.subarray(m,n);t=Ob.parseType(e,h.pid);switch(t){case "pes":if(r=Ob.parsePesType(e,h.table),t=Ob.parsePayloadUnitStartIndicator(e),"video"===r&&t&&(r=Ob.parsePesTime(e)))r.type="video",k.video.push(r),p=!0}if(p)break;m-=188;n-=188}else m--,n--;0===c.video.length&&delete c.video;break;case Ib.ADTS_STREAM_TYPE:c.audio=[];e=b;g=f;h=c;k=0;m=188;for(n=
!1;m<=e.byteLength;)if(71!==e[k]||71!==e[m]&&m!==e.byteLength)k++,m++;else{p=e.subarray(k,m);q=Ob.parseType(p,g.pid);switch(q){case "pes":if(l=Ob.parsePesType(p,g.table),q=Ob.parsePayloadUnitStartIndicator(p),"audio"===l&&q&&(p=Ob.parsePesTime(p)))p.type="audio",h.audio.push(p),n=!0}if(n)break;k+=188;m+=188}m=e.byteLength;k=m-188;for(n=!1;0<=k;)if(71!==e[k]||71!==e[m]&&m!==e.byteLength)k--,m--;else{p=e.subarray(k,m);q=Ob.parseType(p,g.pid);switch(q){case "pes":if(l=Ob.parsePesType(p,g.table),q=Ob.parsePayloadUnitStartIndicator(p),
"audio"===l&&q&&(p=Ob.parsePesTime(p)))p.type="audio",h.audio.push(p),n=!0}if(n)break;k-=188;m-=188}0===c.audio.length&&delete c.audio}b=c}b&&(b.audio||b.video)?(qp(b,a),a=b):a=null;d=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,d=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,d=a.audio[1].dtsTime);return{start:b,end:d,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&
2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)d={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+d.time+"] [mapping: "+d.mapping+"]")),c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=
b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h)e=0>g?c.start-bi(b,a.mediaIndex,e):c.end+bi(b,a.mediaIndex+1,e),this.discontinuities[f]={time:e,accuracy:h}}}}]);return b}(K.EventTarget),Rp=new Qe("./decrypter-worker.worker.js",function(a,b){var c=this;(function(){var a=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},b=function(){function a(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)},e=null,f=function(){function b(c){a(this,b);if(!e){var d=[[[],[],[],[],[]],[[],[],[],[],[]]],f=d[0],g=d[1],h=f[4],k=g[4],l,m,n,p=[],q=[],t;for(l=0;256>l;l++)q[(p[l]=l<<1^283*(l>>7))^l]=l;for(m=n=0;!h[m];m^=t||1,n=q[n]||1){var r=n^n<<1^n<<2^n<<3^n<<4;r=r>>8^r&255^99;h[m]=r;k[r]=m;var u=p[l=p[t=p[m]]];var A=16843009*u^65537*l^257*t^16843008*m;u=257*p[r]^16843008*r;for(l=0;4>l;l++)f[l][m]=u=u<<24^u>>>8,g[l][r]=A=A<<24^A>>>8}for(l=0;5>l;l++)f[l]=f[l].slice(0),g[l]=g[l].slice(0);e=d}this._tables=
[[e[0][0].slice(),e[0][1].slice(),e[0][2].slice(),e[0][3].slice(),e[0][4].slice()],[e[1][0].slice(),e[1][1].slice(),e[1][2].slice(),e[1][3].slice(),e[1][4].slice()]];d=this._tables[0][4];f=this._tables[1];m=c.length;n=1;if(4!==m&&6!==m&&8!==m)throw Error("Invalid aes key size");h=c.slice(0);k=[];this._key=[h,k];for(c=m;c<4*m+28;c++){g=h[c-1];if(0===c%m||8===m&&4===c%m)g=d[g>>>24]<<24^d[g>>16&255]<<16^d[g>>8&255]<<8^d[g&255],0===c%m&&(g=g<<8^g>>>24^n<<24,n=n<<1^283*(n>>7));h[c]=h[c-m]^g}for(m=0;c;m++,
c--)g=h[m&3?c:c-4],k[m]=4>=c||4>m?g:f[0][d[g>>>24]]^f[1][d[g>>16&255]]^f[2][d[g>>8&255]]^f[3][d[g&255]]}b.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1];a^=g[0];d^=g[1];c^=g[2];b^=g[3];var h=g.length/4-2,k,l=4;var m=this._tables[1];var n=m[0],p=m[1],q=m[2],t=m[3],r=m[4];for(k=0;k<h;k++){m=n[a>>>24]^p[d>>16&255]^q[c>>8&255]^t[b&255]^g[l];var u=n[d>>>24]^p[c>>16&255]^q[b>>8&255]^t[a&255]^g[l+1];var A=n[c>>>24]^p[b>>16&255]^q[a>>8&255]^t[d&255]^g[l+2];b=n[b>>>24]^p[a>>16&255]^q[d>>8&255]^
t[c&255]^g[l+3];l+=4;a=m;d=u;c=A}for(k=0;4>k;k++)e[(3&-k)+f]=r[a>>>24]<<24^r[d>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[l++],m=a,a=d,d=c,c=b,b=m};return b}(),g=function(){function b(){a(this,b);this.listeners={}}b.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};b.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===
arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var e=0;e<d;++e)b[e].apply(this,c)}};b.prototype.dispose=function(){this.listeners={}};b.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return b}(),h=function(b){function c(){a(this,c);var d=b.call(this,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?
this:d;d.jobs=[];d.delay=1;d.timeout_=null;return d}d(c,b);c.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};c.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return c}(g),k=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},l=function(){function c(b,d,e,f){a(this,c);var g=c.STEP,l=new Int32Array(b.buffer),m=new Uint8Array(b.byteLength);
b=0;this.asyncStream_=new h;this.asyncStream_.push(this.decryptChunk_(l.subarray(b,b+g),d,e,m));for(b=g;b<l.length;b+=g)e=new Uint32Array([k(l[b-4]),k(l[b-3]),k(l[b-2]),k(l[b-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(b,b+g),d,e,m));this.asyncStream_.push(function(){f(null,m.subarray(0,m.byteLength-m[m.byteLength-1]))})}c.prototype.decryptChunk_=function(a,b,c,d){return function(){var e=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),g=new f(Array.prototype.slice.call(b)),h=
new Uint8Array(a.byteLength),l=new Int32Array(h.buffer),m;var n=c[0];var p=c[1];var q=c[2];var t=c[3];for(m=0;m<e.length;m+=4){var r=k(e[m]);var u=k(e[m+1]);var A=k(e[m+2]);var w=k(e[m+3]);g.decrypt(r,u,A,w,l,m);l[m]=k(l[m]^n);l[m+1]=k(l[m+1]^p);l[m+2]=k(l[m+2]^q);l[m+3]=k(l[m+3]^t);n=r;p=u;q=A;t=w}d.set(h,a.byteOffset)}};b(c,null,[{key:"STEP",get:function(){return 32E3}}]);return c}(),m=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,
byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b};return new function(a){a.onmessage=function(b){var c=b.data;b=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength);var d=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),e=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new l(b,d,e,function(b,d){a.postMessage(m({source:c.source,decrypted:d}),[d.buffer])})}}(c)})()}),zk=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&
(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},ho=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main;c=b.mediaTypes[a];var f=c.activeTrack();f=c.activeGroup(f);var g=c.activePlaylistLoader;zk(d,c);f&&(f.playlistLoader?(d.resyncLoader(),d=f.playlistLoader,c.activePlaylistLoader=d,d.load()):g&&e.resetEverything())}},Sp=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main;c=b.mediaTypes[a];var f=c.activeTrack(),g=c.activeGroup(f),h=c.activePlaylistLoader;
zk(d,c);g&&(g.playlistLoader?h===g.playlistLoader?(d=g.playlistLoader,c.activePlaylistLoader=d,d.load()):(d.track&&d.track(f),d.resetEverything(),d=g.playlistLoader,c.activePlaylistLoader=d,d.load()):e.resetEverything())}},Ak={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a],d=b.blacklistCurrentPlaylist;zk(b.segmentLoaders[a],c);var e=c.activeTrack(),f=c.activeGroup();f=(f.filter(function(a){return a["default"]})[0]||f[0]).id;f=c.tracks[f];if(e===f)d({message:"Problem encountered loading the default audio track."});
else{K.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var g in c.tracks)c.tracks[g].enabled=c.tracks[g]===f;c.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];K.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");zk(c,d);if(c=d.activeTrack())c.mode="disabled";d.onTrackChanged()}}},io={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];
b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),e);d.paused()||f.load()});b.on("error",Ak[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);f.track(g.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),
e);d.paused()||f.load()});b.on("error",Ak[a](a,c))}},jo={AUDIO:function(a,b){var c=b.hls,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,h=b.mediaTypes[a],k=h.groups;h=h.tracks;var l=b.masterPlaylistLoader;g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{"default":{"default":!0}}});for(var m in g[a]){k[m]||(k[m]=[]);for(var n in g[a][m]){var p=g[a][m][n];var q=p.resolvedUri?new ai(p.resolvedUri,c,f):p.playlists&&"dash"===d?new cm(p.playlists[0],c,f,l):null;p=K.mergeOptions({id:n,
playlistLoader:q},p);io[a](a,p.playlistLoader,b);k[m].push(p);if("undefined"===typeof h[n]){q=K.AudioTrack;var t=n,r=p["default"]?"main":"alternative";p.characteristics&&0<=p.characteristics.indexOf("public.accessibility.describes-video")&&(r="main-desc");p=new q({id:t,kind:r,enabled:!1,language:p.language,"default":p["default"],label:n});h[n]=p}}}e.on("error",Ak[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.hls,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,k=
b.mediaTypes[a],l=k.groups;k=k.tracks;var m=b.masterPlaylistLoader,n;for(n in h[a]){l[n]||(l[n]=[]);for(var p in h[a][n])if(!h[a][n][p].forced){var q=h[a][n][p],t=void 0;"hls"===e?t=new ai(q.resolvedUri,d,g):"dash"===e&&(t=new cm(q.playlists[0],d,g,m));q=K.mergeOptions({id:p,playlistLoader:t},q);io[a](a,q.playlistLoader,b);l[n].push(q);"undefined"===typeof k[p]&&(q=c.addRemoteTextTrack({id:p,kind:"subtitles","default":q["default"]&&q.autoselect,language:q.language,label:p},!1).track,k[p]=q)}}f.on("error",
Ak[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a];b=e.groups;e=e.tracks;for(var f in d[a]){b[f]||(b[f]=[]);for(var g in d[a][f]){var h=d[a][f][g];h.instreamId.match(/CC\d/)&&(b[f].push(K.mergeOptions({id:g},h)),"undefined"===typeof e[g]&&(h=c.addRemoteTextTrack({id:h.instreamId,kind:"captions","default":h["default"]&&h.autoselect,language:h.language,label:g},!1).track,e[g]=h))}}}},tg=function(a,b){return function(c){var d=b.mediaTypes[a].groups,e=b.masterPlaylistLoader.media();
if(!e)return null;var f=null;e.attributes[a]&&(f=d[e.attributes[a]]);f=f||d.main;return"undefined"===typeof c?f:null===c?null:f.filter(function(a){return a.id===c.id})[0]||null}},Tp={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode)return c[d];return null}}},ko=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){jo[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=tg(c,a);b[c].activeTrack=Tp[c](c,a);b[c].onGroupChanged=ho(c,a);b[c].onTrackChanged=Sp(c,a)});var f=b.AUDIO.activeGroup();f=(f.filter(function(a){return a["default"]})[0]||f[0]).id;b.AUDIO.tracks[f].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var g=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",g);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);e.on("dispose",function(){d.audioTracks().removeEventListener("change",g);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var h in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[h])},Up=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Je,activeTrack:Je,onGroupChanged:Je,onTrackChanged:Je}});return a},Cg=void 0,Nk="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Ok=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Pk=function(a){function b(a){je(this,b);var c=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),d=a.url,e=a.handleManifestRedirects,f=a.withCredentials,
g=a.tech,h=a.bandwidth,k=a.externHls,l=a.useCueTags,m=a.blacklistDuration,n=a.enableLowInitialPlaylist,p=a.sourceType,q=a.seekTo,t=a.cacheEncryptionKeys;if(!d)throw Error("A non-empty playlist URL is required");Cg=k;c.withCredentials=f;c.tech_=g;c.hls_=g.hls;c.seekTo_=q;c.sourceType_=p;c.useCueTags_=l;c.blacklistDuration=m;c.enableLowInitialPlaylist=n;c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType="");c.requestOptions_={withCredentials:f,
handleManifestRedirects:e,timeout:null};c.mediaTypes_=Up();c.mediaSource=new K.MediaSource;c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_.bind(c));c.seekable_=K.createTimeRanges();c.hasPlayed_=function(){return!1};c.syncController_=new dj(a);c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;c.decrypter_=new Rp;c.inbandTextTracks_={};e={hls:c.hls_,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},
seeking:function(){return c.tech_.seeking()},duration:function(){return c.mediaSource.duration},hasPlayed:function(){return c.hasPlayed_()},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:h,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:t};c.masterPlaylistLoader_="dash"===c.sourceType_?new cm(d,c.hls_,c.requestOptions_):new ai(d,c.hls_,c.requestOptions_);c.setupMasterPlaylistLoaderListeners_();
c.mainSegmentLoader_=new bj(K.mergeOptions(e,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),a);c.audioSegmentLoader_=new bj(K.mergeOptions(e,{loaderType:"audio"}),a);c.subtitleSegmentLoader_=new Qp(K.mergeOptions(e,{loaderType:"vtt"}),a);c.setupSegmentLoaderListeners_();Nk.forEach(function(a){c[a+"_"]=Ok.bind(c,a)});c.logger_=Ag("MPC");c.masterPlaylistLoader_.load();return c}Qf(b,a);Ee(b,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",
function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;ci(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());ko({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,
hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(Ej){return K.log.warn("Failed to create SourceBuffers",Ej),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();if(!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media())a.trigger("selectedinitialmedia");else a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})});
this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var c=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function Dg(){if(Infinity===
a.duration())c();else a.tech_.one("durationchange",Dg)});else c()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;ci(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),
a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),e;for(e in a.AUDIO)for(var f in a.AUDIO[e])a.AUDIO[e][f].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});
Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});Cg.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});Cg.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",
function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-1)-a.tech_.currentTime():0;var e=a.bufferLowWaterLine();(!c.endList||a.duration()<zc.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||d>=e)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});
this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),
this.mainSegmentLoader_.resetEverything(function(){K.browser.IE_VERSION||K.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=
this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(K.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(c.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(c.end(0))}this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(na){return K.log.warn("Failed to create Source Buffers",
na),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);if(a){this.logger_("calling mediaSource.endOfStream()");
try{this.mediaSource.endOfStream()}catch(na){K.log.warn("Failed to call media source endOfStream",na)}}}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=Cg.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=Fe;c=c.end(c.length-1);return c-b<=Fe&&a-c<=Fe}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c=void 0;c=void 0;c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(Eg){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(Ga).length,e=this.masterPlaylistLoader_.master.playlists;if(1===e.length)return K.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);d&&(K.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),e.forEach(function(a){Infinity!==a.excludeUntil&&delete a.excludeUntil}),this.tech_.trigger("retryplaylist"));c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});c=this.selectPlaylist();K.log.warn("Problem encountered with the current HLS playlist."+
(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(c,d)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=Vl(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;
if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Cg.Playlist.duration(this.masterPlaylistLoader_.media()):
0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=Cg.Playlist.seekable(b,c);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===
c)return;a=Cg.Playlist.seekable(b,c);if(0===a.length)return}c=b=void 0;this.seekable_&&this.seekable_.length&&(b=this.seekable_.end(0),c=this.seekable_.start(0));a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=d:this.seekable_=K.createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===b&&this.seekable_.start(0)===c||(this.logger_("seekable updated ["+Wl(this.seekable_)+
"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=Cg.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),e=function gm(){a.logger_("Setting duration from "+a.mediaSource.duration+" => "+c);try{a.mediaSource.duration=c}catch(hm){K.log.warn("Failed to set media source duration",hm)}a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",gm)};0<d.length&&(c=Math.max(c,d.end(d.length-
1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},
{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),b;if(a&&"open"===this.mediaSource.readyState){var c=this.masterPlaylistLoader_.master;var d=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var e=a.attributes||{};var f=e.CODECS?gi(e.CODECS):rk;var g=a.attributes||{};e=!0;var h=!1;if(a){if(c.mediaGroups.AUDIO&&g.AUDIO){var k=c.mediaGroups.AUDIO[g.AUDIO];if(k){h=
!0;e=!1;for(var l in k)if(!k[l].uri&&!k[l].playlists){e=!0;break}}}h&&!f.audioProfile&&(e||(f.audioProfile=Tn(c,g.AUDIO)),f.audioProfile||(K.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),f.audioProfile=rk.audioProfile));var m;f.videoCodec&&(b=""+f.videoCodec+f.videoObjectTypeIndicator);f.audioProfile&&(m="mp4a.40."+f.audioProfile);c=sk("audio",d,[m]);l=sk("video",d,[b]);d=sk("video",d,[b,m]);b=h?!e&&b?[l,c]:
e||b?[d,c]:[c,c]:b?[d]:[c]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new K.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",
value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+Sn(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=2,c=null,d=void 0;a.attributes.CODECS&&(d=gi(a.attributes.CODECS),c=d.videoCodec,b=d.codecCount);this.master().playlists.forEach(function(a){var d={codecCount:2,videoCodec:null};a.attributes.CODECS&&(d=
gi(a.attributes.CODECS));d.codecCount!==b&&(a.excludeUntil=Infinity);d.videoCodec!==c&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));Sf(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=zc.GOAL_BUFFER_LENGTH;return Math.min(b+a*zc.GOAL_BUFFER_LENGTH_RATE,Math.max(b,zc.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=zc.BUFFER_LOW_WATER_LINE;
return Math.min(b+a*zc.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,zc.MAX_BUFFER_LOW_WATER_LINE))}}]);return b}(K.EventTarget),Qk=function(a,b,c){return function(d){var e=a.master.playlists[b],f=Ui(e),g=Ga(e);if("undefined"===typeof d)return g;d?delete e.disabled:e.disabled=!0;d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return d}},yo=function kd(a,b,c){je(this,kd);var d=a.masterPlaylistController_;d=d[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(d);
if(b.attributes.RESOLUTION){var e=b.attributes.RESOLUTION;this.width=e.width;this.height=e.height}this.bandwidth=b.attributes.BANDWIDTH;this.id=c;this.enabled=Qk(a.playlists,b.uri,d)},Rk=function(a){var b=a.playlists;a.representations=function(){return b.master.playlists.filter(function(a){return!Ui(a)}).map(function(b,c){return new yo(a,b,b.uri)})}},Sk=["seeking","seeked","pause","playing","error"],Tk=function(){function a(b){var c=this;je(this,a);this.tech_=b.tech;this.seekable=b.seekable;this.seekTo=
b.seekTo;this.allowSeeksWithinUnsafeLiveWindow=b.allowSeeksWithinUnsafeLiveWindow;this.media=b.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Ag("PlaybackWatcher");this.logger_("initialize");var d=function(){return c.monitorCurrentTime_()},f=function(){return c.techWaiting_()},g=function(){return c.cancelTimer_()},h=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",h);this.tech_.on("waiting",f);this.tech_.on(Sk,
g);this.tech_.on("canplay",d);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",h);c.tech_.off("waiting",f);c.tech_.off(Sk,g);c.tech_.off("canplay",d);c.checkCurrentTimeTimeout_&&e.clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}Ee(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},
{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+Fe>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:
(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var a=this.seekable(),b=this.tech_.currentTime(),c=void 0;this.afterSeekableWindow_(a,b,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=a.end(a.length-1));this.beforeSeekableWindow_(a,b)&&(c=a.start(0)+Fe);return"undefined"!==
typeof c?(this.logger_("Trying to seek outside of seekable at time "+b+" with "+("seekable range "+Wl(a)+". Seeking to ")+(c+".")),this.seekTo(c),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=Vl(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),
this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),
!0;var c=this.tech_.buffered();a=di(c,b);return this.videoUnderflow_(a,c,b)?(this.cancelTimer_(),this.seekTo(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!a.length)return!1;var e=
a.end(a.length-1)+Fe;!c.endList&&d&&(e=a.end(a.length-1)+3*c.targetDuration);return b>e?!0:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&b<a.start(0)-Fe?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();
b=di(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.seekTo(b.start(0)+xg),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){if(2>a.length)a=K.createTimeRanges();else{for(var c=[],d=1;d<a.length;d++){var e=a.end(d-1),f=a.start(d);c.push([e,f])}a=K.createTimeRanges(c)}for(c=0;c<a.length;c++)if(d=a.start(c),e=a.end(c),4>b-d&&2<b-d)return{start:d,
end:e};return null}}]);return a}(),zo={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},ii=function kd(a,b){var c=0,d=0,e=K.mergeOptions(zo,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var f=function(){d&&a.currentTime(d)},g=function(b){null!==b&&void 0!==b&&(d=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},
h=function(){if(Date.now()-c<1E3*e.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(e.getSource&&"function"===typeof e.getSource)return c=Date.now(),e.getSource.call(a,g);K.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},k=function Ci(){a.off("loadedmetadata",f);a.off("error",h);a.off("dispose",Ci)};a.on("error",h);a.on("dispose",k);a.reloadSourceOnError=function(b){k();kd(a,b)}},sm=function(a){ii(this,a)};K.use("*",function(a){return{setSource:function(a,
b){b(null,a)},setCurrentTime:function(b){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(b);return b},play:function(){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(a.tech_.currentTime())}}});var jd={PlaylistLoader:ai,Playlist:ua,Decrypter:tp,AsyncStream:zn,decrypt:An,utils:Rl,STANDARD_PLAYLIST_SELECTOR:function(){return Op(this.playlists.master,this.systemBandwidth,parseInt(co(this.tech_.el(),"width"),10),parseInt(co(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},
INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(ua.isEnabled);kf(a,function(a,b){return Bg(a,b)});return a.filter(function(a){return gi(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Bg,comparePlaylistResolution:function(a,b){var c=void 0,d=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||e.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);
d=d||e.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:Nn()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(jd,a,{get:function(){K.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return zc[a]},set:function(b){K.log.warn("using Hls."+
a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?K.log.warn("value of Hls."+a+" must be greater than or equal to 0"):zc[a]=b}})});var tm=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},um=function(a,b){b=b.media();for(var c=-1,d=0;d<a.length;d++)if(a[d].id===b.uri){c=d;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},Ao=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});
um(a,b.playlists)};jd.canPlaySource=function(){return K.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var vm=function(){if(!window.localStorage)return null;var a=window.localStorage.getItem("videojs-vhs");if(!a)return null;try{return JSON.parse(a)}catch(na){return null}};jd.supportsNativeHls=function(){var a=f.createElement("video");return K.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):
!1}();var Bo=K.getTech("Html5").isSupported()?/maybe|probably/i.test(f.createElement("video").canPlayType("application/dash+xml")):!1;jd.supportsNativeDash=Bo;jd.supportsTypeNatively=function(a){return"hls"===a?jd.supportsNativeHls:"dash"===a?jd.supportsNativeDash:!1};jd.isSupported=function(){return K.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var wm=function(a){function b(a,c,d){je(this,b);var e=gf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,
c,d.hls));c.options_&&c.options_.playerId&&(d=K(c.options_.playerId),d.hasOwnProperty("hls")||Object.defineProperty(d,"hls",{get:function(){K.log.warn("player.hls is deprecated. Use player.tech().hls instead.");c.trigger({type:"usage",name:"hls-player-access"});return e},configurable:!0}),d.vhs=e,d.dash=e,e.player_=d);e.tech_=c;e.source_=a;e.stats={};e.setOptions_();if(e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);
else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");e.on(f,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=f.fullscreenElement||f.webkitFullscreenElement||f.mozFullScreenElement||f.msFullscreenElement)&&a.contains(e.tech_.el())&&e.masterPlaylistController_.smoothQualityChange_()});e.on(e.tech_,"seeking",function(){0===
this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)});e.on(e.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});e.on(e.tech_,"play",e.play);return e}Qf(b,a);Ee(b,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1;this.options_.limitRenditionByPlayerDimensions=!1===this.options_.limitRenditionByPlayerDimensions?
!1:!0;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;"number"!==typeof this.options_.blacklistDuration&&
(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=vm();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=zc.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=
this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===zc.INITIAL_BANDWIDTH;"withCredentials limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys".split(" ").forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(a,b){var c=this;a&&(this.setOptions_(),this.options_.url=
this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=jd,this.options_.sourceType=tm(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a);c.setCurrentTime(a)},this.masterPlaylistController_=new Pk(this.options_),this.playbackWatcher_=new Tk(K.mergeOptions(this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){K.players[c.tech_.options_.playerId].error(c.masterPlaylistController_.error)}),
this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):jd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=jd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=
a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput=
{rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){K.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||
0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||
0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return pk(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},
enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return pk(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(c.options_.useBandwidthFromLocalStorage){var a=
{bandwidth:c.bandwidth,throughput:Math.round(c.throughput)};if(window.localStorage){var b=vm();b=b?K.mergeOptions(b,a):a;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(b))}catch(hm){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Rk(c);if("dash"===c.options_.sourceType){var a=K.players[c.tech_.options_.playerId];if(a.eme){var b=c.source_.keySystems;var d=c.playlists.media(),e=c.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(b){var f=
{},g;for(g in b)f[g]={audioContentType:'audio/mp4; codecs="'+e.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+d.attributes.CODECS+'"'},d.contentProtection&&d.contentProtection[g]&&d.contentProtection[g].pssh&&(f[g].pssh=d.contentProtection[g].pssh),"string"===typeof b[g]&&(f[g].url=b[g]);b=K.mergeOptions(b,f)}b&&(a.currentSource().keySystems=b,a.eme.initializeMediaKeys&&a.eme.initializeMediaKeys())}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.tech_.ready(function(){return c.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(K.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=K.players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Ao(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){um(a.qualityLevels_,a.playlists)}))}},{key:"play",
value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();
this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.hls&&delete this.tech_.hls;up(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(a,b){return Fp({playlist:this.masterPlaylistController_.media(),time:a,callback:b})}},{key:"seekToProgramTime",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,d=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:2;return Pn({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}}]);return b}(K.getComponent("Component")),Dj={name:"videojs-http-streaming",VERSION:"1.10.3",canHandleSource:function(a){var b=K.mergeOptions(K.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return Dj.canPlayType(a.type,b)},handleSource:function(a,b){var c=K.mergeOptions(K.options,2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{});b.hls=new wm(a,b,c);b.hls.xhr=Nn();b.hls.src(a.src,a.type);return b.hls},canPlayType:function(a){var b=K.mergeOptions(K.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,c=tm(a);return!c||jd.supportsTypeNatively(c)&&!b?"":"maybe"}};if("undefined"===typeof K.MediaSource||"undefined"===typeof K.URL)K.MediaSource=jf,K.URL=Xn;jf.supportsNativeMediaSources()&&K.getTech("Html5").registerSourceHandler(Dj,0);K.HlsHandler=wm;K.HlsSourceHandler=
Dj;K.Hls=jd;K.use||K.registerComponent("Hls",jd);K.options.hls=K.options.hls||{};K.registerPlugin?K.registerPlugin("reloadSourceOnError",sm):K.plugin("reloadSourceOnError",sm);return K});!function(){var e=window&&window.videojs;e&&(e.CDN_VERSION="7.6.0");!0}();(function(e,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f(require("video.js")):"function"===typeof define&&define.amd?define(["videojs"],function(c){return e.Youtube=f(c)}):e.Youtube=f(e.videojs)})(this,function(e){function f(){YT.ready(function(){d.isApiReady=!0;for(var a=0;a<d.apiReadyQueue.length;++a)d.apiReadyQueue[a].initYTPlayer()})}function c(a,b){var c=!1,d=document.createElement("script"),e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,
e);d.onload=function(){c||(c=!0,b())};d.onreadystatechange=function(){c||"complete"!==this.readyState&&"loaded"!==this.readyState||(c=!0,b())};d.src=a}function b(){var a=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css";b.styleSheet?b.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":
b.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));a.appendChild(b)}var a=e.browser.IS_IOS||e.browser.IS_NATIVE_ANDROID,h=e.getTech("Tech"),d=e.extend(h,{constructor:function(b,c){h.call(this,b,c);this.setPoster(b.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&
(this.el_.parentNode.className+=" vjs-youtube",a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),d.isApiReady?this.initYTPlayer():d.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var a=d.apiReadyQueue.indexOf(this);-1!==a&&d.apiReadyQueue.splice(a,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",
"");this.el_.parentNode.removeChild(this.el_);h.prototype.dispose.call(this)},createEl:function(){var b=document.createElement("div");b.setAttribute("id",this.options_.techId);b.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");b.setAttribute("class","vjs-tech");var c=document.createElement("div");c.appendChild(b);a||this.options_.ytControls||(b=document.createElement("div"),b.setAttribute("class","vjs-iframe-blocker"),b.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),
b.onclick=function(){this.pause()}.bind(this),c.appendChild(b));return c},initYTPlayer:function(){var a={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};"undefined"!==typeof this.options_.autohide&&(a.autohide=this.options_.autohide);"undefined"!==typeof this.options_.cc_load_policy&&(a.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&(a.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(a.disablekb=
this.options_.disablekb);"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.color&&(a.color=this.options_.color);a.controls?"undefined"!==typeof this.options_.fs&&(a.fs=this.options_.fs):a.fs=0;"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.hl?a.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(a.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&
(a.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?a.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(a.list=this.url.listId);"undefined"!==typeof this.options_.listType&&(a.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(a.modestbranding=this.options_.modestbranding);"undefined"!==typeof this.options_.playlist&&(a.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(a.playsinline=
this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(a.rel=this.options_.rel);"undefined"!==typeof this.options_.showinfo&&(a.showinfo=this.options_.showinfo);"undefined"!==typeof this.options_.start&&(a.start=this.options_.start);"undefined"!==typeof this.options_.theme&&(a.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var b=this.options_.customVars;Object.keys(b).forEach(function(c){a[c]=b[c]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=
a.list;var c={videoId:this.activeVideoId,playerVars:a,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(c.host="https://www.youtube-nocookie.com");
this.ytPlayer=new YT.Player(this.options_.techId,c)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(a){a=
a.data;if(a!==this.lastState&&!this.errorNumber)switch(this.lastState=a,a){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking)this.onSeeked();
else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(a){this.errorNumber=a.data;this.trigger("pause");this.trigger("error")},error:function(){var a=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:a,message:"Error while trying to play the video"};case 2:case 100:return{code:a,message:"Unable to find the video"};case 101:case 150:return{code:a,
message:"Playback on other Websites has been disabled by the video owner."}}return{code:a,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.loadVideoById(a)},cueVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.cueVideoById(a)},
src:function(a){a&&this.setSrc({src:a});return this.source},poster:function(){return a?null:this.poster_},setPoster:function(a){this.poster_=a},setSrc:function(b){b&&b.src&&(delete this.errorNumber,this.source=b,this.url=d.parseUrl(b.src),!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!a?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&
(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(a){this.options_.autoplay=a},loop:function(){return this.options_.loop},setLoop:function(a){this.options_.loop=a},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),
this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(a){this.lastState===
YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(a,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==a&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),
this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?e.createTimeRange(0,this.ytPlayer.getDuration()):e.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(a){this.ytPlayer&&
this.ytPlayer.setPlaybackRate(a)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(a){this.ytPlayer&&this.ytPlayer.setVolume(100*a)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(a){this.ytPlayer&&(this.muted(!0),
a?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return e.createTimeRange();var a=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return e.createTimeRange(0,a)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;default:return 1}},
readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var a="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var b=new Image;b.onload=function(){if("naturalHeight"in b){if(90>=b.naturalHeight||120>=b.naturalWidth)return}else if(90>=b.height||120>=b.width)return;this.poster_=a;this.trigger("posterchange")}.bind(this);
b.onerror=function(){};b.src=a}catch(l){}}});d.isSupported=function(){return!0};d.canPlaySource=function(a){return d.canPlayType(a.type)};d.canPlayType=function(a){return"video/youtube"===a};d.parseUrl=function(a){var b={videoId:null},c=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/);c&&11===c[2].length&&(b.videoId=c[2]);(c=a.match(/[?&]list=([^#&\?]+)/))&&c[1]&&(b.listId=c[1]);return b};d.apiReadyQueue=[];"undefined"!==typeof document&&(c("https://www.youtube.com/iframe_api",
f),b());"undefined"!==typeof e.registerTech?e.registerTech("Youtube",d):e.registerComponent("Youtube",d)});/*
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsContribHls=e()})(function(){return function a(f,c,b){function h(g,l){if(!c[g]){if(!f[g]){var k="function"==typeof require&&require;if(!l&&k)return k(g,!0);if(d)return d(g,!0);l=Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l;
}l=c[g]={exports:{}};f[g][0].call(l.exports,function(a){var b=f[g][1][a];return h(b?b:a)},l,l.exports,a,f,c,b)}return c[g].exports}for(var d="function"==typeof require&&require,g=0;g<b.length;g++)h(b[g]);return h}({1:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=!1,g=void 0;try{for(var h=a[Symbol.iterator](),k;!(d=(k=h.next()).done)&&(c.push(k.value),!b||c.length!==
b);d=!0);}catch(A){f=!0,g=A}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),h=(f=f("global/window"))&&f.__esModule?f:{"default":f},d=function(a,b){a=a.cues;for(var c=0;c<a.length;c++){var d=a[c];if(b>=d.adStartTime&&b<=d.adEndTime)return d}return null};b["default"]={updateAdCues:function(b,c){if(b.segments)for(var f=2>=arguments.length||void 0===arguments[2]?0:arguments[2],g=void 0,k=0;k<
b.segments.length;k++){var r=b.segments[k];g||(g=d(c,f+r.duration/2));if(g){if("cueIn"in r){g.endTime=f;g.adEndTime=f;f+=r.duration;g=null;continue}if(f<g.endTime){f+=r.duration;continue}g.endTime+=r.duration}else if("cueOut"in r&&(g=new h["default"].VTTCue(f,f+r.duration,r.cueOut),g.adStartTime=f,g.adEndTime=f+parseFloat(r.cueOut),c.addCue(g)),"cueOutCont"in r){var w=r.cueOutCont.split("/").map(parseFloat);g=a(w,2);w=g[0];var u=g[1];g=new h["default"].VTTCue(f,f+r.duration,"");g.adStartTime=f-w;
g.adEndTime=g.adStartTime+u;c.addCue(g)}f+=r.duration}},findAdCue:d};c.exports=b["default"]},{"global/window":32}],2:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},h=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},d={hexDump:function(b){b=Array.prototype.slice.call(b);for(var c="",d,f,g=0;g<b.length/16;g++)d=b.slice(16*g,16*g+16).map(a).join(""),f=b.slice(16*g,16*g+16).map(h).join(""),
c+=d+" "+f+"\n";return c},tagDump:function(a){return d.hexDump(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=a;var f=c;d=d.start(f)+"-"+d.end(f);b+=d+" "}return b},createTransferableMessage:function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},initSegmentId:function(a){var b=a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()}};
b["default"]=d;c.exports=b["default"]},{}],3:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});b["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};c.exports=b["default"]},{}],4:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=f("global/window"),h=a&&a.__esModule?a:{"default":a},d=f("aes-decrypter"),g=f("./bin-utils"),k=
function(a){a.onmessage=function(a){var b=a.data;a=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength);var c=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),f=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new d.Decrypter(a,c,f,function(a,c){h["default"].postMessage((0,g.createTransferableMessage)({source:b.source,decrypted:c}),[c.buffer])})}};b["default"]=function(a){return new k(a)};c.exports=b["default"]},{"./bin-utils":2,"aes-decrypter":25,
"global/window":32}],5:[function(f,c,b){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("./playlist-loader"),n=c(l),
p=f("./playlist.js");l=f("./segment-loader");var r=c(l);l=f("./vtt-segment-loader");var w=c(l);l=f("./ranges");var u=c(l),A=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=f("./ad-cue-tags");var t=c(a);a=f("./sync-controller");var z=c(a),B=f("videojs-contrib-media-sources/es5/codec-utils");a=f("webwackify");var D=c(a);a=f("./decrypter-worker");var y=c(a);a=f("./config");var E=c(a),x=f("./util/codecs.js"),H=f("./media-groups"),F=void 0,m={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",
audioProfile:"2"},q="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),G=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},I=function(){var a=void 0;try{a=f.resolve("./decrypter-worker")}catch(W){}return a},M=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return(0,B.translateLegacyCodecs)([a])[0]})};b.mapLegacyAvcCodecs_=M;var S=function(a,b,c){return a+"/"+b+'; codecs="'+c.filter(function(a){return!!a}).join(", ")+
'"'},ia=function(a,b){var c=b.segments&&b.segments.length&&b.segments[0].map?"mp4":"mp2t";var d=b.attributes||{};var f=d.CODECS?(0,x.parseCodecs)(d.CODECS):m;var g=b.attributes||{};d=!0;var h=!1;if(!b)return[];if(a.mediaGroups.AUDIO&&g.AUDIO&&(a=a.mediaGroups.AUDIO[g.AUDIO])){h=!0;d=!1;for(var k in a)if(!a[k].uri){d=!0;break}}h&&!f.audioProfile&&(A["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),f.audioProfile=
m.audioProfile);var l,n;f.videoCodec&&(l=""+f.videoCodec+f.videoObjectTypeIndicator);f.audioProfile&&(n="mp4a.40."+f.audioProfile);k=S("audio",c,[n]);a=S("video",c,[l]);c=S("video",c,[l,n]);return h?!d&&l?[a,k]:[c,k]:l?[c]:[k]};b.mimeTypesForPlaylist_=ia;a=function(a){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var d=a.url,f=a.withCredentials,g=a.mode,h=a.tech,l=a.bandwidth,
m=a.externHls,p=a.useCueTags,t=a.blacklistDuration,u=a.enableLowInitialPlaylist;if(!d)throw Error("A non-empty playlist URL is required");F=m;this.withCredentials=f;this.tech_=h;this.hls_=h.hls;this.mode_=g;this.useCueTags_=p;this.blacklistDuration=t;this.enableLowInitialPlaylist=u;this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="");this.requestOptions_={withCredentials:this.withCredentials,timeout:null};this.mediaTypes_=
(0,H.createMediaTypes)();this.mediaSource=new A["default"].MediaSource({mode:g});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=A["default"].createTimeRanges();this.hasPlayed_=function(){return!1};this.syncController_=new z["default"](a);this.segmentMetadataTrack_=h.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;this.decrypter_=(0,D["default"])(y["default"],I());f={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),
seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.mediaSource.duration},hasPlayed:function(){return c.hasPlayed_()},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:l,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new n["default"](d,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=new r["default"](A["default"].mergeOptions(f,
{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a);this.audioSegmentLoader_=new r["default"](A["default"].mergeOptions(f,{loaderType:"audio"}),a);this.subtitleSegmentLoader_=new w["default"](A["default"].mergeOptions(f,{loaderType:"vtt"}),a);this.setupSegmentLoaderListeners_();q.forEach(function(a){c[a+"_"]=G.bind(c,a)});this.masterPlaylistLoader_.load()}d(b,a);g(b,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",
function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,p.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());(0,H.setupMediaGroups)({segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,
requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,mode:a.mode_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(Z){return A["default"].log.warn("Failed to create SourceBuffers",Z),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=
a.masterPlaylistLoader_.media();b?(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||a.mainSegmentLoader_.load(),b.endList||function(){var b=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};Infinity!==a.duration()?function(){a.tech_.one("durationchange",function sa(){if(Infinity===a.duration())b();else a.tech_.one("durationchange",sa)})}():b()}()):(b=void 0,a.enableLowInitialPlaylist&&
(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_))});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,p.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,
a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",
name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),f;for(f in a.AUDIO)for(var g in a.AUDIO[f])a.AUDIO[f][g].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});F.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",
name:"hls-aes"});F.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-
1)-a.tech_.currentTime():0;var f=a.bufferLowWaterLine();(!c.endList||a.duration()<E["default"].MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||d>=f)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});
this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",
function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();
this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<
a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList&&(b=function(){var b=a.seekable();if(!b.length)return{v:!1};if(A["default"].browser.IE_VERSION&&"html5"===a.mode_&&0===a.tech_.readyState())return a.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0));a.hasPlayed_=function(){return!0}}),
{v:!1};a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0))}(),"object"===typeof b))return b.v;this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(aa){return A["default"].log.warn("Failed to create Source Buffers",aa),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},
{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=a&&this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=F.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=u["default"].SAFE_TIME_DELTA;
c=c.end(c.length-1);return c-b<=u["default"].SAFE_TIME_DELTA&&a-c<=u["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(sa){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(p.isEnabled).length;if(d)return A["default"].log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});b=this.selectPlaylist();A["default"].log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&
this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=u["default"].findRange(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length&&"flash"!==this.mode_)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&
(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:F.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;
if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=F.Playlist.seekable(b,c);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===c)return;a=F.Playlist.seekable(b,c);if(0===a.length)return}a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=
d:this.seekable_=A["default"].createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=F.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),f=function ea(){a.mediaSource.duration=c;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",ea)};0<d.length&&(c=Math.max(c,
d.end(d.length-1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",f):f())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",
value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media();if(a&&"open"===this.mediaSource.readyState){var b=ia(this.masterPlaylistLoader_.master,a);if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(b[0]);
b[1]&&this.audioSegmentLoader_.mimeType(b[1]);this.excludeIncompatibleVariants_(a)}}},{key:"excludeIncompatibleVariants_",value:function(a){var b=this.masterPlaylistLoader_.master,c=2,d=null,f=void 0;a.attributes.CODECS&&(f=(0,x.parseCodecs)(a.attributes.CODECS),d=f.videoCodec,c=f.codecCount);b.playlists.forEach(function(a){var b={codecCount:2,videoCodec:null};if(a.attributes.CODECS){var f=a.attributes.CODECS;b=(0,x.parseCodecs)(f);window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+
M(f)+'"')&&(a.excludeUntil=Infinity)}b.codecCount!==c&&(a.excludeUntil=Infinity);b.videoCodec!==d&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));t["default"].updateAdCues(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=E["default"].GOAL_BUFFER_LENGTH;return Math.min(b+a*E["default"].GOAL_BUFFER_LENGTH_RATE,Math.max(b,E["default"].MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",
value:function(){var a=this.tech_.currentTime(),b=E["default"].BUFFER_LOW_WATER_LINE;return Math.min(b+a*E["default"].BUFFER_LOW_WATER_LINE_RATE,Math.max(b,E["default"].MAX_BUFFER_LOW_WATER_LINE))}}]);return b}(A["default"].EventTarget);b.MasterPlaylistController=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,
"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webwackify:76}],6:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var c=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},d=(a=f("./playlist-loader"))&&a.__esModule?a:{"default":a},g=function(){},k=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),
b.activePlaylistLoader=null)};b.stopLoaders=k;var l=function(a,b){b.activePlaylistLoader=a;a.load()};b.startLoaders=l;var n=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var f=b.mediaTypes[a],g=f.activeTrack();g=f.activeGroup(g);var h=f.activePlaylistLoader;k(d,f);g&&(g.playlistLoader?(d.resyncLoader(),l(g.playlistLoader,f)):h&&c.resetEverything())}};b.onGroupChanged=n;var p=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var f=b.mediaTypes[a],g=f.activeTrack(),
h=f.activeGroup(g),n=f.activePlaylistLoader;k(d,f);h&&(h.playlistLoader?(n!==h.playlistLoader&&(d.track&&d.track(g),d.resetEverything()),l(h.playlistLoader,f)):c.resetEverything())}};b.onTrackChanged=p;var r={AUDIO:function(a,b){return function(){var d=b.mediaTypes[a],f=b.blacklistCurrentPlaylist;k(b.segmentLoaders[a],d);var g=d.activeTrack(),h=d.activeGroup();h=(h.filter(function(a){return a["default"]})[0]||h[0]).id;h=d.tracks[h];if(g===h)f({message:"Problem encountered loading the default audio track."});
else{c["default"].log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var l in d.tracks)d.tracks[l].enabled=d.tracks[l]===h;d.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var d=b.segmentLoaders[a],f=b.mediaTypes[a];c["default"].log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");k(d,f);if(d=f.activeTrack())d.mode="disabled";f.onTrackChanged()}}};b.onError=r;var w={AUDIO:function(a,b,c){if(b){var d=c.tech,
f=c.requestOptions,g=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);(!d.paused()||a.endList&&"none"!==d.preload())&&g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",r[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,f=c.requestOptions,g=c.segmentLoaders[a],h=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);g.track(h.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&
g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",r[a](a,c))}};b.setupListeners=w;var u={AUDIO:function(a,b){var f=b.mode,g=b.hls,h=b.segmentLoaders[a],k=b.requestOptions.withCredentials,l=b.master.mediaGroups,n=b.mediaTypes[a],m=n.groups;n=n.tracks;l[a]&&0!==Object.keys(l[a]).length&&"html5"===f||(l[a]={main:{"default":{"default":!0}}});for(var p in l[a]){m[p]||(m[p]=[]);for(var t in l[a][p]){f=l[a][p][t];var u=f.resolvedUri?new d["default"](f.resolvedUri,
g,k):null;f=c["default"].mergeOptions({id:t,playlistLoader:u},f);w[a](a,f.playlistLoader,b);m[p].push(f);if("undefined"===typeof n[t]){u=c["default"].AudioTrack;var A=t,z=f["default"]?"main":"alternative";f.characteristics&&0<=f.characteristics.indexOf("public.accessibility.describes-video")&&(z="main-desc");f=new u({id:A,kind:z,enabled:!1,language:f.language,"default":f["default"],label:t});n[t]=f}}}h.on("error",r[a](a,b))},SUBTITLES:function(a,b){var f=b.tech,g=b.hls,h=b.segmentLoaders[a],k=b.requestOptions.withCredentials,
l=b.master.mediaGroups,n=b.mediaTypes[a],m=n.groups;n=n.tracks;for(var p in l[a]){m[p]||(m[p]=[]);for(var t in l[a][p])if(!l[a][p][t].forced){var u=l[a][p][t];u=c["default"].mergeOptions({id:t,playlistLoader:new d["default"](u.resolvedUri,g,k)},u);w[a](a,u.playlistLoader,b);m[p].push(u);"undefined"===typeof n[t]&&(u=f.addRemoteTextTrack({id:t,kind:"subtitles",enabled:!1,language:u.language,label:t},!1).track,n[t]=u)}}h.on("error",r[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var d=b.tech,f=b.master.mediaGroups,
g=b.mediaTypes[a];b=g.groups;g=g.tracks;for(var h in f[a]){b[h]||(b[h]=[]);for(var k in f[a][h]){var l=f[a][h][k];l.instreamId.match(/CC\d/)&&(b[h].push(c["default"].mergeOptions({id:k},l)),"undefined"===typeof g[k]&&(l=d.addRemoteTextTrack({id:l.instreamId,kind:"captions",enabled:!1,language:l.language,label:k},!1).track,g[k]=l))}}}};b.initialize=u;var A=function(a,b){return function(c){var d=b.mediaTypes[a].groups,f=b.masterPlaylistLoader.media();if(!f)return null;var g=null;f.attributes[a]&&(g=
d[f.attributes[a]]);g=g||d.main;return"undefined"===typeof c?g:null===c?null:g.filter(function(a){return a.id===c.id})[0]||null}};b.activeGroup=A;var t={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode)return c[d];return null}}};b.activeTrack=t;b.setupMediaGroups=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){u[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,f=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=A(c,a);b[c].activeTrack=t[c](c,a);b[c].onGroupChanged=n(c,a);b[c].onTrackChanged=p(c,a)});var g=b.AUDIO.activeGroup();g=(g.filter(function(a){return a["default"]})[0]||g[0]).id;b.AUDIO.tracks[g].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var h=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",h);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);f.on("dispose",function(){d.audioTracks().removeEventListener("change",h);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var k in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[k])};b.createMediaTypes=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:g,activeTrack:g,onGroupChanged:g,onTrackChanged:g}});return a}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist-loader":9}],7:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var c=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},d=f("./bin-utils"),g={FAILURE:2,TIMEOUT:-101,
ABORTED:-102};b.REQUEST_ERRORS=g;var k=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},l=function(a){a.forEach(function(a){a.abort()})},n=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},p=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+
b.uri,code:g.TIMEOUT,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:g.ABORTED,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:g.FAILURE,xhr:b}:null},r=function(a,b){return function(c,d){var f=d.response;if(c=p(c,d))return b(c,a);if(16!==f.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:g.FAILURE,xhr:d},a);d=new DataView(f);a.key.bytes=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]);
return b(null,a)}},w=function(a,b){return function(c,d){var f=d.response;if(c=p(c,d))return b(c,a);if(0===f.byteLength)return b({status:d.status,message:"Empty HLS segment content at URL: "+d.uri,code:g.FAILURE,xhr:d},a);a.map.bytes=new Uint8Array(d.response);return b(null,a)}},u=function(a,b){return function(c,d){var f=d.response;if(c=p(c,d))return b(c,a);if(0===f.byteLength)return b({status:d.status,message:"Empty HLS segment content at URL: "+d.uri,code:g.FAILURE,xhr:d},a);a.stats={bandwidth:d.bandwidth,
bytesReceived:d.bytesReceived||0,roundTripTime:d.roundTripTime||0};a.key?a.encryptedBytes=new Uint8Array(d.response):a.bytes=new Uint8Array(d.response);return b(null,a)}},A=function(a,b,c){a.addEventListener("message",function F(d){if(d.data.source===b.requestId)return a.removeEventListener("message",F),d=d.data.decrypted,b.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),c(null,b)});a.postMessage((0,d.createTransferableMessage)({source:b.requestId,encrypted:b.encryptedBytes,key:b.key.bytes,
iv:b.key.iv}),[b.encryptedBytes.buffer,b.key.bytes.buffer])},t=function(a){return a.reduce(function(a,b){return b.code>a.code?b:a})},z=function(a,b,c){var d=[],f=0;return function(g,h){g&&(l(a),d.push(g));f+=1;if(f===a.length)return h.endOfAllRequests=Date.now(),0<d.length?(g=t(d),c(g,h)):h.encryptedBytes?A(b,h,c):c(null,h)}},B=function(a,b){return function(d){a.stats=c["default"].mergeOptions(a.stats,n(d));!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());
return b(d,a)}};b.mediaSegmentRequest=function(a,b,d,f,g,h){var m=[];d=z(m,d,h);if(f.key){h=c["default"].mergeOptions(b,{uri:f.key.resolvedUri,responseType:"arraybuffer"});var n=r(f,d);h=a(h,n);m.push(h)}f.map&&!f.map.bytes&&(h=c["default"].mergeOptions(b,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:k(f.map)}),n=w(f,d),h=a(h,n),m.push(h));b=c["default"].mergeOptions(b,{uri:f.resolvedUri,responseType:"arraybuffer",headers:k(f)});d=u(f,d);a=a(b,d);a.addEventListener("progress",B(f,g));
m.push(a);return function(){return l(m)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2}],8:[function(f,c,b){(function(a){function h(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=f("global/window"),k=h(g);g=f("./ranges");var l=h(g),n=h("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),p=["seeking","seeked","pause","playing","error"];a=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.tech_=b.tech;this.seekable=b.seekable;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;b.debug&&
(this.logger_=n["default"].log.bind(n["default"],"playback-watcher ->"));this.logger_("initialize");var d=function(){return c.monitorCurrentTime_()},f=function(){return c.techWaiting_()},g=function(){return c.cancelTimer_()},h=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",h);this.tech_.on("waiting",f);this.tech_.on(p,g);this.tech_.on("canplay",d);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",h);c.tech_.off("waiting",f);c.tech_.off(p,g);c.tech_.off("canplay",
d);c.checkCurrentTimeTimeout_&&k["default"].clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}d(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&k["default"].clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=k["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();
else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+l["default"].SAFE_TIME_DELTA>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&
(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),b=this.seekable(),c=this.tech_.currentTime(),d=void 0;a&&this.afterSeekableWindow_(b,c)&&(d=b.end(b.length-1));a&&this.beforeSeekableWindow_(b,c)&&(d=b.start(0)+l["default"].SAFE_TIME_DELTA);return"undefined"!==typeof d?(this.logger_("Trying to seek outside of seekable at time "+c+" with "+("seekable range "+l["default"].printableRange(b)+". Seeking to ")+(d+
".")),this.tech_.setCurrentTime(d),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=l["default"].findRange(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",
value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var c=this.tech_.buffered();a=l["default"].findNextRange(c,b);return this.videoUnderflow_(a,
c,b)?(this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b){return a.length?b>a.end(a.length-1)+l["default"].SAFE_TIME_DELTA?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&
b<a.start(0)-l["default"].SAFE_TIME_DELTA?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();b=l["default"].findNextRange(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",
a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+l["default"].TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){a=l["default"].findGaps(a);for(var c=0;c<a.length;c++){var d=a.start(c),f=a.end(c);if(4>b-d&&2<b-d)return{start:d,end:f}}return null}},{key:"logger_",value:function(){}}]);return a}();b["default"]=a;c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./ranges":12,"global/window":32}],9:[function(f,c,b){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,
"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},l=f("./resolve-url"),n=c(l),p="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null;a=f("m3u8-parser");var r=c(a);a=f("global/window");var w=c(a),u=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+c);for(var f=c;f<b;f++)d[f-c]=(0,p.mergeOptions)(a[f],d[f-c]);return d};b.updateSegments=u;var A=function(a,b){a.resolvedUri||(a.resolvedUri=(0,n["default"])(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=(0,n["default"])(b,a.key.uri));
a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=(0,n["default"])(b,a.map.uri))};b.resolveSegmentUris=A;var t=function(a,b){a=(0,p.mergeOptions)(a,{});var c=a.playlists.filter(function(a){return a.uri===b.uri})[0];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.mediaSequence===b.mediaSequence)return null;var d=(0,p.mergeOptions)(c,b);c.segments&&(d.segments=u(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){A(a,d.resolvedUri)});for(c=0;c<
a.playlists.length;c++)a.playlists[c].uri===b.uri&&(a.playlists[c]=d);a.playlists[b.uri]=d;return a};b.updateMaster=t;var z=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=(0,n["default"])(a.uri,c.uri);c.attributes||(c.attributes={},p.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};b.setupMediaPlaylists=z;var B=function(a){["AUDIO","SUBTITLES"].forEach(function(b){for(var c in a.mediaGroups[b])for(var d in a.mediaGroups[b][c]){var f=
a.mediaGroups[b][c][d];f.uri&&(f.resolvedUri=(0,n["default"])(a.uri,f.uri))}})};b.resolveMediaGroupUris=B;var D=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)};b.refreshDelay=D;a=function(a){function b(a,c,d){var f=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this.srcUrl=a;this.hls_=c;this.withCredentials=d;if(!this.srcUrl)throw Error("A non-empty playlist URL is required");
this.state="HAVE_NOTHING";this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===f.state&&(f.state="HAVE_CURRENT_METADATA",f.request=f.hls_.xhr({uri:(0,n["default"])(f.master.uri,f.media().uri),withCredentials:f.withCredentials},function(a,b){if(f.request){if(a)return f.playlistRequestError(f.request,f.media().uri,"HAVE_METADATA");f.haveMetadata(f.request,f.media().uri)}}))})}d(b,a);g(b,[{key:"playlistRequestError",value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],
status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var d=new r["default"].Parser;d.push(a.responseText);d.end();d.manifest.uri=b;d.manifest.attributes=d.manifest.attributes||{};a=t(this.master,d.manifest);this.targetDuration=d.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[d.manifest.uri]):
this.trigger("playlistunchanged");this.media().endList||(w["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=w["default"].setTimeout(function(){c.trigger("mediaupdatetimeout")},D(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();w["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",
value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&
(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d){this.state="SWITCHING_MEDIA";if(this.request){if((0,n["default"])(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:(0,n["default"])(this.master.uri,a.uri),withCredentials:this.withCredentials},function(d,f){if(b.request){if(d)return b.playlistRequestError(b.request,a.uri,c);b.haveMetadata(f,
a.uri);"HAVE_MASTER"===c?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();w["default"].clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=this;w["default"].clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=
w["default"].setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===
a.state&&(a.started=!1),a.trigger("error");b=new r["default"].Parser;b.push(c.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,z(a.master),B(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:w["default"].location.href,playlists:[{uri:a.srcUrl}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.master.playlists[0].resolvedUri=
a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(c,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return b}(p.EventTarget);b["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=(c=f("./config"))&&c.__esModule?c:{"default":c},h=(c=f("./playlist"))&&
c.__esModule?c:{"default":c},d=f("./util/codecs.js"),g=function(a,b){return a?(a=window.getComputedStyle(a))?a[b]:"":""},k=function(a,b){var c=a.slice();a.sort(function(a,d){var f=b(a,d);return 0===f?c.indexOf(a)-c.indexOf(d):f})},l=function(a,b){var c=void 0,d=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||window.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||window.Number.MAX_VALUE;return c-d};b.comparePlaylistBandwidth=l;b.comparePlaylistResolution=function(a,
b){var c=void 0,d=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||window.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);d=d||window.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d};var n=function(b,c,d,f){b=b.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var c=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var d=(d=a.attributes.BANDWIDTH)||window.Number.MAX_VALUE;return{bandwidth:d,width:b,height:c,playlist:a}});k(b,function(a,b){return a.bandwidth-b.bandwidth});b=b.filter(function(a){return!h["default"].isIncompatible(a.playlist)});var g=b.filter(function(a){return h["default"].isEnabled(a.playlist)});g.length||(g=b.filter(function(a){return!h["default"].isDisabled(a.playlist)}));var l=g.filter(function(b){return b.bandwidth*a["default"].BANDWIDTH_VARIANCE<c}),n=l[l.length-
1],p=l.filter(function(a){return a.bandwidth===n.bandwidth})[0];l=l.filter(function(a){return a.width&&a.height});k(l,function(a,b){return a.width-b.width});var r=l.filter(function(a){return a.width===d&&a.height===f});n=r[r.length-1];r=r.filter(function(a){return a.bandwidth===n.bandwidth})[0];var u=void 0,w=void 0;w=void 0;r||(u=l.filter(function(a){return a.width>d||a.height>f}),w=u.filter(function(a){return a.width===u[0].width&&a.height===u[0].height}),n=w[w.length-1],w=w.filter(function(a){return a.bandwidth===
n.bandwidth})[0]);return(b=w||r||p||g[0]||b[0])?b.playlist:null};b.simpleSelector=n;b.lastBandwidthSelector=function(){return n(this.playlists.master,this.systemBandwidth,parseInt(g(this.tech_.el(),"width"),10),parseInt(g(this.tech_.el(),"height"),10))};b.movingAverageBandwidthSelector=function(a){var b=-1;if(0>a||1<a)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){0>b&&(b=this.systemBandwidth);b=a*this.systemBandwidth+(1-a)*b;return n(this.playlists.master,
b,parseInt(g(this.tech_.el(),"width"),10),parseInt(g(this.tech_.el(),"height"),10))}};b.minRebufferMaxBandwidthSelector=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,n=a.currentTimeline,p=a.syncController;a=a.master.playlists.filter(function(a){return!h["default"].isIncompatible(a)});var D=a.filter(h["default"].isEnabled);D.length||(D=a.filter(function(a){return!h["default"].isDisabled(a)}));a=D.filter(h["default"].hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var k=
p.getSyncPoint(a,d,n,b)?1:2;k=h["default"].estimateSegmentRequestTime(f,c,a)*k-g;return{playlist:a,rebufferingImpact:k}});D=a.filter(function(a){return 0>=a.rebufferingImpact});k(D,function(a,b){return l(b.playlist,a.playlist)});if(D.length)return D[0];k(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null};b.lowestBitrateCompatibleVariantSelector=function(){var a=this.playlists.master.playlists.filter(h["default"].isEnabled);k(a,function(a,b){return l(a,b)});return a.filter(function(a){return(0,
d.parseCodecs)(a.attributes.CODECS).videoCodec})[0]||null}},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var c="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null,d=(a=f("global/window"))&&a.__esModule?a:{"default":a},g=function(a,b){var c=0;b-=a.mediaSequence;var d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-
d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=d.duration;if("undefined"!==typeof d.start)return{result:c+d.start,precise:!0}}return{result:c,precise:!1}},k=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;var d=g(a,b);if(d.precise)return d.result;a:{var f=0;for(var h=b-a.mediaSequence;h<a.segments.length;h++){b=a.segments[h];if("undefined"!==typeof b.start){a=b.start-f;
f=!0;break a}f+=b.duration;if("undefined"!==typeof b.end){a=b.end-f;f=!0;break a}}a=-1;f=!1}return f?a:d.result+c},l=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return d["default"].Infinity}return k(a,b,c)};b.duration=l;var n=function(a,b,c){var d=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)d+=a.targetDuration;b=0}for(;b<c;b++)d+=a.segments[b].duration;return d};b.sumDurations=n;var p=
function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,d=c+2*a.targetDuration;b--&&!(c+=a.segments[b].duration,c>=d););return Math.max(0,b)};b.safeLiveIndex=p;var r=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return l(a);if(null===b)return null;b=b||0;c=c?p(a):a.segments.length;return k(a,a.mediaSequence+c,b)};b.playlistEnd=r;a=function(a,b){var d=b||0;a=r(a,b,!0);return null===a?(0,c.createTimeRange)():(0,c.createTimeRange)(d,
a)};b.seekable=a;var w=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var f=Math.pow(10,d),g=b*f;if(0===g-Math.floor(g)||d===c)return(g+a)/f}},u=w.bind(null,1),A=w.bind(null,-1);w=function(a,b,c,d){var f,g=a.segments.length,h=b-d;if(0>h){if(0<c)for(f=c-1;0<=f;f--){var k=a.segments[f];h+=A(k.duration);if(0<h)return{mediaIndex:f,startTime:d-n(a,c,f)}}return{mediaIndex:0,startTime:b}}if(0>c){for(f=c;0>f;f++)if(h-=a.targetDuration,0>h)return{mediaIndex:0,
startTime:b};c=0}for(f=c;f<g;f++)if(k=a.segments[f],h-=u(k.duration),0>h)return{mediaIndex:f,startTime:d+n(a,c,f)};return{mediaIndex:g-1,startTime:b}};b.getMediaInfoForTime=w;var t=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()};b.isBlacklisted=t;var z=function(a){return a.excludeUntil&&Infinity===a.excludeUntil};b.isIncompatible=z;var B=function(a){var b=t(a);return!a.disabled&&!b};b.isEnabled=B;var D=function(a){return a.disabled};b.isDisabled=D;var y=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;
return!1};b.isAes=y;var E=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1};b.isFmp4=E;var x=function(a,b){return b.attributes&&b.attributes[a]};b.hasAttribute=x;var H=function(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?0:arguments[3];return x("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN};b.estimateSegmentRequestTime=H;var F=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return B(a)?
(a.attributes.BANDWIDTH||0)<c:!1}).length};b.isLowestEnabledRendition=F;b["default"]={duration:l,seekable:a,safeLiveIndex:p,getMediaInfoForTime:w,isEnabled:B,isDisabled:D,isBlacklisted:t,isIncompatible:z,playlistEnd:r,isAes:y,isFmp4:E,hasAttribute:x,estimateSegmentRequestTime:H,isLowestEnabledRendition:F}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],12:[function(f,c,b){(function(a){Object.defineProperty(b,
"__esModule",{value:!0});var f=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=!1,g=void 0;try{for(var h=a[Symbol.iterator](),k;!(d=(k=h.next()).done)&&(c.push(k.value),!b||c.length!==b);d=!0);}catch(D){f=!0,g=D}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),d=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?
a.videojs:null)&&a.__esModule?a:{"default":a},g=1/30,k=function(a,b){b=f(b,2);return Math.min(Math.max(b[0],a),b[1])},l=function(a,b){var c=[],f;if(a&&a.length)for(f=0;f<a.length;f++)b(a.start(f),a.end(f))&&c.push([a.start(f),a.end(f)]);return d["default"].createTimeRanges(c)},n=function(a,b){var c=null,f=null,g=0,h=[],k=[];if(!(a&&a.length&&b&&b.length))return d["default"].createTimeRange();for(var l=a.length;l--;)h.push({time:a.start(l),type:"start"}),h.push({time:a.end(l),type:"end"});for(l=b.length;l--;)h.push({time:b.start(l),
type:"start"}),h.push({time:b.end(l),type:"end"});h.sort(function(a,b){return a.time-b.time});for(l=0;l<h.length;l++)"start"===h[l].type?(g++,2===g&&(c=h[l].time)):"end"===h[l].type&&(g--,1===g&&(f=h[l].time)),null!==c&&null!==f&&(k.push([c,f]),f=c=null);return d["default"].createTimeRanges(k)};b["default"]={findRange:function(a,b){return l(a,function(a,c){return a-g<=b&&c+g>=b})},findNextRange:function(a,b){return l(a,function(a){return a-g>=b})},findGaps:function(a){if(2>a.length)return d["default"].createTimeRanges();
for(var b=[],c=1;c<a.length;c++){var f=a.end(c-1),g=a.start(c);b.push([f,g])}return d["default"].createTimeRanges(b)},findSoleUncommonTimeRangesEnd:function(a,b){var c=void 0,d=void 0,f=void 0,g=[],h=[],k=function(a){return a[0]<=f&&a[1]>=f};if(a)for(c=0;c<a.length;c++)d=a.start(c),f=a.end(c),h.push([d,f]);if(b)for(c=0;c<b.length;c++)d=b.start(c),f=b.end(c),h.some(k)||g.push(f);return 1!==g.length?null:g[0]},getSegmentBufferedPercent:function(a,b,c,f){b=a+b;var g=d["default"].createTimeRanges([[a,
b]]),h=d["default"].createTimeRanges([[k(a,[c,b]),b]]);if(h.start(0)===h.end(0))return 0;a=g.end(0)-g.start(0);b=h.end(0)-h.start(0);b=a-b;h=n(h,f);f=n(g,f);for(var l=g=0,p=h.length;p--;)g+=h.end(p)-h.start(p),h.start(p)===c&&(g+=b);for(p=f.length;p--;)l+=f.end(p)-f.start(p);c=Math.max(g,l)/a*100;return isNaN(c)||Infinity===c||-Infinity===c?0:c},TIME_FUDGE_FACTOR:g,SAFE_TIME_DELTA:3*g,printableRange:function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+
a.end(c));return b.join(", ")},timeUntilRebuffer:function(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return((a.length?a.end(a.length-1):0)-b)/c}};c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],13:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var f=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?
a:{"default":a},d={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},g=function p(a,b){var c=0,g=0,h=f["default"].mergeOptions(d,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var l=function(){g&&a.currentTime(g)},n=function(b){null!==b&&void 0!==b&&(g=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",l),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},z=function(){if(Date.now()-
c<1E3*h.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(h.getSource&&"function"===typeof h.getSource)return c=Date.now(),h.getSource.call(a,n);f["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},B=function y(){a.off("loadedmetadata",l);a.off("error",z);a.off("dispose",y)};a.on("error",z);a.on("dispose",B);a.reloadSourceOnError=function(b){B();p(a,b)}};b["default"]=function(a){g(this,a)};c.exports=b["default"]}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],14:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=f("./playlist.js"),h=function(b,c,d){return function(f){var g=b.master.playlists[c],h=(0,a.isIncompatible)(g),k=(0,a.isEnabled)(g);if("undefined"===typeof f)return k;f?delete g.disabled:g.disabled=!0;f===k||h||(d(),f?b.trigger("renditionenabled"):b.trigger("renditiondisabled"));return f}},d=function p(a,b,c){if(!(this instanceof
p))throw new TypeError("Cannot call a class as a function");var d=a.masterPlaylistController_.fastQualityChange_.bind(a.masterPlaylistController_);if(b.attributes.RESOLUTION){var f=b.attributes.RESOLUTION;this.width=f.width;this.height=f.height}this.bandwidth=b.attributes.BANDWIDTH;this.id=c;this.enabled=h(a.playlists,b.uri,d)};b["default"]=function(b){var c=b.playlists;b.representations=function(){return c.master.playlists.filter(function(b){return!(0,a.isIncompatible)(b)}).map(function(a,c){return new d(b,
a,a.uri)})}};c.exports=b["default"]},{"./playlist.js":11}],15:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=f("url-toolkit"),h=a&&a.__esModule?a:{"default":a},d=(f=f("global/window"))&&f.__esModule?f:{"default":f};b["default"]=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=h["default"].buildAbsoluteURL(d["default"].location.href,a));return h["default"].buildAbsoluteURL(a,b)};c.exports=b["default"]},{"global/window":32,"url-toolkit":63}],16:[function(f,
c,b){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("./playlist"),n=c(l),p=c("undefined"!==typeof window?window.videojs:
"undefined"!==typeof a?a.videojs:null);a=f("./source-updater");var r=c(a);a=f("./config");var w=c(a);a=f("global/window");var u=c(a);a=f("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var A=c(a),t=f("./bin-utils"),z=f("./media-segment-request"),B=f("./ranges"),D=f("./playlist-selectors"),y=function(a,b,c){if(!a||!b)return!1;c=c===a.segments.length;return a.endList&&"open"===b.readyState&&c},E=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&
!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};b.illegalMediaSwitch=
E;var x=function(a,b,c){a=a.length&&0<a.start(0)&&a.start(0)<b?a.start(0):b-30;return Math.min(a,b-c)};b.safeBackBufferTrimTime=x;a=function(a){function b(a){var c=this,d=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT";this.bandwidth=a.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=a.hasPlayed;this.currentTime_=a.currentTime;this.seekable_=a.seekable;this.seeking_=a.seeking;this.duration_=a.duration;this.mediaSource_=a.mediaSource;this.hls_=a.hls;this.loaderType_=a.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=a.segmentMetadataTrack;this.goalBufferLength_=
a.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.activeInitSegmentId_=this.xhrOptions_=this.sourceUpdater_=this.mimeType_=this.pendingSegment_=null;this.initSegments_={};this.decrypter_=a.decrypter;this.syncController_=a.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",function(){return c.trigger("syncinfoupdate")});this.mediaSource_.addEventListener("sourceopen",function(){return c.ended_=!1});this.fetchAtBuffer_=
!1;d.debug&&(this.logger_=p["default"].log.bind(p["default"],"segment-loader",this.loaderType_,"->"))}d(b,a);g(b,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_()}},{key:"abort",value:function(){"WAITING"!==
this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?
this.sourceUpdater_.buffered():p["default"].createTimeRanges()}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,t.initSegmentId)(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},
{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new r["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=
1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("mediaSequenceDiff",b),null!==this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),
this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(u["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a){this.mimeType_||(this.mimeType_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1;this.resetLoader();
this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b);(0,A["default"])(a,b,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&u["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=
u["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&u["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=u["default"].setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,
this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(y(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=
a.startOfSegment;this.loadSegment_(a)}}}},{key:"checkBuffer_",value:function(a,b,c,d,f,g){var h=0;a.length&&(h=a.end(a.length-1));a=Math.max(0,h-f);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;this.logger_("checkBuffer_","mediaIndex:",c,"hasPlayed:",d,"currentTime:",f,"syncPoint:",g,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",a);if(null===g)return c=this.getSyncSegmentCandidate_(b),this.logger_("getSync","mediaIndex:",c),this.generateSegmentInfo_(b,c,null,!0);
if(null!==c)return this.logger_("walkForward","mediaIndex:",c+1),h=(d=b.segments[c])&&d.end?d.end:h,this.generateSegmentInfo_(b,c+1,h,!1);h=this.fetchAtBuffer_?n["default"].getMediaInfoForTime(b,h,g.segmentIndex,g.time):n["default"].getMediaInfoForTime(b,f,g.segmentIndex,g.time);c=h.mediaIndex;h=h.startTime;this.logger_("getMediaIndexForTime","mediaIndex:",c,"startOfSegment:",h);return this.generateSegmentInfo_(b,c,h,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;
var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,d){if(0>b||b>=a.segments.length)return null;var f=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:f.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,
timeline:f.timeline,duration:f.duration,segment:f}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,f=n["default"].estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived);a=(0,B.timeUntilRebuffer)(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(f<=a)return!1;if(b=
(0,D.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=f-a-b.rebufferingImpact;d=.5;a<=B.TIME_FUDGE_FACTOR&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||c<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*w["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",
value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=(0,z.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){a=x(this.seekable_(),
this.currentTime_(),this.playlist_.targetDuration||10);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key={resolvedUri:b.key.resolvedUri,iv:a});b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=
b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",a.code===z.REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:(this.pause(),a.code===z.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,
this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"===
typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});(d=E(this.loaderType_,this.startingMedia_,d))?(this.error({message:d,blacklistDuration:Infinity}),this.trigger("error")):b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),
this.trigger("timestampoffset")),d=this.syncController_.mappingForTimeline(b.timeline),null!==d&&this.trigger({type:"segmenttimemapping",mapping:d}),this.state="APPENDING",c.map&&function(){var b=(0,t.initSegmentId)(c.map);if(!a.activeInitSegmentId_||a.activeInitSegmentId_!==b){var d=a.initSegment(c.map);a.sourceUpdater_.appendBuffer(d.bytes,function(){a.activeInitSegmentId_=b})}}(),b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+
(c.end-c.start):this.mediaSecondsLoaded+c.duration,this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this)))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=
!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),y(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=
(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start;b=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof b&&isFinite(b)){(0,A["default"])(c,b,this.segmentMetadataTrack_);var d=u["default"].WebKitDataCue||u["default"].VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,
byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:b};var f=JSON.stringify(a);c=new d(c,b,f);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return b}(p["default"].EventTarget);b["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,
"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:
{"default":a},g=function(){};a=function(){function a(b,c){var d=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var f=function(){d.sourceBuffer_=b.addSourceBuffer(c);d.onUpdateendCallback_=function(){var a=d.pendingCallback_;d.pendingCallback_=null;a&&a();d.runCallback_()};d.sourceBuffer_.addEventListener("updateend",d.onUpdateendCallback_);d.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=
!1;"closed"===b.readyState?b.addEventListener("sourceopen",f):f()}f(a,[{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){c.sourceBuffer_.appendBuffer(a)},b)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:d["default"].createTimeRanges()}},{key:"remove",value:function(a,b){var c=
this;this.processedAppend_&&this.queueCallback_(function(){c.sourceBuffer_.remove(a,b)},g)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},
{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return a}();b["default"]=a;c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{}],18:[function(f,c,b){(function(a){function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=f("mux.js/lib/mp4/probe"),k=g&&g.__esModule?g:{"default":g},l=f("mux.js/lib/tools/ts-inspector.js"),n=f("./playlist"),p=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},r=[{name:"VOD",run:function(a,b,c,d,f){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",
run:function(a,b,c,d,f){return a.datetimeToDisplayTime&&b.dateTimeObject?{time:b.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(a,b,c,d,f){a=b.segments||[];c=b=null;f=f||0;for(var g=0;g<a.length;g++){var h=a[g];if(h.timeline===d&&"undefined"!==typeof h.start){var k=Math.abs(f-h.start);if(null!==c&&c<k)break;if(!b||null===c||c>=k)c=k,b={time:h.start,segmentIndex:g}}}return b}},{name:"Discontinuity",run:function(a,b,c,d,f){c=null;f=f||0;if(b.discontinuityStarts&&
b.discontinuityStarts.length){d=null;for(var g=0;g<b.discontinuityStarts.length;g++){var h=b.discontinuityStarts[g],k=a.discontinuities[b.discontinuitySequence+g+1];if(k){var l=Math.abs(f-k.time);if(null!==d&&d<l)break;if(!c||null===d||d>=l)d=l,c={time:k.time,segmentIndex:h}}}}return c}},{name:"Playlist",run:function(a,b,c,d,f){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}];b.syncPointStrategies=r;a=function(a){function b(){var a=0>=arguments.length||
void 0===arguments[0]?{}:arguments[0];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a:{var c=Object.getPrototypeOf(b.prototype),d="constructor";var f=this;var g=!0;for(;g;)if(null===c&&(c=Function.prototype),g=Object.getOwnPropertyDescriptor(c,d),void 0===g){c=Object.getPrototypeOf(c);if(null===c)break;g=!0}else{if("value"in g){f=g.value;break a}d=g.get;f=void 0===d?void 0:d.call(f);break a}f=void 0}f.call(this);this.inspectCache_=void 0;this.timelines=[];this.discontinuities=
[];this.datetimeToDisplayTime=null;a.debug&&(this.logger_=p["default"].log.bind(p["default"],"sync-controller ->"))}c(b,a);d(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=
-1);return Math.abs(b.time+(0,n.sumDurations)(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var f=[],g=0;g<r.length;g++){var h=r[g],k=h.run(this,a,b,c,d);k&&(k.strategy=h.name,f.push({strategy:h.name,syncPoint:k}),this.logger_("syncPoint found via <"+h.name+">:",k))}return f}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),f=a[0].strategy,g=1;g<a.length;g++){var h=Math.abs(a[g].syncPoint[b.key]-b.value);h<d&&
(d=h,c=a[g].syncPoint,f=a[g].strategy)}this.logger_("syncPoint with strategy <"+f+"> chosen: ",c);return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist sync:",b.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.dateTimeObject&&
(this.datetimeToDisplayTime=-(a.dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=k["default"].timescale(b.map.bytes);
c=k["default"].startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){a=(0,l.inspect)(a.bytes,this.inspectCache_);var b=void 0,c=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,c=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,c=a.audio[1].dtsTime);return{start:b,end:c,containsVideo:a.video&&
2===a.video.length,containsAudio:a.audio&&2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)this.logger_("tsO:",a.timestampOffset),d={time:a.startOfSegment,
mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var f=b.discontinuityStarts[d],g=
b.discontinuitySequence+d+1,h=f-a.mediaIndex,k=Math.abs(h);if(!this.discontinuities[g]||this.discontinuities[g].accuracy>k)f=0>h?c.start-(0,n.sumDurations)(b,a.mediaIndex,f):c.end+(0,n.sumDurations)(b,a.mediaIndex+1,f),this.discontinuities[g]={time:f,accuracy:k}}}},{key:"logger_",value:function(){}}]);return b}(p["default"].EventTarget);b["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,
"mux.js/lib/tools/ts-inspector.js":59}],19:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});b.parseCodecs=function(){var a=0>=arguments.length||void 0===arguments[0]?"":arguments[0],b={codecCount:0},c;b.codecCount=a.split(",").length;b.codecCount=b.codecCount||2;if(c=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(a))b.videoCodec=c[2],b.videoObjectTypeIndicator=c[3];b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);b.audioProfile=b.audioProfile&&b.audioProfile[2];return b}},{}],
20:[function(f,c,b){(function(a){function h(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=f("./segment-loader");k=h(k);var l=h("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=f("global/window");var n=h(a);a=f("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var p=h(a),r=f("./bin-utils"),w=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)}));
k=function(a){function b(a){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a:{var d=Object.getPrototypeOf(b.prototype),f="constructor";var g=this;var h=!0;for(;h;)if(null===d&&(d=Function.prototype),h=Object.getOwnPropertyDescriptor(d,f),void 0===h){d=Object.getPrototypeOf(d);if(null===d)break;h=!0}else{if("value"in h){g=h.value;break a}f=h.get;g=void 0===f?void 0:f.call(g);break a}g=void 0}g.call(this,
a,c);this.subtitlesTrack_=this.mediaSource_=null}d(b,a);g(b,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return l["default"].createTimeRanges();var a=this.subtitlesTrack_.cues;return l["default"].createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,r.initSegmentId)(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=
new Uint8Array(w.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(w,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=
a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){(0,p["default"])(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===
this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state=
"APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof n["default"].WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=function(){var b=function(){a.handleSegment_()};a.state="WAITING_ON_VTTJS";a.subtitlesTrack_.tech_.one("vttjsloaded",b);a.subtitlesTrack_.tech_.one("vttjserror",function(){a.subtitlesTrack_.tech_.off("vttjsloaded",b);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")});return{v:void 0}}();if("object"===typeof d)return d.v}c.requested=
!0;try{this.parseVTTCues_(b)}catch(y){return this.error({message:y.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),
this.handleUpdateEnd_())}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof n["default"].TextDecoder?b=new n["default"].TextDecoder("utf8"):(b=n["default"].WebVTT.StringDecoder(),c=!0);b=new n["default"].WebVTT.Parser(n["default"],n["default"].vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=function(b){return a.timestampmap=b};b.onparsingerror=function(a){l["default"].log.warn("Error encountered when parsing cues: "+
a.message)};if(a.segment.map){var d=a.segment.map.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d)}d=a.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var f=a.timestampmap,g=f.MPEGTS/9E4-f.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=g;a.endTime+=g});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-
1].startTime-d.duration)})}else d.empty=!0}}]);return b}(k["default"]);b["default"]=k;c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(f,c,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var f="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?
a.videojs:null,d=f&&f.__esModule?f:{"default":f};b["default"]=function(){return function n(a,b){a=(0,f.mergeOptions)({timeout:45E3},a);var c=n.beforeRequest||d["default"].Hls.xhr.beforeRequest;c&&"function"===typeof c&&(c=c(a))&&(a=c);var h=(0,f.xhr)(a,function(a,c){var d=h.response;!a&&d&&(h.responseTime=Date.now(),h.roundTripTime=h.responseTime-h.requestTime,h.bytesReceived=d.byteLength||d.length,h.bandwidth||(h.bandwidth=Math.floor(h.bytesReceived/h.roundTripTime*8E3)));a&&"ETIMEDOUT"===a.code&&
(h.timedout=!0);a||h.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(a=Error("XHR Failed with a response of: "+(h&&(d||h.responseText))));b(a,h)}),k=h.abort;h.abort=function(){h.aborted=!0;return k.apply(h,arguments)};h.uri=a.uri;h.requestTime=Date.now();return h}};c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],22:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=
function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=null;f=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(!h){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],d=c[0],f=c[1],g=d[4],r=f[4],w,u,A,t=[],z=[],B;for(w=0;256>w;w++)z[(t[w]=w<<1^283*(w>>7))^w]=w;
for(u=A=0;!g[u];u^=B||1,A=z[A]||1){var D=A^A<<1^A<<2^A<<3^A<<4;D=D>>8^D&255^99;g[u]=D;r[D]=u;var y=t[w=t[B=t[u]]];var E=16843009*y^65537*w^257*B^16843008*u;y=257*t[D]^16843008*D;for(w=0;4>w;w++)d[w][u]=y=y<<24^y>>>8,f[w][D]=E=E<<24^E>>>8}for(w=0;5>w;w++)d[w]=d[w].slice(0),f[w]=f[w].slice(0);h=c}this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];c=this._tables[0][4];d=this._tables[1];
u=a.length;A=1;if(4!==u&&6!==u&&8!==u)throw Error("Invalid aes key size");g=a.slice(0);r=[];this._key=[g,r];for(a=u;a<4*u+28;a++){f=g[a-1];if(0===a%u||8===u&&4===a%u)f=c[f>>>24]<<24^c[f>>16&255]<<16^c[f>>8&255]<<8^c[f&255],0===a%u&&(f=f<<8^f>>>24^A<<24,A=A<<1^283*(A>>7));g[a]=g[a-u]^f}for(u=0;a;u++,a--)f=g[u&3?a:a-4],r[u]=4>=a||4>u?f:d[0][c[f>>>24]]^d[1][c[f>>16&255]]^d[2][c[f>>8&255]]^d[3][c[f&255]]}a(b,[{key:"decrypt",value:function(a,b,c,d,f,h){var g=this._key[1];a^=g[0];d^=g[1];c^=g[2];b^=g[3];
var k=g.length/4-2,l,n=4;var p=this._tables[1];var r=p[0],D=p[1],y=p[2],E=p[3],x=p[4];for(l=0;l<k;l++){p=r[a>>>24]^D[d>>16&255]^y[c>>8&255]^E[b&255]^g[n];var H=r[d>>>24]^D[c>>16&255]^y[b>>8&255]^E[a&255]^g[n+1];var F=r[c>>>24]^D[b>>16&255]^y[a>>8&255]^E[d&255]^g[n+2];b=r[b>>>24]^D[a>>16&255]^y[d>>8&255]^E[c&255]^g[n+3];n+=4;a=p;d=H;c=F}for(l=0;4>l;l++)f[(3&-l)+h]=x[a>>>24]<<24^x[d>>16&255]<<16^x[c>>8&255]<<8^x[b&255]^g[n++],p=a,a=d,d=c,c=b,b=p}}]);return b}();b["default"]=f;c.exports=b["default"]},
{}],23:[function(f,c,b){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=(f=f("./stream"))&&f.__esModule?f:{"default":f};f=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");a:{var a=Object.getPrototypeOf(c.prototype),b="constructor";var f=this;var g=!0;for(;g;)if(null===a&&(a=Function.prototype),g=Object.getOwnPropertyDescriptor(a,b),void 0===g){a=Object.getPrototypeOf(a);if(null===
a)break;g=!0}else{if("value"in g){f=g.value;break a}b=g.get;f=void 0===b?void 0:b.call(f);break a}f=void 0}f.call(this,d["default"]);this.jobs=[];this.delay=1;this.timeout_=null}a(c,b);h(c,[{key:"processJob_",value:function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}},{key:"push",value:function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]);return c}(d["default"]);b["default"]=
f;c.exports=b["default"]},{"./stream":26}],24:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=(c=f("./aes"))&&c.__esModule?c:{"default":c},d=(c=f("./async-stream"))&&c.__esModule?c:{"default":c},g=f("pkcs7"),k=function(a){return a<<
24|(a&65280)<<8|(a&16711680)>>8|a>>>24},l=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new h["default"](Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var f=new Int32Array(a.buffer),g;var l=c[0];var n=c[1];var p=c[2];c=c[3];for(g=0;g<d.length;g+=4){var r=k(d[g]);var y=k(d[g+1]);var E=k(d[g+2]);var x=k(d[g+3]);b.decrypt(r,y,E,x,f,g);f[g]=k(f[g]^l);f[g+1]=k(f[g+1]^n);f[g+2]=k(f[g+2]^p);f[g+3]=k(f[g+3]^c);l=r;n=y;p=E;c=x}return a};b.decrypt=l;f=function(){function b(a,
c,f,h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var l=b.STEP,n=new Int32Array(a.buffer),p=new Uint8Array(a.byteLength);a=0;this.asyncStream_=new d["default"];this.asyncStream_.push(this.decryptChunk_(n.subarray(a,a+l),c,f,p));for(a=l;a<n.length;a+=l)f=new Uint32Array([k(n[a-4]),k(n[a-3]),k(n[a-2]),k(n[a-1])]),this.asyncStream_.push(this.decryptChunk_(n.subarray(a,a+l),c,f,p));this.asyncStream_.push(function(){h(null,(0,g.unpad)(p))})}a(b,[{key:"decryptChunk_",
value:function(a,b,c,d){return function(){var f=l(a,b,c);d.set(f,a.byteOffset)}}}],[{key:"STEP",get:function(){return 32E3}}]);return b}();b.Decrypter=f;b["default"]={Decrypter:f,decrypt:l}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=f("./decrypter");f=f("./async-stream");b["default"]={decrypt:a.decrypt,Decrypter:a.Decrypter,AsyncStream:(f&&f.__esModule?f:{"default":f})["default"]};c.exports=b["default"]},{"./async-stream":23,
"./decrypter":24}],26:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}();f=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.listeners={}}a(b,[{key:"on",value:function(a,b){this.listeners[a]||
(this.listeners[a]=[]);this.listeners[a].push(b)}},{key:"off",value:function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b}},{key:"trigger",value:function(a){var b,c;if(b=this.listeners[a])if(2===arguments.length){var d=b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var f=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,f)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(a){this.on("data",
function(b){a.push(b)})}}]);return b}();b["default"]=f;c.exports=b["default"]},{}],27:[function(f,c,b){c.exports=function(b){var c=a[b.byteLength%16||0],f=new Uint8Array(b.byteLength+c.length);f.set(b);f.set(c,b.byteLength);return f};var a=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,
10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(f,c,b){b.pad=f("./pad.js");b.unpad=f("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(f,c,b){c.exports=function(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}},{}],30:[function(f,c,b){},{}],31:[function(f,c,b){b="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b="undefined"!==
typeof b?b:"undefined"!==typeof window?window:{};f=f("min-document");if("undefined"!==typeof document)var a=document;else(a=b["__GLOBAL_DOCUMENT_CACHE@4"])||(a=b["__GLOBAL_DOCUMENT_CACHE@4"]=f);c.exports=a},{"min-document":30}],32:[function(f,c,b){f="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};c.exports="undefined"!==typeof window?window:"undefined"!==typeof f?f:"undefined"!==typeof self?self:{}},{}],33:[function(f,c,b){function a(a){return a&&
a.__esModule?a:{"default":a}}b=f("./line-stream");b=a(b);var h=f("./parse-stream");h=a(h);f=f("./parser");f=a(f);c.exports={LineStream:b["default"],ParseStream:h["default"],Parser:f["default"]}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(f,c,b){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f=f("./stream");f=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||
Object.getPrototypeOf(c)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.buffer="";return a}a(c,b);h(c,[{key:"push",value:function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}}]);return c}((f&&f.__esModule?f:{"default":f})["default"]);b["default"]=f},{"./stream":37}],
35:[function(f,c,b){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=
!1,g=void 0;try{for(var h=a[Symbol.iterator](),k;!(d=(k=h.next()).done)&&(c.push(k.value),!b||c.length!==b);d=!0);}catch(t){f=!0,g=t}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();f=f("./stream");var g=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b};f=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}a(c,b);d(c,[{key:"push",value:function(a){var b;a=a.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==a.length)if("#"!==a[0])this.trigger("data",{type:"uri",uri:a});else if(0!==a.indexOf("#EXT"))this.trigger("data",{type:"comment",text:a.slice(1)});else if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))this.trigger("data",{type:"tag",tagType:"m3u"});else if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))a={type:"tag",tagType:"inf"},b[1]&&(a.duration=
parseFloat(b[1])),b[2]&&(a.title=b[2]),this.trigger("data",a);else if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"targetduration"},b[1]&&(a.duration=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"totalduration"},b[1]&&(a.duration=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"version"},b[1]&&(a.version=parseInt(b[1],10)),this.trigger("data",
a);else if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a={type:"tag",tagType:"media-sequence"},b[1]&&(a.number=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(a.number=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))a={type:"tag",tagType:"playlist-type"},b[1]&&(a.playlistType=b[1]),this.trigger("data",a);else if(b=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))a=
{type:"tag",tagType:"byterange"},b[1]&&(a.length=parseInt(b[1],10)),b[2]&&(a.offset=parseInt(b[2],10)),this.trigger("data",a);else if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))a={type:"tag",tagType:"allow-cache"},b[1]&&(a.allowed=!/NO/.test(b[1])),this.trigger("data",a);else if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){a={type:"tag",tagType:"map"};if(b[1]&&(b=g(b[1]),b.URI&&(a.uri=b.URI),b.BYTERANGE)){b=b.BYTERANGE.split("@");var c=h(b,2);b=c[0];c=c[1];a.byterange={};b&&(a.byterange.length=parseInt(b,10));
c&&(a.byterange.offset=parseInt(c,10))}this.trigger("data",a)}else(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?(a={type:"tag",tagType:"stream-inf"},b[1]&&(a.attributes=g(b[1]),a.attributes.RESOLUTION&&(b=a.attributes.RESOLUTION.split("x"),c={},b[0]&&(c.width=parseInt(b[0],10)),b[1]&&(c.height=parseInt(b[1],10)),a.attributes.RESOLUTION=c),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],
10))),this.trigger("data",a)):(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(a={type:"tag",tagType:"media"},b[1]&&(a.attributes=g(b[1])),this.trigger("data",a)):(b=/^#EXT-X-ENDLIST/.exec(a))?this.trigger("data",{type:"tag",tagType:"endlist"}):(b=/^#EXT-X-DISCONTINUITY/.exec(a))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(a={type:"tag",tagType:"program-date-time"},b[1]&&(a.dateTimeString=b[1],a.dateTimeObject=new Date(b[1])),this.trigger("data",a)):
(b=/^#EXT-X-KEY:?(.*)$/.exec(a))?(a={type:"tag",tagType:"key"},b[1]&&(a.attributes=g(b[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),
this.trigger("data",a)):(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out-cont"},a.data=b[1]?b[1]:"",this.trigger("data",a)):(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out"},a.data=b[1]?b[1]:"",this.trigger("data",a)):(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-in"},a.data=b[1]?b[1]:"",this.trigger("data",a)):this.trigger("data",{type:"tag",data:a.slice(4)})}}]);return c}((f&&f.__esModule?f:{"default":f})["default"]);b["default"]=
f},{"./stream":37}],36:[function(f,c,b){function a(a){return a&&a.__esModule?a:{"default":a}}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();c=f("./stream");c=a(c);var l=f("./line-stream"),n=a(l);f=f("./parse-stream");var p=a(f);f=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.lineStream=new n["default"];a.parseStream=new p["default"];a.lineStream.pipe(a.parseStream);var c=[],d={},f=void 0,k=void 0,l=function(){},r={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},w=0;a.manifest={allowCache:!0,
discontinuityStarts:[],segments:[]};a.parseStream.on("data",function(b){var h=void 0,n=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=b.allowed;"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var a={};"length"in b&&(d.byterange=a,a.length=b.length,"offset"in b||(this.trigger("info",{message:"defaulting offset to zero"}),b.offset=0));"offset"in b&&(d.byterange=a,a.offset=b.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<b.duration&&(d.duration=b.duration);0===b.duration&&(d.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=c},key:function(){b.attributes?
"NONE"===b.attributes.METHOD?k=null:b.attributes.URI?(b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),k={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},"undefined"!==typeof b.attributes.IV&&(k.iv=b.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(b.number)?this.manifest.mediaSequence=b.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+b.number})},"discontinuity-sequence":function(){isFinite(b.number)?w=this.manifest.discontinuitySequence=b.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number})},"playlist-type":function(){/VOD|EVENT/.test(b.playlistType)?this.manifest.playlistType=b.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+b.playlist})},map:function(){f={};b.uri&&(f.uri=b.uri);b.byterange&&(f.byterange=
b.byterange)},"stream-inf":function(){this.manifest.playlists=c;this.manifest.mediaGroups=this.manifest.mediaGroups||r;b.attributes?(d.attributes||(d.attributes={}),g(d.attributes,b.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||r;if(b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME){var a=this.manifest.mediaGroups[b.attributes.TYPE];a[b.attributes["GROUP-ID"]]=a[b.attributes["GROUP-ID"]]||
{};h=a[b.attributes["GROUP-ID"]];n={"default":/yes/i.test(b.attributes.DEFAULT)};n.autoselect=n["default"]?!0:/yes/i.test(b.attributes.AUTOSELECT);b.attributes.LANGUAGE&&(n.language=b.attributes.LANGUAGE);b.attributes.URI&&(n.uri=b.attributes.URI);b.attributes["INSTREAM-ID"]&&(n.instreamId=b.attributes["INSTREAM-ID"]);b.attributes.CHARACTERISTICS&&(n.characteristics=b.attributes.CHARACTERISTICS);b.attributes.FORCED&&(n.forced=/yes/i.test(b.attributes.FORCED));h[b.attributes.NAME]=n}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){w+=1;d.discontinuity=!0;this.manifest.discontinuityStarts.push(c.length)},"program-date-time":function(){this.manifest.dateTimeString=b.dateTimeString;this.manifest.dateTimeObject=b.dateTimeObject},targetduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+b.duration}):this.manifest.targetDuration=b.duration},totalduration:function(){!isFinite(b.duration)||
0>b.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+b.duration}):this.manifest.totalDuration=b.duration},"cue-out":function(){d.cueOut=b.data},"cue-out-cont":function(){d.cueOutCont=b.data},"cue-in":function(){d.cueIn=b.data}}[b.tagType]||l).call(a)},uri:function(){d.uri=b.uri;c.push(d);!this.manifest.targetDuration||"duration"in d||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),d.duration=this.manifest.targetDuration);k&&(d.key=k);d.timeline=
w;f&&(d.map=f);d={}},comment:function(){}})[b.type].call(a)});return a}d(b,a);k(b,[{key:"push",value:function(a){this.lineStream.push(a)}},{key:"end",value:function(){this.lineStream.push("\n")}}]);return b}(c["default"]);b["default"]=f},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}();f=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.listeners={}}a(b,[{key:"on",value:function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)}},{key:"off",value:function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b}},{key:"trigger",value:function(a){var b=
this.listeners[a],c;if(b)if(2===arguments.length){var d=b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var f=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,f)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(a){this.on("data",function(b){a.push(b)})}}]);return b}();b["default"]=f},{}],38:[function(f,c,b){f=f("../utils/stream.js");var a=function(){var b=new Uint8Array,c=0;a.prototype.init.call(this);this.setTimestamp=
function(a){c=a};this.parseId3TagSize=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10};this.parseAdtsSize=function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5};this.push=function(a){var d=0;if(b.length){var f=b.length;b=new Uint8Array(a.byteLength+f);b.set(b.subarray(0,f));b.set(a,f)}else b=a;for(;3<=b.length-d;)if(73===b[d]&&68===b[d+1]&&51===b[d+2]){if(10>b.length-d)break;a=this.parseId3TagSize(b,d);if(a>b.length)break;f={type:"timed-metadata",data:b.subarray(d,
d+a)};this.trigger("data",f);d+=a}else if(b[d]&1&&240===(b[d+1]&240)){if(7>b.length-d)break;a=this.parseAdtsSize(b,d);if(a>b.length)break;f={type:"audio",data:b.subarray(d,d+a),pts:c,dts:c};this.trigger("data",f);d+=a}else d++;b=0<b.length-d?b.subarray(d):new Uint8Array}};a.prototype=new f;c.exports=a},{"../utils/stream.js":62}],39:[function(f,c,b){var a=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],h=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]};c.exports={parseId3TagSize:function(a,
b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(b){for(var c=0;c+5<b.length;)if(255!==b[c]||240!==(b[c+1]&246))c++;else return a[(b[c+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+h(a.subarray(10,14)));do{var c=
h(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var f=0;f<d.byteLength;f++)if(0===d[f]){var p=unescape,r,w=d,u=f,A="";for(r=0;r<u;r++)A+="%"+("00"+w[r].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===p(A))return a=d.subarray(f+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}}},{}],40:[function(f,c,b){f=f("../utils/stream.js");
var a=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var h=function(){var b;h.prototype.init.call(this);this.push=function(c){var d=0,f=0;if("audio"===c.type){if(b){var g=b;b=new Uint8Array(g.byteLength+c.data.byteLength);b.set(g);b.set(c.data,g.byteLength)}else b=c.data;for(;d+5<b.length;)if(255!==b[d]||240!==(b[d+1]&246))d++;else{g=2*(~b[d+1]&1);var h=(b[d+3]&3)<<11|b[d+4]<<3|(b[d+5]&224)>>5;var r=1024*((b[d+6]&3)+1);var w=9E4*r/a[(b[d+2]&60)>>>2];h=d+h;if(b.byteLength<h)break;
this.trigger("data",{pts:c.pts+f*w,dts:c.dts+f*w,sampleCount:r,audioobjecttype:(b[d+2]>>>6&3)+1,channelcount:(b[d+2]&1)<<2|(b[d+3]&192)>>>6,samplerate:a[(b[d+2]&60)>>>2],samplingfrequencyindex:(b[d+2]&60)>>>2,samplesize:16,data:b.subarray(d+7+g,h)});if(b.byteLength===h){b=void 0;break}f++;b=b.subarray(h)}}};this.flush=function(){this.trigger("done")}};h.prototype=new f;c.exports=h},{"../utils/stream.js":62}],41:[function(f,c,b){b=f("../utils/stream.js");var a=f("../utils/exp-golomb.js");var h=function(){var a=
0,b,c;h.prototype.init.call(this);this.push=function(d){if(c){var f=new Uint8Array(c.byteLength+d.data.byteLength);f.set(c);f.set(d.data,c.byteLength);c=f}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+
3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};h.prototype=new b;var d={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var g=function(){var b=new h,c,f,p;g.prototype.init.call(this);var r=this;this.push=function(a){"video"===a.type&&(c=a.trackId,f=a.pts,p=a.dts,b.push(a))};b.on("data",function(a){var b={trackId:c,pts:f,dts:p,data:a};switch(a[0]&
31){case 5:b.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:b.nalUnitType="sei_rbsp";b.escapedRBSP=u(a.subarray(1));break;case 7:b.nalUnitType="seq_parameter_set_rbsp";b.escapedRBSP=u(a.subarray(1));b.config=A(b.escapedRBSP);break;case 8:b.nalUnitType="pic_parameter_set_rbsp";break;case 9:b.nalUnitType="access_unit_delimiter_rbsp"}r.trigger("data",b)});b.on("done",function(){r.trigger("done")});this.flush=function(){b.flush()};var w=function(a,b){var c=8,d=8,f;for(f=0;f<a;f++)0!==
d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var u=function(a){for(var b=a.byteLength,c=[],d=1,f;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;f=new Uint8Array(b);var g=0;for(d=0;d<b;g++,d++)g===c[0]&&(g++,c.shift()),f[d]=a[g];return f};var A=function(b){var c=0,f=0,g=0,h=0,k=1;b=new a(b);var l=b.readUnsignedByte();var n=b.readUnsignedByte();var p=b.readUnsignedByte();b.skipUnsignedExpGolomb();if(d[l]){var m=b.readUnsignedExpGolomb();
3===m&&b.skipBits(1);b.skipUnsignedExpGolomb();b.skipUnsignedExpGolomb();b.skipBits(1);if(b.readBoolean()){var q=3!==m?8:12;for(m=0;m<q;m++)b.readBoolean()&&(6>m?w(16,b):w(64,b))}}b.skipUnsignedExpGolomb();m=b.readUnsignedExpGolomb();if(0===m)b.readUnsignedExpGolomb();else if(1===m)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),q=b.readUnsignedExpGolomb(),m=0;m<q;m++)b.skipExpGolomb();b.skipUnsignedExpGolomb();b.skipBits(1);m=b.readUnsignedExpGolomb();q=b.readUnsignedExpGolomb();var r=b.readBits(1);
0===r&&b.skipBits(1);b.skipBits(1);b.readBoolean()&&(c=b.readUnsignedExpGolomb(),f=b.readUnsignedExpGolomb(),g=b.readUnsignedExpGolomb(),h=b.readUnsignedExpGolomb());if(b.readBoolean()&&b.readBoolean()){var t=b.readUnsignedByte();switch(t){case 1:var u=[1,1];break;case 2:u=[12,11];break;case 3:u=[10,11];break;case 4:u=[16,11];break;case 5:u=[40,33];break;case 6:u=[24,11];break;case 7:u=[20,11];break;case 8:u=[32,11];break;case 9:u=[80,33];break;case 10:u=[18,11];break;case 11:u=[15,11];break;case 12:u=
[64,33];break;case 13:u=[160,99];break;case 14:u=[4,3];break;case 15:u=[3,2];break;case 16:u=[2,1];break;case 255:u=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}u&&(k=u[0]/u[1])}return{profileIdc:l,levelIdc:p,profileCompatibility:n,width:Math.ceil((16*(m+1)-2*c-2*f)*k),height:(2-r)*(q+1)*16-2*g-2*h}}};g.prototype=new b;c.exports={H264Stream:g,NalByteStream:h}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(f,c,b){f=[33,16,5,32,164,
27];b=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var a=function(a){for(var b=[];a--;)b.push(0);return b};f={96E3:[f,[227,64],a(154),[56]],88200:[f,[231],a(170),[56]],64E3:[f,[248,192],a(240),[56]],48E3:[f,[255,192],a(268),[55,148,128],a(54),[112]],44100:[f,[255,192],a(268),[55,163,128],a(84),[112]],32E3:[f,[255,192],a(268),[55,234],a(226),[112]],24E3:[f,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16E3:[f,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],
12E3:[b,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[b,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8E3:[b,a(268),[3,121,16],a(47),[7]]};c.exports=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}(f)},{}],43:[function(f,c,b){f=f("../utils/stream.js");var a=function(b){this.numberOfTracks=0;
this.metadataStream=b.metadataStream;this.videoTags=[];this.audioTags=[];this.audioTrack=this.videoTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.processedTracks=this.pendingTracks=0;a.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);"video"===a.track.type&&(this.videoTrack=a.track,this.videoTags=a.tags,this.pendingTracks++);"audio"===a.track.type&&(this.audioTrack=a.track,this.audioTags=
a.tags,this.pendingTracks++)}};a.prototype=new f;a.prototype.flush=function(a){var b={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks&&("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks)))return;this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(!(this.processedTracks<this.numberOfTracks)){if(this.videoTrack)var c=this.videoTrack.timelineStartInfo.pts;
else this.audioTrack&&(c=this.audioTrack.timelineStartInfo.pts);b.tags.videoTags=this.videoTags;b.tags.audioTags=this.audioTags;for(a=0;a<this.pendingCaptions.length;a++){var f=this.pendingCaptions[a];f.startTime=f.startPts-c;f.startTime/=9E4;f.endTime=f.endPts-c;f.endTime/=9E4;b.captionStreams[f.stream]=!0;b.captions.push(f)}for(a=0;a<this.pendingMetadata.length;a++)f=this.pendingMetadata[a],f.cueTime=f.pts-c,f.cueTime/=9E4,b.metadata.push(f);b.metadata.dispatchType=this.metadataStream.dispatchType;
this.audioTrack=this.videoTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.processedTracks=this.pendingTracks=this.pendingMetadata.length=0;this.trigger("data",b);this.trigger("done")}};c.exports=a},{"../utils/stream.js":62}],44:[function(f,c,b){var a=f("./flv-tag.js");c.exports=function(b,c,f){var d=new Uint8Array(9),g=new DataView(d.buffer);b=b||0;c=void 0===c?!0:c;f=void 0===f?!0:f;g.setUint8(0,70);g.setUint8(1,76);g.setUint8(2,86);g.setUint8(3,1);g.setUint8(4,
(c?4:0)|(f?1:0));g.setUint32(5,d.byteLength);if(0>=b)return b=new Uint8Array(d.byteLength+4),b.set(d),b.set([0,0,0,0],d.byteLength),b;c=new a(a.METADATA_TAG);c.pts=c.dts=0;c.writeMetaDataDouble("duration",b);c=c.finalize().length;b=new Uint8Array(d.byteLength+c);b.set(d);b.set(g.byteLength,c);return b}},{"./flv-tag.js":45}],45:[function(f,c,b){var a=function(b,c){var d=0,f=16384,h=function(a,b){b=a.position+b;b<a.bytes.byteLength||(b=new Uint8Array(2*b),b.set(a.bytes.subarray(0,a.position),0),a.bytes=
b,a.view=new DataView(a.bytes.buffer))},n=a.widthBytes||new Uint8Array(5),p=a.heightBytes||new Uint8Array(6),r=a.videocodecidBytes||new Uint8Array(12),w;if(!a.widthBytes){for(w=0;5>w;w++)n[w]="width".charCodeAt(w);for(w=0;6>w;w++)p[w]="height".charCodeAt(w);for(w=0;12>w;w++)r[w]="videocodecid".charCodeAt(w);a.widthBytes=n;a.heightBytes=p;a.videocodecidBytes=r}this.keyFrame=!1;switch(b){case a.VIDEO_TAG:this.length=16;f*=6;break;case a.AUDIO_TAG:this.length=13;this.keyFrame=!0;break;case a.METADATA_TAG:this.length=
29;this.keyFrame=!0;break;default:throw Error("Unknown FLV tag type");}this.bytes=new Uint8Array(f);this.view=new DataView(this.bytes.buffer);this.bytes[0]=b;this.position=this.length;this.keyFrame=c;this.dts=this.pts=0;this.writeBytes=function(a,b,c){b=b||0;c=c||a.byteLength;var d=b+c;h(this,c);this.bytes.set(a.subarray(b,d),this.position);this.position+=c;this.length=Math.max(this.length,this.position)};this.writeByte=function(a){h(this,1);this.bytes[this.position]=a;this.position++;this.length=
Math.max(this.length,this.position)};this.writeShort=function(a){h(this,2);this.view.setUint16(this.position,a);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(a){return this.bytes[this.length-a]};this.nalUnitSize=function(){return 0===d?0:this.length-(d+4)};this.startNalUnit=function(){if(0<d)throw Error("Attempted to create new NAL wihout closing the old one");d=this.length;this.position=this.length+=4};this.endNalUnit=function(a){if(this.length===d+4)this.length-=
4;else if(0<d){var b=d+4;var c=this.length-b;this.position=d;this.view.setUint32(this.position,c);this.position=this.length;a&&a.push(this.bytes.subarray(b,b+c))}d=0};this.writeMetaDataDouble=function(a,b){var c;h(this,2+a.length+9);this.view.setUint16(this.position,a.length);this.position+=2;if("width"===a)this.bytes.set(n,this.position),this.position+=5;else if("height"===a)this.bytes.set(p,this.position),this.position+=6;else if("videocodecid"===a)this.bytes.set(r,this.position),this.position+=
12;else for(c=0;c<a.length;c++)this.bytes[this.position]=a.charCodeAt(c),this.position++;this.position++;this.view.setFloat64(this.position,b);this.position+=8;this.length=Math.max(this.length,this.position);++d};this.writeMetaDataBoolean=function(a,b){var c;h(this,2);this.view.setUint16(this.position,a.length);this.position+=2;for(c=0;c<a.length;c++)h(this,1),this.bytes[this.position]=a.charCodeAt(c),this.position++;h(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,
b?1:0);this.position++;this.length=Math.max(this.length,this.position);++d};this.finalize=function(){switch(this.bytes[0]){case a.VIDEO_TAG:this.bytes[11]=(this.keyFrame||c?16:32)|7;this.bytes[12]=c?0:1;var b=this.pts-this.dts;this.bytes[13]=(b&16711680)>>>16;this.bytes[14]=(b&65280)>>>8;this.bytes[15]=(b&255)>>>0;break;case a.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=c?0:1;break;case a.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,
10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,d),this.position=this.length,this.bytes.set([0,0,9],this.position),this.length=this.position+=3}b=this.length-11;this.bytes[1]=(b&16711680)>>>16;this.bytes[2]=(b&65280)>>>8;this.bytes[3]=(b&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=
(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;h(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=a.frameTime(this.bytes);return this}};a.AUDIO_TAG=8;a.VIDEO_TAG=9;a.METADATA_TAG=18;a.isAudioFrame=function(b){return a.AUDIO_TAG===b[0]};a.isVideoFrame=function(b){return a.VIDEO_TAG===b[0]};a.isMetaData=function(b){return a.METADATA_TAG===b[0]};a.isKeyFrame=function(b){return a.isVideoFrame(b)?
23===b[11]:a.isAudioFrame(b)||a.isMetaData(b)?!0:!1};a.frameTime=function(a){var b=a[4]<<16;b|=a[5]<<8;b|=a[6]<<0;return b|=a[7]<<24};c.exports=a},{}],46:[function(f,c,b){c.exports={tag:f("./flv-tag"),Transmuxer:f("./transmuxer"),getFlvHeader:f("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(f,c,b){c.exports=function(){var a=this;this.list=[];this.push=function(a){this.list.push({bytes:a.bytes,dts:a.dts,pts:a.pts,keyFrame:a.keyFrame,metaDataTag:a.metaDataTag})};
Object.defineProperty(this,"length",{get:function(){return a.list.length}})}},{}],48:[function(f,c,b){b=f("../utils/stream.js");var a=f("./flv-tag.js"),h=f("../m2ts/m2ts.js"),d=f("../codecs/adts.js"),g=f("../codecs/h264").H264Stream,k=f("./coalesce-stream.js"),l=f("./tag-list.js");var n=function(a,b){"number"===typeof b.pts&&(a.timelineStartInfo.pts=void 0===a.timelineStartInfo.pts?b.pts:Math.min(a.timelineStartInfo.pts,b.pts));"number"===typeof b.dts&&(a.timelineStartInfo.dts=void 0===a.timelineStartInfo.dts?
b.dts:Math.min(a.timelineStartInfo.dts,b.dts))};var p=function(b,c){var d=new a(a.METADATA_TAG);d.dts=c;d.pts=c;d.writeMetaDataDouble("videocodecid",7);d.writeMetaDataDouble("width",b.width);d.writeMetaDataDouble("height",b.height);return d};var r=function(b,c){var d=new a(a.VIDEO_TAG,!0);d.dts=c;d.pts=c;d.writeByte(1);d.writeByte(b.profileIdc);d.writeByte(b.profileCompatibility);d.writeByte(b.levelIdc);d.writeByte(255);d.writeByte(225);d.writeShort(b.sps[0].length);d.writeBytes(b.sps[0]);d.writeByte(b.pps.length);
for(c=0;c<b.pps.length;++c)d.writeShort(b.pps[c].length),d.writeBytes(b.pps[c]);return d};var w=function(b){var c=[],d=[],f;w.prototype.init.call(this);this.push=function(a){n(b,a);b&&(b.audioobjecttype=a.audioobjecttype,b.channelcount=a.channelcount,b.samplerate=a.samplerate,b.samplingfrequencyindex=a.samplingfrequencyindex,b.samplesize=a.samplesize,b.extraData=b.audioobjecttype<<11|b.samplingfrequencyindex<<7|b.channelcount<<3);a.pts=Math.round(a.pts/90);a.dts=Math.round(a.dts/90);c.push(a)};this.flush=
function(){var g,h=new l;if(0!==c.length){for(g=-Infinity;c.length;){var k=c.shift();d.length&&k.pts>=d[0]&&(g=d.shift(),this.writeMetaDataTags(h,g));if(b.extraData!==f||1E3<=k.pts-g)this.writeMetaDataTags(h,k.pts),f=b.extraData,g=k.pts;var n=new a(a.AUDIO_TAG);n.pts=k.pts;n.dts=k.dts;n.writeBytes(k.data);h.push(n.finalize())}d.length=0;f=null;this.trigger("data",{track:b,tags:h.list})}this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(c,d){var f=new a(a.METADATA_TAG);f.pts=
d;f.dts=d;f.writeMetaDataDouble("audiocodecid",10);f.writeMetaDataBoolean("stereo",2===b.channelcount);f.writeMetaDataDouble("audiosamplerate",b.samplerate);f.writeMetaDataDouble("audiosamplesize",16);c.push(f.finalize());f=new a(a.AUDIO_TAG,!0);f.pts=d;f.dts=d;f.view.setUint16(f.position,b.extraData);f.position+=2;f.length=Math.max(f.length,f.position);c.push(f.finalize())};this.onVideoKeyFrame=function(a){d.push(a)}};w.prototype=new b;var u=function(b){var c=[],d,f;u.prototype.init.call(this);this.finishFrame=
function(a,c){if(c){if(d&&b&&b.newMetadata&&(c.keyFrame||0===a.length)){var g=p(d,c.dts).finalize(),h=r(b,c.dts).finalize();g.metaDataTag=h.metaDataTag=!0;a.push(g);a.push(h);b.newMetadata=!1;this.trigger("keyframe",c.dts)}c.endNalUnit();a.push(c.finalize());f=null}};this.push=function(a){n(b,a);a.pts=Math.round(a.pts/90);a.dts=Math.round(a.dts/90);c.push(a)};this.flush=function(){for(var g,h=new l;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0!==c.length){for(;c.length;)g=
c.shift(),"seq_parameter_set_rbsp"===g.nalUnitType?(b.newMetadata=!0,d=g.config,b.width=d.width,b.height=d.height,b.sps=[g.data],b.profileIdc=d.profileIdc,b.levelIdc=d.levelIdc,b.profileCompatibility=d.profileCompatibility,f.endNalUnit()):"pic_parameter_set_rbsp"===g.nalUnitType?(b.newMetadata=!0,b.pps=[g.data],f.endNalUnit()):"access_unit_delimiter_rbsp"===g.nalUnitType?(f&&this.finishFrame(h,f),f=new a(a.VIDEO_TAG),f.pts=g.pts,f.dts=g.dts):("slice_layer_without_partitioning_rbsp_idr"===g.nalUnitType&&
(f.keyFrame=!0),f.endNalUnit()),f.startNalUnit(),f.writeBytes(g.data);f&&this.finishFrame(h,f);this.trigger("data",{track:b,tags:h.list})}this.trigger("done","VideoSegmentStream")}};u.prototype=new b;var A=function(a){var b=this,c,f;A.prototype.init.call(this);a=a||{};this.metadataStream=new h.MetadataStream;a.metadataStream=this.metadataStream;var l=new h.TransportPacketStream;var n=new h.TransportParseStream;var p=new h.ElementaryStream;var r=new h.TimestampRolloverStream("video");var t=new h.TimestampRolloverStream("audio");
var m=new h.TimestampRolloverStream("timed-metadata");var q=new d;var G=new g;var I=new k(a);l.pipe(n).pipe(p);p.pipe(r).pipe(G);p.pipe(t).pipe(q);p.pipe(m).pipe(this.metadataStream).pipe(I);var M=new h.CaptionStream;G.pipe(M).pipe(I);p.on("data",function(a){var b,d,g;if("metadata"===a.type){for(b=a.tracks.length;b--;)"video"===a.tracks[b].type?d=a.tracks[b]:"audio"===a.tracks[b].type&&(g=a.tracks[b]);d&&!c&&(I.numberOfTracks++,c=new u(d),G.pipe(c).pipe(I));if(g&&!f&&(I.numberOfTracks++,f=new w(g),
q.pipe(f).pipe(I),c))c.on("keyframe",f.onVideoKeyFrame)}});this.push=function(a){l.push(a)};this.flush=function(){l.flush()};this.resetCaptions=function(){M.reset()};I.on("data",function(a){b.trigger("data",a)});I.on("done",function(){b.trigger("done")})};A.prototype=new b;c.exports=A},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(f,c,b){f=f("../utils/stream");var a=function(a,
b){var c=[],d;if(!(b[0]&64))return c;var f=b[0]&31;for(d=0;d<f;d++){var g=3*d;var h={type:b[g+2]&3,pts:a};b[g+2]&4&&(h.ccData=b[g+3]<<8|b[g+4],c.push(h))}return c},h=function(){h.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new n(0,0),new n(0,1),new n(1,0),new n(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};h.prototype=new f;h.prototype.push=function(b){if("sei_rbsp"===b.nalUnitType){var c=
b.escapedRBSP;for(var d=0,f={payloadType:-1,payloadSize:0},g=0,h=0;d<c.byteLength&&128!==c[d];){for(;255===c[d];)g+=255,d++;for(g+=c[d++];255===c[d];)h+=255,d++;h+=c[d++];if(!f.payload&&4===g){f.payloadType=g;f.payloadSize=h;f.payload=c.subarray(d,d+h);break}d+=h;h=g=0}4===f.payloadType&&(c=181!==f.payload[0]||49!==(f.payload[1]<<8|f.payload[2])||"GA94"!==String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])||3!==f.payload[7]?null:f.payload.subarray(8,f.payload.length-1))&&(b.dts<
this.latestDts_?this.ignoreNextEqualDts_=!0:b.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(a(b.pts,c)),this.latestDts_=b.dts))}};h.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},
this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};h.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};h.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&
this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};h.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};h.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,
553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},g=function(a){if(null===a)return"";a=d[a]||a;return String.fromCharCode(a)},
k=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],l=function(){for(var a=[],b=15;b--;)a.push("");return a},n=function(a,b){n.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);
var c=b>>>8;var d=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.topRow_=13,this.mode_="rollUp"):b===this.ROLL_UP_3_ROWS_?(this.topRow_=12,this.mode_="rollUp"):b===this.ROLL_UP_4_ROWS_?(this.topRow_=11,this.mode_="rollUp"):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=l()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=l():b===this.RESUME_DIRECT_CAPTIONING_?this.mode_="paintOn":this.isSpecialCharacter(c,d)?(b=g((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):
this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),b=g((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=k.indexOf(b&7968),c!==
this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===d&&(d=null),b=g(c),b+=g(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};n.prototype=new f;n.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&
this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};n.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=l();this.nonDisplayed_=l();this.lastControlCode_=null;this.column_=0;this.row_=14;this.formatting_=[]};n.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,
this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};n.prototype.isSpecialCharacter=function(a,b){return a===
this.EXT_&&48<=b&&63>=b};n.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};n.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};n.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};n.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};n.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};n.prototype.isNormalChar=function(a){return 32<=a&&127>=a};n.prototype.addFormatting=
function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};n.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};n.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};n.prototype.rollUp=function(a,b){this.displayed_[14]+=b};n.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]=
"";for(a=this.topRow_;14>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[14]=""};n.prototype.paintOn=function(){};c.exports={CaptionStream:h,Cea608Stream:n}},{"../utils/stream":62}],50:[function(f,c,b){b=f("../utils/stream.js");var a=f("./caption-stream"),h=f("./stream-types"),d=f("./timestamp-rollover-stream").TimestampRolloverStream,g=f("./stream-types.js");var k=function(){var a=new Uint8Array(188),b=0;k.prototype.init.call(this);this.push=function(c){var d=0,f=188;if(b){var g=new Uint8Array(c.byteLength+
b);g.set(a.subarray(0,b));g.set(c,b);b=0}else g=c;for(;f<g.byteLength;)71===g[d]&&71===g[f]?(this.trigger("data",g.subarray(d,f)),d+=188,f+=188):(d++,f++);d<g.byteLength&&(a.set(g.subarray(d),0),b=g.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};k.prototype=new b;var l=function(){l.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var f=0;b.payloadUnitStartIndicator&&(f+=a[f]+
1);"pat"===b.type?c(a.subarray(f),b):d(a.subarray(f),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var f=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<f;){var g=b[d],k=(b[d+1]&31)<<8|b[d+2];g===h.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=k:g===h.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?
a.programMapTable.audio=k:g===h.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][k]=g);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,
this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?h.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?h.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};l.prototype=new b;l.STREAM_TYPES={h264:27,adts:15};var n=function(){var a=this,b={data:[],size:0},c={data:[],
size:0},d={data:[],size:0},f=function(b,c,d){var f=new Uint8Array(b.size),g={type:c},h,k=0;if(b.data.length&&!(9>b.size)){g.trackId=b.data[0].pid;for(h=0;h<b.data.length;h++){var l=b.data[h];f.set(l.data,k);k+=l.data.byteLength}g.packetLength=6+(f[4]<<8|f[5]);g.dataAlignmentIndicator=0!==(f[6]&4);h=f[7];h&192&&(g.pts=(f[9]&14)<<27|(f[10]&255)<<20|(f[11]&254)<<12|(f[12]&255)<<5|(f[13]&254)>>>3,g.pts*=4,g.pts+=(f[13]&6)>>>1,g.dts=g.pts,h&64&&(g.dts=(f[14]&14)<<27|(f[15]&255)<<20|(f[16]&254)<<12|(f[17]&
255)<<5|(f[18]&254)>>>3,g.dts*=4,g.dts+=(f[18]&6)>>>1));g.data=f.subarray(9+f[8]);c="video"===c||g.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",g)}};n.prototype.init.call(this);this.push=function(k){({pat:function(){},pes:function(){switch(k.streamType){case h.H264_STREAM_TYPE:case g.H264_STREAM_TYPE:var a=b;var l="video";break;case h.ADTS_STREAM_TYPE:a=c;l="audio";break;case h.METADATA_STREAM_TYPE:a=d;l="timed-metadata";break;default:return}k.payloadUnitStartIndicator&&
f(a,l,!0);a.data.push(k);a.size+=k.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=k.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[k.type]()};this.flush=function(){f(b,"video");f(c,"audio");f(d,"timed-metadata");this.trigger("done")}};n.prototype=new b;f={PAT_PID:0,
MP2T_PACKET_LENGTH:188,TransportPacketStream:k,TransportParseStream:l,ElementaryStream:n,TimestampRolloverStream:d,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:f("./metadata-stream")};for(var p in h)h.hasOwnProperty(p)&&(f[p]=h[p]);c.exports=f},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(f,c,b){b=f("../utils/stream");var a=f("./stream-types"),h=function(a,
b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},d=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},g={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(h(a.data,1,b));a.value=decodeURIComponent(h(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(h(a.data,1,b));
a.url=decodeURIComponent(h(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(h(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var k=function(b){var c=!(!b||!b.debug);b=b&&b.descriptor;var f=0,h=[],l=0,u;k.prototype.init.call(this);this.dispatchType=a.METADATA_STREAM_TYPE.toString(16);if(b)for(u=0;u<b.length;u++)this.dispatchType+=("00"+b[u].toString(16)).slice(-2);this.push=function(a){var b;if("timed-metadata"===
a.type)if(a.dataAlignmentIndicator&&(l=0,h.length=0),0===h.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))c&&console.log("Skipping unrecognized metadata packet");else if(h.push(a),l+=a.data.byteLength,1===h.length&&(f=d(a.data.subarray(6,10)),f+=10),!(l<f)){a={data:new Uint8Array(f),frames:[],pts:h[0].pts,dts:h[0].dts};for(b=0;b<f;)a.data.set(h[0].data.subarray(0,f-b),b),b+=h[0].data.byteLength,l-=h[0].data.byteLength,h.shift();b=10;a.data[5]&64&&(b=b+4+d(a.data.subarray(10,
14)),f-=d(a.data.subarray(16,20)));do{var k=d(a.data.subarray(b+4,b+8));if(1>k)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var n=String.fromCharCode(a.data[b],a.data[b+1],a.data[b+2],a.data[b+3]);n={id:n,data:a.data.subarray(b+10,b+k+10)};n.key=n.id;if(g[n.id]&&(g[n.id](n),"com.apple.streaming.transportStreamTimestamp"===n.owner)){var p=n.data,r=(p[3]&1)<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;r*=4;r+=p[7]&3;n.timeStamp=r;void 0===a.pts&&void 0===a.dts&&(a.pts=
n.timeStamp,a.dts=n.timeStamp);this.trigger("timestamp",n)}a.frames.push(n);b+=10;b+=k}while(b<f);this.trigger("data",a)}}};k.prototype=new b;c.exports=k},{"../utils/stream":62,"./stream-types":53}],52:[function(f,c,b){var a=f("./stream-types.js"),h=function(a){var b=a[1]&31;return b=b<<8|a[2]},d=function(a){return!!(a[1]&64)},g=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},k=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";
case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};c.exports={parseType:function(a,b){a=h(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=d(a),c=4+g(a);b&&(c+=a[c]+1);return(a[c+10]&31)<<8|a[c+11]},parsePmt:function(a){var b={},c=d(a),f=4+g(a);c&&(f+=a[f]+1);if(a[f+5]&1){c=3+((a[f+1]&15)<<8|a[f+2])-4;for(var h=12+((a[f+10]&15)<<8|a[f+11]);h<c;){var k=f+h;b[(a[k+1]&31)<<8|a[k+2]]=a[k];h+=((a[k+3]&15)<<8|a[k+4])+5}return b}},
parsePayloadUnitStartIndicator:d,parsePesType:function(b,c){b=h(b);switch(c[b]){case a.H264_STREAM_TYPE:return"video";case a.ADTS_STREAM_TYPE:return"audio";case a.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!d(a))return null;var b=4+g(a);if(b>=a.byteLength)return null;var c=null;var f=a[b+7];f&192&&(c={},c.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,c.pts*=4,c.pts+=(a[b+13]&6)>>>1,c.dts=c.pts,f&64&&(c.dts=
(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,c.dts*=4,c.dts+=(a[b+18]&6)>>>1));return c},videoPacketContainsKeyFrame:function(a){var b=4+g(a);a=a.subarray(b);for(var c=b=0,d=!1;c<a.byteLength-3;c++)if(1===a[c+2]){b=c+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}c+3!==b-2&&(c=k(a[c+3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));do b++;while(1!==a[b]&&b<a.length);c=b-2;b+=3;break;
case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}c=k(a[c+3]&31);"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0);c=b-2;b+=3;break;default:b+=3}(a=a.subarray(c))&&3<a.byteLength&&(c=k(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));return d}}},{"./stream-types.js":53}],53:[function(f,c,b){c.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(f,c,b){f=f("../utils/stream");var a=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=
8589934592*c;return a},h=function(b){var c,d;h.prototype.init.call(this);this.type_=b;this.push=function(b){b.type===this.type_&&(void 0===d&&(d=b.dts),b.dts=a(b.dts,d),b.pts=a(b.pts,d),c=b.dts,this.trigger("data",b))};this.flush=function(){d=c;this.trigger("done")};this.discontinuity=function(){c=d=void 0}};h.prototype=new f;c.exports={TimestampRolloverStream:h,handleRollover:a}},{"../utils/stream":62}],55:[function(f,c,b){c.exports={generator:f("./mp4-generator"),Transmuxer:f("./transmuxer").Transmuxer,
AudioSegmentStream:f("./transmuxer").AudioSegmentStream,VideoSegmentStream:f("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(f,c,b){var a=Math.pow(2,32)-1,h,d,g,k,l,n,p,r,w,u,A,t,z,B,D,y;(function(){var a;g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],
trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in g)g.hasOwnProperty(a)&&(g[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);k=new Uint8Array([105,115,111,109]);n=new Uint8Array([97,118,99,49]);l=new Uint8Array([0,0,0,1]);p=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,
114,0]);w={video:p,audio:r};t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);A=new Uint8Array([0,0,0,0,0,0,0,0]);B=z=new Uint8Array([0,0,0,0,0,0,0,0]);D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);y=z;u=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var E=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var f=new Uint8Array(c+8);(new DataView(f.buffer,f.byteOffset,f.byteLength)).setUint32(0,f.byteLength);f.set(a,
4);d=0;for(c=8;d<b.length;d++)f.set(b[d],c),c+=b[d].byteLength;return f};var x=function(){return E(g.dinf,E(g.dref,t))};var H=function(a){return E(g.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var F=function(){return E(g.ftyp,k,l,k,n)};var m=function(a){return E(g.hdlr,w[a])};var q=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>
24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return E(g.mdhd,b)};var G=function(a){return E(g.mdia,q(a),m(a.type),M(a))};var I=function(a){return E(g.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var M=function(a){return E(g.minf,"video"===a.type?E(g.vmhd,u):E(g.smhd,A),x(),X(a))};var S=function(a){for(var b=
a.length,c=[];b--;)c[b]=Z(a[b]);return E.apply(null,[g.moov,za(4294967295)].concat(c).concat(ia(a)))};var ia=function(a){for(var b=a.length,c=[];b--;)c[b]=sa(a[b]);return E.apply(null,[g.mvex].concat(c))};var za=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);
return E(g.mvhd,a)};var W=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return E(g.sdtp,b)};var X=function(a){return E(g.stbl,h(a),E(g.stts,y),E(g.stsc,B),E(g.stsz,D),E(g.stco,z))};(function(){h=function(c){return E(g.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))};var a=function(a){var b=a.sps||[],c=a.pps||[],d=[],f=[],h;for(h=0;h<b.length;h++)d.push((b[h].byteLength&
65280)>>>8),d.push(b[h].byteLength&255),d=d.concat(Array.prototype.slice.call(b[h]));for(h=0;h<c.length;h++)f.push((c[h].byteLength&65280)>>>8),f.push(c[h].byteLength&255),f=f.concat(Array.prototype.slice.call(c[h]));return E(g.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),
E(g.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(d).concat([c.length]).concat(f))),E(g.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return E(g.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),H(a))}})();var aa=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,
0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return E(g.tkhd,a)};var U=function(b){var c=E(g.tfhd,new Uint8Array([0,0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,
0,0,0,0,0,0,0,0,0,0,0]));var f=Math.floor(b.baseMediaDecodeTime/(a+1));var h=Math.floor(b.baseMediaDecodeTime%(a+1));f=E(g.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255]));if("audio"===b.type)return b=d(b,92),E(g.traf,c,f,b);h=W(b);b=d(b,h.length+92);return E(g.traf,c,f,b,h)};var Z=function(a){a.duration=a.duration||4294967295;return E(g.trak,aa(a),G(a))};var sa=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>
16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return E(g.trex,b)};(function(){var a=function(a,b){var c=0,d=0,f=0,g=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(f=4),void 0!==a[0].compositionTimeOffset&&(g=8));return[0,0,c|d|f|g,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=function(b,c){var d;
b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&4278190080)>>>
24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return E(g.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return E(g.trun,new Uint8Array(c))};d=function(a,d){return"audio"===
a.type?c(a,d):b(a,d)}})();c.exports={ftyp:F,mdat:function(a){return E(g.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=U(b[d]);return E.apply(null,[g.moof,I(a)].concat(c))},moov:S,initSegment:function(a){var b=F();a=S(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}}},{}],57:[function(f,c,b){var a=function(b,c){var d=[],f;if(!c.length)return null;for(f=0;f<b.byteLength;){var g=b[f]<<24;g|=b[f+1]<<16;g|=b[f+2]<<8;g|=b[f+3];var p=h(b.subarray(f+
4,f+8));g=1<g?f+g:b.byteLength;p===c[0]&&(1===c.length?d.push(b.subarray(f+8,g)):(f=a(b.subarray(f+8,g),c.slice(1)),f.length&&(d=d.concat(f))));f=g}return d};var h=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])};c.exports={parseType:h,timescale:function(b){return a(b,["moov","trak"]).reduce(function(b,c){var d=a(c,["tkhd"])[0];if(!d)return null;var f=d[0];f=0===f?12:20;d=d[f]<<24|d[f+1]<<16|d[f+2]<<8|d[f+
3];c=a(c,["mdia","mdhd"])[0];if(!c)return null;f=c[0];f=0===f?12:20;b[d]=c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3];return b},{})},startTime:function(b,c){c=a(c,["moof","traf"]);c=[].concat.apply([],c.map(function(c){return a(c,["tfhd"]).map(function(d){d=b[d[4]<<24|d[5]<<16|d[6]<<8|d[7]]||9E4;var f=(f=a(c,["tfdt"]).map(function(a){var b=a[0];var c=a[4]<<24|a[5]<<16|a[6]<<8|a[7];1===b&&(c*=Math.pow(2,32),c+=a[8]<<24|a[9]<<16|a[10]<<8|a[11]);return c})[0])||Infinity;return f/d})}));c=Math.min.apply(null,
c);return isFinite(c)?c:0}}},{}],58:[function(f,c,b){b=f("../utils/stream.js");var a=f("./mp4-generator.js"),h=f("../m2ts/m2ts.js"),d=f("../codecs/adts.js"),g=f("../codecs/h264").H264Stream,k=f("../aac"),l=f("../data/silence"),n=f("../utils/clock"),p=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],r=["width","height","profileIdc","levelIdc","profileCompatibility"];var w=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};
var u=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var A=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};var t=function(a){var b,c=0;for(b=0;b<a.length;b++){var d=a[b];c+=d.data.byteLength}return c};var z=function(b){var c=[],d=0,f=0,g=0,h=Infinity;z.prototype.init.call(this);this.push=function(a){D(b,a);b&&p.forEach(function(c){b[c]=a[c]});c.push(a)};this.setEarliestDts=function(a){f=a-b.timelineStartInfo.baseMediaDecodeTime};
this.setVideoBaseMediaDecodeTime=function(a){h=a};this.setAudioAppendStart=function(a){g=a};this.flush=function(){if(0!==c.length){var f=this.trimAdtsFramesByEarliestDts_(c);b.baseMediaDecodeTime=E(b);this.prefixWithSilence_(b,f);b.samples=this.generateSampleTable_(f);var g=a.mdat(this.concatenateFrameData_(f));c=[];f=a.moof(d,[b]);var h=new Uint8Array(f.byteLength+g.byteLength);d++;h.set(f);h.set(g,f.byteLength);y(b);this.trigger("data",{track:b,boxes:h})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,b){var c,d=c=0;if(b.length){var f=n.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var k=Math.ceil(9E4/(a.samplerate/1024));g&&h&&(c=f-Math.max(g,h),c=Math.floor(c/k),d=c*k);if(!(1>c||45E3<d)){k=l[a.samplerate];k||(k=b[0].data);for(f=0;f<c;f++)b.splice(f,0,{data:k});a.baseMediaDecodeTime-=Math.floor(n.videoTsToAudioTs(d,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(a){if(b.minSegmentDts>=f)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=
f?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c};this.concatenateFrameData_=function(a){var b,c=0,d=new Uint8Array(t(a));for(b=0;b<a.length;b++){var f=a[b];d.set(f.data,c);c+=f.data.byteLength}return d}};z.prototype=new b;var B=function(b,c){var d=0,f=[],g=[],h,k;c=c||{};B.prototype.init.call(this);delete b.minPTS;
this.gopCache_=[];this.push=function(a){D(b,a);"seq_parameter_set_rbsp"!==a.nalUnitType||h||(h=a.config,b.sps=[a.data],r.forEach(function(a){b[a]=h[a]},this));"pic_parameter_set_rbsp"!==a.nalUnitType||k||(k=a.data,b.pps=[a.data]);f.push(a)};this.flush=function(){for(var h,k,l;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0!==f.length){h=this.groupNalsIntoFrames_(f);h=this.groupFramesIntoGops_(h);h[0][0].keyFrame||((k=this.getGopForFusion_(f[0],b))?(h.unshift(k),h.byteLength+=
k.byteLength,h.nalCount+=k.nalCount,h.pts=k.pts,h.dts=k.dts,h.duration+=k.duration):h=this.extendFirstKeyFrame_(h));if(g.length){k=c.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h);if(!k){this.gopCache_.unshift({gop:h.pop(),pps:b.pps,sps:b.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);f=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}y(b);h=k}D(b,h);b.samples=this.generateSampleTable_(h);k=a.mdat(this.concatenateNalData_(h));b.baseMediaDecodeTime=
E(b);this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:h.pop(),pps:b.pps,sps:b.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);f=[];this.trigger("baseMediaDecodeTime",b.baseMediaDecodeTime);this.trigger("timelineStartInfo",b.timelineStartInfo);h=a.moof(d,[b]);l=new Uint8Array(h.byteLength+k.byteLength);d++;l.set(h);l.set(k,h.byteLength);this.trigger("data",{track:b,boxes:l})}this.resetStream_();this.trigger("done",
"VideoSegmentStream")};this.resetStream_=function(){y(b);k=h=void 0};this.getGopForFusion_=function(a){var c=Infinity,d;for(d=0;d<this.gopCache_.length;d++){var f=this.gopCache_[d];var g=f.gop;if(b.pps&&A(b.pps[0],f.pps[0])&&b.sps&&A(b.sps[0],f.sps[0])&&!(g.dts<b.timelineStartInfo.dts)&&(g=a.dts-g.dts-g.duration,-1E4<=g&&45E3>=g&&(!h||c>g))){var h=f;c=g}}return h?h.gop:null};this.extendFirstKeyFrame_=function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=
b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a};this.groupNalsIntoFrames_=function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var f=a[b];"access_unit_delimiter_rbsp"===f.nalUnitType?(c.length&&(c.duration=f.dts-c.dts,d.push(c)),c=[f],c.byteLength=f.data.byteLength,c.pts=f.pts,c.dts=f.dts):("slice_layer_without_partitioning_rbsp_idr"===f.nalUnitType&&(c.keyFrame=!0),c.duration=f.dts-c.dts,c.byteLength+=f.data.byteLength,c.push(f))}d.length&&(!c.duration||
0>=c.duration)&&(c.duration=d[d.length-1].duration);d.push(c);return d};this.groupFramesIntoGops_=function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var f=a[b];f.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[f],c.nalCount=f.length,c.byteLength=f.byteLength,c.pts=f.pts,c.dts=f.dts,c.duration=f.duration):
(c.duration+=f.duration,c.nalCount+=f.length,c.byteLength+=f.byteLength,c.push(f))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d};this.generateSampleTable_=function(a,b){var c,d=b||0,f=[];for(b=0;b<a.length;b++){var g=a[b];for(c=0;c<g.length;c++){var h=g[c];var k=w();k.dataOffset=d;k.compositionTimeOffset=h.pts-h.dts;k.duration=h.duration;k.size=4*h.length;k.size+=h.byteLength;h.keyFrame&&(k.flags.dependsOn=
2);d+=k.size;f.push(k)}}return f};this.concatenateNalData_=function(a){var b,c,d,f=0,g=new Uint8Array(a.byteLength+4*a.nalCount),h=new DataView(g.buffer);for(b=0;b<a.length;b++){var k=a[b];for(c=0;c<k.length;c++){var l=k[c];for(d=0;d<l.length;d++){var m=l[d];h.setUint32(f,m.data.byteLength);f+=4;g.set(m.data,f);f+=m.data.byteLength}}}return g};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var f=a.nalCount;var h=a.duration;for(b=c=0;b<g.length&&c<a.length;){var k=g[b];var l=a[c];if(k.pts===
l.pts)break;l.pts>k.pts?b++:(c++,d-=l.byteLength,f-=l.nalCount,h-=l.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=h;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=g.length-1;var d=a.length-1;var f=null;for(b=!1;0<=c&&0<=d;){var h=g[c];var k=a[d];if(h.pts===k.pts){b=!0;break}h.pts>k.pts?c--:(c===g.length-1&&(f=d),d--)}if(!b&&null===f)return null;c=b?d:f;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,
b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){g=a}};B.prototype=new b;var D=function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===
a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))};var y=function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts};var E=function(a){var b=a.minSegmentDts-a.timelineStartInfo.dts;var c=a.timelineStartInfo.baseMediaDecodeTime;
c=Math.max(0,c+b);"audio"===a.type&&(a=a.samplerate/9E4,c=Math.floor(c*a));return c};var x=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;x.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);
this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};x.prototype=new b;x.prototype.flush=function(b){var c=0,d={captions:[],captionStreams:{},metadata:[],info:{}},f=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==b&&"AudioSegmentStream"!==b||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;
this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(f=this.videoTrack.timelineStartInfo.pts,r.forEach(function(a){d.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(f=this.audioTrack.timelineStartInfo.pts,p.forEach(function(a){d.info[a]=this.audioTrack[a]},this));d.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;b=a.initSegment(this.pendingTracks);d.initSegment=new Uint8Array(b.byteLength);
d.initSegment.set(b);d.data=new Uint8Array(this.pendingBytes);for(b=0;b<this.pendingBoxes.length;b++)d.data.set(this.pendingBoxes[b],c),c+=this.pendingBoxes[b].byteLength;for(b=0;b<this.pendingCaptions.length;b++)c=this.pendingCaptions[b],c.startTime=c.startPts-f,c.startTime/=9E4,c.endTime=c.endPts-f,c.endTime/=9E4,d.captionStreams[c.stream]=!0,d.captions.push(c);for(b=0;b<this.pendingMetadata.length;b++)c=this.pendingMetadata[b],c.cueTime=c.pts-f,c.cueTime/=9E4,d.metadata.push(c);d.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",d);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var H=function(a){var b=this,c=!0,f,l;H.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=
c;c.type="aac";c.metadataStream=new h.MetadataStream;c.aacStream=new k;c.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata");c.adtsStream=new d;c.coalesceStream=new x(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",
function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(a){"timed-metadata"!==a.type||c.audioSegmentStream||(l=l||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new z(l),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new h.MetadataStream;c.packetStream=new h.TransportPacketStream;c.parseStream=new h.TransportParseStream;c.elementaryStream=new h.ElementaryStream;c.videoTimestampRolloverStream=new h.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata");c.adtsStream=new d;c.h264Stream=new g;c.captionStream=
new h.CaptionStream;c.coalesceStream=new x(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",
function(d){var g;if("metadata"===d.type){for(g=d.tracks.length;g--;)f||"video"!==d.tracks[g].type?l||"audio"!==d.tracks[g].type||(l=d.tracks[g],l.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(f=d.tracks[g],f.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);f&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new B(f,a),c.videoSegmentStream.on("timelineStartInfo",function(a){l&&(l.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),
c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){l&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));l&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new z(l),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,
"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;l&&(l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,y(l),l.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&b.audioTimestampRolloverStream.discontinuity());f&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,y(f),b.captionStream.reset(),f.timelineStartInfo.baseMediaDecodeTime=
a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){l&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){f&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=u(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();
c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};H.prototype=new b;c.exports={Transmuxer:H,VideoSegmentStream:B,AudioSegmentStream:z,AUDIO_PROPERTIES:p,VIDEO_PROPERTIES:r}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,
"./mp4-generator.js":56}],59:[function(f,c,b){var a=f("../m2ts/stream-types.js"),h=f("../m2ts/timestamp-rollover-stream.js").handleRollover;var d=f("../m2ts/probe.js");var g=f("../aac/probe.js");var k=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=h(a.dts,c);a.pts=h(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=
h(a.dts,d);a.pts=h(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=h(a.dts,d),a.pts=h(a.pts,d),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4)}};c.exports={inspect:function(b,c){var f=73===b[0]&&68===b[1]&&51===b[2]?!0:!1;if(f)a:{var h=!1,l=0,n=null;f=null;for(var A,t=0,z;3<=b.length-t;){switch(g.parseType(b,t)){case "timed-metadata":if(10>b.length-t){h=!0;break}A=g.parseId3TagSize(b,t);if(A>b.length){h=!0;break}null===f&&(z=b.subarray(t,t+A),f=g.parseAacTimestamp(z));
t+=A;break;case "audio":if(7>b.length-t){h=!0;break}A=g.parseAdtsSize(b,t);if(A>b.length){h=!0;break}null===n&&(z=b.subarray(t,t+A),n=g.parseSampleRate(z));l++;t+=A;break;default:t++}if(h){b=null;break a}}null===n||null===f?b=null:(b=9E4/n,b={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*l*b,pts:f+1024*l*b}]})}else{f={pid:null,table:null};h={};n=0;for(A=188;A<b.byteLength;)if(71===b[n]&&71===b[A]){t=b.subarray(n,A);z=d.parseType(t,f.pid);switch(z){case "pat":f.pid||(f.pid=d.parsePat(t));
break;case "pmt":f.table||(f.table=d.parsePmt(t))}if(f.pid&&f.table)break;n+=188;A+=188}else n++,A++;for(l in f.table)if(f.table.hasOwnProperty(l))switch(f.table[l]){case a.H264_STREAM_TYPE:h.video=[];var B;A=b;t=f;z=h;var D=0,y=188,E=!1,x=[];for(B=0;y<A.byteLength;)if(71===A[D]&&71===A[y]){n=A.subarray(D,y);var H=d.parseType(n,t.pid);switch(H){case "pes":var F=d.parsePesType(n,t.table);H=d.parsePayloadUnitStartIndicator(n);if("video"===F&&(H&&!E&&(F=d.parsePesTime(n))&&(F.type="video",z.video.push(F),
E=!0),!z.firstKeyFrame)){if(H&&0!==B){F=new Uint8Array(B);for(H=0;x.length;)B=x.shift(),F.set(B,H),H+=B.byteLength;d.videoPacketContainsKeyFrame(F)&&(z.firstKeyFrame=d.parsePesTime(F),z.firstKeyFrame.type="video");B=0}x.push(n);B+=n.byteLength}}if(E&&z.firstKeyFrame)break;D+=188;y+=188}else D++,y++;y=A.byteLength;D=y-188;for(E=!1;0<=D;)if(71===A[D]&&71===A[y]){n=A.subarray(D,y);H=d.parseType(n,t.pid);switch(H){case "pes":if(F=d.parsePesType(n,t.table),H=d.parsePayloadUnitStartIndicator(n),"video"===
F&&H&&(F=d.parsePesTime(n)))F.type="video",z.video.push(F),E=!0}if(E)break;D-=188;y-=188}else D--,y--;0===h.video.length&&delete h.video;break;case a.ADTS_STREAM_TYPE:h.audio=[];n=b;A=f;t=h;z=0;D=188;for(y=!1;D<n.byteLength;)if(71===n[z]&&71===n[D]){E=n.subarray(z,D);x=d.parseType(E,A.pid);switch(x){case "pes":if(B=d.parsePesType(E,A.table),x=d.parsePayloadUnitStartIndicator(E),"audio"===B&&x&&(E=d.parsePesTime(E)))E.type="audio",t.audio.push(E),y=!0}if(y)break;z+=188;D+=188}else z++,D++;D=n.byteLength;
z=D-188;for(y=!1;0<=z;)if(71===n[z]&&71===n[D]){E=n.subarray(z,D);x=d.parseType(E,A.pid);switch(x){case "pes":if(B=d.parsePesType(E,A.table),x=d.parsePayloadUnitStartIndicator(E),"audio"===B&&x&&(E=d.parsePesTime(E)))E.type="audio",t.audio.push(E),y=!0}if(y)break;z-=188;D-=188}else z--,D--;0===h.audio.length&&delete h.audio}b=h}if(!b||!b.audio&&!b.video)return null;k(b,c);return b}}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],
60:[function(f,c,b){var a=function(a){return 9E4*a};var h=function(a,b){return a*b};var d=function(a){return a/9E4};var g=function(a,b){return a/b};c.exports={secondsToVideoTs:a,secondsToAudioTs:h,videoTsToSeconds:d,audioTsToSeconds:g,audioTsToVideoTs:function(b,c){return a(g(b,c))},videoTsToAudioTs:function(a,b){return h(d(a),b)}}},{}],61:[function(f,c,b){c.exports=function(a){var b=a.byteLength,c=0,f=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+f};this.loadWord=
function(){var d=a.byteLength-b,g=new Uint8Array(4),h=Math.min(4,b);if(0===h)throw Error("no bytes available");g.set(a.subarray(d,d+h));c=(new DataView(g.buffer)).getUint32(0);f=8*h;b-=h};this.skipBits=function(a){if(!(f>a)){a-=f;var d=Math.floor(a/8);a-=8*d;b-=d;this.loadWord()}c<<=a;f-=a};this.readBits=function(a){var d=Math.min(f,a),g=c>>>32-d;f-=d;0<f?c<<=d:0<b&&this.loadWord();d=a-d;return 0<d?g<<d|this.readBits(d):g};this.skipLeadingZeros=function(){var a;for(a=0;a<f;++a)if(0!==(c&2147483648>>>
a))return c<<=a,f-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};
this.loadWord()}},{}],62:[function(f,c,b){f=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,f;if(c=a[b])if(2===arguments.length){var h=c.length;for(f=0;f<h;++f)c[f].call(this,arguments[1])}else{var l=[];for(f=1;f<arguments.length;++f)l.push(arguments[f]);h=c.length;for(f=0;f<h;++f)c[f].apply(this,l)}};this.dispose=
function(){a={}}}};f.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};f.prototype.push=function(a){this.trigger("data",a)};f.prototype.flush=function(a){this.trigger("done",a)};c.exports=f},{}],63:[function(f,c,b){(function(a){var f=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,g=/(?:\/|^)\.(?=\/)/g,k=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,l={buildAbsoluteURL:function(a,b,c){c=c||{};
a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=this.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=l.normalizePath(c.path);return l.buildURLFromParts(c)}var f=this.parseURL(b);if(!f)throw Error("Error trying to parse relative URL.");if(f.scheme){if(!c.alwaysNormalize)return b;f.path=l.normalizePath(f.path);return l.buildURLFromParts(f)}b=this.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),
b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};f.netLoc||(a.netLoc=b.netLoc,"/"!==f.path[0]&&(f.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+f.path,a.path=l.normalizePath(b)):(a.path=b.path,f.params||(a.params=b.params,f.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?l.normalizePath(f.path):f.path);return l.buildURLFromParts(a)},parseURL:function(a){return(a=f.exec(a))?
{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(g,"");a.length!==(a=a.replace(k,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};"object"===typeof b&&"object"===typeof c?c.exports=l:"object"===typeof b?b.URLToolkit=l:a.URLToolkit=l})(this)},{}],64:[function(f,c,b){(function(a){Object.defineProperty(b,
"__esModule",{value:!0});var h=f("global/window"),d=h&&h.__esModule?h:{"default":h},g=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},k=function(a){Object.defineProperties(a.frame,{id:{get:function(){g["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){g["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get:function(){g["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");
return a.value.data}}})},l=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a};b["default"]={addTextTrackData:function(a,b,c){var f=d["default"].WebKitDataCue||d["default"].VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new f(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);c&&function(){var b=l(a.mediaSource_.duration);c.forEach(function(a){var b=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var c=new f(b,b,a.value||
a.url||a.data||"");c.frame=a;c.value=a;k(c);this.metadataTrack_.addCue(c)},this)},a);a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length&&function(){for(var c=a.metadataTrack_.cues,d=[],f=0;f<c.length;f++)c[f]&&d.push(c[f]);var g=d.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),h=Object.keys(g).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,c){var d=Number(h[c+1])||b;g[a].forEach(function(a){a.endTime=d})})}()}()},durationOfVideo:l};
c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],65:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});b["default"]={isAudioCodec:function(a){return/mp4a\.\d+.\d+/i.test(a)},parseContentType:function(a){var b={type:"",parameters:{}};a=a.trim().split(";");b.type=a.shift().trim();a.forEach(function(a){var c=a.trim().split("=");1<c.length&&(a=c[0].replace(/"/g,"").trim(),c=
c[1].replace(/"/g,"").trim(),b.parameters[a]=c)});return b},isVideoCodec:function(a){return/avc1\.[\da-f]+/i.test(a)},translateLegacyCodecs:function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);return"avc1."+a+"00"+c})})}};c.exports=b["default"]},{}],66:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});b["default"]=function(a,b,c){b=b.player_;if(c.captions&&c.captions.length){a.inbandTextTracks_||
(a.inbandTextTracks_={});for(var d in c.captionStreams)if(!a.inbandTextTracks_[d]){b.tech_.trigger({type:"usage",name:"hls-608"});var f=b.textTracks().getTrackById(d);a.inbandTextTracks_[d]=f?f:b.addRemoteTextTrack({kind:"captions",id:d,label:d},!1).track}}c.metadata&&c.metadata.length&&!a.metadataTrack_&&(a.metadataTrack_=b.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=c.metadata.dispatchType)};c.exports=b["default"]},{}],67:[function(f,
c,b){Object.defineProperty(b,"__esModule",{value:!0});b["default"]={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};c.exports=b["default"]},{}],68:[function(f,c,b){(function(a){function h(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;
d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("global/document"),n=h(l),p=h("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=f("./flash-source-buffer");var r=h(a);a=f("./flash-constants");a=h(a);var w=f("./codec-utils");l=function(a){function b(){var a=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this.sourceBuffers=
[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],function(b){a.swfObj=n["default"].getElementById(b.swfId);a.player_=(0,p["default"])(a.swfObj.parentNode);a.tech_=a.swfObj.tech;a.readyState="open";a.tech_.on("seeking",function(){for(var b=a.sourceBuffers.length;b--;)a.sourceBuffers[b].abort()});a.swfObj&&a.swfObj.vjs_load()})}d(b,a);g(b,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(a){a=(0,w.parseContentType)(a);if("video/mp2t"===a.type||
"audio/mp2t"===a.type)a=new r["default"](this);else throw Error("NotSupportedError (Video.js)");this.sourceBuffers.push(a);return a}},{key:"endOfStream",value:function(a){"network"===a?this.tech_.error(2):"decode"===a&&this.tech_.error(3);"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]);return b}(p["default"].EventTarget);b["default"]=l;try{Object.defineProperty(l.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):
NaN},set:function(a){var b,c=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",a);if(a<c)for(b=0;b<this.sourceBuffers.length;b++)this.sourceBuffers[b].remove(a,c);return a}})}catch(A){l.prototype.duration=NaN}for(var u in a["default"])l[u]=a["default"][u];c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],
69:[function(f,c,b){(function(a){function h(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("global/window"),n=h(l),p=h("undefined"!==typeof window?window.videojs:
"undefined"!==typeof a?a.videojs:null);a=f("mux.js/lib/flv");var r=h(a);a=f("./remove-cues-from-track");var w=h(a);a=f("./create-text-tracks-if-necessary");var u=h(a),A=f("./add-text-track-data");a=f("./flash-transmuxer-worker");var t=h(a);a=f("webwackify");var z=h(a);a=f("./flash-constants");var B=h(a),D=function(){var a=void 0;try{a=f.resolve("./flash-transmuxer-worker")}catch(H){}return a},y=function(a){n["default"].setTimeout(a,B["default"].TIME_BETWEEN_CHUNKS)},E=function(a,b){if("number"!==
typeof b||0>b)b=0;b=Math.pow(10,b);return Math.round(a*b)/b};a=function(a){function b(a){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var d=void 0;this.chunkSize_=B["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=a;this.videoBufferEnd_=this.audioBufferEnd_=NaN;this.updating=!1;this.timestampOffset_=0;d=n["default"].btoa(String.fromCharCode.apply(null,
Array.prototype.slice.call(r["default"].getFlvHeader())));a=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+a+Math.random().toString(36).slice(2,8);this.flashEncodedDataName_="vjs_flashEncodedData_"+a+Math.random().toString(36).slice(2,8);n["default"][this.flashEncodedHeaderName_]=function(){delete n["default"][c.flashEncodedHeaderName_];return d};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=
(0,z["default"])(t["default"],D());this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(a){"data"===a.data.action&&c.receiveBuffer_(a.data.segment)};this.one("updateend",function(){c.mediaSource_.tech_.trigger("loadedmetadata")});Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.mediaSource_.swfObj.vjs_discontinuity(),this.videoBufferEnd_=this.audioBufferEnd_=
this.basePtsOffset_=NaN,this.transmuxer_.postMessage({action:"reset"}))}});Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return p["default"].createTimeRange();var a=this.mediaSource_.swfObj.vjs_getProperty("buffered");a&&a.length&&(a[0][0]=E(a[0][0],3),a[0][1]=E(a[0][1],3));return p["default"].createTimeRanges(a)}});this.mediaSource_.player_.on("seeked",function(){(0,w["default"])(0,Infinity,c.metadataTrack_);
if(c.inbandTextTracks_)for(var a in c.inbandTextTracks_)(0,w["default"])(0,Infinity,c.inbandTextTracks_[a])});var f=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",f);this.mediaSource_.player_.tech_.hls.on("dispose",function(){c.transmuxer_.terminate();c.mediaSource_.player_.tech_.off("hls-reset",f)})}d(b,a);g(b,[{key:"appendBuffer",value:function(a){if(this.updating)throw a=Error("SourceBuffer.append() cannot be called while an update is in progress"),a.name="InvalidStateError",
a.code=11,a;this.updating=!0;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(a,b){(0,w["default"])(a,b,this.metadataTrack_);
if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,w["default"])(a,b,this.inbandTextTracks_[c]);this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(a){var b=this;(0,u["default"])(this,this.mediaSource_,a);(0,A.addTextTrackData)(this,a.captions,a.metadata);y(function(){var c=b.convertTagsToData_(a);0===b.buffer_.length&&y(b.processBuffer_.bind(b));c&&(b.buffer_.push(c),b.bufferSize_+=c.byteLength)})}},{key:"processBuffer_",value:function(){var a=
this,b=B["default"].BYTES_PER_CHUNK;if(this.buffer_.length){var c=this.buffer_[0].subarray(0,b);c.byteLength<b||this.buffer_[0].byteLength===b?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(b);this.bufferSize_-=c.byteLength;b=[];for(var d=c.byteLength,f=0;f<d;f++)b.push(String.fromCharCode(c[f]));var g=n["default"].btoa(b.join(""));n["default"][this.flashEncodedDataName_]=function(){y(a.processBuffer_.bind(a));delete n["default"][a.flashEncodedDataName_];return g};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==
this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(a){var b=0,c=this.mediaSource_.tech_,d=0,f=a.tags.videoTags;a=a.tags.audioTags;isNaN(this.basePtsOffset_)&&(f.length||a.length)&&(this.basePtsOffset_=Math.min((a[0]||{pts:Infinity}).pts,(f[0]||{pts:Infinity}).pts));c.seeking()&&(this.audioBufferEnd_=this.videoBufferEnd_=NaN);isNaN(this.videoBufferEnd_)?(c.buffered().length&&(d=c.buffered().end(0)-this.timestampOffset),c.seeking()&&(d=Math.max(d,
c.currentTime()-this.timestampOffset)),d=1E3*d+this.basePtsOffset_):d=this.videoBufferEnd_+.1;var g=f.length;if(g&&f[g-1].pts>=d){for(;--g;){var h=f[g];if(!(h.pts>d)&&(h.keyFrame||h.metaDataTag))break}for(;g&&f[g-1].metaDataTag;)g--}f=f.slice(g);h=isNaN(this.audioBufferEnd_)?d:this.audioBufferEnd_+.1;f.length&&(h=Math.min(h,f[0].pts));for(g=0;g<a.length&&!(a[g].pts>=h);)g++;a=a.slice(g);a.length&&(this.audioBufferEnd_=a[a.length-1].pts);f.length&&(this.videoBufferEnd_=f[f.length-1].pts);a=this.getOrderedTags_(f,
a);if(0!==a.length){if(a[0].pts<d&&c.seeking()){g=1/30;c=c.currentTime()-(d-a[0].pts)/1E3;c<g&&(c=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(c)}catch(ia){}}for(c=0;c<a.length;c++)b+=a[c].bytes.byteLength;b=new Uint8Array(b);for(d=c=0;c<a.length;c++)b.set(a[c].bytes,d),d+=a[c].bytes.byteLength;return b}}},{key:"getOrderedTags_",value:function(a,b){for(var c,d=[];a.length||b.length;)c=a.length?b.length?b[0].dts<a[0].dts?b.shift():a.shift():a.shift():b.shift(),d.push(c);return d}},{key:"onHlsReset_",
value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return b}(p["default"].EventTarget);b["default"]=a;c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webwackify:76}],70:[function(f,c,b){Object.defineProperty(b,
"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=f("global/window"),d=h&&h.__esModule?h:{"default":h},g=(f=f("mux.js/lib/flv"))&&f.__esModule?f:{"default":f},k=function(a){a.on("data",function(a){d["default"].postMessage({action:"data",segment:a})});a.on("done",function(a){d["default"].postMessage({action:"done"})})},
l=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}a(b,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new g["default"].Transmuxer(this.options);k(this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},
{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]);return b}(),n=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new l(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new l),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};b["default"]=function(a){return new n(a)};c.exports=b["default"]},{"global/window":32,"mux.js/lib/flv":46}],
71:[function(f,c,b){(function(a){function h(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("global/window"),n=h(l);l=f("global/document");var p=h(l),r=h("undefined"!==
typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=f("./virtual-source-buffer");var w=h(a),u=f("./add-text-track-data"),A=f("./codec-utils");a=function(a){function b(){var a=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var c=void 0;this.nativeMediaSource_=new n["default"].MediaSource;for(c in this.nativeMediaSource_)c in b.prototype||"function"!==typeof this.nativeMediaSource_[c]||
(this[c]=this.nativeMediaSource_[c].bind(this.nativeMediaSource_));this.duration_=NaN;Object.defineProperty(this,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(this,"seekable",{get:function(){return Infinity===this.duration_?r["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});
Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,d=!0;for(b=
0;b<a.player_.audioTracks().length;b++){var f=a.player_.audioTracks()[b];if(f.enabled&&"main"!==f.kind){c=!0;d=!1;break}}a.sourceBuffers.forEach(function(b){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,d=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=d))return;a.activeSourceBuffers_.push(b)})}};this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=
!0})};this.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};this.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},this);this.on("sourceopen",function(b){if(b=p["default"].querySelector('[src="'+a.url_+'"]'))a.player_=(0,r["default"])(b.parentNode),
a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});this.on("sourceended",function(b){b=(0,u.durationOfVideo)(a.duration);for(var c=
0;c<a.sourceBuffers.length;c++){var d=a.sourceBuffers[c];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&(d[d.length-1].endTime=b)}});this.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),
this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}d(b,a);g(b,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",
a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=(0,A.parseContentType)(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=(0,A.translateLegacyCodecs)(a),a=a.filter(function(a){return(0,A.isAudioCodec)(a)||(0,A.isVideoCodec)(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new w["default"](this,
a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return b}(r["default"].EventTarget);b["default"]=a;c.exports=b["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,
"global/document":31,"global/window":32}],72:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});b["default"]=function(a,b,c){var d;if(c&&c.cues)for(d=c.cues.length;d--;){var f=c.cues[d];f.startTime<=b&&f.endTime>=a&&c.removeCue(f)}};c.exports=b["default"]},{}],73:[function(f,c,b){Object.defineProperty(b,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=f("global/window"),d=h&&h.__esModule?h:{"default":h},g=(f=f("mux.js/lib/mp4"))&&f.__esModule?f:{"default":f},k=function(a){a.on("data",function(a){var b=a.initSegment;a.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};b=a.data;a.data=b.buffer;d["default"].postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])});if(a.captionStream)a.captionStream.on("data",
function(a){d["default"].postMessage({action:"caption",data:a})});a.on("done",function(a){d["default"].postMessage({action:"done"})});a.on("gopInfo",function(a){d["default"].postMessage({action:"gopInfo",gopInfo:a})})},l=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}a(b,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new g["default"].Transmuxer(this.options);k(this.transmuxer)}},
{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},
{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return b}(),n=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new l(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new l),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};b["default"]=function(a){return new n(a)};c.exports=b["default"]},{"global/window":32,
"mux.js/lib/mp4":55}],74:[function(f,c,b){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var d=f("global/window"),g=c(d);d=f("./flash-media-source");var k=c(d);d=f("./html-media-source");var l=c(d),n=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),p=0,r={mode:"auto"};n["default"].mediaSources={};var w=function(a,b){if(a=n["default"].mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");
},u=function(){return!!g["default"].MediaSource&&!!g["default"].MediaSource.isTypeSupported&&g["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};a=function(a){a=n["default"].mergeOptions(r,a);this.MediaSource={open:w,supportsNativeMediaSources:u};if("html5"===a.mode||"auto"===a.mode&&u())return new l["default"];if(n["default"].getTech("Flash"))return new k["default"];throw Error("Cannot use Flash or Html5 to create a MediaSource for this video");};b.MediaSource=a;
a.open=w;a.supportsNativeMediaSources=u;d={createObjectURL:function(a){if(a instanceof l["default"]){var b=g["default"].URL.createObjectURL(a.nativeMediaSource_);return a.url_=b}if(!(a instanceof k["default"]))return b=g["default"].URL.createObjectURL(a),a.url_=b;b="blob:vjs-media-source/"+p;p++;n["default"].mediaSources[b]=a;return b}};b.URL=d;n["default"].MediaSource=a;n["default"].URL=d}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(f,c,b){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,
"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},l=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=f("./create-text-tracks-if-necessary");var n=c(a);a=f("./remove-cues-from-track");var p=c(a),r=f("./add-text-track-data");a=f("webwackify");var w=c(a);a=f("./transmuxer-worker");var u=c(a),A=f("./codec-utils"),t=function(){var a=void 0;try{a=f.resolve("./transmuxer-worker")}catch(x){}return a},z=function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);d.updating=!1;d.realBuffer_=c;a=
function(a){"function"===typeof c[a]?d[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var f in c)a(f);return d},B=function(a,b,c){if(!b||!a.length)return[];b=Math.ceil(9E4*(b.currentTime()-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)};b.gopsSafeToAlignWith=B;var D=function(a,b,c){if(!b.length)return a;if(c)return b.slice();c=b[0].pts;var d=0;for(d;d<a.length&&!(a[d].pts>=
c);d++);return a.slice(0,d).concat(b)};b.updateGopBuffer=D;var y=function(a,b,c,d){b=Math.ceil(9E4*(b-d));var f=Math.ceil(9E4*(c-d));c=a.slice();for(d=a.length;d--&&!(a[d].pts<=f););if(-1===d)return c;for(f=d+1;f--&&!(a[f].pts<=b););f=Math.max(f,0);c.splice(f,d-f+1);return c};b.removeGopBuffer=y;a=function(a){function b(a,c){var d=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,l["default"].EventTarget);
this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=!1;this.mediaSource_=a;this.codecs_=c;this.videoCodec_=this.audioCodec_=null;this.audioDisabled_=!1;this.appendAudioInitSegment_=!0;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=11<=l["default"].browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(a){(0,A.isAudioCodec)(a)?d.audioCodec_=a:(0,A.isVideoCodec)(a)&&(d.videoCodec_=a)});this.transmuxer_=(0,w["default"])(u["default"],t());
this.transmuxer_.postMessage({action:"init",options:a});this.transmuxer_.onmessage=function(a){if("data"===a.data.action)return d.data_(a);if("done"===a.data.action)return d.done_(a);if("gopInfo"===a.data.action)return d.appendGopInfo_(a)};Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",
timestampOffset:a}))}});Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,
"buffered",{get:function(){var a=null,b=null,c=0,d=[],f=[];if(!this.videoBuffer_&&!this.audioBuffer_)return l["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_||this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return l["default"].createTimeRange();for(var g=this.videoBuffer_.buffered,h=this.audioBuffer_.buffered,k=g.length;k--;)d.push({time:g.start(k),type:"start"}),
d.push({time:g.end(k),type:"end"});for(k=h.length;k--;)d.push({time:h.start(k),type:"start"}),d.push({time:h.end(k),type:"end"});d.sort(function(a,b){return a.time-b.time});for(k=0;k<d.length;k++)"start"===d[k].type?(c++,2===c&&(a=d[k].time)):"end"===d[k].type&&(c--,1===c&&(b=d[k].time)),null!==a&&null!==b&&(f.push([a,b]),b=a=null);return l["default"].createTimeRanges(f)}})}d(b,a);g(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);
b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);(0,n["default"])(this,this.mediaSource_,b);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?(d=a.mediaSource_[c+
"Buffer_"],d.updating=!1):(d=z(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d);a[c+"Buffer_"]=d;["update","updatestart","updateend"].forEach(function(f){d.addEventListener(f,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===f&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(f)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=
!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:B(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},
{key:"appendGopInfo_",value:function(a){this.gopBuffer_=D(this.gopBuffer_,a.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(a,b){this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(a,b),this.gopBuffer_=y(this.gopBuffer_,a,b,this.timeMapping_));!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));(0,p["default"])(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,p["default"])(a,
b,this.inbandTextTracks_[c])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,f=b.initSegment;a[c].segments.push(d);a[c].bytes+=d.byteLength;a[c].initSegment=f;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||
(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&
a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_),(0,r.addTextTrackData)(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,
b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes);a.segments.forEach(function(a){d.set(a,c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(G){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:G.message,originalError:G})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});
this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return b}(l["default"].EventTarget);b["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webwackify:76}],76:[function(f,c,b,a,h,d){var g=a,k=h,l=JSON.stringify,n=!1;f=function(a){function b(d){if(c[d])return c[d].exports;var f=
c[d]={i:d,l:!1,exports:{}};a[d].call(f.exports,f,f.exports,b);f.l=!0;return f.exports}var c={};b.m=a;b.c=c;b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})};b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(c,"a",c);return c};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=entryModule)};"undefined"===typeof g&&(n=!0,g=f,k=__webpack_modules__);var p=function(a){for(var b=
Object.keys(d),c,f=0;f<b.length;f++){var h=b[f],n=d[h].exports;if(n===a||n&&n.default===a){c=h;break}}if(!c){c=Math.floor(Math.pow(16,8)*Math.random()).toString(16);n={};for(f=0;f<b.length;f++)h=b[f],n[h]=h;k[c]=["function(require,module,exports){"+a+"(self); }",n]}a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);b={};b[c]=c;k[a]=["function(require,module,exports){var f = require("+l(c)+");(f.default ? f.default : f)(self);}",b];return"("+g+")({"+Object.keys(k).map(function(a){return l(a)+
":["+k[a][0]+","+l(k[a][1])+"]"}).join(",")+"},{},["+l(a)+"])"},r=function(a,b){var c="string"===typeof b;var d=c?{}:[];Object.keys(k).forEach(function(a){k[a]&&(d[a]=k[a].toString())});var f=__webpack_require__(b);if(!f||f!==a&&f.default!==a)f=d[b],d[b]=f.substring(0,f.length-1)+"\n"+a.name+"();\n}";c?(b=l(b),a="{"+Object.keys(d).map(function(a){return l(a)+":"+d[a]}).join(",")+"}"):a="["+d.join(",")+"]";return"var fn = ("+g.toString().replace("entryModule",b)+")("+a+');\n(typeof fn === "function") && fn(self);'};
c.exports=function(a,b){a=n?r(a,b):p(a);a=new Blob([a],{type:"text/javascript"});a=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a);b=new Worker(a);b.objectURL=a;return b}},{}],77:[function(f,c,b){(function(a){function b(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===
a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},l=f("global/document"),n=b(l);l=f("./playlist-loader");l=b(l);var p=f("./playlist");p=b(p);var r=f("./xhr"),w=b(r),u=f("aes-decrypter");r=f("./bin-utils");var A=b(r);r=f("videojs-contrib-media-sources");var t=f("m3u8-parser");t=b(t);var z=b("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),B=f("./master-playlist-controller");a=f("./config");var D=b(a);a=f("./rendition-mixin");
var y=b(a);a=f("global/window");a=b(a);var E=f("./playback-watcher"),x=b(E);E=f("./reload-source-on-error");E=b(E);var H=f("./playlist-selectors.js"),F={PlaylistLoader:l["default"],Playlist:p["default"],Decrypter:u.Decrypter,AsyncStream:u.AsyncStream,decrypt:u.decrypt,utils:A["default"],STANDARD_PLAYLIST_SELECTOR:H.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:H.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:H.comparePlaylistBandwidth,comparePlaylistResolution:H.comparePlaylistResolution,
xhr:(0,w["default"])()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(F,a,{get:function(){z["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return D["default"][a]},set:function(b){z["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?z["default"].log.warn("value of Hls."+
a+" must be greater than or equal to 0"):D["default"][a]=b}})});var m=function(a,b){b=b.media();for(var c=-1,d=0;d<a.length;d++)if(a[d].id===b.uri){c=d;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},q=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});m(a,b.playlists)};F.canPlaySource=function(){return z["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};F.supportsNativeHls=function(){var a=n["default"].createElement("video");
return z["default"].getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):!1}();F.isSupported=function(){return z["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var G=function(a){function b(a,c,d){var f=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,c,d.hls);c.options_&&c.options_.playerId&&(d=(0,z["default"])(c.options_.playerId),d.hasOwnProperty("hls")||Object.defineProperty(d,"hls",{get:function(){z["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");c.trigger({type:"usage",name:"hls-player-access"});return f}}));this.tech_=c;this.source_=a;this.stats={};this.ignoreNextSeekingEvent_=!1;this.setOptions_();if(this.options_.overrideNative&&(c.featuresNativeVideoTracks||
c.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(n["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=n["default"].fullscreenElement||n["default"].webkitFullscreenElement||n["default"].mozFullScreenElement||n["default"].msFullscreenElement)&&a.contains(f.tech_.el())&&f.masterPlaylistController_.fastQualityChange_()});this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});this.on(this.tech_,"play",this.play)}d(b,a);g(b,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=
4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a){var b=this;a&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=F,this.masterPlaylistController_=new B.MasterPlaylistController(this.options_),
this.playbackWatcher_=new x["default"](z["default"].mergeOptions(this.options_,{seekable:function(){return b.seekable()}})),this.masterPlaylistController_.on("error",function(){z["default"].players[b.tech_.options_.playerId].error(b.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):F.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=F.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=
this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=
1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){z["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return b.bandwidth||
0},enumerable:!0},mediaRequests:{get:function(){return b.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return b.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return b.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return b.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return b.masterPlaylistController_.mediaTransferDuration_()||
0},enumerable:!0},mediaBytesTransferred:{get:function(){return b.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return b.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,y["default"])(b)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return b.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(z["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=z["default"].players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){q(a.qualityLevels_,
a)}),this.playlists.on("mediachange",function(){m(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&
this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();k(Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}}]);return b}(z["default"].getComponent("Component"));l=function S(a){return{canHandleSource:function(b){var c=z["default"].mergeOptions(z["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return c.hls&&c.hls.mode&&c.hls.mode!==a?!1:S.canPlayType(b.type,c)},handleSource:function(b,c){var d=z["default"].mergeOptions(z["default"].options,
2>=arguments.length||void 0===arguments[2]?{}:arguments[2],{hls:{mode:a}});"flash"===a&&c.setTimeout(function(){c.trigger("loadstart")},1);c.hls=new G(b,c,d);c.hls.xhr=(0,w["default"])();c.hls.src(b.src);return c.hls},canPlayType:function(a){var b=z["default"].mergeOptions(z["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return S.canPlayType(a,b)?"maybe":""}}};l.canPlayType=function(a,b){return z["default"].browser.IE_VERSION&&10>=z["default"].browser.IE_VERSION||!b.hls.overrideNative&&
F.supportsNativeHls?!1:/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)};if("undefined"===typeof z["default"].MediaSource||"undefined"===typeof z["default"].URL)z["default"].MediaSource=r.MediaSource,z["default"].URL=r.URL;p=z["default"].getTech("Flash");r.MediaSource.supportsNativeMediaSources()&&z["default"].getTech("Html5").registerSourceHandler(l("html5"),0);a["default"].Uint8Array&&p&&p.registerSourceHandler(l("flash"));z["default"].HlsHandler=G;z["default"].HlsSourceHandler=
l;z["default"].Hls=F;z["default"].use||z["default"].registerComponent("Hls",F);z["default"].m3u8=t["default"];z["default"].options.hls=z["default"].options.hls||{};z["default"].registerPlugin?z["default"].registerPlugin("reloadSourceOnError",E["default"]):z["default"].plugin("reloadSourceOnError",E["default"]);c.exports={Hls:F,HlsHandler:G,HlsSourceHandler:l}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,
"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)});(function(e){var f=function(c){return{hide:function(){c.style.display="none";return this},attach:function(b,a){c.addEventListener?c.addEventListener(b,a,!1):c.attachEvent&&c.attachEvent("on"+b,a);return function(){f(c).detach(b,a)}},detach:function(b,a){c.removeEventListener?c.removeEventListener(b,a,!1):c.attachEvent&&c.detachEvent("on"+b,a);return this},contains:function(b){return b?c===b?!0:c.contains?c.contains(b):!!(b.compareDocumentPosition(c)&8):!1},insertBefore:function(b){b.parentNode.insertBefore(c,
b);return this},remove:function(){c.parentNode.removeChild(c);return this},css:function(b){if(null==c.style)throw new f.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");null!=b.opacity&&"string"!==typeof c.style.opacity&&"undefined"!==typeof c.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")");f.extend(c.style,b);return this},hasClass:function(b,a){b=new RegExp("(^| )"+b+"( |$)");return b.test(c.className)||!(!a||!b.test(c.parentNode.className))},
addClass:function(b){f(c).hasClass(b)||(c.className+=" "+b);return this},removeClass:function(b){c.className=c.className.replace(new RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(b,a){var e=[];if(a&&c.querySelector)return c.querySelector("."+b);if(c.querySelectorAll)return c.querySelectorAll("."+b);var d=c.getElementsByTagName("*");f.each(d,function(a,c){f(c).hasClass(b)&&e.push(c)});return a?e[0]:e},getFirstByClass:function(b){return f(c).getByClass(b,!0)},
children:function(){for(var b=[],a=c.firstChild;a;)1===a.nodeType&&b.push(a),a=a.nextSibling;return b},setText:function(b){c.innerText=b;c.textContent=b;return this},clearText:function(){return f(c).setText("")},hasAttribute:function(b){if(c.hasAttribute)return c.hasAttribute(b)?null==/^false$/i.exec(c.getAttribute(b)):!1;b=c[b];return void 0===b?!1:null==/^false$/i.exec(b)}}};(function(){f.canvasToBlob=function(c,b,a){return f.dataUriToBlob(c.toDataURL(b,a))};f.dataUriToBlob=function(c){var b=0<=
c.split(",")[0].indexOf("base64")?atob(c.split(",")[1]):decodeURI(c.split(",")[1]);var a=c.split(",")[0].split(":")[1].split(";")[0];c=new ArrayBuffer(b.length);var e=new Uint8Array(c);f.each(b,function(a,b){e[a]=b.charCodeAt(0)});return function(a,b){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(c=c&&new c)?(c.append(a),c.getBlob(b)):new Blob([a],{type:b})}(c,a)};f.log=function(c,b){if(window.console)if(b&&"info"!==b)if(window.console[b])window.console[b](c);
else window.console.log("<"+b+"> "+c);else window.console.log(c)};f.isObject=function(c){return c&&!c.nodeType&&"[object Object]"===Object.prototype.toString.call(c)};f.isFunction=function(c){return"function"===typeof c};f.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)||c&&window.ArrayBuffer&&c.buffer&&c.buffer.constructor===ArrayBuffer};f.isItemList=function(c){return"[object DataTransferItemList]"===Object.prototype.toString.call(c)};f.isNodeList=function(c){return"[object NodeList]"===
Object.prototype.toString.call(c)||c.item&&c.namedItem};f.isString=function(c){return"[object String]"===Object.prototype.toString.call(c)};f.trimStr=function(c){return String.prototype.trim?c.trim():c.replace(/^\s+|\s+$/g,"")};f.format=function(c){var b=Array.prototype.slice.call(arguments,1),a=c,e=a.indexOf("{}");f.each(b,function(b,c){b=a.substring(0,e);var d=a.substring(e+2);a=b+c+d;e=a.indexOf("{}",e+c.length);if(0>e)return!1});return a};f.isFile=function(c){return window.File&&"[object File]"===
Object.prototype.toString.call(c)};f.isFileList=function(c){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(c)};f.isFileOrInput=function(c){return f.isFile(c)||f.isInput(c)};f.isInput=function(c,b){var a=function(a){a=a.toLowerCase();return b?"file"!==a:"file"===a};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(c)&&c.type&&a(c.type)||c.tagName&&"input"===c.tagName.toLowerCase()&&c.type&&a(c.type)?!0:!1};f.isBlob=function(c){if(window.Blob&&
"[object Blob]"===Object.prototype.toString.call(c))return!0};f.isXhrUploadSupported=function(){var c=document.createElement("input");c.type="file";return void 0!==c.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof f.createXhrInstance().upload};f.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(c){return f.log("Neither XHR or ActiveX are supported!","error"),null}};f.isFolderDropSupported=
function(c){return c.items&&0<c.items.length&&c.items[0].webkitGetAsEntry};f.isFileChunkingSupported=function(){return!f.androidStock()&&f.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};f.sliceBlob=function(c,b,a){return(c.slice||c.mozSlice||c.webkitSlice).call(c,b,a)};f.arrayBufferToHex=function(c){var b="";c=new Uint8Array(c);f.each(c,function(a,c){a=c.toString(16);2>a.length&&(a="0"+a);b+=a});return b};f.readBlobToHex=
function(c,b,a){c=f.sliceBlob(c,b,b+a);var e=new FileReader,d=new f.Promise;e.onload=function(){d.success(f.arrayBufferToHex(e.result))};e.onerror=d.failure;e.readAsArrayBuffer(c);return d};f.extend=function(c,b,a){f.each(b,function(b,d){a&&f.isObject(d)?(void 0===c[b]&&(c[b]={}),f.extend(c[b],d,!0)):c[b]=d});return c};f.override=function(c,b){var a={};b=b(a);f.each(b,function(b,d){void 0!==c[b]&&(a[b]=c[b]);c[b]=d});return c};f.indexOf=function(c,b,a){if(c.indexOf)return c.indexOf(b,a);a=a||0;var e=
c.length;for(0>a&&(a+=e);a<e;a+=1)if(c.hasOwnProperty(a)&&c[a]===b)return a;return-1};f.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var b=16*Math.random()|0;return("x"==c?b:b&3|8).toString(16)})};f.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")};f.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")};f.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")};f.ie10=function(){return-1!==
navigator.userAgent.indexOf("MSIE 10")};f.ie11=function(){return f.ie()&&-1!==navigator.userAgent.indexOf("rv:11")};f.edge=function(){return 0<=navigator.userAgent.indexOf("Edge")};f.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};f.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};f.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")};f.firefox=function(){return!f.edge()&&
!f.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};f.windows=function(){return"Win32"===navigator.platform};f.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};f.androidStock=function(){return f.android()&&0>navigator.userAgent.toLowerCase().indexOf("chrome")};f.ios6=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")};f.ios7=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")};
f.ios8=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")};f.ios800=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")};f.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")};f.iosChrome=function(){return f.ios()&&-1!==navigator.userAgent.indexOf("CriOS")};f.iosSafari=function(){return f.ios()&&!f.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")};f.iosSafariWebView=
function(){return f.ios()&&!f.iosChrome()&&!f.iosSafari()};f.preventDefault=function(c){c.preventDefault?c.preventDefault():c.returnValue=!1};f.toElement=function(){var c=document.createElement("div");return function(b){c.innerHTML=b;b=c.firstChild;c.removeChild(b);return b}}();f.each=function(c,b){var a;if(c)if(window.Storage&&c.constructor===window.Storage)for(a=0;a<c.length;a++){var e=b(c.key(a),c.getItem(c.key(a)));if(!1===e)break}else if(f.isArray(c)||f.isItemList(c)||f.isNodeList(c))for(a=0;a<
c.length&&(e=b(a,c[a]),!1!==e);a++);else if(f.isString(c))for(a=0;a<c.length&&(e=b(a,c.charAt(a)),!1!==e);a++);else for(a in c)if(Object.prototype.hasOwnProperty.call(c,a)&&(e=b(a,c[a]),!1===e))break};f.bind=function(c,b){if(f.isFunction(c)){var a=Array.prototype.slice.call(arguments,2);return function(){var e=f.extend([],a);arguments.length&&(e=e.concat(Array.prototype.slice.call(arguments)));return c.apply(b,e)}}throw Error("first parameter must be a function!");};f.obj2url=function(c,b,a){var e=
[],d="&",g=function(a,c){var d=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!==d&&"undefined"!==c&&e.push("object"===typeof a?f.obj2url(a,d,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(d)+"="+encodeURIComponent(a()):encodeURIComponent(d)+"="+encodeURIComponent(a))};!a&&b?(d=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",e.push(b),e.push(f.obj2url(c))):"[object Array]"===Object.prototype.toString.call(c)&&"undefined"!==typeof c?f.each(c,function(a,b){g(b,a)}):"undefined"!==
typeof c&&null!==c&&"object"===typeof c?f.each(c,function(a,b){g(b,a)}):e.push(encodeURIComponent(b)+"="+encodeURIComponent(c));return b?e.join(d):e.join(d).replace(/^&/,"").replace(/%20/g,"+")};f.obj2FormData=function(c,b,a){b||(b=new FormData);f.each(c,function(c,d){c=a?a+"["+c+"]":c;f.isObject(d)?f.obj2FormData(d,b,c):f.isFunction(d)?b.append(c,d()):b.append(c,d)});return b};f.obj2Inputs=function(c,b){var a;b||(b=document.createElement("form"));f.obj2FormData(c,{append:function(c,d){a=document.createElement("input");
a.setAttribute("name",c);a.setAttribute("value",d);b.appendChild(a)}});return b};f.parseJson=function(c){return window.JSON&&f.isFunction(JSON.parse)?JSON.parse(c):eval("("+c+")")};f.getExtension=function(c){var b=c.lastIndexOf(".")+1;if(0<b)return c.substr(b,c.length-b)};f.getFilename=function(c){return f.isInput(c)?c.value.replace(/.*(\/|\\)/,""):f.isFile(c)&&null!==c.fileName&&void 0!==c.fileName?c.fileName:c.name};f.DisposeSupport=function(){var c=[];return{dispose:function(){var b;do(b=c.shift())&&
b();while(b)},attach:function(){this.addDisposer(f(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(b){c.push(b)}}}})();(function(){"function"===typeof define&&define.amd?define(function(){return f}):"undefined"!==typeof module&&module.exports?module.exports=f:e.qq=f})();(function(){f.Error=function(c){this.message="[Fine Uploader "+f.version+"] "+c};f.Error.prototype=Error()})();f.version="5.15.4";f.supportedFeatures=function(){function c(){var a=document.createElement("span");
return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&!f.android()&&!f.ios()}var b,a,e,d;var g=(e=(b=function(){var a=!0;try{var b=document.createElement("input");b.type="file";f(b).hide();b.disabled&&(a=!1)}catch(y){a=!1}return a}())&&f.isXhrUploadSupported())&&!f.androidStock();var k=(a=e&&c())&&(f.chrome()||f.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);var l=e&&f.isFileChunkingSupported();if(d=e&&l)try{d=!!window.localStorage&&f.isFunction(window.localStorage.setItem)}catch(B){d=
!1}var n=e&&(f.chrome()||f.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);var p=b&&(void 0!==window.postMessage||e);var r=window.XMLHttpRequest?void 0!==f.createXhrInstance().withCredentials:!1;var w=void 0!==window.XDomainRequest;var u=window.XMLHttpRequest&&void 0!==f.createXhrInstance().withCredentials?!0:void 0!==window.XDomainRequest;var A=void 0!==document.createElement("input").webkitdirectory;var t=e&&void 0!==window.FileReader;var z=e?!f.androidStock()&&
!f.iosChrome():!1;return{ajaxUploading:e,blobUploading:g,canDetermineSize:e,chunking:l,deleteFileCors:u,deleteFileCorsXdr:w,deleteFileCorsXhr:r,dialogElement:!!window.HTMLDialogElement,fileDrop:a,folderDrop:k,folderSelection:A,imagePreviews:t,imageValidation:t,itemSizeValidation:e,pause:l,progressBar:z,resume:d,scaling:t&&g,tiffPreviews:f.safari(),unlimitedScaledImageSize:!f.ios(),uploading:b,uploadCors:p,uploadCustomHeaders:e,uploadNonMultipart:e,uploadViaPaste:n}}();f.isGenericPromise=function(c){return!!(c&&
c.then&&f.isFunction(c.then))};f.Promise=function(){var c,b,a=[],e=[],d=[],g=0;f.extend(this,{then:function(d,f){0===g?(d&&a.push(d),f&&e.push(f)):-1===g?f&&f.apply(null,b):d&&d.apply(null,c);return this},done:function(a){0===g?d.push(a):a.apply(null,void 0===b?c:b);return this},success:function(){g=1;c=arguments;a.length&&f.each(a,function(a,b){b.apply(null,c)});d.length&&f.each(d,function(a,b){b.apply(null,c)});return this},failure:function(){g=-1;b=arguments;e.length&&f.each(e,function(a,c){c.apply(null,
b)});d.length&&f.each(d,function(a,c){c.apply(null,b)});return this}})};f.BlobProxy=function(c,b){f.extend(this,{referenceBlob:c,create:function(){return b(c)}})};f.UploadButton=function(c){function b(){var b=document.createElement("input");b.setAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME,g);b.setAttribute("title",d.title);a.setMultiple(d.multiple,b);d.folders&&f.supportedFeatures.folderSelection&&b.setAttribute("webkitdirectory","");d.acceptFiles&&b.setAttribute("accept",d.acceptFiles);b.setAttribute("type",
"file");b.setAttribute("name",d.name);f(b).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:f.ie()&&!f.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!f.ie7()&&f(b).css({height:"100%"});d.element.appendChild(b);e.attach(b,"change",function(){d.onChange(b)});e.attach(b,"mouseover",function(){f(d.element).addClass(d.hoverClass)});e.attach(b,"mouseout",function(){f(d.element).removeClass(d.hoverClass)});e.attach(b,"focus",function(){f(d.element).addClass(d.focusClass)});
e.attach(b,"blur",function(){f(d.element).removeClass(d.focusClass)});return b}var a=this,e=new f.DisposeSupport,d={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(a){},title:null};f.extend(d,c);var g=f.getUniqueId();f(d.element).css({position:"relative",overflow:"hidden",direction:"ltr"});f.extend(this,{getInput:function(){return k},getButtonId:function(){return g},
setMultiple:function(a,b){b=b||this.getInput();d.ios8BrowserCrashWorkaround&&f.ios8()&&(f.iosChrome()||f.iosSafariWebView())?b.setAttribute("multiple",""):a?b.setAttribute("multiple",""):b.removeAttribute("multiple")},setAcceptFiles:function(a){a!==d.acceptFiles&&k.setAttribute("accept",a)},reset:function(){k.parentNode&&f(k).remove();f(d.element).removeClass(d.focusClass);k=null;k=b()}});var k=b()};f.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";f.UploadData=function(c){function b(a){if(f.isArray(a)){var b=
[];f.each(a,function(a,c){b.push(d[c])});return b}return d[a]}function a(a){if(f.isArray(a)){var b=[];f.each(a,function(a,c){b.push(d[g[c]])});return b}return d[g[a]]}function e(a){var b=[];a=[].concat(a);f.each(a,function(a,c){a=k[c];void 0!==a&&f.each(a,function(a,c){b.push(d[c])})});return b}var d=[],g={},k={},l={},n={};f.extend(this,{addFile:function(a){var b=a.status||f.status.SUBMITTING,e=d.push({name:a.name,originalName:a.name,uuid:a.uuid,size:null==a.size?-1:a.size,status:b})-1;a.batchId&&
(d[e].batchId=a.batchId,void 0===n[a.batchId]&&(n[a.batchId]=[]),n[a.batchId].push(e));a.proxyGroupId&&(d[e].proxyGroupId=a.proxyGroupId,void 0===l[a.proxyGroupId]&&(l[a.proxyGroupId]=[]),l[a.proxyGroupId].push(e));d[e].id=e;g[a.uuid]=e;void 0===k[b]&&(k[b]=[]);k[b].push(e);a.onBeforeStatusChange&&a.onBeforeStatusChange(e);c.onStatusChange(e,null,b);return e},retrieve:function(c){if(f.isObject(c)&&d.length){if(void 0!==c.id)return b(c.id);if(void 0!==c.uuid)return a(c.uuid);if(c.status)return e(c.status)}else return f.extend([],
d,!0)},reset:function(){d=[];g={};k={};n={}},setStatus:function(a,b){var e=d[a].status,g=f.indexOf(k[e],a);k[e].splice(g,1);d[a].status=b;void 0===k[b]&&(k[b]=[]);k[b].push(a);c.onStatusChange(a,e,b)},uuidChanged:function(a,b){var c=d[a].uuid;d[a].uuid=b;g[b]=a;delete g[c]},updateName:function(a,b){d[a].name=b},updateSize:function(a,b){d[a].size=b},setParentId:function(a,b){d[a].parentId=b},getIdsInProxyGroup:function(a){return(a=d[a].proxyGroupId)?l[a]:[]},getIdsInBatch:function(a){return n[d[a].batchId]}})};
f.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){f.basePublicApi={addBlobs:function(c,b,a){this.addFiles(c,b,a)},addInitialFiles:function(c){var b=this;f.each(c,function(a,c){b._addCannedFile(c)})},addFiles:function(c,
b,a){this._maybeHandleIos8SafariWorkaround();var e=0===this._storedIds.length?f.getUniqueId():this._currentBatchId,d=f.bind(function(a){this._handleNewFile({blob:a,name:this._options.blobs.defaultName},e,r)},this),g=f.bind(function(a){this._handleNewFile(a,e,r)},this),k=f.bind(function(a){a=f.canvasToBlob(a);this._handleNewFile({blob:a,name:this._options.blobs.defaultName+".png"},e,r)},this),l=f.bind(function(a){var b=f.canvasToBlob(a.canvas,a.type,a.quality&&a.quality/100);this._handleNewFile({blob:b,
name:a.name},e,r)},this),n=f.bind(function(a){if(f.isInput(a)&&f.supportedFeatures.ajaxUploading){a=Array.prototype.slice.call(a.files);var b=this;f.each(a,function(a,c){b._handleNewFile(c,e,r)})}else this._handleNewFile(a,e,r)},this),p=this,r=[];this._currentBatchId=e;c&&(f.isFileList(c)&&(c=Array.prototype.slice.call(c)),c=[].concat(c),f.each(c,function(a,b){f.isFileOrInput(b)?n(b):f.isBlob(b)?d(b):f.isObject(b)?b.blob&&b.name?g(b):b.canvas&&b.name&&l(b):b.tagName&&"canvas"===b.tagName.toLowerCase()?
k(b):p.log(b+" is not a valid file container!  Ignoring!","warn")}),this.log("Received "+r.length+" files."),this._prepareItemsForUpload(r,b,a))},cancel:function(c){this._handler.cancel(c)},cancelAll:function(){var c=[],b=this;f.extend(c,this._storedIds);f.each(c,function(a,c){b.cancel(c)});this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(c){var b=this._uploadData.retrieve({id:c});if(!f.supportedFeatures.pause||!this._options.chunking.enabled)return!1;
if(b.status===f.status.PAUSED)return this.log(f.format("Paused file ID {} ({}) will be continued.  Not paused.",c,this.getName(c))),this._uploadFile(c),!0;this.log(f.format("Ignoring continue for file ID {} ({}).  Not paused.",c,this.getName(c)),"error");return!1},deleteFile:function(c){return this._onSubmitDelete(c)},doesExist:function(c){return this._handler.isValid(c)},drawThumbnail:function(c,b,a,e,d){var g=new f.Promise;if(this._imageGenerator){var h=this._thumbnailUrls[c];a={customResizeFunction:d,
maxSize:0<a?a:null,scale:0<a};!e&&f.supportedFeatures.imagePreviews&&(h=this.getFile(c));null==h?g.failure({container:b,error:"File or URL not found."}):this._imageGenerator.generate(h,b,a).then(function(a){g.success(a)},function(a,b){g.failure({container:a,error:b||"Problem generating thumbnail"})})}else g.failure({container:b,error:"Missing image generator module"});return g},getButton:function(c){return this._getButton(this._buttonIdsForFileIds[c])},getEndpoint:function(c){return this._endpointStore.get(c)},
getFile:function(c){return this._handler.getFile(c)||null},getInProgress:function(){return this._uploadData.retrieve({status:[f.status.UPLOADING,f.status.UPLOAD_RETRYING,f.status.QUEUED]}).length},getName:function(c){return this._uploadData.retrieve({id:c}).name},getParentId:function(c){c=this.getUploads({id:c});var b=null;c&&void 0!==c.parentId&&(b=c.parentId);return b},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(c){return this._uploadData.retrieve({id:c}).size},
getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var c=this._currentItemLimit;return 0<c?c-this._netUploadedOrQueued:null},getUploads:function(c){return this._uploadData.retrieve(c)},getUuid:function(c){return this._uploadData.retrieve({id:c}).uuid},log:function(c,b){!this._options.debug||b&&"info"!==b?b&&"info"!==b&&f.log("[Fine Uploader "+f.version+"] "+c,b):f.log("[Fine Uploader "+f.version+"] "+c)},pauseUpload:function(c){var b=this._uploadData.retrieve({id:c});
if(!f.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(0<=f.indexOf([f.status.UPLOADING,f.status.UPLOAD_RETRYING],b.status)){if(this._handler.pause(c))return this._uploadData.setStatus(c,f.status.PAUSED),!0;this.log(f.format("Unable to pause file ID {} ({}).",c,this.getName(c)),"error")}else this.log(f.format("Ignoring pause for file ID {} ({}).  Not in progress.",c,this.getName(c)),"error");return!1},removeFileRef:function(c){this._handler.expunge(c)},reset:function(){this.log("Resetting uploader...");
this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];f.each(this._buttons,function(c,b){b.reset()});this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=
[];this._totalProgress&&this._totalProgress.reset()},retry:function(c){return this._manualRetry(c)},scaleImage:function(c,b){return f.Scaler.prototype.scaleImage(c,b,{log:f.bind(this.log,this),getFile:f.bind(this.getFile,this),uploadData:this._uploadData})},setCustomHeaders:function(c,b){this._customHeadersStore.set(c,b)},setDeleteFileCustomHeaders:function(c,b){this._deleteFileCustomHeadersStore.set(c,b)},setDeleteFileEndpoint:function(c,b){this._deleteFileEndpointStore.set(c,b)},setDeleteFileParams:function(c,
b){this._deleteFileParamsStore.set(c,b)},setEndpoint:function(c,b){this._endpointStore.set(c,b)},setForm:function(c){this._updateFormSupportAndParams(c)},setItemLimit:function(c){this._currentItemLimit=c},setName:function(c,b){this._uploadData.updateName(c,b)},setParams:function(c,b){this._paramsStore.set(c,b)},setUuid:function(c,b){return this._uploadData.uuidChanged(c,b)},setStatus:function(c,b){if(!this.getUploads({id:c}))throw new f.Error(c+" is not a valid file ID.");switch(b){case f.status.DELETED:this._onDeleteComplete(c,
null,!1);break;case f.status.DELETE_FAILED:this._onDeleteComplete(c,null,!0);break;default:throw c="Method setStatus called on '"+name+"' not implemented yet for "+b,this.log(c),new f.Error(c);}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}};f.basePrivateApi={_addCannedFile:function(c){var b=this;return this._uploadData.addFile({uuid:c.uuid,name:c.name,size:c.size,status:f.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(a){c.deleteFileEndpoint&&
b.setDeleteFileEndpoint(c.deleteFileEndpoint,a);c.deleteFileParams&&b.setDeleteFileParams(c.deleteFileParams,a);c.thumbnailUrl&&(b._thumbnailUrls[a]=c.thumbnailUrl);b._netUploaded++;b._netUploadedOrQueued++}})},_annotateWithButtonId:function(c,b){f.isFile(c)&&(c.qqButtonId=this._getButtonId(b))},_batchError:function(c){this._options.callbacks.onError(null,null,c,void 0)},_createDeleteHandler:function(){var c=this;return new f.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),
maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:f.bind(c.log,c),onDelete:function(b){c._onDelete(b);c._options.callbacks.onDelete(b)},onDeleteComplete:function(b,a,e){c._onDeleteComplete(b,a,e);c._options.callbacks.onDeleteComplete(b,a,e)}})},_createPasteHandler:function(){var c=this;return new f.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:f.bind(c.log,c),pasteReceived:function(b){c._handleCheckedCallback({name:"onPasteReceived",callback:f.bind(c._options.callbacks.onPasteReceived,c,b),onSuccess:f.bind(c._handlePasteSuccess,c,b),identifier:"pasted image"})}}})},_createStore:function(c,b){var a={},e=c,d={},g=b,k=function(a){return f.isObject(a)?f.extend({},a):a};return{set:function(b,c){null==c?(a={},e=k(b)):a[c]=k(b)},get:function(b){var c=null!=b&&a[b]?a[b]:k(e);g&&f.isObject(c)&&f.extend(c,f.isFunction(g)?g():g);d[b]&&
f.extend(c,d[b]);return k(c)},addReadOnly:function(b,c){f.isObject(a)&&(null===b?f.isFunction(c)?g=c:(g=g||{},f.extend(g,c)):(d[b]=d[b]||{},f.extend(d[b],c)))},remove:function(b){return delete a[b]},reset:function(){a={};d={};e=c}}},_createUploadDataTracker:function(){var c=this;return new f.UploadData({getName:function(b){return c.getName(b)},getUuid:function(b){return c.getUuid(b)},getSize:function(b){return c.getSize(b)},onStatusChange:function(b,a,e){c._onUploadStatusChange(b,a,e);c._options.callbacks.onStatusChange(b,
a,e);c._maybeAllComplete(b,e);c._totalProgress&&setTimeout(function(){c._totalProgress.onStatusChange(b,a,e)},0)}})},_createUploadButton:function(c){var b=this,a=c.allowedExtensions||this._options.validation.allowedExtensions;var e=new f.UploadButton({acceptFiles:c.accept||this._options.validation.acceptFiles,element:c.element,focusClass:this._options.classes.buttonFocus,folders:c.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,
multiple:f.supportedFeatures.ajaxUploading?b._options.workarounds.iosEmptyVideos&&f.ios()&&!f.ios6()&&b._isAllowedExtension(a,".mov")?!1:void 0===c.multiple?b._options.multiple:c.multiple:!1,name:this._options.request.inputName,onChange:function(a){b._onInputChange(a)},title:null==c.title?this._options.text.fileInputTitle:c.title});this._disposeSupport.addDisposer(function(){e.dispose()});b._buttons.push(e);return e},_createUploadHandler:function(c,b){var a=this,e={},d={debug:this._options.debug,
maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:f.bind(a.log,a),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(b,c,d,f){if(!(0>d||0>f)){if(e[b]){if(e[b].loaded!==d||e[b].total!==f)a._onProgress(b,c,d,f),a._options.callbacks.onProgress(b,c,d,f)}else a._onProgress(b,c,d,f),a._options.callbacks.onProgress(b,
c,d,f);e[b]={loaded:d,total:f}}},onComplete:function(b,c,d,h){delete e[b];var g=a.getUploads({id:b}).status;if(g!==f.status.UPLOAD_SUCCESSFUL&&g!==f.status.UPLOAD_FAILED)if(g=a._onComplete(b,c,d,h),g instanceof f.Promise)g.done(function(){a._options.callbacks.onComplete(b,c,d,h)});else a._options.callbacks.onComplete(b,c,d,h)},onCancel:function(b,c,d){var e=new f.Promise;a._handleCheckedCallback({name:"onCancel",callback:f.bind(a._options.callbacks.onCancel,a,b,c),onFailure:e.failure,onSuccess:function(){d.then(function(){a._onCancel(b,
c)});e.success()},identifier:b});return e},onUploadPrep:f.bind(this._onUploadPrep,this),onUpload:function(b,c){a._onUpload(b,c);a._options.callbacks.onUpload(b,c)},onUploadChunk:function(b,c,d){a._onUploadChunk(b,d);a._options.callbacks.onUploadChunk(b,c,d)},onUploadChunkSuccess:function(b,c,d,e){a._options.callbacks.onUploadChunkSuccess.apply(a,arguments)},onResume:function(b,c,d){return a._options.callbacks.onResume(b,c,d)},onAutoRetry:function(b,c,d,e){return a._onAutoRetry.apply(a,arguments)},
onUuidChanged:function(b,c){a.log("Server requested UUID change from '"+a.getUuid(b)+"' to '"+c+"'");a.setUuid(b,c)},getName:f.bind(a.getName,a),getUuid:f.bind(a.getUuid,a),getSize:f.bind(a.getSize,a),setSize:f.bind(a._setSize,a),getDataByUuid:function(b){return a.getUploads({uuid:b})},isQueued:function(b){b=a.getUploads({id:b}).status;return b===f.status.QUEUED||b===f.status.SUBMITTED||b===f.status.UPLOAD_RETRYING||b===f.status.PAUSED},getIdsInProxyGroup:a._uploadData.getIdsInProxyGroup,getIdsInBatch:a._uploadData.getIdsInBatch};
f.each(this._options.request,function(a,b){d[a]=b});d.customHeaders=this._customHeadersStore;c&&f.each(c,function(a,b){d[a]=b});return new f.UploadHandlerController(d,b)},_fileOrBlobRejected:function(c){this._netUploadedOrQueued--;this._uploadData.setStatus(c,f.status.REJECTED)},_formatSize:function(c){if(0===c)return c+this._options.text.sizeSymbols[0];var b=-1;do c/=1E3,b++;while(999<c);return Math.max(c,.1).toFixed(1)+this._options.text.sizeSymbols[b]},_generateExtraButtonSpecs:function(){var c=
this;this._extraButtonSpecs={};f.each(this._options.extraButtons,function(b,a){b=a.multiple;var e=f.extend({},c._options.validation,!0),d=f.extend({},a);void 0===b&&(b=c._options.multiple);d.validation&&f.extend(e,a.validation,!0);f.extend(d,{multiple:b,validation:e},!0);c._initExtraButton(d)})},_getButton:function(c){var b=this._extraButtonSpecs[c];if(b)return b.element;if(c===this._defaultButtonId)return this._options.button},_getButtonId:function(c){var b;c instanceof f.BlobProxy&&(c=c.referenceBlob);
if(c&&!f.isBlob(c)){if(f.isFile(c))return c.qqButtonId;if("input"===c.tagName.toLowerCase()&&"file"===c.type.toLowerCase())return c.getAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME);c=c.getElementsByTagName("input");f.each(c,function(a,c){if("file"===c.getAttribute("type"))return b=c,!1});if(b)return b.getAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[f.status.UPLOADING,f.status.UPLOAD_RETRYING,f.status.QUEUED,f.status.SUBMITTING,
f.status.SUBMITTED,f.status.PAUSED]}).length},_getValidationBase:function(c){return(c=this._extraButtonSpecs[c])?c.validation:this._options.validation},_getValidationDescriptor:function(c){return c.file instanceof f.BlobProxy?{name:f.getFilename(c.file.referenceBlob),size:c.file.referenceBlob.size}:{name:this.getUploads({id:c.id}).name,size:this.getUploads({id:c.id}).size}},_getValidationDescriptors:function(c){var b=this,a=[];f.each(c,function(c,d){a.push(b._getValidationDescriptor(d))});return a},
_handleCameraAccess:function(){if(this._options.camera.ios&&f.ios()){var c=this._options.camera.button,b=c?this._getButtonId(c):this._defaultButtonId,a=this._options;b&&b!==this._defaultButtonId&&(a=this._extraButtonSpecs[b]);a.multiple=!1;a.validation.acceptFiles=null===a.validation.acceptFiles?"image/*;capture=camera":a.validation.acceptFiles+",image/*;capture=camera";f.each(this._buttons,function(c,d){if(d.getButtonId()===b)return d.setMultiple(a.multiple),d.setAcceptFiles(a.acceptFiles),!1})}},
_handleCheckedCallback:function(c){var b=this,a=c.callback();if(f.isGenericPromise(a))return this.log(c.name+" - waiting for "+c.name+" promise to be fulfilled for "+c.identifier),a.then(function(a){b.log(c.name+" promise success for "+c.identifier);c.onSuccess(a)},function(){c.onFailure?(b.log(c.name+" promise failure for "+c.identifier),c.onFailure()):b.log(c.name+" promise failure for "+c.identifier)});if(!1!==a)c.onSuccess(a);else c.onFailure?(this.log(c.name+" - return value was 'false' for "+
c.identifier+".  Invoking failure callback."),c.onFailure()):this.log(c.name+" - return value was 'false' for "+c.identifier+".  Will not proceed.");return a},_handleNewFile:function(c,b,a){var e=this,d=f.getUniqueId(),g=-1,k=f.getFilename(c);c=c.blob||c;var l=this._customNewFileHandler?this._customNewFileHandler:f.bind(e._handleNewFileGeneric,e);!f.isInput(c)&&0<=c.size&&(g=c.size);l(c,k,d,g,a,b,this._options.request.uuidName,{uploadData:e._uploadData,paramsStore:e._paramsStore,addFileToHandler:function(a,
b){e._handler.add(a,b);e._netUploadedOrQueued++;e._trackButton(a)}})},_handleNewFileGeneric:function(c,b,a,e,d,f){b=this._uploadData.addFile({uuid:a,name:b,size:e,batchId:f});this._handler.add(b,c);this._trackButton(b);this._netUploadedOrQueued++;d.push({id:b,file:c})},_handlePasteSuccess:function(c,b){var a=c.type.split("/")[1];null==b&&(b=this._options.paste.defaultName);this.addFiles({name:b+("."+a),blob:c})},_handleDeleteSuccess:function(c){if(this.getUploads({id:c}).status!==f.status.DELETED){var b=
this.getName(c);this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(c);this._uploadData.setStatus(c,f.status.DELETED);this.log("Delete request for '"+b+"' has succeeded.")}},_handleDeleteFailed:function(c,b){var a=this.getName(c);this._uploadData.setStatus(c,f.status.DELETE_FAILED);this.log("Delete request for '"+a+"' has failed.","error");if(b&&void 0!==b.withCredentials)this._options.callbacks.onError(c,a,"Delete request failed with response code "+b.status,b);else this._options.callbacks.onError(c,
a,"Delete request failed",b)},_initExtraButton:function(c){var b=this._createUploadButton({accept:c.validation.acceptFiles,allowedExtensions:c.validation.allowedExtensions,element:c.element,folders:c.folders,multiple:c.multiple,title:c.fileInputTitle});this._extraButtonSpecs[b.getButtonId()]=c},_initFormSupportAndParams:function(){(this._formSupport=f.FormSupport&&new f.FormSupport(this._options.form,f.bind(this.uploadStoredFiles,this),f.bind(this.log,this)))&&this._formSupport.attachedToForm?(this._paramsStore=
this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return f.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?f.supportedFeatures.deleteFileCorsXhr||f.supportedFeatures.deleteFileCorsXdr&&
this._options.cors.allowXdr?!0:!1:!0:!1},_isAllowedExtension:function(c,b){var a=!1;if(!c.length)return!0;f.each(c,function(c,d){if(f.isString(d)&&null!=b.match(new RegExp("\\."+d+"$","i")))return a=!0,!1});return a},_itemError:function(c,b,a){function e(a,b){d=d.replace(a,b)}var d=this._options.messages[c],g=[],k=[].concat(b);c=k[0];a=this._getButtonId(a);a=this._getValidationBase(a);f.each(a.allowedExtensions,function(a,b){f.isString(b)&&g.push(b)});b=g.join(", ").toLowerCase();e("{file}",this._options.formatFileName(c));
e("{extensions}",b);e("{sizeLimit}",this._formatSize(a.sizeLimit));e("{minSizeLimit}",this._formatSize(a.minSizeLimit));a=d.match(/(\{\w+\})/g);null!==a&&f.each(a,function(a,b){e(b,k[a])});this._options.callbacks.onError(null,c,d,void 0);return d},_manualRetry:function(c,b){if(this._onBeforeManualRetry(c))return this._netUploadedOrQueued++,this._uploadData.setStatus(c,f.status.UPLOAD_RETRYING),b?b(c):this._handler.retry(c),!0},_maybeAllComplete:function(c,b){var a=this,e=this._getNotFinished();b===
f.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(c):b===f.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(c);0===e&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){a._onAllComplete(a._succeededSinceLastAllComplete,a._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var c=this;if(this._options.workarounds.ios8SafariUploads&&f.ios800()&&f.iosSafari())throw setTimeout(function(){window.alert(c._options.messages.unsupportedBrowserIos8Safari)},
0),new f.Error(this._options.messages.unsupportedBrowserIos8Safari);},_maybeParseAndSendUploadError:function(c,b,a,e){if(!a.success)if(e&&200!==e.status&&!a.error)this._options.callbacks.onError(c,b,"XHR returned response code "+e.status,e);else this._options.callbacks.onError(c,b,a.error?a.error:this._options.text.defaultResponseError,e)},_maybeProcessNextItemAfterOnValidateCallback:function(c,b,a,e,d){var g=this;if(b.length>a)if(c||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var c=
g._getValidationDescriptor(b[a]),h=g._getButtonId(b[a].file);h=g._getButton(h);g._handleCheckedCallback({name:"onValidate",callback:f.bind(g._options.callbacks.onValidate,g,c,h),onSuccess:f.bind(g._onValidateCallbackSuccess,g,b,a,e,d),onFailure:f.bind(g._onValidateCallbackFailure,g,b,a,e,d),identifier:"Item '"+c.name+"', size: "+c.size})},0);else if(!c)for(;a<b.length;a++)g._fileOrBlobRejected(b[a].id)},_onAllComplete:function(c,b){this._totalProgress&&this._totalProgress.onAllComplete(c,b,this._preventRetries);
this._options.callbacks.onAllComplete(f.extend([],c),f.extend([],b));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(c,b,a,e,d){var g=this;g._preventRetries[c]=a[g._options.retry.preventRetryResponseProperty];if(g._shouldAutoRetry(c,b,a)){var h=1E3*g._options.retry.autoAttemptDelay;g._maybeParseAndSendUploadError.apply(g,arguments);g._options.callbacks.onAutoRetry(c,b,g._autoRetries[c]);g._onBeforeAutoRetry(c,b);g._uploadData.setStatus(c,f.status.UPLOAD_RETRYING);
g._retryTimeouts[c]=setTimeout(function(){g.log("Starting retry for "+b+"...");d?d(c):g._handler.retry(c)},h);return!0}},_onBeforeAutoRetry:function(c,b){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+b+"...")},_onBeforeManualRetry:function(c){var b=this._currentItemLimit;if(this._preventRetries[c])return this.log("Retries are forbidden for id "+c,"warn"),!1;if(this._handler.isValid(c)){var a=this.getName(c);if(!1===this._options.callbacks.onManualRetry(c,a))return!1;
if(0<b&&this._netUploadedOrQueued+1>b)return this._itemError("retryFailTooManyItems"),!1;this.log("Retrying upload for '"+a+"' (id: "+c+")...");return!0}this.log("'"+c+"' is not a valid file ID","error");return!1},_onCancel:function(c,b){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[c]);b=f.indexOf(this._storedIds,c);!this._options.autoUpload&&0<=b&&this._storedIds.splice(b,1);this._uploadData.setStatus(c,f.status.CANCELED)},_onComplete:function(c,b,a,e){a.success?(a.thumbnailUrl&&
(this._thumbnailUrls[c]=a.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(c,f.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(c,f.status.UPLOAD_FAILED),!0===a[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[c]=!0));this._maybeParseAndSendUploadError(c,b,a,e);return a.success?!0:!1},_onDelete:function(c){this._uploadData.setStatus(c,f.status.DELETING)},_onDeleteComplete:function(c,b,a){this.getName(c);a?this._handleDeleteFailed(c,
b):this._handleDeleteSuccess(c)},_onInputChange:function(c){var b;if(f.supportedFeatures.ajaxUploading){for(b=0;b<c.files.length;b++)this._annotateWithButtonId(c.files[b],c);this.addFiles(c.files)}else 0<c.value.length&&this.addFiles(c);f.each(this._buttons,function(a,b){b.reset()})},_onProgress:function(c,b,a,e){this._totalProgress&&this._totalProgress.onIndividualProgress(c,a,e)},_onSubmit:function(c,b){},_onSubmitCallbackSuccess:function(c,b){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(c,
f.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(c)):(this._storeForLater(c),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(c,b,a){var e=this.getUuid(c),d;b&&(d=f.bind(b,this,c,e,a));if(this._isDeletePossible())return this._handleCheckedCallback({name:"onSubmitDelete",callback:f.bind(this._options.callbacks.onSubmitDelete,this,c),onSuccess:d||f.bind(this._deleteHandler.sendDelete,
this,c,e,a),identifier:c}),!0;this.log("Delete request ignored for ID "+c+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn");return!1},_onSubmitted:function(c){},_onTotalProgress:function(c,b){this._options.callbacks.onTotalProgress(c,b)},_onUploadPrep:function(c){},_onUpload:function(c,b){this._uploadData.setStatus(c,f.status.UPLOADING)},_onUploadChunk:function(c,b){},_onUploadStatusChange:function(c,b,a){a===f.status.PAUSED&&
clearTimeout(this._retryTimeouts[c])},_onValidateBatchCallbackFailure:function(c){var b=this;f.each(c,function(a,c){b._fileOrBlobRejected(c.id)})},_onValidateBatchCallbackSuccess:function(c,b,a,e,d){var g=this._currentItemLimit,h=this._netUploadedOrQueued;0===g||h<=g?0<b.length?this._handleCheckedCallback({name:"onValidate",callback:f.bind(this._options.callbacks.onValidate,this,c[0],d),onSuccess:f.bind(this._onValidateCallbackSuccess,this,b,0,a,e),onFailure:f.bind(this._onValidateCallbackFailure,
this,b,0,a,e),identifier:"Item '"+b[0].file.name+"', size: "+b[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(b),c=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,h).replace(/\{itemLimit\}/g,g),this._batchError(c))},_onValidateCallbackFailure:function(c,b,a,e){var d=b+1;this._fileOrBlobRejected(c[b].id,c[b].file.name);this._maybeProcessNextItemAfterOnValidateCallback(!1,c,d,a,e)},_onValidateCallbackSuccess:function(c,b,a,e){var d=this,f=b+1,h=
this._getValidationDescriptor(c[b]);this._validateFileOrBlobData(c[b],h).then(function(){d._upload(c[b].id,a,e);d._maybeProcessNextItemAfterOnValidateCallback(!0,c,f,a,e)},function(){d._maybeProcessNextItemAfterOnValidateCallback(!1,c,f,a,e)})},_prepareItemsForUpload:function(c,b,a){if(0===c.length)this._itemError("noFilesError");else{var e=this._getValidationDescriptors(c),d=this._getButtonId(c[0].file);d=this._getButton(d);this._handleCheckedCallback({name:"onValidateBatch",callback:f.bind(this._options.callbacks.onValidateBatch,
this,e,d),onSuccess:f.bind(this._onValidateBatchCallbackSuccess,this,e,c,b,a,d),onFailure:f.bind(this._onValidateBatchCallbackFailure,this,c),identifier:"batch validation"})}},_preventLeaveInProgress:function(){var c=this;this._disposeSupport.attach(window,"beforeunload",function(b){if(c.getInProgress())return b=b||window.event,b.returnValue=c._options.messages.onLeave})},_refreshSessionData:function(){var c=this,b=this._options.session;f.Session&&null!=this._options.session.endpoint&&(this._session||
(f.extend(b,{cors:this._options.cors}),b.log=f.bind(this.log,this),b.addFileRecord=f.bind(this._addCannedFile,this),this._session=new f.Session(b)),setTimeout(function(){c._session.refresh().then(function(a,b){c._sessionRequestComplete();c._options.callbacks.onSessionRequestComplete(a,!0,b)},function(a,b){c._options.callbacks.onSessionRequestComplete(a,!1,b)})},0))},_sessionRequestComplete:function(){},_setSize:function(c,b){this._uploadData.updateSize(c,b);this._totalProgress&&this._totalProgress.onNewSize(c)},
_shouldAutoRetry:function(c,b,a){b=this._uploadData.retrieve({id:c});return!this._preventRetries[c]&&this._options.retry.enableAuto&&b.status!==f.status.PAUSED&&(void 0===this._autoRetries[c]&&(this._autoRetries[c]=0),this._autoRetries[c]<this._options.retry.maxAutoAttempts)?(this._autoRetries[c]+=1,!0):!1},_storeForLater:function(c){this._storedIds.push(c)},_trackButton:function(c){var b;(b=f.supportedFeatures.ajaxUploading?this._handler.getFile(c).qqButtonId:this._getButtonId(this._handler.getInput(c)))&&
(this._buttonIdsForFileIds[c]=b)},_updateFormSupportAndParams:function(c){this._options.form.element=c;(this._formSupport=f.FormSupport&&new f.FormSupport(this._options.form,f.bind(this.uploadStoredFiles,this),f.bind(this.log,this)))&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(c,
b,a){var e=this.getName(c);b&&this.setParams(b,c);a&&this.setEndpoint(a,c);this._handleCheckedCallback({name:"onSubmit",callback:f.bind(this._options.callbacks.onSubmit,this,c,e),onSuccess:f.bind(this._onSubmitCallbackSuccess,this,c,e),onFailure:f.bind(this._fileOrBlobRejected,this,c,e),identifier:c})},_uploadFile:function(c){this._handler.upload(c)||this._uploadData.setStatus(c,f.status.QUEUED)},_uploadStoredFiles:function(){for(var c,b=this;this._storedIds.length;)c=this._storedIds.shift(),this._uploadFile(c);
if(c=this.getUploads({status:f.status.SUBMITTING}).length)f.log("Still waiting for "+c+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout(function(){b._uploadStoredFiles()},1E3)},_validateFileOrBlobData:function(c,b){var a=this;var e=c.file instanceof f.BlobProxy?c.file.referenceBlob:c.file;var d=b.name;b=b.size;var g=this._getButtonId(c.file);g=this._getValidationBase(g);var k=new f.Promise;k.then(function(){},function(){a._fileOrBlobRejected(c.id,d)});if(f.isFileOrInput(e)&&
!this._isAllowedExtension(g.allowedExtensions,d))return this._itemError("typeError",d,e),k.failure();if(!this._options.validation.allowEmpty&&0===b)return this._itemError("emptyError",d,e),k.failure();if(0<b&&g.sizeLimit&&b>g.sizeLimit)return this._itemError("sizeError",d,e),k.failure();if(0<b&&b<g.minSizeLimit)return this._itemError("minSizeError",d,e),k.failure();f.ImageValidation&&f.supportedFeatures.imagePreviews&&f.isFile(e)?(new f.ImageValidation(e,f.bind(a.log,a))).validate(g.image).then(k.success,
function(b){a._itemError(b+"ImageError",d,e);k.failure()}):k.success();return k},_wrapCallbacks:function(){var c;var b=this;var a=function(a,c,e){try{return c.apply(b,e)}catch(k){c=k.message||k.toString(),b.log("Caught exception in '"+a+"' callback - "+c,"error")}};for(c in this._options.callbacks)(function(){var e=c;var d=b._options.callbacks[e];b._options.callbacks[e]=function(){return a(e,d,arguments)}})()}}})();(function(){f.FineUploaderBasic=function(c){var b=this;this._options={debug:!1,button:null,
multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(a,b){},
onSubmitted:function(a,b){},onComplete:function(a,b,c,e){},onAllComplete:function(a,b){},onCancel:function(a,b){},onUpload:function(a,b){},onUploadChunk:function(a,b,c){},onUploadChunkSuccess:function(a,b,c,e){},onResume:function(a,b,c){},onProgress:function(a,b,c,e){},onTotalProgress:function(a,b){},onError:function(a,b,c,e){},onAutoRetry:function(a,b,c){},onManualRetry:function(a,b){},onValidateBatch:function(a){},onValidate:function(a){},onSubmitDelete:function(a){},onDelete:function(a){},onDeleteComplete:function(a,
b,c){},onPasteReceived:function(a){},onStatusChange:function(a,b,c){},onSessionRequestComplete:function(a,b,c){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",
maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},
retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2E6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},
formatFileName:function(a){return a},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:"kB MB GB TB PB EB".split(" ")},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},
form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}};f.extend(this._options,c,!0);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new f.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=
[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploaded=this._netUploadedOrQueued=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=
this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=f.DeleteFileAjaxRequester&&this._createDeleteHandler();this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId());this._generateExtraButtonSpecs();this._handleCameraAccess();this._options.paste.targetElement&&(f.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found",
"error"));this._preventLeaveInProgress();this._imageGenerator=f.ImageGenerator&&new f.ImageGenerator(f.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=f.Scaler&&new f.Scaler(this._options.scaling,f.bind(this.log,this))||{};this._scaler.enabled&&(this._customNewFileHandler=f.bind(this._scaler.handleNewFile,this._scaler));f.TotalProgress&&f.supportedFeatures.progressBar&&(this._totalProgress=new f.TotalProgress(f.bind(this._onTotalProgress,
this),function(a){return(a=b._uploadData.retrieve({id:a}))&&a.size||0}));this._currentItemLimit=this._options.validation.itemLimit};f.FineUploaderBasic.prototype=f.basePublicApi;f.extend(f.FineUploaderBasic.prototype,f.basePrivateApi)})();f.AjaxRequester=function(c){function b(a){var b=!1;f.each(b,function(a,c){if(0>f.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],c))return b=!0,!1});return b}function a(a){return B.cors.expected&&void 0===a.withCredentials}function e(){if(window.XMLHttpRequest||
window.ActiveXObject){var a=f.createXhrInstance();void 0===a.withCredentials&&(a=new XDomainRequest,a.onload=function(){},a.onerror=function(){},a.ontimeout=function(){},a.onprogress=function(){})}return a}function d(a,b){var c=z[a].xhr;c||(c=b?b:B.cors.expected?e():f.createXhrInstance(),z[a].xhr=c);return c}function g(a){var b=f.indexOf(t,a),c=B.maxConnections;delete z[a];t.splice(b,1);t.length>=c&&b<c&&(a=t[c-1],n(a))}function k(b,c){var e=d(b),h=B.method;c=!0===c;g(b);c?D(h+" request for "+b+" has failed",
"error"):a(e)||0<=f.indexOf(B.successfulResponseCodes[B.method],e.status)||(c=!0,D(h+" request for "+b+" has failed - response code "+e.status,"error"));B.onComplete(b,e,c)}function l(a){var b=z[a].additionalParams,c=B.mandatedParams,d;B.paramsStore.get&&(d=B.paramsStore.get(a));b&&f.each(b,function(a,b){d=d||{};d[a]=b});c&&f.each(c,function(a,b){d=d||{};d[a]=b});return d}function n(b,c){c=d(b,c);var e=B.method,g=l(b),h=z[b].payload;B.onSend(b);var k=z[b].additionalQueryParams;var n=B.endpointStore.get(b),
t=z[b].addToPath;void 0!=t&&(n+="/"+t);y&&g&&(n=f.obj2url(g,n));k&&(n=f.obj2url(k,n));k=n;a(c)?(c.onload=w(b),c.onerror=u(b)):c.onreadystatechange=p(b);r(b);c.open(e,k,!0);B.cors.expected&&B.cors.sendCredentials&&!a(c)&&(c.withCredentials=!0);A(b);D("Sending "+e+" request for "+b);h?c.send(h):y||!g?c.send():g&&B.contentType&&0<=B.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")?c.send(f.obj2url(g,"")):g&&B.contentType&&0<=B.contentType.toLowerCase().indexOf("application/json")?
c.send(JSON.stringify(g)):c.send(g);return c}function p(a){return function(){4===d(a).readyState&&k(a)}}function r(a){var b=B.onProgress;b&&(d(a).upload.onprogress=function(c){c.lengthComputable&&b(a,c.loaded,c.total)})}function w(a){return function(){k(a)}}function u(a){return function(){k(a,!0)}}function A(c){var e=d(c),g=B.customHeaders,h=z[c].additionalHeaders||{},k=B.method,l={};a(e)||(B.acceptHeader&&e.setRequestHeader("Accept",B.acceptHeader),!B.allowXRequestedWithAndCacheControl||B.cors.expected&&
0<=f.indexOf(["GET","POST","HEAD"],B.method)&&!b(g)||(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Cache-Control","no-cache")),!B.contentType||"POST"!==k&&"PUT"!==k||e.setRequestHeader("Content-Type",B.contentType),f.extend(l,f.isFunction(g)?g(c):g),f.extend(l,h),f.each(l,function(a,b){e.setRequestHeader(a,b)}))}var t=[],z={},B={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},
endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(a,b){},onSend:function(a){},onComplete:function(a,b,c){},onProgress:null};f.extend(B,c);var D=B.log;if(0>f.indexOf(B.validMethods,B.method))throw Error("'"+B.method+"' is not a supported method for this type of request!");var y=
"GET"===B.method||"DELETE"===B.method;f.extend(this,{initTransport:function(a){var b,c,d,e,g,h;return{withPath:function(a){b=a;return this},withParams:function(a){c=a;return this},withQueryParams:function(a){h=a;return this},withHeaders:function(a){d=a;return this},withPayload:function(a){e=a;return this},withCacheBuster:function(){g=!0;return this},send:function(k){g&&0<=f.indexOf(["GET","DELETE"],B.method)&&(c.qqtimestamp=(new Date).getTime());z[a]={addToPath:b,additionalParams:c,additionalQueryParams:h,
additionalHeaders:d,payload:e};k=t.push(a)<=B.maxConnections?n(a,k):void 0;return k}}},canceled:function(a){g(a)}})};f.UploadHandler=function(c){c=c.proxy;var b={},a=c.onCancel,e=c.getName;f.extend(this,{add:function(a,c){b[a]=c;b[a].temp={}},cancel:function(c){var d=this,h=new f.Promise;a(c,e(c),h).then(function(){d.isValid(c)&&(b[c].canceled=!0,d.expunge(c));h.success()})},expunge:function(a){delete b[a]},getThirdPartyFileId:function(a){return b[a].key},isValid:function(a){return void 0!==b[a]},
reset:function(){b={}},_getFileState:function(a){return b[a]},_setThirdPartyFileId:function(a,c){b[a].key=c},_wasCanceled:function(a){return!!b[a].canceled}})};f.UploadHandlerController=function(c,b){var a=this,e=!1,d=!1,g,k={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(a,b){},onProgress:function(a,b,c,d){},onComplete:function(a,b,c,d){},onCancel:function(a,b){},onUploadPrep:function(a){},onUpload:function(a,b){},onUploadChunk:function(a,b,c){},onUploadChunkSuccess:function(a,
b,c,d){},onAutoRetry:function(a,b,c,d){},onResume:function(a,b,c){},onUuidChanged:function(a,b){},getName:function(a){},setSize:function(a,b){},isQueued:function(a){},getIdsInProxyGroup:function(a){},getIdsInBatch:function(a){}},l={done:function(a,b,c,d){var e=g._getChunkData(a,b);g._getFileState(a).attemptingResume=!1;delete g._getFileState(a).temp.chunkProgress[b];g._getFileState(a).loaded+=e.size;k.onUploadChunkSuccess(a,g._getChunkDataForCallback(e),c,d)},finalize:function(a){var b=k.getSize(a),
c=k.getName(a);w("All chunks have been uploaded for "+a+" - finalizing....");g.finalizeChunks(a).then(function(d,e){w("Finalize successful for "+a);d=r.normalizeResponse(d,!0);k.onProgress(a,c,b,b);g._maybeDeletePersistedChunkData(a);r.cleanup(a,d,e)},function(b,d){b=r.normalizeResponse(b,!1);w("Problem finalizing chunks for file ID "+a+" - "+b.error,"error");b.reset&&l.reset(a);k.onAutoRetry(a,c,b,d)||r.cleanup(a,b,d)})},handleFailure:function(a,b,c,e){var h=k.getName(b);w("Chunked upload request failed for "+
b+", chunk "+a);g.clearCachedChunk(b,a);c=r.normalizeResponse(c,!1);if(c.reset)l.reset(b);else{var p=f.indexOf(g._getFileState(b).chunking.inProgress,a);0<=p&&(g._getFileState(b).chunking.inProgress.splice(p,1),g._getFileState(b).chunking.remaining.unshift(a))}g._getFileState(b).temp.ignoreFailure||(d&&(g._getFileState(b).temp.ignoreFailure=!0,w(f.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(g._getXhrs(b))),JSON.stringify(g._getFileState(b).chunking.inProgress))),
f.each(g._getXhrs(b),function(a,c){w(f.format("Attempting to abort file {}.{}. XHR readyState {}. ",b,a,c.readyState));c.abort();c._cancelled=!0}),g.moveInProgressToRemaining(b),n.free(b,!0)),k.onAutoRetry(b,h,c,e)||r.cleanup(b,c,e))},hasMoreParts:function(a){return!!g._getFileState(a).chunking.remaining.length},nextPart:function(a){var b=g._getFileState(a).chunking.remaining.shift();b>=g._getTotalChunks(a)&&(b=null);return b},reset:function(a){w("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");g._maybeDeletePersistedChunkData(a);g.reevaluateChunking(a);g._getFileState(a).loaded=0},sendNext:function(a){var b=k.getSize(a),c=k.getName(a),e=l.nextPart(a),h=g._getChunkData(a,e),p=g._getFileState(a).attemptingResume,u=g._getFileState(a).chunking.inProgress||[];null==g._getFileState(a).loaded&&(g._getFileState(a).loaded=0);p&&!1===k.onResume(a,c,h)&&(l.reset(a),e=l.nextPart(a),h=g._getChunkData(a,e),p=!1);null==e&&0===u.length?l.finalize(a):(w(f.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",
a,e,h.start+1,h.end,b)),k.onUploadChunk(a,c,g._getChunkDataForCallback(h)),u.push(e),g._getFileState(a).chunking.inProgress=u,d&&n.open(a,e),d&&n.available()&&g._getFileState(a).chunking.remaining.length&&l.sendNext(a),0===h.blob.size?(w(f.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",e,a),"error"),l.handleFailure(e,a,"File is no longer available",null)):g.uploadChunk(a,e,p).then(function(b,c){w("Chunked upload request succeeded for "+a+", chunk "+e);g.clearCachedChunk(a,e);
var d=g._getFileState(a).chunking.inProgress||[];b=r.normalizeResponse(b,!0);var h=f.indexOf(d,e);w(f.format("Chunk {} for file {} uploaded successfully.",e,a));l.done(a,e,b,c);0<=h&&d.splice(h,1);g._maybePersistChunkedState(a);l.hasMoreParts(a)||0!==d.length?l.hasMoreParts(a)?l.sendNext(a):w(f.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",a,JSON.stringify(d))):l.finalize(a)},function(b,c){l.handleFailure(e,a,b,c)}).done(function(){g.clearXhr(a,
e)}))}},n={_open:[],_openChunks:{},_waiting:[],available:function(){var a=k.maxConnections,b=0,c=0;f.each(n._openChunks,function(a,d){b++;c+=d.length});return a-(n._open.length-b+c)},free:function(a,b){b=!b;var c=f.indexOf(n._waiting,a),d=f.indexOf(n._open,a);delete n._openChunks[a];r.getProxyOrBlob(a)instanceof f.BlobProxy&&(w("Generated blob upload has ended for "+a+", disposing generated blob."),delete g._getFileState(a).file);0<=c?n._waiting.splice(c,1):b&&0<=d&&(n._open.splice(d,1),a=n._waiting.shift(),
0<=a&&(n._open.push(a),r.start(a)))},getWaitingOrConnected:function(){var a=[];f.each(n._openChunks,function(b,c){c&&c.length&&a.push(parseInt(b))});f.each(n._open,function(b,c){n._openChunks[c]||a.push(parseInt(c))});return a=a.concat(n._waiting)},isUsingConnection:function(a){return 0<=f.indexOf(n._open,a)},open:function(a,b){null==b&&n._waiting.push(a);if(n.available()){if(null==b)n._waiting.pop(),n._open.push(a);else{var c=n._openChunks[a]||[];c.push(b);n._openChunks[a]=c}return!0}return!1},reset:function(){n._waiting=
[];n._open=[]}},p={send:function(a,b){g._getFileState(a).loaded=0;w("Sending simple upload request for "+a);g.uploadFile(a).then(function(c,d){w("Simple upload request succeeded for "+a);c=r.normalizeResponse(c,!0);var e=k.getSize(a);k.onProgress(a,b,e,e);r.maybeNewUuid(a,c);r.cleanup(a,c,d)},function(c,d){w("Simple upload request failed for "+a);c=r.normalizeResponse(c,!1);k.onAutoRetry(a,b,c,d)||r.cleanup(a,c,d)})}},r={cancel:function(a){w("Cancelling "+a);k.paramsStore.remove(a);n.free(a)},cleanup:function(a,
b,c){var d=k.getName(a);k.onComplete(a,d,b,c);g._getFileState(a)&&g._clearXhrs&&g._clearXhrs(a);n.free(a)},getProxyOrBlob:function(a){return g.getProxy&&g.getProxy(a)||g.getFile&&g.getFile(a)},initHandler:function(){g=new (b?f[b]:f.traditional)[(f.supportedFeatures.ajaxUploading?"Xhr":"Form")+"UploadHandler"](k,{getDataByUuid:k.getDataByUuid,getName:k.getName,getSize:k.getSize,getUuid:k.getUuid,log:w,onCancel:k.onCancel,onProgress:k.onProgress,onUuidChanged:k.onUuidChanged});g._removeExpiredChunkingRecords&&
g._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(a){return k.isQueued(a)},maybeDefer:function(a,b){if(b&&!g.getFile(a)&&b instanceof f.BlobProxy)k.onUploadPrep(a),w("Attempting to generate a blob on-demand for "+a),b.create().then(function(b){w("Generated an on-demand blob for "+a);g.updateBlob(a,b);k.setSize(a,b.size);g.reevaluateChunking(a);r.maybeSendDeferredFiles(a)},function(b){var c={};b&&(c.error=b);w(f.format("Failed to generate blob for ID {}.  Error message: {}.",
a,b),"error");k.onComplete(a,k.getName(a),f.extend(c,u),null);r.maybeSendDeferredFiles(a);n.free(a)});else return r.maybeSendDeferredFiles(a);return!1},maybeSendDeferredFiles:function(a){var b=k.getIdsInProxyGroup(a),c=!1;b&&b.length?(w("Maybe ready to upload proxy group file "+a),f.each(b,function(b,d){if(r.isDeferredEligibleForUpload(d)&&g.getFile(d))c=d===a,r.now(d);else if(r.isDeferredEligibleForUpload(d))return!1})):(c=!0,r.now(a));return c},maybeNewUuid:function(a,b){if(void 0!==b.newUuid)k.onUuidChanged(a,
b.newUuid)},normalizeResponse:function(a,b){var c=a;f.isObject(a)||(c={},f.isString(a)&&!b&&(c.error=a));c.success=b;return c},now:function(b){var c=k.getName(b);if(!a.isValid(b))throw new f.Error(b+" is not a valid file ID to upload!");k.onUpload(b,c);e&&g._shouldChunkThisFile(b)?l.sendNext(b):p.send(b,c)},start:function(a){var b=r.getProxyOrBlob(a);if(b)return r.maybeDefer(a,b);r.now(a);return!0}};f.extend(this,{add:function(a,b){g.add.apply(this,arguments)},upload:function(a){return n.open(a)?
r.start(a):!1},retry:function(b){d&&(g._getFileState(b).temp.ignoreFailure=!1);return n.isUsingConnection(b)?r.start(b):a.upload(b)},cancel:function(a){var b=g.cancel(a);f.isGenericPromise(b)?b.then(function(){r.cancel(a)}):!1!==b&&r.cancel(a)},cancelAll:function(){var b=n.getWaitingOrConnected(),c;if(b.length)for(c=b.length-1;0<=c;c--)a.cancel(b[c]);n.reset()},getFile:function(a){return g.getProxy&&g.getProxy(a)?g.getProxy(a).referenceBlob:g.getFile&&g.getFile(a)},isProxied:function(a){return!(!g.getProxy||
!g.getProxy(a))},getInput:function(a){if(g.getInput)return g.getInput(a)},reset:function(){w("Resetting upload handler");a.cancelAll();n.reset();g.reset()},expunge:function(b){if(a.isValid(b))return g.expunge(b)},isValid:function(a){return g.isValid(a)},getResumableFilesData:function(){return g.getResumableFilesData?g.getResumableFilesData():[]},getThirdPartyFileId:function(b){if(a.isValid(b))return g.getThirdPartyFileId(b)},pause:function(b){return a.isResumable(b)&&g.pause&&a.isValid(b)&&g.pause(b)?
(n.free(b),g.moveInProgressToRemaining(b),!0):!1},isResumable:function(a){return!!g.isResumable&&g.isResumable(a)}});f.extend(k,c);var w=k.log;d=(e=k.chunking.enabled&&f.supportedFeatures.chunking)&&k.chunking.concurrent.enabled;var u=function(){var a={};a[k.preventRetryParam]=!0;return a}();r.initHandler()};f.WindowReceiveMessage=function(c){var b={};f.extend({log:function(a,b){}},c);f.extend(this,{receiveMessage:function(a,c){var d=function(a){c(a.data)};window.postMessage?b[a]=f(window).attach("message",
d):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=b[a])&&a()}})};f.FormUploadHandler=function(c){function b(a,b){var c=a.id,d=c.split("_")[0],g=w(d);k[g]=b;l[d]=f(a).attach("load",function(){e.getInput(d)&&(u("Received iframe load event for CORS upload request (iframe name "+c+")"),n[c]=setTimeout(function(){var a="No valid message received from loaded iframe for iframe name "+c;u(a,"error");b({error:a})},1E3))});A.receiveMessage(c,
function(a){u("Received the following window message: '"+a+"'");c.split("_");var b=e._parseJsonResponse(a),d=b.uuid;d&&k[d]?(u("Handling response for iframe name "+c),clearTimeout(n[c]),delete n[c],e._detachLoadEvent(c),a=k[d],delete k[d],A.stopReceivingMessages(c),a(b)):d||u("'"+a+"' does not contain a UUID - ignoring.")})}var a=c.options,e=this,d=c.proxy,g=f.getUniqueId(),k={},l={},n={},p=a.isCors,r=a.inputName,w=d.getUuid,u=d.log,A=new f.WindowReceiveMessage({log:u});f.extend(this,new f.UploadHandler(c));
f.override(this,function(a){return{add:function(b,c){a.add(b,{input:c});c.setAttribute("name",r);c.parentNode&&f(c).remove()},expunge:function(b){delete l[b];p&&(clearTimeout(n[b]),delete n[b],A.stopReceivingMessages(b));var c=document.getElementById(e._getIframeName(b));c&&(c.setAttribute("src","javascript:false;"),f(c).remove());a.expunge(b)},isValid:function(b){return a.isValid(b)&&void 0!==e._getFileState(b).input}}});f.extend(this,{getInput:function(a){return e._getFileState(a).input},_attachLoadEvent:function(a,
c){var d;p?b(a,c):l[a.id]=f(a).attach("load",function(){u("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(D){u("Error when attempting to access iframe during handling of upload response ("+D.message+")","error"),d={success:!1}}c(d)}})},_createIframe:function(a){a=e._getIframeName(a);var b=f.toElement("<iframe src='javascript:false;' name='"+a+"' />");b.setAttribute("id",a);b.style.display="none";
document.body.appendChild(b);return b},_detachLoadEvent:function(a){void 0!==l[a]&&(l[a](),delete l[a])},_getIframeName:function(a){return a+"_"+g},_initFormForUpload:function(a){var b=a.endpoint,c=a.params,d=a.paramsInBody,e=a.targetName;a=f.toElement("<form method='"+a.method+"' enctype='multipart/form-data'></form>");var g=b;d?f.obj2Inputs(c,a):g=f.obj2url(c,b);a.setAttribute("action",g);a.setAttribute("target",e);a.style.display="none";document.body.appendChild(a);return a},_parseJsonResponse:function(a){var b=
{};try{b=f.parseJson(a)}catch(B){u("Error when attempting to parse iframe upload response ("+B.message+")","error")}return b}})};f.XhrUploadHandler=function(c){function b(b){f.each(a._getXhrs(b),function(c,d){c=a._getAjaxRequester(b,c);d.onreadystatechange=null;d.upload.onprogress=null;d.abort();c&&c.canceled&&c.canceled(b)})}var a=this,e=c.options.namespace,d=c.proxy,g=c.options.chunking,k=c.options.resume,l=g&&c.options.chunking.enabled&&f.supportedFeatures.chunking,n=k&&c.options.resume.enabled&&
l&&f.supportedFeatures.resume,p=d.getName,r=d.getSize,w=d.getUuid,u=d.getEndpoint,A=d.getDataByUuid,t=d.onUuidChanged,z=d.onProgress,B=d.log;f.extend(this,new f.UploadHandler(c));f.override(this,function(c){return{add:function(b,d){if(f.isFile(d)||f.isBlob(d))c.add(b,{file:d});else if(d instanceof f.BlobProxy)c.add(b,{proxy:d});else throw Error("Passed obj is not a File, Blob, or proxy");a._initTempState(b);n&&a._maybePrepareForResume(b)},expunge:function(d){b(d);a._maybeDeletePersistedChunkData(d);
a._clearXhrs(d);c.expunge(d)}}});f.extend(this,{clearCachedChunk:function(b,c){delete a._getFileState(b).temp.cachedChunks[c]},clearXhr:function(b,c){b=a._getFileState(b).temp;b.xhrs&&delete b.xhrs[c];b.ajaxRequesters&&delete b.ajaxRequesters[c]},finalizeChunks:function(b,c){var d=a._getTotalChunks(b)-1;b=a._getXhr(b,d);return c?(new f.Promise).success(c(b),b):(new f.Promise).success({},b)},getFile:function(b){return a.isValid(b)&&a._getFileState(b).file},getProxy:function(b){return a.isValid(b)&&
a._getFileState(b).proxy},getResumableFilesData:function(){var b=[];a._iterateResumeRecords(function(c,d){a.moveInProgressToRemaining(null,d.chunking.inProgress,d.chunking.remaining);c={name:d.name,remaining:d.chunking.remaining,size:d.size,uuid:d.uuid};d.key&&(c.key=d.key);b.push(c)});return b},isResumable:function(b){return!!g&&a.isValid(b)&&!a._getFileState(b).notResumable},moveInProgressToRemaining:function(b,c,d){c=c||a._getFileState(b).chunking.inProgress;var e=d||a._getFileState(b).chunking.remaining;
c&&(B(f.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(c))),c.reverse(),f.each(c,function(a,b){e.unshift(b)}),c.length=0)},pause:function(c){if(a.isValid(c))return B(f.format("Aborting XHR upload for {} '{}' due to pause instruction.",c,p(c))),a._getFileState(c).paused=!0,b(c),!0},reevaluateChunking:function(b){if(g&&a.isValid(b)){var c=a._getFileState(b),d;delete c.chunking;c.chunking={};var e=a._getTotalChunks(b);if(1<e||g.mandatory){c.chunking.enabled=!0;c.chunking.parts=
e;c.chunking.remaining=[];for(d=0;d<e;d++)c.chunking.remaining.push(d);a._initTempState(b)}else c.chunking.enabled=!1}},updateBlob:function(b,c){a.isValid(b)&&(a._getFileState(b).file=c)},_clearXhrs:function(b){var c=a._getFileState(b).temp;f.each(c.ajaxRequesters,function(a){delete c.ajaxRequesters[a]});f.each(c.xhrs,function(a){delete c.xhrs[a]})},_createXhr:function(b,c){return a._registerXhr(b,c,f.createXhrInstance())},_getAjaxRequester:function(b,c){c=null==c?-1:c;return a._getFileState(b).temp.ajaxRequesters[c]},
_getChunkData:function(b,c){var d=g.partSize,e=r(b),h=a.getFile(b),k=d*c;d=k+d>=e?e:k+d;e=a._getTotalChunks(b);b=this._getFileState(b).temp.cachedChunks;h=b[c]||f.sliceBlob(h,k,d);b[c]=h;return{part:c,start:k,end:d,count:e,blob:h,size:d-k}},_getChunkDataForCallback:function(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}},_getLocalStorageId:function(a){var b=p(a),c=r(a),d=g.partSize;a=u(a);return f.format("qq{}resume{}-{}-{}-{}-{}",e,"5.0",b,c,d,a)},_getMimeType:function(b){return a.getFile(b).type},
_getPersistableData:function(b){return a._getFileState(b).chunking},_getTotalChunks:function(a){if(g)return a=r(a),Math.ceil(a/g.partSize)},_getXhr:function(b,c){c=null==c?-1:c;return a._getFileState(b).temp.xhrs[c]},_getXhrs:function(b){return a._getFileState(b).temp.xhrs},_iterateResumeRecords:function(a){n&&f.each(localStorage,function(b,c){0===b.indexOf(f.format("qq{}resume",e))&&(c=JSON.parse(c),a(b,c))})},_initTempState:function(b){a._getFileState(b).temp={ajaxRequesters:{},chunkProgress:{},
xhrs:{},cachedChunks:{}}},_markNotResumable:function(b){a._getFileState(b).notResumable=!0},_maybeDeletePersistedChunkData:function(b){return n&&a.isResumable(b)&&(b=a._getLocalStorageId(b))&&localStorage.getItem(b)?(localStorage.removeItem(b),!0):!1},_maybePrepareForResume:function(b){var c=a._getFileState(b);if(n&&void 0===c.key){var d=a._getLocalStorageId(b);if(d=localStorage.getItem(d))d=JSON.parse(d),A(d.uuid)?a._markNotResumable(b):(B(f.format("Identified file with ID {} and name of {} as resumable.",
b,p(b))),t(b,d.uuid),c.key=d.key,c.chunking=d.chunking,c.loaded=d.loaded,c.attemptingResume=!0,a.moveInProgressToRemaining(b))}},_maybePersistChunkedState:function(b){var c=a._getFileState(b);if(n&&a.isResumable(b)){var d=a._getLocalStorageId(b);c={name:p(b),size:r(b),uuid:w(b),key:c.key,chunking:c.chunking,loaded:c.loaded,lastUpdated:Date.now()};try{localStorage.setItem(d,JSON.stringify(c))}catch(x){B(f.format("Unable to save resume data for '{}' due to error: '{}'.",b,x.toString()),"warn")}}},_registerProgressHandler:function(b,
c,d){var e=a._getXhr(b,c),g=p(b),h={simple:function(a,c){var d=r(b);a===c?z(b,g,d,d):z(b,g,a>=d?d-1:a,d)},chunked:function(e,h){var k=a._getFileState(b).temp.chunkProgress,l=a._getFileState(b).loaded,m=r(b),n=l;k[c]=e-(h-d);f.each(k,function(a,b){n+=b});z(b,g,n,m)}};e.upload.onprogress=function(a){if(a.lengthComputable)h[null==d?"simple":"chunked"](a.loaded,a.total)}},_registerXhr:function(b,c,d,e){c=null==c?-1:c;b=a._getFileState(b).temp;b.xhrs=b.xhrs||{};b.ajaxRequesters=b.ajaxRequesters||{};b.xhrs[c]=
d;e&&(b.ajaxRequesters[c]=e);return d},_removeExpiredChunkingRecords:function(){var b=k.recordsExpireIn;a._iterateResumeRecords(function(a,c){c=new Date(c.lastUpdated);c.setDate(c.getDate()+b);c.getTime()<=Date.now()&&(B("Removing expired resume record with key "+a),localStorage.removeItem(a))})},_shouldChunkThisFile:function(b){var c=a._getFileState(b);c.chunking||a.reevaluateChunking(b);return c.chunking.enabled}})};f.DeleteFileAjaxRequester=function(c){var b={method:"DELETE",uuidParamName:"qquuid",
endpointStore:{},maxConnections:3,customHeaders:function(a){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){},onDelete:function(a){},onDeleteComplete:function(a,b,c){}};f.extend(b,c);var a=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:b.method,endpointStore:b.endpointStore,paramsStore:b.paramsStore,mandatedParams:"POST"===b.method.toUpperCase()?{_method:"DELETE"}:{},maxConnections:b.maxConnections,customHeaders:function(a){return b.customHeaders.get(a)},
log:b.log,onSend:b.onDelete,onComplete:b.onDeleteComplete,cors:b.cors}));f.extend(this,{sendDelete:function(c,d,e){e=e||{};b.log("Submitting delete file request for "+c);"DELETE"===b.method?a.initTransport(c).withPath(d).withParams(e).send():(e[b.uuidParamName]=d,a.initTransport(c).withParams(e).send())}})};(function(){function c(a,c,d,e){var g=document.createElement("canvas"),h=d.mime||"image/jpeg",k=new f.Promise;b(a,c,g,d,e).then(function(){k.success(g.toDataURL(h,d.quality||.8))});return k}function b(b,
c,d,h,p){var g=b.naturalWidth,k=b.naturalHeight,l=h.width,n=h.height,t=d.getContext("2d"),z=new f.Promise;t.save();if(h.resize)return a({blob:c,canvas:d,image:b,imageHeight:k,imageWidth:g,orientation:h.orientation,resize:h.resize,targetHeight:n,targetWidth:l});if(!f.supportedFeatures.unlimitedScaledImageSize){c=l;var B=n;if(!f.ios())throw new f.Error("Downsampled dimensions can only be reliably calculated for iOS!");c=5241E3<B*c?{newHeight:Math.round(Math.sqrt(B/c*5241E3)),newWidth:Math.round(Math.sqrt(c/
B*5241E3))}:void 0;c&&(f.log(f.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",l,n,c.newWidth,c.newHeight),"warn"),l=c.newWidth,n=c.newHeight)}e(d,l,n,h.orientation);if(f.ios()){h=b.naturalWidth;c=b.naturalHeight;B=document.createElement("canvas");1048576<h*c?(B.width=B.height=1,c=B.getContext("2d"),c.drawImage(b,-h+1,0),h=0===c.getImageData(0,0,1,1).data[3]):h=!1;h&&(g/=2,k/=2);h=document.createElement("canvas");if(p){p=k;var D=document.createElement("canvas");
c=0;var y=B=p;D.width=1;D.height=p;D=D.getContext("2d");D.drawImage(b,0,0);for(D=D.getImageData(0,0,1,p).data;y>c;){var E=D[4*(y-1)+3];0===E?B=y:c=y;y=B+c>>1}p=y/p;p=0===p?1:p}else p=1;l=Math.ceil(1024*l/g);n=Math.ceil(1024*n/k/p);c=p=0;h.width=h.height=1024;for(B=h.getContext("2d");p<k;){for(D=y=0;y<g;)B.clearRect(0,0,1024,1024),B.drawImage(b,-y,-p),t.drawImage(h,0,0,1024,1024,D,c,l,n),y+=1024,D+=l;p+=1024;c+=n}t.restore()}else t.drawImage(b,0,0,l,n);d.qqImageRendered&&d.qqImageRendered();z.success();
return z}function a(a){var b=a.blob,c=a.image,d=a.imageHeight,g=a.imageWidth,h=a.orientation,w=new f.Promise,u=a.resize,A=document.createElement("canvas"),t=A.getContext("2d"),z=a.canvas,B=a.targetHeight;a=a.targetWidth;e(A,g,d,h);z.height=B;z.width=a;t.drawImage(c,0,0);u({blob:b,height:B,image:c,sourceCanvas:A,targetCanvas:z,width:a}).then(function(){z.qqImageRendered&&z.qqImageRendered();w.success()},w.failure);return w}function e(a,b,c,d){switch(d){case 5:case 6:case 7:case 8:a.width=c;a.height=
b;break;default:a.width=b,a.height=c}a=a.getContext("2d");switch(d){case 2:a.translate(b,0);a.scale(-1,1);break;case 3:a.translate(b,c);a.rotate(Math.PI);break;case 4:a.translate(0,c);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI);a.translate(b,-c);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-b,0)}}function d(a,b){var c=this;window.Blob&&a instanceof Blob&&function(){var b=new Image,
d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!d)throw Error("No createObjectURL function found to create blob url");b.src=d.createObjectURL(a);c.blob=a;a=b}();a.naturalWidth||a.naturalHeight||(a.onload=function(){var a=c.imageLoadListeners;a&&(c.imageLoadListeners=null,setTimeout(function(){for(var b=0,c=a.length;b<c;b++)a[b]()},0))},a.onerror=b,this.imageLoadListeners=[]);this.srcImage=a}d.prototype.render=function(a,
d){d=d||{};var e=this,g=this.srcImage.naturalWidth,h=this.srcImage.naturalHeight,k=d.width,w=d.height,u=d.maxWidth,A=d.maxHeight,t=!this.blob||"image/jpeg"===this.blob.type,z=a.tagName.toLowerCase();if(this.imageLoadListeners)this.imageLoadListeners.push(function(){e.render(a,d)});else{k&&!w?w=h*k/g<<0:w&&!k?k=g*w/h<<0:(k=g,w=h);u&&k>u&&(k=u,w=h*k/g<<0);A&&w>A&&(w=A,k=g*w/h<<0);var B={width:k,height:w};f.each(d,function(a,b){B[a]=b});"img"===z?function(){var b=a.src;c(e.srcImage,e.blob,B,t).then(function(c){a.src=
c;b===a.src&&a.onload()})}():"canvas"===z&&b(this.srcImage,this.blob,a,B,t);if("function"===typeof this.onrender)this.onrender(a)}};f.MegaPixImage=d})();f.ImageGenerator=function(c){function b(a){return"img"===a.tagName.toLowerCase()}function a(a){return"canvas"===a.tagName.toLowerCase()}function e(a){a=a.split("/");a=a[a.length-1].split("?")[0];a=(a=f.getExtension(a))&&a.toLowerCase();switch(a){case "jpeg":case "jpg":return"image/jpeg";case "png":return"image/png";case "bmp":return"image/bmp";case "gif":return"image/gif";
case "tiff":case "tif":return"image/tiff"}}function d(a){var b=document.createElement("a");b.href=a;a=b.protocol;var c=b.port;b=b.hostname;return a.toLowerCase()!==window.location.protocol.toLowerCase()||b.toLowerCase()!==window.location.hostname.toLowerCase()||c!==window.location.port&&!f.ie()?!0:!1}function g(a,b){a.onload=function(){a.onload=null;a.onerror=null;b.success(a)};a.onerror=function(){a.onload=null;a.onerror=null;c("Problem drawing thumbnail!","error");b.failure(a,"Problem drawing thumbnail!")}}
function k(a,b){a.qqImageRendered=function(){b.success(a)}}function l(d,e){var h=b(d)||a(d);b(d)?g(d,e):a(d)?k(d,e):(e.failure(d),c(f.format("Element container of type {} is not supported!",d.tagName),"error"));return h}function n(a,b,d){var e=new f.Promise,g=new f.Identify(a,c),h=d.maxSize,k=null==d.orient?!0:d.orient,n=function(){b.onerror=null;b.onload=null;c("Could not render preview, file may be too large!","error");e.failure(b,"Browser cannot render image!")};g.isPreviewable().then(function(g){var p=
{parse:function(){return(new f.Promise).success()}};p=k?new f.Exif(a,c):p;var r=new f.MegaPixImage(a,n);l(b,e)&&p.parse().then(function(a){r.render(b,{maxWidth:h,maxHeight:h,orientation:a&&a.Orientation,mime:g,resize:d.customResizeFunction})},function(a){c(f.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",a));r.render(b,{maxWidth:h,maxHeight:h,mime:g,resize:d.customResizeFunction})})},function(){c("Not previewable");e.failure(b,"Not previewable")});return e}function p(a,b,
c,g,h){var k=new Image,n=new f.Promise;l(k,n);d(a)&&(k.crossOrigin="anonymous");k.src=a;n.then(function(){l(b,c);(new f.MegaPixImage(k)).render(b,{maxWidth:g,maxHeight:g,mime:e(a),resize:h})},c.failure)}function r(a,b,c,d){l(b,c);f(b).css({maxWidth:d+"px",maxHeight:d+"px"});b.src=a}f.extend(this,{generate:function(e,g,h){if(f.isString(e)){c("Attempting to update thumbnail based on server response.");var k=h||{};h=new f.Promise;var u=k.scale;k=u?k.maxSize:null;u&&b(g)?(u=document.createElement("canvas"),
u.getContext&&u.getContext("2d")?d(e)&&void 0===(new Image).crossOrigin?r(e,g,h,k):p(e,g,h,k):r(e,g,h,k)):a(g)?p(e,g,h,k):l(g,h)&&(g.src=e);return h}c("Attempting to draw client-side image preview.");return n(e,g,h||{})}});this._testing={};this._testing.isImg=b;this._testing.isCanvas=a;this._testing.isCrossOrigin=d;this._testing.determineMimeOfFileName=e};f.Exif=function(c,b){function a(a){for(var b=0,c=0;0<a.length;)b+=parseInt(a.substring(0,2),16)*Math.pow(2,c),a=a.substring(2,a.length),c+=8;return b}
function e(a,b){var d=a,g=b;void 0===d&&(d=2,g=new f.Promise);f.readBlobToHex(c,d,4).then(function(a){var b=/^ffe([0-9])/.exec(a);b?"1"!==b[1]?(a=parseInt(a.slice(4,8),16),e(d+a+2,g)):g.success(d):g.failure("No EXIF header to be found!")});return g}function d(){var a=new f.Promise;f.readBlobToHex(c,0,6).then(function(b){0!==b.indexOf("ffd8")?a.failure("Not a valid JPEG!"):e().then(function(b){a.success(b)},function(b){a.failure(b)})});return a}function g(a){var b=new f.Promise;f.readBlobToHex(c,a+
10,2).then(function(a){b.success("4949"===a)});return b}function k(b,d){var e=new f.Promise;f.readBlobToHex(c,b+18,2).then(function(b){if(d)return e.success(a(b));e.success(parseInt(b,16))});return e}function l(b,c){var d=f.extend([],n),e={};f.each(c,function(c,f){c=f.slice(0,4);var g=b?a(c):parseInt(c,16);c=d.indexOf(g);if(0<=c){var h=p[g].name;g=p[g].bytes;f=f.slice(16,16+2*g);e[h]=b?a(f):parseInt(f,16);d.splice(c,1)}if(0===d.length)return!1});return e}var n=[274],p={274:{name:"Orientation",bytes:2}};
f.extend(this,{parse:function(){var a=new f.Promise,e=function(c){b(f.format("EXIF header parse failed: '{}' ",c));a.failure(c)};d().then(function(d){b(f.format("Moving forward with EXIF header parsing for '{}'",void 0===c.name?"blob":c.name));g(d).then(function(g){b(f.format("EXIF Byte order is {} endian",g?"little":"big"));k(d,g).then(function(h){b(f.format("Found {} APP1 directory entries",h));f.readBlobToHex(c,d+20,12*h).then(function(c){for(var d=[],e=0;e+24<=c.length;)d.push(c.slice(e,e+24)),
e+=24;c=l(g,d);b("Successfully parsed some EXIF tags");a.success(c)},e)},e)},e)},e);return a}});this._testing={};this._testing.parseLittleEndian=a};f.Identify=function(c,b){function a(a,b){var c=!1;a=[].concat(a);f.each(a,function(a,d){if(0===b.indexOf(d))return c=!0,!1});return c}f.extend(this,{isPreviewable:function(){var e=this,d=new f.Promise,g=!1,k=void 0===c.name?"blob":c.name;b(f.format("Attempting to determine if {} can be rendered in this browser",k));b("First pass: check type attribute of blob object.");
this.isPreviewableSync()?(b("Second pass: check for magic bytes in file header."),f.readBlobToHex(c,0,4).then(function(c){f.each(e.PREVIEWABLE_MIME_TYPES,function(b,e){if(a(e,c)){if("image/tiff"!==b||f.supportedFeatures.tiffPreviews)g=!0,d.success(b);return!1}});b(f.format("'{}' is {} able to be rendered in this browser",k,g?"":"NOT"));g||d.failure()},function(){b("Error reading file w/ name '"+k+"'.  Not able to be rendered in this browser.");d.failure()})):d.failure();return d},isPreviewableSync:function(){var a=
c.type,d=0<=f.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),a),e=!1,k=void 0===c.name?"blob":c.name;d&&(e="image/tiff"===a?f.supportedFeatures.tiffPreviews:!0);!e&&b(k+" is not previewable in this browser per the blob's type attr");return e}})};f.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};f.ImageValidation=function(c,b){function a(a){var b=!1;f.each(a,function(a,c){if(0<c)return b=
!0,!1});return b}function e(){var a=new f.Promise;(new f.Identify(c,b)).isPreviewable().then(function(){var d=new Image,e=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;e?(d.onerror=function(){b("Cannot determine dimensions for image.  May be too large.","error");a.failure()},d.onload=function(){a.success({width:this.width,height:this.height})},d.src=e.createObjectURL(c)):(b("No createObjectURL function available to generate image URL!",
"error"),a.failure())},a.failure);return a}function d(a,b){var c;f.each(a,function(a,d){if(0<d){var e=/(max|min)(Width|Height)/.exec(a),f=e[2].charAt(0).toLowerCase()+e[2].slice(1);f=b[f];switch(e[1]){case "min":if(f<d)return c=a,!1;break;case "max":if(f>d)return c=a,!1}}});return c}this.validate=function(c){var g=new f.Promise;b("Attempting to validate image.");a(c)?e().then(function(a){(a=d(c,a))?g.failure(a):g.success()},g.success):g.success();return g}};f.Session=function(c){function b(b,c,e,
k){var d=!1;c&&(f.isArray(b)?c=!0:(a.log("Session response is not an array.","error"),c=void 0));c&&f.each(b,function(b,c){if(null==c.uuid)d=!0,a.log(f.format("Session response item {} did not include a valid UUID - ignoring.",b),"error");else if(null==c.name)d=!0,a.log(f.format("Session response item {} did not include a valid name - ignoring.",b),"error");else try{return a.addFileRecord(c),!0}catch(r){d=!0,a.log(r.message,"error")}return!1});k[c&&!d?"success":"failure"](b,e)}var a={endpoint:null,
params:{},customHeaders:{},cors:{},addFileRecord:function(a){},log:function(a,b){}};f.extend(a,c,!0);this.refresh=function(){var c=new f.Promise,d=f.extend({},a);(new f.SessionAjaxRequester(f.extend(d,{onComplete:function(a,d,e){b(a,d,e,c)}}))).queryServer();return c}};f.SessionAjaxRequester=function(c){var b={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(a,b,c){},log:function(a,b){}};f.extend(b,c);var a=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",
validMethods:["GET"],method:"GET",endpointStore:{get:function(){return b.endpoint}},customHeaders:b.customHeaders,log:b.log,onComplete:function(a,c,e){a=null;if(null!=c.responseText)try{a=f.parseJson(c.responseText)}catch(k){b.log("Problem parsing session response: "+k.message,"error"),e=!0}b.onComplete(a,!e,c)},cors:b.cors}));f.extend(this,{queryServer:function(){var c=f.extend({},b.params);b.log("Session query request.");a.initTransport("sessionRefresh").withParams(c).withCacheBuster().send()}})};
f.Scaler=function(c,b){var a=c.customResizer,e=c.sendOriginal,d=c.orient,g=c.defaultType,k=c.defaultQuality/100,l=c.failureText,n=c.includeExif,p=this._getSortedSizes(c.sizes);f.extend(this,{enabled:f.supportedFeatures.scaling&&0<p.length,getFileRecords:function(c,h,u){var r=this,t=[],w=u.blob?u.blob:u;(new f.Identify(w,b)).isPreviewableSync()?(f.each(p,function(c,e){c=r._determineOutputType({defaultType:g,requestedType:e.type,refType:w.type});t.push({uuid:f.getUniqueId(),name:r._getName(h,{name:e.name,
type:c,refType:w.type}),blob:new f.BlobProxy(w,f.bind(r._generateScaledImage,r,{customResizeFunction:a,maxSize:e.maxSize,orient:d,type:c,quality:k,failedText:l,includeExif:n,log:b}))})}),t.push({uuid:c,name:h,size:w.size,blob:e?w:null})):t.push({uuid:c,name:h,size:w.size,blob:w});return t},handleNewFile:function(a,b,c,d,e,g,h,k){var l=[],n=null,p=k.addFileToHandler,r=k.uploadData,u=k.paramsStore,m=f.getUniqueId();f.each(this.getFileRecords(c,b,a),function(a,b){a=b.size;b.blob instanceof f.BlobProxy&&
(a=-1);a=r.addFile({uuid:b.uuid,name:b.name,size:a,batchId:g,proxyGroupId:m});b.blob instanceof f.BlobProxy?l.push(a):n=a;b.blob?(p(a,b.blob),e.push({id:a,file:b.blob})):r.setStatus(a,f.status.REJECTED)});null!==n&&(f.each(l,function(a,b){a={qqparentuuid:r.retrieve({id:n}).uuid,qqparentsize:r.retrieve({id:n}).size};a[h]=r.retrieve({id:b}).uuid;r.setParentId(b,n);u.addReadOnly(b,a)}),l.length&&function(){var a={};a[h]=r.retrieve({id:n}).uuid;u.addReadOnly(n,a)}())}})};f.extend(f.Scaler.prototype,{scaleImage:function(c,
b,a){if(!f.supportedFeatures.scaling)throw new f.Error("Scaling is not supported in this browser!");var e=new f.Promise,d=a.log,g=a.getFile(c),k=(a=a.uploadData.retrieve({id:c}))&&a.name,l=a&&a.uuid,n=new f.Scaler({customResizer:b.customResizer,sendOriginal:!1,orient:b.orient,defaultType:b.type||null,defaultQuality:b.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:b.maxSize}]},d);f.Scaler&&f.supportedFeatures.imagePreviews&&g?f.bind(function(){var a=n.getFileRecords(l,k,g)[0];
a&&a.blob instanceof f.BlobProxy?a.blob.create().then(e.success,e.failure):(d(c+" is not a scalable image!","error"),e.failure())},this)():(e.failure(),d("Could not generate requested scaled image for "+c+".  Scaling is either not possible in this browser, or the file could not be located.","error"));return e},_determineOutputType:function(c){var b=c.requestedType,a=c.defaultType;c=c.refType;return a||b?b?0<=f.indexOf(Object.keys(f.Identify.prototype.PREVIEWABLE_MIME_TYPES),b)?"image/tiff"===b?f.supportedFeatures.tiffPreviews?
b:a:b:a:a:"image/jpeg"!==c?"image/png":c},_getName:function(c,b){var a=c.lastIndexOf("."),e=b.type||"image/png",d=b.refType,g=f.getExtension(c),k="";b.name&&b.name.trim().length&&(k=" ("+b.name+")");0<=a?(c=c.substr(0,a),d!==e&&(g=e.split("/")[1]),c+=k+"."+g):c+=k;return c},_getSortedSizes:function(c){c=f.extend([],c);return c.sort(function(b,a){return b.maxSize>a.maxSize?1:b.maxSize<a.maxSize?-1:0})},_generateScaledImage:function(c,b){var a=this,e=c.customResizeFunction,d=c.log,g=c.maxSize,k=c.orient,
l=c.type,n=c.quality,p=c.failedText,r=c.includeExif&&"image/jpeg"===b.type&&"image/jpeg"===l,w=new f.Promise;c=new f.ImageGenerator(d);var u=document.createElement("canvas");d("Attempting to generate scaled version for "+b.name);c.generate(b,u,{maxSize:g,orient:k,customResizeFunction:e}).then(function(){var c=u.toDataURL(l,n),e=function(){d("Success generating scaled version for "+b.name);var a=f.dataUriToBlob(c);w.success(a)};r?a._insertExifHeader(b,c,d).then(function(a){c=a;e()},function(){d("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.",
"error");e()}):e()},function(){d("Failed attempt to generate scaled version for "+b.name,"error");w.failure(p)});return w},_insertExifHeader:function(c,b,a){var e=new FileReader,d=new f.Promise,g="";e.onload=function(){g=e.result;d.success(f.ExifRestorer.restore(g,b))};e.onerror=function(){a("Problem reading "+c.name+" during attempt to transfer EXIF data to scaled version.","error");d.failure()};e.readAsDataURL(c);return d},_dataUriToBlob:function(c){var b=0<=c.split(",")[0].indexOf("base64")?atob(c.split(",")[1]):
decodeURI(c.split(",")[1]);c=c.split(",")[0].split(":")[1].split(";")[0];var a=new ArrayBuffer(b.length);var e=new Uint8Array(a);f.each(b,function(a,b){e[a]=b.charCodeAt(0)});return this._createBlob(a,c)},_createBlob:function(c,b){var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(a=a&&new a)?(a.append(c),a.getBlob(b)):new Blob([c],{type:b})}});f.ExifRestorer=function(){return{KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode64:function(c){var b="",a=0;do{var e=c[a++];var d=c[a++];var f=c[a++];var k=e>>2;e=(e&3)<<4|d>>4;var l=(d&15)<<2|f>>6;var n=f&63;isNaN(d)?l=n=64:isNaN(f)&&(n=64);b=b+this.KEY_STR.charAt(k)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(n)}while(a<c.length);return b},restore:function(c,b){if(!c.match("data:image/jpeg;base64,"))return b;c=this.decode64(c.replace("data:image/jpeg;base64,",""));c=this.slice2Segments(c);b=this.exifManipulation(b,c);return"data:image/jpeg;base64,"+
this.encode64(b)},exifManipulation:function(c,b){b=this.getExifArray(b);c=this.insertExif(c,b);return new Uint8Array(c)},getExifArray:function(c){for(var b,a=0;a<c.length;a++)if(b=c[a],255==b[0]&225==b[1])return b;return[]},insertExif:function(c,b){c=c.replace("data:image/jpeg;base64,","");var a=this.decode64(c),e=a.indexOf(255,3);c=a.slice(0,e);a=a.slice(e);b=c.concat(b);return b=b.concat(a)},slice2Segments:function(c){for(var b=0,a=[];!(255==c[b]&218==c[b+1]);){if(255==c[b]&216==c[b+1])b+=2;else{var e=
b+(256*c[b+2]+c[b+3])+2;b=c.slice(b,e);a.push(b);b=e}if(b>c.length)break}return a},decode64:function(c){var b=0,a=[];if(/[^A-Za-z0-9\+\/=]/g.exec(c))throw Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");c=c.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var e=this.KEY_STR.indexOf(c.charAt(b++));var d=this.KEY_STR.indexOf(c.charAt(b++));var f=this.KEY_STR.indexOf(c.charAt(b++));var k=this.KEY_STR.indexOf(c.charAt(b++));e=e<<2|d>>4;
d=(d&15)<<4|f>>2;var l=(f&3)<<6|k;a.push(e);64!=f&&a.push(d);64!=k&&a.push(l)}while(b<c.length);return a}}}();f.TotalProgress=function(c,b){var a={},e=0,d=0,g=-1,k=-1,l=function(a,b){a===g&&b===k||c(a,b);g=a;k=b},n=function(a,b){var c=!0;f.each(a,function(a,d){if(0<=f.indexOf(b,d))return c=!1});return c},p=function(c){var d=b(c);0<d&&(r(c,0,d),a[c]={loaded:0,total:d})},r=function(b,c,f){var g=a[b]?a[b].loaded:0;b=a[b]?a[b].total:0;-1===c&&-1===f?(e-=g,d-=b):(c&&(e+=c-g),f&&(d+=f-b));l(e,d)};f.extend(this,
{onAllComplete:function(a,b,c){if(0===b.length||n(b,c))l(d,d),this.reset()},onStatusChange:function(b,c,d){d===f.status.CANCELED||d===f.status.REJECTED?(r(b,-1,-1),delete a[b]):d===f.status.SUBMITTING&&p(b)},onIndividualProgress:function(b,c,d){r(b,c,d);a[b]={loaded:c,total:d}},onNewSize:function(a){p(a)},reset:function(){a={};d=e=0}})};f.PasteSupport=function(c){var b;var a={targetElement:null,callbacks:{log:function(a,b){},pasteReceived:function(a){}}};f.extend(a,c);(function(){b=f(a.targetElement).attach("paste",
function(b){(b=b.clipboardData)&&f.each(b.items,function(b,c){c.type&&0===c.type.indexOf("image/")&&(b=c.getAsFile(),a.callbacks.pasteReceived(b))})})})();f.extend(this,{reset:function(){b&&b()}})};f.FormSupport=function(c,b,a){function e(b,c){if(b.checkValidity&&!b.checkValidity())a("Form did not pass validation checks - will not upload.","error"),c();else return!0}function d(a){var c=a.submit;f(a).attach("submit",function(d){d=d||window.event;d.preventDefault?d.preventDefault():d.returnValue=!1;
e(a,c)&&b()});a.submit=function(){e(a,c)&&b()}}var g=this,k=c.interceptSubmit,l=c.element;f.extend(this,{newEndpoint:null,newAutoUpload:c.autoUpload,attachedToForm:!1,getFormInputsAsObject:function(){return null==l?null:g._form2Obj(l)}});l=function(b){if(b&&(f.isString(b)&&(b=document.getElementById(b)),b)){a("Attaching to form element.");var c=b;c.getAttribute("action")&&(g.newEndpoint=c.getAttribute("action"));k&&d(b)}return b}(l);this.attachedToForm=!!l};f.extend(f.FormSupport.prototype,{_form2Obj:function(c){var b=
{},a=function(a){return 0<=f.indexOf(["checkbox","radio"],a.type.toLowerCase())&&!a.checked?!0:a.disabled&&"hidden"!==a.type.toLowerCase()},e=function(a){var b=null;f.each(f(a).children(),function(a,c){if("option"===c.tagName.toLowerCase()&&c.selected)return b=c.value,!1});return b};f.each(c.elements,function(c,g){if(c=f.isInput(g,!0)||"textarea"===g.tagName.toLowerCase())c=0>f.indexOf(["button","image","reset","submit"],g.type.toLowerCase());c&&!a(g)?b[g.name]=g.value:"select"!==g.tagName.toLowerCase()||
a(g)||(c=e(g),null!==c&&(b[g.name]=c))});return b}});f.CryptoJS=function(c,b){var a={},e=a.lib={},d=e.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;b&&c.mixIn(b);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&
(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=e.WordArray=d.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||l).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-e%4*8&255)<<24-(d+e)%4*8;else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);this.sigBytes+=
a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-b%4*8;a.length=c.ceil(b/4)},clone:function(){var a=d.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var b=[],d=0;d<a;d+=4)b.push(4294967296*c.random()|0);return new f.init(b,a)}}),k=a.enc={},l=k.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join("")},
parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},n=k.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-d%4*8;return new f.init(c,b)}},p=k.Utf8={stringify:function(a){try{return decodeURIComponent(escape(n.stringify(a)))}catch(A){throw Error("Malformed UTF-8 data");
}},parse:function(a){return n.parse(unescape(encodeURIComponent(a)))}},r=e.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new f.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=p.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,e=b.sigBytes,g=this.blockSize,h=e/(4*g);h=a?c.ceil(h):c.max((h|0)-this._minBufferSize,0);a=h*g;e=c.min(4*a,e);if(a){for(var k=0;k<a;k+=g)this._doProcessBlock(d,k);k=d.splice(0,a);b.sigBytes-=
e}return new f.init(k,e)},clone:function(){var a=d.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});e.Hasher=r.extend({cfg:d.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){r.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return(new a.init(c)).finalize(b)}},_createHmacHelper:function(a){return function(b,
c){return(new w.HMAC.init(a,c)).finalize(b)}}});var w=a.algo={};return a}(Math);(function(){var c=f.CryptoJS,b=c.lib.WordArray;c.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,e=this._map;a.clamp();a=[];for(var f=0;f<c;f+=3)for(var l=(b[f>>>2]>>>24-f%4*8&255)<<16|(b[f+1>>>2]>>>24-(f+1)%4*8&255)<<8|b[f+2>>>2]>>>24-(f+2)%4*8&255,n=0;4>n&&f+.75*n<c;n++)a.push(e.charAt(l>>>6*(3-n)&63));if(b=e.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,
e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));e=[];for(var f=0,l=0;l<c;l++)if(l%4){var n=d.indexOf(a.charAt(l-1))<<l%4*2,p=d.indexOf(a.charAt(l))>>>6-l%4*2;e[f>>>2]|=(n|p)<<24-f%4*8;f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var c=f.CryptoJS,b=c.enc.Utf8;c.algo.HMAC=c.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init;"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c));c.clamp();
a=this._oKey=c.clone();c=this._iKey=c.clone();for(var f=a.words,h=c.words,n=0;n<d;n++)f[n]^=1549556828,h[n]^=909522486;a.sigBytes=c.sigBytes=e;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();(function(){var c=f.CryptoJS,b=c.lib,a=b.WordArray,e=b.Hasher,d=[];b=c.algo.SHA1=e.extend({_doReset:function(){this._hash=
new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,e=c[0],f=c[1],g=c[2],h=c[3],k=c[4],A=0;80>A;A++){if(16>A)d[A]=a[b+A]|0;else{var t=d[A-3]^d[A-8]^d[A-14]^d[A-16];d[A]=t<<1|t>>>31}t=(e<<5|e>>>27)+k+d[A];t=20>A?t+((f&g|~f&h)+1518500249):40>A?t+((f^g^h)+1859775393):60>A?t+((f&g|f&h|g&h)-1894007588):t+((f^g^h)-899497514);k=h;h=g;g=f<<30|f>>>2;f=e;e=t}c[0]=c[0]+e|0;c[1]=c[1]+f|0;c[2]=c[2]+g|0;c[3]=c[3]+h|0;c[4]=c[4]+k|0},_doFinalize:function(){var a=
this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296);b[(d+64>>>9<<4)+15]=c;a.sigBytes=4*b.length;this._process();return this._hash},clone:function(){var a=e.clone.call(this);a._hash=this._hash.clone();return a}});c.SHA1=e._createHelper(b);c.HmacSHA1=e._createHmacHelper(b)})();(function(c){var b=f.CryptoJS,a=b.lib,e=a.WordArray,d=a.Hasher;a=b.algo;var g=[],k=[];(function(){function a(a){for(var b=c.sqrt(a),d=2;d<=b;d++)if(!(a%
d))return!1;return!0}function b(a){return 4294967296*(a-(a|0))|0}for(var d=2,e=0;64>e;)a(d)&&(8>e&&(g[e]=b(c.pow(d,.5))),k[e]=b(c.pow(d,1/3)),e++),d++})();var l=[];a=a.SHA256=d.extend({_doReset:function(){this._hash=new e.init(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],n=c[5],p=c[6],y=c[7],E=0;64>E;E++){if(16>E)l[E]=a[b+E]|0;else{var x=l[E-15],H=l[E-2];l[E]=((x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3)+l[E-7]+((H<<15|H>>>17)^(H<<13|H>>>19)^H>>>
10)+l[E-16]}x=y+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&n^~h&p)+k[E]+l[E];H=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f);y=p;p=n;n=h;h=g+x|0;g=f;f=e;e=d;d=x+H|0}c[0]=c[0]+d|0;c[1]=c[1]+e|0;c[2]=c[2]+f|0;c[3]=c[3]+g|0;c[4]=c[4]+h|0;c[5]=c[5]+n|0;c[6]=c[6]+p|0;c[7]=c[7]+y|0},_doFinalize:function(){var a=this._data,b=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;b[e>>>5]|=128<<24-e%32;b[(e+64>>>9<<4)+14]=c.floor(d/4294967296);b[(e+64>>>9<<4)+15]=d;a.sigBytes=4*b.length;this._process();
return this._hash},clone:function(){var a=d.clone.call(this);a._hash=this._hash.clone();return a}});b.SHA256=d._createHelper(a);b.HmacSHA256=d._createHmacHelper(a)})(Math);(function(){if("function"==typeof ArrayBuffer){var c=f.CryptoJS.lib.WordArray,b=c.init;(c.init=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));if(a instanceof Int8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||
a instanceof Float64Array)a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);if(a instanceof Uint8Array){for(var c=a.byteLength,d=[],e=0;e<c;e++)d[e>>>2]|=a[e]<<24-e%4*8;b.call(this,d,c)}else b.apply(this,arguments)}).prototype=c}})();f.s3=f.s3||{};f.s3.util=f.s3.util||function(){return{ALGORITHM_PARAM_NAME:"x-amz-algorithm",AWS_PARAM_PREFIX:"x-amz-meta-",CREDENTIAL_PARAM_NAME:"x-amz-credential",DATE_PARAM_NAME:"x-amz-date",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",
SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",V4_ALGORITHM_PARAM_VALUE:"AWS4-HMAC-SHA256",V4_SIGNATURE_PARAM_NAME:"x-amz-signature",CASE_SENSITIVE_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNSIGNABLE_REST_HEADER_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNPREFIXED_PARAM_NAMES:"Cache-Control Content-Disposition Content-Encoding Content-MD5 x-amz-server-side-encryption x-amz-server-side-encryption-aws-kms-key-id x-amz-server-side-encryption-customer-algorithm x-amz-server-side-encryption-customer-key x-amz-server-side-encryption-customer-key-MD5".split(" "),
getBucket:function(c){var b;f.each([/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],function(a,e){if(a=e.exec(c))return b=a[1],!1});return b},_getPrefixedParamName:function(c){return 0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,c)?c:f.s3.util.AWS_PARAM_PREFIX+c},getPolicy:function(c){var b={},a=[],e=c.bucket,d=c.date,g=c.clockDrift,k=c.key,l=c.accessKey,n=c.acl,p=
c.type,r=c.expectedStatus,w=c.sessionToken,u=c.params,A=f.s3.util.getSuccessRedirectAbsoluteUrl(c.successRedirectUrl),t=c.minFileSize,z=c.maxFileSize,B=c.reducedRedundancy,D=c.region,y=c.serverSideEncryption;c=c.signatureVersion;b.expiration=f.s3.util.getPolicyExpirationDate(d,g);a.push({acl:n});a.push({bucket:e});p&&a.push({"Content-Type":p});r&&a.push({success_action_status:r.toString()});A&&a.push({success_action_redirect:A});B&&(a.push({}),a[a.length-1][f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=
f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);w&&(a.push({}),a[a.length-1][f.s3.util.SESSION_TOKEN_PARAM_NAME]=w);y&&(a.push({}),a[a.length-1][f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);2===c?a.push({key:k}):4===c&&(a.push({}),a[a.length-1][f.s3.util.ALGORITHM_PARAM_NAME]=f.s3.util.V4_ALGORITHM_PARAM_VALUE,a.push({}),a[a.length-1].key=k,a.push({}),a[a.length-1][f.s3.util.CREDENTIAL_PARAM_NAME]=f.s3.util.getV4CredentialsString({date:d,key:l,region:D}),a.push({}),
a[a.length-1][f.s3.util.DATE_PARAM_NAME]=f.s3.util.getV4PolicyDate(d,g));f.each(u,function(b,c){b=f.s3.util._getPrefixedParamName(b);var d={};0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,b)?d[b]=c:d[b]=encodeURIComponent(c);a.push(d)});b.conditions=a;f.s3.util.enforceSizeLimits(b,t,z);return b},refreshPolicyCredentials:function(c,b){var a=!1;f.each(c.conditions,function(c,d){f.each(d,function(c,e){c===f.s3.util.SESSION_TOKEN_PARAM_NAME&&(d[c]=b,a=!0)})});a||(c.conditions.push({}),c.conditions[c.conditions.length-
1][f.s3.util.SESSION_TOKEN_PARAM_NAME]=b)},generateAwsParams:function(c,b){var a={},e=c.params,d=new f.Promise,g=c.sessionToken,k=c.clockDrift,l=c.type,n=c.key,p=c.accessKey,r=c.acl,w=c.expectedStatus,u=f.s3.util.getSuccessRedirectAbsoluteUrl(c.successRedirectUrl),A=c.reducedRedundancy,t=c.region,z=c.serverSideEncryption,B=c.signatureVersion,D=new Date,y=c.log;c.date=D;var E=f.s3.util.getPolicy(c);a.key=n;l&&(a["Content-Type"]=l);w&&(a.success_action_status=w);u&&(a.success_action_redirect=u);A&&
(a[f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);z&&(a[f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);g&&(a[f.s3.util.SESSION_TOKEN_PARAM_NAME]=g);a.acl=r;f.each(e,function(b,c){b=f.s3.util._getPrefixedParamName(b);0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,b)?a[b]=c:a[b]=encodeURIComponent(c)});2===B?a.AWSAccessKeyId=p:4===B&&(a[f.s3.util.ALGORITHM_PARAM_NAME]=f.s3.util.V4_ALGORITHM_PARAM_VALUE,a[f.s3.util.CREDENTIAL_PARAM_NAME]=
f.s3.util.getV4CredentialsString({date:D,key:p,region:t}),a[f.s3.util.DATE_PARAM_NAME]=f.s3.util.getV4PolicyDate(D,k));b(E).then(function(b,e,g){a.policy=b.policy;2===c.signatureVersion?(a.signature=b.signature,e&&(a.AWSAccessKeyId=e)):4===c.signatureVersion&&(a[f.s3.util.V4_SIGNATURE_PARAM_NAME]=b.signature);g&&(a[f.s3.util.SESSION_TOKEN_PARAM_NAME]=g);d.success(a)},function(a){a=a||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.";y("Policy signing failed.  "+
a,"error");d.failure(a)});return d},enforceSizeLimits:function(c,b,a){(0<b||0<a)&&c.conditions.push(["content-length-range",(0>b?0:b).toString(),(0>=a?9007199254740992:a).toString()])},getPolicyExpirationDate:function(c,b){c=new Date(c.getTime()+b);return f.s3.util.getPolicyDate(c,5)},getCredentialsDate:function(c){return c.getUTCFullYear()+""+("0"+(c.getUTCMonth()+1)).slice(-2)+("0"+c.getUTCDate()).slice(-2)},getPolicyDate:function(c,b){b=b||0;var a;c.setMinutes(c.getMinutes()+(b||0));if(Date.prototype.toISOString)return c.toISOString();
b=function(b){a=String(b);1===a.length&&(a="0"+a);return a};return c.getUTCFullYear()+"-"+b(c.getUTCMonth()+1)+"-"+b(c.getUTCDate())+"T"+b(c.getUTCHours())+":"+b(c.getUTCMinutes())+":"+b(c.getUTCSeconds())+"."+String((c.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(c){if(c=/bucket=(.+)&key=(.+)&etag=(.+)/.exec((c.contentDocument||c.contentWindow.document).location.search))return{bucket:c[1],key:c[2],etag:c[3].replace(/%22/g,"")}},getSuccessRedirectAbsoluteUrl:function(c){if(c){var b=
document.createElement("div");f.ie7()?(b.innerHTML="<a href='"+c+"'></a>",b=b.firstChild):(b=document.createElement("a"),b.href=c,b.href=b.href);return b.href}},getV4CredentialsString:function(c){return c.key+"/"+f.s3.util.getCredentialsDate(c.date)+"/"+c.region+"/s3/aws4_request"},getV4PolicyDate:function(c,b){c=new Date(c.getTime()+b);return f.s3.util.getCredentialsDate(c)+"T"+("0"+c.getUTCHours()).slice(-2)+("0"+c.getUTCMinutes()).slice(-2)+("0"+c.getUTCSeconds()).slice(-2)+"Z"},encodeQueryStringParam:function(c){c=
encodeURIComponent(c);c=c.replace(/[!'()]/g,escape);c=c.replace(/\*/g,"%2A");return c.replace(/%20/g,"+")},uriEscape:function(c){c=encodeURIComponent(c);c=c.replace(/[^A-Za-z0-9_.~\-%]+/g,escape);return c=c.replace(/[*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(c){var b=[];f.each(c.split("/"),function(a,c){b.push(f.s3.util.uriEscape(c))});return b.join("/")}}}();(function(){f.nonTraditionalBasePublicApi={setUploadSuccessParams:function(c,b){this._uploadSuccessParamsStore.set(c,
b)},setUploadSuccessEndpoint:function(c,b){this._uploadSuccessEndpointStore.set(c,b)}};f.nonTraditionalBasePrivateApi={_onComplete:function(c,b,a,e){var d=a.success?!0:!1,g=this,h=arguments,l=this._uploadSuccessEndpointStore.get(c),n=this._options.uploadSuccess.customHeaders,p=this._options.uploadSuccess.method,r=this._options.cors,w=new f.Promise,u=this._uploadSuccessParamsStore.get(c),A=this._paramsStore.get(c),t=function(b){delete g._failedSuccessRequestCallbacks[c];f.extend(a,b);f.FineUploaderBasic.prototype._onComplete.apply(g,
h);w.success(b)},z=function(d){var k=D;f.extend(a,d);a&&a.reset&&(k=null);k?g._failedSuccessRequestCallbacks[c]=k:delete g._failedSuccessRequestCallbacks[c];g._onAutoRetry(c,b,a,e,k)||(f.FineUploaderBasic.prototype._onComplete.apply(g,h),w.failure(d))};if(d&&l){var B=new f.UploadSuccessAjaxRequester({endpoint:l,method:p,customHeaders:n,cors:r,log:f.bind(this.log,this)});f.extend(u,g._getEndpointSpecificParams(c,a,e),!0);A&&f.extend(u,A,!0);var D=f.bind(function(){B.sendSuccessRequest(c,u).then(t,
z)},g);D();return w}return f.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(c){return f.FineUploaderBasic.prototype._manualRetry.call(this,c,this._failedSuccessRequestCallbacks[c])}}})();(function(){f.s3.FineUploaderBasic=function(c){var b={request:{accessKey:null,clockDrift:0},objectProperties:{acl:"private",bucket:f.bind(function(a){return f.s3.util.getBucket(this.getEndpoint(a))},this),host:f.bind(function(a){return/(?:http|https):\/\/(.+)(?:\/.+)?/.exec(this._endpointStore.get(a))[1]},
this),key:"uuid",reducedRedundancy:!1,region:"us-east-1",serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{customHeaders:{},endpoint:null,version:2},uploadSuccess:{endpoint:null,method:"POST",params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};f.extend(b,c,!0);this.setCredentials(b.credentials,!0)||(this._currentCredentials.accessKey=
b.request.accessKey);this._aclStore=this._createStore(b.objectProperties.acl);f.FineUploaderBasic.call(this,b);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint);this._failedSuccessRequestCallbacks={};this._cannedKeys={};this._cannedBuckets={};this._buckets={};this._hosts={}};f.extend(f.s3.FineUploaderBasic.prototype,f.basePublicApi);f.extend(f.s3.FineUploaderBasic.prototype,
f.basePrivateApi);f.extend(f.s3.FineUploaderBasic.prototype,f.nonTraditionalBasePublicApi);f.extend(f.s3.FineUploaderBasic.prototype,f.nonTraditionalBasePrivateApi);f.extend(f.s3.FineUploaderBasic.prototype,{getBucket:function(c){return null==this._cannedBuckets[c]?this._buckets[c]:this._cannedBuckets[c]},getKey:function(c){return null==this._cannedKeys[c]?this._handler.getThirdPartyFileId(c):this._cannedKeys[c]},reset:function(){f.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=
[];this._buckets={};this._hosts={}},setCredentials:function(c,b){if(c&&c.secretKey){if(c.accessKey)if(c.expiration)this._currentCredentials=f.extend({},c),f.isString(c.expiration)&&(this._currentCredentials.expiration=new Date(c.expiration));else throw new f.Error("Invalid credentials: no expiration");else throw new f.Error("Invalid credentials: no accessKey");return!0}if(b)this._currentCredentials={};else throw new f.Error("Invalid credentials parameter!");},setAcl:function(c,b){this._aclStore.set(c,
b)},_createUploadHandler:function(){var c=this,b={aclStore:this._aclStore,getBucket:f.bind(this._determineBucket,this),getHost:f.bind(this._determineHost,this),getKeyName:f.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,clockDrift:this._options.request.clockDrift,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};f.override(this._endpointStore,
function(a){return{get:function(b){b=a.get(b);return 0>b.indexOf("http")?"http://"+b:b}}});f.override(this._paramsStore,function(a){return{get:function(b){b=a.get(b);var c={};f.each(b,function(a,b){0>f.indexOf(f.s3.util.CASE_SENSITIVE_PARAM_NAMES,a)&&(a=a.toLowerCase());c[a]=f.isFunction(b)?b():b});return c}}});b.signature.credentialsProvider={get:function(){return c._currentCredentials},onExpired:function(){var a=new f.Promise,b=c._options.callbacks.onCredentialsExpired();f.isGenericPromise(b)?b.then(function(b){try{c.setCredentials(b),
a.success()}catch(g){c.log("Invalid credentials returned from onCredentialsExpired callback! ("+g.message+")","error"),a.failure("onCredentialsExpired did not return valid credentials.")}},function(b){c.log("onCredentialsExpired callback indicated failure! ("+b+")","error");a.failure("onCredentialsExpired callback failed.")}):(c.log("onCredentialsExpired callback did not return a promise!","error"),a.failure("Unexpected return value for onCredentialsExpired."));return a}};return f.FineUploaderBasic.prototype._createUploadHandler.call(this,
b,"s3")},_determineObjectPropertyValue:function(c,b){var a=this._options.objectProperties[b],e=new f.Promise,d=this;f.isFunction(a)?(a=a(c),f.isGenericPromise(a)?e=a:e.success(a)):f.isString(a)&&e.success(a);e.then(function(a){d["_"+b+"s"][c]=a},function(a){f.log("Problem determining "+b+" for ID "+c+" ("+a+")","error")});return e},_determineBucket:function(c){return this._determineObjectPropertyValue(c,"bucket")},_determineHost:function(c){return this._determineObjectPropertyValue(c,"host")},_determineKeyName:function(c,
b){var a=new f.Promise,e=this._options.objectProperties.key,d=f.getExtension(b),g=a.failure,k=function(b,c){void 0!==c&&(b+="."+c);a.success(b)};switch(e){case "uuid":k(this.getUuid(c),d);break;case "filename":k(b);break;default:f.isFunction(e)?this._handleKeynameFunction(e,c,k,g):(this.log(e+" is not a valid value for the s3.keyname option!","error"),g())}return a},_handleKeynameFunction:function(c,b,a,e){var d=this,g=function(b){a(b)},h=function(a){d.log(f.format("Failed to retrieve key name for {}.  Reason: {}",
b,a||"null"),"error");e(a)};c=c.call(this,b);f.isGenericPromise(c)?c.then(g,h):null==c?h():a(c)},_getEndpointSpecificParams:function(c,b,a){c={key:this.getKey(c),uuid:this.getUuid(c),name:this.getName(c),bucket:this.getBucket(c)};a&&a.getResponseHeader("ETag")?c.etag=a.getResponseHeader("ETag"):b.etag&&(c.etag=b.etag);return c},_onSubmitDelete:function(c,b){var a={key:this.getKey(c),bucket:this.getBucket(c)};return f.FineUploaderBasic.prototype._onSubmitDelete.call(this,c,b,a)},_addCannedFile:function(c){if(null==
c.s3Key)throw new f.Error("Did not find s3Key property in server session response.  This is required!");var b=f.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[b]=c.s3Key;this._cannedBuckets[b]=c.s3Bucket;return b}})})();window.Uint8ClampedArray||(window.Uint8ClampedArray=function(){});f.s3.RequestSigner=function(c){function b(a,b,c){var e=new f.Promise,g="POST",h=[],l="",r=new Date,u,t,w=function(a){var c,d=[];f.each(a.headers,function(a){h.push(a)});h.sort();f.each(h,
function(b,e){0>f.indexOf(f.s3.util.UNSIGNABLE_REST_HEADER_NAMES,e)?l+=e.toLowerCase()+":"+a.headers[e].trim()+"\n":"Content-MD5"===e?c=a.headers[e]:d.unshift(b)});f.each(d,function(a,b){h.splice(b,1)});u={bucket:a.bucket,contentMd5:c,contentType:a.contentType,date:r,drift:k.signatureSpec.drift,endOfUrl:m,hashedContent:a.hashedContent,headerNames:h,headersStr:l,method:g};t=2===b?n.getStringToSign(u):p.getStringToSign(u);return{date:r,endOfUrl:m,signedHeaders:4===b?p.getSignedHeaders(u.headerNames):
null,toSign:4===b?t.hashed:t,toSignRaw:4===b?t.raw:t}};switch(c.type){case d.REQUEST_TYPE.MULTIPART_ABORT:g="DELETE";var m=f.format("uploadId={}",c.uploadId);break;case d.REQUEST_TYPE.MULTIPART_INITIATE:m="uploads";break;case d.REQUEST_TYPE.MULTIPART_COMPLETE:m=f.format("uploadId={}",c.uploadId);break;case d.REQUEST_TYPE.MULTIPART_UPLOAD:g="PUT",m=f.format("partNumber={}&uploadId={}",c.partNum,c.uploadId)}m=c.key+"?"+m;4===b?p.getEncodedHashedPayload(c.content).then(function(a){c.headers["x-amz-content-sha256"]=
a;c.headers.Host=c.host;c.headers["x-amz-date"]=f.s3.util.getV4PolicyDate(r,k.signatureSpec.drift);c.hashedContent=a;e.success(w(c))},function(a){e.failure(a)}):e.success(w(c));return e}function a(a,b,c,d,g){b.signatureConstructor?(g&&(d=b.signatureConstructor.getHeaders(),d[f.s3.util.SESSION_TOKEN_PARAM_NAME]=g,b.signatureConstructor.withHeaders(d)),b.signatureConstructor.getToSign(a).then(function(a){var d=b.signatureConstructor;a=a.stringToSign;4===k.signatureSpec.version?p.signApiRequest(d,a,
c):n.signApiRequest(d,a,c)},function(a){c.failure(a)})):(g&&f.s3.util.refreshPolicyCredentials(b,g),e(b,c,d,g))}function e(a,b,c,d){4===k.signatureSpec.version?p.signPolicy(a,b,c,d):n.signPolicy(a,b,c,d)}var d=this,g={},k={expectingPolicy:!1,method:"POST",signatureSpec:{drift:0,credentialsProvider:{},endpoint:null,customHeaders:{},version:2},maxConnections:3,endpointStore:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){}},l=function(a,b,c){var d=a.getHeaders();d.Authorization=
4===k.signatureSpec.version?f.s3.util.V4_ALGORITHM_PARAM_VALUE+" Credential="+k.signatureSpec.credentialsProvider.get().accessKey+"/"+f.s3.util.getCredentialsDate(a.getRequestDate())+"/"+k.signatureSpec.region+"/s3/aws4_request,SignedHeaders="+a.getSignedHeaders()+",Signature="+b:"AWS "+k.signatureSpec.credentialsProvider.get().accessKey+":"+b;c.success(d,a.getEndOfUrl())},n={getStringToSign:function(a){return f.format("{}\n{}\n{}\n\n{}/{}/{}",a.method,a.contentMd5||"",a.contentType||"",a.headersStr||
"\n",a.bucket,a.endOfUrl)},signApiRequest:function(a,b,c){b=f.CryptoJS.enc.Utf8.parse(b);b=f.CryptoJS.HmacSHA1(b,r.get().secretKey);b=f.CryptoJS.enc.Base64.stringify(b);l(a,b,c)},signPolicy:function(a,b,c,d){a=JSON.stringify(a);a=f.CryptoJS.enc.Utf8.parse(a);a=f.CryptoJS.enc.Base64.stringify(a);var e=f.CryptoJS.HmacSHA1(a,r.get().secretKey);e=f.CryptoJS.enc.Base64.stringify(e);b.success({policy:a,signature:e},c,d)}},p={getCanonicalQueryString:function(a){var b=a.indexOf("?"),c="";if(0<=b){var d={};
a=a.substr(b+1).split("&");f.each(a,function(a,b){a=b.split("=");b=a[1];null==b&&(b="");d[encodeURIComponent(a[0])]=encodeURIComponent(b)});var e=Object.keys(d).sort();e.forEach(function(a,b){c+=a+"="+d[a];b<e.length-1&&(c+="&")})}return c},getCanonicalRequest:function(a){return f.format("{}\n{}\n{}\n{}\n{}\n{}",a.method,p.getCanonicalUri(a.endOfUrl),p.getCanonicalQueryString(a.endOfUrl),a.headersStr||"\n",p.getSignedHeaders(a.headerNames),a.hashedContent)},getCanonicalUri:function(a){var b=a,c=a.indexOf("?");
0<c&&(b=a.substr(0,c));return"/"+b},getEncodedHashedPayload:function(a){var b=new f.Promise;if(f.isBlob(a)){var c=new FileReader;c.onloadend=function(a){a.target.readyState===FileReader.DONE&&(a.target.error?b.failure(a.target.error):(a=f.CryptoJS.lib.WordArray.create(a.target.result),b.success(f.CryptoJS.SHA256(a).toString())))};c.readAsArrayBuffer(a)}else b.success(f.CryptoJS.SHA256(a||"").toString());return b},getScope:function(a,b){return f.s3.util.getCredentialsDate(a)+"/"+b+"/s3/aws4_request"},
getStringToSign:function(a){var b=p.getCanonicalRequest(a),c=f.s3.util.getV4PolicyDate(a.date,a.drift),d=f.CryptoJS.SHA256(b).toString();a=p.getScope(a.date,k.signatureSpec.region);return{hashed:f.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,d),raw:f.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,b)}},getSignedHeaders:function(a){var b="";a.forEach(function(c,d){b+=c.toLowerCase();d<a.length-1&&(b+=";")});return b},signApiRequest:function(a,b,c){var d=r.get().secretKey,e=/.+\n.+\n(\d+)\/(.+)\/s3\/.+\n(.+)/.exec(b);
d=f.CryptoJS.HmacSHA256(e[1],"AWS4"+d);e=f.CryptoJS.HmacSHA256(e[2],d);e=f.CryptoJS.HmacSHA256("s3",e);e=f.CryptoJS.HmacSHA256("aws4_request",e);l(a,f.CryptoJS.HmacSHA256(b,e),c)},signPolicy:function(a,b,c,d){var e=JSON.stringify(a);e=f.CryptoJS.enc.Utf8.parse(e);e=f.CryptoJS.enc.Base64.stringify(e);var g=r.get().secretKey,h=function(){var b=null;f.each(a.conditions,function(a,c){if(a=c["x-amz-credential"])return b=a,!1});return b}();h=/.+\/(.+)\/(.+)\/s3\/aws4_request/.exec(h);g=f.CryptoJS.HmacSHA256(h[1],
"AWS4"+g);g=f.CryptoJS.HmacSHA256(h[2],g);g=f.CryptoJS.HmacSHA256("s3",g);g=f.CryptoJS.HmacSHA256("aws4_request",g);b.success({policy:e,signature:f.CryptoJS.HmacSHA256(e,g).toString()},c,d)}};f.extend(k,c,!0);var r=k.signatureSpec.credentialsProvider;var w=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",method:k.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return k.signatureSpec.endpoint}},paramsStore:k.paramsStore,maxConnections:k.maxConnections,
customHeaders:k.signatureSpec.customHeaders,log:k.log,onComplete:function(a,b,c){b=b.responseText;var d=g[a],e=d.promise;d=d.signatureConstructor;delete g[a];if(b)try{var h=f.parseJson(b)}catch(E){k.log("Error attempting to parse signature response: "+E,"error")}if(h&&h.error){c=!0;var n=h.error}else h&&h.invalid?(c=!0,n="Invalid policy document or request headers!"):h?k.expectingPolicy&&!h.policy?(c=!0,n="Response does not include the base64 encoded policy!"):h.signature||(c=!0,n="Response does not include the signature!"):
(c=!0,n="Received an empty or invalid response from the server!");c?(n&&k.log(n,"error"),e.failure(n)):d?l(d,h.signature,e):e.success(h)},cors:k.cors}));f.extend(this,{getSignature:function(b,c){var d=c,e=c.signatureConstructor,h=new f.Promise,l;4===k.signatureSpec.version&&(l={v4:!0});r.get().secretKey&&f.CryptoJS?r.get().expiration.getTime()>Date.now()?a(b,c,h):r.onExpired().then(function(){a(b,c,h,r.get().accessKey,r.get().sessionToken)},function(a){k.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ",
"error");h.failure("Unable to sign request - expired credentials.")}):(k.log("Submitting S3 signature request for "+b),e?e.getToSign(b).then(function(a){d={headers:a.stringToSignRaw};w.initTransport(b).withParams(d).withQueryParams(l).send()},function(a){k.log("Failed to construct signature. ","error");h.failure("Failed to construct signature.")}):w.initTransport(b).withParams(d).withQueryParams(l).send(),g[b]={promise:h,signatureConstructor:e});return h},constructStringToSign:function(a,c,d,e){var g=
{},h,l,n,p,t;return{withHeaders:function(a){g=a;return this},withUploadId:function(a){h=a;return this},withContent:function(a){l=a;return this},withContentType:function(a){n=a;return this},withPartNum:function(a){p=a;return this},getToSign:function(u){var m=r.get().sessionToken,q=new f.Promise,w=new Date(Date.now()+k.signatureSpec.drift);g["x-amz-date"]=w.toUTCString();m&&(g[f.s3.util.SESSION_TOKEN_PARAM_NAME]=m);b(u,k.signatureSpec.version,{bucket:c,content:l,contentType:n,headers:g,host:d,key:e,
partNum:p,type:a,uploadId:h}).then(function(a){t=a;q.success({headers:function(){n&&(g["Content-Type"]=n);delete g.Host;return g}(),date:t.date,endOfUrl:t.endOfUrl,signedHeaders:t.signedHeaders,stringToSign:t.toSign,stringToSignRaw:t.toSignRaw})},function(a){q.failure(a)});return q},getHeaders:function(){return f.extend({},g)},getEndOfUrl:function(){return t&&t.endOfUrl},getRequestDate:function(){return t&&t.date},getSignedHeaders:function(){return t&&t.signedHeaders}}}})};f.s3.RequestSigner.prototype.REQUEST_TYPE=
{MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};f.UploadSuccessAjaxRequester=function(c){var b=[],a={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){}};f.extend(a,c);var e=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",method:a.method,endpointStore:{get:function(){return a.endpoint}},paramsStore:a.paramsStore,
maxConnections:a.maxConnections,customHeaders:a.customHeaders,log:a.log,onComplete:function(c,e,h){var d=b[c];e=e.responseText;var g={success:!0},k={success:!1};delete b[c];a.log(f.format("Received the following response body to an upload success request for id {}: {}",c,e));try{var r=f.parseJson(e);h||r&&(r.error||!1===r.success)?(a.log("Upload success request was rejected by the server.","error"),d.failure(f.extend(r,k))):(a.log("Upload success was acknowledged by the server."),d.success(f.extend(r,
g)))}catch(w){h?(a.log(f.format("Your server indicated failure in its upload success request response for id {}!",c),"error"),d.failure(k)):(a.log("Upload success was acknowledged by the server."),d.success(g))}},cors:a.cors}));f.extend(this,{sendSuccessRequest:function(c,g){var d=new f.Promise;a.log("Submitting upload success request/notification for "+c);e.initTransport(c).withParams(g).send();return b[c]=d}})};f.s3.InitiateMultipartAjaxRequester=function(c){function b(a){var b=e.getBucket(a),c=
e.getHost(a),g={},h=new f.Promise,k=e.getKey(a);g["x-amz-acl"]=e.aclStore.get(a);e.reducedRedundancy&&(g[f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);e.serverSideEncryption&&(g[f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);g[f.s3.util.AWS_PARAM_PREFIX+e.filenameParam]=encodeURIComponent(e.getName(a));f.each(e.paramsStore.get(a),function(a,b){0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,a)?g[a]=b:g[f.s3.util.AWS_PARAM_PREFIX+
a]=encodeURIComponent(b)});b=d.constructStringToSign(d.REQUEST_TYPE.MULTIPART_INITIATE,b,c,k).withContentType(e.getContentType(a)).withHeaders(g);d.getSignature(a,{signatureConstructor:b}).then(h.success,h.failure);return h}var a={},e={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(a){},getBucket:function(a){},getHost:function(a){},getKey:function(a){},
getName:function(a){},log:function(a,b){}};f.extend(e,c);var d=new f.s3.RequestSigner({endpointStore:e.endpointStore,signatureSpec:e.signatureSpec,cors:e.cors,log:e.log});var g=f.extend(this,new f.AjaxRequester({method:e.method,contentType:null,endpointStore:e.endpointStore,maxConnections:e.maxConnections,allowXRequestedWithAndCacheControl:!1,log:e.log,onComplete:function(b,c,d){var g=a[b],h=(new DOMParser).parseFromString(c.responseText,"application/xml"),k;delete a[b];if(d){var l=c.status;d=h.getElementsByTagName("Message");
if(0<d.length)var n=d[0].textContent}else d=h.getElementsByTagName("UploadId"),0<d.length?k=d[0].textContent:n="Upload ID missing from request";void 0===k?(n?e.log(f.format("Specific problem detected initiating multipart upload request for {}: '{}'.",b,n),"error"):e.log(f.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",b,l),"error"),g.failure("Problem initiating upload request.",c)):(e.log(f.format("Initiate multipart upload request successful for {}.  Upload ID is {}",
b,k)),g.success(k,c))},successfulResponseCodes:{POST:[200]}}));f.extend(this,{send:function(c){var d=new f.Promise;b(c).then(function(b,f){e.log("Submitting S3 initiate multipart upload request for "+c);a[c]=d;g.initTransport(c).withPath(f).withHeaders(b).send()},d.failure);return d}})};f.s3.CompleteMultipartAjaxRequester=function(c){function b(a,b,c){var e=new f.Promise,h=d.getBucket(a),k=d.getHost(a);b=g.constructStringToSign(g.REQUEST_TYPE.MULTIPART_COMPLETE,h,k,d.getKey(a)).withUploadId(b).withContent(c).withContentType("application/xml; charset=UTF-8");
g.getSignature(a,{signatureConstructor:b}).then(e.success,e.failure);return e}function a(a){var b=document.implementation.createDocument(null,"CompleteMultipartUpload",null);a.sort(function(a,b){return a.part-b.part});f.each(a,function(a,c){var d=c.part,e=c.etag;c=b.createElement("Part");a=b.createElement("PartNumber");d=b.createTextNode(d);e=b.createTextNode(e);var g=b.createElement("ETag");g.appendChild(e);a.appendChild(d);c.appendChild(a);c.appendChild(g);f(b).children()[0].appendChild(c)});return(new XMLSerializer).serializeToString(b)}
var e={},d={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,b){}};f.extend(d,c);var g=new f.s3.RequestSigner({endpointStore:d.endpointStore,signatureSpec:d.signatureSpec,cors:d.cors,log:d.log});var k=f.extend(this,new f.AjaxRequester({method:d.method,contentType:"application/xml; charset=UTF-8",endpointStore:d.endpointStore,maxConnections:d.maxConnections,allowXRequestedWithAndCacheControl:!1,
log:d.log,onComplete:function(a,b,c){var g=e[a],h=new DOMParser,k=d.getBucket(a);d.getKey(a);var l=h.parseFromString(b.responseText,"application/xml");h=l.getElementsByTagName("Bucket");l=l.getElementsByTagName("Key");delete e[a];d.log(f.format("Complete response status {}, body = {}",b.status,b.responseText));c?d.log(f.format("Complete Multipart Upload request for {} failed with status {}.",a,b.status),"error"):h.length&&l.length?h[0].textContent!==k&&(c=!0,d.log(f.format("Wrong bucket in response to Complete Multipart Upload request for {}.",
a),"error")):(c=!0,d.log(f.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",a),"error"));c?g.failure("Problem combining the file parts!",b):g.success({},b)},successfulResponseCodes:{POST:[200]}}));f.extend(this,{send:function(c,g,h){var l=new f.Promise,n=a(h);b(c,g,n).then(function(a,b){d.log("Submitting S3 complete multipart upload request for "+c);e[c]=l;delete a["Content-Type"];k.initTransport(c).withPath(b).withHeaders(a).withPayload(n).send()},l.failure);
return l}})};f.s3.AbortMultipartAjaxRequester=function(c){function b(b,c){var d=new f.Promise,g=a.getBucket(b),h=a.getHost(b);c=e.constructStringToSign(e.REQUEST_TYPE.MULTIPART_ABORT,g,h,a.getKey(b)).withUploadId(c);e.getSignature(b,{signatureConstructor:c}).then(d.success,d.failure);return d}var a={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,b){}};f.extend(a,c);var e=new f.s3.RequestSigner({endpointStore:a.endpointStore,
signatureSpec:a.signatureSpec,cors:a.cors,log:a.log});var d=f.extend(this,new f.AjaxRequester({validMethods:["DELETE"],method:a.method,contentType:null,endpointStore:a.endpointStore,maxConnections:a.maxConnections,allowXRequestedWithAndCacheControl:!1,log:a.log,onComplete:function(b,c,d){var e=(new DOMParser).parseFromString(c.responseText,"application/xml"),g=e.getElementsByTagName("Error");a.log(f.format("Abort response status {}, body = {}",c.status,c.responseText));d?a.log(f.format("Abort Multipart Upload request for {} failed with status {}.",
b,c.status),"error"):g.length?(c=e.getElementsByTagName("Message")[0].textContent,a.log(f.format("Failed to Abort Multipart Upload request for {}.  Error: {}",b,c),"error")):a.log(f.format("Abort MPU request succeeded for file ID {}.",b))},successfulResponseCodes:{DELETE:[204]}}));f.extend(this,{send:function(c,e){b(c,e).then(function(b,e){a.log("Submitting S3 Abort multipart upload request for "+c);d.initTransport(c).withPath(e).withHeaders(b).send()})}})};f.s3.XhrUploadHandler=function(c,b){var a=
b.getName,e=b.log,d=c.clockDrift,g=c.getBucket,k=c.getHost,l=c.getKeyName,n=c.filenameParam,p=c.paramsStore,r=c.endpointStore,w=c.aclStore,u=c.objectProperties.reducedRedundancy,A=c.objectProperties.region,t=c.objectProperties.serverSideEncryption,z=c.validation,B=f.extend({region:A,drift:d},c.signature),D=this,y=c.signature.credentialsProvider,E={combine:function(a){var b=D._getPersistableData(a).uploadId,c=D._getPersistableData(a).etags,d=new f.Promise;x.completeMultipart.send(a,b,c).then(d.success,
function(b,c){d.failure(F.done(a,c).response,c)});return d},done:function(a,b,c){F.response.parse(a,b).success&&(b=b.getResponseHeader("ETag"),D._getPersistableData(a).etags||(D._getPersistableData(a).etags=[]),D._getPersistableData(a).etags.push({part:c+1,etag:b}))},initHeaders:function(a,b,c){var d=F.bucket.getName(a),e=F.host.getName(a),g=F.key.urlSafe(a),h=new f.Promise;c=x.restSignature.constructStringToSign(x.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,d,e,g).withPartNum(b+1).withContent(c).withUploadId(D._getPersistableData(a).uploadId);
x.restSignature.getSignature(a+"."+b,{signatureConstructor:c}).then(h.success,h.failure);return h},put:function(a,b){var d=D._createXhr(a,b),g=D._getChunkData(a,b),h=c.endpointStore.get(a),k=new f.Promise;E.initHeaders(a,b,g.blob).then(function(c,l){if(d._cancelled)e(f.format("Upload of item {}.{} cancelled. Upload will not start after successful signature request.",a,b)),k.failure({error:"Chunk upload cancelled"});else{l=h+"/"+l;D._registerProgressHandler(a,b,g.size);F.track(a,d,b).then(k.success,
k.failure);d.open("PUT",l,!0);var m=!1;f.each(c,function(a,b){"Content-Type"===a&&(m=!0);d.setRequestHeader(a,b)});m||d.setRequestHeader("Content-Type","");d.send(g.blob)}},function(){k.failure({error:"Problem signing the chunk!"},d)});return k},send:function(a,b){var c=new f.Promise;E.setup(a).then(function(){E.put(a,b).then(c.success,c.failure)},function(a,b){c.failure({error:a},b)});return c},setup:function(a){var b=new f.Promise,c=D._getPersistableData(a).uploadId,d=new f.Promise;c?c instanceof
f.Promise?c.then(function(a){b.success(a)}):b.success(c):(D._getPersistableData(a).uploadId=d,x.initiateMultipart.send(a).then(function(c){D._getPersistableData(a).uploadId=c;d.success(c);b.success(c)},function(c,e){D._getPersistableData(a).uploadId=null;b.failure(c,e);d.failure(c,e)}));return b}},x={abortMultipart:new f.s3.AbortMultipartAjaxRequester({endpointStore:r,signatureSpec:B,cors:c.cors,log:e,getBucket:function(a){return F.bucket.getName(a)},getHost:function(a){return F.host.getName(a)},
getKey:function(a){return F.key.urlSafe(a)}}),completeMultipart:new f.s3.CompleteMultipartAjaxRequester({endpointStore:r,signatureSpec:B,cors:c.cors,log:e,getBucket:function(a){return F.bucket.getName(a)},getHost:function(a){return F.host.getName(a)},getKey:function(a){return F.key.urlSafe(a)}}),initiateMultipart:new f.s3.InitiateMultipartAjaxRequester({filenameParam:n,endpointStore:r,paramsStore:p,signatureSpec:B,aclStore:w,reducedRedundancy:u,serverSideEncryption:t,cors:c.cors,log:e,getContentType:function(a){return D._getMimeType(a)},
getBucket:function(a){return F.bucket.getName(a)},getHost:function(a){return F.host.getName(a)},getKey:function(a){return F.key.urlSafe(a)},getName:function(b){return a(b)}}),policySignature:new f.s3.RequestSigner({expectingPolicy:!0,signatureSpec:B,cors:c.cors,log:e}),restSignature:new f.s3.RequestSigner({endpointStore:r,signatureSpec:B,cors:c.cors,log:e})},H={initParams:function(b){var c=p.get(b);c[n]=a(b);return f.s3.util.generateAwsParams({endpoint:r.get(b),clockDrift:d,params:c,type:D._getMimeType(b),
bucket:F.bucket.getName(b),key:D.getThirdPartyFileId(b),accessKey:y.get().accessKey,sessionToken:y.get().sessionToken,acl:w.get(b),expectedStatus:200,minFileSize:z.minSizeLimit,maxFileSize:z.maxSizeLimit,reducedRedundancy:u,region:A,serverSideEncryption:t,signatureVersion:B.version,log:e},f.bind(x.policySignature.getSignature,this,b))},send:function(a){var b=new f.Promise,c=D._createXhr(a),d=D.getFile(a);D._registerProgressHandler(a);F.track(a,c).then(b.success,b.failure);H.setup(a,c,d).then(function(b){e("Sending upload request for "+
a);c.send(b)},b.failure);return b},setup:function(a,b,c){var d=new FormData,e=r.get(a),g=new f.Promise;H.initParams(a).then(function(a){b.open("POST",e,!0);f.obj2FormData(a,d);d.append("file",c);g.success(d)},function(a){g.failure({error:a})});return g}},F={bucket:{promise:function(a){var b=new f.Promise,c=D._getFileState(a).bucket;c?b.success(c):g(a).then(function(c){D._getFileState(a).bucket=c;b.success(c)},b.failure);return b},getName:function(a){return D._getFileState(a).bucket}},host:{promise:function(a){var b=
new f.Promise,c=D._getFileState(a).host;c?b.success(c):k(a).then(function(c){D._getFileState(a).host=c;b.success(c)},b.failure);return b},getName:function(a){return D._getFileState(a).host}},done:function(a,b){a=F.response.parse(a,b);(b=!0!==a.success)&&F.response.shouldReset(a.code)&&(e("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),a.reset=!0);return{success:!b,response:a}},key:{promise:function(b){var c=new f.Promise,d=D.getThirdPartyFileId(b);
null==d?(D._setThirdPartyFileId(b,c),l(b,a(b)).then(function(a){D._setThirdPartyFileId(b,a);c.success(a)},function(a){D._setThirdPartyFileId(b,null);c.failure(a)})):f.isGenericPromise(d)?d.then(c.success,c.failure):c.success(d);return c},urlSafe:function(a){a=D.getThirdPartyFileId(a);return f.s3.util.uriEscapePath(a)}},response:{parse:function(a,b){a={};var c;try{if(e(f.format("Received response status {} with body: {}",b.status,b.responseText)),200===b.status)a.success=!0;else if(c=F.response.parseError(b.responseText))a.error=
c.message,a.code=c.code}catch(I){e("Error when attempting to parse xhr response text ("+I.message+")","error")}return a},parseError:function(a){var b=(new DOMParser).parseFromString(a,"application/xml");a={};if(b.getElementsByTagName("Error").length){var c=b.getElementsByTagName("Code");b=b.getElementsByTagName("Message");b.length&&(a.message=b[0].textContent);c.length&&(a.code=c[0].textContent);return a}},shouldReset:function(a){return"EntityTooSmall"===a||"InvalidPart"===a||"InvalidPartOrder"===
a||"NoSuchUpload"===a}},start:function(a,b){var c=new f.Promise;F.key.promise(a).then(function(){F.bucket.promise(a).then(function(){F.host.promise(a).then(function(){null==b?H.send(a).then(c.success,c.failure):E.send(a,b).then(c.success,c.failure)})})},function(a){c.failure({error:a})});return c},track:function(a,b,c){var d=new f.Promise;b.onreadystatechange=function(){if(4===b.readyState){null!=c&&E.done(a,b,c);var e=F.done(a,b);d[e.success?"success":"failure"](e.response,b)}};return d}};f.extend(this,
{uploadChunk:F.start,uploadFile:F.start});f.extend(this,new f.XhrUploadHandler({options:f.extend({namespace:"s3"},c),proxy:f.extend({getEndpoint:c.endpointStore.get},b)}));f.override(this,function(a){return{expunge:function(b){var c=D._getPersistableData(b)&&D._getPersistableData(b).uploadId,d=D._maybeDeletePersistedChunkData(b);void 0!==c&&d&&x.abortMultipart.send(b,c);a.expunge(b)},finalizeChunks:function(a){return E.combine(a)},_getLocalStorageId:function(b){var c=a._getLocalStorageId(b);b=F.bucket.getName(b);
return c+"-"+b}}})};f.s3.FormUploadHandler=function(c,b){function a(a){var b=t.get(a);b[A]=n(a);return f.s3.util.generateAwsParams({endpoint:z.get(a),clockDrift:k,params:b,bucket:g._getFileState(a).bucket,key:g.getThirdPartyFileId(a),accessKey:m.get().accessKey,sessionToken:m.get().sessionToken,acl:B.get(a),minFileSize:x.minSizeLimit,maxFileSize:x.maxSizeLimit,successRedirectUrl:F,reducedRedundancy:D,region:y,serverSideEncryption:E,signatureVersion:H.version,log:r},f.bind(q.getSignature,this,a))}
function e(b,d){var e=new f.Promise,h=c.endpointStore.get(b);n(b);a(b).then(function(a){a=g._initFormForUpload({method:"POST",endpoint:h,params:a,paramsInBody:!0,targetName:d.name});e.success(a)},function(a){e.failure(a);g._detachLoadEvent(b);d&&f(d).remove()});return e}function d(a){var b=g._createIframe(a),d=g.getInput(a),h=new f.Promise;e(a,b).then(function(e){e.appendChild(d);g._attachLoadEvent(b,function(d){r("iframe loaded");if(d)!1===d.success&&(r("Amazon likely rejected the upload request",
"error"),h.failure(d));else{var e=d={};a:{c.endpointStore.get(a);var k=g._getFileState(a).bucket;try{var l=f.s3.util.parseIframeResponse(b);if(l.bucket===k&&l.key===f.s3.util.encodeQueryStringParam(g.getThirdPartyFileId(a))){var m=!0;break a}r("Response from AWS included an unexpected bucket or key name.","error")}catch(Z){r("Error when attempting to parse form upload response ("+Z.message+")","error")}m=!1}e.success=m;!1===d.success?(r("A success response was received by Amazon, but it was invalid in some way.",
"error"),h.failure(d)):(f.extend(d,f.s3.util.parseIframeResponse(b)),h.success(d))}g._detachLoadEvent(a);b&&f(b).remove()});r("Sending upload request for "+a);e.submit();f(e).remove()},h.failure);return h}var g=this,k=c.clockDrift,l=b.onUuidChanged,n=b.getName,p=b.getUuid,r=b.log,w=c.getBucket,u=c.getKeyName,A=c.filenameParam,t=c.paramsStore,z=c.endpointStore,B=c.aclStore,D=c.objectProperties.reducedRedundancy,y=c.objectProperties.region,E=c.objectProperties.serverSideEncryption,x=c.validation,H=
c.signature,F=c.iframeSupport.localBlankPagePath,m=c.signature.credentialsProvider,q=new f.s3.RequestSigner({signatureSpec:H,cors:c.cors,log:r});if(void 0===F)throw Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");f.extend(this,new f.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:c.onCancel,onUuidChanged:l,getName:n,getUuid:p,log:r}}));f.extend(this,{uploadFile:function(a){var b=n(a),c=new f.Promise;g.getThirdPartyFileId(a)?
g._getFileState(a).bucket?d(a).then(c.success,c.failure):w(a).then(function(b){g._getFileState(a).bucket=b;d(a).then(c.success,c.failure)}):u(a,b).then(function(b){w(a).then(function(e){g._getFileState(a).bucket=e;g._setThirdPartyFileId(a,b);d(a).then(c.success,c.failure)},function(a){c.failure({error:a})})},function(a){c.failure({error:a})});return c}})};f.DragAndDrop=function(c){function b(c){var d=new f.Promise;c.isFile?c.file(function(a){var b=c.fullPath,e=b.indexOf(c.name);b=b.substr(0,e);"/"===
b.charAt(0)&&(b=b.substr(1));a.qqPath=b;l.push(a);d.success()},function(a){p.callbacks.dropLog("Problem parsing '"+c.fullPath+"'.  FileError code "+a.code+".","error");d.failure()}):c.isDirectory&&a(c).then(function(a){var c=a.length;f.each(a,function(a,e){b(e).done(function(){--c;0===c&&d.success()})});a.length||d.success()},function(a){p.callbacks.dropLog("Problem parsing '"+c.fullPath+"'.  FileError code "+a.code+".","error");d.failure()});return d}function a(b,c,d,e){var g=e||new f.Promise,h=
c||b.createReader();h.readEntries(function(c){var e=d?d.concat(c):c;c.length?setTimeout(function(){a(b,h,e,g)},0):g.success(e)},g.failure);return g}function e(a,c){var d=[],e=new f.Promise;p.callbacks.processingDroppedFiles();c.dropDisabled(!0);1<a.files.length&&!p.allowMultipleItems?(p.callbacks.processingDroppedFilesComplete([]),p.callbacks.dropError("tooManyFilesError",""),c.dropDisabled(!1),e.failure()):(l=[],f.isFolderDropSupported(a)?f.each(a.items,function(a,c){(a=c.webkitGetAsEntry())&&(a.isFile?
l.push(c.getAsFile()):d.push(b(a).done(function(){d.pop();0===d.length&&e.success()})))}):l=a.files,0===d.length&&e.success());return e}function d(a){var b=new f.UploadDropZone({HIDE_ZONES_EVENT_NAME:"qq-hidezones",element:a,onEnter:function(b){f(a).addClass(p.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(b){f(a).removeClass(p.classes.dropActive)},onDrop:function(a){e(a.dataTransfer,b).then(function(){var a=l,c=b,d=Array.prototype.slice.call(a);p.callbacks.dropLog("Grabbed "+
a.length+" dropped files.");c.dropDisabled(!1);p.callbacks.processingDroppedFilesComplete(d,c.getElement())},function(){p.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});n.addDisposer(function(){b.dispose()});f(a).hasAttribute("qq-hide-dropzone")&&f(a).hide();k.push(b);return b}function g(a){var b;f.each(a.dataTransfer.types,function(a,c){if("Files"===c)return b=!0,!1});return b}var k=[],l=[],n=new f.DisposeSupport;var p={dropZoneElements:[],allowMultipleItems:!0,
classes:{dropActive:null},callbacks:new f.DragAndDrop.callbacks};f.extend(p,c,!0);(function(){var a=p.dropZoneElements,b=function(){setTimeout(function(){f.each(a,function(a,b){f(b).hasAttribute("qq-hide-dropzone")&&f(b).hide();f(b).removeClass(p.classes.dropActive)})},10)};f.each(a,function(b,c){var e=d(c);a.length&&f.supportedFeatures.fileDrop&&n.attach(document,"dragenter",function(b){!e.dropDisabled()&&g(b)&&f.each(a,function(a,b){b instanceof HTMLElement&&f(b).hasAttribute("qq-hide-dropzone")&&
f(b).css({display:"block"})})})});n.attach(document,"dragleave",function(a){a=f.safari()?0>a.x||0>a.y:0===a.x&&0===a.y;a&&b()});n.attach(f(document).children()[0],"mouseenter",function(a){b()});n.attach(document,"drop",function(a){g(a)&&(a.preventDefault(),b());a.preventDefault&&a.preventDefault()});n.attach(document,"qq-hidezones",b)})();f.extend(this,{setupExtraDropzone:function(a){p.dropZoneElements.push(a);d(a)},removeDropzone:function(a){var b,c=p.dropZoneElements;for(b in c)if(c[b]===a)return c.splice(b,
1)},dispose:function(){n.dispose();f.each(k,function(a,b){b.dispose()})}})};f.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(c,b){},dropError:function(c,b){f.log("Drag & drop error code '"+c+" with these specifics: '"+b+"'","error")},dropLog:function(c,b){f.log(c,b)}}};f.UploadDropZone=function(c){function b(){return f.safari()||f.firefox()&&f.windows()}function a(a){if(!f.supportedFeatures.fileDrop)return!1;var b=a.dataTransfer,
c=f.safari();a=f.ie()&&f.supportedFeatures.fileDrop?!0:"none"!==b.effectAllowed;return b&&a&&(b.files&&b.files.length||!c&&b.types.contains&&b.types.contains("Files")||b.types.includes&&b.types.includes("Files"))}function e(a){void 0!==a&&(k=a);return k}function d(){function a(){b=document.createEvent("Event");b.initEvent(n.HIDE_ZONES_EVENT_NAME,!0,!0)}if(window.CustomEvent)try{var b=new CustomEvent(n.HIDE_ZONES_EVENT_NAME)}catch(u){a()}else a();document.dispatchEvent(b)}var g=new f.DisposeSupport,
k,l;var n={element:null,onEnter:function(a){},onLeave:function(a){},onLeaveNotDescendants:function(a){},onDrop:function(a){}};f.extend(n,c);var p=n.element;(function(a){l||(b?g.attach(document,"dragover",function(a){a.preventDefault()}):g.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),l=!0)})();(function(){g.attach(p,"dragover",function(b){if(a(b)){var c=f.ie()&&f.supportedFeatures.fileDrop?null:b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=
"move"===c||"linkMove"===c?"move":"copy";b.stopPropagation();b.preventDefault()}});g.attach(p,"dragenter",function(b){virtualclass.vutil.initAcitveElement();console.log("testdragenter");if(!e()&&a(b))n.onEnter(b)});g.attach(p,"dragleave",function(b){console.log("testdragleave");if(a(b)){n.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);if(!f(this).contains(c))n.onLeaveNotDescendants(b)}});g.attach(p,"drop",function(b){!e()&&a(b)&&(b.preventDefault(),b.stopPropagation(),n.onDrop(b),
d(),console.log("testdrop"),virtualclass.vutil.initAcitveElement())})})();f.extend(this,{dropDisabled:function(a){return e(a)},dispose:function(){g.dispose()},getElement:function(){return p}});this._testing={};this._testing.isValidFileDrag=a};(function(){f.uiPublicApi={addInitialFiles:function(c){this._parent.prototype.addInitialFiles.apply(this,arguments);this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},
addExtraDropzone:function(c){this._dnd&&this._dnd.setupExtraDropzone(c)},removeExtraDropzone:function(c){if(this._dnd)return this._dnd.removeDropzone(c)},getItemByFileId:function(c){if(!this._templating.isHiddenForever(c))return this._templating.getFileContainer(c)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId());
this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop());this._filesInBatchAddedToUi=this._totalFilesInBatch=0;this._setupClickAndEditEventHandlers()},setName:function(c,b){var a=this._options.formatFileName(b);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(c,a)},pauseUpload:function(c){var b=this._parent.prototype.pauseUpload.apply(this,arguments);b&&this._templating.uploadPaused(c);return b},continueUpload:function(c){var b=this._parent.prototype.continueUpload.apply(this,
arguments);b&&this._templating.uploadContinued(c);return b},getId:function(c){return this._templating.getFileId(c)},getDropTarget:function(c){return this.getFile(c).qqDropTarget}};f.uiPrivateApi={_getButton:function(c){var b=this._parent.prototype._getButton.apply(this,arguments);b||c===this._defaultButtonId&&(b=this._templating.getButton());return b},_removeFileItem:function(c){this._templating.removeFile(c)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=f.FileButtonsClickHandler&&
this._bindFileButtonsClickEvent();this._focusinEventSupported=!f.firefox();this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var c=this,b=this._options.dragAndDrop.extraDropzones,a=this._templating,e=a.getDropZone();e&&b.push(e);return new f.DragAndDrop({dropZoneElements:b,allowMultipleItems:this._options.multiple,
classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){a.showDropProcessing()},processingDroppedFilesComplete:function(b,e){a.hideDropProcessing();f.each(b,function(a,b){b.qqDropTarget=e});b.length&&c.addFiles(b,null,null)},dropError:function(a,b){c._itemError(a,b)},dropLog:function(a,b){c.log(a,b)}}})},_bindFileButtonsClickEvent:function(){var c=this;return new f.FileButtonsClickHandler({templating:this._templating,log:function(b,a){c.log(b,a)},onDeleteFile:function(b){c.deleteFile(b)},
onCancel:function(b){c.cancel(b)},onRetry:function(b){c.retry(b)},onPause:function(b){c.pauseUpload(b)},onContinue:function(b){c.continueUpload(b)},onGetName:function(b){return c.getName(b)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&f.FilenameClickHandler&&f.FilenameInputFocusHandler&&f.FilenameInputFocusHandler},_filenameEditHandler:function(){var c=this,b=this._templating;return{templating:b,log:function(a,b){c.log(a,b)},onGetUploadStatus:function(a){return c.getUploads({id:a}).status},
onGetName:function(a){return c.getName(a)},onSetName:function(a,b){c.setName(a,b)},onEditingStatusChange:function(a,c){var d=f(b.getEditInput(a)),e=f(b.getFileContainer(a));c?(d.addClass("qq-editing"),b.hideFilename(a),b.hideEditIcon(a)):(d.removeClass("qq-editing"),b.showFilename(a),b.showEditIcon(a));e.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(c,b,a){this._parent.prototype._onUploadStatusChange.apply(this,arguments);this._isEditFilenameEnabled()&&this._templating.getFileContainer(c)&&
a!==f.status.SUBMITTED&&(this._templating.markFilenameEditable(c),this._templating.hideEditIcon(c));b===f.status.UPLOAD_RETRYING&&a===f.status.UPLOADING?(this._templating.hideRetry(c),this._templating.setStatusText(c),f(this._templating.getFileContainer(c)).removeClass(this._classes.retrying)):a===f.status.UPLOAD_FAILED&&this._templating.hidePause(c)},_bindFilenameInputFocusInEvent:function(){var c=f.extend({},this._filenameEditHandler());return new f.FilenameInputFocusInHandler(c)},_bindFilenameInputFocusEvent:function(){var c=
f.extend({},this._filenameEditHandler());return new f.FilenameInputFocusHandler(c)},_bindFilenameClickEvent:function(){var c=f.extend({},this._filenameEditHandler());return new f.FilenameClickHandler(c)},_storeForLater:function(c){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(c)},_onAllComplete:function(c,b){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(c,b){var a=this.getFile(c);a&&
a.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(c,{qqpath:a.qqPath});this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(c,b)},_onSubmitted:function(c){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(c),this._templating.showEditIcon(c),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(c)))},_onProgress:function(c,b,a,e){this._parent.prototype._onProgress.apply(this,
arguments);this._templating.updateProgress(c,a,e);0===e||100===Math.round(a/e*100)?(this._templating.hideCancel(c),this._templating.hidePause(c),this._templating.hideProgress(c),this._templating.setStatusText(c,this._options.text.waitingForResponse),this._displayFileSize(c)):this._displayFileSize(c,a,e)},_onTotalProgress:function(c,b){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(c,b)},_onComplete:function(c,b,a,e){function d(a){l&&(h.setStatusText(c),
f(l).removeClass(n._classes.retrying),h.hideProgress(c),n.getUploads({id:c}).status!==f.status.UPLOAD_FAILED&&h.hideCancel(c),h.hideSpinner(c),a.success?n._markFileAsSuccessful(c):(f(l).addClass(n._classes.fail),h.showCancel(c),h.isRetryPossible()&&!n._preventRetries[c]&&(f(l).addClass(n._classes.retryable),h.showRetry(c)),n._controlFailureTextDisplay(c,a)))}var g=this._parent.prototype._onComplete.apply(this,arguments),h=this._templating,l=h.getFileContainer(c),n=this;g instanceof f.Promise?g.done(function(a){d(a)}):
d(a);return g},_markFileAsSuccessful:function(c){var b=this._templating;this._isDeletePossible()&&b.showDeleteButton(c);f(b.getFileContainer(c)).addClass(this._classes.success);this._maybeUpdateThumbnail(c)},_onUploadPrep:function(c){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(c)},_onUpload:function(c,b){var a=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(c);return a},_onUploadChunk:function(c,b){this._parent.prototype._onUploadChunk.apply(this,
arguments);0<b.partIndex&&this._handler.isResumable(c)&&this._templating.allowPause(c)},_onCancel:function(c,b){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(c);0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(c){this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(c);if(this._options.retry.showAutoRetryNote){var b=this._autoRetries[c];var a=this._options.retry.maxAutoAttempts;b=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,
b);b=b.replace(/\{maxAuto\}/g,a);this._templating.setStatusText(c,b);f(this._templating.getFileContainer(c)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(c){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments))return this._templating.resetProgress(c),f(this._templating.getFileContainer(c)).removeClass(this._classes.fail),this._templating.setStatusText(c),this._templating.showSpinner(c),this._showCancelLink(c),!0;f(this._templating.getFileContainer(c)).addClass(this._classes.retryable);
this._templating.showRetry(c);return!1},_onSubmitDelete:function(c){var b=f.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,c,b)},_onSubmitDeleteSuccess:function(c,b,a){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(c,b,a){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(c);a?(this._templating.setStatusText(c,
this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(c)):this._removeFileItem(c)},_sendDeleteRequest:function(c,b,a){this._templating.hideDeleteButton(c);this._templating.showSpinner(c);this._templating.setStatusText(c,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(c,b,a){var e=this.getName(c);e=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,e);b=this.getUuid(c);var d=arguments,
g=this;e=this._options.showConfirm(e);f.isGenericPromise(e)?e.then(function(){g._sendDeleteRequest.apply(g,d)}):!1!==e&&g._sendDeleteRequest.apply(g,d)},_addToList:function(c,b,a){var e=0,d=this._handler.isProxied(c)&&this._options.scaling.hideScaled;if(this._options.display.prependFiles){1<this._totalFilesInBatch&&0<this._filesInBatchAddedToUi&&(e=this._filesInBatchAddedToUi-1);var g={index:e}}a||(this._options.disableCancelForFormUploads&&!f.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),
this._options.multiple||(e=this.getUploads({id:c}),this._handledProxyGroup=this._handledProxyGroup||e.proxyGroupId,e.proxyGroupId===this._handledProxyGroup&&e.proxyGroupId||(this._handler.cancelAll(),this._clearList(),this._handledProxyGroup=null)));a?(this._templating.addFileToCache(c,this._options.formatFileName(b),g,d),this._templating.updateThumbnail(c,this._thumbnailUrls[c],!0,this._options.thumbnails.customResizer)):(this._templating.addFile(c,this._options.formatFileName(b),g,d),this._templating.generatePreview(c,
this.getFile(c),this._options.thumbnails.customResizer));this._filesInBatchAddedToUi+=1;(a||this._options.display.fileSizeOnSubmit&&f.supportedFeatures.ajaxUploading)&&this._displayFileSize(c)},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(c,b,a){var e=this.getSize(c),d=this._formatSize(e);0<=e&&(void 0!==b&&void 0!==a&&(d=this._formatProgress(b,a)),this._templating.updateSize(c,d))},_formatProgress:function(c,b){var a=this._options.text.formatProgress;
a=a.replace("{percent}",Math.round(c/b*100));c=this._formatSize(b);return a=a.replace("{total_size}",c)},_controlFailureTextDisplay:function(c,b){var a=this._options.failedUploadTextDisplay.mode;var e=this._options.failedUploadTextDisplay.responseProperty;"custom"===a?(b=b[e],b||(b=this._options.text.failUpload),this._templating.setStatusText(c,b),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(c,b)):"default"===a?this._templating.setStatusText(c,this._options.text.failUpload):
"none"!==a&&this.log("failedUploadTextDisplay.mode value of '"+a+"' is not valid","warn")},_showTooltip:function(c,b){this._templating.getFileContainer(c).title=b},_showCancelLink:function(c){this._options.disableCancelForFormUploads&&!f.supportedFeatures.ajaxUploading||this._templating.showCancel(c)},_itemError:function(c,b,a){var e=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(e)},_batchError:function(c){this._parent.prototype._batchError.apply(this,arguments);
this._options.showMessage(c)},_setupPastePrompt:function(){var c=this;this._options.callbacks.onPasteReceived=function(){return c._options.showPrompt(c._options.paste.namePromptMessage,c._options.paste.defaultName)}},_fileOrBlobRejected:function(c,b){--this._totalFilesInBatch;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(c,b,a){this._totalFilesInBatch=c.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,
arguments)},_maybeUpdateThumbnail:function(c){var b=this._thumbnailUrls[c];this.getUploads({id:c}).status===f.status.DELETED||!b&&!this._options.thumbnails.placeholders.waitUntilResponse&&f.supportedFeatures.imagePreviews||this._templating.updateThumbnail(c,b,this._options.thumbnails.customResizer)},_addCannedFile:function(c){var b=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(b,this.getName(b),!0);this._templating.hideSpinner(b);this._templating.hideCancel(b);this._markFileAsSuccessful(b);
return b},_setSize:function(c,b){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(c,this._formatSize(b))},_sessionRequestComplete:function(){this._templating.addCacheToDom();this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}})();f.FineUploader=function(c,b){var a=this;this._parent=b?f[b].FineUploaderBasic:f.FineUploaderBasic;this._parent.apply(this,arguments);f.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],
reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",
unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:!1,
notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:!1},showMessage:function(b){if(a._templating.hasDialog("alert"))return a._templating.showDialog("alert",b);setTimeout(function(){window.alert(b)},0)},showConfirm:function(b){return a._templating.hasDialog("confirm")?a._templating.showDialog("confirm",b):window.confirm(b)},showPrompt:function(b,c){return a._templating.hasDialog("prompt")?a._templating.showDialog("prompt",b,c):window.prompt(b,c)}},!0);f.extend(this._options,
c,!0);this._templating=new f.Templating({log:f.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,
thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});this._options.workarounds.ios8SafariUploads&&f.ios800()&&f.iosSafari()?this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari):!f.supportedFeatures.uploading||this._options.cors.expected&&!f.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),
this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._setupClickAndEditEventHandlers(),f.DragAndDrop&&f.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(f.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.",
"error")),this._filesInBatchAddedToUi=this._totalFilesInBatch=0)};f.extend(f.FineUploader.prototype,f.basePublicApi);f.extend(f.FineUploader.prototype,f.basePrivateApi);f.extend(f.FineUploader.prototype,f.uiPublicApi);f.extend(f.FineUploader.prototype,f.uiPrivateApi);f.Templating=function(c){var b=document.createDocumentFragment(),a={},e=!1,d=0,g=!1,k=[],l=-1,n={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,
classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},p={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",
list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",
statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},r={},w=new f.Promise,u=new f.Promise,A,t,z,B,D=function(a){var b=new f.Promise;u.then(function(c){G(c,a);a.src?b.success():(a.src=c.src,a.onload=function(){a.onload=null;W(a);b.success()})},
function(){q(a);b.success()});return b},y=function(a,b,c){var e=m(a);aa("Generating new thumbnail for "+a);b.qqThumbnailId=a;return n.imageGenerator.generate(b,e,c).then(function(){d++;W(e);r[a].success()},function(){r[a].failure();n.placeholders.waitUntilUpdate||I(a,e)})},E=function(){if(k.length){g=!0;var a=k.shift();a.update?ia(a):S(a)}else g=!1},x=function(b){return a[b]||f(z).getFirstByClass("qq-file-id-"+b)},H=function(a){return null==a?F(U,p.totalProgressBarContainer)||F(U,p.totalProgressBar):
F(x(a),p.progressBarContainer)||F(x(a),p.progressBar)},F=function(a,b){return a&&f(a).getFirstByClass(b)},m=function(a){return Z&&F(x(a),p.thumbnail)},q=function(a){a&&f(a).addClass(n.classes.hide)},G=function(a,b){var c=a.style.maxWidth;(a=a.style.maxHeight)&&c&&!b.style.maxWidth&&!b.style.maxHeight&&f(b).css({maxWidth:c,maxHeight:a})},I=function(a,b){var c=r[a]||(new f.Promise).failure(),d=new f.Promise;w.then(function(a){c.then(function(){d.success()},function(){G(a,b);b.onload=function(){b.onload=
null;d.success()};b.src=a.src;W(b)})});return d},M=function(a,b,c){var d=c.firstChild;0<b&&(d=f(c).children()[b].nextSibling);c.insertBefore(a,d)},S=function(a){var b=a.id,c=a.optFileOrBlob,e=c&&c.qqThumbnailId,g=m(b),h={customResizeFunction:a.customResizeFunction,maxSize:l,orient:!0,scale:!0};f.supportedFeatures.imagePreviews?g?n.limits.maxThumbs&&n.limits.maxThumbs<=d?(I(b,g),E()):D(g).done(function(){r[b]=new f.Promise;r[b].done(function(){setTimeout(E,n.limits.timeBetweenThumbs)});null!=e?X(b,
e):y(b,c,h)}):E():g&&(D(g),E())},ia=function(a){var b=a.id,c=a.thumbnailUrl,e=a.showWaitingImg,f=m(b);a={customResizeFunction:a.customResizeFunction,scale:B,maxSize:l};if(f)if(c)if(n.limits.maxThumbs&&n.limits.maxThumbs<=d)I(b,f),E();else return e&&D(f),n.imageGenerator.generate(c,f,a).then(function(){W(f);d++;setTimeout(E,n.limits.timeBetweenThumbs)},function(){I(b,f);setTimeout(E,n.limits.timeBetweenThumbs)});else I(b,f),E()},za=function(a,b){var c=H(a);a=null==a?p.totalProgressBar:p.progressBar;
c&&!f(c).hasClass(a)&&(c=f(c).getFirstByClass(a));c&&(f(c).css({width:b+"%"}),c.setAttribute("aria-valuenow",b))},W=function(a){a&&f(a).removeClass(n.classes.hide)},X=function(a,b){var c=m(a),e=m(b);aa(f.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",a,b,b));r[b].then(function(){d++;r[a].success();aa(f.format("Now using previously generated thumbnail created for ID {} on ID {}.",b,a));c.src=e.src;W(c)},function(){r[a].failure();n.placeholders.waitUntilUpdate||
I(a,c)})};f.extend(n,c);var aa=n.log;f.supportedFeatures.imagePreviews||(n.limits.timeBetweenThumbs=0,n.limits.maxThumbs=0);var U=n.containerEl;var Z=void 0!==n.imageGenerator;var sa=function(){var a;aa("Parsing template");if(null==n.templateIdOrEl)throw Error("You MUST specify either a template element or ID!");if(f.isString(n.templateIdOrEl)){var b=document.getElementById(n.templateIdOrEl);if(null===b)throw Error(f.format("Cannot find template script at ID '{}'!",n.templateIdOrEl));var c=b.innerHTML}else{if(void 0===
n.templateIdOrEl.innerHTML)throw Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");c=n.templateIdOrEl.innerHTML}c=f.trimStr(c);b=document.createElement("div");b.appendChild(f.toElement(c));c=f(b).getFirstByClass(p.uploader);n.button&&(a=f(b).getFirstByClass(p.button))&&f(a).remove();f.DragAndDrop&&f.supportedFeatures.fileDrop||(a=f(b).getFirstByClass(p.dropProcessing))&&f(a).remove();(a=f(b).getFirstByClass(p.drop))&&!f.DragAndDrop&&(aa("DnD module unavailable.",
"info"),f(a).remove());f.supportedFeatures.fileDrop?f(c).hasAttribute("qq-drop-area-text")&&a&&(c=f(a).getFirstByClass(p.dropText))&&f(c).remove():(c.removeAttribute("qq-drop-area-text"),a&&f(a).hasAttribute("qq-hide-dropzone")&&f(a).css({display:"none"}));c=f(b).getFirstByClass(p.thumbnail);Z?c&&(l=parseInt(c.getAttribute("qq-max-size")),l=0<l?l:null,B=f(c).hasAttribute("qq-server-scale")):c&&f(c).remove();Z=Z&&c;A=0<f(b).getByClass(p.editFilenameInput).length;t=0<f(b).getByClass(p.retry).length;
c=f(b).getFirstByClass(p.list);if(null==c)throw Error("Could not find the file list container in the template!");a=c.children[0].cloneNode(!0);c.innerHTML="";b.getElementsByTagName("DIALOG").length&&document.createElement("dialog");aa("Template parsing complete");return{template:b,fileTemplate:a}}();(function(){var a=n.placeholders.thumbnailNotAvailable,b=n.placeholders.waitingForThumbnail,c={maxSize:l,scale:B};Z&&(a?n.imageGenerator.generate(a,new Image,c).then(function(a){w.success(a)},function(){w.failure();
aa("Problem loading 'not available' placeholder image at "+a,"error")}):w.failure(),b?n.imageGenerator.generate(b,new Image,c).then(function(a){u.success(a)},function(){u.failure();aa("Problem loading 'waiting for thumbnail' placeholder image at "+b,"error")}):u.failure())})();f.extend(this,{render:function(){aa("Rendering template in DOM.");d=0;U.appendChild(sa.template.cloneNode(!0));q(F(U,p.dropProcessing));this.hideTotalProgress();z=n.fileContainerEl||F(U,p.list);aa("Template rendering complete")},
renderFailure:function(a){a=f.toElement(a);U.innerHTML="";U.appendChild(a)},reset:function(){this.render()},clearFiles:function(){z.innerHTML=""},disableCancel:function(){e=!0},addFile:function(c,d,g,h,k){var l=sa.fileTemplate.cloneNode(!0),n=F(l,p.file),r=F(U,p.uploader),t=k?b:z,w;k&&(a[c]=l);f(l).addClass("qq-file-id-"+c);r.removeAttribute("qq-drop-area-text");n&&(f(n).setText(d),n.setAttribute("title",d));l.setAttribute("qq-file-id",c);g?M(l,g.index,t):t.appendChild(l);h?(l.style.display="none",
f(l).addClass("qq-hidden-forever")):(q(H(c)),q(F(x(c),p.size)),q(F(x(c),p.deleteButton)),q(F(x(c),p.retry)),q(F(x(c),p.pause)),q(F(x(c),p.continueButton)),e&&this.hideCancel(c),(w=m(c))&&!w.src&&u.then(function(a){w.src=a.src;a.style.maxHeight&&a.style.maxWidth&&f(w).css({maxHeight:a.style.maxHeight,maxWidth:a.style.maxWidth});W(w)}))},addFileToCache:function(a,b,c,d){this.addFile(a,b,c,d,!0)},addCacheToDom:function(){z.appendChild(b);b=document.createDocumentFragment();a={}},removeFile:function(a){f(x(a)).remove()},
getFileId:function(a){if(a){for(;null==a.getAttribute("qq-file-id");)a=a.parentNode;return parseInt(a.getAttribute("qq-file-id"))}},getFileList:function(){return z},markFilenameEditable:function(a){(a=F(x(a),p.file))&&f(a).addClass(n.classes.editable)},updateFilename:function(a,b){if(a=F(x(a),p.file))f(a).setText(b),a.setAttribute("title",b)},hideFilename:function(a){q(F(x(a),p.file))},showFilename:function(a){W(F(x(a),p.file))},isFileName:function(a){return f(a).hasClass(p.file)},getButton:function(){return n.button||
F(U,p.button)},hideDropProcessing:function(){q(F(U,p.dropProcessing))},showDropProcessing:function(){W(F(U,p.dropProcessing))},getDropZone:function(){return F(U,p.drop)},isEditFilenamePossible:function(){return A},hideRetry:function(a){q(F(x(a),p.retry))},isRetryPossible:function(){return t},showRetry:function(a){W(F(x(a),p.retry))},getFileContainer:function(a){return x(a)},showEditIcon:function(a){(a=F(x(a),p.editNameIcon))&&f(a).addClass(n.classes.editable)},isHiddenForever:function(a){return f(x(a)).hasClass("qq-hidden-forever")},
hideEditIcon:function(a){(a=F(x(a),p.editNameIcon))&&f(a).removeClass(n.classes.editable)},isEditIcon:function(a){return f(a).hasClass(p.editNameIcon,!0)},getEditInput:function(a){return F(x(a),p.editFilenameInput)},isEditInput:function(a){return f(a).hasClass(p.editFilenameInput,!0)},updateProgress:function(a,b,c){var d=H(a);d&&0<c&&(b=Math.round(b/c*100),100===b?q(d):W(d),za(a,b))},updateTotalProgress:function(a,b){this.updateProgress(null,a,b)},hideProgress:function(a){(a=H(a))&&q(a)},hideTotalProgress:function(){this.hideProgress()},
resetProgress:function(a){za(a,0);this.hideTotalProgress(a)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(a){e||(a=F(x(a),p.cancel))&&f(a).removeClass(n.classes.hide)},hideCancel:function(a){q(F(x(a),p.cancel))},isCancel:function(a){return f(a).hasClass(p.cancel,!0)},allowPause:function(a){W(F(x(a),p.pause));q(F(x(a),p.continueButton))},uploadPaused:function(a){this.setStatusText(a,n.text.paused);this.allowContinueButton(a);q(F(x(a),p.spinner))},hidePause:function(a){q(F(x(a),
p.pause))},isPause:function(a){return f(a).hasClass(p.pause,!0)},isContinueButton:function(a){return f(a).hasClass(p.continueButton,!0)},allowContinueButton:function(a){W(F(x(a),p.continueButton));q(F(x(a),p.pause))},uploadContinued:function(a){this.setStatusText(a,"");this.allowPause(a);W(F(x(a),p.spinner))},showDeleteButton:function(a){W(F(x(a),p.deleteButton))},hideDeleteButton:function(a){q(F(x(a),p.deleteButton))},isDeleteButton:function(a){return f(a).hasClass(p.deleteButton,!0)},isRetry:function(a){return f(a).hasClass(p.retry,
!0)},updateSize:function(a,b){if(a=F(x(a),p.size))W(a),f(a).setText(b)},setStatusText:function(a,b){(a=F(x(a),p.statusText))&&(null==b?f(a).clearText():f(a).setText(b))},hideSpinner:function(a){f(x(a)).removeClass("qq-in-progress");q(F(x(a),p.spinner))},showSpinner:function(a){f(x(a)).addClass("qq-in-progress");W(F(x(a),p.spinner))},generatePreview:function(a,b,c){this.isHiddenForever(a)||(k.push({id:a,customResizeFunction:c,optFileOrBlob:b}),!g&&E())},updateThumbnail:function(a,b,c,d){this.isHiddenForever(a)||
(k.push({customResizeFunction:d,update:!0,id:a,thumbnailUrl:b,showWaitingImg:c}),!g&&E())},hasDialog:function(a){return f.supportedFeatures.dialogElement&&!!F(U,p[a+"Dialog"])},showDialog:function(a,b,c){var d=F(U,p[a+"Dialog"]);a=F(d,p.dialogMessage);var e=d.getElementsByTagName("INPUT")[0],g=F(d,p.dialogCancelButton),h=F(d,p.dialogOkButton),k=new f.Promise,l=function(){g.removeEventListener("click",m);h&&h.removeEventListener("click",n);k.failure()},m=function(){g.removeEventListener("click",m);
d.close()},n=function(){d.removeEventListener("close",l);h.removeEventListener("click",n);d.close();k.success(e&&e.value)};d.addEventListener("close",l);g.addEventListener("click",m);h&&h.addEventListener("click",n);e&&(e.value=c);a.textContent=b;d.showModal();return k}})};f.UiEventHandler=function(c,b){function a(a){e.attach(a,d.eventType,function(a){a=a||window.event;d.onHandled(a.target||a.srcElement,a)})}var e=new f.DisposeSupport,d={eventType:"click",attachTo:null,onHandled:function(a,b){}};
f.extend(this,{addHandler:function(b){a(b)},dispose:function(){e.dispose()}});f.extend(b,{getFileIdFromItem:function(a){return a.qqFileId},getDisposeSupport:function(){return e}});f.extend(d,c);d.attachTo&&a(d.attachTo)};f.FileButtonsClickHandler=function(c){var b={templating:null,log:function(a,b){},onDeleteFile:function(a){},onCancel:function(a){},onRetry:function(a){},onPause:function(a){},onContinue:function(a){},onGetName:function(a){}},a={cancel:function(a){b.onCancel(a)},retry:function(a){b.onRetry(a)},
deleteButton:function(a){b.onDeleteFile(a)},pause:function(a){b.onPause(a)},continueButton:function(a){b.onContinue(a)}};f.extend(b,c);b.eventType="click";b.onHandled=function(c,d){f.each(a,function(a,e){a=a.charAt(0).toUpperCase()+a.slice(1);if(b.templating["is"+a](c))return a=b.templating.getFileId(c),f.preventDefault(d),b.log(f.format("Detected valid file button click event on file '{}', ID: {}.",b.onGetName(a),a)),e(a),!1})};b.attachTo=b.templating.getFileList();f.extend(this,new f.UiEventHandler(b,
{}))};f.FilenameClickHandler=function(c){var b={},a={templating:null,log:function(a,b){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(a){},onGetName:function(a){}};f.extend(a,c);a.eventType="click";a.onHandled=function(c,d){if(a.templating.isFileName(c)||a.templating.isEditIcon(c)){var e=a.templating.getFileId(c);a.onGetUploadStatus(e)===f.status.SUBMITTED&&(a.log(f.format("Detected valid filename click event on file '{}', ID: {}.",a.onGetName(e),
e)),f.preventDefault(d),b.handleFilenameEdit(e,c,!0))}};f.extend(this,new f.FilenameEditHandler(a,b))};f.FilenameInputFocusInHandler=function(c,b){var a={templating:null,onGetUploadStatus:function(a){},log:function(a,b){}};b||(b={});a.eventType="focusin";a.onHandled=function(c,d){a.templating.isEditInput(c)&&(d=a.templating.getFileId(c),a.onGetUploadStatus(d)===f.status.SUBMITTED&&(a.log(f.format("Detected valid filename input focus event on file '{}', ID: {}.",a.onGetName(d),d)),b.handleFilenameEdit(d,
c)))};f.extend(a,c);f.extend(this,new f.FilenameEditHandler(a,b))};f.FilenameInputFocusHandler=function(c){c.eventType="focus";c.attachTo=null;f.extend(this,new f.FilenameInputFocusInHandler(c,{}))};f.FilenameEditHandler=function(c,b){function a(a,b){a=a.value;if(void 0!==a&&0<f.trimStr(a).length){var c=g.onGetName(b);c=f.getExtension(c);void 0!==c&&(a=a+"."+c);g.onSetName(b,a)}g.onEditingStatusChange(b,!1)}function e(c,d){b.getDisposeSupport().attach(c,"blur",function(){a(c,d)})}function d(c,d){b.getDisposeSupport().attach(c,
"keyup",function(b){13===(b.keyCode||b.which)&&a(c,d)})}var g={templating:null,log:function(a,b){},onGetUploadStatus:function(a){},onGetName:function(a){},onSetName:function(a,b){},onEditingStatusChange:function(a,b){}};f.extend(g,c);g.attachTo=g.templating.getFileList();f.extend(this,new f.UiEventHandler(g,b));f.extend(b,{handleFilenameEdit:function(a,b,c){b=g.templating.getEditInput(a);g.onEditingStatusChange(a,!0);var f=g.onGetName(a),h=f.lastIndexOf(".");0<h&&(f=f.substr(0,h));b.value=f;c&&b.focus();
e(b,a);d(b,a)}})};(function(){f.s3.FineUploader=function(c){var b={failedUploadTextDisplay:{mode:"custom"}};f.extend(b,c,!0);f.FineUploader.call(this,b,"s3");f.supportedFeatures.ajaxUploading||void 0!==b.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")};f.extend(f.s3.FineUploader.prototype,f.s3.FineUploaderBasic.prototype);
f.extend(f.s3.FineUploader.prototype,f.uiPublicApi);f.extend(f.s3.FineUploader.prototype,f.uiPrivateApi)})()})(window);(function(e,f){"function"===typeof define&&define.amd?define("pdfjs-dist/build/pdf",["exports"],f):"undefined"!==typeof exports?f(exports):f(e.pdfjsDistBuildPdf={})})(this,function(e){var f="undefined"!==typeof document&&document.currentScript?document.currentScript.src:null,c={};(function(){(function(b,a){a(b.pdfjsSharedUtil={})})(this,function(b){function a(a){A>=u.warnings&&console.log("Warning: "+a)}function c(a){A>=u.errors&&(console.log("Error: "+a),console.log(d()));throw Error(a);}function d(){try{throw Error();
}catch(ia){return ia.stack?ia.stack.split("\n").slice(2).join("\n"):""}}function e(a,b){a||c(b)}function f(a){e("string"===typeof a,"Invalid argument for stringToBytes");for(var b=a.length,c=new Uint8Array(b),d=0;d<b;++d)c[d]=a.charCodeAt(d)&255;return c}function l(a){if(void 0!==a.length)return a.length;e(void 0!==a.byteLength);return a.byteLength}function n(a){return"number"===typeof a&&(a|0)===a}function p(){var a={};a.promise=new Promise(function(b,c){a.resolve=b;a.reject=c});return a}function r(a,
b,d){this.sourceName=a;this.targetName=b;this.comObj=d;this.callbackIndex=1;this.postMessageTransfers=!0;var e=this.callbacksCapabilities=Object.create(null),f=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(a){var b=a.data;if(b.targetName===this.sourceName)if(b.isReply)if(a=b.callbackId,b.callbackId in e){var g=e[a];delete e[a];"error"in b?g.reject(b.error):g.resolve(b.data)}else c("Cannot resolve callback "+a);else if(b.action in f){var h=f[b.action];if(b.callbackId){var k=
this.sourceName,l=b.sourceName;Promise.resolve().then(function(){return h[0].call(h[1],b.data)}).then(function(a){d.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,data:a})},function(a){a instanceof Error&&(a+="");d.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,error:a})})}else h[0].call(h[1],b.data)}else c("Unknown action from worker: "+b.action)}.bind(this);d.addEventListener("message",this._onComObjOnMessage)}var w="undefined"!==typeof window?
window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this,u={errors:0,warnings:1,infos:5},A=u.warnings,t=function(){function a(a,b){this.name="PasswordException";this.message=a;this.code=b}a.prototype=Error();return a.constructor=a}(),z=function(){function a(a,b){this.name="UnknownErrorException";this.message=a;this.details=b}a.prototype=Error();return a.constructor=a}(),B=function(){function a(a){this.name="InvalidPDFException";this.message=a}a.prototype=Error();return a.constructor=
a}(),D=function(){function a(a){this.name="MissingPDFException";this.message=a}a.prototype=Error();return a.constructor=a}(),y=function(){function a(a,b){this.name="UnexpectedResponseException";this.message=a;this.status=b}a.prototype=Error();return a.constructor=a}(),E=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="NotImplementedException";return a.constructor=a}(),x=function(){function a(a,b){this.begin=a;this.end=b;this.message="Missing data ["+a+", "+b+")"}a.prototype=
Error();a.prototype.name="MissingDataException";return a.constructor=a}(),H=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="XRefParseException";return a.constructor=a}(),F=/\x00/g,m=function(){function a(d,e){this.buffer=d;this.byteLength=d.length;for(d=this.length=void 0===e?this.byteLength>>2:e;c<d;)Object.defineProperty(a.prototype,c,b(c)),c++}function b(a){return{get:function(){var b=this.buffer,c=a<<2;return(b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24)>>>0},set:function(b){var c=
this.buffer,d=a<<2;c[d]=b&255;c[d+1]=b>>8&255;c[d+2]=b>>16&255;c[d+3]=b>>>24&255}}}a.prototype=Object.create(null);var c=0;return a}();b.Uint32ArrayView=m;var q=function(){function a(){}var b=["rgb(",0,",",0,",",0,")"];a.makeCssRgb=function(a,c,d){b[1]=a;b[3]=c;b[5]=d;return b.join("")};a.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]};a.applyTransform=function(a,b){return[a[0]*b[0]+
a[1]*b[2]+b[4],a[0]*b[1]+a[1]*b[3]+b[5]]};a.applyInverseTransform=function(a,b){var c=b[0]*b[3]-b[1]*b[2];return[(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/c,(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/c]};a.getAxialAlignedBoundingBox=function(b,c){var d=a.applyTransform(b,c),e=a.applyTransform(b.slice(2,4),c),f=a.applyTransform([b[0],b[3]],c);b=a.applyTransform([b[2],b[1]],c);return[Math.min(d[0],e[0],f[0],b[0]),Math.min(d[1],e[1],f[1],b[1]),Math.max(d[0],e[0],f[0],b[0]),Math.max(d[1],e[1],f[1],b[1])]};
a.inverseTransform=function(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]};a.apply3dTransform=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]]};a.singularValueDecompose2dScale=function(a){var b=[a[0],a[2],a[1],a[3]],c=a[0]*b[0]+a[1]*b[2],d=a[2]*b[1]+a[3]*b[3],e=(c+d)/2;a=Math.sqrt((c+d)*(c+d)-4*(c*d-(a[2]*b[0]+a[3]*b[2])*(a[0]*b[1]+a[1]*b[3])))/2;return[Math.sqrt(e+a||
1),Math.sqrt(e-a||1)]};a.normalizeRect=function(a){var b=a.slice(0);a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]);a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]);return b};a.intersect=function(b,c){function d(a,b){return a-b}var e=[b[0],b[2],c[0],c[2]].sort(d),f=[b[1],b[3],c[1],c[3]].sort(d),g=[];b=a.normalizeRect(b);c=a.normalizeRect(c);if(e[0]===b[0]&&e[1]===c[0]||e[0]===c[0]&&e[1]===b[0])g[0]=e[1],g[2]=e[2];else return!1;if(f[0]===b[1]&&f[1]===c[1]||f[0]===c[1]&&f[1]===b[1])g[1]=f[1],g[3]=f[2];else return!1;return g};a.sign=
function(a){return 0>a?-1:1};var c=" C CC CCC CD D DC DCC DCCC CM  X XX XXX XL L LX LXX LXXX XC  I II III IV V VI VII VIII IX".split(" ");a.toRoman=function(a,b){e(n(a)&&0<a,"The number should be a positive integer.");for(var d,f=[];1E3<=a;)a-=1E3,f.push("M");d=a/100|0;a%=100;f.push(c[d]);d=a/10|0;a%=10;f.push(c[10+d]);f.push(c[20+a]);a=f.join("");return b?a.toLowerCase():a};a.appendToArray=function(a,b){Array.prototype.push.apply(a,b)};a.prependToArray=function(a,b){Array.prototype.unshift.apply(a,
b)};a.extendObj=function(a,b){for(var c in b)a[c]=b[c]};a.getInheritableProperty=function(a,b){for(;a&&!a.has(b);)a=a.get("Parent");return a?a.get(b):null};a.inherit=function(a,b,c){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;for(var d in c)a.prototype[d]=c[d]};a.loadScript=function(a,b){var c=document.createElement("script"),d=!1;c.setAttribute("src",a);b&&(c.onload=function(){d||b();d=!0});document.getElementsByTagName("head")[0].appendChild(c)};return a}();m=function(){function a(a,
b,c,d,e,f){this.viewBox=a;this.scale=b;this.rotation=c;this.offsetX=d;this.offsetY=e;var g=(a[2]+a[0])/2,h=(a[3]+a[1])/2,k;c%=360;switch(0>c?c+360:c){case 180:c=-1;var l=k=0;var m=1;break;case 90:c=0;l=k=1;m=0;break;case 270:c=0;l=k=-1;m=0;break;default:c=1,l=k=0,m=-1}f&&(l=-l,m=-m);0===c?(d=Math.abs(h-a[1])*b+d,e=Math.abs(g-a[0])*b+e,f=Math.abs(a[3]-a[1])*b,a=Math.abs(a[2]-a[0])*b):(d=Math.abs(g-a[0])*b+d,e=Math.abs(h-a[1])*b+e,f=Math.abs(a[2]-a[0])*b,a=Math.abs(a[3]-a[1])*b);this.transform=[c*b,
k*b,l*b,m*b,d-c*b*g-l*b*h,e-k*b*g-m*b*h];this.width=f;this.height=a;this.fontScale=b}a.prototype={clone:function(b){b=b||{};var c="scale"in b?b.scale:this.scale,d="rotation"in b?b.rotation:this.rotation;return new a(this.viewBox.slice(),c,d,this.offsetX,this.offsetY,b.dontFlip)},convertToViewportPoint:function(a,b){return q.applyTransform([a,b],this.transform)},convertToViewportRectangle:function(a){var b=q.applyTransform([a[0],a[1]],this.transform);a=q.applyTransform([a[2],a[3]],this.transform);
return[b[0],b[1],a[0],a[1]]},convertToPdfPoint:function(a,b){return q.applyInverseTransform([a,b],this.transform)}};return a}();var G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,
64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];(function(){function b(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(X){this._reject(X)}}if(w.Promise)"function"!==typeof w.Promise.all&&(w.Promise.all=function(a){var b=0,c=[],d,e,f=new w.Promise(function(a,b){d=a;e=b});a.forEach(function(a,f){b++;a.then(function(a){c[f]=a;b--;0===b&&d(c)},e)});0===b&&d(c);return f}),"function"!==typeof w.Promise.resolve&&(w.Promise.resolve=function(a){return new w.Promise(function(b){b(a)})}),
"function"!==typeof w.Promise.reject&&(w.Promise.reject=function(a){return new w.Promise(function(b,c){c(a)})}),"function"!==typeof w.Promise.prototype.catch&&(w.Promise.prototype.catch=function(a){return w.Promise.prototype.then(void 0,a)});else{var c={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){0!==a._status&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),
0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),c=b.thisPromise._status,d=b.thisPromise._value;try{1===c?"function"===typeof b.onResolve&&(d=b.onResolve(d)):"function"===typeof b.onReject&&(d=b.onReject(d),c=1,b.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(b.thisPromise))}catch(Z){c=2,d=Z}b.nextPromise._updateStatus(c,d);if(Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},
addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var b=Date.now(),c=0;c<this.unhandledRejections.length;c++)if(500<
b-this.unhandledRejections[c].time){var d=this.unhandledRejections[c].promise._value,e="Unhandled rejection: "+d;d.stack&&(e+="\n"+d.stack);a(e);this.unhandledRejections.splice(c);c--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};b.all=function(a){function c(a){2!==f._status&&(h=[],e(a))}var d,e,f=new b(function(a,b){d=a;e=b}),g=a.length,h=[];if(0===g)return d(h),f;for(var k=0,l=a.length;k<l;++k){var m=a[k],n=function(a){return function(b){2!==f._status&&(h[a]=
b,g--,0===g&&d(h))}}(k);b.isPromise(m)?m.then(n,c):n(m)}return f};b.isPromise=function(a){return a&&"function"===typeof a.then};b.resolve=function(a){return new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};b.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,d){1!==this._status&&2!==this._status&&(1===a&&b.isPromise(d)?d.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,2)):(this._status=a,this._value=
d,2===a&&0===this._handlers.length&&(this._unhandledRejection=!0,c.addUnhandledRejection(this)),c.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(a,d){var e=new b(function(a,b){this.resolve=a;this.reject=b});this._handlers.push({thisPromise:this,onResolve:a,onReject:d,nextPromise:e});c.scheduleHandlers(this);return e},catch:function(a){return this.then(void 0,a)}};w.Promise=b}})();var I=function(){function b(){this.started=
Object.create(null);this.times=[];this.enabled=!0}b.prototype={time:function(b){this.enabled&&(b in this.started&&a("Timer is already running for "+b),this.started[b]=Date.now())},timeEnd:function(b){this.enabled&&(b in this.started||a("Timer has not been started for "+b),this.times.push({name:b,start:this.started[b],end:Date.now()}),delete this.started[b])},toString:function(){var a,b=this.times,c="",d=0;var e=0;for(a=b.length;e<a;++e){var f=b[e].name;f.length>d&&(d=f.length)}e=0;for(a=b.length;e<
a;++e){var g=b[e];f=g.end-g.start;for(g=g.name;g.length<d;)g+=" ";c+=g+" "+f+"ms\n"}return c}};return b}(),M=function(a,b){if("undefined"!==typeof Blob)return new Blob([a],{type:b});var c=new MozBlobBuilder;c.append(a);return c.getBlob(b)},S=function(){return function(a,b,c){if(!c&&"undefined"!==typeof URL&&URL.createObjectURL)return a=M(a,b),URL.createObjectURL(a);b="data:"+b+";base64,";c=0;for(var d=a.length;c<d;c+=3){var e=a[c]&255,f=a[c+1]&255,g=a[c+2]&255;b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[e>>
2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(e&3)<<4|f>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+1<d?(f&15)<<2|g>>6:64]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+2<d?g&63:64]}return b}}();r.prototype={on:function(a,b,d){var e=this.actionHandler;e[a]&&c('There is already an actionName called "'+a+'"');e[a]=[b,d]},send:function(a,b,c){this.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,
data:b},c)},sendWithPromise:function(a,b,c){var d=this.callbackIndex++;a={sourceName:this.sourceName,targetName:this.targetName,action:a,data:b,callbackId:d};b=p();this.callbacksCapabilities[d]=b;try{this.postMessage(a,c)}catch(aa){b.reject(aa)}return b.promise},postMessage:function(a,b){b&&this.postMessageTransfers?this.comObj.postMessage(a,b):this.comObj.postMessage(a)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};(function(a){function b(a){""==a&&(f.call(this),
this._isInvalid=!0);return a.toLowerCase()}function c(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,63,96].indexOf(b)?a:encodeURIComponent(a)}function d(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,96].indexOf(b)?a:encodeURIComponent(a)}function e(a,e,g){function h(a){w.push(a)}var k=e||"scheme start",q=0,r="",t=!1,u=!1,w=[];a:for(;(void 0!=a[q-1]||0==q)&&!this._isInvalid;){var x=a[q];switch(k){case "scheme start":if(x&&n.test(x))r+=x.toLowerCase(),k="scheme";else if(e){h("Invalid scheme.");
break a}else{r="";k="no scheme";continue}break;case "scheme":if(x&&p.test(x))r+=x.toLowerCase();else if(":"==x){this._scheme=r;r="";if(e)break a;void 0!==l[this._scheme]&&(this._isRelative=!0);k="file"==this._scheme?"relative":this._isRelative&&g&&g._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}else if(e){void 0!=x&&h("Code point not allowed in scheme: "+x);break a}else{r="";q=0;k="no scheme";continue}break;case "scheme data":"?"==x?(this._query=
"?",k="query"):"#"==x?(this._fragment="#",k="fragment"):void 0!=x&&"\t"!=x&&"\n"!=x&&"\r"!=x&&(this._schemeData+=c(x));break;case "no scheme":if(g&&void 0!==l[g._scheme]){k="relative";continue}else h("Missing scheme."),f.call(this),this._isInvalid=!0;break;case "relative or authority":if("/"==x&&"/"==a[q+1])k="authority ignore slashes";else{h("Expected /, got: "+x);k="relative";continue}break;case "relative":this._isRelative=!0;"file"!=this._scheme&&(this._scheme=g._scheme);if(void 0==x){this._host=
g._host;this._port=g._port;this._path=g._path.slice();this._query=g._query;this._username=g._username;this._password=g._password;break a}else if("/"==x||"\\"==x)"\\"==x&&h("\\ is an invalid code point."),k="relative slash";else if("?"==x)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query="?",this._username=g._username,this._password=g._password,k="query";else if("#"==x)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query=g._query,this._fragment="#",
this._username=g._username,this._password=g._password,k="fragment";else{k=a[q+1];var z=a[q+2];if("file"!=this._scheme||!n.test(x)||":"!=k&&"|"!=k||void 0!=z&&"/"!=z&&"\\"!=z&&"?"!=z&&"#"!=z)this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password,this._path=g._path.slice(),this._path.pop();k="relative path";continue}break;case "relative slash":if("/"==x||"\\"==x)"\\"==x&&h("\\ is an invalid code point."),k="file"==this._scheme?"file host":"authority ignore slashes";
else{"file"!=this._scheme&&(this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password);k="relative path";continue}break;case "authority first slash":if("/"==x)k="authority second slash";else{h("Expected '/', got: "+x);k="authority ignore slashes";continue}break;case "authority second slash":k="authority ignore slashes";if("/"!=x){h("Expected '/', got: "+x);continue}break;case "authority ignore slashes":if("/"!=x&&"\\"!=x){k="authority";continue}else h("Expected authority, got: "+
x);break;case "authority":if("@"==x){t&&(h("@ already seen."),r+="%40");t=!0;for(x=0;x<r.length;x++)z=r[x],"\t"==z||"\n"==z||"\r"==z?h("Invalid whitespace in authority."):":"==z&&null===this._password?this._password="":(z=c(z),null!==this._password?this._password+=z:this._username+=z);r=""}else if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){q-=r.length;r="";k="host";continue}else r+=x;break;case "file host":if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){2!=r.length||!n.test(r[0])||":"!=r[1]&&"|"!=
r[1]?(0!=r.length&&(this._host=b.call(this,r),r=""),k="relative path start"):k="relative path";continue}else"\t"==x||"\n"==x||"\r"==x?h("Invalid whitespace in file host."):r+=x;break;case "host":case "hostname":if(":"!=x||u)if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){this._host=b.call(this,r);r="";k="relative path start";if(e)break a;continue}else"\t"!=x&&"\n"!=x&&"\r"!=x?("["==x?u=!0:"]"==x&&(u=!1),r+=x):h("Invalid code point in host/hostname: "+x);else if(this._host=b.call(this,r),r="",k="port",
"hostname"==e)break a;break;case "port":if(/[0-9]/.test(x))r+=x;else if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x||e){""!=r&&(r=parseInt(r,10),r!=l[this._scheme]&&(this._port=r+""),r="");if(e)break a;k="relative path start";continue}else"\t"==x||"\n"==x||"\r"==x?h("Invalid code point in port: "+x):(f.call(this),this._isInvalid=!0);break;case "relative path start":"\\"==x&&h("'\\' not allowed in path.");k="relative path";if("/"!=x&&"\\"!=x)continue;break;case "relative path":if(void 0!=x&&"/"!=x&&
"\\"!=x&&(e||"?"!=x&&"#"!=x))"\t"!=x&&"\n"!=x&&"\r"!=x&&(r+=c(x));else{"\\"==x&&h("\\ not allowed in relative path.");if(z=m[r.toLowerCase()])r=z;".."==r?(this._path.pop(),"/"!=x&&"\\"!=x&&this._path.push("")):"."==r&&"/"!=x&&"\\"!=x?this._path.push(""):"."!=r&&("file"==this._scheme&&0==this._path.length&&2==r.length&&n.test(r[0])&&"|"==r[1]&&(r=r[0]+":"),this._path.push(r));r="";"?"==x?(this._query="?",k="query"):"#"==x&&(this._fragment="#",k="fragment")}break;case "query":e||"#"!=x?void 0!=x&&"\t"!=
x&&"\n"!=x&&"\r"!=x&&(this._query+=d(x)):(this._fragment="#",k="fragment");break;case "fragment":void 0!=x&&"\t"!=x&&"\n"!=x&&"\r"!=x&&(this._fragment+=x)}q++}}function f(){this._username=this._schemeData=this._scheme="";this._password=null;this._port=this._host="";this._path=[];this._fragment=this._query="";this._isRelative=this._isInvalid=!1}function g(a,b){void 0===b||b instanceof g||(b=new g(String(b)));this._url=a;f.call(this);a=a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");e.call(this,a,null,
b)}var h=!1;try{if("function"===typeof URL&&"object"===typeof URL.prototype&&"origin"in URL.prototype){var k=new URL("b","http://a");k.pathname="c%20d";h="http://a/c%20d"===k.href}}catch(ya){}if(!h){var l=Object.create(null);l.ftp=21;l.file=0;l.gopher=70;l.http=80;l.https=443;l.ws=80;l.wss=443;var m=Object.create(null);m["%2e"]=".";m[".%2e"]="..";m["%2e."]="..";m["%2e%2e"]="..";var n=/[a-zA-Z]/,p=/[a-zA-Z0-9\+\-\.]/;g.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;
var a="";if(""!=this._username||null!=this._password)a=this._username+(null!=this._password?":"+this._password:"")+"@";return this.protocol+(this._isRelative?"//"+a+this.host:"")+this.pathname+this._query+this._fragment},set href(a){f.call(this);e.call(this,a)},get protocol(){return this._scheme+":"},set protocol(a){this._isInvalid||e.call(this,a+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(a){!this._isInvalid&&this._isRelative&&
e.call(this,a,"host")},get hostname(){return this._host},set hostname(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"hostname")},get port(){return this._port},set port(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(a){!this._isInvalid&&this._isRelative&&(this._path=[],e.call(this,a,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?
"":this._query},set search(a){!this._isInvalid&&this._isRelative&&(this._query="?","?"==a[0]&&(a=a.slice(1)),e.call(this,a,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(a){this._isInvalid||(this._fragment="#","#"==a[0]&&(a=a.slice(1)),e.call(this,a,"fragment"))},get origin(){var a;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case "data":case "file":case "javascript":case "mailto":return"null"}return(a=this.host)?this._scheme+
"://"+a:""}};var q=a.URL;q&&(g.createObjectURL=function(a){return q.createObjectURL.apply(q,arguments)},g.revokeObjectURL=function(a){q.revokeObjectURL(a)});a.URL=g}})(w);b.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];b.IDENTITY_MATRIX=[1,0,0,1,0,0];b.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,
closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,
setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,
endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};b.VERBOSITY_LEVELS=u;b.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};b.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};
b.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};b.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};b.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,
CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};b.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};b.InvalidPDFException=B;b.MessageHandler=r;b.MissingDataException=x;b.MissingPDFException=D;b.NotImplementedException=E;b.PageViewport=m;b.PasswordException=t;b.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};b.StatTimer=I;b.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};b.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,
STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};b.UnexpectedResponseException=y;b.UnknownErrorException=z;b.Util=q;b.XRefParseException=H;b.arrayByteLength=l;b.arraysToBytes=function(a){if(1===a.length&&a[0]instanceof Uint8Array)return a[0];var b=0,c,d=a.length;for(c=0;c<d;c++){var e=a[c];var g=l(e);b+=g}var h=0;b=new Uint8Array(b);for(c=0;c<d;c++)e=a[c],e instanceof Uint8Array||(e="string"===typeof e?f(e):new Uint8Array(e)),g=e.byteLength,b.set(e,
h),h+=g;return b};b.assert=e;b.bytesToString=function(a){e(null!==a&&"object"===typeof a&&void 0!==a.length,"Invalid argument for bytesToString");var b=a.length;if(8192>b)return String.fromCharCode.apply(null,a);for(var c=[],d=0;d<b;d+=8192){var f=a.subarray(d,Math.min(d+8192,b));c.push(String.fromCharCode.apply(null,f))}return c.join("")};b.createBlob=M;b.createPromiseCapability=p;b.createObjectURL=S;b.deprecated=function(a){console.log("Deprecated API usage: "+a)};b.error=c;b.getLookupTableFactory=
function(a){var b;return function(){a&&(b=Object.create(null),a(b),a=null);return b}};b.getVerbosityLevel=function(){return A};b.globalScope=w;b.info=function(a){A>=u.infos&&console.log("Info: "+a)};b.isArray=function(a){return a instanceof Array};b.isArrayBuffer=function(a){return"object"===typeof a&&null!==a&&void 0!==a.byteLength};b.isBool=function(a){return"boolean"===typeof a};b.isEmptyObj=function(a){for(var b in a)return!1;return!0};b.isInt=n;b.isNum=function(a){return"number"===typeof a};
b.isString=function(a){return"string"===typeof a};b.isSameOrigin=function(a,b){try{var c=new URL(a);if(!c.origin||"null"===c.origin)return!1}catch(X){return!1}a=new URL(b,c);return c.origin===a.origin};b.isValidUrl=function(a,b){if(!a||"string"!==typeof a)return!1;a=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);if(!a)return b;a=a[0].toLowerCase();switch(a){case "http":case "https":case "ftp":case "mailto":case "tel":return!0;default:return!1}};b.isLittleEndian=function(){var a=new Uint8Array(2);a[0]=1;return 1===
(new Uint16Array(a.buffer))[0]};b.isEvalSupported=function(){try{return new Function(""),!0}catch(ia){return!1}};b.loadJpegStream=function(b,c,d){var e=new Image;e.onload=function(){d.resolve(b,e)};e.onerror=function(){d.resolve(b,null);a("Error during JPEG image loading")};e.src=c};b.log2=function(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c};b.readInt8=function(a,b){return a[b]<<24>>24};b.readUint16=function(a,b){return a[b]<<8|a[b+1]};b.readUint32=function(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<
8|a[b+3])>>>0};b.removeNullCharacters=function(b){return"string"!==typeof b?(a("The argument for removeNullCharacters must be a string."),b):b.replace(F,"")};b.setVerbosityLevel=function(a){A=a};b.shadow=function(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c};b.string32=function(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)};b.stringToBytes=f;b.stringToPDFString=function(a){var b,c=a.length,d=[];if("\u00fe"===a[0]&&"\u00ff"===a[1])for(b=
2;b<c;b+=2)d.push(String.fromCharCode(a.charCodeAt(b)<<8|a.charCodeAt(b+1)));else for(b=0;b<c;++b){var e=G[a.charCodeAt(b)];d.push(e?String.fromCharCode(e):a.charAt(b))}return d.join("")};b.stringToUTF8String=function(a){return decodeURIComponent(escape(a))};b.utf8StringToString=function(a){return unescape(encodeURIComponent(a))};b.warn=a});(function(b,a){a(b.pdfjsDisplayDOMUtils={},b.pdfjsSharedUtil)})(this,function(b,a){function c(b){var c=a.globalScope.PDFJS;switch(b){case "pdfBug":return c?c.pdfBug:
!1;case "disableAutoFetch":return c?c.disableAutoFetch:!1;case "disableStream":return c?c.disableStream:!1;case "disableRange":return c?c.disableRange:!1;case "disableFontFace":return c?c.disableFontFace:!1;case "disableCreateObjectURL":return c?c.disableCreateObjectURL:!1;case "disableWebGL":return c?c.disableWebGL:!0;case "cMapUrl":return c?c.cMapUrl:null;case "cMapPacked":return c?c.cMapPacked:!1;case "postMessageTransfers":return c?c.postMessageTransfers:!0;case "workerSrc":return c?c.workerSrc:
null;case "disableWorker":return c?c.disableWorker:!1;case "maxImageSize":return c?c.maxImageSize:-1;case "imageResourcesPath":return c?c.imageResourcesPath:"";case "isEvalSupported":return c?c.isEvalSupported:!0;case "externalLinkTarget":if(!c)return l.NONE;switch(c.externalLinkTarget){case l.NONE:case l.SELF:case l.BLANK:case l.PARENT:case l.TOP:return c.externalLinkTarget}e("PDFJS.externalLinkTarget is invalid: "+c.externalLinkTarget);return c.externalLinkTarget=l.NONE;case "externalLinkRel":return c?
c.externalLinkRel:"noreferrer";case "enableStats":return!(!c||!c.enableStats);default:throw Error("Unknown default setting: "+b);}}var d=a.removeNullCharacters,e=a.warn,f=function(){function a(){}var b=["ms","Moz","Webkit","O"],c=Object.create(null);a.getProp=function(a,d){if(1===arguments.length&&"string"===typeof c[a])return c[a];d=d||document.documentElement;var e=d.style;if("string"===typeof e[a])return c[a]=a;var f=a.charAt(0).toUpperCase()+a.slice(1);for(var g=0,h=b.length;g<h;g++){var k=b[g]+
f;if("string"===typeof e[k])return c[a]=k}return c[a]="undefined"};a.setProp=function(a,b,c){a=this.getProp(a);"undefined"!==a&&(b.style[a]=c)};return a}(),l={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},n=["","_self","_blank","_parent","_top"];b.CustomStyle=f;b.addLinkAttributes=function(a,b){var e=b&&b.url;a.href=a.title=e?d(e):"";e&&(e=b.target,"undefined"===typeof e&&(e=c("externalLinkTarget")),a.target=n[e],b=b.rel,"undefined"===typeof b&&(b=c("externalLinkRel")),a.rel=b)};b.isExternalLinkTargetSet=
function(){switch(c("externalLinkTarget")){case l.NONE:return!1;case l.SELF:case l.BLANK:case l.PARENT:case l.TOP:return!0}};b.getFilenameFromUrl=function(a){var b=a.indexOf("#"),c=a.indexOf("?");b=Math.min(0<b?b:a.length,0<c?c:a.length);return a.substring(a.lastIndexOf("/",b)+1,b)};b.LinkTarget=l;b.hasCanvasTypedArrays=function(){var a=document.createElement("canvas");a.width=a.height=1;return"undefined"!==typeof a.getContext("2d").createImageData(1,1).data.buffer};b.getDefaultSetting=c});(function(b,
a){a(b.pdfjsDisplayFontLoader={},b.pdfjsSharedUtil)})(this,function(b,a){function c(a){this.docId=a;this.styleElement=null;this.nativeFontFaces=[];this.loadTestFontId=0;this.loadingContext={requests:[],nextRequestId:0}}var d=a.assert,e=a.bytesToString,f=a.string32,l=a.shadow,n=a.warn;c.prototype={insertRule:function(a){var b=this.styleElement;b||(b=this.styleElement=document.createElement("style"),b.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(b));
b=b.sheet;b.insertRule(a,b.cssRules.length)},clear:function(){var a=this.styleElement;a&&(a.parentNode.removeChild(a),a=this.styleElement=null);this.nativeFontFaces.forEach(function(a){document.fonts.delete(a)});this.nativeFontFaces.length=0},get loadTestFont(){return l(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},
addNativeFontFace:function(a){this.nativeFontFaces.push(a);document.fonts.add(a)},bind:function(a,b){for(var d=[],e=[],f=[],g=function(a){return a.loaded.catch(function(b){n('Failed to load font "'+a.family+'": '+b)})},h=0,k=a.length;h<k;h++){var l=a[h];if(!l.attached&&!1!==l.loading)if(l.attached=!0,c.isFontLoadingAPISupported){if(l=l.createNativeFontFace())this.addNativeFontFace(l),f.push(g(l))}else{var p=l.createFontFaceRule();p&&(this.insertRule(p),d.push(p),e.push(l))}}var r=this.queueLoadingCallback(b);
c.isFontLoadingAPISupported?Promise.all(f).then(function(){r.complete()}):0<d.length&&!c.isSyncFontLoadingSupported?this.prepareFontLoadEvent(d,e,r):r.complete()},queueLoadingCallback:function(a){var b=this.loadingContext,c={id:"pdfjs-font-loading-"+b.nextRequestId++,complete:function(){d(!c.end,"completeRequest() cannot be called twice");for(c.end=Date.now();0<b.requests.length&&b.requests[0].end;){var a=b.requests.shift();setTimeout(a.callback,0)}},callback:a,started:Date.now()};b.requests.push(c);
return c},prepareFontLoadEvent:function(a,b,c){function d(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+3)&255}function e(a,b,c,d){var e=a.substr(0,b);a=a.substr(b+c);return e+d+a}function g(a,b){l++;30<l?(n("Load test font never loaded."),b()):(k.font="30px "+a,k.fillText(".",0,20),0<k.getImageData(0,0,1,1).data[3]?b():setTimeout(g.bind(null,a,b)))}var h;a=document.createElement("canvas");a.width=1;a.height=1;var k=a.getContext("2d"),l=0;a="lt"+Date.now()+
this.loadTestFontId++;var p=this.loadTestFont;p=e(p,976,a.length,a);var r=d(p,16);var u=0;for(h=a.length-3;u<h;u+=4)r=r-1482184792+d(a,u)|0;u<a.length&&(r=r-1482184792+d(a+"XXX",u)|0);p=e(p,16,4,f(r));u="url(data:font/opentype;base64,"+btoa(p)+");";this.insertRule('@font-face { font-family:"'+a+'";src:'+u+"}");p=[];u=0;for(h=b.length;u<h;u++)p.push(b[u].loadedName);p.push(a);var m=document.createElement("div");m.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
u=0;for(h=p.length;u<h;++u)b=document.createElement("span"),b.textContent="Hi",b.style.fontFamily=p[u],m.appendChild(b);document.body.appendChild(m);g(a,function(){document.body.removeChild(m);c.complete()})}};c.isFontLoadingAPISupported="undefined"!==typeof document&&!!document.fonts;Object.defineProperty(c,"isSyncFontLoadingSupported",{get:function(){if("undefined"===typeof navigator)return l(c,"isSyncFontLoadingSupported",!0);var a=!1,b=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);
b&&14<=b[1]&&(a=!0);return l(c,"isSyncFontLoadingSupported",a)},enumerable:!0,configurable:!0});var p={get value(){return l(this,"value",a.isEvalSupported())}},r=function(){function a(a,b){this.compiledGlyphs=Object.create(null);for(var c in a)this[c]=a[c];this.options=b}a.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=new FontFace(this.loadedName,this.data,{});this.options.fontRegistry&&this.options.fontRegistry.registerFont(this);
return a},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=e(new Uint8Array(this.data)),b=this.loadedName;a="url(data:"+this.mimetype+";base64,"+btoa(a)+");";b='@font-face { font-family:"'+b+'";src:'+a+"}";this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,a);return b},getPathGenerator:function(a,b){if(!(b in this.compiledGlyphs)){var c=a.get(this.loadedName+"_path_"+b),d;if(this.options.isEvalSupported&&
p.value){var e="";var f=0;for(d=c.length;f<d;f++){var g=c[f];a=void 0!==g.args?g.args.join(","):"";e+="c."+g.cmd+"("+a+");\n"}this.compiledGlyphs[b]=new Function("c","size",e)}else this.compiledGlyphs[b]=function(a,b){f=0;for(d=c.length;f<d;f++)g=c[f],"scale"===g.cmd&&(g.args=[b,-b]),a[g.cmd].apply(a,g.args)}}return this.compiledGlyphs[b]}};return a}();b.FontFaceObject=r;b.FontLoader=c});(function(b,a){a(b.pdfjsDisplayMetadata={},b.pdfjsSharedUtil)})(this,function(b,a){function c(a){return a.replace(/>\\376\\377([^<]+)/g,
function(a,b){a=b.replace(/\\([0-3])([0-7])([0-7])/g,function(a,b,c,d){return String.fromCharCode(64*b+8*c+1*d)});b="";for(var c=0;c<a.length;c+=2){var d=256*a.charCodeAt(c)+a.charCodeAt(c+1);b+="&#x"+(65536+d).toString(16).substring(1)+";"}return">"+b})}function d(a){"string"===typeof a?(a=c(a),a=(new DOMParser).parseFromString(a,"application/xml")):a instanceof Document||e("Metadata: Invalid metadata object");this.metaDocument=a;this.metadata=Object.create(null);this.parse()}var e=a.error;d.prototype=
{parse:function(){var a=this.metaDocument.documentElement;if("rdf:rdf"!==a.nodeName.toLowerCase())for(a=a.firstChild;a&&"rdf:rdf"!==a.nodeName.toLowerCase();)a=a.nextSibling;var b=a?a.nodeName.toLowerCase():null;if(a&&"rdf:rdf"===b&&a.hasChildNodes()){a=a.childNodes;var c,d;var e=0;for(c=a.length;e<c;e++)if(b=a[e],"rdf:description"===b.nodeName.toLowerCase()){var f=0;for(d=b.childNodes.length;f<d;f++)if("#text"!==b.childNodes[f].nodeName.toLowerCase()){var g=b.childNodes[f];var h=g.nodeName.toLowerCase();
this.metadata[h]=g.textContent.trim()}}}},get:function(a){return this.metadata[a]||null},has:function(a){return"undefined"!==typeof this.metadata[a]}};b.Metadata=d});(function(b,a){a(b.pdfjsDisplaySVG={},b.pdfjsSharedUtil)})(this,function(b,a){var c=a.FONT_IDENTITY_MATRIX,d=a.IDENTITY_MATRIX,e=a.ImageKind,f=a.OPS,l=a.Util,n=a.isNum,p=a.isArray,r=a.warn,w=a.createObjectURL,u=function(){function a(a,b,d,e){var f=e,g=b.length;d[f]=g>>24&255;d[f+1]=g>>16&255;d[f+2]=g>>8&255;d[f+3]=g&255;f+=4;d[f]=a.charCodeAt(0)&
255;d[f+1]=a.charCodeAt(1)&255;d[f+2]=a.charCodeAt(2)&255;d[f+3]=a.charCodeAt(3)&255;f+=4;d.set(b,f);f+=b.length;a=-1;for(e+=4;e<f;e++)a=a>>>8^c[(a^d[e])&255];e=a^-1;d[f]=e>>24&255;d[f+1]=e>>16&255;d[f+2]=e>>8&255;d[f+3]=e&255}for(var b=new Uint8Array([137,80,78,71,13,10,26,10]),c=new Int32Array(256),d=0;256>d;d++){for(var f=d,g=0;8>g;g++)f=f&1?3988292384^f>>1&2147483647:f>>1&2147483647;c[d]=f}return function(c,d){var f=void 0===c.kind?e.GRAYSCALE_1BPP:c.kind,g=c.width,h=c.height,k=c.data;switch(f){case e.GRAYSCALE_1BPP:var l=
0;var n=1;var p=g+7>>3;break;case e.RGB_24BPP:l=2;n=8;p=3*g;break;case e.RGBA_32BPP:l=6;n=8;p=4*g;break;default:throw Error("invalid format");}c=new Uint8Array((1+p)*h);var r=0,t=0,u;for(u=0;u<h;++u)c[r++]=0,c.set(k.subarray(t,t+p),r),t+=p,r+=p;if(f===e.GRAYSCALE_1BPP)for(u=r=0;u<h;u++)for(r++,f=0;f<p;f++)c[r++]^=255;g=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,g&255,h>>24&255,h>>16&255,h>>8&255,h&255,n,l,0,0,0]);n=c.length;h=new Uint8Array(2+n+5*Math.ceil(n/65535)+4);f=0;h[f++]=120;h[f++]=156;
for(l=0;65535<n;)h[f++]=0,h[f++]=255,h[f++]=255,h[f++]=0,h[f++]=0,h.set(c.subarray(l,l+65535),f),f+=65535,l+=65535,n-=65535;h[f++]=1;h[f++]=n&255;h[f++]=n>>8&255;h[f++]=~n&255;h[f++]=(~n&65535)>>8&255;h.set(c.subarray(l),f);f+=c.length-l;n=1;for(p=l=0;p<c.length;++p)n=(n+(c[p]&255))%65521,l=(l+n)%65521;c=l<<16|n;h[f++]=c>>24&255;h[f++]=c>>16&255;h[f++]=c>>8&255;h[f++]=c&255;c=new Uint8Array(b.length+36+g.length+h.length);f=0;c.set(b,f);f+=b.length;a("IHDR",g,c,f);f+=12+g.length;a("IDATA",h,c,f);f+=
12+h.length;a("IEND",new Uint8Array(0),c,f);return w(c,"image/png",d)}}(),A=function(){function a(){this.fontSizeScale=1;this.fontWeight="normal";this.fontSize=0;this.textMatrix=d;this.fontMatrix=c;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.lineCap=this.lineJoin="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=
[];this.clipId="";this.pendingClip=!1;this.maskId=""}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};return a}();a=function(){function a(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");c.setAttributeNS(null,"version","1.1");c.setAttributeNS(null,"width",a+"px");c.setAttributeNS(null,"height",b+"px");c.setAttributeNS(null,"viewBox","0 0 "+a+" "+b);return c}function b(a){if(a===(a|0))return a.toString();a=a.toFixed(10);
var b=a.length-1;if("0"!==a[b])return a;do b--;while("0"===a[b]);return a.substr(0,"."===a[b]?b:b+1)}function e(a){if(0===a[4]&&0===a[5]){if(0===a[1]&&0===a[2])return 1===a[0]&&1===a[3]?"":"scale("+b(a[0])+" "+b(a[3])+")";if(a[0]===a[3]&&a[1]===-a[2])return"rotate("+b(180*Math.acos(a[0])/Math.PI)+")"}else if(1===a[0]&&0===a[1]&&0===a[2]&&1===a[3])return"translate("+b(a[4])+" "+b(a[5])+")";return"matrix("+b(a[0])+" "+b(a[1])+" "+b(a[2])+" "+b(a[3])+" "+b(a[4])+" "+b(a[5])+")"}function g(a,b,c){this.current=
new A;this.transformMatrix=d;this.transformStack=[];this.extraStack=[];this.commonObjs=a;this.objs=b;this.embedFonts=this.pendingEOFill=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!c}var h=["butt","round","square"],k=["miter","round","bevel"],x=0,H=0;g.prototype={save:function(){this.transformStack.push(this.transformMatrix);var a=this.current;this.extraStack.push(a);this.current=a.clone()},restore:function(){this.transformMatrix=this.transformStack.pop();this.current=
this.extraStack.pop();this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix));this.pgrp.appendChild(this.tgrp)},group:function(a){this.save();this.executeOpTree(a);this.restore()},loadDependencies:function(a){var b=a.fnArray,c=b.length;a=a.argsArray;for(var d=this,e=0;e<c;e++)if(f.dependency===b[e])for(var g=a[e],h=0,k=g.length;h<k;h++){var l=g[h];var n="g_"===l.substring(0,2)?new Promise(function(a){d.commonObjs.get(l,
a)}):new Promise(function(a){d.objs.get(l,a)});this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)},transform:function(a,b,c,d,f,g){this.transformMatrix=l.transform(this.transformMatrix,[a,b,c,d,f,g]);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix))},getSVG:function(b,c){this.svg=a(c.width,c.height);this.viewport=c;return this.loadDependencies(b).then(function(){this.transformMatrix=
d;this.pgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.pgrp.setAttributeNS(null,"transform",e(c.transform));this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix));this.defs=document.createElementNS("http://www.w3.org/2000/svg","svg:defs");this.pgrp.appendChild(this.defs);this.pgrp.appendChild(this.tgrp);this.svg.appendChild(this.pgrp);var a=this.convertOpList(b);this.executeOpTree(a);return this.svg}.bind(this))},
convertOpList:function(a){var b=a.argsArray,c=a.fnArray,d=c.length,e=[];a=[];for(var g in f)e[f[g]]=g;for(g=0;g<d;g++){var h=c[g];a.push({fnId:h,fn:e[h],args:b[g]})}b=[];c=[];d=a.length;for(e=0;e<d;e++)"save"===a[e].fn?(b.push({fnId:92,fn:"group",items:[]}),c.push(b),b=b[b.length-1].items):"restore"===a[e].fn?b=c.pop():b.push(a[e]);return b},executeOpTree:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c].fn,e=a[c].args;switch(a[c].fnId|0){case f.beginText:this.beginText();break;case f.setLeading:this.setLeading(e);
break;case f.setLeadingMoveText:this.setLeadingMoveText(e[0],e[1]);break;case f.setFont:this.setFont(e);break;case f.showText:this.showText(e[0]);break;case f.showSpacedText:this.showText(e[0]);break;case f.endText:this.endText();break;case f.moveText:this.moveText(e[0],e[1]);break;case f.setCharSpacing:this.setCharSpacing(e[0]);break;case f.setWordSpacing:this.setWordSpacing(e[0]);break;case f.setHScale:this.setHScale(e[0]);break;case f.setTextMatrix:this.setTextMatrix(e[0],e[1],e[2],e[3],e[4],e[5]);
break;case f.setLineWidth:this.setLineWidth(e[0]);break;case f.setLineJoin:this.setLineJoin(e[0]);break;case f.setLineCap:this.setLineCap(e[0]);break;case f.setMiterLimit:this.setMiterLimit(e[0]);break;case f.setFillRGBColor:this.setFillRGBColor(e[0],e[1],e[2]);break;case f.setStrokeRGBColor:this.setStrokeRGBColor(e[0],e[1],e[2]);break;case f.setDash:this.setDash(e[0],e[1]);break;case f.setGState:this.setGState(e[0]);break;case f.fill:this.fill();break;case f.eoFill:this.eoFill();break;case f.stroke:this.stroke();
break;case f.fillStroke:this.fillStroke();break;case f.eoFillStroke:this.eoFillStroke();break;case f.clip:this.clip("nonzero");break;case f.eoClip:this.clip("evenodd");break;case f.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case f.paintJpegXObject:this.paintJpegXObject(e[0],e[1],e[2]);break;case f.paintImageXObject:this.paintImageXObject(e[0]);break;case f.paintInlineImageXObject:this.paintInlineImageXObject(e[0]);break;case f.paintImageMaskXObject:this.paintImageMaskXObject(e[0]);
break;case f.paintFormXObjectBegin:this.paintFormXObjectBegin(e[0],e[1]);break;case f.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case f.closePath:this.closePath();break;case f.closeStroke:this.closeStroke();break;case f.closeFillStroke:this.closeFillStroke();break;case f.nextLine:this.nextLine();break;case f.transform:this.transform(e[0],e[1],e[2],e[3],e[4],e[5]);break;case f.constructPath:this.constructPath(e[0],e[1]);break;case f.endPath:this.endPath();break;case 92:this.group(a[c].items);
break;default:r("Unimplemented method "+d)}}},setWordSpacing:function(a){this.current.wordSpacing=a},setCharSpacing:function(a){this.current.charSpacing=a},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(a,c,d,e,f,g){var h=this.current;this.current.textMatrix=this.current.lineMatrix=[a,c,d,e,f,g];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;h.xcoords=[];h.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");h.tspan.setAttributeNS(null,
"font-family",h.fontFamily);h.tspan.setAttributeNS(null,"font-size",b(h.fontSize)+"px");h.tspan.setAttributeNS(null,"y",b(-h.y));h.txtElement=document.createElementNS("http://www.w3.org/2000/svg","svg:text");h.txtElement.appendChild(h.tspan)},beginText:function(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=d;this.current.lineMatrix=d;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.txtElement=document.createElementNS("http://www.w3.org/2000/svg",
"svg:text");this.current.txtgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.current.xcoords=[]},moveText:function(a,c){var d=this.current;this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=c;d.xcoords=[];d.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");d.tspan.setAttributeNS(null,"font-family",d.fontFamily);d.tspan.setAttributeNS(null,"font-size",b(d.fontSize)+"px");d.tspan.setAttributeNS(null,"y",b(-d.y))},showText:function(a){var c=
this.current,d=c.fontSize;if(0!==d){var f=c.charSpacing,g=c.wordSpacing,h=c.fontDirection,k=c.textHScale*h,l=a.length,p=c.font.vertical,r=d*c.fontMatrix[0],t=0,u;for(u=0;u<l;++u){var w=a[u];if(null===w)t+=h*g;else if(n(w))t+=-w*d*.001;else{c.xcoords.push(c.x+t*k);var x=w.fontChar;t+=w.width*r+f*h;c.tspan.textContent+=x}}p?c.y-=t*k:c.x+=t*k;c.tspan.setAttributeNS(null,"x",c.xcoords.map(b).join(" "));c.tspan.setAttributeNS(null,"y",b(-c.y));c.tspan.setAttributeNS(null,"font-family",c.fontFamily);c.tspan.setAttributeNS(null,
"font-size",b(c.fontSize)+"px");"normal"!==c.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle);"normal"!==c.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);"#000000"!==c.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor);c.txtElement.setAttributeNS(null,"transform",e(c.textMatrix)+" scale(1, -1)");c.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");c.txtElement.appendChild(c.tspan);c.txtgrp.appendChild(c.txtElement);
this.tgrp.appendChild(c.txtElement)}},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},addFontStyle:function(a){this.cssStyle||(this.cssStyle=document.createElementNS("http://www.w3.org/2000/svg","svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var b=w(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+a.loadedName+'"; src: url('+b+"); }\n"},setFont:function(a){var d=this.current,
e=this.commonObjs.get(a[0]);a=a[1];this.current.font=e;this.embedFonts&&e.data&&!this.embeddedFonts[e.loadedName]&&(this.addFontStyle(e),this.embeddedFonts[e.loadedName]=e);d.fontMatrix=e.fontMatrix?e.fontMatrix:c;var f=e.black?e.bold?"bolder":"bold":e.bold?"bold":"normal",g=e.italic?"italic":"normal";0>a?(a=-a,d.fontDirection=-1):d.fontDirection=1;d.fontSize=a;d.fontFamily=e.loadedName;d.fontWeight=f;d.fontStyle=g;d.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");d.tspan.setAttributeNS(null,
"y",b(-d.y));d.xcoords=[]},endText:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix))},setLineWidth:function(a){this.current.lineWidth=a},setLineCap:function(a){this.current.lineCap=h[a]},setLineJoin:function(a){this.current.lineJoin=k[a]},setMiterLimit:function(a){this.current.miterLimit=
a},setStrokeRGBColor:function(a,b,c){a=l.makeCssRgb(a,b,c);this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=l.makeCssRgb(a,b,c);this.current.fillColor=a;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.xcoords=[]},setDash:function(a,b){this.current.dashArray=a;this.current.dashPhase=b},constructPath:function(a,c){var d=this.current,e=d.x,g=d.y;d.path=document.createElementNS("http://www.w3.org/2000/svg","svg:path");for(var h=[],k=a.length,
l=0,m=0;l<k;l++)switch(a[l]|0){case f.rectangle:e=c[m++];g=c[m++];var n=c[m++],p=c[m++];n=e+n;p=g+p;h.push("M",b(e),b(g),"L",b(n),b(g),"L",b(n),b(p),"L",b(e),b(p),"Z");break;case f.moveTo:e=c[m++];g=c[m++];h.push("M",b(e),b(g));break;case f.lineTo:e=c[m++];g=c[m++];h.push("L",b(e),b(g));break;case f.curveTo:e=c[m+4];g=c[m+5];h.push("C",b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]),b(e),b(g));m+=6;break;case f.curveTo2:e=c[m+2];g=c[m+3];h.push("C",b(e),b(g),b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]));m+=4;break;
case f.curveTo3:e=c[m+2];g=c[m+3];h.push("C",b(c[m]),b(c[m+1]),b(e),b(g),b(e),b(g));m+=4;break;case f.closePath:h.push("Z")}d.path.setAttributeNS(null,"d",h.join(" "));d.path.setAttributeNS(null,"stroke-miterlimit",b(d.miterLimit));d.path.setAttributeNS(null,"stroke-linecap",d.lineCap);d.path.setAttributeNS(null,"stroke-linejoin",d.lineJoin);d.path.setAttributeNS(null,"stroke-width",b(d.lineWidth)+"px");d.path.setAttributeNS(null,"stroke-dasharray",d.dashArray.map(b).join(" "));d.path.setAttributeNS(null,
"stroke-dashoffset",b(d.dashPhase)+"px");d.path.setAttributeNS(null,"fill","none");this.tgrp.appendChild(d.path);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);d.element=d.path;d.setCurrentPoint(e,g)},endPath:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,
"transform",e(this.transformMatrix))},clip:function(a){var b=this.current;b.clipId="clippath"+x;x++;this.clippath=document.createElementNS("http://www.w3.org/2000/svg","svg:clipPath");this.clippath.setAttributeNS(null,"id",b.clipId);var c=b.element.cloneNode();"evenodd"===a?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero");this.clippath.setAttributeNS(null,"transform",e(this.transformMatrix));this.clippath.appendChild(c);this.defs.appendChild(this.clippath);
b.pendingClip=!0;this.cgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.cgrp.setAttributeNS(null,"clip-path","url(#"+b.clipId+")");this.pgrp.appendChild(this.cgrp)},closePath:function(){var a=this.current,b=a.path.getAttributeNS(null,"d");a.path.setAttributeNS(null,"d",b+"Z")},setLeading:function(a){this.current.leading=-a},setTextRise:function(a){this.current.textRise=a},setHScale:function(a){this.current.textHScale=a/100},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=
a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "Font":this.setFont(e)}}},fill:function(){var a=this.current;a.element.setAttributeNS(null,"fill",a.fillColor)},stroke:function(){var a=this.current;a.element.setAttributeNS(null,"stroke",a.strokeColor);a.element.setAttributeNS(null,"fill","none")},eoFill:function(){var a=this.current;
a.element.setAttributeNS(null,"fill",a.fillColor);a.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function(){this.stroke();this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()},closeStroke:function(){this.closePath();this.stroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},paintSolidColorImageMask:function(){var a=this.current,b=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");
b.setAttributeNS(null,"x","0");b.setAttributeNS(null,"y","0");b.setAttributeNS(null,"width","1px");b.setAttributeNS(null,"height","1px");b.setAttributeNS(null,"fill",a.fillColor);this.tgrp.appendChild(b)},paintJpegXObject:function(a,c,d){var e=this.current;a=this.objs.get(a);var f=document.createElementNS("http://www.w3.org/2000/svg","svg:image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);f.setAttributeNS(null,"width",a.width+"px");f.setAttributeNS(null,"height",a.height+
"px");f.setAttributeNS(null,"x","0");f.setAttributeNS(null,"y",b(-d));f.setAttributeNS(null,"transform","scale("+b(1/c)+" "+b(-1/d)+")");this.tgrp.appendChild(f);e.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):r("Dependent image isn't ready yet")},paintInlineImageXObject:function(a,c){var d=this.current,e=a.width,f=a.height;a=u(a,this.forceDataSchema);
var g=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y","0");g.setAttributeNS(null,"width",b(e));g.setAttributeNS(null,"height",b(f));d.element=g;this.clip("nonzero");g=document.createElementNS("http://www.w3.org/2000/svg","svg:image");g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y",b(-f));g.setAttributeNS(null,"width",b(e)+"px");g.setAttributeNS(null,"height",
b(f)+"px");g.setAttributeNS(null,"transform","scale("+b(1/e)+" "+b(-1/f)+")");c?c.appendChild(g):this.tgrp.appendChild(g);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageMaskXObject:function(a){var c=this.current,d=a.width,e=a.height,f=c.fillColor;c.maskId="mask"+H++;var g=document.createElementNS("http://www.w3.org/2000/svg","svg:mask");g.setAttributeNS(null,"id",c.maskId);var h=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");h.setAttributeNS(null,"x","0");h.setAttributeNS(null,"y","0");h.setAttributeNS(null,"width",b(d));h.setAttributeNS(null,"height",b(e));h.setAttributeNS(null,"fill",f);h.setAttributeNS(null,"mask","url(#"+c.maskId+")");this.defs.appendChild(g);this.tgrp.appendChild(h);this.paintInlineImageXObject(a,g)},paintFormXObjectBegin:function(a,c){this.save();p(a)&&6===a.length&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);if(p(c)&&4===c.length){a=c[2]-c[0];var d=c[3]-c[1],e=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");e.setAttributeNS(null,"x",c[0]);e.setAttributeNS(null,"y",c[1]);e.setAttributeNS(null,"width",b(a));e.setAttributeNS(null,"height",b(d));this.current.element=e;this.clip("nonzero");this.endPath()}},paintFormXObjectEnd:function(){this.restore()}};return g}();b.SVGGraphics=a});(function(b,a){a(b.pdfjsDisplayAnnotationLayer={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,a,c){function d(){}var e=a.AnnotationBorderStyleType,f=a.AnnotationType,h=a.Util,n=c.addLinkAttributes,
p=c.LinkTarget,r=c.getFilenameFromUrl,w=a.warn,u=c.CustomStyle,A=c.getDefaultSetting;d.prototype={create:function(a){switch(a.data.annotationType){case f.LINK:return new z(a);case f.TEXT:return new B(a);case f.WIDGET:return new D(a);case f.POPUP:return new y(a);case f.HIGHLIGHT:return new x(a);case f.UNDERLINE:return new H(a);case f.SQUIGGLY:return new F(a);case f.STRIKEOUT:return new m(a);case f.FILEATTACHMENT:return new q(a);default:return new t(a)}}};var t=function(){function a(a,b){this.isRenderable=
b||!1;this.data=a.data;this.layer=a.layer;this.page=a.page;this.viewport=a.viewport;this.linkService=a.linkService;this.downloadManager=a.downloadManager;this.imageResourcesPath=a.imageResourcesPath;b&&(this.container=this._createContainer())}a.prototype={_createContainer:function(){var a=this.data,b=this.page,c=this.viewport,d=document.createElement("section"),f=a.rect[2]-a.rect[0],g=a.rect[3]-a.rect[1];d.setAttribute("data-annotation-id",a.id);b=h.normalizeRect([a.rect[0],b.view[3]-a.rect[1]+b.view[1],
a.rect[2],b.view[3]-a.rect[3]+b.view[1]]);u.setProp("transform",d,"matrix("+c.transform.join(",")+")");u.setProp("transformOrigin",d,-b[0]+"px "+-b[1]+"px");if(0<a.borderStyle.width){d.style.borderWidth=a.borderStyle.width+"px";a.borderStyle.style!==e.UNDERLINE&&(f-=2*a.borderStyle.width,g-=2*a.borderStyle.width);c=a.borderStyle.horizontalCornerRadius;var k=a.borderStyle.verticalCornerRadius;(0<c||0<k)&&u.setProp("borderRadius",d,c+"px / "+k+"px");switch(a.borderStyle.style){case e.SOLID:d.style.borderStyle=
"solid";break;case e.DASHED:d.style.borderStyle="dashed";break;case e.BEVELED:w("Unimplemented border style: beveled");break;case e.INSET:w("Unimplemented border style: inset");break;case e.UNDERLINE:d.style.borderBottomStyle="solid"}a.color?d.style.borderColor=h.makeCssRgb(a.color[0]|0,a.color[1]|0,a.color[2]|0):d.style.borderWidth=0}d.style.left=b[0]+"px";d.style.top=b[1]+"px";d.style.width=f+"px";d.style.height=g+"px";return d},_createPopup:function(a,b,c){b||(b=document.createElement("div"),b.style.height=
a.style.height,b.style.width=a.style.width,a.appendChild(b));b=(new E({container:a,trigger:b,color:c.color,title:c.title,contents:c.contents,hideWrapper:!0})).render();b.style.left=a.style.width;a.appendChild(b)},render:function(){throw Error("Abstract method AnnotationElement.render called");}};return a}(),z=function(){function a(a){t.call(this,a,!0)}h.inherit(a,t,{render:function(){this.container.className="linkAnnotation";var a=document.createElement("a");n(a,{url:this.data.url,target:this.data.newWindow?
p.BLANK:void 0});this.data.url||(this.data.action?this._bindNamedAction(a,this.data.action):this._bindLink(a,this.data.dest||null));this.container.appendChild(a);return this.container},_bindLink:function(a,b){var c=this;a.href=this.linkService.getDestinationHash(b);a.onclick=function(){b&&c.linkService.navigateTo(b);return!1};b&&(a.className="internalLink")},_bindNamedAction:function(a,b){var c=this;a.href=this.linkService.getAnchorUrl("");a.onclick=function(){c.linkService.executeNamedAction(b);
return!1};a.className="internalLink"}});return a}(),B=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="textAnnotation";var a=document.createElement("img");a.style.height=this.container.style.height;a.style.width=this.container.style.width;a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";a.alt="[{{type}} Annotation]";a.dataset.l10nId="text_annotation_type";a.dataset.l10nArgs=
JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container}});return a}(),D=function(){function a(a){t.call(this,a,!a.data.hasAppearance&&!!a.data.fieldValue)}h.inherit(a,t,{render:function(){var a=document.createElement("div");a.textContent=this.data.fieldValue;a.style.textAlign=["left","center","right"][this.data.textAlignment];a.style.verticalAlign="middle";a.style.display="table-cell";var b=this.data.fontRefName?
this.page.commonObjs.getData(this.data.fontRefName):null;this._setTextStyle(a,b);this.container.appendChild(a);return this.container},_setTextStyle:function(a,b){a=a.style;a.fontSize=this.data.fontSize+"px";a.direction=0>this.data.fontDirection?"rtl":"ltr";b&&(a.fontWeight=b.black?b.bold?"900":"bold":b.bold?"bold":"normal",a.fontStyle=b.italic?"italic":"normal",a.fontFamily=(b.loadedName?'"'+b.loadedName+'", ':"")+(b.fallbackName||"Helvetica, sans-serif"))}});return a}(),y=function(){function a(a){t.call(this,
a,!(!a.data.title&&!a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="popupAnnotation";var a=this.layer.querySelector('[data-annotation-id="'+this.data.parentId+'"]');if(!a)return this.container;var b=new E({container:this.container,trigger:a,color:this.data.color,title:this.data.title,contents:this.data.contents}),c=parseFloat(a.style.left),d=parseFloat(a.style.width);u.setProp("transformOrigin",this.container,-(c+d)+"px -"+a.style.top);this.container.style.left=c+d+"px";
this.container.appendChild(b.render());return this.container}});return a}(),E=function(){function a(a){this.container=a.container;this.trigger=a.trigger;this.color=a.color;this.title=a.title;this.contents=a.contents;this.hideWrapper=a.hideWrapper||!1;this.pinned=!1}a.prototype={render:function(){var a=document.createElement("div");a.className="popupWrapper";this.hideElement=this.hideWrapper?a:this.container;this.hideElement.setAttribute("hidden",!0);var b=document.createElement("div");b.className=
"popup";var c=this.color;c&&(b.style.backgroundColor=h.makeCssRgb(.7*(255-c[0])+c[0]|0,.7*(255-c[1])+c[1]|0,.7*(255-c[2])+c[2]|0));c=this._formatContents(this.contents);var d=document.createElement("h1");d.textContent=this.title;this.trigger.addEventListener("click",this._toggle.bind(this));this.trigger.addEventListener("mouseover",this._show.bind(this,!1));this.trigger.addEventListener("mouseout",this._hide.bind(this,!1));b.addEventListener("click",this._hide.bind(this,!0));b.appendChild(d);b.appendChild(c);
a.appendChild(b);return a},_formatContents:function(a){var b=document.createElement("p");a=a.split(/(?:\r\n?|\n)/);for(var c=0,d=a.length;c<d;++c)b.appendChild(document.createTextNode(a[c])),c<d-1&&b.appendChild(document.createElement("br"));return b},_toggle:function(){this.pinned?this._hide(!0):this._show(!0)},_show:function(a){a&&(this.pinned=!0);this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function(a){a&&(this.pinned=
!1);this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),--this.container.style.zIndex)}};return a}(),x=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="highlightAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),H=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||
a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="underlineAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),F=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="squigglyAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),m=function(){function a(a){t.call(this,
a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="strikeoutAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),q=function(){function a(a){t.call(this,a,!0);this.filename=r(a.data.file.filename);this.content=a.data.file.content}h.inherit(a,t,{render:function(){this.container.className="fileAttachmentAnnotation";var a=document.createElement("div");a.style.height=this.container.style.height;
a.style.width=this.container.style.width;a.addEventListener("dblclick",this._download.bind(this));this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container},_download:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):w("Download cannot be started due to unavailable download manager")}});return a}();a=function(){return{render:function(a){for(var b=new d,
c=0,e=a.annotations.length;c<e;c++){var f=a.annotations[c];f&&(f={data:f,layer:a.div,page:a.page,viewport:a.viewport,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||A("imageResourcesPath")},f=b.create(f),f.isRenderable&&a.div.appendChild(f.render()))}},update:function(a){for(var b=0,c=a.annotations.length;b<c;b++){var d=a.div.querySelector('[data-annotation-id="'+a.annotations[b].id+'"]');d&&u.setProp("transform",d,"matrix("+a.viewport.transform.join(",")+
")")}a.div.removeAttribute("hidden")}}}();b.AnnotationLayer=a});(function(b,a){a(b.pdfjsDisplayTextLayer={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,a,c){var d=a.Util,e=a.createPromiseCapability,f=c.CustomStyle,h=c.getDefaultSetting;a=function(){function a(a,b,c,e){e=e[c.fontName];var f=document.createElement("div");a.push(f);if(g.test(c.str)){var k=d.transform(b.transform,c.transform);a=Math.atan2(k[1],k[0]);e.vertical&&(a+=Math.PI/2);var l=Math.sqrt(k[2]*k[2]+k[3]*k[3]),n=l;e.ascent?
n*=e.ascent:e.descent&&(n*=1+e.descent);if(0===a){var p=k[4];k=k[5]-n}else p=k[4]+n*Math.sin(a),k=k[5]-n*Math.cos(a);f.style.left=p+"px";f.style.top=k+"px";f.style.fontSize=l+"px";f.style.fontFamily=e.fontFamily;f.textContent=c.str;h("pdfBug")&&(f.dataset.fontName=c.fontName);0!==a&&(f.dataset.angle=180/Math.PI*a);1<c.str.length&&(f.dataset.canvasWidth=e.vertical?c.height*b.scale:c.width*b.scale)}else f.dataset.isWhitespace=!0}function b(a){if(!a._canceled){var b=a._container,c=a._textDivs;a=a._capability;
var d=c.length;if(!(1E5<d)){var e=document.createElement("canvas");e.mozOpaque=!0;e=e.getContext("2d",{alpha:!1});for(var g,h,k=0;k<d;k++){var l=c[k];if(void 0===l.dataset.isWhitespace){var n=l.style.fontSize,p=l.style.fontFamily;if(n!==g||p!==h)e.font=n+" "+p,g=n,h=p;n=e.measureText(l.textContent).width;0<n&&(b.appendChild(l),n=void 0!==l.dataset.canvasWidth?"scaleX("+l.dataset.canvasWidth/n+")":"",(p=l.dataset.angle)&&(n="rotate("+p+"deg) "+n),n&&f.setProp("transform",l,n))}}}a.resolve()}}function c(a,
b,c,d){this._textContent=a;this._container=b;this._viewport=c;this._textDivs=d=d||[];this._canceled=!1;this._capability=e();this._renderTimer=null}var g=/\S/;c.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0;null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null);this._capability.reject("canceled")},_render:function(c){for(var d=this._textContent.items,e=this._textContent.styles,f=this._textDivs,g=this._viewport,h=0,k=d.length;h<
k;h++)a(f,g,d[h],e);if(c){var l=this;this._renderTimer=setTimeout(function(){b(l);l._renderTimer=null},c)}else b(this)}};return function(a){var b=new c(a.textContent,a.container,a.viewport,a.textDivs);b._render(a.timeout);return b}}();b.renderTextLayer=a});(function(b,a){a(b.pdfjsDisplayWebGL={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,a,c){var d=a.shadow,e=c.getDefaultSetting;a=function(){function a(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,
a.COMPILE_STATUS))throw a=a.getShaderInfoLog(c),Error("Error during shader compilation: "+a);return c}function b(a,b){for(var c=a.createProgram(),d=0,e=b.length;d<e;++d)a.attachShader(c,b[d]);a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw a=a.getProgramInfoLog(c),Error("Error during program linking: "+a);return c}function c(a,b,c){a.activeTexture(c);c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c}function f(){g||(h=document.createElement("canvas"),g=h.getContext("webgl",{premultipliedalpha:!1}))}var g,h,u=null,A=null;return{get isEnabled(){if(e("disableWebGL"))return!1;var a=!1;try{f(),a=!!g}catch(z){}return d(this,"isEnabled",a)},composeSMask:function(d,e,k){var l=d.width,
n=d.height;if(!u){f();var p=h;h=null;var r=g;g=null;var t=a(r,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
r.VERTEX_SHADER),w=a(r,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
r.FRAGMENT_SHADER),m=b(r,[t,w]);r.useProgram(m);t={};t.gl=r;t.canvas=p;t.resolutionLocation=r.getUniformLocation(m,"u_resolution");t.positionLocation=r.getAttribLocation(m,"a_position");t.backdropLocation=r.getUniformLocation(m,"u_backdrop");t.subtypeLocation=r.getUniformLocation(m,"u_subtype");p=r.getAttribLocation(m,"a_texCoord");w=r.getUniformLocation(m,"u_image");m=r.getUniformLocation(m,"u_mask");var q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q);r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,
0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW);r.enableVertexAttribArray(p);r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0);r.uniform1i(w,0);r.uniform1i(m,1);u=t}r=u;t=r.canvas;p=r.gl;t.width=l;t.height=n;p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight);p.uniform2f(r.resolutionLocation,l,n);k.backdrop?p.uniform4f(r.resolutionLocation,k.backdrop[0],k.backdrop[1],k.backdrop[2],1):p.uniform4f(r.resolutionLocation,0,0,0,0);p.uniform1i(r.subtypeLocation,"Luminosity"===k.subtype?1:0);d=c(p,d,p.TEXTURE0);e=
c(p,e,p.TEXTURE1);k=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,k);p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,l,0,0,n,0,n,l,0,l,n]),p.STATIC_DRAW);p.enableVertexAttribArray(r.positionLocation);p.vertexAttribPointer(r.positionLocation,2,p.FLOAT,!1,0,0);p.clearColor(0,0,0,0);p.enable(p.BLEND);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);p.clear(p.COLOR_BUFFER_BIT);p.drawArrays(p.TRIANGLES,0,6);p.flush();p.deleteTexture(d);p.deleteTexture(e);p.deleteBuffer(k);return t},drawFigures:function(c,d,e,
k,l){if(!A){f();var n=h;h=null;var p=g;g=null;var r=a(p,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
p.VERTEX_SHADER),t=a(p,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",p.FRAGMENT_SHADER);r=b(p,[r,
t]);p.useProgram(r);t={};t.gl=p;t.canvas=n;t.resolutionLocation=p.getUniformLocation(r,"u_resolution");t.scaleLocation=p.getUniformLocation(r,"u_scale");t.offsetLocation=p.getUniformLocation(r,"u_offset");t.positionLocation=p.getAttribLocation(r,"a_position");t.colorLocation=p.getAttribLocation(r,"a_color");A=t}n=A;p=n.canvas;r=n.gl;p.width=c;p.height=d;r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight);r.uniform2f(n.resolutionLocation,c,d);c=0;var m;var q=0;for(m=k.length;q<m;q++)switch(k[q].type){case "lattice":var u=
k[q].coords.length/k[q].verticesPerRow|0;c+=(u-1)*(k[q].verticesPerRow-1)*6;break;case "triangles":c+=k[q].coords.length}t=new Float32Array(2*c);d=new Uint8Array(3*c);var w=l.coords,z=l.colors,y=0,B=0;q=0;for(m=k.length;q<m;q++){u=k[q];var D=u.coords,W=u.colors;switch(u.type){case "lattice":var X=u.verticesPerRow;u=D.length/X|0;for(var aa=1;aa<u;aa++)for(var U=aa*X+1,Z=1;Z<X;Z++,U++)t[y]=w[D[U-X-1]],t[y+1]=w[D[U-X-1]+1],t[y+2]=w[D[U-X]],t[y+3]=w[D[U-X]+1],t[y+4]=w[D[U-1]],t[y+5]=w[D[U-1]+1],d[B]=
z[W[U-X-1]],d[B+1]=z[W[U-X-1]+1],d[B+2]=z[W[U-X-1]+2],d[B+3]=z[W[U-X]],d[B+4]=z[W[U-X]+1],d[B+5]=z[W[U-X]+2],d[B+6]=z[W[U-1]],d[B+7]=z[W[U-1]+1],d[B+8]=z[W[U-1]+2],t[y+6]=t[y+2],t[y+7]=t[y+3],t[y+8]=t[y+4],t[y+9]=t[y+5],t[y+10]=w[D[U]],t[y+11]=w[D[U]+1],d[B+9]=d[B+3],d[B+10]=d[B+4],d[B+11]=d[B+5],d[B+12]=d[B+6],d[B+13]=d[B+7],d[B+14]=d[B+8],d[B+15]=z[W[U]],d[B+16]=z[W[U]+1],d[B+17]=z[W[U]+2],y+=12,B+=18;break;case "triangles":for(u=0,X=D.length;u<X;u++)t[y]=w[D[u]],t[y+1]=w[D[u]+1],d[B]=z[W[u]],d[B+
1]=z[W[u]+1],d[B+2]=z[W[u]+2],y+=2,B+=3}}e?r.clearColor(e[0]/255,e[1]/255,e[2]/255,1):r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT);e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e);r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW);r.enableVertexAttribArray(n.positionLocation);r.vertexAttribPointer(n.positionLocation,2,r.FLOAT,!1,0,0);k=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,k);r.bufferData(r.ARRAY_BUFFER,d,r.STATIC_DRAW);r.enableVertexAttribArray(n.colorLocation);r.vertexAttribPointer(n.colorLocation,
3,r.UNSIGNED_BYTE,!1,0,0);r.uniform2f(n.scaleLocation,l.scaleX,l.scaleY);r.uniform2f(n.offsetLocation,l.offsetX,l.offsetY);r.drawArrays(r.TRIANGLES,0,c);r.flush();r.deleteBuffer(e);r.deleteBuffer(k);return p},clear:function(){u&&u.canvas&&(u.canvas.width=0,u.canvas.height=0);A&&A.canvas&&(A.canvas.width=0,A.canvas.height=0);A=u=null}}}();b.WebGLUtils=a});(function(b,a){a(b.pdfjsDisplayPatternHelper={},b.pdfjsSharedUtil,b.pdfjsDisplayWebGL)})(this,function(b,a,c){var d=a.Util,e=a.info,f=a.isArray,
h=a.error,n=c.WebGLUtils,p={RadialAxial:{fromIR:function(a){var b=a[1],c=a[2],d=a[3],e=a[4],f=a[5],g=a[6];return{type:"Pattern",getPattern:function(a){var h;"axial"===b?h=a.createLinearGradient(d[0],d[1],e[0],e[1]):"radial"===b&&(h=a.createRadialGradient(d[0],d[1],f,e[0],e[1],g));a=0;for(var k=c.length;a<k;++a){var l=c[a];h.addColorStop(l[0],l[1])}return h}}}}},r=function(){function a(a,b,c,d,e,f,g,h){var k=b.coords,l=b.colors,n=a.data;a=4*a.width;if(k[c+1]>k[d+1]){var m=c;c=d;d=m;m=f;f=g;g=m}k[d+
1]>k[e+1]&&(m=d,d=e,e=m,m=g,g=h,h=m);k[c+1]>k[d+1]&&(m=c,c=d,d=m,m=f,f=g,g=m);m=(k[c]+b.offsetX)*b.scaleX;c=(k[c+1]+b.offsetY)*b.scaleY;var p=(k[d]+b.offsetX)*b.scaleX;d=(k[d+1]+b.offsetY)*b.scaleY;var r=(k[e]+b.offsetX)*b.scaleX;b=(k[e+1]+b.offsetY)*b.scaleY;if(!(c>=b)){e=l[f];k=l[f+1];f=l[f+2];var t=l[g],u=l[g+1];g=l[g+2];var w=l[h],A=l[h+1];h=l[h+2];l=Math.round(b);for(var z,y,B,D,E,Z,sa,ca,ea,la=Math.round(c);la<=l;la++){la<d?(ea=la<c?0:c===d?1:(c-la)/(c-d),z=m-(m-p)*ea,y=e-(e-t)*ea,B=k-(k-u)*
ea,D=f-(f-g)*ea):(ea=la>b?1:d===b?0:(d-la)/(d-b),z=p-(p-r)*ea,y=t-(t-w)*ea,B=u-(u-A)*ea,D=g-(g-h)*ea);ea=la<c?0:la>b?1:(c-la)/(c-b);E=m-(m-r)*ea;Z=e-(e-w)*ea;sa=k-(k-A)*ea;ca=f-(f-h)*ea;ea=Math.round(Math.min(z,E));for(var Aa=Math.round(Math.max(z,E)),Qa=a*la+4*ea,yb=ea;yb<=Aa;yb++)ea=(z-yb)/(z-E),ea=0>ea?0:1<ea?1:ea,n[Qa++]=y-(y-Z)*ea|0,n[Qa++]=B-(B-sa)*ea|0,n[Qa++]=D-(D-ca)*ea|0,n[Qa++]=255}}}return function(b,c,d,e,f,g,k){var l=Math.floor(b[0]),p=Math.floor(b[1]),r=Math.ceil(b[2])-l;b=Math.ceil(b[3])-
p;var t=Math.min(Math.ceil(Math.abs(r*c[0]*1.1)),3E3);c=Math.min(Math.ceil(Math.abs(b*c[1]*1.1)),3E3);r/=t;b/=c;d={coords:d,colors:e,offsetX:-l,offsetY:-p,scaleX:1/r,scaleY:1/b};e=t+4;var m=c+4;if(n.isEnabled)f=n.drawFigures(t,c,g,f,d),k=k.getCanvas("mesh",e,m,!1),k.context.drawImage(f,2,2);else{k=k.getCanvas("mesh",e,m,!1);e=k.context;c=e.createImageData(t,c);if(g){var q=c.data;t=0;for(m=q.length;t<m;t+=4)q[t]=g[0],q[t+1]=g[1],q[t+2]=g[2],q[t+3]=255}for(t=0;t<f.length;t++){g=c;var u=f[t];m=d;q=u.coords;
var w=u.colors;switch(u.type){case "lattice":var A=u.verticesPerRow;var z=Math.floor(q.length/A)-1,y=A-1;for(u=0;u<z;u++)for(var B=u*A,D=0;D<y;D++,B++)a(g,m,q[B],q[B+1],q[B+A],w[B],w[B+1],w[B+A]),a(g,m,q[B+A+1],q[B+1],q[B+A],w[B+A+1],w[B+1],w[B+A]);break;case "triangles":u=0;for(A=q.length;u<A;u+=3)a(g,m,q[u],q[u+1],q[u+2],w[u],w[u+1],w[u+2]);break;default:h("illigal figure")}}e.putImageData(c,2,2)}f=k.canvas;return{canvas:f,offsetX:l-2*r,offsetY:p-2*b,scaleX:r,scaleY:b}}}();p.Mesh={fromIR:function(a){var b=
a[2],c=a[3],e=a[4],f=a[5],g=a[6],h=a[8];return{type:"Pattern",getPattern:function(a,k,l){if(l)var n=d.singularValueDecompose2dScale(a.mozCurrentTransform);else if(n=d.singularValueDecompose2dScale(k.baseTransform),g){var p=d.singularValueDecompose2dScale(g);n=[n[0]*p[0],n[1]*p[1]]}n=r(f,n,b,c,e,l?null:h,k.cachedCanvases);l||(a.setTransform.apply(a,k.baseTransform),g&&a.transform.apply(a,g));a.translate(n.offsetX,n.offsetY);a.scale(n.scaleX,n.scaleY);return a.createPattern(n.canvas,"no-repeat")}}}};
p.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};a=function(){function a(a,b,c,d,e){this.operatorList=a[2];this.matrix=a[3]||[1,0,0,1,0,0];this.bbox=a[4];this.xstep=a[5];this.ystep=a[6];this.paintType=a[7];this.tilingType=a[8];this.color=b;this.canvasGraphicsFactory=d;this.baseTransform=e;this.type="Pattern";this.ctx=c}a.prototype={createPatternCanvas:function(a){var b=this.operatorList,c=this.bbox,f=this.xstep,g=this.ystep,h=this.paintType,k=this.color,l=
this.canvasGraphicsFactory;e("TilingType: "+this.tilingType);var n=c[0],p=c[1],r=c[2],m=c[3],q=[n,p],u=[n+f,p+g],w=u[0]-q[0];u=u[1]-q[1];var M=d.singularValueDecompose2dScale(this.matrix),S=d.singularValueDecompose2dScale(this.baseTransform);M=[M[0]*S[0],M[1]*S[1]];w=Math.min(Math.ceil(Math.abs(w*M[0])),3E3);u=Math.min(Math.ceil(Math.abs(u*M[1])),3E3);M=a.cachedCanvases.getCanvas("pattern",w,u,!0);S=M.context;l=l.createCanvasGraphics(S);l.groupLevel=a.groupLevel;this.setFillAndStrokeStyleToContext(S,
h,k);this.setScale(w,u,f,g);this.transformToScale(l);l.transform.apply(l,[1,0,0,1,-q[0],-q[1]]);this.clipBbox(l,c,n,p,r,m);l.executeOperatorList(b);return M.canvas},setScale:function(a,b,c,d){this.scale=[a/c,b/d]},transformToScale:function(a){var b=this.scale;a.transform.apply(a,[b[0],0,0,b[1],0,0])},scaleToContext:function(){var a=this.scale;this.ctx.scale(1/a[0],1/a[1])},clipBbox:function(a,b,c,d,e,g){b&&f(b)&&4===b.length&&(a.ctx.rect(c,d,e-c,g-d),a.clip(),a.endPath())},setFillAndStrokeStyleToContext:function(a,
b,c){switch(b){case 1:b=this.ctx;a.fillStyle=b.fillStyle;a.strokeStyle=b.strokeStyle;break;case 2:b=d.makeCssRgb(c[0],c[1],c[2]);a.fillStyle=b;a.strokeStyle=b;break;default:h("Unsupported paint type: "+b)}},getPattern:function(a,b){b=this.createPatternCanvas(b);a=this.ctx;a.setTransform.apply(a,this.baseTransform);a.transform.apply(a,this.matrix);this.scaleToContext();return a.createPattern(b,"repeat")}};return a}();b.getShadingPatternFromIR=function(a){var b=p[a[0]];b||h("Unknown IR type: "+a[0]);
return b.fromIR(a)};b.TilingPattern=a});(function(b,a){a(b.pdfjsDisplayCanvas={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils,b.pdfjsDisplayPatternHelper,b.pdfjsDisplayWebGL)})(this,function(b,a,c,d,e){function f(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c}function g(a){a.mozCurrentTransform||(a._originalSave=a.save,a._originalRestore=a.restore,a._originalRotate=a.rotate,a._originalScale=a.scale,a._originalTranslate=a.translate,a._originalTransform=a.transform,a._originalSetTransform=
a.setTransform,a._transformMatrix=a._transformMatrix||[1,0,0,1,0,0],a._transformStack=[],Object.defineProperty(a,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(a,"mozCurrentTransformInverse",{get:function(){var a=this._transformMatrix,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4];a=a[5];var g=b*e-c*d,h=c*d-b*e;return[e/g,c/h,d/h,b/g,(e*f-d*a)/h,(c*f-b*a)/g]}}),a.save=function(){var a=this._transformMatrix;this._transformStack.push(a);this._transformMatrix=a.slice(0,
6);this._originalSave()},a.restore=function(){var a=this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},a.translate=function(a,b){var c=this._transformMatrix;c[4]=c[0]*a+c[2]*b+c[4];c[5]=c[1]*a+c[3]*b+c[5];this._originalTranslate(a,b)},a.scale=function(a,b){var c=this._transformMatrix;c[0]*=a;c[1]*=a;c[2]*=b;c[3]*=b;this._originalScale(a,b)},a.transform=function(b,c,d,e,f,g){var h=this._transformMatrix;this._transformMatrix=[h[0]*b+h[2]*c,h[1]*b+h[3]*c,h[0]*d+h[2]*e,h[1]*
d+h[3]*e,h[0]*f+h[2]*g+h[4],h[1]*f+h[3]*g+h[5]];a._originalTransform(b,c,d,e,f,g)},a.setTransform=function(b,c,d,e,f,g){this._transformMatrix=[b,c,d,e,f,g];a._originalSetTransform(b,c,d,e,f,g)},a.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this._transformMatrix;this._transformMatrix=[d[0]*b+d[2]*c,d[1]*b+d[3]*c,d[0]*-c+d[2]*b,d[1]*-c+d[3]*b,d[4],d[5]];this._originalRotate(a)})}function h(a){var b=a.width,c=a.height,d,e=b+1,f=new Uint8Array(e*(c+1)),g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,
0,8,0,2,1,0]),h=b+7&-8,k=a.data,l=new Uint8Array(h*c),m=0;a=0;for(d=k.length;a<d;a++){var n=128;for(var p=k[a];0<n;)l[m++]=p&n?0:255,n>>=1}m=k=0;0!==l[m]&&(f[0]=1,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[d]=l[m]?2:1,++k),m++;0!==l[m]&&(f[d]=2,++k);for(a=1;a<c;a++){m=a*h;n=a*e;l[m-h]!==l[m]&&(f[n]=l[m]?1:8,++k);p=(l[m]?4:0)+(l[m-h]?8:0);for(d=1;d<b;d++)p=(p>>2)+(l[m+1]?4:0)+(l[m-h+1]?8:0),g[p]&&(f[n+d]=g[p],++k),m++;l[m-h]!==l[m]&&(f[n+d]=l[m]?2:4,++k);if(1E3<k)return null}m=h*(c-1);n=a*e;0!==l[m]&&
(f[n]=8,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[n+d]=l[m]?4:8,++k),m++;0!==l[m]&&(f[n+d]=4,++k);if(1E3<k)return null;g=new Int32Array([0,e,-1,0,-e,0,0,0,1]);var q=[];for(a=0;k&&a<=c;a++){h=a*e;for(l=h+b;h<l&&!f[h];)h++;if(h!==l){l=[h%e,a];m=f[h];d=h;do{n=g[m];do h+=n;while(!f[h]);n=f[h];5!==n&&10!==n?(m=n,f[h]=0):(m=n&51*m>>4,f[h]&=m>>2|m<<2);l.push(h%e);l.push(h/e|0);--k}while(d!==h);q.push(l);--a}}return function(a){a.save();a.scale(1/b,-1/c);a.translate(0,-c);a.beginPath();for(var d=0,e=q.length;d<
e;d++){var f=q[d];a.moveTo(f[0],f[1]);for(var g=2,h=f.length;g<h;g+=2)a.lineTo(f[g],f[g+1])}a.fill();a.beginPath();a.restore()}}var p=a.FONT_IDENTITY_MATRIX,r=a.IDENTITY_MATRIX,w=a.ImageKind,u=a.OPS,A=a.TextRenderingMode,t=a.Uint32ArrayView,z=a.Util,B=a.assert,D=a.info,y=a.isNum,E=a.isArray,x=a.isLittleEndian,H=a.error,F=a.shadow,m=a.warn,q=d.TilingPattern,G=d.getShadingPatternFromIR,I=e.WebGLUtils,M=c.hasCanvasTypedArrays,S={get value(){return F(S,"value",M())}},ia={get value(){return F(ia,"value",
x())}},za=function(){function a(){this.cache=Object.create(null)}a.prototype={getCanvas:function(a,b,c,d){void 0!==this.cache[a]?(a=this.cache[a],a.canvas.width=b,a.canvas.height=c,a.context.setTransform(1,0,0,1,0,0)):(b=f(b,c),c=b.getContext("2d"),d&&g(c),this.cache[a]=a={canvas:b,context:c});return a},clear:function(){for(var a in this.cache){var b=this.cache[a];b.canvas.width=0;b.canvas.height=0;delete this.cache[a]}}};return a}(),W=function(){function a(a){this.alphaIsShape=!1;this.fontSize=0;
this.fontSizeScale=1;this.textMatrix=r;this.textMatrixScale=1;this.fontMatrix=p;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRenderingMode=A.FILL;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.patternFill=!1;this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.resumeSMaskCtx=this.activeSMask=null;this.old=a}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};
return a}();a=function(){function a(a,b,c,d){this.ctx=a;this.current=new W;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.xobjs=this.res=null;this.commonObjs=b;this.objs=c;this.imageLayer=d;this.groupStack=[];this.baseTransform=this.processingType3=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.cachedCanvases=new za;a&&g(a);this.cachedGetSinglePixelWidth=null}function b(a,b){if("undefined"!==typeof ImageData&&
b instanceof ImageData)a.putImageData(b,0,0);else{var c=b.height,d=b.width,e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0,k=b.data,l=g.data,m,n;if(b.kind===w.GRAYSCALE_1BPP){var p=k.byteLength;l=S.value?new Uint32Array(l.buffer):new t(l);var q=l.length,r=d+7>>3,u=ia.value||!S.value?4278190080:255;for(m=0;m<f;m++){var x=m<c?16:e;for(n=b=0;n<x;n++){var A=p-h,z=0;A=A>r?d:8*A-7;for(var y=A&-8,mb=0,Ia=0;z<y;z+=8)Ia=k[h++],l[b++]=Ia&128?4294967295:u,l[b++]=Ia&64?4294967295:u,l[b++]=Ia&
32?4294967295:u,l[b++]=Ia&16?4294967295:u,l[b++]=Ia&8?4294967295:u,l[b++]=Ia&4?4294967295:u,l[b++]=Ia&2?4294967295:u,l[b++]=Ia&1?4294967295:u;for(;z<A;z++)0===mb&&(Ia=k[h++],mb=128),l[b++]=Ia&mb?4294967295:u,mb>>=1}for(;b<q;)l[b++]=0;a.putImageData(g,0,16*m)}}else if(b.kind===w.RGBA_32BPP){n=0;x=64*d;for(m=0;m<c;m++)l.set(k.subarray(h,h+x)),h+=x,a.putImageData(g,0,n),n+=16;m<f&&(l.set(k.subarray(h,h+d*e*4)),a.putImageData(g,0,n))}else if(b.kind===w.RGB_24BPP)for(x=16*d,m=0;m<f;m++){m>=c&&(x=e,x*=
d);b=0;for(n=x;n--;)l[b++]=k[h++],l[b++]=k[h++],l[b++]=k[h++],l[b++]=255;a.putImageData(g,0,16*m)}else H("bad image kind: "+b.kind)}}function c(a,b){var c=b.height,d=b.width,e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0;b=b.data;for(var k=g.data,l=0;l<f;l++){for(var m=l<c?16:e,n=3,p=0;p<m;p++)for(var q=0,r=0;r<d;r++){if(!q){var t=b[h++];q=128}k[n]=t&q?0:255;n+=4;q>>=1}a.putImageData(g,0,16*l)}}function d(a,b){for(var c="strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font".split(" "),
d=0,e=c.length;d<e;d++){var f=c[d];void 0!==a[f]&&(b[f]=a[f])}void 0!==a.setLineDash?(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset):void 0!==a.mozDashOffset&&(b.mozDash=a.mozDash,b.mozDashOffset=a.mozDashOffset)}function e(a,b,c){for(var d=a.length,e=1/255,f=3;f<d;f+=4)b[f]=b[f]*(c?c[a[f]]:a[f])*e|0}function f(a,b,c){for(var d=a.length,e=3;e<d;e+=4){var f=77*a[e-3]+152*a[e-2]+28*a[e-1];b[e]=c?b[e]*c[f>>8]>>8:b[e]*f>>16}}function k(a,b,c){var d=b.canvas,g=b.context;a.setTransform(b.scaleX,
0,0,b.scaleY,b.offsetX,b.offsetY);var h=b.backdrop||null;if(!b.transferMap&&I.isEnabled)c=I.composeSMask(c.canvas,d,{subtype:b.subtype,backdrop:h}),a.setTransform(1,0,0,1,0,0),a.drawImage(c,b.offsetX,b.offsetY);else{var k=d.width,l=d.height,m=b.transferMap,n=!!h,p=n?h[0]:0,q=n?h[1]:0;h=n?h[2]:0;b="Luminosity"===b.subtype?f:e;for(var r=Math.min(l,Math.ceil(1048576/k)),t=0;t<l;t+=r){var u=Math.min(r,l-t),w=g.getImageData(0,t,k,u);u=c.getImageData(0,t,k,u);if(n)for(var x=w.data,A=p,z=q,y=h,mb=x.length,
Ia=3;Ia<mb;Ia+=4){var B=x[Ia];if(0===B)x[Ia-3]=A,x[Ia-2]=z,x[Ia-1]=y;else if(255>B){var F=255-B;x[Ia-3]=x[Ia-3]*B+A*F>>8;x[Ia-2]=x[Ia-2]*B+z*F>>8;x[Ia-1]=x[Ia-1]*B+y*F>>8}}b(w.data,u.data,m);g.putImageData(u,0,t)}a.drawImage(d,0,0)}}var l=["butt","round","square"],n=["miter","round","bevel"],x={},M={};a.prototype={beginDrawing:function(a,b,c){var d=this.ctx.canvas.width,e=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle="rgb(255, 255, 255)";this.ctx.fillRect(0,0,d,e);this.ctx.restore();c&&
(c=this.cachedCanvases.getCanvas("transparent",d,e,!0),this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform));this.ctx.save();a&&this.ctx.transform.apply(this.ctx,a);this.ctx.transform.apply(this.ctx,b.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,b,c,d){var e=a.argsArray;a=a.fnArray;b=b||
0;var f=e.length;if(f===b)return b;for(var g=10<f-b&&"function"===typeof c,h=g?Date.now()+15:0,k=0,l=this.commonObjs,m=this.objs,n;;){if(void 0!==d&&b===d.nextBreakPoint)return d.breakIt(b,c),b;n=a[b];if(n!==u.dependency)this[n].apply(this,e[b]);else{n=e[b];for(var p=0,q=n.length;p<q;p++){var r=n[p],t="g"===r[0]&&"_"===r[1]?l:m;if(!t.isResolved(r))return t.get(r,c),b}}b++;if(b===f)return b;if(g&&10<++k){if(Date.now()>h)return c(),b;k=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup();
this.ctx.restore();this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null);this.cachedCanvases.clear();I.clear();this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a;this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=l[a]},setLineJoin:function(a){this.ctx.lineJoin=n[a]},setMiterLimit:function(a){this.ctx.miterLimit=
a},setDash:function(a,b){var c=this.ctx;void 0!==c.setLineDash?(c.setLineDash(a),c.lineDashOffset=b):(c.mozDash=a,c.mozDashOffset=b)},setRenderingIntent:function(a){},setFlatness:function(a){},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "RI":this.setRenderingIntent(e);break;
case "FL":this.setFlatness(e);break;case "Font":this.setFont(e[0],e[1]);break;case "CA":this.current.strokeAlpha=d[1];break;case "ca":this.current.fillAlpha=d[1];this.ctx.globalAlpha=d[1];break;case "BM":e&&e.name&&"Normal"!==e.name?(d=e.name.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).substring(1),this.ctx.globalCompositeOperation=d,this.ctx.globalCompositeOperation!==d&&m('globalCompositeOperation "'+d+'" is not supported')):this.ctx.globalCompositeOperation="source-over";break;case "SMask":this.current.activeSMask&&
(0<this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=e?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var a=this.current.activeSMask,b=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,a.canvas.width,a.canvas.height,!0),c=this.ctx,e=c.mozCurrentTransform;this.ctx.save();b=b.context;b.scale(1/
a.scaleX,1/a.scaleY);b.translate(-a.offsetX,-a.offsetY);b.transform.apply(b,e);a.startTransformInverse=b.mozCurrentTransformInverse;d(c,b);this.ctx=b;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(c);this.groupLevel++},suspendSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();k(this.ctx,this.current.activeSMask,a);this.ctx.restore();this.ctx.save();d(a,this.ctx);this.current.resumeSMaskCtx=a;var b=z.transform(this.current.activeSMask.startTransformInverse,
a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,b);a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},resumeSMaskGroup:function(){var a=this.ctx;this.ctx=this.current.resumeSMaskCtx;this.groupStack.push(a);this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();k(this.ctx,this.current.activeSMask,a);this.ctx.restore();d(a,this.ctx);a=z.transform(this.current.activeSMask.startTransformInverse,
a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,a)},save:function(){this.ctx.save();var a=this.current;this.stateStack.push(a);this.current=a.clone();this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup();null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup();0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),
this.cachedGetSinglePixelWidth=this.pendingClip=null)},transform:function(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this.cachedGetSinglePixelWidth=null},constructPath:function(a,b){for(var c=this.ctx,d=this.current,e=d.x,f=d.y,g=0,h=0,k=a.length;g<k;g++)switch(a[g]|0){case u.rectangle:e=b[h++];f=b[h++];var l=b[h++],m=b[h++];0===l&&(l=this.getSinglePixelWidth());0===m&&(m=this.getSinglePixelWidth());l=e+l;m=f+m;this.ctx.moveTo(e,f);this.ctx.lineTo(l,f);this.ctx.lineTo(l,m);this.ctx.lineTo(e,m);
this.ctx.lineTo(e,f);this.ctx.closePath();break;case u.moveTo:e=b[h++];f=b[h++];c.moveTo(e,f);break;case u.lineTo:e=b[h++];f=b[h++];c.lineTo(e,f);break;case u.curveTo:e=b[h+4];f=b[h+5];c.bezierCurveTo(b[h],b[h+1],b[h+2],b[h+3],e,f);h+=6;break;case u.curveTo2:c.bezierCurveTo(e,f,b[h],b[h+1],b[h+2],b[h+3]);e=b[h+2];f=b[h+3];h+=4;break;case u.curveTo3:e=b[h+2];f=b[h+3];c.bezierCurveTo(b[h],b[h+1],e,f,e,f);h+=4;break;case u.closePath:c.closePath()}d.setCurrentPoint(e,f)},closePath:function(){this.ctx.closePath()},
stroke:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,c=this.current.strokeColor;b.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth);b.globalAlpha=this.current.strokeAlpha;c&&c.hasOwnProperty("type")&&"Pattern"===c.type?(b.save(),b.strokeStyle=c.getPattern(b,this),b.stroke(),b.restore()):b.stroke();a&&this.consumePath();b.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath();this.stroke()},fill:function(a){a="undefined"!==typeof a?a:!0;var b=
this.ctx,c=this.current.fillColor,d=!1;this.current.patternFill&&(b.save(),this.baseTransform&&b.setTransform.apply(b,this.baseTransform),b.fillStyle=c.getPattern(b,this),d=!0);this.pendingEOFill?(void 0!==b.mozFillRule?(b.mozFillRule="evenodd",b.fill(),b.mozFillRule="nonzero"):b.fill("evenodd"),this.pendingEOFill=!1):b.fill();d&&b.restore();a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0;this.fill()},fillStroke:function(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function(){this.pendingEOFill=
!0;this.fillStroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=x},eoClip:function(){this.pendingClip=M},beginText:function(){this.current.textMatrix=r;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,b=this.ctx;if(void 0===
a)b.beginPath();else{b.save();b.beginPath();for(var c=0;c<a.length;c++){var d=a[c];b.setTransform.apply(b,d.transform);b.translate(d.x,d.y);d.addToPath(b,d.fontSize)}b.restore();b.clip();b.beginPath();delete this.pendingTextPaths}},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,b){var c=this.commonObjs.get(a),d=this.current;
c||H("Can't find font for "+a);d.fontMatrix=c.fontMatrix?c.fontMatrix:p;0!==d.fontMatrix[0]&&0!==d.fontMatrix[3]||m("Invalid font matrix for font "+a);0>b?(b=-b,d.fontDirection=-1):d.fontDirection=1;this.current.font=c;this.current.fontSize=b;if(!c.isType3Font){a=c.black?c.bold?"900":"bold":c.bold?"bold":"normal";d=c.italic?"italic":"normal";c='"'+(c.loadedName||"sans-serif")+'", '+c.fallbackName;var e=16>b?16:100<b?100:b;this.current.fontSizeScale=b/e;this.ctx.font=d+" "+a+" "+e+"px "+c}},setTextRenderingMode:function(a){this.current.textRenderingMode=
a},setTextRise:function(a){this.current.textRise=a},moveText:function(a,b){this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=b},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},setTextMatrix:function(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(a,b,c){var d=
this.ctx,e=this.current,f=e.font,g=e.textRenderingMode;e=e.fontSize/e.fontSizeScale;var h=g&A.FILL_STROKE_MASK;g=!!(g&A.ADD_TO_PATH_FLAG);if(f.disableFontFace||g)var k=f.getPathGenerator(this.commonObjs,a);f.disableFontFace?(d.save(),d.translate(b,c),d.beginPath(),k(d,e),h!==A.FILL&&h!==A.FILL_STROKE||d.fill(),h!==A.STROKE&&h!==A.FILL_STROKE||d.stroke(),d.restore()):(h!==A.FILL&&h!==A.FILL_STROKE||d.fillText(a,b,c),h!==A.STROKE&&h!==A.FILL_STROKE||d.strokeText(a,b,c));g&&(this.pendingTextPaths||(this.pendingTextPaths=
[])).push({transform:d.mozCurrentTransform,x:b,y:c,fontSize:e,addToPath:k})},get isFontSubpixelAAEnabled(){var a=document.createElement("canvas").getContext("2d");a.scale(1.5,1);a.fillText("I",0,10);a=a.getImageData(0,0,10,10).data;for(var b=!1,c=3;c<a.length;c+=4)if(0<a[c]&&255>a[c]){b=!0;break}return F(this,"isFontSubpixelAAEnabled",b)},showText:function(a){var b=this.current,c=b.font;if(c.isType3Font)return this.showType3Text(a);var d=b.fontSize;if(0!==d){var e=this.ctx,f=b.fontSizeScale,g=b.charSpacing,
h=b.wordSpacing,k=b.fontDirection,l=b.textHScale*k,m=a.length,n=c.vertical,p=n?1:-1,q=c.defaultVMetrics,r=d*b.fontMatrix[0],t=b.textRenderingMode===A.FILL&&!c.disableFontFace;e.save();e.transform.apply(e,b.textMatrix);e.translate(b.x,b.y+b.textRise);b.patternFill&&(e.fillStyle=b.fillColor.getPattern(e,this));0<k?e.scale(l,-1):e.scale(l,1);var u=b.lineWidth,w=b.textMatrixScale;if(0===w||0===u){if(w=b.textRenderingMode&A.FILL_STROKE_MASK,w===A.STROKE||w===A.FILL_STROKE)this.cachedGetSinglePixelWidth=
null,u=.65*this.getSinglePixelWidth()}else u/=w;1!==f&&(e.scale(f,f),u/=f);e.lineWidth=u;for(w=u=0;w<m;++w){var x=a[w];if(y(x))u+=p*x*d/1E3;else{var z=!1,mb=(x.isSpace?h:0)+g,B=x.fontChar,$a=x.accent,F=x.width;if(n){var H=x.vmetric||q;var D=x.vmetric?H[1]:.5*F;D=-D*r;var G=H[2]*r;F=H?-H[0]:F;H=D/f;G=(u+G)/f}else H=u/f,G=0;c.remeasure&&0<F&&(D=1E3*e.measureText(B).width/d*f,F<D&&this.isFontSubpixelAAEnabled?(D=F/D,z=!0,e.save(),e.scale(D,1),H/=D):F!==D&&(H+=(F-D)/2E3*d/f));if(x.isInFont||c.missingFile)t&&
!$a?e.fillText(B,H,G):(this.paintChar(B,H,G),$a&&(x=H+$a.offset.x/f,B=G-$a.offset.y/f,this.paintChar($a.fontChar,x,B)));u+=F*r+mb*k;z&&e.restore()}}n?b.y-=u*l:b.x+=u*l;e.restore()}},showType3Text:function(a){var b=this.ctx,c=this.current,d=c.font,e=c.fontSize,f=c.fontDirection,g=d.vertical?1:-1,h=c.charSpacing,k=c.wordSpacing,l=c.textHScale*f,n=c.fontMatrix||p,q=a.length;if(c.textRenderingMode!==A.INVISIBLE&&0!==e){this.cachedGetSinglePixelWidth=null;b.save();b.transform.apply(b,c.textMatrix);b.translate(c.x,
c.y);b.scale(l,f);for(f=0;f<q;++f){var r=a[f];if(y(r))r=g*r*e/1E3,this.ctx.translate(r,0),c.x+=r*l;else{var t=(r.isSpace?k:0)+h,u=d.charProcOperatorList[r.operatorListId];u?(this.processingType3=r,this.save(),b.scale(e,e),b.transform.apply(b,n),this.executeOperatorList(u),this.restore(),r=z.applyTransform([r.width,0],n)[0]*e+t,b.translate(r,0),c.x+=r*l):m('Type3 character "'+r.operatorListId+'" is not available')}}b.restore();this.processingType3=null}},setCharWidth:function(a,b){},setCharWidthAndBounds:function(a,
b,c,d,e,f){this.ctx.rect(c,d,e-c,f-d);this.clip();this.endPath()},getColorN_Pattern:function(b){if("TilingPattern"===b[0]){var c=b[1],d=this.baseTransform||this.ctx.mozCurrentTransform.slice(),e=this;b=new q(b,c,this.ctx,{createCanvasGraphics:function(b){return new a(b,e.commonObjs,e.objs)}},d)}else b=G(b);return b},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=
!0},setStrokeRGBColor:function(a,b,c){a=z.makeCssRgb(a,b,c);this.ctx.strokeStyle=a;this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=z.makeCssRgb(a,b,c);this.ctx.fillStyle=a;this.current.fillColor=a;this.current.patternFill=!1},shadingFill:function(a){var b=this.ctx;this.save();a=G(a);b.fillStyle=a.getPattern(b,this,!0);var c=b.mozCurrentTransformInverse;if(c){b=b.canvas;var d=b.width,e=b.height;b=z.applyTransform([0,0],c);a=z.applyTransform([0,e],c);var f=z.applyTransform([d,0],c);c=
z.applyTransform([d,e],c);d=Math.min(b[0],a[0],f[0],c[0]);e=Math.min(b[1],a[1],f[1],c[1]);this.ctx.fillRect(d,e,Math.max(b[0],a[0],f[0],c[0])-d,Math.max(b[1],a[1],f[1],c[1])-e)}else this.ctx.fillRect(-1E10,-1E10,2E10,2E10);this.restore()},beginInlineImage:function(){H("Should not call beginInlineImage")},beginImageData:function(){H("Should not call beginImageData")},paintFormXObjectBegin:function(a,b){this.save();this.baseTransformStack.push(this.baseTransform);E(a)&&6===a.length&&this.transform.apply(this,
a);this.baseTransform=this.ctx.mozCurrentTransform;E(b)&&4===b.length&&(this.ctx.rect(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var b=this.ctx;a.isolated||D("TODO: Support non-isolated groups.");a.knockout&&m("Knockout groups not supported.");var c=b.mozCurrentTransform;a.matrix&&b.transform.apply(b,a.matrix);B(a.bbox,"Bounding box is required.");var e=
z.getAxialAlignedBoundingBox(a.bbox,b.mozCurrentTransform);e=z.intersect(e,[0,0,b.canvas.width,b.canvas.height])||[0,0,0,0];var f=Math.floor(e[0]),g=Math.floor(e[1]),h=Math.max(Math.ceil(e[2])-f,1),k=Math.max(Math.ceil(e[3])-g,1),l=e=1;4096<h&&(e=h/4096,h=4096);4096<k&&(l=k/4096,k=4096);var n="groupAt"+this.groupLevel;a.smask&&(n+="_smask_"+this.smaskCounter++%2);h=this.cachedCanvases.getCanvas(n,h,k,!0);k=h.context;k.scale(1/e,1/l);k.translate(-f,-g);k.transform.apply(k,c);a.smask?this.smaskStack.push({canvas:h.canvas,
context:k,offsetX:f,offsetY:g,scaleX:e,scaleY:l,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(f,g),b.scale(e,l));d(b,k);this.ctx=k;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(b);this.groupLevel++;this.current.activeSMask=null},endGroup:function(a){this.groupLevel--;var b=this.ctx;this.ctx=this.groupStack.pop();void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=
!1:this.ctx.mozImageSmoothingEnabled=!1;a.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(b.canvas,0,0);this.restore()},beginAnnotations:function(){this.save();this.current=new W;this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(a,b,c){this.save();E(a)&&4===a.length&&(this.ctx.rect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.clip(),this.endPath());this.transform.apply(this,b);this.transform.apply(this,
c)},endAnnotation:function(){this.restore()},paintJpegXObject:function(a,b,c){var d=this.objs.get(a);if(d){this.save();var e=this.ctx;e.scale(1/b,-1/c);e.drawImage(d,0,0,d.width,d.height,0,-c,b,c);this.imageLayer&&(d=e.mozCurrentTransformInverse,e=this.getCanvasPosition(0,0),this.imageLayer.appendImage({objId:a,left:e[0],top:e[1],width:b/d[0],height:c/d[3]}));this.restore()}else m("Dependent image isn't ready yet")},paintImageMaskXObject:function(a){var b=this.ctx,d=a.width,e=a.height,f=this.current.fillColor,
g=this.current.patternFill,k=this.processingType3;k&&void 0===k.compiled&&(k.compiled=1E3>=d&&1E3>=e?h({data:a.data,width:d,height:e}):null);k&&k.compiled?k.compiled(b):(b=this.cachedCanvases.getCanvas("maskCanvas",d,e),k=b.context,k.save(),c(k,a),k.globalCompositeOperation="source-in",k.fillStyle=g?f.getPattern(k,this):f,k.fillRect(0,0,d,e),k.restore(),this.paintInlineImageXObject(b.canvas))},paintImageMaskXObjectRepeat:function(a,b,d,e){var f=a.width,g=a.height,h=this.current.fillColor,k=this.current.patternFill,
l=this.cachedCanvases.getCanvas("maskCanvas",f,g),m=l.context;m.save();c(m,a);m.globalCompositeOperation="source-in";m.fillStyle=k?h.getPattern(m,this):h;m.fillRect(0,0,f,g);m.restore();a=this.ctx;h=0;for(k=e.length;h<k;h+=2)a.save(),a.transform(b,0,0,d,e[h],e[h+1]),a.scale(1,-1),a.drawImage(l.canvas,0,0,f,g,0,-1,1,1),a.restore()},paintImageMaskXObjectGroup:function(a){for(var b=this.ctx,d=this.current.fillColor,e=this.current.patternFill,f=0,g=a.length;f<g;f++){var h=a[f],k=h.width,l=h.height,m=
this.cachedCanvases.getCanvas("maskCanvas",k,l),n=m.context;n.save();c(n,h);n.globalCompositeOperation="source-in";n.fillStyle=e?d.getPattern(n,this):d;n.fillRect(0,0,k,l);n.restore();b.save();b.transform.apply(b,h.transform);b.scale(1,-1);b.drawImage(m.canvas,0,0,k,l,0,-1,1,1);b.restore()}},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):m("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(a,b,c,d){if(a=this.objs.get(a)){for(var e=a.width,f=a.height,
g=[],h=0,k=d.length;h<k;h+=2)g.push({transform:[b,0,0,c,d[h],d[h+1]],x:0,y:0,w:e,h:f});this.paintInlineImageXObjectGroup(a,g)}else m("Dependent image isn't ready yet")},paintInlineImageXObject:function(a){var c=a.width,d=a.height,e=this.ctx;this.save();e.scale(1/c,-1/d);var f=e.mozCurrentTransformInverse,g=f[0],h=f[1];g=Math.max(Math.sqrt(g*g+h*h),1);h=f[2];var k=f[3];h=Math.max(Math.sqrt(h*h+k*k),1);if(a instanceof HTMLElement||!a.data)k=a;else{var l=this.cachedCanvases.getCanvas("inlineImage",c,
d);var m=l.context;b(m,a);k=l.canvas}for(var n=c,p=d,q="prescale1";2<g&&1<n||2<h&&1<p;){var r=n,t=p;2<g&&1<n&&(r=Math.ceil(n/2),g/=n/r);2<h&&1<p&&(t=Math.ceil(p/2),h/=p/t);l=this.cachedCanvases.getCanvas(q,r,t);m=l.context;m.clearRect(0,0,r,t);m.drawImage(k,0,0,n,p,0,0,r,t);k=l.canvas;n=r;p=t;q="prescale1"===q?"prescale2":"prescale1"}e.drawImage(k,0,0,n,p,0,-d,c,d);this.imageLayer&&(e=this.getCanvasPosition(0,-d),this.imageLayer.appendImage({imgData:a,left:e[0],top:e[1],width:c/f[0],height:d/f[3]}));
this.restore()},paintInlineImageXObjectGroup:function(a,c){var d=this.ctx,e=a.width,f=a.height,g=this.cachedCanvases.getCanvas("inlineImage",e,f);b(g.context,a);for(var h=0,k=c.length;h<k;h++){var l=c[h];d.save();d.transform.apply(d,l.transform);d.scale(1,-1);d.drawImage(g.canvas,l.x,l.y,l.w,l.h,0,-1,1,1);this.imageLayer&&(l=this.getCanvasPosition(l.x,l.y),this.imageLayer.appendImage({imgData:a,left:l[0],top:l[1],width:e,height:f}));d.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,
0,1,1)},paintXObject:function(){m("Unsupported 'paintXObject' command.")},markPoint:function(a){},markPointProps:function(a,b){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,b){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=this.ctx;this.pendingClip&&(this.pendingClip===M?void 0!==a.mozFillRule?(a.mozFillRule="evenodd",a.clip(),a.mozFillRule="nonzero"):a.clip("evenodd"):a.clip(),this.pendingClip=null);a.beginPath()},
getSinglePixelWidth:function(a){null===this.cachedGetSinglePixelWidth&&(a=this.ctx.mozCurrentTransformInverse,this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])));return this.cachedGetSinglePixelWidth},getCanvasPosition:function(a,b){var c=this.ctx.mozCurrentTransform;return[c[0]*a+c[2]*b+c[4],c[1]*a+c[3]*b+c[5]]}};for(var ya in u)a.prototype[u[ya]]=a.prototype[ya];return a}();b.CanvasGraphics=a;b.createScratchCanvas=f});(function(b,a){a(b.pdfjsDisplayAPI={},
b.pdfjsSharedUtil,b.pdfjsDisplayFontLoader,b.pdfjsDisplayCanvas,b.pdfjsDisplayMetadata,b.pdfjsDisplayDOMUtils)})(this,function(b,a,c,d,e,k,l){function g(a,b,c,d){if(a.destroyed)return Promise.reject(Error("Worker was destroyed"));b.disableAutoFetch=Z("disableAutoFetch");b.disableStream=Z("disableStream");b.chunkedViewerLoading=!!c;c&&(b.length=c.length,b.initialData=c.initialData);return a.messageHandler.sendWithPromise("GetDocRequest",{docId:d,source:b,disableRange:Z("disableRange"),maxImageSize:Z("maxImageSize"),
cMapUrl:Z("cMapUrl"),cMapPacked:Z("cMapPacked"),disableFontFace:Z("disableFontFace"),disableCreateObjectURL:Z("disableCreateObjectURL"),postMessageTransfers:Z("postMessageTransfers")&&!ea}).then(function(b){if(a.destroyed)throw Error("Worker was destroyed");return b})}var h=a.InvalidPDFException,r=a.MessageHandler,w=a.MissingPDFException,u=a.PageViewport,A=a.PasswordResponses,t=a.PasswordException,z=a.StatTimer,B=a.UnexpectedResponseException,D=a.UnknownErrorException,y=a.Util,E=a.createPromiseCapability,
x=a.error,H=a.deprecated,F=a.getVerbosityLevel,m=a.info,q=a.isArrayBuffer,G=a.isSameOrigin,I=a.loadJpegStream,M=a.stringToBytes,S=a.globalScope,ia=a.warn,za=c.FontFaceObject,W=c.FontLoader,X=d.CanvasGraphics,aa=d.createScratchCanvas,U=e.Metadata,Z=k.getDefaultSetting,sa=!1,ca,ea=!1;a=!1;"undefined"===typeof window&&(sa=!0,"undefined"===typeof require.ensure&&(require.ensure=require("node-ensure")),a=!0);"undefined"!==typeof __webpack_require__&&(a=!0);"undefined"!==typeof requirejs&&requirejs.toUrl&&
(ca=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));c="undefined"!==typeof requirejs&&requirejs.load;var la=a?function(a){require.ensure([],function(){var b=require("./pdf.worker.js");a(b.WorkerMessageHandler)})}:c?function(a){requirejs(["pdfjs-dist/build/pdf.worker"],function(b){a(b.WorkerMessageHandler)})}:null,Aa=function(){function a(){this._capability=E();this._worker=this._transport=null;this.docId="d"+b++;this.destroyed=!1;this.onUnsupportedFeature=this.onProgress=this.onPassword=null}var b=
0;a.prototype={get promise(){return this._capability.promise},destroy:function(){this.destroyed=!0;return(this._transport?this._transport.destroy():Promise.resolve()).then(function(){this._transport=null;this._worker&&(this._worker.destroy(),this._worker=null)}.bind(this))},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),Qa=function(){function a(a,b){this.length=a;this.initialData=b;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=
[];this._readyCapability=E()}a.prototype={addRangeListener:function(a){this._rangeListeners.push(a)},addProgressListener:function(a){this._progressListeners.push(a)},addProgressiveReadListener:function(a){this._progressiveReadListeners.push(a)},onDataRange:function(a,b){for(var c=this._rangeListeners,d=0,e=c.length;d<e;++d)c[d](a,b)},onDataProgress:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressListeners,c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},onDataProgressiveRead:function(a){this._readyCapability.promise.then(function(){for(var b=
this._progressiveReadListeners,c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(a,b){throw Error("Abstract method PDFDataRangeTransport.requestDataRange");},abort:function(){}};return a}(),yb=function(){function a(a,b,c){this.pdfInfo=a;this.transport=b;this.loadingTask=c}a.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(a){return this.transport.getPage(a)},
getPageIndex:function(a){return this.transport.getPageIndex(a)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(a){return this.transport.getDestination(a)},getPageLabels:function(){return this.transport.getPageLabels()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},
getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}};return a}(),ya=function(){function a(a,b,c){this.pageIndex=a;this.pageInfo=b;this.transport=c;this.stats=new z;this.stats.enabled=Z("enableStats");this.commonObjs=c.commonObjs;this.objs=new Za;this.pendingCleanup=
this.cleanupAfterRender=!1;this.intentStates=Object.create(null);this.destroyed=!1}a.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function(a,b){2>arguments.length&&(b=this.rotate);return new u(this.view,a,b,0,0)},getAnnotations:function(a){a=a&&a.intent||null;this.annotationsPromise&&this.annotationsIntent===a||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,
a),this.annotationsIntent=a);return this.annotationsPromise},render:function(a){function b(a){var b=e.renderTasks.indexOf(f);0<=b&&e.renderTasks.splice(b,1);g.cleanupAfterRender&&(g.pendingCleanup=!0);g._tryCleanup();a?f.capability.reject(a):f.capability.resolve();c.timeEnd("Rendering");c.timeEnd("Overall")}var c=this.stats;c.time("Overall");this.pendingCleanup=!1;var d="print"===a.intent?"print":"display";this.intentStates[d]||(this.intentStates[d]=Object.create(null));var e=this.intentStates[d];
e.displayReadyCapability||(e.receivingOperatorList=!0,e.displayReadyCapability=E(),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:d}));var f=new Ra(b,a,this.objs,this.commonObjs,e.operatorList,this.pageNumber);f.useRequestAnimationFrame="print"!==d;e.renderTasks||(e.renderTasks=[]);e.renderTasks.push(f);d=f.task;a.continueCallback&&(H("render is used with continueCallback parameter"),
d.onContinue=a.continueCallback);var g=this;e.displayReadyCapability.promise.then(function(a){g.pendingCleanup?b():(c.time("Rendering"),f.initalizeGraphics(a),f.operatorListChanged())},function(a){b(a)});return d},getOperatorList:function(){function a(){if(b.operatorList.lastChunk){b.opListReadCapability.resolve(b.operatorList);var a=b.renderTasks.indexOf(c);0<=a&&b.renderTasks.splice(a,1)}}this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var b=this.intentStates.oplist;if(!b.opListReadCapability){var c=
{};c.operatorListChanged=a;b.receivingOperatorList=!0;b.opListReadCapability=E();b.renderTasks=[];b.renderTasks.push(c);b.operatorList={fnArray:[],argsArray:[],lastChunk:!1};this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})}return b.opListReadCapability.promise},getTextContent:function(a){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:a&&a.normalizeWhitespace||!1})},_destroy:function(){this.destroyed=
!0;this.transport.pageCache[this.pageIndex]=null;var a=[];Object.keys(this.intentStates).forEach(function(b){"oplist"!==b&&this.intentStates[b].renderTasks.forEach(function(b){var c=b.capability.promise.catch(function(){});a.push(c);b.cancel()})},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=!1;return Promise.all(a)},destroy:function(){H("page destroy method, use cleanup() instead");this.cleanup()},cleanup:function(){this.pendingCleanup=!0;this._tryCleanup()},_tryCleanup:function(){this.pendingCleanup&&
!Object.keys(this.intentStates).some(function(a){a=this.intentStates[a];return 0!==a.renderTasks.length||a.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(a){delete this.intentStates[a]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(a,b){b=this.intentStates[b];b.displayReadyCapability&&b.displayReadyCapability.resolve(a)},_renderPageChunk:function(a,b){b=this.intentStates[b];var c;var d=0;for(c=a.length;d<c;d++)b.operatorList.fnArray.push(a.fnArray[d]),
b.operatorList.argsArray.push(a.argsArray[d]);b.operatorList.lastChunk=a.lastChunk;for(d=0;d<b.renderTasks.length;d++)b.renderTasks[d].operatorListChanged();a.lastChunk&&(b.receivingOperatorList=!1,this._tryCleanup())}};return a}(),Kb=function(){function a(){if("undefined"!==typeof ca)return ca;if(Z("workerSrc"))return Z("workerSrc");if(f)return f.replace(/\.js$/i,".worker.js");x("No PDFJS.workerSrc specified")}function b(){e||(e=E(),(la||function(b){y.loadScript(a(),function(){b(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})})(e.resolve));
return e.promise}function c(a){this.name=a;this.destroyed=!1;this._readyCapability=E();this._messageHandler=this._webWorker=this._port=null;this._initialize()}var d=0,e;c.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initialize:function(){if(!sa&&!Z("disableWorker")&&"undefined"!==typeof Worker){var b=a();try{G(window.location.href,b)||(b=URL.createObjectURL(new Blob(["importScripts('"+(new URL(b,window.location)).href+
"');"])));var c=new Worker(b),d=new r("main","worker",c),e=function(){c.removeEventListener("error",f);d.destroy();c.terminate();this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()}.bind(this),f=function(a){this._webWorker||e()}.bind(this);c.addEventListener("error",f);d.on("test",function(a){c.removeEventListener("error",f);this.destroyed?e():a&&a.supportTypedArray?(this._messageHandler=d,this._webWorker=this._port=c,a.supportTransfers||(ea=!0),this._readyCapability.resolve(),
d.send("configure",{verbosity:F()})):(this._setupFakeWorker(),d.destroy(),c.terminate())}.bind(this));d.on("console_log",function(a){console.log.apply(console,a)});d.on("console_error",function(a){console.error.apply(console,a)});d.on("ready",function(a){c.removeEventListener("error",f);if(this.destroyed)e();else try{g()}catch(Lb){this._setupFakeWorker()}}.bind(this));var g=function(){var a=Z("postMessageTransfers")&&!ea;a=new Uint8Array([a?255:0]);try{d.send("test",a,[a.buffer])}catch(Lb){m("Cannot use postMessage transfers"),
a[0]=0,d.send("test",a)}};g();return}catch(fa){m("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){sa||Z("disableWorker")||(ia("Setting up fake worker."),sa=!0);b().then(function(a){if(this.destroyed)this._readyCapability.reject(Error("Worker was destroyed"));else{var b={_listeners:[],postMessage:function(a){var b={data:a};this._listeners.forEach(function(a){a.call(this,b)},this)},addEventListener:function(a,b){this._listeners.push(b)},removeEventListener:function(a,
b){a=this._listeners.indexOf(b);this._listeners.splice(a,1)},terminate:function(){}};this._port=b;var c="fake"+d++,e=new r(c+"_worker",c,b);a.setup(e,b);this._messageHandler=new r(c,c+"_worker",b);this._readyCapability.resolve()}}.bind(this))},destroy:function(){this.destroyed=!0;this._webWorker&&(this._webWorker.terminate(),this._webWorker=null);this._port=null;this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}};return c}(),Ta=function(){function a(a,b,c){this.messageHandler=
a;this.loadingTask=b;this.pdfDataRangeTransport=c;this.commonObjs=new Za;this.fontLoader=new W(b.docId);this.destroyed=!1;this.destroyCapability=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=E();this.setupMessageHandler()}a.prototype={destroy:function(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=E();var a=[];this.pageCache.forEach(function(b){b&&a.push(b._destroy())});this.pageCache=[];this.pagePromises=[];var b=
this,c=this.messageHandler.sendWithPromise("Terminate",null);a.push(c);Promise.all(a).then(function(){b.fontLoader.clear();b.pdfDataRangeTransport&&(b.pdfDataRangeTransport.abort(),b.pdfDataRangeTransport=null);b.messageHandler&&(b.messageHandler.destroy(),b.messageHandler=null);b.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise},setupMessageHandler:function(){function a(a){b.send("UpdatePassword",a)}var b=this.messageHandler,c=this.pdfDataRangeTransport;
c&&(c.addRangeListener(function(a,c){b.send("OnDataRange",{begin:a,chunk:c})}),c.addProgressListener(function(a){b.send("OnDataProgress",{loaded:a})}),c.addProgressiveReadListener(function(a){b.send("OnDataRange",{chunk:a})}),b.on("RequestDataRange",function(a){c.requestDataRange(a.begin,a.end)},this));b.on("GetDoc",function(a){var b=a.pdfInfo;this.numPages=a.pdfInfo.numPages;a=this.loadingTask;this.pdfDocument=b=new yb(b,this,a);a._capability.resolve(b)},this);b.on("NeedPassword",function(b){var c=
this.loadingTask;if(c.onPassword)return c.onPassword(a,A.NEED_PASSWORD);c._capability.reject(new t(b.message,b.code))},this);b.on("IncorrectPassword",function(b){var c=this.loadingTask;if(c.onPassword)return c.onPassword(a,A.INCORRECT_PASSWORD);c._capability.reject(new t(b.message,b.code))},this);b.on("InvalidPDF",function(a){this.loadingTask._capability.reject(new h(a.message))},this);b.on("MissingPDF",function(a){this.loadingTask._capability.reject(new w(a.message))},this);b.on("UnexpectedResponse",
function(a){this.loadingTask._capability.reject(new B(a.message,a.status))},this);b.on("UnknownError",function(a){this.loadingTask._capability.reject(new D(a.message,a.details))},this);b.on("DataLoaded",function(a){this.downloadInfoCapability.resolve(a)},this);b.on("PDFManagerReady",function(a){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this);b.on("StartRenderPage",function(a){if(!this.destroyed){var b=this.pageCache[a.pageIndex];b.stats.timeEnd("Page Request");b._startRenderPage(a.transparency,
a.intent)}},this);b.on("RenderPageChunk",function(a){this.destroyed||this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,a.intent)},this);b.on("commonobj",function(a){if(!this.destroyed){var b=a[0],c=a[1];if(!this.commonObjs.hasData(b))switch(c){case "Font":a=a[2];if("error"in a){var d=a.error;ia("Error during font loading: "+d);this.commonObjs.resolve(b,d);break}else{c=null;Z("pdfBug")&&S.FontInspector&&S.FontInspector.enabled&&(c={registerFont:function(a,b){S.FontInspector.fontAdded(a,b)}});
var e=new za(a,{isEvalSuported:Z("isEvalSupported"),disableFontFace:Z("disableFontFace"),fontRegistry:c})}this.fontLoader.bind([e],function(a){this.commonObjs.resolve(b,e)}.bind(this));break;case "FontPath":this.commonObjs.resolve(b,a[2]);break;default:d("Got unknown common object type "+c)}}},this);b.on("obj",function(a){if(!this.destroyed){var b=a[0],c=a[2],d=this.pageCache[a[1]];if(!d.objs.hasData(b))switch(c){case "JpegStream":a=a[3];I(b,a,d.objs);break;case "Image":a=a[3];d.objs.resolve(b,a);
a&&"data"in a&&8E6<a.data.length&&(d.cleanupAfterRender=!0);break;default:x("Got unknown object type "+c)}}},this);b.on("DocProgress",function(a){if(!this.destroyed){var b=this.loadingTask;if(b.onProgress)b.onProgress({loaded:a.loaded,total:a.total})}},this);b.on("PageError",function(a){if(!this.destroyed){var b=this.pageCache[a.pageNum-1].intentStates[a.intent];b.displayReadyCapability?b.displayReadyCapability.reject(a.error):x(a.error);if(b.operatorList)for(b.operatorList.lastChunk=!0,a=0;a<b.renderTasks.length;a++)b.renderTasks[a].operatorListChanged()}},
this);b.on("UnsupportedFeature",function(a){if(!this.destroyed){a=a.featureId;var b=this.loadingTask;if(b.onUnsupportedFeature)b.onUnsupportedFeature(a);Ca.notify(a)}},this);b.on("JpegDecode",function(a){if(this.destroyed)return Promise.reject("Worker was terminated");var b=a[0],c=a[1];return 3!==c&&1!==c?Promise.reject(Error("Only 3 components or 1 component can be returned")):new Promise(function(a,d){var e=new Image;e.onload=function(){var b=e.width,d=e.height,f=b*d,g=4*f;f=new Uint8Array(f*c);
var h=aa(b,d).getContext("2d");h.drawImage(e,0,0);h=h.getImageData(0,0,b,d).data;var k,l;if(3===c)for(l=k=0;k<g;k+=4,l+=3)f[l]=h[k],f[l+1]=h[k+1],f[l+2]=h[k+2];else if(1===c)for(l=k=0;k<g;k+=4,l++)f[l]=h[k];a({data:f,width:b,height:d})};e.onerror=function(){d(Error("JpegDecode failed to load image"))};e.src=b})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(a,b){if(0>=a||a>this.numPages||(a|0)!==a)return Promise.reject(Error("Invalid page request"));
var c=a-1;if(c in this.pagePromises)return this.pagePromises[c];a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(function(a){if(this.destroyed)throw Error("Transport destroyed");a=new ya(c,a,this);return this.pageCache[c]=a}.bind(this));return this.pagePromises[c]=a},getPageIndex:function(a){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:a})},getAnnotations:function(a,b){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:b})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",
null)},getDestination:function(a){return this.messageHandler.sendWithPromise("GetDestination",{id:a})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",
null).then(function(a){return{info:a[0],metadata:a[1]?new U(a[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var a=0,b=this.pageCache.length;a<b;a++){var c=this.pageCache[a];c&&c.cleanup()}this.commonObjs.clear();this.fontLoader.clear()}.bind(this))}};return a}(),Za=function(){function a(){this.objs=Object.create(null)}a.prototype={ensureObj:function(a){if(this.objs[a])return this.objs[a];
var b={capability:E(),data:null,resolved:!1};return this.objs[a]=b},get:function(a,b){if(b)return this.ensureObj(a).capability.promise.then(b),null;(b=this.objs[a])&&b.resolved||x("Requesting object that isn't resolved yet "+a);return b.data},resolve:function(a,b){a=this.ensureObj(a);a.resolved=!0;a.data=b;a.capability.resolve(b)},isResolved:function(a){var b=this.objs;return b[a]?b[a].resolved:!1},hasData:function(a){return this.isResolved(a)},getData:function(a){var b=this.objs;return b[a]&&b[a].resolved?
b[a].data:null},clear:function(){this.objs=Object.create(null)}};return a}(),Na=function(){function a(a){this._internalRenderTask=a;this.onContinue=null}a.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),Ra=function(){function a(a,b,c,d,e,f){this.callback=a;this.params=b;this.objs=c;this.commonObjs=d;this.operatorListIdx=null;this.operatorList=
e;this.pageNumber=f;this.running=!1;this.graphicsReadyCallback=null;this.cancelled=this.useRequestAnimationFrame=this.graphicsReady=!1;this.capability=E();this.task=new Na(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}a.prototype={initalizeGraphics:function(a){if(!this.cancelled){Z("pdfBug")&&S.StepperManager&&S.StepperManager.enabled&&(this.stepper=S.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),
this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var b=this.params;this.gfx=new X(b.canvasContext,this.commonObjs,this.objs,b.imageLayer);this.gfx.beginDrawing(b.transform,b.viewport,a);this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1;this.cancelled=!0;this.callback("cancelled")},operatorListChanged:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||
this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue.call(this.task,this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!==typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,
this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}};return a}(),Ca=function(){var a=[];return{listen:function(b){H("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead");a.push(b)},notify:function(b){for(var c=0,d=a.length;c<d;c++)a[c](b)}}}();b.version="1.5.188";b.build="0e2d50f";b.getDocument=function(a,
b,c,d){var e=new Aa;1<arguments.length&&H("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument");b&&(b instanceof Qa||(b=Object.create(b),b.length=a.length,b.initialData=a.initialData,b.abort||(b.abort=function(){})),a=Object.create(a),a.range=b);e.onPassword=c||null;e.onProgress=d||null;if("string"===typeof a)var f={url:a};else q(a)?f={data:a}:a instanceof Qa?f={range:a}:("object"!==typeof a&&x("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"),
a.url||a.data||a.range||x("Invalid parameter object: need either .data, .range or .url"),f=a);var h={},k=null,l=null,m;for(m in f)if("url"===m&&"undefined"!==typeof window)h[m]=(new URL(f[m],window.location)).href;else if("range"===m)k=f[m];else if("worker"===m)l=f[m];else if("data"!==m||f[m]instanceof Uint8Array)h[m]=f[m];else{var n=f[m];"string"===typeof n?h[m]=M(n):"object"!==typeof n||null===n||isNaN(n.length)?q(n)?h[m]=new Uint8Array(n):x("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property."):
h[m]=new Uint8Array(n)}h.rangeChunkSize=h.rangeChunkSize||65536;l||(l=new Kb,e._worker=l);var p=e.docId;l.promise.then(function(){if(e.destroyed)throw Error("Loading aborted");return g(l,h,k,p).then(function(a){if(e.destroyed)throw Error("Loading aborted");a=new r(p,a,l.port);var b=new Ta(a,e,k);e._transport=b;a.send("Ready",null)})}).catch(e._capability.reject);return e};b.PDFDataRangeTransport=Qa;b.PDFWorker=Kb;b.PDFDocumentProxy=yb;b.PDFPageProxy=ya;b._UnsupportedManager=Ca});(function(b,a){a(b.pdfjsDisplayGlobal=
{},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils,b.pdfjsDisplayAPI,b.pdfjsDisplayAnnotationLayer,b.pdfjsDisplayTextLayer,b.pdfjsDisplayMetadata,b.pdfjsDisplaySVG)})(this,function(b,a,c,d,e,f,l,n){var g=a.globalScope,h=a.deprecated,k=a.warn,u=c.LinkTarget,A="undefined"===typeof window;g.PDFJS||(g.PDFJS={});var t=g.PDFJS;t.version="1.5.188";t.build="0e2d50f";t.pdfBug=!1;void 0!==t.verbosity&&a.setVerbosityLevel(t.verbosity);delete t.verbosity;Object.defineProperty(t,"verbosity",{get:function(){return a.getVerbosityLevel()},
set:function(b){a.setVerbosityLevel(b)},enumerable:!0,configurable:!0});t.VERBOSITY_LEVELS=a.VERBOSITY_LEVELS;t.OPS=a.OPS;t.UNSUPPORTED_FEATURES=a.UNSUPPORTED_FEATURES;t.isValidUrl=a.isValidUrl;t.shadow=a.shadow;t.createBlob=a.createBlob;t.createObjectURL=function(b,c){return a.createObjectURL(b,c,t.disableCreateObjectURL)};Object.defineProperty(t,"isLittleEndian",{configurable:!0,get:function(){var b=a.isLittleEndian();return a.shadow(t,"isLittleEndian",b)}});t.removeNullCharacters=a.removeNullCharacters;
t.PasswordResponses=a.PasswordResponses;t.PasswordException=a.PasswordException;t.UnknownErrorException=a.UnknownErrorException;t.InvalidPDFException=a.InvalidPDFException;t.MissingPDFException=a.MissingPDFException;t.UnexpectedResponseException=a.UnexpectedResponseException;t.Util=a.Util;t.PageViewport=a.PageViewport;t.createPromiseCapability=a.createPromiseCapability;t.maxImageSize=void 0===t.maxImageSize?-1:t.maxImageSize;t.cMapUrl=void 0===t.cMapUrl?null:t.cMapUrl;t.cMapPacked=void 0===t.cMapPacked?
!1:t.cMapPacked;t.disableFontFace=void 0===t.disableFontFace?!1:t.disableFontFace;t.imageResourcesPath=void 0===t.imageResourcesPath?"":t.imageResourcesPath;t.disableWorker=void 0===t.disableWorker?!1:t.disableWorker;t.workerSrc=void 0===t.workerSrc?null:t.workerSrc;t.disableRange=void 0===t.disableRange?!1:t.disableRange;t.disableStream=void 0===t.disableStream?!1:t.disableStream;t.disableAutoFetch=void 0===t.disableAutoFetch?!1:t.disableAutoFetch;t.pdfBug=void 0===t.pdfBug?!1:t.pdfBug;t.postMessageTransfers=
void 0===t.postMessageTransfers?!0:t.postMessageTransfers;t.disableCreateObjectURL=void 0===t.disableCreateObjectURL?!1:t.disableCreateObjectURL;t.disableWebGL=void 0===t.disableWebGL?!0:t.disableWebGL;t.externalLinkTarget=void 0===t.externalLinkTarget?u.NONE:t.externalLinkTarget;t.externalLinkRel=void 0===t.externalLinkRel?"noreferrer":t.externalLinkRel;t.isEvalSupported=void 0===t.isEvalSupported?!0:t.isEvalSupported;var z=t.openExternalLinksInNewWindow;delete t.openExternalLinksInNewWindow;Object.defineProperty(t,
"openExternalLinksInNewWindow",{get:function(){return t.externalLinkTarget===u.BLANK},set:function(a){a&&h('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.');t.externalLinkTarget!==u.NONE?k("PDFJS.externalLinkTarget is already initialized"):t.externalLinkTarget=a?u.BLANK:u.NONE},enumerable:!0,configurable:!0});z&&(t.openExternalLinksInNewWindow=z);t.getDocument=d.getDocument;t.PDFDataRangeTransport=d.PDFDataRangeTransport;t.PDFWorker=d.PDFWorker;
Object.defineProperty(t,"hasCanvasTypedArrays",{configurable:!0,get:function(){var b=c.hasCanvasTypedArrays();return a.shadow(t,"hasCanvasTypedArrays",b)}});t.CustomStyle=c.CustomStyle;t.LinkTarget=u;t.addLinkAttributes=c.addLinkAttributes;t.getFilenameFromUrl=c.getFilenameFromUrl;t.isExternalLinkTargetSet=c.isExternalLinkTargetSet;t.AnnotationLayer=e.AnnotationLayer;t.renderTextLayer=f.renderTextLayer;t.Metadata=l.Metadata;t.SVGGraphics=n.SVGGraphics;t.UnsupportedManager=d._UnsupportedManager;b.globalScope=
g;b.isWorker=A;b.PDFJS=g.PDFJS})}).call(c);e.PDFJS=c.pdfjsDisplayGlobal.PDFJS;e.build=c.pdfjsDisplayAPI.build;e.version=c.pdfjsDisplayAPI.version;e.getDocument=c.pdfjsDisplayAPI.getDocument;e.PDFDataRangeTransport=c.pdfjsDisplayAPI.PDFDataRangeTransport;e.PDFWorker=c.pdfjsDisplayAPI.PDFWorker;e.renderTextLayer=c.pdfjsDisplayTextLayer.renderTextLayer;e.AnnotationLayer=c.pdfjsDisplayAnnotationLayer.AnnotationLayer;e.CustomStyle=c.pdfjsDisplayDOMUtils.CustomStyle;e.PasswordResponses=c.pdfjsSharedUtil.PasswordResponses;
e.InvalidPDFException=c.pdfjsSharedUtil.InvalidPDFException;e.MissingPDFException=c.pdfjsSharedUtil.MissingPDFException;e.SVGGraphics=c.pdfjsDisplaySVG.SVGGraphics;e.UnexpectedResponseException=c.pdfjsSharedUtil.UnexpectedResponseException;e.OPS=c.pdfjsSharedUtil.OPS;e.UNSUPPORTED_FEATURES=c.pdfjsSharedUtil.UNSUPPORTED_FEATURES;e.isValidUrl=c.pdfjsSharedUtil.isValidUrl;e.createObjectURL=c.pdfjsSharedUtil.createObjectURL;e.removeNullCharacters=c.pdfjsSharedUtil.removeNullCharacters;e.shadow=c.pdfjsSharedUtil.shadow;
e.createBlob=c.pdfjsSharedUtil.createBlob;e.getFilenameFromUrl=c.pdfjsDisplayDOMUtils.getFilenameFromUrl;e.addLinkAttributes=c.pdfjsDisplayDOMUtils.addLinkAttributes});(function(e,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):e.vhCheck=f()})(this,function(){function e(){var e=document.createElement("div");e.style.cssText="position: fixed; top: 0; bottom: 0;";document.documentElement.insertBefore(e,document.documentElement.firstChild);var c=document.createElement("div");c.style.cssText="position: fixed; top: 0; height: 100vh";document.documentElement.insertBefore(c,document.documentElement.firstChild);
var b=c.offsetHeight-e.offsetHeight;document.documentElement.removeChild(e);document.documentElement.removeChild(c);return b}return function(f){f="string"===typeof f?f:"vh-offset";var c=e();if(!c)return!1;document.documentElement.style.setProperty("--"+f,c+"px");window.addEventListener("orientationchange",function(){var b=e();document.documentElement.style.setProperty("--"+f,b+"px")},!1);return!0}});/*


 chroma.js - JavaScript library for color conversions

 Copyright (c) 2011-2017, Gregor Aisch
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

 3. The name Gregor Aisch may not be used to endorse or promote products
    derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


*/
(function(){var e,f,c=[].slice;var b=function(){var a;var b={};var c="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");var d=0;for(a=c.length;d<a;d++){var e=c[d];b["[object "+e+"]"]=e.toLowerCase()}return function(a){a=Object.prototype.toString.call(a);return b[a]||"object"}}();var a=function(a,b,c){null==b&&(b=0);null==c&&(c=1);a<b&&(a=b);a>c&&(a=c);return a};var h=function(a){return 3<=a.length?[].slice.call(a):a[0]};var d=function(a){var b,c;a._clipped=!1;a._unclipped=
a.slice(0);for(b=c=0;3>c;b=++c)if(3>b){if(0>a[b]||255<a[b])a._clipped=!0;0>a[b]&&(a[b]=0);255<a[b]&&(a[b]=255)}else 3===b&&(0>a[b]&&(a[b]=0),1<a[b]&&(a[b]=1));a._clipped||delete a._unclipped;return a};var g=Math.PI;var k=Math.round;var l=Math.cos;var n=Math.floor;var p=Math.pow;var r=Math.log;var w=Math.sin;var u=Math.sqrt;var A=Math.atan2;var t=Math.max;var z=Math.abs;var B=2*g;var D=g/3;var y=g/180;var E=180/g;var x=function(){return arguments[0]instanceof I?arguments[0]:function(a,b,c){c.prototype=
a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,arguments,function(){})};x["default"]=x;var H=[];"undefined"!==typeof module&&null!==module&&null!=module.exports&&(module.exports=x);if("function"===typeof define&&define.amd)define([],function(){return x});else{var F="undefined"!==typeof exports&&null!==exports?exports:this;F.chroma=x}x.version="1.3.5";var m={};var q=[];var G=!1;var I=function(){function a(){var a,b;var c=[];var e=0;for(b=arguments.length;e<b;e++){var f=arguments[e];
null!=f&&c.push(f)}1<c.length&&(a=c[c.length-1]);if(null!=m[a])this._rgb=d(m[a](h(c.slice(0,-1))));else{G||(q=q.sort(function(a,b){return b.p-a.p}),G=!0);b=0;for(f=q.length;b<f&&!(a=q[b],a=a.test.apply(a,c));b++);a&&(this._rgb=d(m[a].apply(m,c)))}null==this._rgb&&console.warn("unknown format: "+c);null==this._rgb&&(this._rgb=[0,0,0]);3===this._rgb.length&&this._rgb.push(1)}a.prototype.toString=function(){return this.hex()};a.prototype.clone=function(){return x(me._rgb)};return a}();x._input=m;x.brewer=
e={OrRd:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #7f0000".split(" "),PuBu:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #023858".split(" "),BuPu:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #4d004b".split(" "),Oranges:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704".split(" "),BuGn:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #00441b".split(" "),YlOrBr:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #662506".split(" "),
YlGn:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #004529".split(" "),Reds:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #67000d".split(" "),RdPu:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a".split(" "),Greens:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #00441b".split(" "),YlGnBu:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),Purples:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d".split(" "),
GnBu:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #0868ac #084081".split(" "),Greys:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525 #000000".split(" "),YlOrRd:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #800026".split(" "),PuRd:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f".split(" "),Blues:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #08306b".split(" "),PuBuGn:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #014636".split(" "),
Viridis:"#440154 #482777 #3f4a8a #31678e #26838f #1f9d8a #6cce5a #b6de2b #fee825".split(" "),Spectral:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "),RdYlGn:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "),RdBu:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "),PiYG:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "),
PRGn:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "),RdYlBu:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "),BrBG:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "),RdGy:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "),PuOr:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "),
Set2:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f #e5c494 #b3b3b3".split(" "),Accent:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f #bf5b17 #666666".split(" "),Set1:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628 #f781bf #999999".split(" "),Set3:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd #ccebc5 #ffed6f".split(" "),Dark2:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02 #a6761d #666666".split(" "),Paired:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a #ffff99 #b15928".split(" "),
Pastel2:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae #f1e2cc #cccccc".split(" "),Pastel1:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd #fddaec #f2f2f2".split(" ")};(function(){var a;var b=[];for(a in e)b.push(e[a.toLowerCase()]=e[a]);return b})();var M={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",
cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",
darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",
lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",
magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",
orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};x.colors=M;var S=function(){var a=h(arguments);var b=a[0];var c=a[1];var d=a[2];b=(b+16)/116;var e=isNaN(c)?b:b+c/500;d=isNaN(d)?b:b-d/200;b=W.Yn*za(b);e=W.Xn*za(e);d=W.Zn*za(d);var f=ia(3.2404542*e-1.5371385*b-
.4985314*d);c=ia(-.969266*e+1.8760108*b+.041556*d);d=ia(.0556434*e-.2040259*b+1.0572252*d);return[f,c,d,3<a.length?a[3]:1]};var ia=function(a){return 255*(.00304>=a?12.92*a:1.055*p(a,1/2.4)-.055)};var za=function(a){return a>W.t1?a*a*a:W.t2*(a-W.t0)};var W={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452};var X=function(){var a=h(arguments);a=Z(a[0],a[1],a[2]);var b=a[0];var c=a[1];return[116*c-16,500*(b-c),200*(c-a[2])]};var aa=function(a){return.04045>=(a/=
255)?a/12.92:p((a+.055)/1.055,2.4)};var U=function(a){return a>W.t3?p(a,1/3):a/W.t2+W.t0};var Z=function(){var a=h(arguments);var b=a[0];var c=a[1];var d=a[2];b=aa(b);c=aa(c);d=aa(d);a=U((.4124564*b+.3575761*c+.1804375*d)/W.Xn);var e=U((.2126729*b+.7151522*c+.072175*d)/W.Yn);c=U((.0193339*b+.119192*c+.9503041*d)/W.Zn);return[a,e,c]};x.lab=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["lab"]),function(){})};m.lab=
S;I.prototype.lab=function(){return X(this._rgb)};var sa=function(a){var b;a=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(x(b));return d}();if(2===a.length){var c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());return d}();var d=c[0];var e=c[1];c=function(a){var b,c;var f=[];for(b=c=0;2>=c;b=++c)f.push(d[b]+a*(e[b]-d[b]));return x.lab.apply(x,f)}}else if(3===a.length){c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());
return d}();d=c[0];e=c[1];var f=c[2];c=function(a){var b,c;var g=[];for(b=c=0;2>=c;b=++c)g.push((1-a)*(1-a)*d[b]+2*(1-a)*a*e[b]+a*a*f[b]);return x.lab.apply(x,g)}}else if(4===a.length){c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());return d}();d=c[0];e=c[1];f=c[2];var g=c[3];c=function(a){var b,c;var h=[];for(b=c=0;2>=c;b=++c)h.push((1-a)*(1-a)*(1-a)*d[b]+3*(1-a)*(1-a)*a*e[b]+3*(1-a)*a*a*f[b]+a*a*a*g[b]);return x.lab.apply(x,h)}}else if(5===a.length){var h=sa(a.slice(0,
3));var k=sa(a.slice(2,5));c=function(a){return.5>a?h(2*a):k(2*(a-.5))}}return c};x.bezier=function(a){var b=sa(a);b.scale=function(){return x.scale(b)};return b};x.cubehelix=function(a,c,e,f,g){null==a&&(a=300);null==c&&(c=-1.5);null==e&&(e=1);null==f&&(f=1);null==g&&(g=[0,1]);var h=0;if("array"===b(g))var k=g[1]-g[0];else k=0,g=[g,g];var m=function(b){var m=B*((a+120)/360+c*b);var n=p(g[0]+k*b,f);b=(0!==h?e[0]+b*h:e)*n*(1-n)/2;var q=l(m);m=w(m);return x(d([255*(n+b*(-.14861*q+1.78277*m)),255*(n+
b*(-.29227*q-.90649*m)),255*(n+1.97294*b*q)]))};m.start=function(b){if(null==b)return a;a=b;return m};m.rotations=function(a){if(null==a)return c;c=a;return m};m.gamma=function(a){if(null==a)return f;f=a;return m};m.hue=function(a){if(null==a)return e;e=a;"array"===b(e)?(h=e[1]-e[0],0===h&&(e=e[1])):h=0;return m};m.lightness=function(a){if(null==a)return g;"array"===b(a)?(g=a,k=a[1]-a[0]):(g=[a,a],k=0);return m};m.scale=function(){return x.scale(m)};m.hue(e);return m};x.random=function(){var a;var b=
"#";for(a=0;6>a;++a)b+="0123456789abcdef".charAt(n(16*Math.random()));return new I(b)};H=[];var ca=function(a,c,d,e){var f;null==d&&(d=.5);null==e&&(e="rgb");"object"!==b(a)&&(a=x(a));"object"!==b(c)&&(c=x(c));var g=0;for(f=H.length;g<f;g++){var h=H[g];if(e===h[0]){var k=h[1](a,c,d,e);break}}if(null==k)throw"color mode "+e+" is not supported";return k.alpha(a.alpha()+d*(c.alpha()-a.alpha()))};x.interpolate=ca;I.prototype.interpolate=function(a,b,c){return ca(this,a,b,c)};x.mix=ca;I.prototype.mix=
I.prototype.interpolate;m.rgb=function(){var a;var b=h(arguments);var c=[];for(a in b){var d=b[a];c.push(d)}return c};x.rgb=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["rgb"]),function(){})};I.prototype.rgb=function(a){null==a&&(a=!0);return a?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)};I.prototype.rgba=function(a){null==a&&(a=!0);return a?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),
this._rgb[3]]:this._rgb.slice(0)};q.push({p:3,test:function(a){var c=h(arguments);if("array"===b(c)&&3===c.length||4===c.length&&"number"===b(c[3])&&0<=c[3]&&1>=c[3])return"rgb"}});m.lrgb=m.rgb;var ea=function(a){var b;var c=1/a.length;var d=[0,0,0,0];var e=0;for(b=a.length;e<b;e++){var f=a[e];f=f._rgb;d[0]+=p(f[0],2)*c;d[1]+=p(f[1],2)*c;d[2]+=p(f[2],2)*c;d[3]+=f[3]*c}d[0]=u(d[0]);d[1]=u(d[1]);d[2]=u(d[2]);return new I(d)};H.push(["lrgb",function(a,b,c,d){a=a._rgb;b=b._rgb;return new I(u(p(a[0],2)*
(1-c)+p(b[0],2)*c),u(p(a[1],2)*(1-c)+p(b[1],2)*c),u(p(a[2],2)*(1-c)+p(b[2],2)*c),d)}]);x.average=function(a,b){var c,d,e;null==b&&(b="rgb");var f=a.length;a=a.map(function(a){return x(a)});var h=a.splice(0,1)[0];if("lrgb"===b)return ea(a);var k=h.get(b);var m=[];var n=c=0;for(d in k)if(k[d]=k[d]||0,m.push(isNaN(k[d])?0:1),"h"===b.charAt(d)&&!isNaN(k[d])){var p=k[d]/180*g;c+=l(p);n+=w(p)}h=h.alpha();var q=0;for(e=a.length;q<e;q++){p=a[q];var r=p.get(b);h+=p.alpha();for(d in k)isNaN(r[d])||(k[d]+=r[d],
m[d]+=1,"h"===b.charAt(d)&&(p=k[d]/180*g,c+=l(p),n+=w(p)))}for(d in k)if(k[d]/=m[d],"h"===b.charAt(d)){for(p=A(n/m[d],c/m[d])/g*180;0>p;)p+=360;for(;360<=p;)p-=360;k[d]=p}return x(k,b).alpha(h/f)};var la=function(a){if(a.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){if(4===a.length||7===a.length)a=a.substr(1);3===a.length&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var b=parseInt(a,16);return[b>>16,b>>8&255,b&255,1]}if(a.match(/^#?([A-Fa-f0-9]{8})$/)){9===a.length&&(a=a.substr(1));b=parseInt(a,
16);var c=b>>24&255;var d=b>>16&255;a=b>>8&255;b=k((b&255)/255*100)/100;return[c,d,a,b]}if(null!=m.css&&(d=m.css(a)))return d;throw"unknown color: "+a;};var Aa=function(a,b){null==b&&(b="rgb");var c=a[0];var d=a[1];var e=a[2];a=a[3];c=Math.round(c);d=Math.round(d);e=Math.round(e);var f="000000"+(c<<16|d<<8|e).toString(16);f=f.substr(f.length-6);var g="0"+k(255*a).toString(16);g=g.substr(g.length-2);return"#"+function(){switch(b.toLowerCase()){case "rgba":return f+g;case "argb":return g+f;default:return f}}()};
m.hex=function(a){return la(a)};x.hex=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["hex"]),function(){})};I.prototype.hex=function(a){null==a&&(a="rgb");return Aa(this._rgb,a)};q.push({p:4,test:function(a){if(1===arguments.length&&"string"===b(a))return"hex"}});var Qa=function(){var a,b;var c=h(arguments);var d=c[0];var e=c[1];var f=c[2];if(0===e)var g=a=e=255*f;else{g=[0,0,0];a=[0,0,0];e=.5>f?f*(1+e):f+e-f*
e;f=2*f-e;d/=360;g[0]=d+1/3;g[1]=d;g[2]=d-1/3;for(d=b=0;2>=b;d=++b)0>g[d]&&(g[d]+=1),1<g[d]&&--g[d],a[d]=1>6*g[d]?f+6*(e-f)*g[d]:1>2*g[d]?e:2>3*g[d]?f+(e-f)*(2/3-g[d])*6:f;e=[k(255*a[0]),k(255*a[1]),k(255*a[2])];g=e[0];a=e[1];e=e[2]}return 3<c.length?[g,a,e,c[3]]:[g,a,e]};var yb=function(a,b,c){void 0!==a&&3<=a.length&&(c=a,a=c[0],b=c[1],c=c[2]);a/=255;b/=255;c/=255;var d=Math.min(a,b,c);t=Math.max(a,b,c);var e=(t+d)/2;if(t===d){var f=0;var g=Number.NaN}else f=.5>e?(t-d)/(t+d):(t-d)/(2-t-d);a===t?
g=(b-c)/(t-d):b===t?g=2+(c-a)/(t-d):c===t&&(g=4+(a-b)/(t-d));g*=60;0>g&&(g+=360);return[g,f,e]};x.hsl=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["hsl"]),function(){})};m.hsl=Qa;I.prototype.hsl=function(){return yb(this._rgb)};var ya=function(){var a=h(arguments);var b=a[0];var c=a[1];a=a[2];var d=Math.min(b,c,a);t=Math.max(b,c,a);d=t-d;var e=t/255;if(0===t){var f=Number.NaN;var g=0}else g=d/t,b===t&&(f=(c-
a)/d),c===t&&(f=2+(a-b)/d),a===t&&(f=4+(b-c)/d),f*=60,0>f&&(f+=360);return[f,g,e]};x.hsv=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["hsv"]),function(){})};m.hsv=function(){var a,b;var c=h(arguments);var d=c[0];var e=c[1];var f=c[2];f*=255;if(0===e)var g=b=a=f;else{360===d&&(d=0);360<d&&(d-=360);0>d&&(d+=360);d/=60;var k=n(d);var l=d-k;d=f*(1-e);var m=f*(1-e*l);e=f*(1-e*(1-l));switch(k){case 0:a=[f,e,d];g=a[0];
b=a[1];a=a[2];break;case 1:a=[m,f,d];g=a[0];b=a[1];a=a[2];break;case 2:a=[d,f,e];g=a[0];b=a[1];a=a[2];break;case 3:a=[d,m,f];g=a[0];b=a[1];a=a[2];break;case 4:a=[e,d,f];g=a[0];b=a[1];a=a[2];break;case 5:a=[f,d,m],g=a[0],b=a[1],a=a[2]}}return[g,b,a,3<c.length?c[3]:1]};I.prototype.hsv=function(){return ya(this._rgb)};var Kb=function(){var a=h(arguments);return(a[0]<<16)+(a[1]<<8)+a[2]};x.num=function(a){return new I(a,"num")};I.prototype.num=function(a){null==a&&(a="rgb");return Kb(this._rgb,a)};m.num=
function(a){if("number"===b(a)&&0<=a&&16777215>=a)return[a>>16,a>>8&255,a&255,1];console.warn("unknown num color: "+a);return[0,0,0,1]};q.push({p:1,test:function(a){if(1===arguments.length&&"number"===b(a)&&0<=a&&16777215>=a)return"num"}});var Ta=function(){var a=h(arguments);var b=a[0];var c=a[1];a=a[2];var d=Math.min(b,c,a);t=Math.max(b,c,a);var e=t-d;if(0===e)var f=Number.NaN;else b===t&&(f=(c-a)/e),c===t&&(f=2+(a-b)/e),a===t&&(f=4+(b-c)/e),f*=60,0>f&&(f+=360);return[f,100*e/255,d/(255-e)*100]};
x.hcg=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["hcg"]),function(){})};m.hcg=function(){var a;var b=h(arguments);var c=b[0];var d=b[1];var e=b[2];d/=100;var f=f/100*255;var g=255*d;if(0===d)var k=f=a=e;else{360===c&&(c=0);360<c&&(c-=360);0>c&&(c+=360);c/=60;var l=n(c);c-=l;e*=1-d;d=e+g*(1-c);c=e+g*c;g=e+g;switch(l){case 0:a=[g,c,e];k=a[0];f=a[1];a=a[2];break;case 1:a=[d,g,e];k=a[0];f=a[1];a=a[2];break;case 2:a=
[e,g,c];k=a[0];f=a[1];a=a[2];break;case 3:a=[e,d,g];k=a[0];f=a[1];a=a[2];break;case 4:a=[c,e,g];k=a[0];f=a[1];a=a[2];break;case 5:a=[g,e,d],k=a[0],f=a[1],a=a[2]}}return[k,f,a,3<b.length?b[3]:1]};I.prototype.hcg=function(){return Ta(this._rgb)};var Za=function(a){var b;a=a.toLowerCase();if(null!=x.colors&&x.colors[a])return la(x.colors[a]);if(b=a.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){var c=b.slice(1,4);for(b=a=0;2>=a;b=++a)c[b]=+c[b];c[3]=1}else if(b=a.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(c=
b.slice(1,5),b=a=0;3>=a;b=++a)c[b]=+c[b];else if(b=a.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){c=b.slice(1,4);for(b=a=0;2>=a;b=++a)c[b]=k(2.55*c[b]);c[3]=1}else if(b=a.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){c=b.slice(1,5);for(b=a=0;2>=a;b=++a)c[b]=k(2.55*c[b]);c[3]=+c[3]}else if(b=a.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))c=
b.slice(1,4),c[1]*=.01,c[2]*=.01,c=Qa(c),c[3]=1;else if(b=a.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))c=b.slice(1,4),c[1]*=.01,c[2]*=.01,c=Qa(c),c[3]=+b[4];return c};var Na=function(a){var b=1>a[3]?"rgba":"rgb";if("rgb"===b)return b+"("+a.slice(0,3).map(k).join(",")+")";if("rgba"===b)return b+"("+a.slice(0,3).map(k).join(",")+","+a[3]+")"};var Ra=function(a){return k(100*a)/100};var Ca=function(a,b){var c=1>b?"hsla":"hsl";a[0]=
Ra(a[0]||0);a[1]=Ra(100*a[1])+"%";a[2]=Ra(100*a[2])+"%";"hsla"===c&&(a[3]=b);return c+"("+a.join(",")+")"};m.css=function(a){return Za(a)};x.css=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["css"]),function(){})};I.prototype.css=function(a){null==a&&(a="rgb");if("rgb"===a.slice(0,3))return Na(this._rgb);if("hsl"===a.slice(0,3))return Ca(this.hsl(),this.alpha())};m.named=function(a){return la(M[a])};q.push({p:5,
test:function(a){if(1===arguments.length&&null!=M[a])return"named"}});I.prototype.name=function(a){var b;arguments.length&&(M[a]&&(this._rgb=la(M[a])),this._rgb[3]=1,this);var c=this.hex();for(b in M)if(c===M[b])return b;return c};var R=function(){var a=h(arguments);var b=a[0];var c=a[1];a=a[2];a*=y;return[b,l(a)*c,w(a)*c]};var Da=function(){var a=h(arguments);var b=R(a[0],a[1],a[2]);var c=b[0];var d=b[1];b=b[2];b=S(c,d,b);d=b[0];c=b[1];b=b[2];return[d,c,b,3<a.length?a[3]:1]};var xb=function(){var a=
h(arguments);var b=a[0];var c=a[1];var d=a[2];a=u(c*c+d*d);c=(A(d,c)*E+360)%360;0===k(1E4*a)&&(c=Number.NaN);return[b,a,c]};var Ba=function(){var a=h(arguments);var b=a[0];var c=a[1];a=a[2];a=X(b,c,a);b=a[0];c=a[1];a=a[2];return xb(b,c,a)};x.lch=function(){var a=h(arguments);return new I(a,"lch")};x.hcl=function(){var a=h(arguments);return new I(a,"hcl")};m.lch=Da;m.hcl=function(){var a=h(arguments);return Da([a[2],a[1],a[0]])};I.prototype.lch=function(){return Ba(this._rgb)};I.prototype.hcl=function(){return Ba(this._rgb).reverse()};
var Ya=function(a){null==a&&(a="rgb");var b=h(arguments);var c=b[0];var d=b[1];b=b[2];c/=255;d/=255;b/=255;var e=1-Math.max(c,Math.max(d,b));var f=1>e?1/(1-e):0;return[(1-c-e)*f,(1-d-e)*f,(1-b-e)*f,e]};var ba=function(){var a=h(arguments);var b=a[0];var c=a[1];var d=a[2];var e=a[3];a=4<a.length?a[4]:1;return 1===e?[0,0,0,a]:[1<=b?0:255*(1-b)*(1-e),1<=c?0:255*(1-c)*(1-e),1<=d?0:255*(1-d)*(1-e),a]};m.cmyk=function(){return ba(h(arguments))};x.cmyk=function(){return function(a,b,c){c.prototype=a.prototype;
c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["cmyk"]),function(){})};I.prototype.cmyk=function(){return Ya(this._rgb)};m.gl=function(){var a,b,c,d;var e=function(){var a=h(arguments);var c=[];for(b in a)d=a[b],c.push(d);return c}.apply(this,arguments);for(a=c=0;2>=c;a=++c)e[a]*=255;return e};x.gl=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["gl"]),function(){})};I.prototype.gl=
function(){var a=this._rgb;return[a[0]/255,a[1]/255,a[2]/255,a[3]]};var gc=function(a,b,c){var d=h(arguments);a=d[0];b=d[1];c=d[2];a=gb(a);b=gb(b);c=gb(c);return.2126*a+.7152*b+.0722*c};var gb=function(a){a/=255;return.03928>=a?a/12.92:p((a+.055)/1.055,2.4)};H.push(["rgb",function(a,b,c,d){a=a._rgb;b=b._rgb;return new I(a[0]+c*(b[0]-a[0]),a[1]+c*(b[1]-a[1]),a[2]+c*(b[2]-a[2]),d)}]);I.prototype.luminance=function(a,b){null==b&&(b="rgb");if(!arguments.length)return gc(this._rgb);if(0===a)this._rgb=
[0,0,0,this._rgb[3]];else if(1===a)this._rgb=[255,255,255,this._rgb[3]];else{var c=20;var d=function(e,f){var g=e.interpolate(f,.5,b);var h=g.luminance();return 1E-7>Math.abs(a-h)||!c--?g:h>a?d(e,g):d(g,f)};var e=gc(this._rgb);this._rgb=(e>a?d(x("black"),this):d(this,x("white"))).rgba()}return this};var O=function(a){a/=100;if(66>a){var b=255;var c=-155.25485562709179-.44596950469579133*(c=a-2)+104.49216199393888*r(c);var d=20>a?0:-254.76935184120902+.8274096064007395*(d=a-10)+115.67994401066147*
r(d)}else b=351.97690566805693+.114206453784165*(b=a-55)-40.25366309332127*r(b),c=325.4494125711974+.07943456536662342*(c=a-50)-28.0852963507957*r(c),d=255;return[b,c,d]};var v=function(){var a;var b=h(arguments);var c=b[0];b=b[2];var d=1E3;for(a=4E4;.4<a-d;){var e=.5*(a+d);var f=O(e);f[2]/f[0]>=b/c?a=e:d=e}return k(e)};x.temperature=x.kelvin=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["temperature"]),function(){})};
m.temperature=m.kelvin=m.K=O;I.prototype.temperature=function(){return v(this._rgb)};I.prototype.kelvin=I.prototype.temperature;x.contrast=function(a,c){var d,e;if("string"===(d=b(a))||"number"===d)a=new I(a);if("string"===(e=b(c))||"number"===e)c=new I(c);a=a.luminance();c=c.luminance();return a>c?(a+.05)/(c+.05):(c+.05)/(a+.05)};x.distance=function(a,c,d){var e,f,g;null==d&&(d="lab");if("string"===(f=b(a))||"number"===f)a=new I(a);if("string"===(g=b(c))||"number"===g)c=new I(c);a=a.get(d);d=c.get(d);
f=0;for(e in a)c=(a[e]||0)-(d[e]||0),f+=c*c;return Math.sqrt(f)};x.deltaE=function(a,c,d,e){var f,h,k;null==d&&(d=1);null==e&&(e=1);if("string"===(f=b(a))||"number"===f)a=new I(a);if("string"===(h=b(c))||"number"===h)c=new I(c);f=a.lab();a=f[0];h=f[1];var m=f[2];c=c.lab();f=c[0];var n=c[1];var p=c[2];var q=u(h*h+m*m);var r=u(n*n+p*p);var t=16>a?.511:.040975*a/(1+.01765*a);c=.0638*q/(1+.0131*q)+.638;for(k=1E-6>q?0:180*A(m,h)/g;0>k;)k+=360;for(;360<=k;)k-=360;k=164<=k&&345>=k?.56+z(.2*l(g*(k+168)/180)):
.36+z(.4*l(g*(k+35)/180));var w=q*q*q*q;w=u(w/(w+1900));q-=r;h-=n;m-=p;d=(a-f)/(d*t);e=q/(e*c);a=c*(w*k+1-w);return u(d*d+e*e+(h*h+m*m-q*q)/(a*a))};I.prototype.get=function(a){var b=a.split(".");a=b[0];b=b[1];var c=this[a]();if(b){var d=a.indexOf(b);return-1<d?c[d]:console.warn("unknown channel "+b+" in mode "+a)}return c};I.prototype.set=function(a,c){var d=a.split(".");a=d[0];if(d=d[1]){var e=this[a]();var f=a.indexOf(d);if(-1<f)if("string"===b(c))switch(c.charAt(0)){case "+":e[f]+=+c;break;case "-":e[f]+=
+c;break;case "*":e[f]*=+c.substr(1);break;case "/":e[f]/=+c.substr(1);break;default:e[f]=+c}else e[f]=c;else console.warn("unknown channel "+d+" in mode "+a)}else e=c;return x(e,a).alpha(this.alpha())};I.prototype.clipped=function(){return this._rgb._clipped||!1};I.prototype.alpha=function(a){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],a]):this._rgb[3]};I.prototype.darken=function(a){null==a&&(a=1);var b=this.lab();b[0]-=W.Kn*a;return x.lab(b).alpha(this.alpha())};I.prototype.brighten=
function(a){null==a&&(a=1);return this.darken(-a)};I.prototype.darker=I.prototype.darken;I.prototype.brighter=I.prototype.brighten;I.prototype.saturate=function(a){null==a&&(a=1);var b=this.lch();b[1]+=a*W.Kn;0>b[1]&&(b[1]=0);return x.lch(b).alpha(this.alpha())};I.prototype.desaturate=function(a){null==a&&(a=1);return this.saturate(-a)};I.prototype.premultiply=function(){var a=this.rgb();var b=this.alpha();return x(a[0]*b,a[1]*b,a[2]*b,b)};var Ea=function(a,b,c){if(!Ea[c])throw"unknown blend mode "+
c;return Ea[c](a,b)};F=function(a){return function(b,c){c=x(c).rgb();b=x(b).rgb();return x(a(c,b),"rgb")}};var fa=function(a){return function(b,c){var d,e;var f=[];for(d=e=0;3>=e;d=++e)f[d]=a(b[d],c[d]);return f}};Ea.normal=F(fa(function(a,b){return a}));Ea.multiply=F(fa(function(a,b){return a*b/255}));Ea.screen=F(fa(function(a,b){return 255*(1-(1-a/255)*(1-b/255))}));Ea.overlay=F(fa(function(a,b){return 128>b?2*a*b/255:255*(1-2*(1-a/255)*(1-b/255))}));Ea.darken=F(fa(function(a,b){return a>b?b:a}));
Ea.lighten=F(fa(function(a,b){return a>b?a:b}));Ea.dodge=F(fa(function(a,b){if(255===a)return 255;a=b/255*255/(1-a/255);return 255<a?255:a}));Ea.burn=F(fa(function(a,b){return 255*(1-(1-b/255)/(a/255))}));x.blend=Ea;x.analyze=function(a){var b;var c={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};var d=0;for(b=a.length;d<b;d++){var e=a[d];null==e||isNaN(e)||(c.values.push(e),c.sum+=e,e<c.min&&(c.min=e),e>c.max&&(c.max=e),c.count+=1)}c.domain=[c.min,c.max];c.limits=function(a,
b){return x.limits(c,a,b)};return c};x.scale=function(a,c){var d="rgb";var e=x("#ccc");var f=0;var g=[0,1];var h=[];var k=[0,0];var l=!1;var m=[];var n=!1;var q=0;var r=1;var t=!1;var u={};var w=!0;var v=1;var A=function(a){var c,d;null==a&&(a=["#fff","#000"]);null!=a&&"string"===b(a)&&null!=x.brewer&&(a=x.brewer[a]||x.brewer[a.toLowerCase()]||a);if("array"===b(a)){a=a.slice(0);var e=c=0;for(d=a.length-1;0<=d?c<=d:c>=d;e=0<=d?++c:--c){var f=a[e];"string"===b(f)&&(a[e]=x(f))}e=c=h.length=0;for(f=a.length-
1;0<=f?c<=f:c>=f;e=0<=f?++c:--c)h.push(e/(a.length-1))}F();return m=a};var z=function(a){var b;if(null!=l){var c=l.length-1;for(b=0;b<c&&a>=l[b];)b++;return b-1}return 0};var y=function(a){return a};var B=function(a,c){var f,g;null==c&&(c=!1);if(isNaN(a))return e;c||(l&&2<l.length?(a=z(a),a/=l.length-2):a=r!==q?(a-q)/(r-q):1);c||(a=y(a));1!==v&&(a=p(a,v));a=k[0]+a*(1-k[0]-k[1]);a=Math.min(1,Math.max(0,a));var n=Math.floor(1E4*a);if(w&&u[n])var t=u[n];else{if("array"===b(m))for(c=f=0,g=h.length-1;0<=
g?f<=g:f>=g;c=0<=g?++f:--f){var A=h[c];if(a<=A){t=m[c];break}if(a>=A&&c===h.length-1){t=m[c];break}if(a>A&&a<h[c+1]){a=(a-A)/(h[c+1]-A);t=x.interpolate(m[c],m[c+1],a,d);break}}else"function"===b(m)&&(t=m(a));w&&(u[n]=t)}return t};var F=function(){return u={}};A(a);var H=function(a){a=x(B(a));return n&&a[n]?a[n]():a};H.classes=function(a){if(null!=a){if("array"===b(a))l=a,g=[a[0],a[a.length-1]];else{var c=x.analyze(g);l=0===a?[c.min,c.max]:x.limits(c,"e",a)}return H}return l};H.domain=function(a){var b;
if(!arguments.length)return g;q=a[0];r=a[a.length-1];h=[];var c=m.length;if(a.length===c&&q!==r){var d=0;for(c=a.length;d<c;d++){var e=a[d];h.push((e-q)/(r-q))}}else for(e=b=0,d=c-1;0<=d?b<=d:b>=d;e=0<=d?++b:--b)h.push(e/(c-1));g=[q,r];return H};H.mode=function(a){if(!arguments.length)return d;d=a;F();return H};H.range=function(a,b){A(a,b);return H};H.out=function(a){n=a;return H};H.spread=function(a){if(!arguments.length)return f;f=a;return H};H.correctLightness=function(a){null==a&&(a=!0);t=a;F();
y=t?function(a){var b=B(0,!0).lab()[0];var c=B(1,!0).lab()[0];var d=b>c;var e=B(a,!0).lab()[0];b+=(c-b)*a;e-=b;var f=0;var g=1;for(c=20;.01<Math.abs(e)&&0<c--;)d&&(e*=-1),0>e?(f=a,a+=.5*(g-a)):(g=a,a+=.5*(f-a)),e=B(a,!0).lab()[0],e-=b;return a}:function(a){return a};return H};H.padding=function(a){return null!=a?("number"===b(a)&&(a=[a,a]),k=a,H):k};H.colors=function(b,c){var d,e,f;2>arguments.length&&(c="hex");var h=[];if(0===arguments.length)h=m.slice(0);else if(1===b)h=[H(.5)];else if(1<b){var k=
g[0];var n=g[1]-k;h=function(){e=[];for(var a=0;0<=b?a<b:a>b;0<=b?a++:a--)e.push(a);return e}.apply(this).map(function(a){return H(k+a/(b-1)*n)})}else{a=[];var p=[];if(l&&2<l.length)for(h=f=1,d=l.length;1<=d?f<d:f>d;h=1<=d?++f:--f)p.push(.5*(l[h-1]+l[h]));else p=g;h=p.map(function(a){return H(a)})}x[c]&&(h=h.map(function(a){return a[c]()}));return h};H.cache=function(a){return null!=a?(w=a,H):w};H.gamma=function(a){return null!=a?(v=a,H):v};return H};null==x.scales&&(x.scales={});x.scales.cool=function(){return x.scale([x.hsl(180,
1,.9),x.hsl(250,.7,.4)])};x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")};x.analyze=function(a,c,d){var e;var f={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};null==d&&(d=function(){return!0});var g=function(a){null==a||isNaN(a)||(f.values.push(a),f.sum+=a,a<f.min&&(f.min=a),a>f.max&&(f.max=a),f.count+=1)};var h=function(a,e){if(d(a,e))return null!=c&&"function"===b(c)?g(c(a)):null!=c&&"string"===b(c)||"number"===b(c)?g(a[c]):
g(a)};if("array"===b(a)){var k=0;for(e=a.length;k<e;k++){var l=a[k];h(l)}}else for(e in a)l=a[e],h(l,e);f.domain=[f.min,f.max];f.limits=function(a,b){return x.limits(f,a,b)};return f};x.limits=function(a,c,d){var e,f,g,h,k,l,m;null==c&&(c="equal");null==d&&(d=7);"array"===b(a)&&(a=x.analyze(a));var q=a.min;t=a.max;var u=a.values.sort(function(a,b){return a-b});if(1===d)return[q,t];a=[];"c"===c.substr(0,1)&&(a.push(q),a.push(t));if("e"===c.substr(0,1)){a.push(q);c=u=1;for(e=d-1;1<=e?u<=e:u>=e;c=1<=
e?++u:--u)a.push(q+c/d*(t-q));a.push(t)}else if("l"===c.substr(0,1)){if(0>=q)throw"Logarithmic scales are only possible for values > 0";e=Math.LOG10E*r(q);u=Math.LOG10E*r(t);a.push(q);c=h=1;for(k=d-1;1<=k?h<=k:h>=k;c=1<=k?++h:--h)a.push(p(10,e+c/d*(u-e)));a.push(t)}else if("q"===c.substr(0,1)){a.push(q);c=e=1;for(k=d-1;1<=k?e<=k:e>=k;c=1<=k?++e:--e)h=(u.length-1)*c/d,c=n(h),c===h?a.push(u[c]):(h-=c,a.push(u[c]*(1-h)+u[c+1]*h));a.push(t)}else if("k"===c.substr(0,1)){k=u.length;e=Array(k);var w=Array(d);
var v=!0;var A=0;var y=null;y=[];y.push(q);c=f=1;for(g=d-1;1<=g?f<=g:f>=g;c=1<=g?++f:--f)y.push(q+c/d*(t-q));for(y.push(t);v;){q=c=0;for(f=d-1;0<=f?c<=f:c>=f;q=0<=f?++c:--c)w[q]=0;c=f=0;for(l=k-1;0<=l?f<=l:f>=l;c=0<=l?++f:--f){var B=u[c];var H=Number.MAX_VALUE;q=v=0;for(m=d-1;0<=m?v<=m:v>=m;q=0<=m?++v:--v)g=z(y[q]-B),g<H&&(H=g,h=q);w[h]++;e[c]=h}f=Array(d);q=c=0;for(v=d-1;0<=v?c<=v:c>=v;q=0<=v?++c:--c)f[q]=null;c=v=0;for(g=k-1;0<=g?v<=g:v>=g;c=0<=g?++v:--v)q=e[c],f[q]=null===f[q]?u[c]:f[q]+u[c];q=
v=0;for(g=d-1;0<=g?v<=g:v>=g;q=0<=g?++v:--v)f[q]*=1/w[q];v=!1;q=g=0;for(H=d-1;0<=H?g<=H:g>=H;q=0<=H?++g:--g)if(f[q]!==y[c]){v=!0;break}y=f;A++;200<A&&(v=!1)}h={};q=c=0;for(y=d-1;0<=y?c<=y:c>=y;q=0<=y?++c:--c)h[q]=[];c=y=0;for(--k;0<=k?y<=k:y>=k;c=0<=k?++y:--y)q=e[c],h[q].push(u[c]);u=[];q=c=0;for(--d;0<=d?c<=d:c>=d;q=0<=d?++c:--c)u.push(h[q][0]),u.push(h[q][h[q].length-1]);u=u.sort(function(a,b){return a-b});a.push(u[0]);c=d=1;for(e=u.length-1;d<=e;c=d+=2)c=u[c],isNaN(c)||-1!==a.indexOf(c)||a.push(c)}return a};
var Lb=function(){var a=h(arguments);var b=a[0];var c=a[1];a=a[2];B=2*Math.PI;b/=255;c/=255;a/=255;var d=Math.min(b,c,a);var e=(b+c+a)/3;d=1-d/e;0===d?b=0:(b=(b-c+(b-a))/2/Math.sqrt((b-c)*(b-c)+(b-a)*(c-a)),b=Math.acos(b),a>c&&(b=B-b),b/=B);return[360*b,d,e]};x.hsi=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(I,c.call(arguments).concat(["hsi"]),function(){})};m.hsi=function(b,c,d){var e=h(arguments);b=e[0];c=e[1];d=e[2];isNaN(b)&&(b=0);
b/=360;if(b<1/3){var f=(1-c)/3;var g=(1+c*l(B*b)/l(D-B*b))/3;var k=1-(f+g)}else b<2/3?(b-=1/3,g=(1-c)/3,k=(1+c*l(B*b)/l(D-B*b))/3,f=1-(g+k)):(b-=2/3,k=(1-c)/3,f=(1+c*l(B*b)/l(D-B*b))/3,g=1-(k+f));g=a(d*g*3);k=a(d*k*3);f=a(d*f*3);return[255*g,255*k,255*f,3<e.length?e[3]:1]};I.prototype.hsi=function(){return Lb(this._rgb)};var Vc=function(a,b,c,d){var e;if("hsl"===d){var f=a.hsl();var g=b.hsl()}else if("hsv"===d)f=a.hsv(),g=b.hsv();else if("hcg"===d)f=a.hcg(),g=b.hcg();else if("hsi"===d)f=a.hsi(),g=
b.hsi();else if("lch"===d||"hcl"===d)d="hcl",f=a.hcl(),g=b.hcl();if("h"===d.substr(0,1)){var h=f[0];var k=f[1];var l=f[2];var m=g[0];var n=g[1];var p=g[2]}isNaN(h)||isNaN(m)?isNaN(h)?isNaN(m)?a=Number.NaN:(a=m,1!==l&&0!==l||"hsv"===d||(e=n)):(a=h,1!==p&&0!==p||"hsv"===d||(e=k)):a=h+c*(m>h&&180<m-h?m-(h+360):m<h&&180<h-m?m+360-h:m-h);null==e&&(e=k+c*(n-k));return x[d](a,e,l+c*(p-l))};H=H.concat(function(){var a;var b="hsv hsl hsi hcl lch hcg".split(" ");var c=[];var d=0;for(a=b.length;d<a;d++)f=b[d],
c.push([f,Vc]);return c}());H.push(["num",function(a,b,c,d){a=a.num();b=b.num();return x.num(a+(b-a)*c,"num")}]);H.push(["lab",function(a,b,c,d){a=a.lab();b=b.lab();return new I(a[0]+c*(b[0]-a[0]),a[1]+c*(b[1]-a[1]),a[2]+c*(b[2]-a[2]),d)}])}).call(this);/*
 Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var fabric=fabric||{version:"3.6.2"};"undefined"!==typeof exports?exports.fabric=fabric:"function"===typeof define&&define.amd&&define([],function(){return fabric});
if("undefined"!==typeof document&&"undefined"!==typeof window)fabric.document=document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),fabric.window=window;else{var jsdom=require("jsdom"),virtualWindow=(new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"})).window;fabric.document=virtualWindow.document;
fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper;fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas;fabric.window=virtualWindow;DOMParser=fabric.window.DOMParser}fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints;fabric.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window;fabric.SHARED_ATTRIBUTES="display transform fill fill-opacity fill-rule opacity stroke stroke-dasharray stroke-linecap stroke-dashoffset stroke-linejoin stroke-miterlimit stroke-opacity stroke-width id paint-order vector-effect instantiated_by_use clip-path".split(" ");
fabric.DPI=96;fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)";fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig;fabric.reNonWord=/[ \n\.,;!\?\-]/;fabric.fontPaths={};fabric.iMatrix=[1,0,0,1,0,0];fabric.svgNS="http://www.w3.org/2000/svg";fabric.perfLimitSizeTotal=2097152;fabric.maxCacheSideLimit=4096;fabric.minCacheSideLimit=256;fabric.charWidthsCache={};fabric.textureSize=2048;fabric.disableStyleCopyPaste=!1;fabric.enableGLFiltering=!0;
fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1;fabric.browserShadowBlurConstant=1;fabric.arcToSegmentsCache={};fabric.boundsOfCurveCache={};fabric.cachesBoundsOfCurve=!0;fabric.forceGLPutImageData=!1;
fabric.initFilterBackend=function(){if(fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize))return console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize});if(fabric.Canvas2dFilterBackend)return new fabric.Canvas2dFilterBackend};"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=fabric);
(function(){function e(a,b){this.__eventListeners[a]&&(a=this.__eventListeners[a],b?a[a.indexOf(b)]=!1:fabric.util.array.fill(a,!1))}function f(a,b){this.__eventListeners||(this.__eventListeners={});if(1===arguments.length)for(var c in a)this.on(c,a[c]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(b);return this}function c(a,b){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)e.call(this,a);else if(1===arguments.length&&
"object"===typeof arguments[0])for(var c in a)e.call(this,c,a[c]);else e.call(this,a,b);return this}function b(a,b){if(!this.__eventListeners)return this;var c=this.__eventListeners[a];if(!c)return this;for(var e=0,f=c.length;e<f;e++)c[e]&&c[e].call(this,b||{});this.__eventListeners[a]=c.filter(function(a){return!1!==a});return this}fabric.Observable={observe:f,stopObserving:c,fire:b,on:f,off:c,trigger:b}})();
fabric.Collection={_objects:[],add:function(){this._objects.push.apply(this._objects,arguments);if(this._onObjectAdded)for(var e=0,f=arguments.length;e<f;e++)this._onObjectAdded(arguments[e]);this.renderOnAddRemove&&this.requestRenderAll();return this},insertAt:function(e,f,c){var b=this._objects;c?b[f]=e:b.splice(f,0,e);this._onObjectAdded&&this._onObjectAdded(e);this.renderOnAddRemove&&this.requestRenderAll();return this},remove:function(){for(var e=this._objects,f,c=!1,b=0,a=arguments.length;b<
a;b++)f=e.indexOf(arguments[b]),-1!==f&&(c=!0,e.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[b]));this.renderOnAddRemove&&c&&this.requestRenderAll();return this},forEachObject:function(e,f){for(var c=this.getObjects(),b=0,a=c.length;b<a;b++)e.call(f,c[b],b,c);return this},getObjects:function(e){return"undefined"===typeof e?this._objects.concat():this._objects.filter(function(f){return f.type===e})},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},
size:function(){return this._objects.length},contains:function(e){return-1<this._objects.indexOf(e)},complexity:function(){return this._objects.reduce(function(e,f){return e+=f.complexity?f.complexity():0},0)}};
fabric.CommonMethods={_setOptions:function(e){for(var f in e)this.set(f,e[f])},_initGradient:function(e,f){!e||!e.colorStops||e instanceof fabric.Gradient||this.set(f,new fabric.Gradient(e))},_initPattern:function(e,f,c){!e||!e.source||e instanceof fabric.Pattern?c&&c():this.set(f,new fabric.Pattern(e,c))},_initClipping:function(e){e.clipTo&&"string"===typeof e.clipTo&&(e=fabric.util.getFunctionBody(e.clipTo),"undefined"!==typeof e&&(this.clipTo=new Function("ctx",e)))},_setObject:function(e){for(var f in e)this._set(f,
e[f])},set:function(e,f){"object"===typeof e?this._setObject(e):"function"===typeof f&&"clipTo"!==e?this._set(e,f(this.get(e))):this._set(e,f);return this},_set:function(e,f){this[e]=f},toggle:function(e){var f=this.get(e);"boolean"===typeof f&&this.set(e,!f);return this},get:function(e){return this[e]}};
(function(e){var f=Math.sqrt,c=Math.atan2,b=Math.pow,a=Math.PI/180,h=Math.PI/2;fabric.util={cos:function(a){if(0===a)return 1;0>a&&(a=-a);switch(a/h){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(0===a)return 0;var b=a/h,c=1;0>a&&(c=-1);switch(b){case 1:return c;case 2:return 0;case 3:return-c}return Math.sin(a)},removeFromArray:function(a,b){b=a.indexOf(b);-1!==b&&a.splice(b,1);return a},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},degreesToRadians:function(b){return b*
a},radiansToDegrees:function(b){return b/a},rotatePoint:function(a,b,c){a.subtractEquals(b);a=fabric.util.rotateVector(a,c);return(new fabric.Point(a.x,a.y)).addEquals(b)},rotateVector:function(a,b){var c=fabric.util.sin(b);b=fabric.util.cos(b);return{x:a.x*b-a.y*c,y:a.x*c+a.y*b}},transformPoint:function(a,b,c){return c?new fabric.Point(b[0]*a.x+b[2]*a.y,b[1]*a.x+b[3]*a.y):new fabric.Point(b[0]*a.x+b[2]*a.y+b[4],b[1]*a.x+b[3]*a.y+b[5])},makeBoundingBoxFromPoints:function(a,b){if(b)for(var c=0;c<a.length;c++)a[c]=
fabric.util.transformPoint(a[c],b);c=[a[0].x,a[1].x,a[2].x,a[3].x];b=fabric.util.array.min(c);c=fabric.util.array.max(c)-b;var d=[a[0].y,a[1].y,a[2].y,a[3].y];a=fabric.util.array.min(d);d=fabric.util.array.max(d);return{left:b,top:a,width:c,height:d-a}},invertTransform:function(a){var b=1/(a[0]*a[3]-a[1]*a[2]);b=[b*a[3],-b*a[1],-b*a[2],b*a[0]];a=fabric.util.transformPoint({x:a[4],y:a[5]},b,!0);b[4]=-a.x;b[5]=-a.y;return b},toFixed:function(a,b){return parseFloat(Number(a).toFixed(b))},parseUnit:function(a,
b){var c=/\D{0,2}$/.exec(a);a=parseFloat(a);b||(b=fabric.Text.DEFAULT_SVG_FONT_SIZE);switch(c[0]){case "mm":return a*fabric.DPI/25.4;case "cm":return a*fabric.DPI/2.54;case "in":return a*fabric.DPI;case "pt":return a*fabric.DPI/72;case "pc":return a*fabric.DPI/72*12;case "em":return a*b;default:return a}},falseFunction:function(){return!1},getKlass:function(a,b){a=fabric.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1));return fabric.util.resolveNamespace(b)[a]},getSvgAttributes:function(a){var b=
["instantiated_by_use","style","id","class"];switch(a){case "linearGradient":b=b.concat("x1 y1 x2 y2 gradientUnits gradientTransform".split(" "));break;case "radialGradient":b=b.concat("gradientUnits gradientTransform cx cy r fx fy fr".split(" "));break;case "stop":b=b.concat(["offset","stop-color","stop-opacity"])}return b},resolveNamespace:function(a){if(!a)return fabric;a=a.split(".");var b=a.length,c,d=e||fabric.window;for(c=0;c<b;++c)d=d[a[c]];return d},loadImage:function(a,b,c,e){if(a){var d=
fabric.util.createImage(),f=function(){b&&b.call(c,d);d=d.onload=d.onerror=null};d.onload=f;d.onerror=function(){fabric.log("Error loading "+d.src);b&&b.call(c,null,!0);d=d.onload=d.onerror=null};0!==a.indexOf("data")&&e&&(d.crossOrigin=e);"data:image/svg"===a.substring(0,14)&&(d.onload=null,fabric.util.loadImageInDom(d,f));d.src=a}else b&&b.call(c,a)},loadImageInDom:function(a,b){var c=fabric.document.createElement("div");c.style.width=c.style.height="1px";c.style.left=c.style.top="-100%";c.style.position=
"absolute";c.appendChild(a);fabric.document.querySelector("body").appendChild(c);a.onload=function(){b();c.parentNode.removeChild(c);c=null}},enlivenObjects:function(a,b,c,e){function d(){++g===h&&b&&b(f.filter(function(a){return a}))}a=a||[];var f=[],g=0,h=a.length;h?a.forEach(function(a,b){a&&a.type?fabric.util.getKlass(a.type,c).fromObject(a,function(c,g){g||(f[b]=c);e&&e(a,c,g);d()}):d()}):b&&b(f)},enlivenPatterns:function(a,b){a=a||[];var c=[],d=0,e=a.length;e?a.forEach(function(a,f){a&&a.source?
new fabric.Pattern(a,function(a){c[f]=a;++d===e&&b&&b(c)}):(c[f]=a,++d===e&&b&&b(c))}):b&&b(c)},groupSVGElements:function(a,b,c){if(a&&1===a.length)return a[0];b&&(b.width&&b.height?b.centerPoint={x:b.width/2,y:b.height/2}:(delete b.width,delete b.height));a=new fabric.Group(a,b);"undefined"!==typeof c&&(a.sourcePath=c);return a},populateWithProperties:function(a,b,c){if(c&&"[object Array]"===Object.prototype.toString.call(c))for(var d=0,e=c.length;d<e;d++)c[d]in a&&(b[c[d]]=a[c[d]])},drawDashedLine:function(a,
b,e,h,n,p){h-=b;var d=n-e;n=f(h*h+d*d);h=c(d,h);d=p.length;var g=0,k=!0;a.save();a.translate(b,e);a.moveTo(0,0);a.rotate(h);for(b=0;n>b;)b+=p[g++%d],b>n&&(b=n),a[k?"lineTo":"moveTo"](b,0),k=!k;a.restore()},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(a){var b=fabric.util.createCanvasElement();b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(a,0,0);return b},toDataURL:function(a,b,c){return a.toDataURL("image/"+b,c)},createImage:function(){return fabric.document.createElement("img")},
clipContext:function(a,b){b.save();b.beginPath();a.clipTo(b);b.clip()},multiplyTransformMatrices:function(a,b,c){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],c?0:a[0]*b[4]+a[2]*b[5]+a[4],c?0:a[1]*b[4]+a[3]*b[5]+a[5]]},qrDecompose:function(d){var e=c(d[1],d[0]),h=b(d[0],2)+b(d[1],2),l=f(h),n=(d[0]*d[3]-d[2]*d[1])/l;h=c(d[0]*d[2]+d[1]*d[3],h);return{angle:e/a,scaleX:l,scaleY:n,skewX:h/a,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(a){if(!a.angle)return fabric.iMatrix.concat();
var b=fabric.util.degreesToRadians(a.angle);a=fabric.util.cos(b);b=fabric.util.sin(b);return[a,b,-b,a,0,0]},calcDimensionsMatrix:function(a){var b="undefined"===typeof a.scaleX?1:a.scaleX,c="undefined"===typeof a.scaleY?1:a.scaleY;b=[a.flipX?-b:b,0,0,a.flipY?-c:c,0,0];c=fabric.util.multiplyTransformMatrices;var d=fabric.util.degreesToRadians;a.skewX&&(b=c(b,[1,0,Math.tan(d(a.skewX)),1],!0));a.skewY&&(b=c(b,[1,Math.tan(d(a.skewY)),0,1],!0));return b},composeMatrix:function(a){var b=[1,0,0,1,a.translateX||
0,a.translateY||0],c=fabric.util.multiplyTransformMatrices;a.angle&&(b=c(b,fabric.util.calcRotateMatrix(a)));if(a.scaleX||a.scaleY||a.skewX||a.skewY||a.flipX||a.flipY)b=c(b,fabric.util.calcDimensionsMatrix(a));return b},customTransformMatrix:function(a,b,c){return fabric.util.composeMatrix({scaleX:a,scaleY:b,skewX:c})},resetObjectTransform:function(a){a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.flipX=!1;a.flipY=!1;a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,
skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},getFunctionBody:function(a){return(String(a).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(a,b,c,e){0<e&&(b=b>e?b-e:0,c=c>e?c-e:0);var d=!0;b=a.getImageData(b,c,2*e||1,2*e||1);c=b.data.length;for(a=3;a<c&&(d=b.data[a],d=0>=d,!1!==d);a+=4);return d},parsePreserveAspectRatioAttribute:function(a){var b="meet";if((a=a.split(" "))&&a.length)if(b=a.pop(),"meet"!==b&&"slice"!==b){var c=b;b=
"meet"}else a.length&&(c=a.pop());a="none"!==c?c.slice(1,4):"none";c="none"!==c?c.slice(5,8):"none";return{meetOrSlice:b,alignX:a,alignY:c}},clearFabricFontCache:function(a){(a=(a||"").toLowerCase())?fabric.charWidthsCache[a]&&delete fabric.charWidthsCache[a]:fabric.charWidthsCache={}},limitDimsByArea:function(a,b){a=Math.sqrt(b*a);return{x:Math.floor(a),y:Math.floor(b/a)}},capValue:function(a,b,c){return Math.max(a,Math.min(b,c))},findScaleToFit:function(a,b){return Math.min(b.width/a.width,b.height/
a.height)},findScaleToCover:function(a,b){return Math.max(b.width/a.width,b.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(a){return fabric.util.toFixed(a,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"}}})("undefined"!==typeof exports?exports:this);
(function(){function e(a,c,d,e,k,l,n){var g=b.call(arguments);if(fabric.arcToSegmentsCache[g])return fabric.arcToSegmentsCache[g];var h=Math.PI,w=n*h/180,u=fabric.util.sin(w);w=fabric.util.cos(w);var A=0,t=0;d=Math.abs(d);e=Math.abs(e);var z=-w*a*.5-u*c*.5,B=-w*c*.5+u*a*.5,D=d*d,y=e*e,E=B*B,x=z*z,H=D*y-D*E-y*x,F=0;0>H?(D=Math.sqrt(1-H/(D*y)),d*=D,e*=D):F=(k===l?-1:1)*Math.sqrt(H/(D*E+y*x));y=F*d*B/e;E=-F*e*z/d;F=w*y-u*E+.5*a;D=u*y+w*E+.5*c;var m=f(1,0,(z-y)/d,(B-E)/e);B=f((z-y)/d,(B-E)/e,(-z-y)/d,
(-B-E)/e);0===l&&0<B?B-=2*h:1===l&&0>B&&(B+=2*h);h=Math.ceil(Math.abs(B/h*2));z=[];B/=h;y=8/3*Math.sin(B/4)*Math.sin(B/4)/Math.sin(B/2);E=m+B;for(x=0;x<h;x++){H=x;var q=m,G=E;m=w;var I=u,M=d,S=e,ia=F,za=D,W=y,X=fabric.util.cos(q);q=fabric.util.sin(q);var aa=fabric.util.cos(G);G=fabric.util.sin(G);ia=m*M*aa-I*S*G+ia;za=I*M*aa+m*S*G+za;z[H]=[A+W*(-m*M*q-I*S*X),t+W*(-I*M*q+m*S*X),ia+W*(m*M*G+I*S*aa),za+W*(I*M*G-m*S*aa),ia,za];A=z[x][4];t=z[x][5];m=E;E+=B}return fabric.arcToSegmentsCache[g]=z}function f(a,
b,c,e){a=Math.atan2(b,a);c=Math.atan2(e,c);return c>=a?c-a:2*Math.PI-(a-c)}function c(a,c,d,e,f,l,n,p){if(fabric.cachesBoundsOfCurve){var g=b.call(arguments);if(fabric.boundsOfCurveCache[g])return fabric.boundsOfCurveCache[g]}var h=Math.sqrt,k=Math.min,A=Math.max,t=Math.abs,z=[],B=[[],[]];var D=6*a-12*d+6*f;var y=-3*a+9*d-9*f+3*n;var E=3*d-3*a;for(var x=0;2>x;++x)if(0<x&&(D=6*c-12*e+6*l,y=-3*c+9*e-9*l+3*p,E=3*e-3*c),1E-12>t(y)){if(!(1E-12>t(D))){var H=-E/D;0<H&&1>H&&z.push(H)}}else if(H=D*D-4*E*y,
!(0>H)){var F=h(H);H=(-D+F)/(2*y);0<H&&1>H&&z.push(H);H=(-D-F)/(2*y);0<H&&1>H&&z.push(H)}for(t=h=z.length;h--;)H=z[h],D=1-H,y=D*D*D*a+3*D*D*H*d+3*D*H*H*f+H*H*H*n,B[0][h]=y,y=D*D*D*c+3*D*D*H*e+3*D*H*H*l+H*H*H*p,B[1][h]=y;B[0][t]=a;B[1][t]=c;B[0][t+1]=n;B[1][t+1]=p;k=[{x:k.apply(null,B[0]),y:k.apply(null,B[1])},{x:A.apply(null,B[0]),y:A.apply(null,B[1])}];fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[g]=k);return k}var b=Array.prototype.join;fabric.util.drawArc=function(a,b,c,f){var d=[[],
[],[],[]];f=e(f[5]-b,f[6]-c,f[0],f[1],f[3],f[4],f[2]);for(var g=0,h=f.length;g<h;g++)d[g][0]=f[g][0]+b,d[g][1]=f[g][1]+c,d[g][2]=f[g][2]+b,d[g][3]=f[g][3]+c,d[g][4]=f[g][4]+b,d[g][5]=f[g][5]+c,a.bezierCurveTo.apply(a,d[g])};fabric.util.getBoundsOfArc=function(a,b,d,f,k,l,n,p,r){var g=0,h=0,A=[];d=e(p-a,r-b,d,f,l,n,k);f=0;for(k=d.length;f<k;f++)g=c(g,h,d[f][0],d[f][1],d[f][2],d[f][3],d[f][4],d[f][5]),A.push({x:g[0].x+a,y:g[0].y+b}),A.push({x:g[1].x+a,y:g[1].y+b}),g=d[f][4],h=d[f][5];return A};fabric.util.getBoundsOfCurve=
c})();
(function(){function e(c,b,a){if(c&&0!==c.length){var e=c.length-1,d=b?c[e][b]:c[e];if(b)for(;e--;)a(c[e][b],d)&&(d=c[e][b]);else for(;e--;)a(c[e],d)&&(d=c[e]);return d}}var f=Array.prototype.slice;fabric.util.array={fill:function(c,b){for(var a=c.length;a--;)c[a]=b;return c},invoke:function(c,b){for(var a=f.call(arguments,2),e=[],d=0,g=c.length;d<g;d++)e[d]=a.length?c[d][b].apply(c[d],a):c[d][b].call(c[d]);return e},min:function(c,b){return e(c,b,function(a,b){return a<b})},max:function(c,b){return e(c,
b,function(a,b){return a>=b})}}})();(function(){function e(f,c,b){if(b)if(!fabric.isLikelyNode&&c instanceof Element)f=c;else if(c instanceof Array){f=[];for(var a=0,h=c.length;a<h;a++)f[a]=e({},c[a],b)}else if(c&&"object"===typeof c)for(a in c)"canvas"===a?f[a]=e({},c[a]):c.hasOwnProperty(a)&&(f[a]=e({},c[a],b));else f=c;else for(a in c)f[a]=c[a];return f}fabric.util.object={extend:e,clone:function(f,c){return e({},f,c)}};fabric.util.object.extend(fabric.util,fabric.Observable)})();
(function(){function e(e,c){var b=e.charCodeAt(c);if(isNaN(b))return"";if(55296>b||57343<b)return e.charAt(c);if(55296<=b&&56319>=b){if(e.length<=c+1)throw"High surrogate without following low surrogate";b=e.charCodeAt(c+1);if(56320>b||57343<b)throw"High surrogate without following low surrogate";return e.charAt(c)+e.charAt(c+1)}if(0===c)throw"Low surrogate without preceding high surrogate";e=e.charCodeAt(c-1);if(55296>e||56319<e)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string=
{camelize:function(e){return e.replace(/-+(.)?/g,function(c,b){return b?b.toUpperCase():""})},capitalize:function(e,c){return e.charAt(0).toUpperCase()+(c?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(f){var c,b=[];var a=0;for(c;a<f.length;a++)!1!==(c=e(f,a))&&b.push(c);return b}}})();
(function(){function e(){}function f(a){for(var b=null,d=this;d.constructor.superclass;){var e=d.constructor.superclass.prototype[a];if(d[a]!==e){b=e;break}d=d.constructor.superclass.prototype}return b?1<arguments.length?b.apply(this,c.call(arguments,1)):b.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}var c=Array.prototype.slice,b=function(){},a=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}(),h=function(b,c,e){for(var d in c)d in
b.prototype&&"function"===typeof b.prototype[d]&&-1<(c[d]+"").indexOf("callSuper")?b.prototype[d]=function(a){return function(){var b=this.constructor.superclass;this.constructor.superclass=e;var d=c[a].apply(this,arguments);this.constructor.superclass=b;if("initialize"!==a)return d}}(d):b.prototype[d]=c[d],a&&(c.toString!==Object.prototype.toString&&(b.prototype.toString=c.toString),c.valueOf!==Object.prototype.valueOf&&(b.prototype.valueOf=c.valueOf))};fabric.util.createClass=function(){function a(){this.initialize.apply(this,
arguments)}var g=null,k=c.call(arguments,0);"function"===typeof k[0]&&(g=k.shift());a.superclass=g;a.subclasses=[];g&&(e.prototype=g.prototype,a.prototype=new e,g.subclasses.push(a));for(var l=0,n=k.length;l<n;l++)h(a,k[l],g);a.prototype.initialize||(a.prototype.initialize=b);a.prototype.constructor=a;a.prototype.callSuper=f;return a}})();
(function(){var e=!!fabric.document.createElement("div").attachEvent;fabric.util.addListener=function(f,c,b,a){f&&f.addEventListener(c,b,e?!1:a)};fabric.util.removeListener=function(f,c,b,a){f&&f.removeEventListener(c,b,e?!1:a)};fabric.util.getPointer=function(e){var c=fabric.util.getScrollLeftTop(e.target);var b=e.changedTouches;e=b&&b[0]?b[0]:e;return{x:e.clientX+c.left,y:e.clientY+c.top}}})();
(function(){var e=fabric.document.createElement("div"),f="string"===typeof e.style.filter,c=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,b=function(a){return a};"string"===typeof e.style.opacity?b=function(a,b){a.style.opacity=b;return a}:f&&(b=function(a,b){var d=a.style;a.currentStyle&&!a.currentStyle.hasLayout&&(d.zoom=1);c.test(d.filter)?d.filter=d.filter.replace(c,.9999<=b?"":"alpha(opacity="+100*b+")"):d.filter+=" alpha(opacity="+100*b+")";return a});fabric.util.setStyle=function(a,c){var d=a.style;
if(!d)return a;if("string"===typeof c)return a.style.cssText+=";"+c,-1<c.indexOf("opacity")?b(a,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var e in c)"opacity"===e?b(a,c[e]):d["float"===e||"cssFloat"===e?"undefined"===typeof d.styleFloat?"cssFloat":"styleFloat":e]=c[e];return a}})();
(function(){function e(a,b){a=fabric.document.createElement(a);for(var c in b)"class"===c?a.className=b[c]:"for"===c?a.htmlFor=b[c]:a.setAttribute(c,b[c]);return a}function f(a){for(var b=0,c=0,d=fabric.document.documentElement,e=fabric.document.body||{scrollLeft:0,scrollTop:0};a&&(a.parentNode||a.host)&&(a=a.parentNode||a.host,a===fabric.document?(b=e.scrollLeft||d.scrollLeft||0,c=e.scrollTop||d.scrollTop||0):(b+=a.scrollLeft||0,c+=a.scrollTop||0),1!==a.nodeType||"fixed"!==a.style.position););return{left:b,
top:c}}var c=Array.prototype.slice,b=function(a){return c.call(a,0)};try{var a=b(fabric.document.childNodes)instanceof Array}catch(d){}a||(b=function(a){for(var b=Array(a.length),c=a.length;c--;)b[c]=a[c];return b});var h=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(a,b){return(a=fabric.document.defaultView.getComputedStyle(a,null))?a[b]:void 0}:function(a,b){var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return c};(function(){var a=fabric.document.documentElement.style,
b="userSelect"in a?"userSelect":"MozUserSelect"in a?"MozUserSelect":"WebkitUserSelect"in a?"WebkitUserSelect":"KhtmlUserSelect"in a?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=function(a){"undefined"!==typeof a.onselectstart&&(a.onselectstart=fabric.util.falseFunction);b?a.style[b]="none":"string"===typeof a.unselectable&&(a.unselectable="on");return a};fabric.util.makeElementSelectable=function(a){"undefined"!==typeof a.onselectstart&&(a.onselectstart=null);b?a.style[b]="":"string"===
typeof a.unselectable&&(a.unselectable="");return a}})();(function(){fabric.util.getScript=function(a,b){var c=fabric.document.getElementsByTagName("head")[0],d=fabric.document.createElement("script"),e=!0;d.onload=d.onreadystatechange=function(a){!e||"string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!1,b(a||fabric.window.event),d=d.onload=d.onreadystatechange=null)};d.src=a;c.appendChild(d)}})();fabric.util.getById=function(a){return"string"===typeof a?
fabric.document.getElementById(a):a};fabric.util.toArray=b;fabric.util.makeElement=e;fabric.util.addClass=function(a,b){a&&-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=(a.className?" ":"")+b)};fabric.util.wrapElement=function(a,b,c){"string"===typeof b&&(b=e(b,c));a.parentNode&&a.parentNode.replaceChild(b,a);b.appendChild(a);return b};fabric.util.getScrollLeftTop=f;fabric.util.getElementOffset=function(a){var b=a&&a.ownerDocument;var c={left:0,top:0},d={left:0,top:0},e={borderLeftWidth:"left",
borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!b)return d;for(var p in e)d[e[p]]+=parseInt(h(a,p),10)||0;b=b.documentElement;"undefined"!==typeof a.getBoundingClientRect&&(c=a.getBoundingClientRect());a=f(a);return{left:c.left+a.left-(b.clientLeft||0)+d.left,top:c.top+a.top-(b.clientTop||0)+d.top}};fabric.util.getElementStyle=h;fabric.util.getNodeCanvas=function(a){a=fabric.jsdomImplForWrapper(a);return a._canvas||a._image};fabric.util.cleanUpJsdomNode=function(a){fabric.isLikelyNode&&
(a=fabric.jsdomImplForWrapper(a))&&(a._image=null,a._canvas=null,a._currentSrc=null,a._attributes=null,a._classList=null)}})();
(function(){function e(c,b){return c+(/\?/.test(c)?"&":"?")+b}function f(){}fabric.util.request=function(c,b){b||(b={});var a=b.method?b.method.toUpperCase():"GET",h=b.onComplete||function(){},d=new fabric.window.XMLHttpRequest,g=b.body||b.parameters;d.onreadystatechange=function(){4===d.readyState&&(h(d),d.onreadystatechange=f)};"GET"===a&&(g=null,"string"===typeof b.parameters&&(c=e(c,b.parameters)));d.open(a,c,!0);"POST"!==a&&"PUT"!==a||d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
d.send(g);return d}})();fabric.log=console.log;fabric.warn=console.warn;
(function(){function e(){return!1}function f(a,b,c,e){return-c*Math.cos(a/e*(Math.PI/2))+c+b}function c(){return b.apply(fabric.window,arguments)}var b=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(a){return fabric.window.setTimeout(a,1E3/60)},a=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;fabric.util.animate=function(a){c(function(b){a||
(a={});var d=b||+new Date,h=a.duration||500,l=d+h,n,p=a.onChange||e,r=a.abort||e,w=a.onComplete||e,u=a.easing||f,A="startValue"in a?a.startValue:0,t="endValue"in a?a.endValue:100,z=a.byValue||t-A;a.onStart&&a.onStart();(function y(a){n=a||+new Date;var b=n>l?h:n-d;a=b/h;b=u(b,A,z,h);var e=Math.abs((b-A)/z);r()?w(t,1,1):n>l?(p(t,1,1),w(t,1,1)):(p(b,e,a),c(y))})(d)})};fabric.util.requestAnimFrame=c;fabric.util.cancelAnimFrame=function(){return a.apply(fabric.window,arguments)}})();
(function(){fabric.util.animateColor=function(e,f,c,b){e=(new fabric.Color(e)).getSource();f=(new fabric.Color(f)).getSource();b=b||{};fabric.util.animate(fabric.util.object.extend(b,{duration:c||500,startValue:e,endValue:f,byValue:f,easing:function(a,c,d,e){a=b.colorEasing?b.colorEasing(a,e):1-Math.cos(a/e*(Math.PI/2));e="rgba("+parseInt(c[0]+a*(d[0]-c[0]),10)+","+parseInt(c[1]+a*(d[1]-c[1]),10)+","+parseInt(c[2]+a*(d[2]-c[2]),10);e+=","+(c&&d?parseFloat(c[3]+a*(d[3]-c[3])):1);return e+")"}}))}})();
(function(){function e(a,b,c,e){a<Math.abs(b)?(a=b,e=c/4):e=0===b&&0===a?c/(2*Math.PI)*Math.asin(1):c/(2*Math.PI)*Math.asin(b/a);return{a:a,c:b,p:c,s:e}}function f(a,b,c){return a.a*Math.pow(2,10*--b)*Math.sin(2*(b*c-a.s)*Math.PI/a.p)}function c(a,c,d,e){return d-b(e-a,0,d,e)+c}function b(a,b,c,e){return(a/=e)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}fabric.util.ease={easeInQuad:function(a,
b,c,e){return c*(a/=e)*a+b},easeOutQuad:function(a,b,c,e){return-c*(a/=e)*(a-2)+b},easeInOutQuad:function(a,b,c,e){a/=e/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,e){return c*(a/=e)*a*a+b},easeOutCubic:function(a,b,c,e){return c*((a=a/e-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,e){a/=e/2;return 1>a?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,e){return c*(a/=e)*a*a*a+b},easeOutQuart:function(a,b,c,e){return-c*((a=a/e-1)*a*a*a-1)+b},easeInOutQuart:function(a,
b,c,e){a/=e/2;return 1>a?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,e){return c*(a/=e)*a*a*a*a+b},easeOutQuint:function(a,b,c,e){return c*((a=a/e-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,e){a/=e/2;return 1>a?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,e){return-c*Math.cos(a/e*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,e){return c*Math.sin(a/e*(Math.PI/2))+b},easeInOutSine:function(a,b,c,e){return-c/2*(Math.cos(Math.PI*a/e)-1)+b},easeInExpo:function(a,
b,c,e){return 0===a?b:c*Math.pow(2,10*(a/e-1))+b},easeOutExpo:function(a,b,c,e){return a===e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b},easeInOutExpo:function(a,b,c,e){if(0===a)return b;if(a===e)return b+c;a/=e/2;return 1>a?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,e){return-c*(Math.sqrt(1-(a/=e)*a)-1)+b},easeOutCirc:function(a,b,c,e){return c*Math.sqrt(1-(a=a/e-1)*a)+b},easeInOutCirc:function(a,b,c,e){a/=e/2;return 1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-
(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,g){var d=0;if(0===a)return b;a/=g;if(1===a)return b+c;d||(d=.3*g);c=e(c,c,d,1.70158);return-f(c,a,g)+b},easeOutElastic:function(a,b,c,f){var d=0;if(0===a)return b;a/=f;if(1===a)return b+c;d||(d=.3*f);c=e(c,c,d,1.70158);return c.a*Math.pow(2,-10*a)*Math.sin(2*(a*f-c.s)*Math.PI/c.p)+c.c+b},easeInOutElastic:function(a,b,c,g){var d=0;if(0===a)return b;a/=g/2;if(2===a)return b+c;d||(d=.3*g*1.5);c=e(c,c,d,1.70158);return 1>a?-.5*f(c,a,g)+b:c.a*Math.pow(2,-10*
--a)*Math.sin(2*(a*g-c.s)*Math.PI/c.p)*.5+c.c+b},easeInBack:function(a,b,c,e,f){void 0===f&&(f=1.70158);return c*(a/=e)*a*((f+1)*a-f)+b},easeOutBack:function(a,b,c,e,f){void 0===f&&(f=1.70158);return c*((a=a/e-1)*a*((f+1)*a+f)+1)+b},easeInOutBack:function(a,b,c,e,f){void 0===f&&(f=1.70158);a/=e/2;return 1>a?c/2*a*a*(((f*=1.525)+1)*a-f)+b:c/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+b},easeInBounce:c,easeOutBounce:b,easeInOutBounce:function(a,e,d,f){return a<f/2?.5*c(2*a,0,d,f)+e:.5*b(2*a-f,0,d,f)+.5*d+e}}})();
(function(e){function f(a,b,c,d){var e="[object Array]"===Object.prototype.toString.call(b);if("fill"!==a&&"stroke"!==a||"none"!==b)if("vector-effect"===a)b="non-scaling-stroke"===b;else if("strokeDashArray"===a)b="none"===b?null:b.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===a)b=c&&c.transformMatrix?z(c.transformMatrix,r.parseTransformAttribute(b)):r.parseTransformAttribute(b);else if("visible"===a)b="none"!==b&&"hidden"!==b,c&&!1===c.visible&&(b=!1);else if("opacity"===
a)b=parseFloat(b),c&&"undefined"!==typeof c.opacity&&(b*=c.opacity);else if("textAnchor"===a)b="start"===b?"left":"end"===b?"right":"center";else if("charSpacing"===a)var f=t(b,d)/d*1E3;else if("paintFirst"===a)a=b.indexOf("fill"),c=b.indexOf("stroke"),b="fill",-1<a&&-1<c&&c<a?b="stroke":-1===a&&-1<c&&(b="stroke");else{if("href"===a||"xlink:href"===a)return b;f=e?b.map(t):t(b,d)}else b="";return!e&&isNaN(f)?b:f}function c(a){return new RegExp("^("+a.join("|")+")\\b","i")}function b(a){for(var b in D)if("undefined"!==
typeof a[D[b]]&&""!==a[b]){if("undefined"===typeof a[b]){if(!r.Object.prototype[b])continue;a[b]=r.Object.prototype[b]}if(0!==a[b].indexOf("url(")){var c=new r.Color(a[b]);a[b]=c.setAlpha(A(c.getAlpha()*a[D[b]],2)).toRgba()}}return a}function a(a,b){var c=[],d;var e=0;for(d=b.length;e<d;e++){var f=b[e];f=a.getElementsByTagName(f);c=c.concat(Array.prototype.slice.call(f))}return c}function h(a,b){var c,d;a.replace(/;\s*$/,"").split(";").forEach(function(a){a=a.split(":");c=a[0].trim().toLowerCase();
d=a[1].trim();b[c]=d})}function d(a,b){var c={},d;for(d in r.cssRules[b]){var e,f=a,h=d.split(" "),k=!0;if((e=g(f,h.pop()))&&h.length){k=void 0;for(var l=h,n=!0;f.parentNode&&1===f.parentNode.nodeType&&l.length;)n&&(k=l.pop()),f=f.parentNode,n=g(f,k);k=0===l.length}if(e&&k&&0===h.length)for(var p in r.cssRules[b][d])c[p]=r.cssRules[b][d][p]}return c}function g(a,b){var c=a.nodeName,d=a.getAttribute("class");a=a.getAttribute("id");c=new RegExp("^"+c,"i");b=b.replace(c,"");a&&b.length&&(c=new RegExp("#"+
a+"(?![a-zA-Z\\-]+)","i"),b=b.replace(c,""));if(d&&b.length)for(d=d.split(" "),a=d.length;a--;)c=new RegExp("\\."+d[a]+"(?![a-zA-Z\\-]+)","i"),b=b.replace(c,"");return 0===b.length}function k(a,b){var c;a.getElementById&&(c=a.getElementById(b));if(c)return c;var d,e=a.getElementsByTagName("*");c=0;for(d=e.length;c<d;c++)if(a=e[c],b===a.getAttribute("id"))return a}function l(b){for(var c=a(b,["use","svg:use"]),d=0;c.length&&d<c.length;){var e=c[d],f=(e.getAttribute("xlink:href")||e.getAttribute("href")).substr(1),
g=e.getAttribute("x")||0,h=e.getAttribute("y")||0;f=k(b,f).cloneNode(!0);g=(f.getAttribute("transform")||"")+" translate("+g+", "+h+")";h=c.length;var l,p=r.svgNS;n(f);if(/^svg$/i.test(f.nodeName)){var t=f.ownerDocument.createElementNS(p,"g");var u=0;var w=f.attributes;for(l=w.length;u<l;u++){var x=w.item(u);t.setAttributeNS(p,x.nodeName,x.nodeValue)}for(;f.firstChild;)t.appendChild(f.firstChild);f=t}u=0;w=e.attributes;for(l=w.length;u<l;u++)x=w.item(u),"x"!==x.nodeName&&"y"!==x.nodeName&&"xlink:href"!==
x.nodeName&&"href"!==x.nodeName&&("transform"===x.nodeName?g=x.nodeValue+" "+g:f.setAttribute(x.nodeName,x.nodeValue));f.setAttribute("transform",g);f.setAttribute("instantiated_by_use","1");f.removeAttribute("id");e.parentNode.replaceChild(f,e);c.length===h&&d++}}function n(a){var b=a.getAttribute("viewBox"),c=1,d=1,e=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("x")||0,h=a.getAttribute("y")||0,k=a.getAttribute("preserveAspectRatio")||"";var l=!b||!r.svgViewBoxElementsRegEx.test(a.nodeName)||
!(b=b.match(y));var n=!e||!f||"100%"===e||"100%"===f;var p=l&&n;var u={},w="",x=0,A=0;u.width=0;u.height=0;if(u.toBeParsed=p)return u;if(l)return u.width=t(e),u.height=t(f),u;l=-parseFloat(b[1]);p=-parseFloat(b[2]);var z=parseFloat(b[3]);b=parseFloat(b[4]);u.minX=l;u.minY=p;u.viewBoxWidth=z;u.viewBoxHeight=b;n?(u.width=z,u.height=b):(u.width=t(e),u.height=t(f),c=u.width/z,d=u.height/b);k=r.util.parsePreserveAspectRatioAttribute(k);"none"!==k.alignX&&("meet"===k.meetOrSlice&&(d=c=c>d?d:c),"slice"===
k.meetOrSlice&&(d=c=c>d?c:d),x=u.width-z*c,A=u.height-b*c,"Mid"===k.alignX&&(x/=2),"Mid"===k.alignY&&(A/=2),"Min"===k.alignX&&(x=0),"Min"===k.alignY&&(A=0));if(1===c&&1===d&&0===l&&0===p&&0===g&&0===h)return u;if(g||h)w=" translate("+t(g)+" "+t(h)+") ";c=w+" matrix("+c+" 0 0 "+d+" "+(l*c+x)+" "+(p*d+A)+") ";u.viewboxTransform=r.parseTransformAttribute(c);if("svg"===a.nodeName){for(d=a.ownerDocument.createElementNS(r.svgNS,"g");a.firstChild;)d.appendChild(a.firstChild);a.appendChild(d)}else d=a,c=
d.getAttribute("transform")+c;d.setAttribute("transform",c);return u}function p(a,b){var c=b.getAttribute("xlink:href").substr(1),d=k(a,c);d&&d.getAttribute("xlink:href")&&p(a,d);"gradientTransform x1 x2 y1 y2 gradientUnits cx cy r fx fy".split(" ").forEach(function(a){d&&!b.hasAttribute(a)&&d.hasAttribute(a)&&b.setAttribute(a,d.getAttribute(a))});if(!b.children.length)for(a=d.cloneNode(!0);a.firstChild;)b.appendChild(a.firstChild);b.removeAttribute("xlink:href")}var r=e.fabric||(e.fabric={}),w=r.util.object.extend,
u=r.util.object.clone,A=r.util.toFixed,t=r.util.parseUnit,z=r.util.multiplyTransformMatrices,B={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap",
"stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},D={stroke:"strokeOpacity",fill:"fillOpacity"};r.svgValidTagNamesRegEx=c("path circle polygon polyline ellipse rect line image text".split(" "));r.svgViewBoxElementsRegEx=c("symbol image marker pattern view svg".split(" "));
r.svgInvalidAncestorsRegEx=c("pattern defs symbol metadata clipPath mask desc".split(" "));r.svgValidParentsRegEx=c("symbol g a svg clipPath defs".split(" "));r.cssRules={};r.gradientDefs={};r.clipPaths={};r.parseTransformAttribute=function(){function a(a,b){var c=r.util.cos(b[0]),d=r.util.sin(b[0]),e=0,f=0;3===b.length&&(e=b[1],f=b[2]);a[0]=c;a[1]=d;a[2]=-d;a[3]=c;a[4]=e-(c*e-d*f);a[5]=f-(d*e+c*f)}function b(a,b){var c=2===b.length?b[1]:b[0];a[0]=b[0];a[3]=c}function c(a,b){a[4]=b[0];2===b.length&&
(a[5]=b[1])}var d=r.iMatrix,e=r.reNum,f="(?:"+("(?:(matrix)\\s*\\(\\s*("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+
e+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+e+")\\s*\\))")+")",g=new RegExp("^\\s*(?:"+("(?:"+f+"(?:(?:\\s+,?\\s*|,\\s*)*"+f+")*)")+"?)\\s*$"),h=new RegExp(f,"g");return function(e){var k=d.concat(),l=[];if(!e||e&&!g.test(e))return k;e.replace(h,function(e){var g=(new RegExp(f)).exec(e).filter(function(a){return!!a});e=g[1];g=g.slice(2).map(parseFloat);switch(e){case "translate":c(k,g);break;case "rotate":g[0]=r.util.degreesToRadians(g[0]);a(k,g);break;case "scale":b(k,g);break;case "skewX":k[2]=
Math.tan(r.util.degreesToRadians(g[0]));break;case "skewY":k[1]=Math.tan(r.util.degreesToRadians(g[0]));break;case "matrix":k=g}l.push(k.concat());k=d.concat()});for(e=l[0];1<l.length;)l.shift(),e=r.util.multiplyTransformMatrices(e,l[0]);return e}}();var y=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");r.parseSVGDocument=function(a,b,c,d){if(a){l(a);var e=r.Object.__uid++,f,g=n(a),h=r.util.toArray(a.getElementsByTagName("*"));g.crossOrigin=
d&&d.crossOrigin;g.svgUid=e;if(0===h.length&&r.isLikelyNode){h=a.selectNodes('//*[name(.)!="svg"]');var k=[];var m=0;for(f=h.length;m<f;m++)k[m]=h[m];h=k}m=h.filter(function(a){n(a);var b;if(b=r.svgValidTagNamesRegEx.test(a.nodeName.replace("svg:",""))){a:{for(b=r.svgInvalidAncestorsRegEx;a&&(a=a.parentNode);)if(a.nodeName&&b.test(a.nodeName.replace("svg:",""))&&!a.getAttribute("instantiated_by_use")){a=!0;break a}a=!1}b=!a}return b});if(!m||m&&!m.length)b&&b([],{});else{var p={};h.filter(function(a){return"clipPath"===
a.nodeName.replace("svg:","")}).forEach(function(a){var b=a.getAttribute("id");p[b]=r.util.toArray(a.getElementsByTagName("*")).filter(function(a){return r.svgValidTagNamesRegEx.test(a.nodeName.replace("svg:",""))})});r.gradientDefs[e]=r.getGradientDefs(a);r.cssRules[e]=r.getCSSRules(a);r.clipPaths[e]=p;r.parseElements(m,function(a,c){b&&(b(a,g,c,h),delete r.gradientDefs[e],delete r.cssRules[e],delete r.clipPaths[e])},u(g),c,d)}}};var E=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+
r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");w(r,{parseFontDeclaration:function(a,b){var c=a.match(E);if(c){a=c[1];var d=c[3],e=c[4],f=c[5];c=c[6];a&&(b.fontStyle=a);d&&(b.fontWeight=isNaN(parseFloat(d))?d:parseFloat(d));e&&(b.fontSize=t(e));c&&(b.fontFamily=c);f&&(b.lineHeight="normal"===f?1:f)}},getGradientDefs:function(b){var c=a(b,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),d,e={};for(d=c.length;d--;){var f=c[d];f.getAttribute("xlink:href")&&
p(b,f);e[f.getAttribute("id")]=f}return e},parseAttributes:function(a,c,e){if(a){var g,h={},k;"undefined"===typeof e&&(e=a.getAttribute("svgUid"));a.parentNode&&r.svgValidParentsRegEx.test(a.parentNode.nodeName)&&(h=r.parseAttributes(a.parentNode,c,e));c=c.reduce(function(b,c){(g=a.getAttribute(c))&&(b[c]=g);return b},{});e=w(d(a,e),r.parseStyleAttribute(a));c=w(c,e);e["clip-path"]&&a.setAttribute("clip-path",e["clip-path"]);e=k=h.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE;c["font-size"]&&(c["font-size"]=
e=t(c["font-size"],k));var l={},n;for(n in c){k=n in B?B[n]:n;var p=f(k,c[n],h,e);l[k]=p}l&&l.font&&r.parseFontDeclaration(l.font,l);h=w(h,l);return r.svgValidParentsRegEx.test(a.nodeName)?h:b(h)}},parseElements:function(a,b,c,d,e){(new r.ElementsParser(a,b,c,d,e)).parse()},parseStyleAttribute:function(a){var b={};a=a.getAttribute("style");if(!a)return b;if("string"===typeof a)h(a,b);else{var c;for(c in a)if("undefined"!==typeof a[c]){var d=c.toLowerCase();var e=a[c];b[d]=e}}return b},parsePointsAttribute:function(a){if(!a)return null;
a=a.replace(/,/g," ").trim();a=a.split(/\s+/);var b=[],c;var d=0;for(c=a.length;d<c;d+=2)b.push({x:parseFloat(a[d]),y:parseFloat(a[d+1])});return b},getCSSRules:function(a){a=a.getElementsByTagName("style");var b,c={};var d=0;for(b=a.length;d<b;d++){var e=a[d].textContent||a[d].text;e=e.replace(/\/\*[\s\S]*?\*\//g,"");""!==e.trim()&&(e=e.match(/[^{]*\{[\s\S]*?\}/g),e=e.map(function(a){return a.trim()}),e.forEach(function(a){a=a.match(/([\s\S]*?)\s*\{([^}]*)\}/);var e={},f=a[2].trim().replace(/;$/,
"").split(/\s*;\s*/);d=0;for(b=f.length;d<b;d++){var g=f[d].split(/\s*:\s*/);e[g[0]]=g[1]}a=a[1];a.split(",").forEach(function(a){a=a.replace(/^svg/i,"").trim();""!==a&&(c[a]?r.util.object.extend(c[a],e):c[a]=r.util.object.clone(e))})}))}return c},loadSVGFromURL:function(a,b,c,d){a=a.replace(/^\n\s*/,"").trim();new r.util.request(a,{method:"get",onComplete:function(a){var e=a.responseXML;e&&!e.documentElement&&r.window.ActiveXObject&&a.responseText&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async=
"false",e.loadXML(a.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));if(!e||!e.documentElement)return b&&b(null),!1;r.parseSVGDocument(e.documentElement,function(a,c,d,e){b&&b(a,c,d,e)},c,d)}})},loadSVGFromString:function(a,b,c,d){a=a.trim();var e;if("undefined"!==typeof r.window.DOMParser){var f=new r.window.DOMParser;f&&f.parseFromString&&(e=f.parseFromString(a,"text/xml"))}else r.window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(a.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,
"")));r.parseSVGDocument(e.documentElement,function(a,c,d,e){b(a,c,d,e)},c,d)}})})("undefined"!==typeof exports?exports:this);fabric.ElementsParser=function(e,f,c,b,a,h){this.elements=e;this.callback=f;this.options=c;this.reviver=b;this.svgUid=c&&c.svgUid||0;this.parsingOptions=a;this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g;this.doc=h};
(function(e){e.parse=function(){this.instances=Array(this.elements.length);this.numElements=this.elements.length;this.createObjects()};e.createObjects=function(){var e=this;this.elements.forEach(function(c,b){c.setAttribute("svgUid",e.svgUid);e.createObject(c,b)})};e.findTag=function(e){return fabric[fabric.util.string.capitalize(e.tagName.replace("svg:",""))]};e.createObject=function(e,c){var b=this.findTag(e);if(b&&b.fromElement)try{b.fromElement(e,this.createCallback(c,e),this.options)}catch(a){fabric.log(a)}else this.checkIfDone()};
e.createCallback=function(e,c){var b=this;return function(a){var f;b.resolveGradient(a,c,"fill");b.resolveGradient(a,c,"stroke");a instanceof fabric.Image&&a._originalElement&&(f=a.parsePreserveAspectRatioAttribute(c));a._removeTransformMatrix(f);b.resolveClipPath(a,c);b.reviver&&b.reviver(c,a);b.instances[e]=a;b.checkIfDone()}};e.extractPropertyDefinition=function(e,c,b){c=e[c];e=this.regexUrl;if(e.test(c))return e.lastIndex=0,c=e.exec(c)[1],e.lastIndex=0,fabric[b][this.svgUid][c]};e.resolveGradient=
function(e,c,b){var a=this.extractPropertyDefinition(e,b,"gradientDefs");a&&(c=c.getAttribute(b+"-opacity"),a=fabric.Gradient.fromElement(a,e,c,this.options),e.set(b,a))};e.createClipPathCallback=function(e,c){return function(b){b._removeTransformMatrix();b.fillRule=b.clipRule;c.push(b)}};e.resolveClipPath=function(e,c){var b=this.extractPropertyDefinition(e,"clipPath","clipPaths"),a;if(b){var f=[];var d=fabric.util.invertTransform(e.calcTransformMatrix());for(a=b[0].parentNode;c.parentNode&&c.getAttribute("clip-path")!==
e.clipPath;)c=c.parentNode;c.parentNode.appendChild(a);for(var g=0;g<b.length;g++){a=b[g];var k=this.findTag(a);k.fromElement(a,this.createClipPathCallback(e,f),this.options)}b=1===f.length?f[0]:new fabric.Group(f);d=fabric.util.multiplyTransformMatrices(d,b.calcTransformMatrix());b.clipPath&&this.resolveClipPath(b,c);d=fabric.util.qrDecompose(d);b.flipX=!1;b.flipY=!1;b.set("scaleX",d.scaleX);b.set("scaleY",d.scaleY);b.angle=d.angle;b.skewX=d.skewX;b.skewY=0;b.setPositionByOrigin({x:d.translateX,
y:d.translateY},"center","center");e.clipPath=b}};e.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(e){return null!=e}),this.callback(this.instances,this.elements))}})(fabric.ElementsParser.prototype);
(function(e){function f(c,b){this.x=c;this.y=b}e=e.fabric||(e.fabric={});e.Point?e.warn("fabric.Point is already defined"):(e.Point=f,f.prototype={type:"point",constructor:f,add:function(c){return new f(this.x+c.x,this.y+c.y)},addEquals:function(c){this.x+=c.x;this.y+=c.y;return this},scalarAdd:function(c){return new f(this.x+c,this.y+c)},scalarAddEquals:function(c){this.x+=c;this.y+=c;return this},subtract:function(c){return new f(this.x-c.x,this.y-c.y)},subtractEquals:function(c){this.x-=c.x;this.y-=
c.y;return this},scalarSubtract:function(c){return new f(this.x-c,this.y-c)},scalarSubtractEquals:function(c){this.x-=c;this.y-=c;return this},multiply:function(c){return new f(this.x*c,this.y*c)},multiplyEquals:function(c){this.x*=c;this.y*=c;return this},divide:function(c){return new f(this.x/c,this.y/c)},divideEquals:function(c){this.x/=c;this.y/=c;return this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=
c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,b){"undefined"===typeof b&&(b=.5);b=Math.max(Math.min(1,b),0);return new f(this.x+(c.x-this.x)*b,this.y+(c.y-this.y)*b)},distanceFrom:function(c){var b=this.x-c.x;c=this.y-c.y;return Math.sqrt(b*b+c*c)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new f(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new f(Math.max(this.x,c.x),Math.max(this.y,
c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,b){this.x=c;this.y=b;return this},setX:function(c){this.x=c;return this},setY:function(c){this.y=c;return this},setFromPoint:function(c){this.x=c.x;this.y=c.y;return this},swap:function(c){var b=this.x,a=this.y;this.x=c.x;this.y=c.y;c.x=b;c.y=a},clone:function(){return new f(this.x,this.y)}})})("undefined"!==typeof exports?exports:this);
(function(e){function f(b){this.status=b;this.points=[]}var c=e.fabric||(e.fabric={});c.Intersection?c.warn("fabric.Intersection is already defined"):(c.Intersection=f,c.Intersection.prototype={constructor:f,appendPoint:function(b){this.points.push(b);return this},appendPoints:function(b){this.points=this.points.concat(b);return this}},c.Intersection.intersectLineLine=function(b,a,e,d){var g=(d.x-e.x)*(b.y-e.y)-(d.y-e.y)*(b.x-e.x);var h=(a.x-b.x)*(b.y-e.y)-(a.y-b.y)*(b.x-e.x);e=(d.y-e.y)*(a.x-b.x)-
(d.x-e.x)*(a.y-b.y);0!==e?(g/=e,h/=e,0<=g&&1>=g&&0<=h&&1>=h?(h=new f("Intersection"),h.appendPoint(new c.Point(b.x+g*(a.x-b.x),b.y+g*(a.y-b.y)))):h=new f):h=0===g||0===h?new f("Coincident"):new f("Parallel");return h},c.Intersection.intersectLinePolygon=function(b,a,c){var d=new f,e=c.length,h;for(h=0;h<e;h++){var l=c[h];var n=c[(h+1)%e];l=f.intersectLineLine(b,a,l,n);d.appendPoints(l.points)}0<d.points.length&&(d.status="Intersection");return d},c.Intersection.intersectPolygonPolygon=function(b,
a){var c=new f,d=b.length,e;for(e=0;e<d;e++){var k=f.intersectLinePolygon(b[e],b[(e+1)%d],a);c.appendPoints(k.points)}0<c.points.length&&(c.status="Intersection");return c},c.Intersection.intersectPolygonRectangle=function(b,a,e){var d=a.min(e),g=a.max(e);e=new c.Point(g.x,d.y);var h=new c.Point(d.x,g.y);a=f.intersectLinePolygon(d,e,b);e=f.intersectLinePolygon(e,g,b);g=f.intersectLinePolygon(g,h,b);b=f.intersectLinePolygon(h,d,b);d=new f;d.appendPoints(a.points);d.appendPoints(e.points);d.appendPoints(g.points);
d.appendPoints(b.points);0<d.points.length&&(d.status="Intersection");return d})})("undefined"!==typeof exports?exports:this);
(function(e){function f(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}function c(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var b=e.fabric||(e.fabric={});b.Color?b.warn("fabric.Color is already defined."):(b.Color=f,b.Color.prototype={_tryParsingColor:function(a){var b;a in f.colorNameMap&&(a=f.colorNameMap[a]);"transparent"===a&&(b=[255,255,255,0]);b||(b=f.sourceFromHex(a));b||(b=f.sourceFromRgb(a));b||(b=f.sourceFromHsl(a));b||(b=[0,0,0,1]);b&&
this.setSource(b)},_rgbToHsl:function(a,c,d){a/=255;c/=255;d/=255;var e=b.util.array.max([a,c,d]);var f=b.util.array.min([a,c,d]);var h=(e+f)/2;if(e===f)var n=f=0;else{var p=e-f;f=.5<h?p/(2-e-f):p/(e+f);switch(e){case a:n=(c-d)/p+(c<d?6:0);break;case c:n=(d-a)/p+2;break;case d:n=(a-c)/p+4}n/=6}return[Math.round(360*n),Math.round(100*f),Math.round(100*h)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+
","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource();a=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var a=this.getSource(),b=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+b[0]+","+b[1]+"%,"+b[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource();var b=a[0].toString(16);b=1===b.length?"0"+b:b;var c=a[1].toString(16);c=1===c.length?"0"+c:c;a=a[2].toString(16);
a=1===a.length?"0"+a:a;return b.toUpperCase()+c.toUpperCase()+a.toUpperCase()},toHexa:function(){var a=this.getSource();a=Math.round(255*a[3]);a=a.toString(16);a=1===a.length?"0"+a:a;return this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var b=this.getSource();b[3]=a;this.setSource(b);return this},toGrayscale:function(){var a=this.getSource(),b=parseInt((.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),10);this.setSource([b,b,b,a[3]]);return this},toBlackWhite:function(a){var b=
this.getSource(),c=(.3*b[0]+.59*b[1]+.11*b[2]).toFixed(0);b=b[3];c=Number(c)<Number(a||127)?0:255;this.setSource([c,c,c,b]);return this},overlayWith:function(a){a instanceof f||(a=new f(a));var b=[],c=this.getAlpha(),e=this.getSource();a=a.getSource();var k;for(k=0;3>k;k++)b.push(Math.round(.5*e[k]+.5*a[k]));b[3]=c;this.setSource(b);return this}},b.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?%?)\s*,\s*(\d{1,3}(?:\.\d+)?%?)\s*,\s*(\d{1,3}(?:\.\d+)?%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,b.Color.reHSLa=
/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}%)\s*,\s*(\d{1,3}%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,b.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,b.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",
cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",
deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",
lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",
mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",
powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",
whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},b.Color.fromRgb=function(a){return f.fromSource(f.sourceFromRgb(a))},b.Color.sourceFromRgb=function(a){if(a=a.match(f.reRGBa)){var b=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),c=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),e=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(b,10),parseInt(c,10),parseInt(e,10),a[4]?parseFloat(a[4]):1]}},b.Color.fromRgba=f.fromRgb,
b.Color.fromHsl=function(a){return f.fromSource(f.sourceFromHsl(a))},b.Color.sourceFromHsl=function(a){if(a=a.match(f.reHSLa)){var b=(parseFloat(a[1])%360+360)%360/360,d=parseFloat(a[2])/(/%$/.test(a[2])?100:1),e=parseFloat(a[3])/(/%$/.test(a[3])?100:1);if(0===d)e=d=b=e;else{var k=.5>=e?e*(d+1):e+d-e*d,l=2*e-k;e=c(l,k,b+1/3);d=c(l,k,b);b=c(l,k,b-1/3)}return[Math.round(255*e),Math.round(255*d),Math.round(255*b),a[4]?parseFloat(a[4]):1]}},b.Color.fromHsla=f.fromHsl,b.Color.fromHex=function(a){return f.fromSource(f.sourceFromHex(a))},
b.Color.sourceFromHex=function(a){if(a.match(f.reHex)){var b=a.slice(a.indexOf("#")+1),c=3===b.length||4===b.length,e=8===b.length||4===b.length;a=c?b.charAt(0)+b.charAt(0):b.substring(0,2);var k=c?b.charAt(1)+b.charAt(1):b.substring(2,4),l=c?b.charAt(2)+b.charAt(2):b.substring(4,6);b=e?c?b.charAt(3)+b.charAt(3):b.substring(6,8):"FF";return[parseInt(a,16),parseInt(k,16),parseInt(l,16),parseFloat((parseInt(b,16)/255).toFixed(2))]}},b.Color.fromSource=function(a){var b=new f;b.setSource(a);return b})})("undefined"!==
typeof exports?exports:this);
(function(){function e(b,a){var c=b.getAttribute("style"),d=b.getAttribute("offset")||0,e,f;d=parseFloat(d)/(/%$/.test(d)?100:1);d=0>d?0:1<d?1:d;if(c){var l=c.split(/\s*;\s*/);""===l[l.length-1]&&l.pop();for(c=l.length;c--;){var n=l[c].split(/\s*:\s*/),p=n[0].trim();n=n[1].trim();"stop-color"===p?e=n:"stop-opacity"===p&&(f=n)}}e||(e=b.getAttribute("stop-color")||"rgb(0,0,0)");f||(f=b.getAttribute("stop-opacity"));e=new fabric.Color(e);b=e.getAlpha();f=isNaN(parseFloat(f))?1:parseFloat(f);f*=b*a;return{offset:d,
color:e.toRgb(),opacity:f}}function f(b,a,c,d){var e,f;Object.keys(a).forEach(function(b){e=a[b];if("Infinity"===e)f=1;else if("-Infinity"===e)f=0;else if(f=parseFloat(a[b],10),"string"===typeof e&&/^(\d+\.\d+)%|(\d+)%$/.test(e)&&(f*=.01,"pixels"===d)){if("x1"===b||"x2"===b||"r2"===b)f*=c.viewBoxWidth||c.width;if("y1"===b||"y2"===b)f*=c.viewBoxHeight||c.height}a[b]=f})}var c=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",
type:"linear",initialize:function(b){b||(b={});b.coords||(b.coords={});var a=this;Object.keys(b).forEach(function(c){a[c]=b[c]});this.id=this.id?this.id+("_"+fabric.Object.__uid++):fabric.Object.__uid++;var c={x1:b.coords.x1||0,y1:b.coords.y1||0,x2:b.coords.x2||0,y2:b.coords.y2||0};"radial"===this.type&&(c.r1=b.coords.r1||0,c.r2=b.coords.r2||0);this.coords=c;this.colorStops=b.colorStops.slice()},addColorStop:function(b){for(var a in b){var c=new fabric.Color(b[a]);this.colorStops.push({offset:parseFloat(a),
color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(b){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};fabric.util.populateWithProperties(this,a,b);return a},toSVG:function(b,a){var e=c(this.coords,!0);a=a||{};var d,f=c(this.colorStops,!0);var k=e.r1>e.r2;var l=this.gradientTransform?this.gradientTransform.concat():
fabric.iMatrix.concat(),n=-this.offsetX,p=-this.offsetY,r=!!a.additionalTransform,w="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";f.sort(function(a,b){return a.offset-b.offset});"objectBoundingBox"===w?(n/=b.width,p/=b.height):(n+=b.width/2,p+=b.height/2);"path"===b.type&&(n-=b.pathOffset.x,p-=b.pathOffset.y);l[4]-=n;l[5]-=p;b='id="SVGID_'+this.id+'" gradientUnits="'+w+'"';b+=' gradientTransform="'+(r?a.additionalTransform+" ":"")+fabric.util.matrixToSVG(l)+'" ';"linear"===this.type?
d=["<linearGradient ",b,' x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'">\n']:"radial"===this.type&&(d=["<radialGradient ",b,' cx="',k?e.x1:e.x2,'" cy="',k?e.y1:e.y2,'" r="',k?e.r1:e.r2,'" fx="',k?e.x2:e.x1,'" fy="',k?e.y2:e.y1,'">\n']);if("radial"===this.type){if(k)for(f=f.concat(),f.reverse(),a=0,k=f.length;a<k;a++)f[a].offset=1-f[a].offset;a=Math.min(e.r1,e.r2);if(0<a)for(e=a/Math.max(e.r1,e.r2),a=0,k=f.length;a<k;a++)f[a].offset+=e*(1-f[a].offset)}a=0;for(k=f.length;a<k;a++)e=f[a],d.push("<stop ",
'offset="',100*e.offset+"%",'" style="stop-color:',e.color,"undefined"!==typeof e.opacity?";stop-opacity: "+e.opacity:";",'"/>\n');d.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n");return d.join("")},toLive:function(b,a){var c,d=fabric.util.object.clone(this.coords),e=d.x1,f=d.y1,l=d.x2,n=d.y2,p=this.colorStops;if(this.type){a instanceof fabric.Text&&"percentage"===this.gradientUnits&&(e*=a.width,f*=a.height,l*=a.width,n*=a.height);"linear"===this.type?c=b.createLinearGradient(e,
f,l,n):"radial"===this.type&&(c=b.createRadialGradient(e,f,d.r1,l,n,d.r2));b=0;for(a=p.length;b<a;b++)d=p[b].color,e=p[b].opacity,f=p[b].offset,"undefined"!==typeof e&&(d=(new fabric.Color(d)).setAlpha(e).toRgba()),c.addColorStop(f,d);return c}}});fabric.util.object.extend(fabric.Gradient,{fromElement:function(b,a,c,d){var g=parseFloat(c)/(/%$/.test(c)?100:1);g=0>g?0:1<g?1:g;isNaN(g)&&(g=1);var h=b.getElementsByTagName("stop"),l="userSpaceOnUse"===b.getAttribute("gradientUnits")?"pixels":"percentage",
n=b.getAttribute("gradientTransform")||"",p=[],r,w=0,u=0;if("linearGradient"===b.nodeName||"LINEARGRADIENT"===b.nodeName){c="linear";var A={x1:b.getAttribute("x1")||0,y1:b.getAttribute("y1")||0,x2:b.getAttribute("x2")||"100%",y2:b.getAttribute("y2")||0}}else c="radial",A={x1:b.getAttribute("fx")||b.getAttribute("cx")||"50%",y1:b.getAttribute("fy")||b.getAttribute("cy")||"50%",r1:0,x2:b.getAttribute("cx")||"50%",y2:b.getAttribute("cy")||"50%",r2:b.getAttribute("r")||"50%"};for(r=h.length;r--;)p.push(e(h[r],
g));g=fabric.parseTransformAttribute(n);f(a,A,d,l);"pixels"===l&&(w=-a.left,u=-a.top);return new fabric.Gradient({id:b.getAttribute("id"),type:c,coords:A,colorStops:p,gradientUnits:l,gradientTransform:g,offsetX:w,offsetY:u})},forObject:function(b,a){a||(a={});f(b,a.coords,a.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100});return new fabric.Gradient(a)}})})();
(function(){var e=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,c){e||(e={});this.id=fabric.Object.__uid++;this.setOptions(e);if(!e.source||e.source&&"string"!==typeof e.source)c&&c(this);else if("undefined"!==typeof fabric.util.getFunctionBody(e.source))this.source=new Function(fabric.util.getFunctionBody(e.source)),c&&c(this);else{var b=this;this.source=fabric.util.createImage();fabric.util.loadImage(e.source,
function(a){b.source=a;c&&c(b)},null,this.crossOrigin)}},toObject:function(f){var c=fabric.Object.NUM_FRACTION_DIGITS,b;"function"===typeof this.source?b=String(this.source):"string"===typeof this.source.src?b=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(b=this.source.toDataURL());c={type:"pattern",source:b,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,c),offsetY:e(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():
null};fabric.util.populateWithProperties(this,c,f);return c},toSVG:function(e){var c="function"===typeof this.source?this.source():this.source,b=c.width/e.width,a=c.height/e.height,f=this.offsetX/e.width;e=this.offsetY/e.height;var d="";if("repeat-x"===this.repeat||"no-repeat"===this.repeat)a=1,e&&(a+=Math.abs(e));if("repeat-y"===this.repeat||"no-repeat"===this.repeat)b=1,f&&(b+=Math.abs(f));c.src?d=c.src:c.toDataURL&&(d=c.toDataURL());return'<pattern id="SVGID_'+this.id+'" x="'+f+'" y="'+e+'" width="'+
b+'" height="'+a+'">\n<image x="0" y="0" width="'+c.width+'" height="'+c.height+'" xlink:href="'+d+'"></image>\n</pattern>\n'},setOptions:function(e){for(var c in e)this[c]=e[c]},toLive:function(e){var c="function"===typeof this.source?this.source():this.source;return c&&("undefined"===typeof c.src||c.complete&&0!==c.naturalWidth&&0!==c.naturalHeight)?e.createPattern(c,this.repeat):""}})})();
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.toFixed;f.Shadow?f.warn("fabric.Shadow is already defined."):(f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(b){"string"===typeof b&&(b=this._parseShadow(b));for(var a in b)this[a]=b[a];this.id=f.Object.__uid++},_parseShadow:function(b){b=b.trim();var a=f.Shadow.reOffsetsAndBlur.exec(b)||[];return{color:(b.replace(f.Shadow.reOffsetsAndBlur,"")||
"rgb(0,0,0)").trim(),offsetX:parseInt(a[1],10)||0,offsetY:parseInt(a[2],10)||0,blur:parseInt(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(b){var a=40,e=40,d=f.Object.NUM_FRACTION_DIGITS,g=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-b.angle)),k=new f.Color(this.color);b.width&&b.height&&(a=100*c((Math.abs(g.x)+this.blur)/b.width,d)+20,e=100*c((Math.abs(g.y)+this.blur)/b.height,d)+20);b.flipX&&(g.x*=
-1);b.flipY&&(g.y*=-1);return'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+a+'%" width="'+(100+2*a)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+c(this.blur?this.blur/2:0,d)+'"></feGaussianBlur>\n\t<feOffset dx="'+c(g.x,d)+'" dy="'+c(g.y,d)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+k.toRgb()+'" flood-opacity="'+k.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},
toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var b={},a=f.Shadow.prototype;"color blur offsetX offsetY affectStroke nonScaling".split(" ").forEach(function(c){this[c]!==a[c]&&(b[c]=this[c])},this);return b}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)})("undefined"!==typeof exports?exports:
this);
(function(){if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var e=fabric.util.object.extend,f=fabric.util.getElementOffset,c=fabric.util.removeFromArray,b=fabric.util.toFixed,a=fabric.util.transformPoint,h=fabric.util.invertTransform,d=fabric.util.getNodeCanvas,g=fabric.util.createCanvasElement,k=Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(a,b){b||(b={});this.renderAndResetBound=this.renderAndReset.bind(this);
this.requestRenderAllBound=this.requestRenderAll.bind(this);this._initStatic(a,b)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(a,b){var c=
this.requestRenderAllBound;this._objects=[];this._createLowerCanvas(a);this._initOptions(b);this._setImageSmoothing();this.interactive||this._initRetinaScaling();b.overlayImage&&this.setOverlayImage(b.overlayImage,c);b.backgroundImage&&this.setBackgroundImage(b.backgroundImage,c);b.backgroundColor&&this.setBackgroundColor(b.backgroundColor,c);b.overlayColor&&this.setOverlayColor(b.overlayColor,c);this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},
getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var a=fabric.devicePixelRatio;this.__initRetinaScaling(a,this.lowerCanvasEl,this.contextContainer);this.upperCanvasEl&&this.__initRetinaScaling(a,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(a,b,c){b.setAttribute("width",this.width*a);b.setAttribute("height",this.height*a);c.scale(a,a)},calcOffset:function(){this._offset=f(this.lowerCanvasEl);
return this},setOverlayImage:function(a,b,c){return this.__setBgOverlayImage("overlayImage",a,b,c)},setBackgroundImage:function(a,b,c){return this.__setBgOverlayImage("backgroundImage",a,b,c)},setOverlayColor:function(a,b){return this.__setBgOverlayColor("overlayColor",a,b)},setBackgroundColor:function(a,b){return this.__setBgOverlayColor("backgroundColor",a,b)},_setImageSmoothing:function(){var a=this.getContext();a.imageSmoothingEnabled=a.imageSmoothingEnabled||a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||
a.msImageSmoothingEnabled||a.oImageSmoothingEnabled;a.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(a,b,c,d){"string"===typeof b?fabric.util.loadImage(b,function(b){if(b){var e=new fabric.Image(b,d);this[a]=e;e.canvas=this}c&&c(b)},this,d&&d.crossOrigin):(d&&b.setOptions(d),(this[a]=b)&&(b.canvas=this),c&&c(b));return this},__setBgOverlayColor:function(a,b,c){this[a]=b;this._initGradient(b,a);this._initPattern(b,a,c);return this},_createCanvasElement:function(){var a=
g();if(!a)throw k;a.style||(a.style={});if("undefined"===typeof a.getContext)throw k;return a},_initOptions:function(a){var b=this.lowerCanvasEl;this._setOptions(a);this.width=this.width||parseInt(b.width,10)||0;this.height=this.height||parseInt(b.height,10)||0;this.lowerCanvasEl.style&&(b.width=this.width,b.height=this.height,b.style.width=this.width+"px",b.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(a){this.lowerCanvasEl=a&&a.getContext?
a:fabric.util.getById(a)||this._createCanvasElement();fabric.util.addClass(this.lowerCanvasEl,"lower-canvas");this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl);this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(a,b){return this.setDimensions({width:a},b)},setHeight:function(a,b){return this.setDimensions({height:a},b)},setDimensions:function(a,b){b=b||{};for(var c in a){var d=a[c];
b.cssOnly||(this._setBackstoreDimension(c,a[c]),d+="px",this.hasLostContext=!0);b.backstoreOnly||this._setCssDimension(c,d)}this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles();this._initRetinaScaling();this._setImageSmoothing();this.calcOffset();b.cssOnly||this.requestRenderAll();return this},_setBackstoreDimension:function(a,b){this.lowerCanvasEl[a]=b;this.upperCanvasEl&&(this.upperCanvasEl[a]=b);this.cacheCanvasEl&&(this.cacheCanvasEl[a]=b);this[a]=b;return this},
_setCssDimension:function(a,b){this.lowerCanvasEl.style[a]=b;this.upperCanvasEl&&(this.upperCanvasEl.style[a]=b);this.wrapperEl&&(this.wrapperEl.style[a]=b);return this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(a){var b=this._activeObject,c;this.viewportTransform=a;var d=0;for(c=this._objects.length;d<c;d++)a=this._objects[d],a.group||a.setCoords(!1,!0);b&&"activeSelection"===b.type&&b.setCoords(!1,!0);this.calcViewportBoundaries();this.renderOnAddRemove&&
this.requestRenderAll();return this},zoomToPoint:function(b,c){var d=b,e=this.viewportTransform.slice(0);b=a(b,h(this.viewportTransform));e[0]=c;e[3]=c;b=a(b,e);e[4]+=d.x-b.x;e[5]+=d.y-b.y;return this.setViewportTransform(e)},setZoom:function(a){this.zoomToPoint(new fabric.Point(0,0),a);return this},absolutePan:function(a){var b=this.viewportTransform.slice(0);b[4]=-a.x;b[5]=-a.y;return this.setViewportTransform(b)},relativePan:function(a){return this.absolutePan(new fabric.Point(-a.x-this.viewportTransform[4],
-a.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(a){this.stateful&&a.setupState();a._set("canvas",this);a.setCoords();this.fire("object:added",{target:a});a.fire("added")},_onObjectRemoved:function(a){this.fire("object:removed",{target:a});a.fire("removed");delete a.canvas},clearContext:function(a){a.clearRect(0,0,this.width,this.height);return this},getContext:function(){return this.contextContainer},clear:function(){this._objects.length=
0;this.overlayImage=this.backgroundImage=null;this.overlayColor=this.backgroundColor="";this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1);this.clearContext(this.contextContainer);this.fire("canvas:cleared");this.renderOnAddRemove&&this.requestRenderAll();return this},renderAll:function(){this.renderCanvas(this.contextContainer,this._objects);return this},renderAndReset:function(){this.isRendering=0;this.renderAll()},requestRenderAll:function(){this.isRendering||
(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound));return this},calcViewportBoundaries:function(){var b={},c=this.width,d=this.height,e=h(this.viewportTransform);b.tl=a({x:0,y:0},e);b.br=a({x:c,y:d},e);b.tr=new fabric.Point(b.br.x,b.tl.y);b.bl=new fabric.Point(b.tl.x,b.br.y);return this.vptCoords=b},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(a,b){var c=this.viewportTransform,d=
this.clipPath;this.cancelRequestedRender();this.calcViewportBoundaries();this.clearContext(a);this.fire("before:render",{ctx:a});this.clipTo&&fabric.util.clipContext(this,a);this._renderBackground(a);a.save();a.transform(c[0],c[1],c[2],c[3],c[4],c[5]);this._renderObjects(a,b);a.restore();!this.controlsAboveOverlay&&this.interactive&&this.drawControls(a);this.clipTo&&a.restore();d&&(d.canvas=this,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(a));this._renderOverlay(a);
this.controlsAboveOverlay&&this.interactive&&this.drawControls(a);this.fire("after:render",{ctx:a})},drawClipPathOnCanvas:function(a){var b=this.viewportTransform,c=this.clipPath;a.save();a.transform(b[0],b[1],b[2],b[3],b[4],b[5]);a.globalCompositeOperation="destination-in";c.transform(a);a.scale(1/c.zoomX,1/c.zoomY);a.drawImage(c._cacheCanvas,-c.cacheTranslationX,-c.cacheTranslationY);a.restore()},_renderObjects:function(a,b){var c;var d=0;for(c=b.length;d<c;++d)b[d]&&b[d].render(a)},_renderBackgroundOrOverlay:function(a,
b){var c=this[b+"Color"],d=this[b+"Image"],e=this.viewportTransform;b=this[b+"Vpt"];if(c||d)c&&(a.save(),a.beginPath(),a.moveTo(0,0),a.lineTo(this.width,0),a.lineTo(this.width,this.height),a.lineTo(0,this.height),a.closePath(),a.fillStyle=c.toLive?c.toLive(a,this):c,b&&a.transform(e[0],e[1],e[2],e[3],e[4],e[5]),a.transform(1,0,0,1,c.offsetX||0,c.offsetY||0),(c=c.gradientTransform||c.patternTransform)&&a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),a.fill(),a.restore()),d&&(a.save(),b&&a.transform(e[0],
e[1],e[2],e[3],e[4],e[5]),d.render(a),a.restore())},_renderBackground:function(a){this._renderBackgroundOrOverlay(a,"background")},_renderOverlay:function(a){this._renderBackgroundOrOverlay(a,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(a){return this._centerObject(a,new fabric.Point(this.getCenter().left,a.getCenterPoint().y))},centerObjectV:function(a){return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,this.getCenter().top))},
centerObject:function(a){var b=this.getCenter();return this._centerObject(a,new fabric.Point(b.left,b.top))},viewportCenterObject:function(a){var b=this.getVpCenter();return this._centerObject(a,b)},viewportCenterObjectH:function(a){var b=this.getVpCenter();this._centerObject(a,new fabric.Point(b.x,a.getCenterPoint().y));return this},viewportCenterObjectV:function(a){var b=this.getVpCenter();return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,b.y))},getVpCenter:function(){var b=this.getCenter(),
c=h(this.viewportTransform);return a({x:b.left,y:b.top},c)},_centerObject:function(a,b){a.setPositionByOrigin(b,"center","center");a.setCoords();this.renderOnAddRemove&&this.requestRenderAll();return this},toDatalessJSON:function(a){return this.toDatalessObject(a)},toObject:function(a){return this._toObjectMethod("toObject",a)},toDatalessObject:function(a){return this._toObjectMethod("toDatalessObject",a)},_toObjectMethod:function(a,b){var c=this.clipPath,d={version:fabric.version,objects:this._toObjects(a,
b)};c&&(d.clipPath=this._toObject(this.clipPath,a,b));e(d,this.__serializeBgOverlay(a,b));fabric.util.populateWithProperties(this,d,b);return d},_toObjects:function(a,b){return this._objects.filter(function(a){return!a.excludeFromExport}).map(function(c){return this._toObject(c,a,b)},this)},_toObject:function(a,b,c){if(!this.includeDefaultValues){var d=a.includeDefaultValues;a.includeDefaultValues=!1}b=a[b](c);this.includeDefaultValues||(a.includeDefaultValues=d);return b},__serializeBgOverlay:function(a,
b){var c={},d=this.backgroundImage,e=this.overlayImage;this.backgroundColor&&(c.background=this.backgroundColor.toObject?this.backgroundColor.toObject(b):this.backgroundColor);this.overlayColor&&(c.overlay=this.overlayColor.toObject?this.overlayColor.toObject(b):this.overlayColor);d&&!d.excludeFromExport&&(c.backgroundImage=this._toObject(d,a,b));e&&!e.excludeFromExport&&(c.overlayImage=this._toObject(e,a,b));return c},svgViewportTransformation:!0,toSVG:function(a,b){a||(a={});a.reviver=b;var c=[];
this._setSVGPreamble(c,a);this._setSVGHeader(c,a);this.clipPath&&c.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n');this._setSVGBgOverlayColor(c,"background");this._setSVGBgOverlayImage(c,"backgroundImage",b);this._setSVGObjects(c,b);this.clipPath&&c.push("</g>\n");this._setSVGBgOverlayColor(c,"overlay");this._setSVGBgOverlayImage(c,"overlayImage",b);c.push("</svg>");return c.join("")},_setSVGPreamble:function(a,b){b.suppressPreamble||a.push('<?xml version="1.0" encoding="',b.encoding||
"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(a,c){var d=c.width||this.width,e=c.height||this.height;var f='viewBox="0 0 '+this.width+" "+this.height+'" ';var g=fabric.Object.NUM_FRACTION_DIGITS;c.viewBox?f='viewBox="'+c.viewBox.x+" "+c.viewBox.y+" "+c.viewBox.width+" "+c.viewBox.height+'" ':this.svgViewportTransformation&&(f=this.viewportTransform,f='viewBox="'+b(-f[4]/f[0],g)+" "+
b(-f[5]/f[3],g)+" "+b(this.width/f[0],g)+" "+b(this.height/f[3],g)+'" ');a.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',d,'" ','height="',e,'" ',f,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(c),"</defs>\n")},createSVGClipPathMarkup:function(a){var b=this.clipPath;return b?(b.clipPathId=
"CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+b.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(a.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var a=this;return["background","overlay"].map(function(b){var c=a[b+"Color"];if(c&&c.toLive){b=a[b+"Vpt"];var d=a.viewportTransform;return c.toSVG({width:a.width/(b?d[0]:1),height:a.height/(b?d[3]:1)},{additionalTransform:b?fabric.util.matrixToSVG(d):""})}}).join("")},createSVGFontFacesMarkup:function(){var a="",b={},c,d,e,f=fabric.fontPaths,
g=this._objects;var h=0;for(e=g.length;h<e;h++){var k=g[h];var B=k.fontFamily;if(-1!==k.type.indexOf("text")&&!b[B]&&f[B]&&(b[B]=!0,k.styles))for(c in k=k.styles,k){var D=k[c];for(d in D)B=D[d],B=B.fontFamily,!b[B]&&f[B]&&(b[B]=!0)}}for(var y in b)a+=["\t\t@font-face {\n\t\t\tfont-family: '",y,"';\n\t\t\tsrc: url('",f[y],"');\n\t\t}\n"].join("");a&&(a=['\t<style type="text/css"><![CDATA[\n',a,"]]\x3e</style>\n"].join(""));return a},_setSVGObjects:function(a,b){var c,d=this._objects;var e=0;for(c=
d.length;e<c;e++){var f=d[e];f.excludeFromExport||this._setSVGObject(a,f,b)}},_setSVGObject:function(a,b,c){a.push(b.toSVG(c))},_setSVGBgOverlayImage:function(a,b,c){this[b]&&!this[b].excludeFromExport&&this[b].toSVG&&a.push(this[b].toSVG(c))},_setSVGBgOverlayColor:function(a,b){var c=this[b+"Color"],d=this.viewportTransform,e=this.width,f=this.height;if(c)if(c.toLive){var g=c.repeat;d=fabric.util.invertTransform(d);b=this[b+"Vpt"]?fabric.util.matrixToSVG(d):"";a.push('<rect transform="'+b+" translate(",
e/2,",",f/2,')"',' x="',c.offsetX-e/2,'" y="',c.offsetY-f/2,'" ','width="',"repeat-y"===g||"no-repeat"===g?c.source.width:e,'" height="',"repeat-x"===g||"no-repeat"===g?c.source.height:f,'" fill="url(#SVGID_'+c.id+')"',"></rect>\n")}else a.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',c,'"',"></rect>\n")},sendToBack:function(a){if(!a)return this;var b=this._activeObject;if(a===b&&"activeSelection"===a.type){var d=b._objects;for(a=d.length;a--;)b=d[a],c(this._objects,b),this._objects.unshift(b)}else c(this._objects,
a),this._objects.unshift(a);this.renderOnAddRemove&&this.requestRenderAll();return this},bringToFront:function(a){if(!a)return this;var b=this._activeObject;if(a===b&&"activeSelection"===a.type){var d=b._objects;for(a=0;a<d.length;a++)b=d[a],c(this._objects,b),this._objects.push(b)}else c(this._objects,a),this._objects.push(a);this.renderOnAddRemove&&this.requestRenderAll();return this},sendBackwards:function(a,b){if(!a)return this;var d=this._activeObject,e=0;if(a===d&&"activeSelection"===a.type){var f=
d._objects;for(a=0;a<f.length;a++)b=f[a],d=this._objects.indexOf(b),d>0+e&&(--d,c(this._objects,b),this._objects.splice(d,0,b)),e++}else d=this._objects.indexOf(a),0!==d&&(d=this._findNewLowerIndex(a,d,b),c(this._objects,a),this._objects.splice(d,0,a));this.renderOnAddRemove&&this.requestRenderAll();return this},_findNewLowerIndex:function(a,b,c){if(c)for(c=b,--b;0<=b;--b){if(a.intersectsWithObject(this._objects[b])||a.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(a)){c=
b;break}}else c=b-1;return c},bringForward:function(a,b){if(!a)return this;var d=this._activeObject,e=0;if(a===d&&"activeSelection"===a.type){var f=d._objects;for(a=f.length;a--;)b=f[a],d=this._objects.indexOf(b),d<this._objects.length-1-e&&(d+=1,c(this._objects,b),this._objects.splice(d,0,b)),e++}else d=this._objects.indexOf(a),d!==this._objects.length-1&&(d=this._findNewUpperIndex(a,d,b),c(this._objects,a),this._objects.splice(d,0,a));this.renderOnAddRemove&&this.requestRenderAll();return this},
_findNewUpperIndex:function(a,b,c){var d;if(c)for(c=b,b+=1,d=this._objects.length;b<d;++b){if(a.intersectsWithObject(this._objects[b])||a.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(a)){c=b;break}}else c=b+1;return c},moveTo:function(a,b){c(this._objects,a);this._objects.splice(b,0,a);return this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0);this.forEachObject(function(a){a.dispose&&
a.dispose()});this._objects=[];this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose();this.backgroundImage=null;this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose();this.contextContainer=this._iTextInstances=this.overlayImage=null;fabric.util.cleanUpJsdomNode(this.lowerCanvasEl);this.lowerCanvasEl=void 0;return this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}});e(fabric.StaticCanvas.prototype,
fabric.Observable);e(fabric.StaticCanvas.prototype,fabric.Collection);e(fabric.StaticCanvas.prototype,fabric.DataURLExporter);e(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(a){var b=g();if(!b||!b.getContext)return null;b=b.getContext("2d");if(!b)return null;switch(a){case "setLineDash":return"undefined"!==typeof b.setLineDash;default:return null}}});fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject;fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=
function(){var a=d(this.lowerCanvasEl);return a&&a.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(a){var b=d(this.lowerCanvasEl);return b&&b.createJPEGStream(a)})}})();
fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(e){this.shadow=new fabric.Shadow(e);return this},_setBrushStyles:function(){var e=this.canvas.contextTop;e.strokeStyle=this.color;e.lineWidth=this.width;e.lineCap=this.strokeLineCap;e.miterLimit=this.strokeMiterLimit;e.lineJoin=this.strokeLineJoin;fabric.StaticCanvas.supports("setLineDash")&&e.setLineDash(this.strokeDashArray||
[])},_saveAndTransform:function(e){var f=this.canvas.viewportTransform;e.save();e.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,f=this.shadow,c=e.contextTop,b=e.getZoom();e&&e._isRetinaScaling()&&(b*=fabric.devicePixelRatio);c.shadowColor=f.color;c.shadowBlur=f.blur*b;c.shadowOffsetX=f.offsetX*b;c.shadowOffsetY=f.offsetY*b}},needsFullRender:function(){return 1>(new fabric.Color(this.color)).getAlpha()||!!this.shadow},_resetShadow:function(){var e=
this.canvas.contextTop;e.shadowColor="";e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}});
(function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,initialize:function(e){this.canvas=e;this._points=[]},_drawSegment:function(e,f,c){c=f.midPointFrom(c);e.quadraticCurveTo(f.x,f.y,c.x,c.y);return c},onMouseDown:function(e,f){this.canvas._isMainEvent(f.e)&&(this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,f){if(this._captureDrawingPath(e)&&1<this._points.length)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),
this._render();else{e=this._points;f=e.length;var c=this.canvas.contextTop;this._saveAndTransform(c);this.oldEnd&&(c.beginPath(),c.moveTo(this.oldEnd.x,this.oldEnd.y));this.oldEnd=this._drawSegment(c,e[f-2],e[f-1],!0);c.stroke();c.restore()}},onMouseUp:function(e){this.oldEnd=void 0;this._finalizeAndAddPath();return!1},_prepareForDrawing:function(e){e=new fabric.Point(e.x,e.y);this._reset();this._addPoint(e);this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(e){if(1<this._points.length&&e.eq(this._points[this._points.length-
1]))return!1;this._points.push(e);return!0},_reset:function(){this._points=[];this._setBrushStyles();this._setShadow()},_captureDrawingPath:function(e){e=new fabric.Point(e.x,e.y);return this._addPoint(e)},_render:function(){var e=this.canvas.contextTop,f,c=this._points[0],b=this._points[1];this._saveAndTransform(e);e.beginPath();if(2===this._points.length&&c.x===b.x&&c.y===b.y){var a=this.width/1E3;c=new fabric.Point(c.x,c.y);b=new fabric.Point(b.x,b.y);c.x-=a;b.x+=a}e.moveTo(c.x,c.y);a=1;for(f=
this._points.length;a<f;a++)this._drawSegment(e,c,b),c=this._points[a],b=this._points[a+1];e.lineTo(c.x,c.y);e.stroke();e.restore()},convertPointsToSVGPath:function(e){var f=[],c,b=this.width/1E3,a=new fabric.Point(e[0].x,e[0].y),h=new fabric.Point(e[1].x,e[1].y),d=e.length,g=1,k=0,l=2<d;l&&(g=e[2].x<h.x?-1:e[2].x===h.x?0:1,k=e[2].y<h.y?-1:e[2].y===h.y?0:1);f.push("M ",a.x-g*b," ",a.y-k*b," ");for(c=1;c<d;c++){if(!a.eq(h)){var n=a.midPointFrom(h);f.push("Q ",a.x," ",a.y," ",n.x," ",n.y," ")}a=e[c];
c+1<e.length&&(h=e[c+1])}l&&(g=a.x>e[c-2].x?1:a.x===e[c-2].x?0:-1,k=a.y>e[c-2].y?1:a.y===e[c-2].y?0:-1);f.push("L ",a.x+g*b," ",a.y+k*b);return f},createPath:function(e){e=new fabric.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow));return e},decimatePoints:function(e,f){if(2>=
e.length)return e;var c=this.canvas.getZoom();f=Math.pow(f/c,2);var b=e.length-1,a=e[0],h=[a];for(c=1;c<b;c++){var d=Math.pow(a.x-e[c].x,2)+Math.pow(a.y-e[c].y,2);d>=f&&(a=e[c],h.push(a))}1===h.length&&h.push(new fabric.Point(h[0].x,h[0].y));return h},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points).join("");"M 0 0 Q 0 0 0 0 L 0 0"===e?this.canvas.requestRenderAll():
(e=this.createPath(e),this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e}))}})})();
fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(e){this.canvas=e;this.points=[]},drawDot:function(e){e=this.addPoint(e);var f=this.canvas.contextTop;this._saveAndTransform(f);this.dot(f,e);f.restore()},dot:function(e,f){e.fillStyle=f.fill;e.beginPath();e.arc(f.x,f.y,f.radius,0,2*Math.PI,!1);e.closePath();e.fill()},onMouseDown:function(e){this.points.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.drawDot(e)},_render:function(){var e=
this.canvas.contextTop,f,c=this.points;this._saveAndTransform(e);var b=0;for(f=c.length;b<f;b++)this.dot(e,c[b]);e.restore()},onMouseMove:function(e){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e)},onMouseUp:function(){var e=this.canvas.renderOnAddRemove,f;this.canvas.renderOnAddRemove=!1;var c=[];var b=0;for(f=this.points.length;b<f;b++){var a=this.points[b];a=new fabric.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",
originY:"center",fill:a.fill});this.shadow&&a.setShadow(this.shadow);c.push(a)}b=new fabric.Group(c);b.canvas=this.canvas;this.canvas.add(b);this.canvas.fire("path:created",{path:b});this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderOnAddRemove=e;this.canvas.requestRenderAll()},addPoint:function(e){e=new fabric.Point(e.x,e.y);var f=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=(new fabric.Color(this.color)).setAlpha(fabric.util.getRandomInt(0,
100)/100).toRgba();e.radius=f;e.fill=c;this.points.push(e);return e}});
fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e;this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.addSprayChunk(e);this.render(this.sprayChunkPoints)},onMouseMove:function(e){this.addSprayChunk(e);this.render(this.sprayChunkPoints)},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;
this.canvas.renderOnAddRemove=!1;for(var f=[],c=0,b=this.sprayChunks.length;c<b;c++)for(var a=this.sprayChunks[c],h=0,d=a.length;h<d;h++){var g=new fabric.Rect({width:a[h].width,height:a[h].width,left:a[h].x+1,top:a[h].y+1,originX:"center",originY:"center",fill:this.color});f.push(g)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));f=new fabric.Group(f);this.shadow&&f.setShadow(this.shadow);this.canvas.add(f);this.canvas.fire("path:created",{path:f});this.canvas.clearContext(this.canvas.contextTop);
this._resetShadow();this.canvas.renderOnAddRemove=e;this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var f={},c;var b=0;for(c=e.length;b<c;b++){var a=e[b].left+""+e[b].top;f[a]||(f[a]=e[b])}e=[];for(a in f)e.push(f[a]);return e},render:function(e){var f=this.canvas.contextTop,c;f.fillStyle=this.color;this._saveAndTransform(f);var b=0;for(c=e.length;b<c;b++){var a=e[b];"undefined"!==typeof a.opacity&&(f.globalAlpha=a.opacity);f.fillRect(a.x,a.y,a.width,a.width)}f.restore()},_render:function(){var e=
this.canvas.contextTop,f;e.fillStyle=this.color;this._saveAndTransform(e);var c=0;for(f=this.sprayChunks.length;c<f;c++)this.render(this.sprayChunks[c]);e.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var f=this.width/2,c;for(c=0;c<this.density;c++){var b=fabric.util.getRandomInt(e.x-f,e.x+f);var a=fabric.util.getRandomInt(e.y-f,e.y+f);var h=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;
b=new fabric.Point(b,a);b.width=h;this.randomOpacity&&(b.opacity=fabric.util.getRandomInt(0,100)/100);this.sprayChunkPoints.push(b)}this.sprayChunks.push(this.sprayChunkPoints)}});
fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var e=fabric.util.createCanvasElement(),f=e.getContext("2d");e.width=e.height=25;f.fillStyle=this.color;f.beginPath();f.arc(10,10,10,0,2*Math.PI,!1);f.closePath();f.fill();return e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles");
this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(e){e=this.callSuper("createPath",e);var f=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y});return e}});
(function(){var e=fabric.util.getPointer,f=fabric.util.degreesToRadians,c=fabric.util.radiansToDegrees,b=Math.atan2,a=Math.abs,h=fabric.StaticCanvas.supports("setLineDash");fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(a,b){b||(b={});this.renderAndResetBound=this.renderAndReset.bind(this);this.requestRenderAllBound=this.requestRenderAll.bind(this);this._initStatic(a,b);this._initInteractive();this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,
centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,
targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._groupSelector=this._currentTransform=null;this._initWrapperElement();this._createUpperCanvas();this._initEventListeners();this._initRetinaScaling();this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this);this.calcOffset()},_chooseObjectsToRender:function(){var a=
this.getActiveObjects();if(0<a.length&&!this.preserveObjectStacking){var b=[];var c=[];for(var d=0,e=this._objects.length;d<e;d++){var f=this._objects[d];-1===a.indexOf(f)?b.push(f):c.push(f)}1<a.length&&(this._activeObject._objects=c);b.push.apply(b,c)}else b=this._objects;return b},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);this.hasLostContext&&this.renderTopLayer(this.contextTop);this.renderCanvas(this.contextContainer,
this._chooseObjectsToRender());return this},renderTopLayer:function(a){a.save();this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0);this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0);a.restore()},renderTop:function(){var a=this.contextTop;this.clearContext(a);this.renderTopLayer(a);this.fire("after:render");return this},_resetCurrentTransform:function(){var a=this._currentTransform;a.target.set({scaleX:a.original.scaleX,
scaleY:a.original.scaleY,skewX:a.original.skewX,skewY:a.original.skewY,left:a.original.left,top:a.original.top});this._shouldCenterTransform(a.target)?("center"!==a.originX&&(a.mouseXSign="right"===a.originX?-1:1),"center"!==a.originY&&(a.mouseYSign="bottom"===a.originY?-1:1),a.originX="center",a.originY="center"):(a.originX=a.original.originX,a.originY=a.original.originY)},containsPoint:function(a,b,c){a=c||this.getPointer(a,!0);c=b.group&&b.group===this._activeObject&&"activeSelection"===b.group.type?
this._normalizePointer(b.group,a):{x:a.x,y:a.y};return b.containsPoint(c)||b._findTargetCorner(a)},_normalizePointer:function(a,b){a=a.calcTransformMatrix();a=fabric.util.invertTransform(a);b=this.restorePointerVpt(b);return fabric.util.transformPoint(b,a)},isTargetTransparent:function(a,b,c){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject)return b=this._normalizePointer(a,{x:b,y:c}),a=fabric.util.isTransparent(a._cacheContext,Math.round(Math.max(a.cacheTranslationX+b.x*a.zoomX,0)),Math.round(Math.max(a.cacheTranslationY+
b.y*a.zoomY,0)),this.targetFindTolerance);var d=this.contextCache,e=a.selectionBackgroundColor,f=this.viewportTransform;a.selectionBackgroundColor="";this.clearContext(d);d.save();d.transform(f[0],f[1],f[2],f[3],f[4],f[5]);a.render(d);d.restore();a===this._activeObject&&a._renderControls(d,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1});a.selectionBackgroundColor=e;return a=fabric.util.isTransparent(d,b,c,this.targetFindTolerance)},_isSelectionKeyPressed:function(a){var b=!1;return b="[object Array]"===
Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(b){return!0===a[b]}):a[this.selectionKey]},_shouldClearSelection:function(a,b){var c=this.getActiveObjects(),d=this._activeObject;return!b||b&&d&&1<c.length&&-1===c.indexOf(b)&&d!==b&&!this._isSelectionKeyPressed(a)||b&&!b.evented||b&&!b.selectable&&d&&d!==b},_shouldCenterTransform:function(a){if(a){var b=this._currentTransform,c;"scale"===b.action||"scaleX"===b.action||"scaleY"===b.action?c=this.centeredScaling||
a.centeredScaling:"rotate"===b.action&&(c=this.centeredRotation||a.centeredRotation);return c?!b.altKey:b.altKey}},_getOriginFromCorner:function(a,b){a={x:a.originX,y:a.originY};if("ml"===b||"tl"===b||"bl"===b)a.x="right";else if("mr"===b||"tr"===b||"br"===b)a.x="left";if("tl"===b||"mt"===b||"tr"===b)a.y="bottom";else if("bl"===b||"mb"===b||"br"===b)a.y="top";return a},_getActionFromCorner:function(a,b,c){if(!b||!a)return"drag";switch(b){case "mtr":return"rotate";case "ml":case "mr":return c[this.altActionKey]?
"skewY":"scaleX";case "mt":case "mb":return c[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(a,b,c){if(b){var d=this.getPointer(a),e=b._findTargetCorner(this.getPointer(a,!0));c=this._getActionFromCorner(c,e,a,b);var g=this._getOriginFromCorner(b,e);this._currentTransform={target:b,action:c,corner:e,scaleX:b.scaleX,scaleY:b.scaleY,skewX:b.skewX,skewY:b.skewY,offsetX:d.x-b.left,offsetY:d.y-b.top,originX:g.x,originY:g.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,
theta:f(b.angle),width:b.width*b.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:a.shiftKey,altKey:a[this.centeredKey],original:fabric.util.saveObjectTransform(b)};this._currentTransform.original.originX=g.x;this._currentTransform.original.originY=g.y;this._resetCurrentTransform();this._beforeTransform(a)}},_translateObject:function(a,b){var c=this._currentTransform,d=c.target;a-=c.offsetX;b-=c.offsetY;c=!d.get("lockMovementX")&&d.left!==a;var e=!d.get("lockMovementY")&&d.top!==b;c&&d.set("left",a);e&&
d.set("top",b);return c||e},_changeSkewTransformOrigin:function(a,b,c){var d="originX",e={0:"center"},f=b.target.skewX,g="left",h="right",k="mt"===b.corner||"ml"===b.corner?1:-1,l=1;a=0<a?1:-1;"y"===c&&(f=b.target.skewY,g="top",h="bottom",d="originY");e[-1]=g;e[1]=h;b.target.flipX&&(l*=-1);b.target.flipY&&(l*=-1);0===f?(b.skewSign=-k*a*l,b[d]=e[-a]):(f=0<f?1:-1,b.skewSign=f,b[d]=e[f*k*l])},_skewObject:function(a,b,c){var d=this._currentTransform,e=d.target,f=e.get("lockSkewingX"),g=e.get("lockSkewingY");
if(f&&"x"===c||g&&"y"===c)return!1;g=e.getCenterPoint();var h=e.toLocalPoint(new fabric.Point(a,b),"center","center")[c],k=e.toLocalPoint(new fabric.Point(d.lastX,d.lastY),"center","center")[c];f=e._getTransformedDimensions();this._changeSkewTransformOrigin(h-k,d,c);h=e.toLocalPoint(new fabric.Point(a,b),d.originX,d.originY)[c];g=e.translateToOriginPoint(g,d.originX,d.originY);c=this._setObjectSkew(h,d,c,f);d.lastX=a;d.lastY=b;e.setPositionByOrigin(g,d.originX,d.originY);return c},_setObjectSkew:function(a,
b,c,d){var e=b.target,f=b.skewSign;if("x"===c){b="y";var g="Y";var h="X";var k=0;var l=e.skewY}else b="x",g="X",h="Y",k=e.skewX,l=0;k=e._getTransformedDimensions(k,l);a=2*Math.abs(a)-k[c];2>=a?c=0:(c=f*Math.atan(a/e["scale"+h]/(k[b]/e["scale"+g])),c=fabric.util.radiansToDegrees(c));a=e["skew"+h]!==c;e.set("skew"+h,c);0!==e["skew"+g]&&(h=e._getTransformedDimensions(),c=d[b]/h[b]*e["scale"+g],e.set("scale"+g,c));return a},_scaleObject:function(a,b,c){var d=this._currentTransform,e=d.target,f=e.lockScalingX,
g=e.lockScalingY,h=e.lockScalingFlip;if(f&&g)return!1;var k=e.translateToOriginPoint(e.getCenterPoint(),d.originX,d.originY);a=e.toLocalPoint(new fabric.Point(a,b),d.originX,d.originY);b=e._getTransformedDimensions();this._setLocalMouse(a,d);c=this._setObjectScale(a,d,f,g,c,h,b);e.setPositionByOrigin(k,d.originX,d.originY);return c},_setObjectScale:function(a,b,c,d,e,f,h){var g=b.target,k=!1,l=!1,n=!1,p=a.x*g.scaleX/h.x,r=a.y*g.scaleY/h.y,w=g.scaleX!==p,E=g.scaleY!==r;b.newScaleX=p;b.newScaleY=r;
if(fabric.Textbox&&"x"===e&&g instanceof fabric.Textbox)return a=a.x/h.x*g.width,a>=g.getMinWidth()?(n=a!==g.width,g.set("width",a),n):!1;f&&0>=p&&p<g.scaleX&&(k=!0,a.x=0);f&&0>=r&&r<g.scaleY&&(l=!0,a.y=0);"equally"!==e||c||d?e?"x"!==e||g.get("lockUniScaling")?"y"!==e||g.get("lockUniScaling")||l||d||g.set("scaleY",r)&&(n=E):k||c||g.set("scaleX",p)&&(n=w):(k||c||g.set("scaleX",p)&&(n=n||w),l||d||g.set("scaleY",r)&&(n=n||E)):n=this._scaleObjectEqually(a,g,b,h);k||l||this._flipObject(b,e);return n},
_scaleObjectEqually:function(a,b,c,d){var e=a.y+a.x;d=d.y*c.original.scaleY/b.scaleY+d.x*c.original.scaleX/b.scaleX;var f=0>a.y?-1:1;a=(0>a.x?-1:1)*Math.abs(c.original.scaleX*e/d);e=f*Math.abs(c.original.scaleY*e/d);c=a!==b.scaleX||e!==b.scaleY;b.set("scaleX",a);b.set("scaleY",e);return c},_flipObject:function(a,b){0>a.newScaleX&&"y"!==b&&("left"===a.originX?a.originX="right":"right"===a.originX&&(a.originX="left"));0>a.newScaleY&&"x"!==b&&("top"===a.originY?a.originY="bottom":"bottom"===a.originY&&
(a.originY="top"))},_setLocalMouse:function(b,c){var d=c.target,e=this.getZoom();d=d.padding/e;"right"===c.originX?b.x*=-1:"center"===c.originX&&(b.x=2*b.x*c.mouseXSign,0>b.x&&(c.mouseXSign=-c.mouseXSign));"bottom"===c.originY?b.y*=-1:"center"===c.originY&&(b.y=2*b.y*c.mouseYSign,0>b.y&&(c.mouseYSign=-c.mouseYSign));a(b.x)>d?b.x=0>b.x?b.x+d:b.x-d:b.x=0;a(b.y)>d?b.y=0>b.y?b.y+d:b.y-d:b.y=0},_rotateObject:function(a,d){var e=this._currentTransform,f=e.target;var g=f.translateToOriginPoint(f.getCenterPoint(),
e.originX,e.originY);if(f.lockRotation)return!1;var h=b(e.ey-g.y,e.ex-g.x);a=b(d-g.y,a-g.x);h=c(a-h+e.theta);a=!0;if(0<f.snapAngle){var k=f.snapAngle;d=f.snapThreshold||k;var u=Math.ceil(h/k)*k;k*=Math.floor(h/k);Math.abs(h-k)<d?h=k:Math.abs(h-u)<d&&(h=u)}0>h&&(h=360+h);h%=360;f.angle===h?a=!1:(f.angle=h,f.setPositionByOrigin(g,e.originX,e.originY));return a},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(b){var c=this._groupSelector,d=c.left,e=c.top,f=a(d),g=a(e);
this.selectionColor&&(b.fillStyle=this.selectionColor,b.fillRect(c.ex-(0<d?0:-d),c.ey-(0<e?0:-e),f,g));this.selectionLineWidth&&this.selectionBorderColor&&(b.lineWidth=this.selectionLineWidth,b.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length&&!h?(d=c.ex+.5-(0<d?0:f),c=c.ey+.5-(0<e?0:g),b.beginPath(),fabric.util.drawDashedLine(b,d,c,d+f,c,this.selectionDashArray),fabric.util.drawDashedLine(b,d,c+g-1,d+f,c+g-1,this.selectionDashArray),fabric.util.drawDashedLine(b,d,c,d,c+g,this.selectionDashArray),
fabric.util.drawDashedLine(b,d+f-1,c,d+f-1,c+g,this.selectionDashArray),b.closePath(),b.stroke()):(fabric.Object.prototype._setLineDash.call(this,b,this.selectionDashArray),b.strokeRect(c.ex+.5-(0<d?0:f),c.ey+.5-(0<e?0:g),f,g)))},findTarget:function(a,b){if(!this.skipTargetFind){var c=this.getPointer(a,!0),d=this._activeObject,e=this.getActiveObjects();this.targets=[];if(1<e.length&&!b&&d===this._searchPossibleTargets([d],c)||1===e.length&&d._findTargetCorner(c))return d;if(1===e.length&&d===this._searchPossibleTargets([d],
c))if(this.preserveObjectStacking){var f=d;var g=this.targets;this.targets=[]}else return d;b=this._searchPossibleTargets(this._objects,c);a[this.altSelectionKey]&&b&&f&&b!==f&&(b=f,this.targets=g);return b}},_checkTarget:function(a,b,c){if(b&&b.visible&&b.evented&&this.containsPoint(null,b,a)&&(!this.perPixelTargetFind&&!b.perPixelTargetFind||b.isEditing||!this.isTargetTransparent(b,c.x,c.y)))return!0},_searchPossibleTargets:function(a,b){for(var c,d=a.length;d--;){var e=a[d],f=e.group&&"activeSelection"!==
e.group.type?this._normalizePointer(e.group,b):b;if(this._checkTarget(f,e,b)){c=a[d];c.subTargetCheck&&c instanceof fabric.Group&&(a=this._searchPossibleTargets(c._objects,b))&&this.targets.push(a);break}}return c},restorePointerVpt:function(a){return fabric.util.transformPoint(a,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(a,b){var c,d;if(this._absolutePointer&&!b)return this._absolutePointer;if(this._pointer&&b)return this._pointer;a=e(a);var f=this.upperCanvasEl,g=
f.getBoundingClientRect(),h=g.width||0,k=g.height||0;h&&k||("top"in g&&"bottom"in g&&(k=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(h=Math.abs(g.right-g.left)));this.calcOffset();a.x-=this._offset.left;a.y-=this._offset.top;b||(a=this.restorePointerVpt(a));b=this.getRetinaScaling();1!==b&&(a.x/=b,a.y/=b);0===h||0===k?(c=1,d=1):(c=f.width/h,d=f.height/k);return{x:a.x*c,y:a.y*d}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),b=this.lowerCanvasEl,
c=this.upperCanvasEl;c?c.className="":this.upperCanvasEl=c=this._createCanvasElement();fabric.util.addClass(c,"upper-canvas "+a);this.wrapperEl.appendChild(c);this._copyCanvasStyle(b,c);this._applyCanvasStyle(c);this.contextTop=c.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement();this.cacheCanvasEl.setAttribute("width",this.width);this.cacheCanvasEl.setAttribute("height",this.height);this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=
fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass});fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"});fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var b=this.width||a.width,c=this.height||a.height;fabric.util.setStyle(a,{position:"absolute",width:b+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?
"manipulation":"none"});a.width=b;a.height=c;fabric.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,b){b.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?"activeSelection"===a.type&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",
{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected"));a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]);this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,b){var c=!1,d=this.getActiveObjects(),e=[],f=[],g={e:b};a.forEach(function(a){-1===d.indexOf(a)&&(c=!0,a.fire("deselected",g),f.push(a))});d.forEach(function(b){-1===a.indexOf(b)&&(c=!0,b.fire("selected",g),e.push(b))});0<a.length&&0<d.length?(g.selected=
e,g.deselected=f,g.updated=e[0]||f[0],g.target=this._activeObject,c&&this.fire("selection:updated",g)):0<d.length?(1===d.length&&(g.target=e[0],this.fire("object:selected",g)),g.selected=e,g.target=this._activeObject,this.fire("selection:created",g)):0<a.length&&(g.deselected=f,this.fire("selection:cleared",g))},setActiveObject:function(a,b){var c=this.getActiveObjects();this._setActiveObject(a,b);this._fireSelectionEvents(c,b);return this},_setActiveObject:function(a,b){if(this._activeObject===a||
!this._discardActiveObject(b,a)||a.onSelect({e:b}))return!1;this._activeObject=a;return!0},_discardActiveObject:function(a,b){var c=this._activeObject;if(c){if(c.onDeselect({e:a,object:b}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var b=this.getActiveObjects(),c=this.getActiveObject();b.length&&this.fire("before:selection:cleared",{target:c,e:a});this._discardActiveObject(a);this._fireSelectionEvents(b,a);return this},dispose:function(){var a=this.wrapperEl;this.removeListeners();
a.removeChild(this.upperCanvasEl);a.removeChild(this.lowerCanvasEl);this.contextTop=this.contextCache=null;["upperCanvasEl","cacheCanvasEl"].forEach(function(a){fabric.util.cleanUpJsdomNode(this[a]);this[a]=void 0}.bind(this));a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl);delete this.wrapperEl;fabric.StaticCanvas.prototype.dispose.call(this);return this},clear:function(){this.discardActiveObject();this.clearContext(this.contextTop);return this.callSuper("clear")},drawControls:function(a){var b=
this._activeObject;b&&b._renderControls(a)},_toObject:function(a,b,c){var d=this._realizeGroupTransformOnObject(a);b=this.callSuper("_toObject",a,b,c);this._unwindGroupTransformOnObject(a,d);return b},_realizeGroupTransformOnObject:function(a){if(a.group&&"activeSelection"===a.group.type&&this._activeObject===a.group){var b={};"angle flipX flipY left scaleX scaleY skewX skewY top".split(" ").forEach(function(c){b[c]=a[c]});this._activeObject.realizeTransform(a);return b}return null},_unwindGroupTransformOnObject:function(a,
b){b&&a.set(b)},_setSVGObject:function(a,b,c){var d=this._realizeGroupTransformOnObject(b);this.callSuper("_setSVGObject",a,b,c);this._unwindGroupTransformOnObject(b,d)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop();fabric.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var d in fabric.StaticCanvas)"prototype"!==d&&(fabric.Canvas[d]=fabric.StaticCanvas[d])})();
(function(){var e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},f=fabric.util.addListener,c=fabric.util.removeListener,b={passive:!1};fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:"n-resize ne-resize e-resize se-resize s-resize sw-resize w-resize nw-resize".split(" "),mainTouchId:null,_initEventListeners:function(){this.removeListeners();this._bindEvents();this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,c){var d=
this.upperCanvasEl,e=this._getEventPrefix();a(fabric.window,"resize",this._onResize);a(d,e+"down",this._onMouseDown);a(d,e+"move",this._onMouseMove,b);a(d,e+"out",this._onMouseOut);a(d,e+"enter",this._onMouseEnter);a(d,"wheel",this._onMouseWheel);a(d,"contextmenu",this._onContextMenu);a(d,"dblclick",this._onDoubleClick);a(d,"dragover",this._onDragOver);a(d,"dragenter",this._onDragEnter);a(d,"dragleave",this._onDragLeave);a(d,"drop",this._onDrop);this.enablePointerEvents||a(d,"touchstart",this._onTouchStart,
b);"undefined"!==typeof eventjs&&c in eventjs&&(eventjs[c](d,"gesture",this._onGesture),eventjs[c](d,"drag",this._onDrag),eventjs[c](d,"orientation",this._onOrientationChange),eventjs[c](d,"shake",this._onShake),eventjs[c](d,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var a=this._getEventPrefix();c(fabric.document,a+"up",this._onMouseUp);c(fabric.document,"touchend",this._onTouchEnd,b);c(fabric.document,a+"move",this._onMouseMove,b);c(fabric.document,"touchmove",
this._onMouseMove,b)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),
this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,
"drop"),this.eventsBound=!0)},_onGesture:function(a,b){this.__onTransformGesture&&this.__onTransformGesture(a,b)},_onDrag:function(a,b){this.__onDrag&&this.__onDrag(a,b)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var b=this._hoveredTarget;this.fire("mouse:out",{target:b,e:a});this._hoveredTarget=null;b&&b.fire("mouseout",{e:a});var c=this;this._hoveredTargets.forEach(function(d){c.fire("mouse:out",{target:b,e:a});d&&b.fire("mouseout",{e:a})});this._hoveredTargets=[];
this._iTextInstances&&this._iTextInstances.forEach(function(a){a.isEditing&&a.hiddenTextarea.focus()})},_onMouseEnter:function(a){this.currentTransform||this.findTarget(a)||(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,b){this.__onOrientationChange&&this.__onOrientationChange(a,b)},_onShake:function(a,b){this.__onShake&&this.__onShake(a,b)},_onLongPress:function(a,b){this.__onLongPress&&this.__onLongPress(a,b)},_onDragOver:function(a){a.preventDefault();
var b=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(b,a)},_onContextMenu:function(a){this.stopContextMenu&&(a.stopPropagation(),a.preventDefault());return!1},_onDoubleClick:function(a){this._cacheTransformEventData(a);this._handleEvent(a,"dblclick");this._resetTransformEventData(a)},getPointerId:function(a){var b=a.changedTouches;return b?b[0]&&b[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return!0===a.isPrimary?!0:!1===a.isPrimary?!1:"touchend"===
a.type&&0===a.touches.length?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault();null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(a));this.__onMouseDown(a);this._resetTransformEventData();a=this.upperCanvasEl;var e=this._getEventPrefix();f(fabric.document,"touchend",this._onTouchEnd,b);f(fabric.document,"touchmove",this._onMouseMove,b);c(a,e+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a);this._resetTransformEventData();
a=this.upperCanvasEl;var e=this._getEventPrefix();c(a,e+"move",this._onMouseMove,b);f(fabric.document,e+"up",this._onMouseUp);f(fabric.document,e+"move",this._onMouseMove,b)},_onTouchEnd:function(a){if(!(0<a.touches.length)){this.__onMouseUp(a);this._resetTransformEventData();this.mainTouchId=null;var e=this._getEventPrefix();c(fabric.document,"touchend",this._onTouchEnd,b);c(fabric.document,"touchmove",this._onMouseMove,b);var d=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown);this._willAddMouseDown=
setTimeout(function(){f(d.upperCanvasEl,e+"down",d._onMouseDown);d._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a);this._resetTransformEventData();var e=this.upperCanvasEl,d=this._getEventPrefix();this._isMainEvent(a)&&(c(fabric.document,d+"up",this._onMouseUp),c(fabric.document,d+"move",this._onMouseMove,b),f(e,d+"move",this._onMouseMove,b))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault();this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},
_shouldRender:function(a){var b=this._activeObject;return!!b!==!!a||b&&a&&b!==a?!0:!1},__onMouseUp:function(a){var b=this._currentTransform;var c=this._groupSelector;var e=!1,f=!c||0===c.left&&0===c.top;this._cacheTransformEventData(a);c=this._target;this._handleEvent(a,"up:before");a.button&&2===a.button?this.fireRightClick&&this._handleEvent(a,"up",3,f):a.button&&1===a.button?(this.fireMiddleClick&&this._handleEvent(a,"up",2,f),this._resetTransformEventData()):this.isDrawingMode&&this._isCurrentlyDrawing?
this._onMouseUpInDrawingMode(a):this._isMainEvent(a)&&(b&&(this._finalizeCurrentTransform(a),e=b.actionPerformed),f||(this._maybeGroupObjects(a),e||(e=this._shouldRender(c))),c&&(c.isMoving=!1),this._setCursorFromEvent(a,c),this._handleEvent(a,"up",1,f),this._currentTransform=this._groupSelector=null,c&&(c.__corner=0),e?this.requestRenderAll():f||this.renderTop())},_simpleEventHandler:function(a,b){var c=this.findTarget(b),e=this.targets;b={e:b,target:c,subTargets:e};this.fire(a,b);c&&c.fire(a,b);
if(!e)return c;for(var f=0;f<e.length;f++)e[f].fire(a,b);return c},_handleEvent:function(a,b,c,e){var d=this._target,f=this.targets||[];a={e:a,target:d,subTargets:f,button:c||1,isClick:e||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+b,a);d&&d.fire("mouse"+b,a);for(d=0;d<f.length;d++)f[d].fire("mouse"+b,a)},_finalizeCurrentTransform:function(a){var b=this._currentTransform,c=b.target;a={e:a,target:c,transform:b};c._scaling&&(c._scaling=
!1);c.setCoords();if(b.actionPerformed||this.stateful&&c.hasStateChanged())b.actionPerformed&&(b=this._addEventOptions(a,b),this._fire(b,a)),this._fire("modified",a)},_addEventOptions:function(a,b){switch(b.action){case "scaleX":var c="scaled";var e="x";break;case "scaleY":c="scaled";e="y";break;case "skewX":c="skewed";e="x";break;case "skewY":c="skewed";e="y";break;case "scale":c="scaled";e="equally";break;case "rotate":c="rotated";break;case "drag":c="moved"}a.by=e;return c},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=
!0;this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();this.clipTo&&fabric.util.clipContext(this,this.contextTop);var b=this.getPointer(a);this.freeDrawingBrush.onMouseDown(b,{e:a,pointer:b});this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var b=this.getPointer(a);this.freeDrawingBrush.onMouseMove(b,{e:a,pointer:b})}this.setCursor(this.freeDrawingCursor);this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){this.clipTo&&
this.contextTop.restore();var b=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:b});this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a);this._handleEvent(a,"down:before");var b=this._target;if(a.button&&2===a.button)this.fireRightClick&&this._handleEvent(a,"down",3);else if(a.button&&1===a.button)this.fireMiddleClick&&this._handleEvent(a,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(a);else if(this._isMainEvent(a)&&
!this._currentTransform){var c=this._pointer;this._previousPointer=c;var e=this._shouldRender(b),f=this._shouldGroup(a,b);this._shouldClearSelection(a,b)?this.discardActiveObject(a):f&&(this._handleGrouping(a,b),b=this._activeObject);!this.selection||b&&(b.selectable||b.isEditing||b===this._activeObject)||(this._groupSelector={ex:c.x,ey:c.y,top:0,left:0});b&&(c=b===this._activeObject,b.selectable&&this.setActiveObject(b,a),b!==this._activeObject||!b.__corner&&f||this._setupCurrentTransform(a,b,c));
this._handleEvent(a,"down");(e||f)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._absolutePointer=this._pointer=this._target=null},_cacheTransformEventData:function(a){this._resetTransformEventData();this._pointer=this.getPointer(a,!0);this._absolutePointer=this.restorePointerVpt(this._pointer);this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var b=this._currentTransform;this.stateful&&b.target.saveState();
this.fire("before:transform",{e:a,transform:b});if(b.corner)this.onBeforeScaleRotate(b.target)},__onMouseMove:function(a){this._handleEvent(a,"move:before");this._cacheTransformEventData(a);if(this.isDrawingMode)this._onMouseMoveInDrawingMode(a);else if(this._isMainEvent(a)){var b=this._groupSelector;if(b){var c=this._pointer;b.left=c.x-b.ex;b.top=c.y-b.ey;this.renderTop()}else this._currentTransform?this._transformObject(a):(c=this.findTarget(a)||null,this._setCursorFromEvent(a,c),this._fireOverOutEvents(c,
a));this._handleEvent(a,"move");this._resetTransformEventData()}},_fireOverOutEvents:function(a,b){var c=this._hoveredTargets,e=this.targets,f=Math.max(c.length,e.length);this.fireSyntheticInOutEvents(a,b,{oldTarget:this._hoveredTarget,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var h=0;h<f;h++)this.fireSyntheticInOutEvents(e[h],b,{oldTarget:c[h],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a;this._hoveredTargets=this.targets.concat()},
_fireEnterLeaveEvents:function(a,b){var c=this._hoveredTargets,e=this.targets,f=Math.max(c.length,e.length);this.fireSyntheticInOutEvents(a,b,{oldTarget:this._draggedoverTarget,evtOut:"dragleave",evtIn:"dragenter"});for(var h=0;h<f;h++)this.fireSyntheticInOutEvents(e[h],b,{oldTarget:c[h],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,b,c){var d=c.oldTarget,e=d!==a,f=c.canvasEvtIn,h=c.canvasEvtOut;if(e){var p={e:b,target:a,previousTarget:d};var r=
{e:b,target:d,nextTarget:a}}b=a&&e;d&&e&&(h&&this.fire(h,r),d.fire(c.evtOut,r));b&&(f&&this.fire(f,p),a.fire(c.evtIn,p))},__onMouseWheel:function(a){this._cacheTransformEventData(a);this._handleEvent(a,"wheel");this._resetTransformEventData()},_transformObject:function(a){var b=this.getPointer(a),c=this._currentTransform;c.reset=!1;c.target.isMoving=!0;c.shiftKey=a.shiftKey;c.altKey=a[this.centeredKey];this._beforeScaleTransform(a,c);this._performTransformAction(a,c,b);c.actionPerformed&&this.requestRenderAll()},
_performTransformAction:function(a,b,c){var d=c.x,e=c.y,f=b.action;c={target:b.target,e:a,transform:b,pointer:c};if("rotate"===f)(a=this._rotateObject(d,e))&&this._fire("rotating",c);else if("scale"===f)(a=this._onScale(a,b,d,e))&&this._fire("scaling",c);else if("scaleX"===f)(a=this._scaleObject(d,e,"x"))&&this._fire("scaling",c);else if("scaleY"===f)(a=this._scaleObject(d,e,"y"))&&this._fire("scaling",c);else if("skewX"===f)(a=this._skewObject(d,e,"x"))&&this._fire("skewing",c);else if("skewY"===
f)(a=this._skewObject(d,e,"y"))&&this._fire("skewing",c);else if(a=this._translateObject(d,e))this._fire("moving",c),this.setCursor(c.target.moveCursor||this.moveCursor);b.actionPerformed=b.actionPerformed||a},_fire:function(a,b){this.fire("object:"+a,b);b.target.fire(a,b)},_beforeScaleTransform:function(a,b){if("scale"===b.action||"scaleX"===b.action||"scaleY"===b.action)if((a=this._shouldCenterTransform(b.target))&&("center"!==b.originX||"center"!==b.originY)||!a&&"center"===b.originX&&"center"===
b.originY)this._resetCurrentTransform(),b.reset=!0},_onScale:function(a,b,c,e){if(this._isUniscalePossible(a,b.target))return b.currentAction="scale",this._scaleObject(c,e);b.reset||"scale"!==b.currentAction||this._resetCurrentTransform();b.currentAction="scaleEqually";return this._scaleObject(c,e,"equally")},_isUniscalePossible:function(a,b){return(a[this.uniScaleKey]||this.uniScaleTransform)&&!b.get("lockUniScaling")},_setCursorFromEvent:function(a,b){if(!b)return this.setCursor(this.defaultCursor),
!1;var c=b.hoverCursor||this.hoverCursor,e=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null;(e=(!e||!e.contains(b))&&b._findTargetCorner(this.getPointer(a,!0)))?this.setCursor(this.getCornerCursor(e,b,a)):(b.subTargetCheck&&this.targets.concat().reverse().map(function(a){c=a.hoverCursor||c}),this.setCursor(c))},getCornerCursor:function(a,b,c){return this.actionIsDisabled(a,b,c)?this.notAllowedCursor:a in e?this._getRotatedCornerCursor(a,b,c):"mtr"===a&&b.hasRotatingPoint?
this.rotationCursor:this.defaultCursor},actionIsDisabled:function(a,b,c){return"mt"===a||"mb"===a?c[this.altActionKey]?b.lockSkewingX:b.lockScalingY:"ml"===a||"mr"===a?c[this.altActionKey]?b.lockSkewingY:b.lockScalingX:"mtr"===a?b.lockRotation:this._isUniscalePossible(c,b)?b.lockScalingX&&b.lockScalingY:b.lockScalingX||b.lockScalingY},_getRotatedCornerCursor:function(a,b,c){b=Math.round(b.angle%360/45);0>b&&(b+=8);b+=e[a];c[this.altActionKey]&&0===e[a]%2&&(b+=2);return this.cursorMap[b%8]}})})();
(function(){var e=Math.min,f=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(c,b){var a=this._activeObject;return a&&this._isSelectionKeyPressed(c)&&b&&b.selectable&&this.selection&&(a!==b||"activeSelection"===a.type)&&!b.onSelect({e:c})},_handleGrouping:function(c,b){var a=this._activeObject;if(!a.__corner){if(b===a&&(b=this.findTarget(c,!0),!b||!b.selectable))return;a&&"activeSelection"===a.type?this._updateActiveSelection(b,c):this._createActiveSelection(b,c)}},
_updateActiveSelection:function(c,b){var a=this._activeObject,e=a._objects.slice(0);a.contains(c)?(a.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),1===a.size()&&this._setActiveObject(a.item(0),b)):(a.addWithUpdate(c),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat());this._fireSelectionEvents(e,b)},_createActiveSelection:function(c,b){var a=this.getActiveObjects();this._hoveredTarget=c=this._createGroup(c);this._setActiveObject(c,b);this._fireSelectionEvents(a,
b)},_createGroup:function(c){var b=this._objects;c=b.indexOf(this._activeObject)<b.indexOf(c)?[this._activeObject,c]:[c,this._activeObject];this._activeObject.isEditing&&this._activeObject.exitEditing();return new fabric.ActiveSelection(c,{canvas:this})},_groupSelectedObjects:function(c){var b=this._collectObjects(c);1===b.length?this.setActiveObject(b[0],c):1<b.length&&(b=new fabric.ActiveSelection(b.reverse(),{canvas:this}),this.setActiveObject(b,c))},_collectObjects:function(c){var b=[];var a=
this._groupSelector.ex;var h=this._groupSelector.ey,d=a+this._groupSelector.left,g=h+this._groupSelector.top,k=new fabric.Point(e(a,d),e(h,g)),l=new fabric.Point(f(a,d),f(h,g)),n=!this.selectionFullyContained;h=a===d&&h===g;for(d=this._objects.length;d--&&!((a=this._objects[d])&&a.selectable&&a.visible&&(n&&a.intersectsWithRect(k,l)||a.isContainedWithinRect(k,l)||n&&a.containsPoint(k)||n&&a.containsPoint(l))&&(b.push(a),h)););1<b.length&&(b=b.filter(function(a){return!a.onSelect({e:c})}));return b},
_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c);this.setCursor(this.defaultCursor);this._groupSelector=null}})})();
(function(){fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var f=e.format||"png",c=e.quality||1,b=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1);e=this.toCanvasElement(b,e);return fabric.util.toDataURL(e,f,c)},toCanvasElement:function(e,f){e=e||1;f=f||{};var c=(f.width||this.width)*e,b=(f.height||this.height)*e,a=this.getZoom(),h=this.width,d=this.height,g=a*e;a=this.viewportTransform;var k=this.interactive;e=[g,0,0,g,(a[4]-(f.left||0))*
e,(a[5]-(f.top||0))*e];f=this.enableRetinaScaling;g=fabric.util.createCanvasElement();var l=this.contextTop;g.width=c;g.height=b;this.contextTop=null;this.interactive=this.enableRetinaScaling=!1;this.viewportTransform=e;this.width=c;this.height=b;this.calcViewportBoundaries();this.renderCanvas(g.getContext("2d"),this._objects);this.viewportTransform=a;this.width=h;this.height=d;this.calcViewportBoundaries();this.interactive=k;this.enableRetinaScaling=f;this.contextTop=l;return g}})})();
fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(e,f,c){return this.loadFromJSON(e,f,c)},loadFromJSON:function(e,f,c){if(e){var b="string"===typeof e?JSON.parse(e):fabric.util.object.clone(e),a=this,h=b.clipPath,d=this.renderOnAddRemove;this.renderOnAddRemove=!1;delete b.clipPath;this._enlivenObjects(b.objects,function(c){a.clear();a._setBgOverlay(b,function(){h?a._enlivenObjects([h],function(e){a.clipPath=e[0];a.__setupCanvas.call(a,b,c,d,f)}):a.__setupCanvas.call(a,
b,c,d,f)})},c);return this}},__setupCanvas:function(e,f,c,b){var a=this;f.forEach(function(b,c){a.insertAt(b,c)});this.renderOnAddRemove=c;delete e.objects;delete e.backgroundImage;delete e.overlayImage;delete e.background;delete e.overlay;this._setOptions(e);this.renderAll();b&&b()},_setBgOverlay:function(e,f){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var b=function(){c.backgroundImage&&c.overlayImage&&
c.backgroundColor&&c.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",e.backgroundImage,c,b);this.__setBgOverlay("overlayImage",e.overlayImage,c,b);this.__setBgOverlay("backgroundColor",e.background,c,b);this.__setBgOverlay("overlayColor",e.overlay,c,b)}else f&&f()},__setBgOverlay:function(e,f,c,b){var a=this;if(f)if("backgroundImage"===e||"overlayImage"===e)fabric.util.enlivenObjects([f],function(f){a[e]=f[0];c[e]=!0;b&&b()});else this["set"+fabric.util.string.capitalize(e,!0)](f,function(){c[e]=
!0;b&&b()});else c[e]=!0,b&&b()},_enlivenObjects:function(e,f,c){e&&0!==e.length?fabric.util.enlivenObjects(e,function(b){f&&f(b)},null,c):f&&f([])},_toDataURL:function(e,f){this.clone(function(c){f(c.toDataURL(e))})},_toDataURLWithMultiplier:function(e,f,c){this.clone(function(b){c(b.toDataURLWithMultiplier(e,f))})},clone:function(e,f){var c=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(b){b.loadFromJSON(c,function(){e&&e(b)})})},cloneWithoutData:function(e){var f=fabric.util.createCanvasElement();
f.width=this.width;f.height=this.height;var c=new fabric.Canvas(f);c.clipTo=this.clipTo;this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll();e&&e(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):e&&e(c)}});
(function(e){var f=e.fabric||(e.fabric={});e=f.util.object.extend;var c=f.util.object.clone,b=f.util.toFixed,a=f.util.string.capitalize,h=f.util.degreesToRadians,d=f.StaticCanvas.supports("setLineDash");f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",
borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,
selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!f.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(a){a&&this.setOptions(a)},_createCacheCanvas:function(){this._cacheProperties={};this._cacheCanvas=f.util.createCanvasElement();this._cacheContext=this._cacheCanvas.getContext("2d");this._updateCacheCanvas();this.dirty=!0},_limitCacheSize:function(a){var b=
f.perfLimitSizeTotal,c=a.width,d=a.height,e=f.maxCacheSideLimit,g=f.minCacheSideLimit;if(c<=e&&d<=e&&c*d<=b)return c<g&&(a.width=g),d<g&&(a.height=g),a;var h=f.util.limitDimsByArea(c/d,b),u=f.util.capValue;b=u(g,h.x,e);e=u(g,h.y,e);c>b&&(a.zoomX/=c/b,a.width=b,a.capped=!0);d>e&&(a.zoomY/=d/e,a.height=e,a.capped=!0);return a},_getCacheCanvasDimensions:function(){var a=this.getTotalObjectScaling(),b=this._getTransformedDimensions(0,0),c=b.x*a.scaleX/this.scaleX;b=b.y*a.scaleY/this.scaleY;return{width:c+
2,height:b+2,zoomX:a.scaleX,zoomY:a.scaleY,x:c,y:b}},_updateCacheCanvas:function(){var a=this.canvas;if(this.noScaleCache&&a&&a._currentTransform){var b=a._currentTransform.action;if(this===a._currentTransform.target&&b.slice&&"scale"===b.slice(0,5))return!1}a=this._cacheCanvas;var c=this._limitCacheSize(this._getCacheCanvasDimensions()),d=f.minCacheSideLimit;b=c.width;var e=c.height,h=c.zoomX,w=c.zoomY,u=b!==this.cacheWidth||e!==this.cacheHeight,A=this.zoomX!==h||this.zoomY!==w,t=0,z=0,B=!1;if(u){B=
this._cacheCanvas.width;var D=this._cacheCanvas.height,y=b>B||e>D;B=y||(b<.9*B||e<.9*D)&&B>d&&D>d;y&&!c.capped&&(b>d||e>d)&&(t=.1*b,z=.1*e)}return u||A?(B?(a.width=Math.ceil(b+t),a.height=Math.ceil(e+z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),d=c.x/2,c=c.y/2,this.cacheTranslationX=Math.round(a.width/2-d)+d,this.cacheTranslationY=Math.round(a.height/2-c)+c,this.cacheWidth=b,this.cacheHeight=e,this._cacheContext.translate(this.cacheTranslationX,
this.cacheTranslationY),this._cacheContext.scale(h,w),this.zoomX=h,this.zoomY=w,!0):!1},setOptions:function(a){this._setOptions(a);this._initGradient(a.fill,"fill");this._initGradient(a.stroke,"stroke");this._initClipping(a);this._initPattern(a.fill,"fill");this._initPattern(a.stroke,"stroke")},transform:function(a){var b=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix();a.transform(b[0],b[1],b[2],b[3],b[4],b[5])},toObject:function(a){var c=f.Object.NUM_FRACTION_DIGITS;
c={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:b(this.left,c),top:b(this.top,c),width:b(this.width,c),height:b(this.height,c),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:b(this.strokeWidth,c),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,
strokeMiterLimit:b(this.strokeMiterLimit,c),scaleX:b(this.scaleX,c),scaleY:b(this.scaleY,c),angle:b(this.angle,c),flipX:this.flipX,flipY:this.flipY,opacity:b(this.opacity,c),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():
null,skewX:b(this.skewX,c),skewY:b(this.skewY,c)};this.clipPath&&(c.clipPath=this.clipPath.toObject(a),c.clipPath.inverted=this.clipPath.inverted,c.clipPath.absolutePositioned=this.clipPath.absolutePositioned);f.util.populateWithProperties(this,c,a);this.includeDefaultValues||(c=this._removeDefaultValues(c));return c},toDatalessObject:function(a){return this.toObject(a)},_removeDefaultValues:function(a){var b=f.util.getKlass(a.type).prototype;b.stateProperties.forEach(function(c){"left"!==c&&"top"!==
c&&(a[c]===b[c]&&delete a[c],"[object Array]"===Object.prototype.toString.call(a[c])&&"[object Array]"===Object.prototype.toString.call(b[c])&&0===a[c].length&&0===b[c].length&&delete a[c])});return a},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){var a=this.scaleX,b=this.scaleY;if(this.group){var c=this.group.getObjectScaling();a*=c.scaleX;b*=c.scaleY}return{scaleX:a,scaleY:b}},getTotalObjectScaling:function(){var a=this.getObjectScaling(),b=a.scaleX;a=a.scaleY;
if(this.canvas){var c=this.canvas.getZoom(),d=this.canvas.getRetinaScaling();b*=c*d;a*=c*d}return{scaleX:b,scaleY:a}},getObjectOpacity:function(){var a=this.opacity;this.group&&(a*=this.group.getObjectOpacity());return a},_set:function(a,b){var c=this[a]!==b;if("scaleX"===a||"scaleY"===a)b=this._constrainScale(b);"scaleX"===a&&0>b?(this.flipX=!this.flipX,b*=-1):"scaleY"===a&&0>b?(this.flipY=!this.flipY,b*=-1):"shadow"!==a||!b||b instanceof f.Shadow?"dirty"===a&&this.group&&this.group.set("dirty",
b):b=new f.Shadow(b);this[a]=b;c&&(b=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(a)?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&-1<this.stateProperties.indexOf(a)&&this.group.set("dirty",!0));return this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},
render:function(a){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(a.save(),this._setupCompositeOperation(a),this.drawSelectionBackground(a),this.transform(a),this._setOpacity(a),this._setShadow(a,this),this.transformMatrix&&a.transform.apply(a,this.transformMatrix),this.clipTo&&f.util.clipContext(this,a),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(a)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(a),this.objectCaching&&this.statefullCache&&
this.saveState({propertySet:"cacheProperties"})),this.clipTo&&a.restore(),a.restore())},renderCache:function(a){a=a||{};this._cacheCanvas||this._createCacheCanvas();this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,a.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null;this.cacheHeight=this.cacheWidth=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},
hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return"stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"===typeof this.shadow||this.clipPath?!0:!1},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache())},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(a){var b=this.clipPath;a.save();
a.globalCompositeOperation=b.inverted?"destination-out":"destination-in";if(b.absolutePositioned){var c=f.util.invertTransform(this.calcTransformMatrix());a.transform(c[0],c[1],c[2],c[3],c[4],c[5])}b.transform(a);a.scale(1/b.zoomX,1/b.zoomY);a.drawImage(b._cacheCanvas,-b.cacheTranslationX,-b.cacheTranslationY);a.restore()},drawObject:function(a,b){var c=this.fill,d=this.stroke;b?(this.fill="black",this.stroke="",this._setClippingProperties(a)):(this._renderBackground(a),this._setStrokeStyles(a,this),
this._setFillStyles(a,this));this._render(a);this._drawClipPath(a);this.fill=c;this.stroke=d},_drawClipPath:function(a){var b=this.clipPath;b&&(b.canvas=this.canvas,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCache(a))},drawCacheOnCanvas:function(a){a.scale(1/this.zoomX,1/this.zoomY);a.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(a){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!a&&this._updateCacheCanvas())return!0;
if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!a){a=this.cacheWidth/this.zoomX;var b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-b/2,a,b)}return!0}return!1},_renderBackground:function(a){if(this.backgroundColor){var b=this._getNonTransformedDimensions();a.fillStyle=this.backgroundColor;a.fillRect(-b.x/2,-b.y/2,b.x,b.y);this._removeShadow(a)}},_setOpacity:function(a){a.globalAlpha=
this.group&&!this.group._transformDone?this.getObjectOpacity():a.globalAlpha*this.opacity},_setStrokeStyles:function(a,b){b.stroke&&(a.lineWidth=b.strokeWidth,a.lineCap=b.strokeLineCap,a.lineDashOffset=b.strokeDashOffset,a.lineJoin=b.strokeLineJoin,a.miterLimit=b.strokeMiterLimit,a.strokeStyle=b.stroke.toLive?b.stroke.toLive(a,this):b.stroke)},_setFillStyles:function(a,b){b.fill&&(a.fillStyle=b.fill.toLive?b.fill.toLive(a,this):b.fill)},_setClippingProperties:function(a){a.globalAlpha=1;a.strokeStyle=
"transparent";a.fillStyle="#000000"},_setLineDash:function(a,b,c){b&&0!==b.length&&(1&b.length&&b.push.apply(b,b),d?a.setLineDash(b):c&&c(a))},_renderControls:function(a,b){var c=this.getViewportTransform(),d=this.calcTransformMatrix();b=b||{};var e="undefined"!==typeof b.hasBorders?b.hasBorders:this.hasBorders;var g="undefined"!==typeof b.hasControls?b.hasControls:this.hasControls;d=f.util.multiplyTransformMatrices(c,d);c=f.util.qrDecompose(d);a.save();a.translate(c.translateX,c.translateY);a.lineWidth=
1*this.borderScaleFactor;this.group||(a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1);b.forActiveSelection?(a.rotate(h(c.angle)),e&&this.drawBordersInGroup(a,c,b)):(a.rotate(h(this.angle)),e&&this.drawBorders(a,b));g&&this.drawControls(a,b);a.restore()},_setShadow:function(a){if(this.shadow){var b=this.shadow,c=this.canvas,d=c&&c.viewportTransform[0]||1,e=c&&c.viewportTransform[3]||1;var g=b.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling();c&&c._isRetinaScaling()&&(d*=f.devicePixelRatio,
e*=f.devicePixelRatio);a.shadowColor=b.color;a.shadowBlur=b.blur*f.browserShadowBlurConstant*(d+e)*(g.scaleX+g.scaleY)/4;a.shadowOffsetX=b.offsetX*d*g.scaleX;a.shadowOffsetY=b.offsetY*e*g.scaleY}},_removeShadow:function(a){this.shadow&&(a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0)},_applyPatternGradientTransform:function(a,b){if(!b||!b.toLive)return{offsetX:0,offsetY:0};var c=b.gradientTransform||b.patternTransform,d=-this.width/2+b.offsetX||0,e=-this.height/2+b.offsetY||0;"percentage"===
b.gradientUnits?a.transform(this.width,0,0,this.height,d,e):a.transform(1,0,0,1,d,e);c&&a.transform(c[0],c[1],c[2],c[3],c[4],c[5]);return{offsetX:d,offsetY:e}},_renderPaintInOrder:function(a){"stroke"===this.paintFirst?(this._renderStroke(a),this._renderFill(a)):(this._renderFill(a),this._renderStroke(a))},_render:function(){},_renderFill:function(a){this.fill&&(a.save(),this._applyPatternGradientTransform(a,this.fill),"evenodd"===this.fillRule?a.fill("evenodd"):a.fill(),a.restore())},_renderStroke:function(a){this.stroke&&
0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this.strokeUniform&&a.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(a,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&"percentage"===this.stroke.gradientUnits?this._applyPatternForTransformedGradient(a,this.stroke):this._applyPatternGradientTransform(a,this.stroke),a.stroke(),a.restore())},_applyPatternForTransformedGradient:function(a,b){var c=this._limitCacheSize(this._getCacheCanvasDimensions()),
d=f.util.createCanvasElement(),e=this.canvas.getRetinaScaling(),g=c.x/this.scaleX/e,h=c.y/this.scaleY/e;d.width=g;d.height=h;var k=d.getContext("2d");k.beginPath();k.moveTo(0,0);k.lineTo(g,0);k.lineTo(g,h);k.lineTo(0,h);k.closePath();k.translate(g/2,h/2);k.scale(c.zoomX/this.scaleX/e,c.zoomY/this.scaleY/e);this._applyPatternGradientTransform(k,b);k.fillStyle=b.toLive(a);k.fill();a.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2);a.scale(e*this.scaleX/c.zoomX,e*this.scaleY/
c.zoomY);a.strokeStyle=k.createPattern(d,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var a=f.util.qrDecompose(this.transformMatrix);this.flipY=this.flipX=!1;this.set("scaleX",a.scaleX);this.set("scaleY",a.scaleY);this.angle=a.angle;this.skewX=a.skewX;this.skewY=0}},_removeTransformMatrix:function(a){var b=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),
b=f.util.transformPoint(b,this.transformMatrix));this.transformMatrix=null;a&&(this.scaleX*=a.scaleX,this.scaleY*=a.scaleY,this.cropX=a.cropX,this.cropY=a.cropY,b.x+=a.offsetLeft,b.y+=a.offsetTop,this.width=a.width,this.height=a.height);this.setPositionByOrigin(b,"center","center")},clone:function(a,b){b=this.toObject(b);this.constructor.fromObject?this.constructor.fromObject(b,a):f.Object._fromObject("Object",b,a)},cloneAsImage:function(a,b){b=this.toCanvasElement(b);a&&a(new f.Image(b));return this},
toCanvasElement:function(a){a||(a={});var b=f.util,c=b.saveObjectTransform(this),d=this.group,e=this.shadow,g=Math.abs,h=(a.multiplier||1)*(a.enableRetinaScaling?f.devicePixelRatio:1);delete this.group;a.withoutTransform&&b.resetObjectTransform(this);a.withoutShadow&&(this.shadow=null);b=f.util.createCanvasElement();var u=this.getBoundingRect(!0,!0),A=this.shadow,t=0;var z=0;if(A){var B=A.blur;z=A.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling();t=2*Math.round(g(A.offsetX)+B)*g(z.scaleX);z=
2*Math.round(g(A.offsetY)+B)*g(z.scaleY)}g=u.width+t;u=u.height+z;b.width=Math.ceil(g);b.height=Math.ceil(u);b=new f.StaticCanvas(b,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===a.format&&(b.backgroundColor="#fff");this.setPositionByOrigin(new f.Point(b.width/2,b.height/2),"center","center");g=this.canvas;b.add(this);a=b.toCanvasElement(h||1,a);this.shadow=e;this.canvas=g;d&&(this.group=d);this.set(c).setCoords();b._objects=[];b.dispose();return a},toDataURL:function(a){a||
(a={});return f.util.toDataURL(this.toCanvasElement(a),a.format||"png",a.quality||1)},isType:function(a){return this.type===a},complexity:function(){return 1},toJSON:function(a){return this.toObject(a)},setGradient:function(a,b){b||(b={});var c={colorStops:[]};c.type=b.type||(b.r1||b.r2?"radial":"linear");c.coords={x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2};c.gradientUnits=b.gradientUnits||"pixels";if(b.r1||b.r2)c.coords.r1=b.r1,c.coords.r2=b.r2;c.gradientTransform=b.gradientTransform;f.Gradient.prototype.addColorStop.call(c,
b.colorStops);return this.set(a,f.Gradient.forObject(this,c))},setPatternFill:function(a,b){return this.set("fill",new f.Pattern(a,b))},setShadow:function(a){return this.set("shadow",a?new f.Shadow(a):null)},setColor:function(a){this.set("fill",a);return this},rotate:function(a){var b=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;b&&this._setOriginToCenter();this.set("angle",a);b&&this._resetOrigin();return this},centerH:function(){this.canvas&&this.canvas.centerObjectH(this);
return this},viewportCenterH:function(){this.canvas&&this.canvas.viewportCenterObjectH(this);return this},centerV:function(){this.canvas&&this.canvas.centerObjectV(this);return this},viewportCenterV:function(){this.canvas&&this.canvas.viewportCenterObjectV(this);return this},center:function(){this.canvas&&this.canvas.centerObject(this);return this},viewportCenter:function(){this.canvas&&this.canvas.viewportCenterObject(this);return this},getLocalPointer:function(a,b){b=b||this.canvas.getPointer(a);
a=new f.Point(b.x,b.y);b=this._getLeftTopCoords();this.angle&&(a=f.util.rotatePoint(a,b,h(-this.angle)));return{x:a.x-b.x,y:a.y-b.y}},_setupCompositeOperation:function(a){this.globalCompositeOperation&&(a.globalCompositeOperation=this.globalCompositeOperation)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),e(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object._fromObject=function(a,b,d,e){var g=f[a];b=c(b,!0);f.util.enlivenPatterns([b.fill,b.stroke],function(a){"undefined"!==
typeof a[0]&&(b.fill=a[0]);"undefined"!==typeof a[1]&&(b.stroke=a[1]);f.util.enlivenObjects([b.clipPath],function(a){b.clipPath=a[0];a=e?new g(b[e],b):new g(b);d&&d(a)})})},f.Object.__uid=0)})("undefined"!==typeof exports?exports:this);
(function(){var e=fabric.util.degreesToRadians,f={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(b,a,e,d,g){var h=b.x,l=b.y;a="string"===typeof a?f[a]:a-.5;d="string"===typeof d?f[d]:d-.5;a=d-a;e="string"===typeof e?c[e]:e-.5;g="string"===typeof g?c[g]:g-.5;e=g-e;if(a||e)l=this._getTransformedDimensions(),h=b.x+a*l.x,l=b.y+e*l.y;return new fabric.Point(h,l)},translateToCenterPoint:function(b,a,c){a=this.translateToGivenOrigin(b,
a,c,"center","center");return this.angle?fabric.util.rotatePoint(a,b,e(this.angle)):a},translateToOriginPoint:function(b,a,c){a=this.translateToGivenOrigin(b,"center","center",a,c);return this.angle?fabric.util.rotatePoint(a,b,e(this.angle)):a},getCenterPoint:function(){var b=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(b,this.originX,this.originY)},getPointByOrigin:function(b,a){var c=this.getCenterPoint();return this.translateToOriginPoint(c,b,a)},toLocalPoint:function(b,
a,c){var d=this.getCenterPoint();a="undefined"!==typeof a&&"undefined"!==typeof c?this.translateToGivenOrigin(d,"center","center",a,c):new fabric.Point(this.left,this.top);b=new fabric.Point(b.x,b.y);this.angle&&(b=fabric.util.rotatePoint(b,d,-e(this.angle)));return b.subtractEquals(a)},setPositionByOrigin:function(b,a,c){b=this.translateToCenterPoint(b,a,c);b=this.translateToOriginPoint(b,this.originX,this.originY);this.set("left",b.x);this.set("top",b.y)},adjustPosition:function(b){var a=e(this.angle),
c=this.getScaledWidth(),d=fabric.util.cos(a)*c;a=fabric.util.sin(a)*c;c="string"===typeof this.originX?f[this.originX]:this.originX-.5;var g="string"===typeof b?f[b]:b-.5;this.left+=d*(g-c);this.top+=a*(g-c);this.setCoords();this.originX=b},_setOriginToCenter:function(){this._originalOriginX=this.originX;this._originalOriginY=this.originY;var b=this.getCenterPoint();this.originY=this.originX="center";this.left=b.x;this.top=b.y},_resetOrigin:function(){var b=this.translateToOriginPoint(this.getCenterPoint(),
this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX;this.originY=this._originalOriginY;this.left=b.x;this.top=b.y;this._originalOriginY=this._originalOriginX=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})})();
(function(){var e=fabric.util.degreesToRadians,f=fabric.util.multiplyTransformMatrices,c=fabric.util.transformPoint;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(b,a){this.oCoords||this.setCoords();var c=b?this.aCoords:this.oCoords;b=a?this.calcCoords(b):c;return[new fabric.Point(b.tl.x,b.tl.y),new fabric.Point(b.tr.x,b.tr.y),new fabric.Point(b.br.x,b.br.y),new fabric.Point(b.bl.x,b.bl.y)]},intersectsWithRect:function(b,
a,c,d){c=this.getCoords(c,d);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(c,b,a).status},intersectsWithObject:function(b,a,c){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(a,c),b.getCoords(a,c)).status||b.isContainedWithinObject(this,a,c)||this.isContainedWithinObject(b,a,c)},isContainedWithinObject:function(b,a,c){var d=this.getCoords(a,c),e=0;for(a=b._getImageLines(c?b.calcCoords(a):a?b.aCoords:b.oCoords);4>e;e++)if(!b.containsPoint(d[e],
a))return!1;return!0},isContainedWithinRect:function(b,a,c,d){c=this.getBoundingRect(c,d);return c.left>=b.x&&c.left+c.width<=a.x&&c.top>=b.y&&c.top+c.height<=a.y},containsPoint:function(b,a,c,d){a=a||this._getImageLines(d?this.calcCoords(c):c?this.aCoords:this.oCoords);b=this._findCrossPoints(b,a);return 0!==b&&1===b%2},isOnScreen:function(b){if(!this.canvas)return!1;for(var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,d=this.getCoords(!0,b),e,f=0;4>f;f++)if(e=d[f],e.x<=c.x&&e.x>=a.x&&e.y<=
c.y&&e.y>=a.y)return!0;return this.intersectsWithRect(a,c,!0,b)?!0:this._containsCenterOfCanvas(a,c,b)},_containsCenterOfCanvas:function(b,a,c){return this.containsPoint({x:(b.x+a.x)/2,y:(b.y+a.y)/2},null,!0,c)?!0:!1},isPartiallyOnScreen:function(b){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;return this.intersectsWithRect(a,c,!0,b)?!0:this._containsCenterOfCanvas(a,c,b)},_getImageLines:function(b){return{topline:{o:b.tl,d:b.tr},rightline:{o:b.tr,d:b.br},bottomline:{o:b.br,
d:b.bl},leftline:{o:b.bl,d:b.tl}}},_findCrossPoints:function(b,a){var c=0,d;for(d in a){var e=a[d];if(!(e.o.y<b.y&&e.d.y<b.y||e.o.y>=b.y&&e.d.y>=b.y)){if(e.o.x===e.d.x&&e.o.x>=b.x)var f=e.o.x;else{f=(e.d.y-e.o.y)/(e.d.x-e.o.x);var l=b.y-0*b.x;e=e.o.y-f*e.o.x;f=-(l-e)/(0-f)}f>=b.x&&(c+=1);if(2===c)break}}return c},getBoundingRect:function(b,a){b=this.getCoords(b,a);return fabric.util.makeBoundingBoxFromPoints(b)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},
_constrainScale:function(b){return Math.abs(b)<this.minScaleLimit?0>b?-this.minScaleLimit:this.minScaleLimit:0===b?1E-4:b},scale:function(b){this._set("scaleX",b);this._set("scaleY",b);return this.setCoords()},scaleToWidth:function(b,a){a=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(b/this.width/a)},scaleToHeight:function(b,a){a=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(b/this.height/a)},calcCoords:function(b){var a=this._calcRotateMatrix(),h=
this._calcTranslateMatrix();a=f(h,a);h=this.getViewportTransform();var d=b?a:f(h,a);a=this._getTransformedDimensions();var g=a.x/2,k=a.y/2;a=c({x:-g,y:-k},d);h=c({x:g,y:-k},d);var l=c({x:-g,y:k},d);d=c({x:g,y:k},d);if(!b){var n=this.padding,p=e(this.angle),r=fabric.util.cos(p);g=fabric.util.sin(p);var w=r*n,u=g*n;p=w+u;w-=u;n&&(a.x-=w,a.y-=p,h.x+=p,h.y-=w,l.x-=p,l.y+=w,d.x+=w,d.y+=p);n=new fabric.Point((a.x+l.x)/2,(a.y+l.y)/2);p=new fabric.Point((h.x+a.x)/2,(h.y+a.y)/2);w=new fabric.Point((d.x+h.x)/
2,(d.y+h.y)/2);u=new fabric.Point((d.x+l.x)/2,(d.y+l.y)/2);r=new fabric.Point(p.x+g*this.rotatingPointOffset,p.y-r*this.rotatingPointOffset)}a={tl:a,tr:h,br:d,bl:l};b||(a.ml=n,a.mt=p,a.mr=w,a.mb=u,a.mtr=r);return a},setCoords:function(b,a){this.oCoords=this.calcCoords(b);a||(this.aCoords=this.calcCoords(!0));b||this._setCornerCoords&&this._setCornerCoords();return this},_calcRotateMatrix:function(){return fabric.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var b=this.getCenterPoint();
return[1,0,0,1,b.x,b.y]},transformMatrixKey:function(b){var a="";!b&&this.group&&(a=this.group.transformMatrixKey(b)+"_");return a+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.originX+"_"+this.originY+"_"+this.width+"_"+this.height+"_"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(b){if(b)return this.calcOwnMatrix();b=this.transformMatrixKey();var a=this.matrixCache||(this.matrixCache={});if(a.key===b)return a.value;
var c=this.calcOwnMatrix();this.group&&(c=f(this.group.calcTransformMatrix(),c));a.key=b;return a.value=c},calcOwnMatrix:function(){var b=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===b)return a.value;var c=this._calcTranslateMatrix();this.translateX=c[4];this.translateY=c[5];a.key=b;a.value=fabric.util.composeMatrix(this);return a.value},_calcDimensionsTransformMatrix:function(b,a,c){return fabric.util.calcDimensionsMatrix({skewX:b,skewY:a,scaleX:this.scaleX*
(c&&this.flipX?-1:1),scaleY:this.scaleY*(c&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var b=this.strokeWidth;return{x:this.width+b,y:this.height+b}},_getTransformedDimensions:function(b,a){"undefined"===typeof b&&(b=this.skewX);"undefined"===typeof a&&(a=this.skewY);var c=this._getNonTransformedDimensions();if(this.strokeUniform){var d=this.width;c=this.height}else d=c.x,c=c.y;if(0===b&&0===a)return this._finalizeDimensions(d*this.scaleX,c*this.scaleY);d/=2;c/=2;d=[{x:-d,y:-c},{x:d,
y:-c},{x:-d,y:c},{x:d,y:c}];b=fabric.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:b,skewY:a});b=fabric.util.makeBoundingBoxFromPoints(d,b);return this._finalizeDimensions(b.width,b.height)},_finalizeDimensions:function(b,a){return this.strokeUniform?{x:b+this.strokeWidth,y:a+this.strokeWidth}:{x:b,y:a}},_calculateCurrentDimensions:function(){var b=this.getViewportTransform(),a=this._getTransformedDimensions();return fabric.util.transformPoint(a,b,!0).scalarAdd(2*this.padding)}})})();
fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this);return this},bringToFront:function(){this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this);return this},sendBackwards:function(e){this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas.sendBackwards(this,e);return this},bringForward:function(e){this.group?
fabric.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas.bringForward(this,e);return this},moveTo:function(e){this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas.moveTo(this,e);return this}});
(function(){function e(c,b){if(b){if(b.toLive)return c+": url(#SVGID_"+b.id+"); ";var a=new fabric.Color(b);b=c+": "+a.toRgb()+"; ";a=a.getAlpha();1!==a&&(b+=c+"-opacity: "+a.toString()+"; ");return b}return c+": none; "}var f=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(c){var b=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:
"0",g=this.strokeLineCap?this.strokeLineCap:"butt",k=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",n="undefined"!==typeof this.opacity?this.opacity:"1",p=this.visible?"":" visibility: hidden;";c=c?"":this.getSvgFilter();var r=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",a,"; stroke-dasharray: ",f,"; stroke-linecap: ",g,"; stroke-dashoffset: ",d,"; stroke-linejoin: ",k,"; stroke-miterlimit: ",l,"; ",r,"fill-rule: ",b,"; opacity: ",
n,";",c,p].join("")},getSvgSpanStyles:function(c,b){var a=c.fontFamily?"font-family: "+(-1===c.fontFamily.indexOf("'")&&-1===c.fontFamily.indexOf('"')?"'"+c.fontFamily+"'":c.fontFamily)+"; ":"",f=c.strokeWidth?"stroke-width: "+c.strokeWidth+"; ":"",d=c.fontSize?"font-size: "+c.fontSize+"px; ":"",g=c.fontStyle?"font-style: "+c.fontStyle+"; ":"",k=c.fontWeight?"font-weight: "+c.fontWeight+"; ":"",l=c.fill?e("fill",c.fill):"",n=c.stroke?e("stroke",c.stroke):"",p=this.getSvgTextDecoration(c);c=c.deltaY?
"baseline-shift: "+-c.deltaY+"; ":"";p&&(p="text-decoration: "+p+"; ");return[n,f,a,d,g,k,p,l,c,b?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return"overline"in c||"underline"in c||"linethrough"in c?(c.overline?"overline ":"")+(c.underline?"underline ":"")+(c.linethrough?"line-through ":""):""},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+
this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,b){c=c?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(c)+(b||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+fabric.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(c){if(this.backgroundColor){var b=fabric.Object.NUM_FRACTION_DIGITS;c.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/
2,b),'" y="',f(-this.height/2,b),'" width="',f(this.width,b),'" height="',f(this.height,b),'"></rect>\n')}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,b){b=b||{};var a=b.reviver;b=[this.getSvgTransform(!0,b.additionalTransform||""),this.getSvgCommons()].join("");var e=c.indexOf("COMMON_PARTS");c[e]=b;return a?a(c.join("")):
c.join("")},_createBaseSVGMarkup:function(c,b){b=b||{};var a=b.noStyle,e=b.reviver,d=a?"":'style="'+this.getSvgStyles()+'" ',f=b.withShadow?'style="'+this.getSvgFilter()+'" ':"",k=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",n=k&&k.absolutePositioned,p=this.stroke,r=this.fill,w=this.shadow,u=[],A=c.indexOf("COMMON_PARTS");b=b.additionalTransform;if(k){k.clipPathId="CLIPPATH_"+fabric.Object.__uid++;var t='<clipPath id="'+k.clipPathId+'" >\n'+k.toClipPathSVG(e)+"</clipPath>\n"}n&&
u.push("<g ",f,this.getSvgCommons()," >\n");u.push("<g ",this.getSvgTransform(!1),n?"":f+this.getSvgCommons()," >\n");a=[d,l,a?"":this.addPaintOrder()," ",b?'transform="'+b+'" ':""].join("");c[A]=a;r&&r.toLive&&u.push(r.toSVG(this));p&&p.toLive&&u.push(p.toSVG(this));w&&u.push(w.toSVG(this));k&&u.push(t);u.push(c.join(""));u.push("</g>\n");n&&u.push("</g>\n");return e?e(u.join("")):u.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})})();
(function(){function e(b,a,e){var d={};e.forEach(function(a){d[a]=b[a]});c(b[a],d,!0)}function f(b,a,c){if(b===a)return!0;if(Array.isArray(b)){if(!Array.isArray(a)||b.length!==a.length)return!1;c=0;for(var d=b.length;c<d;c++)if(!f(b[c],a[c]))return!1;return!0}if(b&&"object"===typeof b){var e=Object.keys(b);if(!a||"object"!==typeof a||!c&&e.length!==Object.keys(a).length)return!1;c=0;for(d=e.length;c<d;c++){var h=e[c];if("canvas"!==h&&!f(b[h],a[h]))return!1}return!0}}var c=fabric.util.object.extend;
fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(b){b=b||"stateProperties";var a="_"+b;return Object.keys(this[a]).length<this[b].length?!0:!f(this[a],this,!0)},saveState:function(b){var a=b&&b.propertySet||"stateProperties",c="_"+a;if(!this[c])return this.setupState(b);e(this,c,this[a]);b&&b.stateProperties&&e(this,c,b.stateProperties);return this},setupState:function(b){b=b||{};var a=b.propertySet||"stateProperties";b.propertySet=a;this["_"+a]={};this.saveState(b);return this}})})();
(function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=e.x;e=e.y;this.__corner=0;for(var b in this.oCoords)if(this.isControlVisible(b)&&("mtr"!==b||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==b&&"mr"!==b&&"mb"!==b&&"ml"!==b)){var a=this._getImageLines(this.oCoords[b].corner);a=this._findCrossPoints({x:c,
y:e},a);if(0!==a&&1===a%2)return this.__corner=b}return!1},_setCornerCoords:function(){var f=this.oCoords,c=e(45-this.angle),b=.707106*this.cornerSize,a=b*fabric.util.cos(c);c=b*fabric.util.sin(c);var h;for(h in f){b=f[h].x;var d=f[h].y;f[h].corner={tl:{x:b-c,y:d-a},tr:{x:b+a,y:d-c},bl:{x:b-a,y:d+c},br:{x:b+c,y:d+a}}}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var c=
this.getCenterPoint(),b=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;f.translate(c.x,c.y);f.scale(1/a[0],1/a[3]);f.rotate(e(this.angle));f.fillStyle=this.selectionBackgroundColor;f.fillRect(-b.x/2,-b.y/2,b.x,b.y);f.restore();return this},drawBorders:function(e,c){c=c||{};var b=this._calculateCurrentDimensions(),a=1/this.borderScaleFactor,f=b.x+a;a=b.y+a;var d="undefined"!==typeof c.hasRotatingPoint?c.hasRotatingPoint:this.hasRotatingPoint,g="undefined"!==typeof c.hasControls?
c.hasControls:this.hasControls;b="undefined"!==typeof c.rotatingPointOffset?c.rotatingPointOffset:this.rotatingPointOffset;e.save();e.strokeStyle=c.borderColor||this.borderColor;this._setLineDash(e,c.borderDashArray||this.borderDashArray,null);e.strokeRect(-f/2,-a/2,f,a);d&&this.isControlVisible("mtr")&&g&&(c=-a/2,e.beginPath(),e.moveTo(0,c),e.lineTo(0,c-b),e.stroke());e.restore();return this},drawBordersInGroup:function(e,c,b){b=b||{};var a=this._getNonTransformedDimensions();c=fabric.util.composeMatrix({scaleX:c.scaleX,
scaleY:c.scaleY,skewX:c.skewX});c=fabric.util.transformPoint(a,c);var f=1/this.borderScaleFactor;a=c.x+f;c=c.y+f;e.save();this._setLineDash(e,b.borderDashArray||this.borderDashArray,null);e.strokeStyle=b.borderColor||this.borderColor;e.strokeRect(-a/2,-c/2,a,c);e.restore();return this},drawControls:function(e,c){c=c||{};var b=this._calculateCurrentDimensions(),a=b.x;b=b.y;var f=c.cornerSize||this.cornerSize,d=-(a+f)/2;f=-(b+f)/2;var g="undefined"!==typeof c.hasRotatingPoint?c.hasRotatingPoint:this.hasRotatingPoint,
k=("undefined"!==typeof c.transparentCorners?c.transparentCorners:this.transparentCorners)?"stroke":"fill";e.save();e.strokeStyle=e.fillStyle=c.cornerColor||this.cornerColor;this.transparentCorners||(e.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor);this._setLineDash(e,c.cornerDashArray||this.cornerDashArray,null);this._drawControl("tl",e,k,d,f,c);this._drawControl("tr",e,k,d+a,f,c);this._drawControl("bl",e,k,d,f+b,c);this._drawControl("br",e,k,d+a,f+b,c);this.get("lockUniScaling")||(this._drawControl("mt",
e,k,d+a/2,f,c),this._drawControl("mb",e,k,d+a/2,f+b,c),this._drawControl("mr",e,k,d+a,f+b/2,c),this._drawControl("ml",e,k,d,f+b/2,c));g&&this._drawControl("mtr",e,k,d+a/2,f-this.rotatingPointOffset,c);e.restore();return this},_drawControl:function(e,c,b,a,h,d){d=d||{};if(this.isControlVisible(e)){e=this.cornerSize;var f=!this.transparentCorners&&this.cornerStrokeColor;switch(d.cornerStyle||this.cornerStyle){case "circle":c.beginPath();c.arc(a+e/2,h+e/2,e/2,0,2*Math.PI,!1);c[b]();f&&c.stroke();break;
default:this.transparentCorners||c.clearRect(a,h,e,e),c[b+"Rect"](a,h,e,e),f&&c.strokeRect(a,h,e,e)}}},isControlVisible:function(e){return this._getControlsVisibility()[e]},setControlVisible:function(e,c){this._getControlsVisibility()[e]=c;return this},setControlsVisibility:function(e){e||(e={});for(var c in e)this.setControlVisible(c,e[c]);return this},_getControlsVisibility:function(){this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0});return this._controlsVisibility},
onDeselect:function(){},onSelect:function(){}})})();
fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,f){f=f||{};var c=function(){},b=f.onComplete||c,a=f.onChange||c,h=this;fabric.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(b){e.set("left",b);h.requestRenderAll();a()},onComplete:function(){e.setCoords();b()}});return this},fxCenterObjectV:function(e,f){f=f||{};var c=function(){},b=f.onComplete||c,a=f.onChange||c,h=this;fabric.util.animate({startValue:e.top,
endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(b){e.set("top",b);h.requestRenderAll();a()},onComplete:function(){e.setCoords();b()}});return this},fxRemove:function(e,f){f=f||{};var c=function(){},b=f.onComplete||c,a=f.onChange||c,h=this;fabric.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(b){e.set("opacity",b);h.requestRenderAll();a()},onComplete:function(){h.remove(e);b()}});return this}});
fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e=[];for(b in arguments[0])e.push(b);for(var f=0,c=e.length;f<c;f++){var b=e[f];var a=f!==c-1;this._animate(b,arguments[0][b],arguments[1],a)}}else this._animate.apply(this,arguments);return this},_animate:function(e,f,c,b){var a=this,h;f=f.toString();c=c?fabric.util.object.clone(c):{};~e.indexOf(".")&&(h=e.split("."));var d=h?this.get(h[0])[h[1]]:this.get(e);"from"in c||(c.from=
d);f=~f.indexOf("=")?d+parseFloat(f.replace("=","")):parseFloat(f);fabric.util.animate({startValue:c.from,endValue:f,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(){return c.abort.call(a)},onChange:function(d,f,l){h?a[h[0]][h[1]]=d:a.set(e,d);b||c.onChange&&c.onChange(d,f,l)},onComplete:function(d,e,f){b||(a.setCoords(),c.onComplete&&c.onComplete(d,e,f))}})}});
(function(e){function f(a,b){var c=a.origin,d=a.axis1,e=a.axis2,f=a.dimension,g=b.nearest,h=b.center,k=b.farthest;return function(){switch(this.get(c)){case g:return Math.min(this.get(d),this.get(e));case h:return Math.min(this.get(d),this.get(e))+.5*this.get(f);case k:return Math.max(this.get(d),this.get(e))}}}var c=e.fabric||(e.fabric={}),b=c.util.object.extend,a=c.util.object.clone,h={x1:1,x2:1,y1:1,y2:1},d=c.StaticCanvas.supports("setLineDash");c.Line?c.warn("fabric.Line is already defined"):
(c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:c.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(a,b){a||(a=[0,0,0,0]);this.callSuper("initialize",b);this.set("x1",a[0]);this.set("y1",a[1]);this.set("x2",a[2]);this.set("y2",a[3]);this._setWidthHeight(b)},_setWidthHeight:function(a){a||(a={});this.width=Math.abs(this.x2-this.x1);this.height=Math.abs(this.y2-this.y1);this.left="left"in a?a.left:this._getLeftToOriginX();this.top=
"top"in a?a.top:this._getTopToOriginY()},_set:function(a,b){this.callSuper("_set",a,b);"undefined"!==typeof h[a]&&this._setWidthHeight();return this},_getLeftToOriginX:f({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:f({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a){a.beginPath();if(!this.strokeDashArray||this.strokeDashArray&&d){var b=
this.calcLinePoints();a.moveTo(b.x1,b.y1);a.lineTo(b.x2,b.y2)}a.lineWidth=this.strokeWidth;b=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle;this.stroke&&this._renderStroke(a);a.strokeStyle=b},_renderDashedStroke:function(a){var b=this.calcLinePoints();a.beginPath();c.util.drawDashedLine(a,b.x1,b.y1,b.x2,b.y2,this.strokeDashArray);a.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(a){return b(this.callSuper("toObject",a),this.calcLinePoints())},
_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");"butt"===this.strokeLineCap&&(0===this.width&&(a.y-=this.strokeWidth),0===this.height&&(a.x-=this.strokeWidth));return a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,b=this.y1<=this.y2?-1:1;return{x1:a*this.width*.5,x2:a*this.width*-.5,y1:b*this.height*.5,y2:b*this.height*-.5}},_toSVG:function(){var a=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',
a.y2,'" />\n']}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["x1","y1","x2","y2"]),c.Line.fromElement=function(a,d,e){e=e||{};a=c.parseAttributes(a,c.Line.ATTRIBUTE_NAMES);d(new c.Line([a.x1||0,a.y1||0,a.x2||0,a.y2||0],b(a,e)))},c.Line.fromObject=function(b,d){var e=a(b,!0);e.points=[b.x1,b.y1,b.x2,b.y2];c.Object._fromObject("Line",e,function(a){delete a.points;d&&d(a)},"points")})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=Math.PI;f.Circle?f.warn("fabric.Circle is already defined."):(f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*c,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(b,a){this.callSuper("_set",b,a);"radius"===b&&this.setRadius(a);return this},toObject:function(b){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(b))},_toSVG:function(){var b=
(this.endAngle-this.startAngle)%(2*c);if(0===b)b=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var a=f.util.cos(this.startAngle)*this.radius,e=f.util.sin(this.startAngle)*this.radius,d=f.util.cos(this.endAngle)*this.radius,g=f.util.sin(this.endAngle)*this.radius;b=['<path d="M '+a+" "+e," A "+this.radius+" "+this.radius," 0 ",+(b>c?1:0)+" 1"," "+d+" "+g,'" ',"COMMON_PARTS"," />\n"]}return b},_render:function(b){b.beginPath();b.arc(0,0,this.radius,this.startAngle,this.endAngle,
!1);this._renderPaintInOrder(b)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(b){this.radius=b;return this.set("width",2*b).set("height",2*b)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["cx","cy","r"]),f.Circle.fromElement=function(b,a){b=f.parseAttributes(b,f.Circle.ATTRIBUTE_NAMES);if(!("radius"in b&&0<=b.radius))throw Error("value of `r` attribute is required and can not be negative");
b.left=(b.left||0)-b.radius;b.top=(b.top||0)-b.radius;a(new f.Circle(b))},f.Circle.fromObject=function(b,a){return f.Object._fromObject("Circle",b,a)})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={});f.Triangle?f.warn("fabric.Triangle is already defined"):(f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(c){var b=this.width/2,a=this.height/2;c.beginPath();c.moveTo(-b,a);c.lineTo(0,-a);c.lineTo(b,a);c.closePath();this._renderPaintInOrder(c)},_renderDashedStroke:function(c){var b=this.width/2,a=this.height/2;c.beginPath();f.util.drawDashedLine(c,-b,a,0,-a,this.strokeDashArray);f.util.drawDashedLine(c,0,-a,b,
a,this.strokeDashArray);f.util.drawDashedLine(c,b,a,-b,a,this.strokeDashArray);c.closePath()},_toSVG:function(){var c=this.width/2,b=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-c+" "+b,"0 "+-b,c+" "+b].join(),'" />']}}),f.Triangle.fromObject=function(c,b){return f.Object._fromObject("Triangle",c,b)})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=2*Math.PI;f.Ellipse?f.warn("fabric.Ellipse is already defined."):(f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b);this.set("rx",b&&b.rx||0);this.set("ry",b&&b.ry||0)},_set:function(b,a){this.callSuper("_set",b,a);switch(b){case "rx":this.rx=a;this.set("width",2*a);break;case "ry":this.ry=a,this.set("height",2*a)}return this},
getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(b){b.beginPath();b.save();b.transform(1,0,0,this.ry/this.rx,0,0);b.arc(0,0,this.rx,0,c,!1);b.restore();this._renderPaintInOrder(b)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["cx",
"cy","rx","ry"]),f.Ellipse.fromElement=function(b,a){b=f.parseAttributes(b,f.Ellipse.ATTRIBUTE_NAMES);b.left=(b.left||0)-b.rx;b.top=(b.top||0)-b.ry;a(new f.Ellipse(b))},f.Ellipse.fromObject=function(b,a){return f.Object._fromObject("Ellipse",b,a)})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.object.extend;f.Rect?f.warn("fabric.Rect is already defined"):(f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b);this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(b){var a=
this.rx?Math.min(this.rx,this.width/2):0,c=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,e=this.height,f=-this.width/2,l=-this.height/2,n=0!==a||0!==c;b.beginPath();b.moveTo(f+a,l);b.lineTo(f+d-a,l);n&&b.bezierCurveTo(f+d-.4477152502*a,l,f+d,l+.4477152502*c,f+d,l+c);b.lineTo(f+d,l+e-c);n&&b.bezierCurveTo(f+d,l+e-.4477152502*c,f+d-.4477152502*a,l+e,f+d-a,l+e);b.lineTo(f+a,l+e);n&&b.bezierCurveTo(f+.4477152502*a,l+e,f,l+e-.4477152502*c,f,l+e-c);b.lineTo(f,l+c);n&&b.bezierCurveTo(f,l+.4477152502*
c,f+.4477152502*a,l,f+a,l);b.closePath();this._renderPaintInOrder(b)},_renderDashedStroke:function(b){var a=-this.width/2,c=-this.height/2,d=this.width,e=this.height;b.beginPath();f.util.drawDashedLine(b,a,c,a+d,c,this.strokeDashArray);f.util.drawDashedLine(b,a+d,c,a+d,c+e,this.strokeDashArray);f.util.drawDashedLine(b,a+d,c+e,a,c+e,this.strokeDashArray);f.util.drawDashedLine(b,a,c+e,a,c,this.strokeDashArray);b.closePath()},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},
_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(b,a,e){if(!b)return a(null);e=e||{};b=f.parseAttributes(b,f.Rect.ATTRIBUTE_NAMES);b.left=b.left||0;b.top=b.top||0;b.height=b.height||0;b.width=b.width||0;e=new f.Rect(c(e?f.util.object.clone(e):{},b));
e.visible=e.visible&&0<e.width&&0<e.height;a(e)},f.Rect.fromObject=function(b,a){return f.Object._fromObject("Rect",b,a)})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.object.extend,b=f.util.array.min,a=f.util.array.max,h=f.util.toFixed;f.Polyline?f.warn("fabric.Polyline is already defined"):(f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(a,b){b=b||{};this.points=a||[];this.callSuper("initialize",b);this._setPositionDimensions(b)},_setPositionDimensions:function(a){var b=this._calcDimensions(a),c;this.width=
b.width;this.height=b.height;a.fromSVG||(c=this.translateToGivenOrigin({x:b.left-this.strokeWidth/2,y:b.top-this.strokeWidth/2},"left","top",this.originX,this.originY));"undefined"===typeof a.left&&(this.left=a.fromSVG?b.left:c.x);"undefined"===typeof a.top&&(this.top=a.fromSVG?b.top:c.y);this.pathOffset={x:b.left+this.width/2,y:b.top+this.height/2}},_calcDimensions:function(){var c=this.points,e=b(c,"x")||0,f=b(c,"y")||0,h=a(c,"x")||0;c=a(c,"y")||0;return{left:e,top:f,width:h-e,height:c-f}},toObject:function(a){return c(this.callSuper("toObject",
a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],b=this.pathOffset.x,c=this.pathOffset.y,e=f.Object.NUM_FRACTION_DIGITS,n=0,p=this.points.length;n<p;n++)a.push(h(this.points[n].x-b,e),",",h(this.points[n].y-c,e)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),'" />\n']},commonRender:function(a){var b=this.points.length,c=this.pathOffset.x,d=this.pathOffset.y;if(!b||isNaN(this.points[b-1].y))return!1;a.beginPath();a.moveTo(this.points[0].x-c,this.points[0].y-d);
for(var e=0;e<b;e++){var f=this.points[e];a.lineTo(f.x-c,f.y-d)}return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},_renderDashedStroke:function(a){a.beginPath();for(var b=0,c=this.points.length;b<c;b++){var d=this.points[b];var e=this.points[b+1]||d;f.util.drawDashedLine(a,d.x,d.y,e.x,e.y,this.strokeDashArray)}},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(a){return function(b,
d,e){if(!b)return d(null);e||(e={});var g=f.parsePointsAttribute(b.getAttribute("points"));b=f.parseAttributes(b,f[a].ATTRIBUTE_NAMES);b.fromSVG=!0;d(new f[a](g,c(b,e)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(a,b){return f.Object._fromObject("Polyline",a,b,"points")})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={});f.Polygon?f.warn("fabric.Polygon is already defined"):(f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))},_renderDashedStroke:function(c){this.callSuper("_renderDashedStroke",c);c.closePath()}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(c,b){return f.Object._fromObject("Polygon",
c,b,"points")})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.array.min,b=f.util.array.max,a=f.util.object.extend,h=Object.prototype.toString,d=f.util.drawArc,g=f.util.toFixed,k={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(a,b){b=b||
{};this.callSuper("initialize",b);a||(a=[]);var c="[object Array]"===h.call(a);if(this.path=c?a:a.match&&a.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi))c||(this.path=this._parsePath()),f.Polyline.prototype._setPositionDimensions.call(this,b)},_renderPathCommands:function(a){var b=null,c=0,e=0,f=0,g=0,h=0,k=0,l=-this.pathOffset.x,n=-this.pathOffset.y;a.beginPath();for(var y=0,E=this.path.length;y<E;++y){var x=this.path[y];switch(x[0]){case "l":f+=x[1];g+=x[2];a.lineTo(f+l,g+n);break;case "L":f=x[1];g=x[2];
a.lineTo(f+l,g+n);break;case "h":f+=x[1];a.lineTo(f+l,g+n);break;case "H":f=x[1];a.lineTo(f+l,g+n);break;case "v":g+=x[1];a.lineTo(f+l,g+n);break;case "V":g=x[1];a.lineTo(f+l,g+n);break;case "m":f+=x[1];g+=x[2];c=f;e=g;a.moveTo(f+l,g+n);break;case "M":f=x[1];g=x[2];c=f;e=g;a.moveTo(f+l,g+n);break;case "c":var H=f+x[5];var F=g+x[6];h=f+x[3];k=g+x[4];a.bezierCurveTo(f+x[1]+l,g+x[2]+n,h+l,k+n,H+l,F+n);f=H;g=F;break;case "C":f=x[5];g=x[6];h=x[3];k=x[4];a.bezierCurveTo(x[1]+l,x[2]+n,h+l,k+n,f+l,g+n);break;
case "s":H=f+x[3];F=g+x[4];null===b[0].match(/[CcSs]/)?(h=f,k=g):(h=2*f-h,k=2*g-k);a.bezierCurveTo(h+l,k+n,f+x[1]+l,g+x[2]+n,H+l,F+n);h=f+x[1];k=g+x[2];f=H;g=F;break;case "S":H=x[3];F=x[4];null===b[0].match(/[CcSs]/)?(h=f,k=g):(h=2*f-h,k=2*g-k);a.bezierCurveTo(h+l,k+n,x[1]+l,x[2]+n,H+l,F+n);f=H;g=F;h=x[1];k=x[2];break;case "q":H=f+x[3];F=g+x[4];h=f+x[1];k=g+x[2];a.quadraticCurveTo(h+l,k+n,H+l,F+n);f=H;g=F;break;case "Q":H=x[3];F=x[4];a.quadraticCurveTo(x[1]+l,x[2]+n,H+l,F+n);f=H;g=F;h=x[1];k=x[2];
break;case "t":H=f+x[1];F=g+x[2];null===b[0].match(/[QqTt]/)?(h=f,k=g):(h=2*f-h,k=2*g-k);a.quadraticCurveTo(h+l,k+n,H+l,F+n);f=H;g=F;break;case "T":H=x[1];F=x[2];null===b[0].match(/[QqTt]/)?(h=f,k=g):(h=2*f-h,k=2*g-k);a.quadraticCurveTo(h+l,k+n,H+l,F+n);f=H;g=F;break;case "a":d(a,f+l,g+n,[x[1],x[2],x[3],x[4],x[5],x[6]+f+l,x[7]+g+n]);f+=x[6];g+=x[7];break;case "A":d(a,f+l,g+n,[x[1],x[2],x[3],x[4],x[5],x[6]+l,x[7]+n]);f=x[6];g=x[7];break;case "z":case "Z":f=c,g=e,a.closePath()}b=x}},_render:function(a){this._renderPathCommands(a);
this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(b){return a(this.callSuper("toObject",b),{path:this.path.map(function(a){return a.slice()})})},toDatalessObject:function(a){a=this.toObject(["sourcePath"].concat(a));a.sourcePath&&delete a.path;return a},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',this.path.map(function(a){return a.join(" ")}).join(" "),'" stroke-linecap="round" ',
"/>\n"]},_getOffsetTransform:function(){var a=f.Object.NUM_FRACTION_DIGITS;return" translate("+g(-this.pathOffset.x,a)+", "+g(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var b=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:b})},toSVG:function(a){var b=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:b})},complexity:function(){return this.path.length},_parsePath:function(){for(var a=
[],b=[],c,d,e=f.rePathCommand,g,h=0,z=this.path.length;h<z;h++){c=this.path[h];g=c.slice(1).trim();for(b.length=0;d=e.exec(g);)b.push(d[0]);c=[c.charAt(0)];g=0;for(var B=b.length;g<B;g++)d=parseFloat(b[g]),isNaN(d)||c.push(d);d=c[0];g=k[d.toLowerCase()];B=l[d]||d;if(c.length-1>g)for(var D=1,y=c.length;D<y;D+=g)a.push([d].concat(c.slice(D,D+g))),d=B;else a.push(c)}return a},_calcDimensions:function(){for(var a=[],d=[],e,g=null,h=0,k=0,l=0,z=0,B=0,D=0,y,E,x,H=0,F=this.path.length;H<F;++H){e=this.path[H];
switch(e[0]){case "l":l+=e[1];z+=e[2];x=[];break;case "L":l=e[1];z=e[2];x=[];break;case "h":l+=e[1];x=[];break;case "H":l=e[1];x=[];break;case "v":z+=e[1];x=[];break;case "V":z=e[1];x=[];break;case "m":l+=e[1];z+=e[2];h=l;k=z;x=[];break;case "M":l=e[1];z=e[2];h=l;k=z;x=[];break;case "c":y=l+e[5];E=z+e[6];B=l+e[3];D=z+e[4];x=f.util.getBoundsOfCurve(l,z,l+e[1],z+e[2],B,D,y,E);l=y;z=E;break;case "C":B=e[3];D=e[4];x=f.util.getBoundsOfCurve(l,z,e[1],e[2],B,D,e[5],e[6]);l=e[5];z=e[6];break;case "s":y=l+
e[3];E=z+e[4];null===g[0].match(/[CcSs]/)?(B=l,D=z):(B=2*l-B,D=2*z-D);x=f.util.getBoundsOfCurve(l,z,B,D,l+e[1],z+e[2],y,E);B=l+e[1];D=z+e[2];l=y;z=E;break;case "S":y=e[3];E=e[4];null===g[0].match(/[CcSs]/)?(B=l,D=z):(B=2*l-B,D=2*z-D);x=f.util.getBoundsOfCurve(l,z,B,D,e[1],e[2],y,E);l=y;z=E;B=e[1];D=e[2];break;case "q":y=l+e[3];E=z+e[4];B=l+e[1];D=z+e[2];x=f.util.getBoundsOfCurve(l,z,B,D,B,D,y,E);l=y;z=E;break;case "Q":B=e[1];D=e[2];x=f.util.getBoundsOfCurve(l,z,B,D,B,D,e[3],e[4]);l=e[3];z=e[4];break;
case "t":y=l+e[1];E=z+e[2];null===g[0].match(/[QqTt]/)?(B=l,D=z):(B=2*l-B,D=2*z-D);x=f.util.getBoundsOfCurve(l,z,B,D,B,D,y,E);l=y;z=E;break;case "T":y=e[1];E=e[2];null===g[0].match(/[QqTt]/)?(B=l,D=z):(B=2*l-B,D=2*z-D);x=f.util.getBoundsOfCurve(l,z,B,D,B,D,y,E);l=y;z=E;break;case "a":x=f.util.getBoundsOfArc(l,z,e[1],e[2],e[3],e[4],e[5],e[6]+l,e[7]+z);l+=e[6];z+=e[7];break;case "A":x=f.util.getBoundsOfArc(l,z,e[1],e[2],e[3],e[4],e[5],e[6],e[7]);l=e[6];z=e[7];break;case "z":case "Z":l=h,z=k}g=e;x.forEach(function(b){a.push(b.x);
d.push(b.y)});a.push(l);d.push(z)}e=c(a)||0;g=c(d)||0;h=b(a)||0;k=b(d)||0;return{left:e,top:g,width:h-e,height:k-g}}}),f.Path.fromObject=function(a,b){"string"===typeof a.sourcePath?f.loadSVGFromURL(a.sourcePath,function(c){c=c[0];c.setOptions(a);b&&b(c)}):f.Object._fromObject("Path",a,b,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(b,c,d){b=f.parseAttributes(b,f.Path.ATTRIBUTE_NAMES);b.fromSVG=!0;c(new f.Path(b.d,a(b,d)))})})("undefined"!==typeof exports?
exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.array.min,b=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,b,c){b=b||{};this._objects=[];c&&this.callSuper("initialize",b);this._objects=a||[];for(a=this._objects.length;a--;)this._objects[a].group=this;c?this._updateObjectsACoords():(c=b&&b.centerPoint,void 0!==b.originX&&(this.originX=b.originX),void 0!==b.originY&&
(this.originY=b.originY),c||this._calcBounds(),this._updateObjectsCoords(c),delete b.centerPoint,this.callSuper("initialize",b));this.setCoords()},_updateObjectsACoords:function(){for(var a=this._objects.length;a--;)this._objects[a].setCoords(!0,!0)},_updateObjectsCoords:function(a){a=a||this.getCenterPoint();for(var b=this._objects.length;b--;)this._updateObjectCoords(this._objects[b],a)},_updateObjectCoords:function(a,b){a.set({left:a.left-b.x,top:a.top-b.y});a.group=this;a.setCoords(!0,!0)},toString:function(){return"#<fabric.Group: ("+
this.complexity()+")>"},addWithUpdate:function(a){this._restoreObjectsState();f.util.resetObjectTransform(this);a&&(this._objects.push(a),a.group=this,a._set("canvas",this.canvas));this._calcBounds();this._updateObjectsCoords();this.setCoords();this.dirty=!0;return this},removeWithUpdate:function(a){this._restoreObjectsState();f.util.resetObjectTransform(this);this.remove(a);this._calcBounds();this._updateObjectsCoords();this.setCoords();this.dirty=!0;return this},_onObjectAdded:function(a){this.dirty=
!0;a.group=this;a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0;delete a.group},_set:function(a,b){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(a,b);if("canvas"===a)for(;c--;)this._objects[c]._set(a,b);f.Object.prototype._set.call(this,a,b)},toObject:function(a){var b=this.includeDefaultValues,c=this._objects.map(function(c){var d=c.includeDefaultValues;c.includeDefaultValues=b;var e=c.toObject(a);c.includeDefaultValues=d;return e}),
e=f.Object.prototype.toObject.call(this,a);e.objects=c;return e},toDatalessObject:function(a){var b=this.sourcePath;if(!b){var c=this.includeDefaultValues;b=this._objects.map(function(b){var d=b.includeDefaultValues;b.includeDefaultValues=c;var e=b.toDatalessObject(a);b.includeDefaultValues=d;return e})}var e=f.Object.prototype.toDatalessObject.call(this,a);e.objects=b;return e},render:function(a){this._transformDone=!0;this.callSuper("render",a);this._transformDone=!1},shouldCache:function(){var a=
f.Object.prototype.shouldCache.call(this);if(a)for(var b=0,c=this._objects.length;b<c;b++)if(this._objects[b].willDrawShadow())return this.ownCaching=!1;return a},willDrawShadow:function(){if(this.shadow)return f.Object.prototype.willDrawShadow.call(this);for(var a=0,b=this._objects.length;a<b;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var b=0,c=this._objects.length;b<c;b++)this._objects[b].render(a);
this._drawClipPath(a)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;a=0;for(var b=this._objects.length;a<b;a++)if(this._objects[a].isCacheDirty(!0))return this._cacheCanvas&&(a=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-a/2,-b/2,a,b)),!0;return!1},_restoreObjectsState:function(){this._objects.forEach(this._restoreObjectState,this);return this},realizeTransform:function(a){var b=a.calcTransformMatrix();
b=f.util.qrDecompose(b);var c=new f.Point(b.translateX,b.translateY);a.flipX=!1;a.flipY=!1;a.set("scaleX",b.scaleX);a.set("scaleY",b.scaleY);a.skewX=b.skewX;a.skewY=b.skewY;a.angle=b.angle;a.setPositionByOrigin(c,"center","center");return a},_restoreObjectState:function(a){this.realizeTransform(a);a.setCoords();delete a.group;return this},destroy:function(){this._objects.forEach(function(a){a.set("dirty",!0)});return this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var a=
this._objects,b=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var e=new f.ActiveSelection([]);e.set(c);e.type="activeSelection";b.remove(this);a.forEach(function(a){a.group=e;a.dirty=!0;b.add(a)});e.canvas=b;e._objects=a;b._activeObject=e;e.setCoords();return e}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){this.forEachObject(function(a){a.setCoords(!0,!0)});return this},_calcBounds:function(a){for(var b=[],c=[],e,f,l=["tr","br",
"bl","tl"],n=0,p=this._objects.length,r,w=l.length;n<p;++n)for(e=this._objects[n],e.setCoords(!0),r=0;r<w;r++)f=l[r],b.push(e.oCoords[f].x),c.push(e.oCoords[f].y);this._getBounds(b,c,a)},_getBounds:function(a,e,d){var g=new f.Point(c(a),c(e));a=new f.Point(b(a),b(e));e=g.y||0;var h=g.x||0,l=a.y-g.y||0;this.width=a.x-g.x||0;this.height=l;d||this.setPositionByOrigin({x:h,y:e},"left","top")},_toSVG:function(a){for(var b=["<g ","COMMON_PARTS"," >\n"],c=0,e=this._objects.length;c<e;c++)b.push("\t\t",this._objects[c].toSVG(a));
b.push("</g>\n");return b},getSvgStyles:function(){var a=this.visible?"":" visibility: hidden;";return["undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),a].join("")},toClipPathSVG:function(a){for(var b=[],c=0,e=this._objects.length;c<e;c++)b.push("\t",this._objects[c].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(b,{reviver:a})}}),f.Group.fromObject=function(a,b){var c=a.objects,e=f.util.object.clone(a,!0);delete e.objects;"string"===
typeof c?f.loadSVGFromURL(c,function(d){d=f.util.groupSVGElements(d,a,c);d.set(e);b&&b(d)}):f.util.enlivenObjects(c,function(c){f.util.enlivenObjects([a.clipPath],function(d){var e=f.util.object.clone(a,!0);e.clipPath=d[0];delete e.objects;b&&b(new f.Group(c,e,!0))})})})})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(c,b){b=b||{};this._objects=c||[];for(c=this._objects.length;c--;)this._objects[c].group=this;b.originX&&(this.originX=b.originX);b.originY&&(this.originY=b.originY);this._calcBounds();this._updateObjectsCoords();f.Object.prototype.initialize.call(this,b);this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var b=f.Object.prototype.toObject.call(this),
a=new f.Group([]);delete b.type;a.set(b);c.forEach(function(b){b.canvas.remove(b);b.group=a});a._objects=c;if(!this.canvas)return a;c=this.canvas;c.add(a);c._activeObject=a;a.setCoords();return a},onDeselect:function(){this.destroy();return!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,b,a){c.save();c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;this.callSuper("_renderControls",
c,b);a=a||{};"undefined"===typeof a.hasControls&&(a.hasControls=!1);"undefined"===typeof a.hasRotatingPoint&&(a.hasRotatingPoint=!1);a.forActiveSelection=!0;b=0;for(var e=this._objects.length;b<e;b++)this._objects[b]._renderControls(c,a);c.restore()}}),f.ActiveSelection.fromObject=function(c,b){f.util.enlivenObjects(c.objects,function(a){delete c.objects;b&&b(new f.ActiveSelection(a,c,!0))})})})("undefined"!==typeof exports?exports:this);
(function(e){var f=fabric.util.object.extend;e.fabric||(e.fabric={});e.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(c,b){b||(b={});this.filters=[];this.cacheKey=
"texture"+fabric.Object.__uid++;this.callSuper("initialize",b);this._initElement(c,b)},getElement:function(){return this._element||{}},setElement:function(c,b){this.removeTexture(this.cacheKey);this.removeTexture(this.cacheKey+"_filtered");this._originalElement=this._element=c;this._initConfig(b);0!==this.filters.length&&this.applyFilters();this.resizeFilter&&this.applyResizeFilters();return this},removeTexture:function(c){var b=fabric.filterBackend;b&&b.evictCachesForKey&&b.evictCachesForKey(c)},
dispose:function(){this.removeTexture(this.cacheKey);this.removeTexture(this.cacheKey+"_filtered");this._cacheContext=void 0;["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){fabric.util.cleanUpJsdomNode(this[c]);this[c]=void 0}.bind(this))},setCrossOrigin:function(c){this.crossOrigin=c;this._element.crossOrigin=c;return this},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(this.stroke&&
0!==this.strokeWidth){var b=this.width/2,a=this.height/2;c.beginPath();c.moveTo(-b,-a);c.lineTo(b,-a);c.lineTo(b,a);c.lineTo(-b,a);c.lineTo(-b,-a);c.closePath()}},_renderDashedStroke:function(c){var b=-this.width/2,a=-this.height/2,e=this.width,d=this.height;c.save();this._setStrokeStyles(c,this);c.beginPath();fabric.util.drawDashedLine(c,b,a,b+e,a,this.strokeDashArray);fabric.util.drawDashedLine(c,b+e,a,b+e,a+d,this.strokeDashArray);fabric.util.drawDashedLine(c,b+e,a+d,b,a+d,this.strokeDashArray);
fabric.util.drawDashedLine(c,b,a+d,b,a,this.strokeDashArray);c.closePath();c.restore()},toObject:function(c){var b=[];this.filters.forEach(function(a){a&&b.push(a.toObject())});c=f(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(c)),{src:this.getSrc(),filters:b});this.resizeFilter&&(c.resizeFilter=this.resizeFilter.toObject());return c},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],b=
[],a=-this.width/2,e=-this.height/2,d="";this.hasCrop()&&(d=fabric.Object.__uid++,c.push('<clipPath id="imageCrop_'+d+'">\n','\t<rect x="'+a+'" y="'+e+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),d=' clip-path="url(#imageCrop_'+d+')" ');b.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',e-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',d,"></image>\n");
if(this.stroke||this.strokeDashArray){d=this.fill;this.fill=null;var f=["\t<rect ",'x="',a,'" y="',e,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'];this.fill=d}return c="fill"!==this.paintFirst?c.concat(f,b):c.concat(b,f)},getSrc:function(c){return(c=c?this._element:this._originalElement)?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(c,b,a){fabric.util.loadImage(c,function(c){this.setElement(c,a);
this._setWidthHeight();b&&b(this)},this,a&&a.crossOrigin);return this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,b=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),e=a.scaleX;a=a.scaleY;var d=this._filteredEl||this._originalElement;this.group&&this.set("dirty",!0);if(!c||e>b&&a>b)this._element=d,this._filterScalingY=this._filterScalingX=1,this._lastScaleX=e,this._lastScaleY=a;else{fabric.filterBackend||(fabric.filterBackend=
fabric.initFilterBackend());b=fabric.util.createCanvasElement();var f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,k=d.width,l=d.height;b.width=k;b.height=l;this._element=b;this._lastScaleX=c.scaleX=e;this._lastScaleY=c.scaleY=a;fabric.filterBackend.applyFilters([c],d,k,l,this._element,f);this._filterScalingX=b.width/this._originalElement.width;this._filterScalingY=b.height/this._originalElement.height}},applyFilters:function(c){c=c||this.filters||[];c=c.filter(function(a){return a&&!a.isNeutralState()});
this.set("dirty",!0);this.removeTexture(this.cacheKey+"_filtered");if(0===c.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingY=this._filterScalingX=1,this;var b=this._originalElement,a=b.naturalWidth||b.width;b=b.naturalHeight||b.height;if(this._element===this._originalElement){var e=fabric.util.createCanvasElement();e.width=a;e.height=b;this._filteredEl=this._element=e}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,
b),this._lastScaleY=this._lastScaleX=1;fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());fabric.filterBackend.applyFilters(c,this._originalElement,a,b,this._element,this.cacheKey);if(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height;return this},_render:function(c){!0!==this.isMoving&&
this.resizeFilter&&this._needsResize()&&this.applyResizeFilters();this._stroke(c);this._renderPaintInOrder(c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var b=this._element,a=this.width,e=this.height,d=Math.min(b.naturalWidth||b.width,a*this._filterScalingX),f=Math.min(b.naturalHeight||b.height,e*this._filterScalingY),k=Math.max(0,this.cropX*this._filterScalingX),l=Math.max(0,this.cropY*this._filterScalingY);b&&c.drawImage(b,k,l,d,f,-a/2,-e/2,a,e)},_needsResize:function(){var c=
this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,b){this.setElement(fabric.util.getById(c),b);fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={});this.setOptions(c);this._setWidthHeight(c);this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(c,b){c&&c.length?fabric.util.enlivenObjects(c,
function(a){b&&b(a)},"fabric.Image.filters"):b&&b()},_setWidthHeight:function(c){c||(c={});var b=this.getElement();this.width=c.width||b.naturalWidth||b.width||0;this.height=c.height||b.naturalHeight||b.height||0},parsePreserveAspectRatioAttribute:function(){var c=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),b=this._element.width,a=this._element.height,e=1,d=1,f=0,k=0,l=0,n=0,p=this.width,r=this.height,w={width:p,height:r};if(!c||"none"===c.alignX&&"none"===c.alignY)e=
p/b,d=r/a;else{if("meet"===c.meetOrSlice){e=d=fabric.util.findScaleToFit(this._element,w);var u=(p-b*e)/2;"Min"===c.alignX&&(f=-u);"Max"===c.alignX&&(f=u);u=(r-a*d)/2;"Min"===c.alignY&&(k=-u);"Max"===c.alignY&&(k=u)}"slice"===c.meetOrSlice&&(e=d=fabric.util.findScaleToCover(this._element,w),u=b-p/e,"Mid"===c.alignX&&(l=u/2),"Max"===c.alignX&&(l=u),u=a-r/d,"Mid"===c.alignY&&(n=u/2),"Max"===c.alignY&&(n=u),b=p/e,a=r/d)}return{width:b,height:a,scaleX:e,scaleY:d,offsetLeft:f,offsetTop:k,cropX:l,cropY:n}}}),
fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(c,b){var a=fabric.util.object.clone(c);fabric.util.loadImage(a.src,function(c,d){d?b&&b(null,d):fabric.Image.prototype._initFilters.call(a,a.filters,function(d){a.filters=d||[];fabric.Image.prototype._initFilters.call(a,[a.resizeFilter],function(d){a.resizeFilter=d[0];fabric.util.enlivenObjects([a.clipPath],function(d){a.clipPath=d[0];d=new fabric.Image(c,a);b(d)})})})},
null,a.crossOrigin)},fabric.Image.fromURL=function(c,b,a){fabric.util.loadImage(c,function(c){b&&b(new fabric.Image(c,a))},null,a&&a.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(c,b,a){c=fabric.parseAttributes(c,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(c["xlink:href"],b,f(a?fabric.util.object.clone(a):{},c))})})("undefined"!==typeof exports?exports:this);
fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return 0<e?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){this.rotate(this._getAngleValueForStraighten());return this},fxStraighten:function(e){e=e||{};var f=function(){},c=e.onComplete||f,b=e.onChange||f,a=this;fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(c){a.rotate(c);b()},
onComplete:function(){a.setCoords();c()}});return this}});fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(e){e.straighten();this.requestRenderAll();return this},fxStraightenObject:function(e){e.fxStraighten({onChange:this.requestRenderAllBound});return this}});
(function(){function e(e){e&&e.tileSize&&(this.tileSize=e.tileSize);this.setupGLContext(this.tileSize,this.tileSize);this.captureGPUInfo()}fabric.isWebglSupported=function(e){if(fabric.isLikelyNode)return!1;e=e||fabric.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas");c=c.getContext("webgl")||c.getContext("experimental-webgl");var b=!1;if(c){fabric.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE);b=fabric.maxTextureSize>=e;e=["highp","mediump","lowp"];for(var a=0;3>a;a++){var f=
c;var d="precision "+e[a]+" float;\nvoid main(){}",g=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(g,d);f.compileShader(g);f=f.getShaderParameter(g,f.COMPILE_STATUS)?!0:!1;if(f){fabric.webGlPrecision=e[a];break}}}return this.isSupported=b};fabric.WebglFilterBackend=e;e.prototype={tileSize:2048,resources:{},setupGLContext:function(e,c){this.dispose();this.createWebGLCanvas(e,c);this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]);this.chooseFastestCopyGLTo2DMethod(e,c)},chooseFastestCopyGLTo2DMethod:function(e,
c){var b="undefined"!==typeof window.performance;try{new ImageData(1,1);var a=!0}catch(g){a=!1}var f="undefined"!==typeof ArrayBuffer,d="undefined"!==typeof Uint8ClampedArray;b&&a&&f&&d&&(f=fabric.util.createCanvasElement(),b=new ArrayBuffer(e*c*4),fabric.forceGLPutImageData?(this.imageBuffer=b,this.copyGLTo2D=copyGLTo2DPutImageData):(a={imageBuffer:b,destinationWidth:e,destinationHeight:c,targetCanvas:f},f.width=e,f.height=c,c=window.performance.now(),copyGLTo2DDrawImage.call(a,this.gl,a),e=window.performance.now()-
c,c=window.performance.now(),copyGLTo2DPutImageData.call(a,this.gl,a),c=window.performance.now()-c,e>c?(this.imageBuffer=b,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage))},createWebGLCanvas:function(e,c){var b=fabric.util.createCanvasElement();b.width=e;b.height=c;e={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1};(c=b.getContext("webgl",e))||(c=b.getContext("experimental-webgl",e));c&&(c.clearColor(0,0,0,0),this.canvas=b,this.gl=c)},applyFilters:function(e,
c,b,a,h,d){var f=this.gl,k;d&&(k=this.getCachedTexture(d,c));var l={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:b,sourceHeight:a,destinationWidth:b,destinationHeight:a,context:f,sourceTexture:this.createTexture(f,b,a,!k&&c),targetTexture:this.createTexture(f,b,a),originalTexture:k||this.createTexture(f,b,a,!k&&c),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:h};c=f.createFramebuffer();
f.bindFramebuffer(f.FRAMEBUFFER,c);e.forEach(function(a){a&&a.applyTo(l)});resizeCanvasIfNeeded(l);this.copyGLTo2D(f,l);f.bindTexture(f.TEXTURE_2D,null);f.deleteTexture(l.sourceTexture);f.deleteTexture(l.targetTexture);f.deleteFramebuffer(c);h.getContext("2d").setTransform(1,0,0,1,0,0);return l},dispose:function(){this.canvas&&(this.gl=this.canvas=null);this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={};this.textureCache={}},createTexture:function(e,c,b,a){var f=e.createTexture();
e.bindTexture(e.TEXTURE_2D,f);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);a?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,c,b,0,e.RGBA,e.UNSIGNED_BYTE,null);return f},getCachedTexture:function(e,c){if(this.textureCache[e])return this.textureCache[e];
c=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[e]=c},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,c={renderer:"",vendor:""};if(!e)return c;var b=e.getExtension("WEBGL_debug_renderer_info");if(b){var a=e.getParameter(b.UNMASKED_RENDERER_WEBGL);e=e.getParameter(b.UNMASKED_VENDOR_WEBGL);
a&&(c.renderer=a.toLowerCase());e&&(c.vendor=e.toLowerCase())}return this.gpuInfo=c}}})();function resizeCanvasIfNeeded(e){var f=e.targetCanvas,c=f.height,b=e.destinationWidth;e=e.destinationHeight;if(f.width!==b||c!==e)f.width=b,f.height=e}function copyGLTo2DDrawImage(e,f){e=e.canvas;f=f.targetCanvas;var c=f.getContext("2d");c.translate(0,f.height);c.scale(1,-1);c.drawImage(e,0,e.height-f.height,f.width,f.height,0,0,f.width,f.height)}
function copyGLTo2DPutImageData(e,f){var c=f.targetCanvas.getContext("2d"),b=f.destinationWidth;f=f.destinationHeight;var a=b*f*4,h=new Uint8Array(this.imageBuffer,0,a);a=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,b,f,e.RGBA,e.UNSIGNED_BYTE,h);e=new ImageData(a,b,f);c.putImageData(e,0,0)}
(function(){function e(){}var f=function(){};fabric.Canvas2dFilterBackend=e;e.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(c,b,a,e,d){var f=d.getContext("2d");f.drawImage(b,0,0,a,e);var h=f.getImageData(0,0,a,e),l=f.getImageData(0,0,a,e),n={sourceWidth:a,sourceHeight:e,imageData:h,originalEl:b,originalImageData:l,canvasEl:d,ctx:f,filterBackend:this};c.forEach(function(a){a.applyTo(n)});if(n.imageData.width!==a||n.imageData.height!==e)d.width=n.imageData.width,
d.height=n.imageData.height;f.putImageData(n.imageData,0,0);return n}}})();fabric.Image=fabric.Image||{};fabric.Image.filters=fabric.Image.filters||{};
fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var f in e)this[f]=e[f]},createProgram:function(e,
f,c){f=f||this.fragmentSource;c=c||this.vertexSource;"highp"!==fabric.webGlPrecision&&(f=f.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var b=e.createShader(e.VERTEX_SHADER);e.shaderSource(b,c);e.compileShader(b);if(!e.getShaderParameter(b,e.COMPILE_STATUS))throw Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(b));c=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,f);e.compileShader(c);if(!e.getShaderParameter(c,e.COMPILE_STATUS))throw Error("Fragment shader compile error for "+
this.type+": "+e.getShaderInfoLog(c));f=e.createProgram();e.attachShader(f,b);e.attachShader(f,c);e.linkProgram(f);if(!e.getProgramParameter(f,e.LINK_STATUS))throw Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(f));b=this.getAttributeLocations(e,f);c=this.getUniformLocations(e,f)||{};c.uStepW=e.getUniformLocation(f,"uStepW");c.uStepH=e.getUniformLocation(f,"uStepH");return{program:f,attributeLocations:b,uniformLocations:c}},getAttributeLocations:function(e,f){return{aPosition:e.getAttribLocation(f,
"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,f,c){f=f.aPosition;var b=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b);e.enableVertexAttribArray(f);e.vertexAttribPointer(f,2,e.FLOAT,!1,0,0);e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var f=e.context;if(1<e.passes){var c=e.destinationWidth;var b=e.destinationHeight;if(e.sourceWidth!==c||e.sourceHeight!==b)f.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(f,
c,b);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,e.targetTexture,0)}else f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish()},_swapTextures:function(e){e.passes--;e.pass++;var f=e.targetTexture;e.targetTexture=e.sourceTexture;e.sourceTexture=f},isNeutralState:function(){var e=this.mainParameter,f=fabric.Image.filters[this.type].prototype;if(e){if(Array.isArray(f[e])){for(var c=f[e].length;c--;)if(this[e][c]!==f[e][c])return!1;return!0}return f[e]===this[e]}return!1},applyTo:function(e){e.webgl?
(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context));return e.programCache[this.type]},applyToWebGL:function(e){var f=e.context,c=this.retrieveShader(e);0===e.pass&&e.originalTexture?f.bindTexture(f.TEXTURE_2D,e.originalTexture):f.bindTexture(f.TEXTURE_2D,e.sourceTexture);f.useProgram(c.program);this.sendAttributeData(f,c.attributeLocations,
e.aPosition);f.uniform1f(c.uniformLocations.uStepW,1/e.sourceWidth);f.uniform1f(c.uniformLocations.uStepH,1/e.sourceHeight);this.sendUniformData(f,c.uniformLocations);f.viewport(0,0,e.destinationWidth,e.destinationHeight);f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,f,c){e.activeTexture(c);e.bindTexture(e.TEXTURE_2D,f);e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,f){e.activeTexture(f);e.bindTexture(e.TEXTURE_2D,null);e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},
setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var f=document.createElement("canvas");f.width=e.sourceWidth;f.height=e.sourceHeight;e.helpLayer=f}},toObject:function(){var e={type:this.type},f=this.mainParameter;f&&(e[f]=this[f]);return e},toJSON:function(){return this.toObject()}});fabric.Image.filters.BaseFilter.fromObject=function(e,f){e=new fabric.Image.filters[e.type](e);f&&f(e);return e};
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.ColorMatrix=c(f.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(b){this.callSuper("initialize",
b);this.matrix=this.matrix.slice(0)},applyTo2d:function(b){b=b.imageData.data;var a=b.length,c=this.matrix,d,e=this.colorsOnly;for(d=0;d<a;d+=4){var f=b[d];var l=b[d+1];var n=b[d+2];if(e)b[d]=f*c[0]+l*c[1]+n*c[2]+255*c[4],b[d+1]=f*c[5]+l*c[6]+n*c[7]+255*c[9],b[d+2]=f*c[10]+l*c[11]+n*c[12]+255*c[14];else{var p=b[d+3];b[d]=f*c[0]+l*c[1]+n*c[2]+p*c[3]+255*c[4];b[d+1]=f*c[5]+l*c[6]+n*c[7]+p*c[8]+255*c[9];b[d+2]=f*c[10]+l*c[11]+n*c[12]+p*c[13]+255*c[14];b[d+3]=f*c[15]+l*c[16]+n*c[17]+p*c[18]+255*c[19]}}},
getUniformLocations:function(b,a){return{uColorMatrix:b.getUniformLocation(a,"uColorMatrix"),uConstants:b.getUniformLocation(a,"uConstants")}},sendUniformData:function(b,a){var c=this.matrix,d=[c[4],c[9],c[14],c[19]];b.uniformMatrix4fv(a.uColorMatrix,!1,[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]]);b.uniform4fv(a.uConstants,d)}});e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Brightness=c(f.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(b){if(0!==this.brightness){b=b.imageData.data;var a,c=b.length,d=Math.round(255*
this.brightness);for(a=0;a<c;a+=4)b[a]+=d,b[a+1]+=d,b[a+2]+=d}},getUniformLocations:function(b,a){return{uBrightness:b.getUniformLocation(a,"uBrightness")}},sendUniformData:function(b,a){b.uniform1f(a.uBrightness,this.brightness)}});e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.util.object.extend,c=e.Image.filters,b=e.util.createClass;c.Convolute=b(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},
retrieveShader:function(a){var b=this.type+"_"+Math.sqrt(this.matrix.length)+"_"+(this.opaque?1:0),c=this.fragmentSource[b];a.programCache.hasOwnProperty(b)||(a.programCache[b]=this.createProgram(a.context,c));return a.programCache[b]},applyTo2d:function(a){var b=a.imageData,c=b.data,e=this.matrix,f=Math.round(Math.sqrt(e.length)),l=Math.floor(f/2),n=b.width;b=b.height;var p=a.ctx.createImageData(n,b),r=p.data,w=this.opaque?1:0,u,A,t,z,B,D,y,E;for(D=0;D<b;D++)for(B=0;B<n;B++){var x=4*(D*n+B);for(E=
z=t=A=u=0;E<f;E++)for(y=0;y<f;y++){var H=D+E-l;var F=B+y-l;0>H||H>=b||0>F||F>=n||(F=4*(H*n+F),H=e[E*f+y],u+=c[F]*H,A+=c[F+1]*H,t+=c[F+2]*H,w||(z+=c[F+3]*H))}r[x]=u;r[x+1]=A;r[x+2]=t;r[x+3]=w?c[x+3]:z}a.imageData=p},getUniformLocations:function(a,b){return{uMatrix:a.getUniformLocation(b,"uMatrix"),uOpaque:a.getUniformLocation(b,"uOpaque"),uHalfSize:a.getUniformLocation(b,"uHalfSize"),uSize:a.getUniformLocation(b,"uSize")}},sendUniformData:function(a,b){a.uniform1fv(b.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),
{opaque:this.opaque,matrix:this.matrix})}});e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Grayscale=c(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(b){b=b.imageData.data;var a,c=b.length,d,e=this.mode;for(a=0;a<c;a+=4)"average"===e?d=(b[a]+b[a+1]+b[a+2])/3:"lightness"===e?d=(Math.min(b[a],b[a+1],b[a+2])+
Math.max(b[a],b[a+1],b[a+2]))/2:"luminosity"===e&&(d=.21*b[a]+.72*b[a+1]+.07*b[a+2]),b[a]=d,b[a+1]=d,b[a+2]=d},retrieveShader:function(b){var a=this.type+"_"+this.mode;b.programCache.hasOwnProperty(a)||(b.programCache[a]=this.createProgram(b.context,this.fragmentSource[this.mode]));return b.programCache[a]},getUniformLocations:function(b,a){return{uMode:b.getUniformLocation(a,"uMode")}},sendUniformData:function(b,a){b.uniform1i(a.uMode,1)},isNeutralState:function(){return!1}});e.Image.filters.Grayscale.fromObject=
e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Invert=c(f.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(b){b=b.imageData.data;
var a,c=b.length;for(a=0;a<c;a+=4)b[a]=255-b[a],b[a+1]=255-b[a+1],b[a+2]=255-b[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(b,a){return{uInvert:b.getUniformLocation(a,"uInvert")}},sendUniformData:function(b,a){b.uniform1i(a.uInvert,this.invert)}});e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.util.object.extend,c=e.Image.filters,b=e.util.createClass;c.Noise=b(c.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
mainParameter:"noise",noise:0,applyTo2d:function(a){if(0!==this.noise){a=a.imageData.data;var b,c=this.noise;var e=0;for(b=a.length;e<b;e+=4){var f=(.5-Math.random())*c;a[e]+=f;a[e+1]+=f;a[e+2]+=f}}},getUniformLocations:function(a,b){return{uNoise:a.getUniformLocation(b,"uNoise"),uSeed:a.getUniformLocation(b,"uSeed")}},sendUniformData:function(a,b){a.uniform1f(b.uNoise,this.noise/255);a.uniform1f(b.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}});
e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Pixelate=c(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(b){var a=
b.imageData;b=a.data;var c=a.height;a=a.width;var d,e,f,l;for(d=0;d<c;d+=this.blocksize)for(e=0;e<a;e+=this.blocksize){var n=4*d*a+4*e;var p=b[n];var r=b[n+1];var w=b[n+2];var u=b[n+3];var A=Math.min(d+this.blocksize,c);var t=Math.min(e+this.blocksize,a);for(f=d;f<A;f++)for(l=e;l<t;l++)n=4*f*a+4*l,b[n]=p,b[n+1]=r,b[n+2]=w,b[n+3]=u}},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(b,a){return{uBlocksize:b.getUniformLocation(a,"uBlocksize"),uStepW:b.getUniformLocation(a,
"uStepW"),uStepH:b.getUniformLocation(a,"uStepH")}},sendUniformData:function(b,a){b.uniform1f(a.uBlocksize,this.blocksize)}});e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.object.extend;e=f.Image.filters;var b=f.util.createClass;e.RemoveColor=b(e.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,
useAlpha:!1,applyTo2d:function(a){a=a.imageData.data;var b=255*this.distance;var c=(new f.Color(this.color)).getSource();var e=[c[0]-b,c[1]-b,c[2]-b],k=[c[0]+b,c[1]+b,c[2]+b];for(b=0;b<a.length;b+=4){c=a[b];var l=a[b+1];var n=a[b+2];c>e[0]&&l>e[1]&&n>e[2]&&c<k[0]&&l<k[1]&&n<k[2]&&(a[b+3]=0)}},getUniformLocations:function(a,b){return{uLow:a.getUniformLocation(b,"uLow"),uHigh:a.getUniformLocation(b,"uHigh")}},sendUniformData:function(a,b){var c=(new f.Color(this.color)).getSource(),e=parseFloat(this.distance),
h=[c[0]/255+e,c[1]/255+e,c[2]/255+e,1];a.uniform4fv(b.uLow,[c[0]/255-e,c[1]/255-e,c[2]/255-e,1]);a.uniform4fv(b.uHigh,h)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}});f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass,b={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,
-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]},a;for(a in b)f[a]=c(f.ColorMatrix,{type:a,matrix:b[a],mainParameter:!1,colorsOnly:!0}),e.Image.filters[a].fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric;e=f.Image.filters;var c=f.util.createClass;e.BlendColor=c(e.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(b){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[b]+"}\n}"},retrieveShader:function(b){var a=this.type+"_"+this.mode;if(!b.programCache.hasOwnProperty(a)){var c=this.buildSource(this.mode);b.programCache[a]=this.createProgram(b.context,
c)}return b.programCache[a]},applyTo2d:function(b){b=b.imageData.data;var a=b.length,c=1-this.alpha;var d=(new f.Color(this.color)).getSource();var e=d[0]*this.alpha;var k=d[1]*this.alpha;d=d[2]*this.alpha;for(var l=0;l<a;l+=4){var n=b[l];var p=b[l+1];var r=b[l+2];switch(this.mode){case "multiply":b[l]=n*e/255;b[l+1]=p*k/255;b[l+2]=r*d/255;break;case "screen":b[l]=255-(255-n)*(255-e)/255;b[l+1]=255-(255-p)*(255-k)/255;b[l+2]=255-(255-r)*(255-d)/255;break;case "add":b[l]=n+e;b[l+1]=p+k;b[l+2]=r+d;
break;case "diff":case "difference":b[l]=Math.abs(n-e);b[l+1]=Math.abs(p-k);b[l+2]=Math.abs(r-d);break;case "subtract":b[l]=n-e;b[l+1]=p-k;b[l+2]=r-d;break;case "darken":b[l]=Math.min(n,e);b[l+1]=Math.min(p,k);b[l+2]=Math.min(r,d);break;case "lighten":b[l]=Math.max(n,e);b[l+1]=Math.max(p,k);b[l+2]=Math.max(r,d);break;case "overlay":b[l]=128>e?2*n*e/255:255-2*(255-n)*(255-e)/255;b[l+1]=128>k?2*p*k/255:255-2*(255-p)*(255-k)/255;b[l+2]=128>d?2*r*d/255:255-2*(255-r)*(255-d)/255;break;case "exclusion":b[l]=
e+n-2*e*n/255;b[l+1]=k+p-2*k*p/255;b[l+2]=d+r-2*d*r/255;break;case "tint":b[l]=e+n*c,b[l+1]=k+p*c,b[l+2]=d+r*c}}},getUniformLocations:function(b,a){return{uColor:b.getUniformLocation(a,"uColor")}},sendUniformData:function(b,a){var c=(new f.Color(this.color)).getSource();c[0]=this.alpha*c[0]/255;c[1]=this.alpha*c[1]/255;c[2]=this.alpha*c[2]/255;c[3]=this.alpha;b.uniform4fv(a.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}});f.Image.filters.BlendColor.fromObject=
f.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric;e=f.Image.filters;var c=f.util.createClass;e.BlendImage=c(e.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(b){var a=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];b.programCache.hasOwnProperty(a)||(b.programCache[a]=this.createProgram(b.context,c));return b.programCache[a]},
applyToWebGL:function(b){var a=b.context,c=this.createTexture(b.filterBackend,this.image);this.bindAdditionalTexture(a,c,a.TEXTURE1);this.callSuper("applyToWebGL",b);this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(b,a){return b.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var b=this.image;return[1/b.scaleX,0,0,0,1/b.scaleY,0,-b.left/b._element.width,-b.top/b._element.height,1]},applyTo2d:function(b){var a=b.imageData,c=b.filterBackend.resources;b=a.data;var d=
b.length,e=a.width;a=a.height;var k=this.image;c.blendImage||(c.blendImage=f.util.createCanvasElement());c=c.blendImage;var l=c.getContext("2d");c.width!==e||c.height!==a?(c.width=e,c.height=a):l.clearRect(0,0,e,a);l.setTransform(k.scaleX,0,0,k.scaleY,k.left,k.top);l.drawImage(k._element,0,0,e,a);var n=l.getImageData(0,0,e,a).data;for(var p=0;p<d;p+=4){l=b[p];var r=b[p+1];var w=b[p+2];var u=b[p+3];e=n[p];a=n[p+1];k=n[p+2];c=n[p+3];switch(this.mode){case "multiply":b[p]=l*e/255;b[p+1]=r*a/255;b[p+
2]=w*k/255;b[p+3]=u*c/255;break;case "mask":b[p+3]=c}}},getUniformLocations:function(b,a){return{uTransformMatrix:b.getUniformLocation(a,"uTransformMatrix"),uImage:b.getUniformLocation(a,"uImage")}},sendUniformData:function(b,a){var c=this.calculateMatrix();b.uniform1i(a.uImage,1);b.uniformMatrix3fv(a.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}});f.Image.filters.BlendImage.fromObject=function(b,a){f.Image.fromObject(b.image,
function(c){var d=f.util.object.clone(b);d.image=c;a(new f.Image.filters.BlendImage(d))})}})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=Math.pow,b=Math.floor,a=Math.sqrt,h=Math.abs,d=Math.round,g=Math.sin,k=Math.ceil;e=f.Image.filters;var l=f.util.createClass;e.Resize=l(e.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(a,b){return{uDelta:a.getUniformLocation(b,"uDelta"),uTaps:a.getUniformLocation(b,"uTaps")}},sendUniformData:function(a,b){a.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]);a.uniform1fv(b.uTaps,
this.taps)},retrieveShader:function(a){var b=this.getFilterWindow(),c=this.type+"_"+b;a.programCache.hasOwnProperty(c)||(b=this.generateShader(b),a.programCache[c]=this.createProgram(a.context,b));return a.programCache[c]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var a=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,c=this.getFilterWindow(),d=Array(c),e=1;e<=c;e++)d[e-1]=a(e*b);return d},generateShader:function(a){for(var b=Array(a),
c=this.fragmentSourceTOP,d=1;d<=a;d++)b[d-1]=d+".0 * uDelta";c+="uniform float uTaps["+a+"];\n";c+="void main() {\n";c+="  vec4 color = texture2D(uTexture, vTexCoord);\n";c+="  float sum = 1.0;\n";b.forEach(function(a,b){c+="  color += texture2D(uTexture, vTexCoord + "+a+") * uTaps["+b+"];\n";c+="  color += texture2D(uTexture, vTexCoord - "+a+") * uTaps["+b+"];\n";c+="  sum += 2.0 * uTaps["+b+"];\n"});c+="  gl_FragColor = color / sum;\n";return c+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
applyTo:function(a){a.webgl?(a.passes++,this.width=a.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=a.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),a.destinationWidth=this.dW,this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a),a.sourceWidth=a.destinationWidth,this.height=a.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),a.destinationHeight=
this.dH,this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a),a.sourceHeight=a.destinationHeight):this.applyTo2d(a)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(a){return function(b){if(b>=a||b<=-a)return 0;if(1.1920929E-7>b&&-1.1920929E-7<b)return 1;b*=Math.PI;var c=b/a;return g(b)/b*g(c)/c}},applyTo2d:function(a){var b=a.imageData,c=this.scaleX,e=this.scaleY;this.rcpScaleX=1/c;this.rcpScaleY=1/e;var f=b.width;b=b.height;c=d(f*c);e=d(b*
e);var g;"sliceHack"===this.resizeType?g=this.sliceByTwo(a,f,b,c,e):"hermite"===this.resizeType?g=this.hermiteFastResize(a,f,b,c,e):"bilinear"===this.resizeType?g=this.bilinearFiltering(a,f,b,c,e):"lanczos"===this.resizeType&&(g=this.lanczosResize(a,f,b,c,e));a.imageData=g},sliceByTwo:function(a,c,d,e,g){a=a.imageData;var h=!1,k=!1,l=.5*c,n=.5*d,p=f.filterBackend.resources,r=0,u=0,w=c,H=0;p.sliceByTwo||(p.sliceByTwo=document.createElement("canvas"));p=p.sliceByTwo;if(p.width<1.5*c||p.height<d)p.width=
1.5*c,p.height=d;var F=p.getContext("2d");F.clearRect(0,0,1.5*c,d);F.putImageData(a,0,0);e=b(e);for(g=b(g);!h||!k;)c=l,d=n,e<b(.5*l)?l=b(.5*l):(l=e,h=!0),g<b(.5*n)?n=b(.5*n):(n=g,k=!0),F.drawImage(p,r,u,c,d,w,H,l,n),r=w,u=H,H+=n;return F.getImageData(r,u,e,g)},lanczosResize:function(d,e,f,g,l){var n,p,r;function u(d){var k,t,z,A,B,D;p=(d+.5)*H;n=b(p);for(k=0;k<l;k++){r=(k+.5)*F;S=b(r);var ia=D=B=A=z=0;for(t=n-G;t<=n+G;t++)if(!(0>t||t>=e)){var ca=b(1E3*h(t-p));M[ca]||(M[ca]={});for(var ea=S-I;ea<=
S+I;ea++)if(!(0>ea||ea>=f)){var la=b(1E3*h(ea-r));M[ca][la]||(M[ca][la]=x(a(c(ca*m,2)+c(la*q,2))/1E3));la=M[ca][la];if(0<la){var Aa=4*(ea*e+t);z+=la;A+=la*w[Aa];B+=la*w[Aa+1];D+=la*w[Aa+2];ia+=la*w[Aa+3]}}}Aa=4*(k*g+d);E[Aa]=A/z;E[Aa+1]=B/z;E[Aa+2]=D/z;E[Aa+3]=ia/z}return++d<g?u(d):y}var w=d.imageData.data,y=d.ctx.createImageData(g,l),E=y.data,x=this.lanczosCreate(this.lanczosLobes),H=this.rcpScaleX,F=this.rcpScaleY,m=2/this.rcpScaleX,q=2/this.rcpScaleY,G=k(H*this.lanczosLobes/2),I=k(F*this.lanczosLobes/
2),M={};var S=n=r=p=void 0;return u(0)},bilinearFiltering:function(a,c,d,e,f){var g;d=0;var h=this.rcpScaleX,k=this.rcpScaleY,l=4*(c-1),n=a.imageData.data,p=a.ctx.createImageData(e,f),r=p.data;for(a=0;a<f;a++)for(g=0;g<e;g++){var u=b(h*g);var w=b(k*a);var F=h*g-u;var m=k*a-w;w=4*(w*c+u);for(u=0;4>u;u++){var q=n[w+u];var G=n[w+4+u];var I=n[w+l+u];var M=n[w+l+4+u];q=q*(1-F)*(1-m)+G*F*(1-m)+I*m*(1-F)+M*F*m;r[d++]=q}}return p},hermiteFastResize:function(c,d,e,f,g){e=this.rcpScaleX;var l=this.rcpScaleY,
n=k(e/2),p=k(l/2),r=c.imageData.data;c=c.ctx.createImageData(f,g);for(var u=c.data,w=0;w<g;w++)for(var E=0;E<f;E++){for(var x=4*(E+w*f),H,F=0,m=0,q=0,G=0,I=0,M=0,S=(w+.5)*l,ia=b(w*l);ia<(w+1)*l;ia++){var za=h(S-(ia+.5))/p,W=(E+.5)*e;za*=za;for(var X=b(E*e);X<(E+1)*e;X++){var aa=h(W-(X+.5))/n;H=a(za+aa*aa);1<H&&-1>H||(H=2*H*H*H-3*H*H+1,0<H&&(aa=4*(X+ia*d),M+=H*r[aa+3],m+=H,255>r[aa+3]&&(H=H*r[aa+3]/250),q+=H*r[aa],G+=H*r[aa+1],I+=H*r[aa+2],F+=H))}}u[x]=q/F;u[x+1]=G/F;u[x+2]=I/F;u[x+3]=M/m}return c},
toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}});f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Contrast=c(f.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(b){if(0!==
this.contrast){var a=b.imageData.data;b=a.length;var c=Math.floor(255*this.contrast);var d=259*(c+255)/(255*(259-c));for(c=0;c<b;c+=4)a[c]=d*(a[c]-128)+128,a[c+1]=d*(a[c+1]-128)+128,a[c+2]=d*(a[c+2]-128)+128}},getUniformLocations:function(b,a){return{uContrast:b.getUniformLocation(a,"uContrast")}},sendUniformData:function(b,a){b.uniform1f(a.uContrast,this.contrast)}});e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Saturation=c(f.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
saturation:0,mainParameter:"saturation",applyTo2d:function(b){if(0!==this.saturation){b=b.imageData.data;var a=b.length,c=-this.saturation,d;for(d=0;d<a;d+=4){var e=Math.max(b[d],b[d+1],b[d+2]);b[d]+=e!==b[d]?(e-b[d])*c:0;b[d+1]+=e!==b[d+1]?(e-b[d+1])*c:0;b[d+2]+=e!==b[d+2]?(e-b[d+2])*c:0}}},getUniformLocations:function(b,a){return{uSaturation:b.getUniformLocation(a,"uSaturation")}},sendUniformData:function(b,a){b.uniform1f(a.uSaturation,-this.saturation)}});e.Image.filters.Saturation.fromObject=
e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={});e=f.Image.filters;var c=f.util.createClass;e.Blur=c(e.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,
mainParameter:"blur",applyTo:function(b){b.webgl?(this.aspectRatio=b.sourceWidth/b.sourceHeight,b.passes++,this._setupFrameBuffer(b),this.horizontal=!0,this.applyToWebGL(b),this._swapTextures(b),this._setupFrameBuffer(b),this.horizontal=!1,this.applyToWebGL(b),this._swapTextures(b)):this.applyTo2d(b)},applyTo2d:function(b){b.imageData=this.simpleBlur(b)},simpleBlur:function(b){var a=b.filterBackend.resources,c=b.imageData.width,d=b.imageData.height;a.blurLayer1||(a.blurLayer1=f.util.createCanvasElement(),
a.blurLayer2=f.util.createCanvasElement());var e=a.blurLayer1;var k=a.blurLayer2;if(e.width!==c||e.height!==d)k.width=e.width=c,k.height=e.height=d;a=e.getContext("2d");var l=k.getContext("2d"),n,p=.03*this.blur;a.putImageData(b.imageData,0,0);l.clearRect(0,0,c,d);for(n=-15;15>=n;n++){var r=(Math.random()-.5)/4;var w=n/15;var u=p*w*c+r;l.globalAlpha=1-Math.abs(w);l.drawImage(e,u,r);a.drawImage(k,0,0);l.globalAlpha=1;l.clearRect(0,0,k.width,k.height)}for(n=-15;15>=n;n++)r=(Math.random()-.5)/4,w=n/
15,u=p*w*d+r,l.globalAlpha=1-Math.abs(w),l.drawImage(e,r,u),a.drawImage(k,0,0),l.globalAlpha=1,l.clearRect(0,0,k.width,k.height);b.ctx.drawImage(e,0,0);b=b.ctx.getImageData(0,0,e.width,e.height);a.globalAlpha=1;a.clearRect(0,0,e.width,e.height);return b},getUniformLocations:function(b,a){return{delta:b.getUniformLocation(a,"uDelta")}},sendUniformData:function(b,a){var c=this.chooseRightDelta();b.uniform2fv(a.delta,c)},chooseRightDelta:function(){var b=1,a=[0,0];this.horizontal?1<this.aspectRatio&&
(b=1/this.aspectRatio):1>this.aspectRatio&&(b=this.aspectRatio);b=b*this.blur*.12;this.horizontal?a[0]=b:a[1]=b;return a}});e.Blur.fromObject=f.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){e=e.fabric||(e.fabric={});var f=e.Image.filters,c=e.util.createClass;f.Gamma=c(f.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,
1,1],mainParameter:"gamma",initialize:function(b){this.gamma=[1,1,1];f.BaseFilter.prototype.initialize.call(this,b)},applyTo2d:function(b){b=b.imageData.data;var a=this.gamma,c=1/a[0],d=1/a[1],e=1/a[2];this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256));var f=0;for(a=256;f<a;f++)this.rVals[f]=255*Math.pow(f/255,c),this.gVals[f]=255*Math.pow(f/255,d),this.bVals[f]=255*Math.pow(f/255,e);f=0;for(a=b.length;f<a;f+=4)b[f]=this.rVals[b[f]],b[f+1]=this.gVals[b[f+
1]],b[f+2]=this.bVals[b[f+2]]},getUniformLocations:function(b,a){return{uGamma:b.getUniformLocation(a,"uGamma")}},sendUniformData:function(b,a){b.uniform3fv(a.uGamma,this.gamma)}});e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={});e=f.Image.filters;var c=f.util.createClass;e.Composed=c(e.BaseFilter,{type:"Composed",subFilters:[],initialize:function(b){this.callSuper("initialize",b);this.subFilters=this.subFilters.slice(0)},applyTo:function(b){b.passes+=this.subFilters.length-1;this.subFilters.forEach(function(a){a.applyTo(b)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(b){return b.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(b){return!b.isNeutralState()})}});
f.Image.filters.Composed.fromObject=function(b,a){b=(b.subFilters||[]).map(function(a){return new f.Image.filters[a.type](a)});b=new f.Image.filters.Composed({subFilters:b});a&&a(b);return b}})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.Image.filters;e=f.util.createClass;c.HueRotation=e(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var b=this.rotation*Math.PI,a=f.util.cos(b),c=f.util.sin(b);b=1/3;c*=Math.sqrt(b);var d=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.matrix[0]=a+d/3;this.matrix[1]=b*d-c;this.matrix[2]=b*d+c;this.matrix[5]=b*d+c;this.matrix[6]=a+b*d;this.matrix[7]=b*d-c;this.matrix[10]=b*d-c;this.matrix[11]=
b*d+c;this.matrix[12]=a+b*d},isNeutralState:function(b){this.calculateMatrix();return c.BaseFilter.prototype.isNeutralState.call(this,b)},applyTo:function(b){this.calculateMatrix();c.BaseFilter.prototype.applyTo.call(this,b)}});f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject})("undefined"!==typeof exports?exports:this);
(function(e){var f=e.fabric||(e.fabric={}),c=f.util.object.clone;f.Text?f.warn("fabric.Text is already defined"):(f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:"fontSize fontWeight fontFamily fontStyle lineHeight text charSpacing textAlign styles".split(" "),_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",
lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:f.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight",
"textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:"stroke strokeWidth fill fontFamily fontSize fontWeight fontStyle underline overline linethrough deltaY textBackgroundColor".split(" "),__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(b,a){this.styles=a?a.styles||{}:{};this.text=b;this.__skipDimension=
!0;this.callSuper("initialize",a);this.__skipDimension=!1;this.initDimensions();this.setCoords();this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d"));return f._measuringContext},_splitText:function(){var b=this._splitTextIntoLines(this.text);this.textLines=b.lines;this._textLines=b.graphemeLines;this._unwrappedTextLines=b._unwrappedLines;
this._text=b.graphemeText;return b},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var b,a,c,d,e,f=0,l=this._textLines.length;f<l;f++)if("justify"===this.textAlign||f!==l-1&&!this.isEndOfWrapping(f))if(c=0,d=
this._textLines[f],b=this.getLineWidth(f),b<this.width&&(e=this.textLines[f].match(this._reSpacesAndTabs))){a=e.length;b=(this.width-b)/a;for(var n=0,p=d.length;n<=p;n++)a=this.__charBounds[f][n],this._reSpaceAndTab.test(d[n])?(a.width+=b,a.kernedWidth+=b,a.left+=c,c+=b):a.left+=c}},isEndOfWrapping:function(b){return b===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+
this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var b=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;b.width+=a*b.zoomX;b.height+=a*b.zoomY;return b},_render:function(b){this._setTextStyles(b);this._renderTextLinesBackground(b);this._renderTextDecoration(b,"underline");this._renderText(b);this._renderTextDecoration(b,"overline");this._renderTextDecoration(b,"linethrough")},_renderText:function(b){"stroke"===this.paintFirst?(this._renderTextStroke(b),this._renderTextFill(b)):
(this._renderTextFill(b),this._renderTextStroke(b))},_setTextStyles:function(b,a,c){b.textBaseline="alphabetic";b.font=this._getFontDeclaration(a,c)},calcTextWidth:function(){for(var b=this.getLineWidth(0),a=1,c=this._textLines.length;a<c;a++){var d=this.getLineWidth(a);d>b&&(b=d)}return b},_renderTextLine:function(b,a,c,d,e,f){this._renderChars(b,a,c,d,e,f)},_renderTextLinesBackground:function(b){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var a=0,c,d,e=b.fillStyle,f,l,
n=this._getLeftOffset(),p=this._getTopOffset(),r,w,u,A=0,t=this._textLines.length;A<t;A++){c=this.getHeightOfLine(A);if(this.textBackgroundColor||this.styleHas("textBackgroundColor",A)){f=this._textLines[A];d=this._getLineLeftOffset(A);r=w=0;l=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var z=0,B=f.length;z<B;z++)f=this.__charBounds[A][z],u=this.getValueOfPropertyAt(A,z,"textBackgroundColor"),u!==l?((b.fillStyle=l)&&b.fillRect(n+d+r,p+a,w,c/this.lineHeight),r=f.left,w=f.width,l=u):w+=
f.kernedWidth;u&&(b.fillStyle=u,b.fillRect(n+d+r,p+a,w,c/this.lineHeight))}a+=c}b.fillStyle=e;this._removeShadow(b)}},getFontCache:function(b){var a=b.fontFamily.toLowerCase();f.charWidthsCache[a]||(f.charWidthsCache[a]={});a=f.charWidthsCache[a];b=b.fontStyle.toLowerCase()+"_"+(b.fontWeight+"").toLowerCase();a[b]||(a[b]={});return a[b]},_applyCharStyles:function(b,a,c,d,e){this._setFillStyles(a,e);this._setStrokeStyles(a,e);a.font=this._getFontDeclaration(e)},_measureChar:function(b,a,c,d){var e=
this.getFontCache(a),f=this._getFontDeclaration(a),h=this._getFontDeclaration(d);d=c+b;f=f===h;var n,p;h=a.fontSize/this.CACHE_FONT_SIZE;var r;c&&void 0!==e[c]&&(p=e[c]);void 0!==e[b]&&(r=n=e[b]);if(f&&void 0!==e[d]){var w=e[d];r=w-p}if(void 0===n||void 0===p||void 0===w){var u=this.getMeasuringContext();this._setTextStyles(u,a,!0)}void 0===n&&(r=n=u.measureText(b).width,e[b]=n);void 0===p&&f&&c&&(p=u.measureText(c).width,e[c]=p);f&&void 0===w&&(w=u.measureText(d).width,e[d]=w,r=w-p);return{width:n*
h,kernedWidth:r*h}},getHeightOfChar:function(b,a){return this.getValueOfPropertyAt(b,a,"fontSize")},measureLine:function(b){b=this._measureLine(b);0!==this.charSpacing&&(b.width-=this._getWidthOfCharSpacing());0>b.width&&(b.width=0);return b},_measureLine:function(b){var a=0,c,d=this._textLines[b],e=Array(d.length);this.__charBounds[b]=e;for(c=0;c<d.length;c++){var f=d[c];var l=this._getGraphemeBox(f,b,c,n);e[c]=l;a+=l.kernedWidth;var n=f}e[c]={left:l?l.left+l.width:0,width:0,kernedWidth:0,height:this.fontSize};
return{width:a,numOfSpaces:0}},_getGraphemeBox:function(b,a,c,d,e){var f=this.getCompleteStyleDeclaration(a,c),g=d?this.getCompleteStyleDeclaration(a,c-1):{};b=this._measureChar(b,f,d,g);d=b.kernedWidth;g=b.width;if(0!==this.charSpacing){var h=this._getWidthOfCharSpacing();g+=h;d+=h}f={width:g,left:0,height:f.fontSize,kernedWidth:d,deltaY:f.deltaY};0<c&&!e&&(a=this.__charBounds[a][c-1],f.left=a.left+a.width+b.kernedWidth-b.width);return f},getHeightOfLine:function(b){if(this.__lineHeights[b])return this.__lineHeights[b];
var a=this._textLines[b],c=this.getHeightOfChar(b,0),d=1;for(a=a.length;d<a;d++)c=Math.max(this.getHeightOfChar(b,d),c);return this.__lineHeights[b]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var b,a=0,c=0,d=this._textLines.length;c<d;c++)b=this.getHeightOfLine(c),a+=c===d-1?b/this.lineHeight:b;return a},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_applyPatternGradientTransform:function(b,a){if(!a||!a.toLive)return{offsetX:0,
offsetY:0};var c=-this.width/2+a.offsetX||0;a=-this.height/2+a.offsetY||0;b.transform(1,0,0,1,c,a);return{offsetX:c,offsetY:a}},_renderTextCommon:function(b,a){b.save();for(var c=0,d=this._getLeftOffset(),e=this._getTopOffset(),f=this._applyPatternGradientTransform(b,"fillText"===a?this.fill:this.stroke),l=0,n=this._textLines.length;l<n;l++){var p=this.getHeightOfLine(l),r=p/this.lineHeight,w=this._getLineLeftOffset(l);this._renderTextLine(a,b,this._textLines[l],d+w-f.offsetX,e+c+r-f.offsetY,l);c+=
p}b.restore()},_renderTextFill:function(b){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(b,"fillText")},_renderTextStroke:function(b){if(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())this.shadow&&!this.shadow.affectStroke&&this._removeShadow(b),b.save(),this._setLineDash(b,this.strokeDashArray),b.beginPath(),this._renderTextCommon(b,"strokeText"),b.closePath(),b.restore()},_renderChars:function(b,a,c,d,e,f){var g=this.getHeightOfLine(f),h=-1!==this.textAlign.indexOf("justify"),
k="",r=0;var w=!h&&0===this.charSpacing&&this.isEmptyStyles(f);a.save();e-=g*this._fontSizeFraction/this.lineHeight;if(w)this._renderChar(b,a,f,0,this.textLines[f],d,e,g);else for(var u=0,A=c.length-1;u<=A;u++){var t=u===A||this.charSpacing;k+=c[u];w=this.__charBounds[f][u];0===r?(d+=w.kernedWidth-w.width,r+=w.width):r+=w.kernedWidth;h&&!t&&this._reSpaceAndTab.test(c[u])&&(t=!0);if(!t){var z=z||this.getCompleteStyleDeclaration(f,u);var B=this.getCompleteStyleDeclaration(f,u+1);t=this._hasStyleChanged(z,
B)}t&&(this._renderChar(b,a,f,u,k,d,e,g),k="",z=B,d+=r,r=0)}a.restore()},_renderChar:function(b,a,c,d,e,f,l){var g=this._getStyleDeclaration(c,d),h=this.getCompleteStyleDeclaration(c,d),k="fillText"===b&&h.fill,w="strokeText"===b&&h.stroke&&h.strokeWidth;if(w||k)g&&a.save(),this._applyCharStyles(b,a,c,d,h),g&&g.textBackgroundColor&&this._removeShadow(a),g&&g.deltaY&&(l+=g.deltaY),k&&a.fillText(e,f,l),w&&a.strokeText(e,f,l),g&&a.restore()},setSuperscript:function(b,a){return this._setScript(b,a,this.superscript)},
setSubscript:function(b,a){return this._setScript(b,a,this.subscript)},_setScript:function(b,a,c){var d=this.get2DCursorLocation(b,!0),e=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"fontSize");d=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"deltaY");this.setSelectionStyles({fontSize:e*c.size,deltaY:d+e*c.baseline},b,a);return this},_hasStyleChanged:function(b,a){return b.fill!==a.fill||b.stroke!==a.stroke||b.strokeWidth!==a.strokeWidth||b.fontSize!==a.fontSize||b.fontFamily!==a.fontFamily||
b.fontWeight!==a.fontWeight||b.fontStyle!==a.fontStyle||b.deltaY!==a.deltaY},_hasStyleChangedForSvg:function(b,a){return this._hasStyleChanged(b,a)||b.overline!==a.overline||b.underline!==a.underline||b.linethrough!==a.linethrough},_getLineLeftOffset:function(b){var a=this.getLineWidth(b);return"center"===this.textAlign?(this.width-a)/2:"right"===this.textAlign?this.width-a:"justify-center"===this.textAlign&&this.isEndOfWrapping(b)?(this.width-a)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(b)?
this.width-a:0},_clearCache:function(){this.__lineWidths=[];this.__lineHeights=[];this.__charBounds=[]},_shouldClearDimensionCache:function(){var b=this._forceClearCache;b||(b=this.hasStateChanged("_dimensionAffectingProps"));b&&(this.dirty=!0,this._forceClearCache=!1);return b},getLineWidth:function(b){if(this.__lineWidths[b])return this.__lineWidths[b];if(""===this._textLines[b])var a=0;else a=this.measureLine(b),a=a.width;return this.__lineWidths[b]=a},_getWidthOfCharSpacing:function(){return 0!==
this.charSpacing?this.fontSize*this.charSpacing/1E3:0},getValueOfPropertyAt:function(b,a,c){return(b=this._getStyleDeclaration(b,a))&&"undefined"!==typeof b[c]?b[c]:this[c]},_renderTextDecoration:function(b,a){if(this[a]||this.styleHas(a)){for(var c,d,e,f,l,n,p,r=this._getLeftOffset(),w=this._getTopOffset(),u,A,t,z,B,D,y,E=this._getWidthOfCharSpacing(),x=0,H=this._textLines.length;x<H;x++){c=this.getHeightOfLine(x);if(this[a]||this.styleHas(a,x)){e=this._textLines[x];d=c/this.lineHeight;f=this._getLineLeftOffset(x);
t=A=0;p=this.getValueOfPropertyAt(x,0,a);y=this.getValueOfPropertyAt(x,0,"fill");u=w+d*(1-this._fontSizeFraction);d=this.getHeightOfChar(x,0);l=this.getValueOfPropertyAt(x,0,"deltaY");for(var F=0,m=e.length;F<m;F++)z=this.__charBounds[x][F],B=this.getValueOfPropertyAt(x,F,a),D=this.getValueOfPropertyAt(x,F,"fill"),e=this.getHeightOfChar(x,F),n=this.getValueOfPropertyAt(x,F,"deltaY"),(B!==p||D!==y||e!==d||n!==l)&&0<t?(b.fillStyle=y,p&&y&&b.fillRect(r+f+A,u+this.offsets[a]*d+l,t,this.fontSize/15),A=
z.left,t=z.width,p=B,y=D,d=e,l=n):t+=z.kernedWidth;b.fillStyle=D;B&&D&&b.fillRect(r+f+A,u+this.offsets[a]*d+l,t-E,this.fontSize/15)}w+=c}this._removeShadow(b)}},_getFontDeclaration:function(b,a){b=b||this;var c=this.fontFamily,d=-1<f.Text.genericFonts.indexOf(c.toLowerCase());c=void 0===c||-1<c.indexOf("'")||-1<c.indexOf(",")||-1<c.indexOf('"')||d?b.fontFamily:'"'+b.fontFamily+'"';return[f.isLikelyNode?b.fontWeight:b.fontStyle,f.isLikelyNode?b.fontStyle:b.fontWeight,a?this.CACHE_FONT_SIZE+"px":b.fontSize+
"px",c].join(" ")},render:function(b){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",b))},_splitTextIntoLines:function(b){b=b.split(this._reNewline);for(var a=Array(b.length),c=["\n"],d=[],e=0;e<b.length;e++)a[e]=f.util.string.graphemeSplit(b[e]),d=d.concat(a[e],c);d.pop();return{_unwrappedLines:a,lines:b,graphemeText:d,graphemeLines:a}},toObject:function(b){b="text fontSize fontWeight fontFamily fontStyle lineHeight underline overline linethrough textAlign textBackgroundColor charSpacing".split(" ").concat(b);
b=this.callSuper("toObject",b);b.styles=c(this.styles,!0);return b},set:function(b,a){this.callSuper("set",b,a);a=!1;if("object"===typeof b)for(var c in b)a=a||-1!==this._dimensionAffectingProps.indexOf(c);else a=-1!==this._dimensionAffectingProps.indexOf(b);a&&(this.initDimensions(),this.setCoords());return this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),
f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(b,a,e){if(!b)return a(null);var d=f.parseAttributes(b,f.Text.ATTRIBUTE_NAMES),g=d.textAnchor||"left";e=f.util.object.extend(e?c(e):{},d);e.top=e.top||0;e.left=e.left||0;if(d.textDecoration){var h=d.textDecoration;-1!==h.indexOf("underline")&&(e.underline=!0);-1!==h.indexOf("overline")&&(e.overline=!0);-1!==h.indexOf("line-through")&&(e.linethrough=!0);delete e.textDecoration}"dx"in d&&(e.left+=d.dx);"dy"in d&&(e.top+=d.dy);"fontSize"in e||
(e.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);d="";"textContent"in b?d=b.textContent:"firstChild"in b&&null!==b.firstChild&&"data"in b.firstChild&&null!==b.firstChild.data&&(d=b.firstChild.data);d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");b=e.strokeWidth;e.strokeWidth=0;e=new f.Text(d,e);d=e.getScaledHeight()/e.height;d*=(e.height+e.strokeWidth)*e.lineHeight-e.height;d=e.getScaledHeight()+d;h=0;"center"===g&&(h=e.getScaledWidth()/2);"right"===g&&(h=e.getScaledWidth());e.set({left:e.left-h,top:e.top-
(d-e.fontSize*(.07+e._fontSizeFraction))/e.lineHeight,strokeWidth:"undefined"!==typeof b?b:1});a(e)},f.Text.fromObject=function(b,a){return f.Object._fromObject("Text",b,a,"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text))})("undefined"!==typeof exports?exports:this);
(function(){fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(e){if(!this.styles||"undefined"!==typeof e&&!this.styles[e])return!0;e="undefined"===typeof e?this.styles:{line:this.styles[e]};for(var f in e)for(var c in e[f])for(var b in e[f][c])return!1;return!0},styleHas:function(e,f){if(!this.styles||!e||""===e||"undefined"!==typeof f&&!this.styles[f])return!1;f="undefined"===typeof f?this.styles:{0:this.styles[f]};for(var c in f)for(var b in f[c])if("undefined"!==typeof f[c][b][e])return!0;
return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var f=this.styles,c=0,b,a=!0,h=0,d;for(d in f){var g=0;for(var k in f[d]){var l=f[d][k];var n=l.hasOwnProperty(e);c++;n?(b?l[e]!==b&&(a=!1):b=l[e],l[e]===this[e]&&delete l[e]):a=!1;0!==Object.keys(l).length?g++:delete f[d][k]}0===g&&delete f[d]}for(f=0;f<this._textLines.length;f++)h+=this._textLines[f].length;a&&c===h&&(this[e]=b,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var f=this.styles,c,b;for(c in f){var a=
f[c];for(b in a)delete a[b][e],0===Object.keys(a[b]).length&&delete a[b];0===Object.keys(a).length&&delete f[c]}}},_extendStyles:function(e,f){e=this.get2DCursorLocation(e);this._getLineStyle(e.lineIndex)||this._setLineStyle(e.lineIndex);this._getStyleDeclaration(e.lineIndex,e.charIndex)||this._setStyleDeclaration(e.lineIndex,e.charIndex,{});fabric.util.object.extend(this._getStyleDeclaration(e.lineIndex,e.charIndex),f)},get2DCursorLocation:function(e,f){"undefined"===typeof e&&(e=this.selectionStart);
f=f?this._unwrappedTextLines:this._textLines;for(var c=f.length,b=0;b<c;b++){if(e<=f[b].length)return{lineIndex:b,charIndex:e};e-=f[b].length+this.missingNewlineOffset(b)}return{lineIndex:b-1,charIndex:f[b-1].length<e?f[b-1].length:e}},getSelectionStyles:function(e,f,c){"undefined"===typeof e&&(e=this.selectionStart||0);"undefined"===typeof f&&(f=this.selectionEnd||e);for(var b=[];e<f;e++)b.push(this.getStyleAtPosition(e,c));return b},getStyleAtPosition:function(e,f){e=this.get2DCursorLocation(e);
return(f?this.getCompleteStyleDeclaration(e.lineIndex,e.charIndex):this._getStyleDeclaration(e.lineIndex,e.charIndex))||{}},setSelectionStyles:function(e,f,c){"undefined"===typeof f&&(f=this.selectionStart||0);for("undefined"===typeof c&&(c=this.selectionEnd||f);f<c;f++)this._extendStyles(f,e);this._forceClearCache=!0;return this},_getStyleDeclaration:function(e,f){return(e=this.styles&&this.styles[e])?e[f]:null},getCompleteStyleDeclaration:function(e,f){e=this._getStyleDeclaration(e,f)||{};f={};
for(var c,b=0;b<this._styleProperties.length;b++)c=this._styleProperties[b],f[c]="undefined"===typeof e[c]?this[c]:e[c];return f},_setStyleDeclaration:function(e,f,c){this.styles[e][f]=c},_deleteStyleDeclaration:function(e,f){delete this.styles[e][f]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}})})();
(function(){function e(e){e.textDecoration&&(-1<e.textDecoration.indexOf("underline")&&(e.underline=!0),-1<e.textDecoration.indexOf("line-through")&&(e.linethrough=!0),-1<e.textDecoration.indexOf("overline")&&(e.overline=!0),delete e.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",
cursorDelay:1E3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,c){this.callSuper("initialize",e,c);this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0);this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length);this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,c){this[e]!==c&&(this._fireSelectionChanged(),
this[e]=c);this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed");this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor();this.clearContextTop();this.callSuper("initDimensions")},render:function(e){this.clearContextTop();this.callSuper("render",e);this.cursorOffsetCache={};this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&
this.canvas&&this.canvas.contextTop){var c=this.canvas.contextTop,b=this.canvas.viewportTransform;c.save();c.transform(b[0],b[1],b[2],b[3],b[4],b[5]);this.transform(c);this.transformMatrix&&c.transform.apply(c,this.transformMatrix);this._clearTextArea(c);e||c.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0);this.selectionStart===this.selectionEnd?this.renderCursor(e,
c):this.renderSelection(e,c);c.restore()}},_clearTextArea:function(e){var c=this.width+4,b=this.height+4;e.clearRect(-c/2,-b/2,c,b)},_getCursorBoundaries:function(e){"undefined"===typeof e&&(e=this.selectionStart);var c=this._getLeftOffset(),b=this._getTopOffset();e=this._getCursorBoundariesOffsets(e);return{left:c,top:b,leftOffset:e.left,topOffset:e.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,b=0,a=0;
var f=this.get2DCursorLocation(e);e=f.charIndex;f=f.lineIndex;for(c=0;c<f;c++)b+=this.getHeightOfLine(c);c=this._getLineLeftOffset(f);var d=this.__charBounds[f][e];d&&(a=d.left);0!==this.charSpacing&&e===this._textLines[f].length&&(a-=this._getWidthOfCharSpacing());return this.cursorOffsetCache={top:b,left:c+(0<a?a:0)}},renderCursor:function(e,c){var b=this.get2DCursorLocation(),a=b.lineIndex;b=0<b.charIndex?b.charIndex-1:0;var f=this.getValueOfPropertyAt(a,b,"fontSize"),d=this.scaleX*this.canvas.getZoom();
d=this.cursorWidth/d;var g=e.topOffset,k=this.getValueOfPropertyAt(a,b,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-f*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(e,c);c.fillStyle=this.getValueOfPropertyAt(a,b,"fill");c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity;c.fillRect(e.left+e.leftOffset-d/2,g+e.top+k,d,f)},renderSelection:function(e,c){var b=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,
a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,f=-1!==this.textAlign.indexOf("justify"),d=this.get2DCursorLocation(b),g=this.get2DCursorLocation(a);a=d.lineIndex;b=g.lineIndex;d=0>d.charIndex?0:d.charIndex;g=0>g.charIndex?0:g.charIndex;for(var k=a;k<=b;k++){var l=this._getLineLeftOffset(k)||0,n=this.getHeightOfLine(k),p=0,r=0;k===a&&(p=this.__charBounds[a][d].left);if(k>=a&&k<b)r=f&&!this.isEndOfWrapping(k)?this.width:this.getLineWidth(k)||5;else if(k===b)if(0===g)r=this.__charBounds[b][g].left;
else{var w=this._getWidthOfCharSpacing();r=this.__charBounds[b][g-1].left+this.__charBounds[b][g-1].width-w}w=n;if(1>this.lineHeight||k===b&&1<this.lineHeight)n/=this.lineHeight;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",c.fillRect(e.left+l+p,e.top+e.topOffset+n,r-p,1)):(c.fillStyle=this.selectionColor,c.fillRect(e.left+l+p,e.top+e.topOffset,r-p,n));e.topOffset+=w}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,
"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0);return{l:e.lineIndex,c:0<e.charIndex?e.charIndex-1:0}}});fabric.IText.fromObject=function(f,c){e(f);if(f.styles)for(var b in f.styles)for(var a in f.styles[b])e(f.styles[b][a]);fabric.Object._fromObject("IText",f,c,"text")}})();
(function(){var e=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler();this.initRemovedHandler();this.initCursorSelectionHandlers();this.initDoubleClickSimulation();this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing();this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",function(){var c=e.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,e._initCanvasHandlers(c)),
c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var c=e.canvas;c&&(c._iTextInstances=c._iTextInstances||[],fabric.util.removeFromArray(c._iTextInstances,e),0===c._iTextInstances.length&&(c._hasITextHandlers=!1,e._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach(function(c){c.__isMousedown=!1})};e.on("mouse:up",e._mouseUpITextHandler)},
_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,c,b,a){var f={isAborted:!1,abort:function(){this.isAborted=!0}};e.animate("_currentCursorOpacity",c,{duration:b,onComplete:function(){if(!f.isAborted)e[a]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return f.isAborted}});return f},
_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1);this._cursorTimeout1=setTimeout(function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(e){var c=this;e=e?0:this.cursorDelay;this.abortCursorAnimation();this._currentCursorOpacity=1;this._cursorTimeout2=setTimeout(function(){c._tick()},e)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,c=this.canvas;
this._currentTickState&&this._currentTickState.abort();this._currentTickCompleteState&&this._currentTickCompleteState.abort();clearTimeout(this._cursorTimeout1);clearTimeout(this._cursorTimeout2);this._currentCursorOpacity=0;e&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){this.selectionStart=0;this.selectionEnd=this._text.length;this._fireSelectionChanged();this._updateTextarea();return this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},
findWordBoundaryLeft:function(e){var c=0,b=e-1;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)c++,b--;for(;/\S/.test(this._text[b])&&-1<b;)c++,b--;return e-c},findWordBoundaryRight:function(e){var c=0,b=e;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)c++,b++;for(;/\S/.test(this._text[b])&&b<this._text.length;)c++,b++;return e+c},findLineBoundaryLeft:function(e){for(var c=0,b=e-1;!/\n/.test(this._text[b])&&-1<b;)c++,b--;return e-c},findLineBoundaryRight:function(e){for(var c=
0,b=e;!/\n/.test(this._text[b])&&b<this._text.length;)c++,b++;return e+c},searchWordBoundary:function(e,c){var b=this._text;e=this._reSpace.test(b[e])?e-1:e;for(var a=b[e],f=fabric.reNonWord;!f.test(a)&&0<e&&e<b.length;)e+=c,a=b[e];f.test(a)&&(e+=1===c?0:1);return e},selectWord:function(e){e=e||this.selectionStart;var c=this.searchWordBoundary(e,-1);e=this.searchWordBoundary(e,1);this.selectionStart=c;this.selectionEnd=e;this._fireSelectionChanged();this._updateTextarea();this.renderCursorOrSelection()},
selectLine:function(e){e=e||this.selectionStart;var c=this.findLineBoundaryLeft(e);e=this.findLineBoundaryRight(e);this.selectionStart=c;this.selectionEnd=e;this._fireSelectionChanged();this._updateTextarea();return this},enterEditing:function(e){if(!this.isEditing&&this.editable){this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas));this.isEditing=!0;this.initHiddenTextarea(e);this.hiddenTextarea.focus();this.hiddenTextarea.value=this.text;this._updateTextarea();this._saveEditingProps();
this._setEditingProps();this._textBeforeEdit=this.text;this._tick();this.fire("editing:entered");this._fireSelectionChanged();if(!this.canvas)return this;this.canvas.fire("text:editing:entered",{target:this});this.initMouseMoveHandler();this.canvas.requestRenderAll();return this}},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach(function(c){c.selected=!1;c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},
mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){e=this.getSelectionStartFromPointer(e.e);var c=this.selectionStart,b=this.selectionEnd;if(e===this.__selectionStartOnMouseDown&&c!==b||c!==e&&b!==e)if(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart!==c||this.selectionEnd!==b)this.restartCursorIfNeeded(),this._fireSelectionChanged(),
this._updateTextarea(),this.renderCursorOrSelection()}},_setEditingProps:function(){this.hoverCursor="text";this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text");this.borderColor=this.editingBorderColor;this.hasControls=this.selectable=!1;this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,c,b){var a=b.slice(0,e);a=fabric.util.string.graphemeSplit(a).length;if(e===c)return{selectionStart:a,selectionEnd:a};e=b.slice(e,c);e=fabric.util.string.graphemeSplit(e).length;
return{selectionStart:a,selectionEnd:a+e}},fromGraphemeToStringSelection:function(e,c,b){var a=b.slice(0,e).join("").length;if(e===c)return{selectionStart:a,selectionEnd:a};e=b.slice(e,c).join("").length;return{selectionStart:a,selectionEnd:a+e}},_updateTextarea:function(){this.cursorOffsetCache={};if(this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart;this.hiddenTextarea.selectionEnd=
e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={};this.text=this.hiddenTextarea.value;this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd;this.inCompositionMode||(this.selectionStart=e.selectionStart);this.updateTextareaPosition()}},
updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left;this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(e);e=this.get2DCursorLocation(e);e=this.getValueOfPropertyAt(e.lineIndex,e.charIndex,"fontSize")*this.lineHeight;var b=c.leftOffset,a=this.calcTransformMatrix();
c={x:c.left+b,y:c.top+c.topOffset+e};var h=this.canvas.getRetinaScaling(),d=this.canvas.upperCanvasEl;b=document.getElementById("canvasWrapper"+virtualclass.gObj.currWb);var g=d.width/h,k=b.height/h;h=g-e;var l=k-e;d=d.clientWidth/g;b=b.clientHeight/k;b-=30;c=fabric.util.transformPoint(c,a);c=fabric.util.transformPoint(c,this.canvas.viewportTransform);c.x*=d;c.y*=b;0>c.x&&(c.x=0);c.x>h&&(c.x=h);0>c.y&&(c.y=0);c.y>l&&(c.y=l);c.x+=this.canvas._offset.left;c.y+=this.canvas._offset.top;return{left:c.x+
"px",top:c.y+"px",fontSize:e+"px",charHeight:e}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,
this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text;this.isEditing=this.selected=!1;this.selectionEnd=this.selectionStart;this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),
this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null);this.abortCursorAnimation();this._restoreEditingProps();this._currentCursorOpacity=0;this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());this.fire("editing:exited");e&&this.fire("modified");this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this}));return this},
_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,c){e=this.get2DCursorLocation(e,!0);var b=this.get2DCursorLocation(c,!0);c=e.lineIndex;e=e.charIndex;var a=b.lineIndex;b=b.charIndex;var f,d;if(c!==a){if(this.styles[c])for(f=e;f<this._unwrappedTextLines[c].length;f++)delete this.styles[c][f];if(this.styles[a])for(f=b;f<this._unwrappedTextLines[a].length;f++)if(d=this.styles[a][f])this.styles[c]||(this.styles[c]={}),
this.styles[c][e+f-b]=d;for(f=c+1;f<=a;f++)delete this.styles[f];this.shiftLineStyles(a,c-a)}else if(this.styles[c]){d=this.styles[c];a=b-e;var g;for(f=e;f<b;f++)delete d[f];for(g in this.styles[c])c=parseInt(g,10),c>=b&&(d[c-a]=d[g],delete d[g])}},shiftLineStyles:function(f,c){var b=e(this.styles),a;for(a in this.styles){var h=parseInt(a,10);h>f&&(this.styles[h+c]=b[h],b[h-c]||delete this.styles[h])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&
!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(f,c,b,a){var h,d={},g=!1;b||(b=1);this.shiftLineStyles(f,b);this.styles[f]&&(h=this.styles[f][0===c?c:c-1]);for(var k in this.styles[f]){var l=parseInt(k,10);l>=c&&(g=!0,d[l-c]=this.styles[f][k],delete this.styles[f][k])}for(g?this.styles[f+b]=d:delete this.styles[f+b];1<b;)b--,a&&a[b]?this.styles[f+b]={0:e(a[b])}:h?this.styles[f+b]={0:e(h)}:delete this.styles[f+b];this._forceClearCache=!0},insertCharStyleObject:function(f,
c,b,a){this.styles||(this.styles={});var h=this.styles[f],d=h?e(h):{};b||(b=1);for(var g in d){var k=parseInt(g,10);k>=c&&(h[k+b]=d[k],d[k-b]||delete h[k])}this._forceClearCache=!0;if(a)for(;b--;)Object.keys(a[b]).length&&(this.styles[f]||(this.styles[f]={}),this.styles[f][c+b]=e(a[b]));else if(h)for(a=h[c?c-1:1];a&&b--;)this.styles[f][c+b]=e(a)},insertNewStyleBlock:function(e,c,b){c=this.get2DCursorLocation(c,!0);for(var a=[0],f=0,d=0;d<e.length;d++)"\n"===e[d]?(f++,a[f]=0):a[f]++;0<a[0]&&(this.insertCharStyleObject(c.lineIndex,
c.charIndex,a[0],b),b=b&&b.slice(a[0]+1));f&&this.insertNewlineStyleObject(c.lineIndex,c.charIndex+a[0],f);for(d=1;d<f;d++)0<a[d]?this.insertCharStyleObject(c.lineIndex+d,0,a[d],b):b&&(this.styles[c.lineIndex+d][0]=b[0]),b=b&&b.slice(a[d]+1);0<a[d]&&this.insertCharStyleObject(c.lineIndex+d,0,a[d],b)},setSelectionStartEndWithShift:function(e,c,b){b<=e?(c===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=
b):b>e&&b<c?"right"===this._selectionDirection?this.selectionEnd=b:this.selectionStart=b:(c===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=b)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:0>this.selectionStart&&(this.selectionStart=0);this.selectionEnd>e?this.selectionEnd=e:0>this.selectionEnd&&(this.selectionEnd=0)}})})();
fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date;this.__lastLastClickTime=+new Date;this.__lastPointer={};this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var f=e.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",e),this._stopEvent(e.e));this.__lastLastClickTime=this.__lastClickTime;this.__lastClickTime=this.__newClickTime;this.__lastPointer=f;this.__lastIsEditing=
this.isEditing;this.__lastSelected=this.selected}},isTripleClick:function(e){return 500>this.__newClickTime-this.__lastClickTime&&500>this.__lastClickTime-this.__lastLastClickTime&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler();this.initMouseupHandler();this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},
tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler);this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(e.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),
this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler);this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){this.__isMousedown=!1;if(!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||
e.e.button&&1!==e.e.button)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.__lastSelected=this.selected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var f=this.getSelectionStartFromPointer(e),c=this.selectionStart,b=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(c,b,f):this.selectionEnd=this.selectionStart=
f;this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){e=this.getLocalPointer(e);for(var f=0,c,b=c=0,a=0,h=0,d=this._textLines.length;h<d;h++)if(c<=e.y)c+=this.getHeightOfLine(h)*this.scaleY,a=h,0<h&&(b+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));else break;c=this._getLineLeftOffset(a)*this.scaleX;h=0;for(d=this._textLines[a].length;h<d;h++)if(f=c,c+=this.__charBounds[a][h].kernedWidth*this.scaleX,c<=e.x)b++;else break;return this._getNewSelectionStartFromOffset(e,
f,c,b,d)},_getNewSelectionStartFromOffset:function(e,f,c,b,a){c-=e.x;e=b+(c>e.x-f||0>c?0:1);this.flipX&&(e=a-e);e>this._text.length&&(e=this._text.length);return e}});
fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea");this.hiddenTextarea.setAttribute("autocapitalize","off");this.hiddenTextarea.setAttribute("autocorrect","off");this.hiddenTextarea.setAttribute("autocomplete","off");this.hiddenTextarea.setAttribute("spellcheck","false");this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea","");this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();
this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+e.fontSize+";";fabric.document.body.appendChild(this.hiddenTextarea);fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this));fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this));fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this));fabric.util.addListener(this.hiddenTextarea,
"copy",this.copy.bind(this));fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this));fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this));fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this));fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this));fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this));!this._clickHandlerInitialized&&
this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing&&
!this.inCompositionMode){if(e.keyCode in this.keysMap)this[this.keysMap[e.keyCode]](e);else if(e.keyCode in this.ctrlKeysMapDown&&(e.ctrlKey||e.metaKey))this[this.ctrlKeysMapDown[e.keyCode]](e);else return;e.stopImmediatePropagation();e.preventDefault();33<=e.keyCode&&40>=e.keyCode?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&
(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var f=this.fromPaste;this.fromPaste=!1;e&&e.stopPropagation();if(this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,b=this._text.length,a=c.length,h=a-b;if(""===this.hiddenTextarea.value)this.styles={};else{var d=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,
this.hiddenTextarea.value);e=this.selectionStart>d.selectionStart;if(this.selectionStart!==this.selectionEnd){var g=this._text.slice(this.selectionStart,this.selectionEnd);h+=this.selectionEnd-this.selectionStart}else a<b&&(g=e?this._text.slice(this.selectionEnd+h,this.selectionEnd):this._text.slice(this.selectionStart,this.selectionStart-h));c=c.slice(d.selectionEnd-h,d.selectionEnd);g&&g.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):
e?this.removeStyleFromTo(this.selectionEnd-g.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+g.length));c.length&&(f&&c.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste?this.insertNewStyleBlock(c,this.selectionStart,fabric.copiedTextStyle):this.insertNewStyleBlock(c,this.selectionStart))}this.updateFromTextArea();this.fire("changed");this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=
!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart;this.compositionEnd=e.target.selectionEnd;this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=fabric.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&
e.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(e,f){var c=this._getLineLeftOffset(e);0<f&&(e=this.__charBounds[e][f-1],c+=e.left+e.width);return c},getDownCursorOffset:function(e,f){var c=this._getSelectionForOffset(e,f),b=this.get2DCursorLocation(c);f=b.lineIndex;if(f===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-c;e=b.charIndex;c=this._getWidthBeforeCursor(f,e);c=this._getIndexOnLine(f+1,c);return this._textLines[f].slice(e).length+
c+1+this.missingNewlineOffset(f)},_getSelectionForOffset:function(e,f){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,f){var c=this._getSelectionForOffset(e,f),b=this.get2DCursorLocation(c);f=b.lineIndex;if(0===f||e.metaKey||33===e.keyCode)return-c;c=b.charIndex;e=this._getWidthBeforeCursor(f,c);e=this._getIndexOnLine(f-1,e);c=this._textLines[f].slice(0,c);b=this.missingNewlineOffset(f-1);return-this._textLines[f-1].length+
e-c.length+(1-b)},_getIndexOnLine:function(e,f){for(var c=this._textLines[e],b=this._getLineLeftOffset(e),a=0,h,d,g=0,k=c.length;g<k;g++)if(h=this.__charBounds[e][g].width,b+=h,b>f){d=!0;a=Math.abs(b-f)<Math.abs(b-h-f)?g:g-1;break}d||(a=c.length-1);return a},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",
e)},_moveCursorUpOrDown:function(e,f){e=this["get"+e+"CursorOffset"](f,"right"===this._selectionDirection);f.shiftKey?this.moveCursorWithShift(e):this.moveCursorWithoutShift(e);0!==e&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+
e:this.selectionEnd+e);return 0!==e},moveCursorWithoutShift:function(e){0>e?this.selectionEnd=this.selectionStart+=e:this.selectionStart=this.selectionEnd+=e;return 0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,f,c){if(e.altKey)e=this["findWordBoundary"+c](this[f]);else if(e.metaKey||35===e.keyCode||36===e.keyCode)e=this["findLineBoundary"+c](this[f]);else return this[f]+="Left"===c?-1:1,!0;if(this[f]!==e)return this[f]=
e,!0},_moveLeft:function(e,f){return this._move(e,f,"Left")},_moveRight:function(e,f){return this._move(e,f,"Right")},moveCursorLeftWithoutShift:function(e){var f=!0;this._selectionDirection="left";this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(f=this._moveLeft(e,"selectionStart"));this.selectionEnd=this.selectionStart;return f},moveCursorLeftWithShift:function(e){if("right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd)return this._moveLeft(e,"selectionEnd");
if(0!==this.selectionStart)return this._selectionDirection="left",this._moveLeft(e,"selectionStart")},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,f){e="moveCursor"+e+"With";this._currentCursorOpacity=1;e=f.shiftKey?e+"Shift":e+"outShift";this[e](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){if("left"===
this._selectionDirection&&this.selectionStart!==this.selectionEnd)return this._moveRight(e,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(e,"selectionEnd")},moveCursorRightWithoutShift:function(e){var f=!0;this._selectionDirection="right";this.selectionStart===this.selectionEnd?(f=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd;return f},removeChars:function(e,f){"undefined"===
typeof f&&(f=e+1);this.removeStyleFromTo(e,f);this._text.splice(e,f-e);this.text=this._text.join("");this.set("dirty",!0);this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());this._removeExtraneousStyles()},insertChars:function(e,f,c,b){"undefined"===typeof b&&(b=c);b>c&&this.removeStyleFromTo(c,b);e=fabric.util.string.graphemeSplit(e);this.insertNewStyleBlock(e,c,f);this._text=[].concat(this._text.slice(0,c),e,this._text.slice(b));this.text=this._text.join("");this.set("dirty",
!0);this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());this._removeExtraneousStyles()}});
(function(){var e=fabric.util.toFixed,f=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets();c=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var b=this.getSvgTextDecoration(this);
return[c.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",b?'text-decoration="'+b+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",c.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(c,b){var a=[],e=[];this._setSVGBg(e);for(var d=0,
f=this._textLines.length;d<f;d++){var k=this._getLineLeftOffset(d);(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(e,d,b+k,c);this._setSVGTextLineText(a,d,b+k,c);c+=this.getHeightOfLine(d)}return{textSpans:a,textBgRects:e}},_createTextCharSpan:function(c,b,a,h){var d=c!==c.trim()||c.match(f);d=(d=this.getSvgSpanStyles(b,d))?'style="'+d+'"':"";b=b.deltaY;var g="",k=fabric.Object.NUM_FRACTION_DIGITS;b&&(g=' dy="'+e(b,k)+'" ');return['<tspan x="',e(a,k),'" y="',
e(h,k),'" ',g,d,">",fabric.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,b,a,e){var d=this.getHeightOfLine(b),f=-1!==this.textAlign.indexOf("justify"),h="",l=0,n=this._textLines[b];e+=d*(1-this._fontSizeFraction)/this.lineHeight;d=0;for(var p=n.length-1;d<=p;d++){var r=d===p||this.charSpacing;h+=n[d];var w=this.__charBounds[b][d];0===l?(a+=w.kernedWidth-w.width,l+=w.width):l+=w.kernedWidth;f&&!r&&this._reSpaceAndTab.test(n[d])&&(r=!0);if(!r){var u=u||this.getCompleteStyleDeclaration(b,
d);var A=this.getCompleteStyleDeclaration(b,d+1);r=this._hasStyleChangedForSvg(u,A)}r&&(u=this._getStyleDeclaration(b,d)||{},c.push(this._createTextCharSpan(h,u,a,e)),h="",u=A,a+=l,l=0)}},_pushTextBgRect:function(c,b,a,f,d,g){var h=fabric.Object.NUM_FRACTION_DIGITS;c.push("\t\t<rect ",this._getFillAttributes(b),' x="',e(a,h),'" y="',e(f,h),'" width="',e(d,h),'" height="',e(g,h),'"></rect>\n')},_setSVGTextLineBg:function(c,b,a,e){for(var d=this._textLines[b],f=this.getHeightOfLine(b)/this.lineHeight,
h=0,l=0,n,p=this.getValueOfPropertyAt(b,0,"textBackgroundColor"),r=0,w=d.length;r<w;r++)d=this.__charBounds[b][r],n=this.getValueOfPropertyAt(b,r,"textBackgroundColor"),n!==p?(p&&this._pushTextBgRect(c,p,a+l,e,h,f),l=d.left,h=d.width,p=n):h+=d.kernedWidth;n&&this._pushTextBgRect(c,n,a+l,e,h,f)},_getFillAttributes:function(c){var b=c&&"string"===typeof c?new fabric.Color(c):"";return b&&b.getSource()&&1!==b.getAlpha()?'opacity="'+b.getAlpha()+'" fill="'+b.setAlpha(1).toRgb()+'"':'fill="'+c+'"'},_getSVGLineTopOffset:function(c){for(var b=
0,a=0;a<c;a++)b+=this.getHeightOfLine(a);c=this.getHeightOfLine(a);return{lineTop:b,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){return fabric.Object.prototype.getSvgStyles.call(this,c)+" white-space: pre;"}})})();
(function(e){var f=e.fabric||(e.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),
this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var b=0,a=0,e=0,d={},f=0;f<c.graphemeLines.length;f++)"\n"===c.graphemeText[e]&&0<f?(a=0,e++,b++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[e])&&0<f&&(a++,e++),d[f]={line:b,offset:a},e+=c.graphemeLines[f].length,a+=c.graphemeLines[f].length;
return d},styleHas:function(c,b){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[b];a&&(b=a.line)}return f.Text.prototype.styleHas.call(this,c,b)},isEmptyStyles:function(c){if(!this.styles)return!0;var b=0,a=!1,e=this._styleMap[c],d=this._styleMap[c+1];e&&(c=e.line,b=e.offset);if(d){var f=d.line;a=f===c;f=d.offset}c="undefined"===typeof c?this.styles:{line:this.styles[c]};for(var k in c)for(var l in c[k])if(l>=b&&(!a||l<f))for(var n in c[k][l])return!1;return!0},_getStyleDeclaration:function(c,
b){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[c];if(!a)return null;c=a.line;b=a.offset+b}return this.callSuper("_getStyleDeclaration",c,b)},_setStyleDeclaration:function(c,b,a){var e=this._styleMap[c];c=e.line;b=e.offset+b;this.styles[c][b]=a},_deleteStyleDeclaration:function(c,b){var a=this._styleMap[c];c=a.line;b=a.offset+b;delete this.styles[c][b]},_getLineStyle:function(c){return!!this.styles[this._styleMap[c].line]},_setLineStyle:function(c){this.styles[this._styleMap[c].line]=
{}},_wrapText:function(c,b){var a=[],e;this.isWrapping=!0;for(e=0;e<c.length;e++)a=a.concat(this._wrapLine(c[e],e,b));this.isWrapping=!1;return a},_measureWord:function(c,b,a){var e=0;a=a||0;for(var d=0,f=c.length;d<f;d++){var k=this._getGraphemeBox(c[d],b,d+a,k,!0);e+=k.kernedWidth;k=c[d]}return e},_wrapLine:function(c,b,a,e){var d=0,g=this.splitByGrapheme,h=[],l=[];c=g?f.util.string.graphemeSplit(c):c.split(this._wordJoiners);var n=0,p=g?"":" ",r=0,w=0,u=!0,A=g?0:this._getWidthOfCharSpacing();e=
e||0;0===c.length&&c.push([]);a-=e;for(var t=0;t<c.length;t++){var z=g?c[t]:f.util.string.graphemeSplit(c[t]);var B=this._measureWord(z,b,n);n+=z.length;d+=r+B-A;d>=a&&!u?(h.push(l),l=[],d=B,u=!0):d+=A;u||g||l.push(p);l=l.concat(z);r=this._measureWord([p],b,n);n++;u=!1;B>w&&(w=B)}t&&h.push(l);w+e>this.dynamicMinWidth&&(this.dynamicMinWidth=w-A+e);return h},isEndOfWrapping:function(c){return this._styleMap[c+1]&&this._styleMap[c+1].line===this._styleMap[c].line?!1:!0},missingNewlineOffset:function(c){return this.splitByGrapheme?
this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){c=f.Text.prototype._splitTextIntoLines.call(this,c);for(var b=this._wrapText(c.lines,this.width),a=Array(b.length),e=0;e<b.length;e++)a[e]=b[e].join("");c.lines=a;c.graphemeLines=b;return c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={},b;for(b in this._styleMap)this._textLines[b]&&(c[this._styleMap[b].line]=1);for(b in this.styles)c[b]||delete this.styles[b]},toObject:function(c){return this.callSuper("toObject",
["minWidth","splitByGrapheme"].concat(c))}});f.Textbox.fromObject=function(c,b){return f.Object._fromObject("Textbox",c,b,"text")}})("undefined"!==typeof exports?exports:this);
